- en: Designing a Photo Filter and Review Form
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计照片滤镜和评论表单
- en: 'We have been progressing the last four chapters with our design. We wrap up
    the design setup in the chapter. In this chapter, we are going to set up two View
    Controllers. One will take care of our Photo filter and add photos to a restaurant.
    Our second View Controller is the form we use for users to create restaurant reviews.
    Finally, we will look at how to refactor storyboards. We will cover the following
    in this chapter:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经用我们的设计推进了前四章。我们在这一章中总结了设计设置。在这一章中，我们将设置两个视图控制器。一个将负责我们的照片滤镜并添加照片到餐厅。我们的第二个视图控制器是用户创建餐厅评论的表单。最后，我们将探讨如何重构故事板。本章我们将涵盖以下内容：
- en: Creating our Photo Filter View
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建我们的照片滤镜视图
- en: Creating our Review form
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建我们的评论表单
- en: Refactoring storyboards
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重构故事板
- en: Setting up our View Controllers
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置我们的视图控制器
- en: 'When we set up our structure, we created a View Controller with a label that
    says `Review`. This was done just to see the structure, but we removed the button
    tapping to the review controller. We currently have two buttons on our Restaurant
    Detail page: Add Photo and Add Review. Both of these buttons need to have View
    Controllers connected to them. Our Add Photo hooks up to a View Controller where
    we launch the user''s camera and our Add Review hooks up to a static `tableview`.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们设置我们的结构时，我们创建了一个带有“Review”标签的视图控制器。这样做只是为了查看结构，但我们已经移除了按钮点击到评论控制器。我们目前在餐厅详情页上有两个按钮：添加照片和添加评论。这两个按钮都需要连接到视图控制器。我们的添加照片按钮连接到一个视图控制器，在那里我们启动用户的相机，而添加评论按钮连接到一个静态的`tableview`。
- en: 'Let''s work on the Add Photo button first:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先处理添加照片按钮：
- en: Open the `Main.storyboard` and find the View Controller that has the label Reviews
    and delete the label.
  id: totrans-8
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开`Main.storyboard`，找到标签为“Reviews”的视图控制器，并删除该标签。
- en: Select the View Controller, then navigate to Editor | Embed In | Navigation
    Controller. This View Controller will now be our Photo Filter View Controller.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择视图控制器，然后转到编辑器 | 嵌入 | 导航控制器。这个视图控制器现在将是我们的照片滤镜视图控制器。
- en: In the Restaurant Detail View, find the Table View Cell that contains the Add
    Photo label and button.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在餐厅详情视图中，找到包含添加照片标签和按钮的表格视图单元格。
- en: Open up the disclosure arrows and *Ctrl* + drag from the button that we placed
    inside the container to the Navigation controller we just added; under Action
    Segue, select Present Modally.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开展开箭头，并使用*Ctrl*键拖动我们放在容器内的按钮到我们刚刚添加的导航控制器；在动作切换下，选择模态呈现。
- en: '![](img/f921417c-5553-49cb-9c22-ba05a9b3e547.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f921417c-5553-49cb-9c22-ba05a9b3e547.png)'
- en: 'Next, let''s set up this View Controller. Before we start setting up let''s
    talk about what needs to be done next. In this controller, we want the user to
    be able to take a picture or pick a photo from their *Photos* app and add it.
    Once they select the photo, we want them to be able to apply a filter to their
    photo and then save it to the device. This view needs two primary things: a way
    to scroll the filter items and an image that displays the selected photo and filter.
    We could use a scroll view to do this, but later in the book we want to add drag
    and drop to the iPad, so collection view is the easier way. Now that you have
    a better idea of the direction, let''s set up our UI.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们设置这个视图控制器。在我们开始设置之前，让我们谈谈接下来需要做什么。在这个控制器中，我们希望用户能够拍照或从他们的*照片*应用中选择照片并添加。一旦他们选择了照片，我们希望他们能够将滤镜应用到照片上，并将其保存到设备上。这个视图需要两个主要的东西：一个滚动滤镜项的方式和一个显示所选照片和滤镜的图像。我们可以使用滚动视图来做这件事，但本书稍后我们将添加拖放到iPad的功能，所以集合视图是更简单的方法。现在你对方向有了更好的了解，让我们设置我们的UI。
- en: Adding our Photo Filter View
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加我们的照片滤镜视图
- en: 'The Photo Filter View is where we show the selected image and a collection
    view, from which the user can choose different filters to apply to the image.
    Let''s create the Photo Filter View:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 照片滤镜视图是我们展示所选图像和集合视图的地方，用户可以从其中选择不同的滤镜应用到图像上。让我们创建照片滤镜视图：
- en: Select the View Controller for the Photo Filter View and, in the Attributes
    inspector, uncheck both Under Top Bars and Under Bottom Bars. We do not want this
    page to scroll, so we do not need it to go under the Top and Bottom Bars.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择照片滤镜视图控制器，然后在属性检查器中取消选中“在顶部栏下”和“在底部栏下”两个选项。我们不希望这个页面可以滚动，所以我们不需要它位于顶部和底部栏下。
- en: In the `Main.storyboard`, type `bar button` into the filter field of the object
    library in the Utilities panel.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Main.storyboard`中，在实用工具面板中对象库的过滤器字段中输入`bar button`。
- en: 'Drag out three Bar Button Items. One will go to the top left and two on the
    top right. When you are done, you should see the following:'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 拖出三个栏按钮项。一个将放在左上角，两个在右上角。当你完成时，你应该看到以下内容：
- en: '![](img/90feaf80-598f-40c8-af3d-bb1b1418791e.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](img/90feaf80-598f-40c8-af3d-bb1b1418791e.png)'
- en: Our button to the left is a Cancel button. Our button to the right is a Camera
    icon and a save button. You can update each one by selecting one at a time and
    opening the Attributes inspector.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们左侧的按钮是取消按钮。我们右侧的按钮是相机图标和保存按钮。你可以通过逐个选择并打开属性检查器来更新每一个。
- en: '![](img/0e4575fe-aa96-49b9-8228-60f74d1af8b6.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e4575fe-aa96-49b9-8228-60f74d1af8b6.png)'
- en: 'When you are done, you should see the following:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成时，你应该看到以下内容：
- en: '![](img/467bf131-1668-4c2c-8d0d-896de1e4349e.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/467bf131-1668-4c2c-8d0d-896de1e4349e.png)'
- en: Next, type `image` into the filter field of the object library in the Utilities
    panel.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在实用工具面板中的对象库的过滤器字段中输入`image`。
- en: Then, drag an Image View into the View Controller.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，将一个图像视图拖入视图控制器。
- en: 'Select the Collection View in the Outline view, open the Size inspector in
    the Utilities panel, and then add the following values:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中选择集合视图，在实用工具面板中打开大小检查器，然后添加以下值：
- en: 'X: `0`'
  id: totrans-27
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`0`
- en: 'Y: `0`'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`0`
- en: 'Width: `375`'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`375`
- en: 'Height: `400`'
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`400`
- en: Now, type `collection` into the filter field of the object library in the Utilities
    panel.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在实用工具面板中的对象库的过滤器字段中输入`collection`。
- en: Then, drag a Collection View into the View Controller.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，将一个集合视图拖入视图控制器。
- en: 'Select the Collection View in the Outline view, open the Size inspector in
    the Utilities panel, and then add the following values:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中选择集合视图，在实用工具面板中打开大小检查器，然后添加以下值：
- en: 'X: `0`'
  id: totrans-34
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`0`
- en: 'Y: `400`'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`400`
- en: 'Width: `375`'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`375`
- en: 'Height: `203`'
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`203`
- en: 'When you are done, your View Controller should look like mine:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成时，你的视图控制器应该看起来像我的：
- en: '![](img/02193a98-4d0d-4290-b6b6-a91da2b7a3e1.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/02193a98-4d0d-4290-b6b6-a91da2b7a3e1.png)'
- en: Next, let's add Auto Layout to our views.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们为我们的视图添加自动布局。
- en: Adding Auto Layout for the Photo Filter View
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为照片滤镜视图添加自动布局
- en: 'Next, let''s apply Auto Layout to the Photo Filter View:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们将自动布局应用到照片滤镜视图：
- en: 'In the Outline view, select the Image View and then the Pin icon. Enter the
    following values:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中，选择图像视图然后选择固定图标。输入以下值：
- en: 'Top: `0`'
  id: totrans-44
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`0`
- en: 'Left: `0`'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左：`0`
- en: 'Right: `0`'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右：`0`
- en: 'Constrain to margins: unchecked'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制到边距：未勾选
- en: 'Height: `400` (checked)'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`400`（勾选）
- en: Click Add 4 Constraints.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: 'Next, select the Collection View and enter the following values:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择集合视图并输入以下值：
- en: 'Left: `0`'
  id: totrans-51
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左：`0`
- en: 'Bottom: `0`'
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 底部：`0`
- en: 'Right: `0`'
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右：`0`
- en: 'Bottom: `0`'
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 底部：`0`
- en: 'Constrain to margins: unchecked'
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制到边距：未勾选
- en: Click Add 4 Constraints.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: We are now with the Photo Filter View Controller. Next, we need to create our
    cell for our Collection View. Let's set this up next.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在处于照片滤镜视图控制器。接下来，我们需要为我们的集合视图创建我们的单元格。让我们接下来设置这个。
- en: Creating the Photo Filter View cell
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建照片滤镜视图单元格
- en: Since we are using a collection view to scroll our elements, we need to add
    a custom cell as well.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们使用集合视图来滚动元素，因此我们还需要添加一个自定义单元格。
- en: 'Select the prototype cell inside of the Collection View:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在集合视图内部选择原型单元格：
- en: '![](img/88e3d798-6a43-44e2-a570-57569011ea7b.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/88e3d798-6a43-44e2-a570-57569011ea7b.png)'
- en: Under the Attributes inspector, update the Identifier to `filterCell`.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在属性检查器下，更新标识符为`filterCell`。
- en: 'Next, select the Collection View, open the Size inspector in the Utilities
    panel, and under Cell Size, set the following values:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择集合视图，在实用工具面板中打开大小检查器，然后在单元格大小下设置以下值：
- en: 'Width: `116`'
  id: totrans-64
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`116`
- en: 'Height: `` `203` ``'
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`` `203` ``
- en: In the `Main.storyboard`, type `image` into the filter field of the Object library
    in the Utilities panel.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Main.storyboard`中，在实用工具面板中的对象库的过滤器字段中输入`image`。
- en: Drag out the image into the cell.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将图像拖出单元格。
- en: 'Select the Image View in the Outline view, open the Size inspector in the Utilities
    panel, and then add the following values:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中选择图像视图，在实用工具面板中打开大小检查器，然后添加以下值：
- en: 'X: `0`'
  id: totrans-69
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`0`
- en: 'Y: `0`'
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`0`
- en: 'Width: `116`'
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`116`
- en: 'Height: `177`'
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`177`
- en: Next, type `label` into the filter field of the object library in the Utilities
    panel.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在实用工具面板中的对象库的过滤器字段中输入`label`。
- en: Drag out the label into the cell.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将标签拖入单元格。
- en: 'Select the label in the Outline view, open the Size inspector in the Utilities
    panel, and then add the following values:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中选择标签，在实用工具面板中打开大小检查器，然后添加以下值：
- en: 'X: `5`'
  id: totrans-76
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`5`
- en: 'Y: `179`'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`179`
- en: 'Width: `106`'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`106`
- en: 'Height: `21`'
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`21`
- en: Now, with the label still selected, open the Attributes inspector; set the Font
    to Avenir Next Condensed Regular 17.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，仍然选择标签，打开属性检查器；将字体设置为Avenir Next Condensed Regular 17。
- en: Set the Text Alignment to Center.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置文本对齐为居中。
- en: We are done adding elements to our cell; let's add our Auto Layout next.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经完成了对单元格元素的添加；让我们添加我们的自动布局。
- en: Adding Auto Layout to our Photo Filter cell
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为我们的照片滤镜单元格添加自动布局
- en: Next, we want to add auto layout to our cell.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们想要在我们的单元格中添加自动布局。
- en: 'In the Outline view, select the Image View and then the Pin icon. Enter the
    following values:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中，选择图像视图，然后选择固定图标。输入以下值：
- en: 'Top: `0`'
  id: totrans-86
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`0`
- en: 'Left: `0`'
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左：`0`
- en: 'Right: `0`'
  id: totrans-88
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右：`0`
- en: 'Constrain to margins: unchecked'
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制到边距：未勾选
- en: 'Height: `177` (checked)'
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`177`（已勾选）
- en: Click Add 4 Constraints.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: 'Next, select the label and enter the following values:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择标签并输入以下值：
- en: 'Left: `5`'
  id: totrans-93
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左：`5`
- en: 'Right: `5`'
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右：`5`
- en: 'Top: `2`'
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`2`
- en: 'Height: `21`'
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`21`
- en: 'Constrain to margins: unchecked'
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制到边距：未勾选
- en: Click Add 4 Constraints.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: Our cell setup is complete. We have one more View Controller to do and that
    is our Add Review section.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的单元格设置已完成。我们还有一个视图控制器要做，那就是我们的添加评论部分。
- en: Creating reviews
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建评论
- en: We have a form that users can use to write reviews. This Create Review form
    takes a title, a name, a rating, and a review.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一个用户可以用来写评论的表单。这个创建评论表单需要标题、名称、评分和评论。
- en: To create this form, we use a static Table View as we did with restaurant details.
    Using a Table View makes it easier for us, because the static Table View comes
    with a lot of built-in functionality that we do not need to code. For example,
    keyboard dismissal and scrolling the View when a text area is tapped are all built
    into the static Table View.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建这个表单，我们使用静态表格视图，就像我们处理餐厅详情时一样。使用表格视图使我们更容易操作，因为静态表格视图包含许多内置功能，我们不需要编写代码。例如，当文本区域被点击时，键盘关闭和视图滚动都是静态表格视图内置的。
- en: Setting up the Review storyboard
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置评论故事板
- en: 'We will be creating a form into which users can enter their name, title, rating
    and a review. We will need a static table view for our form so we will need to
    drag out a navigation controller:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将创建一个表单，用户可以在其中输入他们的姓名、标题、评分和评论。我们需要一个静态表格视图来构建我们的表单，因此我们需要拖出一个导航控制器：
- en: In the `Main.storyboard`, type navigation into the filter field of the object
    library in the Utilities panel.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Main.storyboard`中，在实用工具面板中对象库的过滤器字段中输入导航。
- en: Drag out a navigation controller. This will have a Table View Controller attached
    to it and that's what we want.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 拖出一个导航控制器。这将有一个表格视图控制器附加到它上，这正是我们想要的。
- en: Find the Add Review button in the Outline. Open up the disclosure arrows and
    CTL drag from the button that we placed inside the container to the Navigation
    Controller we just added; under Action Segue, select Present Modally.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲中找到添加评论按钮。展开展开箭头，并使用CTL键从容器内放置的按钮拖动到我们刚刚添加的导航控制器；在动作转换下选择呈现模态。
- en: 'When you are done, you will see the following:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 当你完成时，你会看到以下内容：
- en: '![](img/f414f7c7-e80a-4cae-9a70-0699d4f0eb93.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f414f7c7-e80a-4cae-9a70-0699d4f0eb93.png)'
- en: Next, we need to update our Table View.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要更新我们的表格视图。
- en: Creating a Review form
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建评论表单
- en: 'Let''s now set up this static Table View:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在设置这个静态表格视图：
- en: In the Outline view, select the Table View that we just added, and then open
    the Attributes inspector in the Utilities panel.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在大纲视图中，选择我们刚刚添加的表格视图，然后在实用工具面板中打开属性检查器。
- en: Under Table View, update Content from Dynamic Prototypes to Static Cells.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表格视图下，将内容从动态原型更新到静态单元格。
- en: Next, select the Table View section in the Outline view.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在大纲视图中选择表格视图部分。
- en: Under Table View section in the Attributes inspector, update Rows to `4`, and
    then hit *Enter*.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在属性检查器中的表格视图部分下，更新行数为`4`，然后按*Enter*键。
- en: Now, select the Size inspector in the Utilities panel and, under select the
    first Table View cell, update Row Height to `50`. Then, hit *Enter*.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在实用工具面板中选择大小检查器，并在选择第一个表格视图单元格后，更新行高为`50`。然后，按*Enter*键。
- en: Finally, select the last cell and update the Row Height to `190`. Then, hit
    *Enter*.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，选择最后一个单元格，并将行高更新为`190`。然后，按*Enter*键。
- en: 'You should now have the following:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在应该有以下内容：
- en: '![](img/82e3f81a-d9a1-40da-b439-63812e17da7d.png)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![](img/82e3f81a-d9a1-40da-b439-63812e17da7d.png)'
- en: Next, we need to update the inside of each Table View cell.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要更新每个表格视图单元格的内部。
- en: Updating the Review cells
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新评论单元格
- en: To know what we need in each cell, we need to look at the design and then match
    our storyboard to the design. Looking at the design we discussed earlier in this
    chapter, in our first cell, we need an image and a label. In our second and third
    cells, we need a text field, and, in our last cell, we need a text view. When
    working with static cells, you may notice that, sometimes, you cannot drag out
    UI elements directly into the cell in the scene. If you encounter this issue,
    just drag them into the cell in the Outline view.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 要知道每个单元格中需要什么，我们需要查看设计，然后使我们的故事板与设计相匹配。查看本章前面讨论的设计，在我们的第一个单元格中，我们需要一个图像和一个标签。在我们的第二个和第三个单元格中，我们需要一个文本字段，而在我们的最后一个单元格中，我们需要一个文本视图。当与静态单元格一起工作时，你可能注意到，有时你无法直接将UI元素拖入场景中的单元格。如果你遇到这个问题，只需将它们拖入“大纲”视图中的单元格即可。
- en: Updating our first cell
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新我们的第一个单元格
- en: 'Let''s start with updating our first cell and look into the factors involved:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从更新我们的第一个单元格开始，并探讨涉及的因素：
- en: In the object library of the Utilities panel, type label in the filter field
    and then drag a label into the first cell.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“实用工具”面板的对象库中，在过滤器字段中输入“标签”，然后将一个标签拖入第一个单元格。
- en: Then, type `image` into the filter and drag the image into the first cell.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，在过滤器中输入`image`并将图像拖入第一个单元格。
- en: Next, type text into the filter and drag one Text Field into the second cell
    and one Text Field into the third cell.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在过滤器中输入“文本”，并将一个文本字段拖入第二个单元格，另一个文本字段拖入第三个单元格。
- en: Finally, drag a Text View into the fourth cell.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，将一个文本视图拖入第四个单元格。
- en: Do not concern yourself with the positioning of your elements at this time,
    as we are going to fix their positions shortly.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在此阶段，不要担心元素的定位，因为我们很快就会修复它们的定位。
- en: We now have all the elements we need for this form and just need to position
    them correctly. You should be getting comfortable with positioning elements in
    a cell (as well as applying Auto Layout), as we have done this quite a bit in
    the last couple of chapters.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在拥有了构建此表单所需的所有元素，只需正确地放置它们。你应该已经熟悉了在单元格中定位元素（以及应用自动布局），因为我们已经在上一章中做了很多这样的操作。
- en: Positioning UI elements
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定位UI元素
- en: 'Let''s now place all of our elements into the correct spots:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们将所有元素放置到正确的位置：
- en: In the Outline view, select the Text Field inside the second cell.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“大纲”视图中，选择第二个单元格内的文本字段。
- en: 'Select the Size inspector in the Utilities panel and add the following values:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“实用工具”面板中选择“大小检查器”，并添加以下值：
- en: 'X: `16`'
  id: totrans-136
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`16`
- en: 'Y: `0`'
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`0`
- en: 'Width: `350`'
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`350`
- en: 'Height: `44`'
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`44`
- en: Open the Attributes inspector and, under Text Field, update Placeholder to say
    `Title`. Then, hit *Enter*. Also, set Font to Avenir Next Condensed Regular 17.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开“属性检查器”，在“文本字段”下，将占位符更新为“Title”。然后按*Enter*。还将字体设置为Avenir Next Condensed Regular
    17。
- en: In the Outline view, select the Text Field inside the third cell.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“大纲”视图中，选择第三个单元格内的文本字段。
- en: 'Select the Size inspector in the Utilities panel and add the following values:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“实用工具”面板中选择“大小检查器”，并添加以下值：
- en: 'X: `16`'
  id: totrans-143
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`16`
- en: 'Y: `0`'
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`0`
- en: 'Width: `350`'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`350`
- en: 'Height: `44`'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`44`
- en: Open the Attributes inspector and, under Text Field, update Placeholder to say
    `Name`. Then, hit *Enter*. Also, set Font to Avenir Next Condensed Regular 17.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开“属性检查器”，在“文本字段”下，将占位符更新为“Name”。然后按*Enter*。还将字体设置为Avenir Next Condensed Regular
    17。
- en: In the first cell, update the Image field to say `0star` and then hit *Enter*.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第一个单元格中，将图像字段更新为“0star”，然后按*Enter*。
- en: 'Next, in the Size inspector, add the following values:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在“大小检查器”中添加以下值：
- en: 'X: `133`'
  id: totrans-150
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`133`
- en: 'Y: `7`'
  id: totrans-151
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`7`
- en: 'Width: `108`'
  id: totrans-152
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`108`
- en: 'Height: `17`'
  id: totrans-153
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`17`
- en: Update the Image field to `0star`, and then hit *Enter*.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将图像字段更新为“0star”，然后按*Enter*。
- en: 'Select the label in the first cell, and update the following values in the
    Size inspector:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择第一个单元格中的标签，并在“大小检查器”中更新以下值：
- en: 'X: `97`'
  id: totrans-156
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`97`
- en: 'Y: `25`'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`25`
- en: 'Width: `181`'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`181`
- en: 'Height: `` `21` ``'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`21`
- en: Open the Attributes inspector and, under Text, update Label to say Tap a Star
    to Rate. Then, hit *Enter*. Also, set Font to Avenir Next Condensed Regular 12.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开“属性检查器”，在“文本”下，将标签更新为“Tap a Star to Rate”。然后按*Enter*。还将字体设置为Avenir Next Condensed
    Regular 12。
- en: 'Next, in the last cell, select the Text Field; then, in the Size inspector,
    add the following values:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在最后一个单元格中，选择文本字段；然后在“大小检查器”中添加以下值：
- en: 'X: `5`'
  id: totrans-162
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: X：`5`
- en: 'Y: `5`'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y：`5`
- en: 'Width: `365`'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`365`
- en: 'Height: `179`'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`179`
- en: Lastly, select the Attributes inspector; then, under Text, change Font to Avenir
    Next Condensed Regular size `14`.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，选择“属性检查器”；然后在“文本”下，将字体更改为Avenir Next Condensed Regular大小`14`。
- en: 'Your cells should now look as follows:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 你的单元格现在应该看起来如下：
- en: '![](img/230717de-e45a-45cd-ae22-1aa3e1ae09c9.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/230717de-e45a-45cd-ae22-1aa3e1ae09c9.png)'
- en: Your cells' UI elements are now positioned correctly and we just need to set
    up Auto Layout.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 您的单元格UI元素现在已正确定位，我们只需设置自动布局。
- en: Adding Auto Layout for creating reviews
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为创建评论添加自动布局
- en: 'Let''s now add Auto Layout to our form:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在为我们的表单添加自动布局：
- en: 'In the first cell, select the Image View and then select the Pin icon. Enter
    the following values:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第一个单元格中，选择图像视图，然后选择固定图标。输入以下值：
- en: 'Top: `7`'
  id: totrans-173
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`7`
- en: 'Width: `108` (checked)'
  id: totrans-174
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`108`（已勾选）
- en: 'Height: `17` (checked)'
  id: totrans-175
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`17`（已勾选）
- en: Click Add 3 Constraints.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加3个约束。
- en: Next, select the Align icon, then check the Horizontally in Container.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择对齐图标，然后勾选容器中的水平对齐。
- en: 'Now, select the label under the Image View and then select the Pin icon. Enter
    the following values:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，选择图像视图下的标签，然后选择固定图标。输入以下值：
- en: 'Top: `1`'
  id: totrans-179
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`1`
- en: 'Width: `181` (checked)'
  id: totrans-180
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宽度：`181`（已勾选）
- en: 'Height: `18` (checked)'
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`18`（已勾选）
- en: Click Add 3 Constraints.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加3个约束。
- en: Next, select the Align icon, then check the Horizontally in Container.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择对齐图标，然后勾选容器中的水平对齐。
- en: Click Add 1 Constraint.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加1个约束。
- en: 'Next, select the Text Field in the second cell and then the Pin icon. Enter
    the following values:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在第二个单元格中选择文本字段，然后选择固定图标。输入以下值：
- en: 'Top: `0`'
  id: totrans-186
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`0`
- en: 'Right: `8`'
  id: totrans-187
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右侧：`8`
- en: 'Left: `16`'
  id: totrans-188
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左侧：`16`
- en: 'Height: `44` (checked)'
  id: totrans-189
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`44`（已勾选）
- en: Click Add 4 Constraints.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: 'Now, select the Text Field in the third cell and then the Pin icon. Enter the
    following values:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，选择第三个单元格中的文本字段，然后选择固定图标。输入以下值：
- en: 'Top: `0`'
  id: totrans-192
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`0`
- en: 'Right: `8`'
  id: totrans-193
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右侧：`8`
- en: 'Left: `16`'
  id: totrans-194
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左侧：`16`
- en: 'Height: `44` (checked)'
  id: totrans-195
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高度：`44`（已勾选）
- en: Click Add 4 Constraints.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: 'Finally, select the Text View in the third cell and then the Pin icon. Enter
    the following values:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，选择第三个单元格中的文本视图，然后选择固定图标。输入以下值：
- en: 'Top: `5`'
  id: totrans-198
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 顶部：`5`
- en: 'Right: `5`'
  id: totrans-199
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 右侧：`5`
- en: 'Bottom: `5`'
  id: totrans-200
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 底部：`5`
- en: 'Left: `5`'
  id: totrans-201
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左侧：`5`
- en: Click Add 4 Constraints.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加4个约束。
- en: 'We are now done with the adding Auto Layout to our form. Our `Main.storyboard`
    file has many Controllers inside of it:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已完成为表单添加自动布局。我们的`Main.storyboard`文件中有许多控制器：
- en: '![](img/ef5e53bb-9095-4907-a67b-44a274eefb58.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ef5e53bb-9095-4907-a67b-44a274eefb58.png)'
- en: When working with a team, you do not want to have one file that controls all
    of your UI. You want to be able to have different people work on different sections
    of the app. To be able to have multiple storyboards we need to refactor our storyboard
    to make it more manageable. Even if you are working alone, it's good practice
    to have a storyboard for each part of your app. Let's see how we can refactor
    our storyboard.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 当与团队一起工作时，您不希望有一个控制所有UI的单个文件。您希望能够让不同的人在不同的应用部分上工作。为了能够有多个故事板，我们需要重构我们的故事板以使其更易于管理。即使您单独工作，为应用每个部分创建一个故事板也是良好的实践。让我们看看我们如何重构我们的故事板。
- en: Refactoring the storyboard
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重构故事板
- en: In programming, the term refactor means to take your existing code and improve
    on it without changing its behavior. We can apply refactoring to storyboards.
    We are going to refactor our storyboard so that each View Controller in our app
    has its own storyboard file. First we are going to separate by tabs (Map and Explore).
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在编程中，重构这个术语意味着在不改变其行为的情况下改进现有的代码。我们可以将重构应用于故事板。我们将重构我们的故事板，以便我们的应用中的每个视图控制器都有自己的故事板文件。首先，我们将按标签（地图和探索）进行分离。
- en: We will be using what is called storyboard reference, which is to add references
    between story-boards. A storyboard reference in one storyboard can point to an
    area in a different storyboard. This gives us a way to organize our storyboards,
    rather than having one massive storyboard with which to work. Open your `Main.storyboard`
    file.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用所谓的场景引用，即在故事板之间添加引用。一个故事板中的场景引用可以指向不同故事板中的区域。这为我们提供了一种组织故事板的方法，而不是使用一个庞大的故事板来工作。打开您的`Main.storyboard`文件。
- en: Creating a new storyboard for the Map tab
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为地图标签创建新的故事板
- en: In `Main.storyboard`, click and drag over all of the scenes that go inside the
    Map tab.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Main.storyboard`中，点击并拖动到所有包含在地图标签中的场景。
- en: '![](img/ad998b68-cd22-4614-8437-3678fdab5628.png)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ad998b68-cd22-4614-8437-3678fdab5628.png)'
- en: With the scenes selected, navigate to Editor | Refactor to Storyboard.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择场景后，导航到编辑器 | 重构到故事板。
- en: You are prompted to name the storyboard. Name this `Map.storyboard` and then
    hit Save.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你被提示命名故事板时，将其命名为`Map.storyboard`，然后点击保存。
- en: Once you hit save, you are now inside `Map.storyboard` file; if you return to
    `Main.storyboard`, you should see this icon.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存后，你现在就在 `Map.storyboard` 文件内；如果你返回到 `Main.storyboard`，你应该能看到这个图标。
- en: '![](img/b16b228d-d68c-46ad-869e-3c30359ca5fc.png)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b16b228d-d68c-46ad-869e-3c30359ca5fc.png)'
- en: This icon is called a **storyboard reference**. You can double click on these
    storyboard references and be taken directly into the storyboard.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 这个图标被称为**故事板引用**。你可以双击这些故事板引用，直接进入故事板。
- en: Creating a new storyboard for the Explore tab
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为探索标签创建一个新的故事板
- en: 'Next, we need to create our Explore tab. The Explore tab will have multiple
    storyboard references inside of it. Let''s go ahead and create this reference
    now:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要创建我们的探索标签。探索标签将包含多个故事板引用。让我们现在就创建这个引用：
- en: 'In `Main.storyboard`, you are going to click and drag over all of the scenes
    that are left in the scene. Note that when you click, make sure you are not clicking
    any scene or View Controller. You should now see the following:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `Main.storyboard` 中，你将点击并拖动场景中剩余的所有场景。注意，当你点击时，确保你没有点击任何场景或视图控制器。你现在应该看到以下内容：
- en: '![](img/db0331bc-1914-41c3-b871-eaaa94df71ef.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![](img/db0331bc-1914-41c3-b871-eaaa94df71ef.png)'
- en: With the scenes selected, navigate to Editor | Refactor to Storyboard.
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择场景后，导航到编辑器 | 重构为故事板。
- en: You will be prompted to name the storyboard. Name this `Explore.storyboard`
    and then hit Save.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将被提示命名故事板。将此命名为 `Explore.storyboard` 并然后点击保存。
- en: Now, you will be in your new `Explore.storyboard` file.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将进入你新的 `Explore.storyboard` 文件。
- en: We could stop here, but I feel like we still have way too many storyboard scenes.
    When you work alone doing this might not be a big deal, but when you work in a
    team, this makes it easier.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在这里停止，但我感觉我们仍然有太多的故事板场景。当你单独工作时，这可能不是什么大问题，但当你在一个团队工作时，这会使事情变得更容易。
- en: 'Let''s get started by creating a location storyboard reference now:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从现在开始创建一个位置故事板引用：
- en: 'Click and drag over the two controllers we are going to use for our locations:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并拖动我们将要用于地点的两个控制器：
- en: '![](img/8afe3499-c0b4-4cad-8fbf-061b0eae708b.png)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8afe3499-c0b4-4cad-8fbf-061b0eae708b.png)'
- en: With the scenes selected, navigate to Editor | Refactor to Storyboard.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择场景后，导航到编辑器 | 重构为故事板。
- en: You will be prompted to name the storyboard. Name this `Locations.storyboard`
    and then hit Save.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将被提示命名故事板。将此命名为 `Locations.storyboard` 并然后点击保存。
- en: 'Now, with locations set up, we need to go back to the `Explore.storyboard`
    file and do the following:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，随着地点的设置，我们需要回到 `Explore.storyboard` 文件并执行以下操作：
- en: Click and drag over all of the scenes that are left in the scene. Basically
    you are going to need everything except for the locations storyboard reference.
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并拖动场景中剩余的所有场景。基本上你需要除了地点的故事板引用之外的所有内容。
- en: 'You should now see the following:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在应该看到以下内容：
- en: '![](img/0366ac68-3203-4873-aea1-18436558dff5.png)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0366ac68-3203-4873-aea1-18436558dff5.png)'
- en: With the scenes selected, navigate to Editor | Refactor to Storyboard.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择场景后，导航到编辑器 | 重构为故事板。
- en: You will be prompted to name the storyboard. Name this `Restaurants.storyboard`
    and then hit Save.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将被提示命名故事板。将此命名为 `Restaurants.storyboard` 并然后点击保存。
- en: 'Now, we have our storyboard for our restaurant list but we can still do more
    refactoring:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经有了我们的餐厅列表的故事板，但我们还可以进行更多重构：
- en: 'Inside of the `Restaurants.storyboard` file, click and drag over all of the
    scenes except for the restaurants list. You should now see the following:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `Restaurants.storyboard` 文件中，点击并拖动除了餐厅列表之外的所有场景。你现在应该看到以下内容：
- en: '![](img/5ab03efe-1b45-433f-95b8-32b653ae4f0f.png)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5ab03efe-1b45-433f-95b8-32b653ae4f0f.png)'
- en: With the scenes selected, navigate to Editor | Refactor to Storyboard.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择场景后，导航到编辑器 | 重构为故事板。
- en: You will be prompted to name the storyboard. Name this `RestaurantDetail.storyboard`
    and then hit Save.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将被提示命名故事板。将此命名为 `RestaurantDetail.storyboard` 并然后点击保存。
- en: 'Now, let''s create our Photo filter storyboard reference:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们创建我们的照片滤镜故事板引用：
- en: 'Inside of the `RestaurantDetail.storyboard` file, click and drag over the View
    Controller and Navigation Controller we are using for the Photo Filter. You should
    now see the following:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `RestaurantDetail.storyboard` 文件中，点击并拖动我们用于照片滤镜的视图控制器和导航控制器。你现在应该看到以下内容：
- en: '![](img/9b102aec-8de4-480c-a596-2e164b21714f.png)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b102aec-8de4-480c-a596-2e164b21714f.png)'
- en: With the scenes selected, navigate to **Editor** | **Refactor to Storyboard**.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择场景后，导航到**编辑器** | **重构为故事板**。
- en: You will be prompted to name the storyboard. Name this PhotoFilter.storyboard
    and then hit **Save**.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将被提示命名故事板。将其命名为PhotoFilter.storyboard，然后点击**保存**。
- en: We have one more storyboard reference to create.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要创建一个故事板引用。
- en: 'Go back to the `RestaurantDetail.storyboard` file and click and drag over the
    View Controller and Navigation Controller we are using for the Reviews form. You
    should now see the following:'
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到`RestaurantDetail.storyboard`文件，点击并拖动我们用于评论表单的视图控制器和导航控制器。你现在应该看到以下内容：
- en: '![](img/f9cfd7d3-7f3b-4627-9b29-03d748d62228.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f9cfd7d3-7f3b-4627-9b29-03d748d62228.png)'
- en: With the scenes selected, navigate to Editor | Refactor to Storyboard.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择了场景后，导航到编辑器 | 重构到故事板。
- en: You will be prompted to name the storyboard. Name this `ReviewForm.storyboard`
    and then hit Save.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将被提示命名故事板。将其命名为`ReviewForm.storyboard`，然后点击保存。
- en: 'Alright, we are finally done with creating all of our storyboards and you will
    now see the following in Project Navigator:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，我们终于完成了所有故事板的创建，现在你将在项目导航器中看到以下内容：
- en: '![](img/447d7ce8-d1fb-4166-b54e-8a72de9b8559.png)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![](img/447d7ce8-d1fb-4166-b54e-8a72de9b8559.png)'
- en: Let's build and run the project by hitting the play button (or use *cmd* + *R*),
    and you will see that nothing changed as far as navigating through the app is
    concerned.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 通过点击播放按钮（或使用*cmd* + *R*）来构建和运行项目，你会发现就导航应用而言，没有任何变化。
- en: Summary
  id: totrans-254
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: We finished with storyboard and design setup. We can now focus on the code side
    with our UI pretty much set up. You should have a good idea of how our app should
    work. If you are struggling, there is nothing wrong with that. This stuff takes
    time to click, and as I have said before if you are struggling with anything that
    we have done, please go back. If you keep going when you are not comfortable,
    then it gets harder and harder. We will be covering a lot of new topics and adding
    on to them when you are not ready is not recommended.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 我们完成了故事板和设计设置。现在我们可以专注于代码部分，因为我们已经基本设置了UI。你应该对我们的应用如何工作有一个很好的了解。如果你感到困难，那并没有什么问题。这些内容需要时间来掌握，就像我之前说的，如果你在遇到任何问题时感到困难，请返回。如果你在不舒服的情况下继续前进，那么事情会变得越来越难。我们将涵盖许多新主题，并且在你没有准备好时添加它们是不推荐的。
- en: In the next chapter, we will learn what Model View Controller is and how to
    work with it.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将学习什么是模型视图控制器以及如何与之协同工作。
