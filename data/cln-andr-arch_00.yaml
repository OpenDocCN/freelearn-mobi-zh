- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: As an application's code base increases, it becomes harder for developers to
    maintain existing features and introduce new ones. In this clean architecture
    book, you'll learn how to identify when and how this problem emerges and how to
    structure your code to overcome it.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 随着应用程序代码库的增加，开发者维护现有功能并引入新功能变得越来越困难。在这本清洁架构的书中，您将学习如何识别何时以及如何出现这个问题，以及如何构建代码以克服它。
- en: The book starts by explaining clean architecture principles and Android architecture
    components and then explores the tools, frameworks, and libraries involved. You'll
    learn how to structure your application in the Data and Domain layers, the technologies
    that go in each layer, and the role that each layer plays in keeping your application
    clean. You'll understand how to arrange the code into these two layers and the
    components involved in assembling them. Finally, we'll cover the Presentation
    layer and the patterns that can be applied to have a decoupled and testable code
    base.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书首先解释了清洁架构原则和 Android 架构组件，然后探讨了涉及的工具、框架和库。您将学习如何在数据和领域层中构建您的应用程序，每个层中包含的技术，以及每个层在保持应用程序清洁方面所起的作用。您将了解如何将代码组织到这两个层中，以及组装它们所涉及的组件。最后，我们将介绍表示层以及可以应用于实现解耦和可测试代码库的图案。
- en: By the end of this book, you'll be able to build an application following clean
    architecture principles and have the knowledge you need to maintain and test the
    application easily.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书结束时，您将能够按照清洁架构原则构建应用程序，并拥有维护和测试应用程序所需的知识。
- en: Who this book is for
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书面向对象
- en: This book is for Android developers who want to learn about managing the complexity
    of their applications and is also highly recommended for intermediate or advanced
    Android developers looking for a go-to guide for clean architecture and the integration
    of various Android technologies. New developers familiar with the fundamentals
    of Android app development will find this book useful, too.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向希望了解如何管理其应用程序复杂性的 Android 开发者，并且对于寻找清洁架构和集成各种 Android 技术的指南的中级或高级 Android
    开发者来说，本书也极具推荐价值。熟悉 Android 应用开发基础的新开发者也会发现本书很有用。
- en: What this book covers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖内容
- en: '[*Chapter 1*](B18320_01_ePub.xhtml#_idTextAnchor015), *Getting Started with
    Clean Architecture*, starts by presenting the evolution of Android apps with regards
    to how business logic was structured, and the problems caused by these approaches.
    It will then transition to how certain patterns were applied to tackle these issues,
    revealing other sets of issues. Finally, the concept of clean architecture will
    be introduce, as well as how its principles can be used to solve some of the problems
    presented previously.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第一章*](B18320_01_ePub.xhtml#_idTextAnchor015)，*开始使用清洁架构*，首先介绍了 Android 应用程序在业务逻辑结构方面的演变，以及这些方法引起的问题。然后，它将过渡到如何应用某些模式来解决这些问题，揭示其他一系列问题。最后，将介绍清洁架构的概念，以及如何使用其原则来解决之前提出的一些问题。'
- en: '[*Chapter 2*](B18320_02_ePub.xhtml#_idTextAnchor038), *Deep Diving into Data
    Sources*, covers what Android tools and frameworks are available to use with regard
    to the implementation of the data layer and details and expands on the ones that
    will be used later in the book, such as Kotlin flows and coroutines, Retrofit,
    Room, and DataStore.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第二章*](B18320_02_ePub.xhtml#_idTextAnchor038)，*深入数据源*，介绍了可用于实现数据层以及书中后续将使用的工具和框架，例如
    Kotlin 流和协程、Retrofit、Room 和 DataStore。'
- en: '[*Chapter 3*](B18320_03_ePub.xhtml#_idTextAnchor055), *Understanding Data Presentation
    on Android*, covers what Android tools and frameworks are available to use with
    regard to the implementation of the presentation layer and will detail and expand
    on the ones that will be used later in the book, such as Android ViewModel and
    Jetpack Compose.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第三章*](B18320_03_ePub.xhtml#_idTextAnchor055)，*理解 Android 上的数据表示*，介绍了可用于实现表示层的
    Android 工具和框架，并将详细说明和扩展书中后续将使用的工具，例如 Android ViewModel 和 Jetpack Compose。'
- en: '[*Chapter 4*](B18320_04_ePub.xhtml#_idTextAnchor062), *Managing Dependencies
    in Android Applications*, provides a quick overview of dependency injection and
    how it works. It briefly explores some of the dependency injection tools available
    for Android development, ending with the Hilt dependency injection framework,
    about which it goes into a more detailed explanation because it will be used in
    many of the exercises in the book.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*](B18320_04_ePub.xhtml#_idTextAnchor062)，*管理Android应用程序中的依赖项*，提供了依赖注入的快速概述及其工作原理。它简要探讨了Android开发中可用的某些依赖注入工具，并以Hilt依赖注入框架结束，因为它将在本书的许多练习中使用，并对它进行了更详细的解释。'
- en: '[*Chapter 5*](B18320_05_ePub.xhtml#_idTextAnchor070), *Building the Domain
    of an Android Application*, describes how to build a domain layer and what components
    are part of this layer. You will learn about entities and use cases or interactors
    and what roles they play when it comes to designing the architecture of your application.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*](B18320_05_ePub.xhtml#_idTextAnchor070)，*构建Android应用程序的领域层*，描述了如何构建领域层以及该层包含哪些组件。您将了解实体和用例或交互器，以及它们在设计应用程序架构时扮演的角色。'
- en: '[*Chapter 6*](B18320_06_ePub.xhtml#_idTextAnchor076), *Assembling a Repository*,
    covers the Data layer and the responsibilities this layer has when it comes to
    managing an application''s data, and how it can use the Repository pattern to
    achieve this.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*](B18320_06_ePub.xhtml#_idTextAnchor076)，*组装仓库*，涵盖了数据层及其在管理应用程序数据时的职责，以及它如何使用仓库模式来实现这一点。'
- en: '[*Chapter 7*](B18320_07_ePub.xhtml#_idTextAnchor082), *Building Data Sources*,
    continues the exploration into the Data layer and some examples of data sources
    that can be defined in Android. You will learn about using remote data sources
    to load data from various servers as well as local data sources such as Room and
    DataStore.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*](B18320_07_ePub.xhtml#_idTextAnchor082)，*构建数据源*，继续探索数据层以及可以在Android中定义的一些数据源示例。您将了解如何使用远程数据源从各种服务器加载数据，以及本地数据源，如Room和DataStore。'
- en: '[*Chapter 8*](B18320_08_ePub.xhtml#_idTextAnchor090), *Implementing an MVVM
    Architecture*, presents the MVVM architecture pattern and how it can be used in
    an application''s presentation layer. You will learn how to use the Android ViewModel
    and LiveData to build an app with MVVM and integrate use cases into the ViewModel.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第8章*](B18320_08_ePub.xhtml#_idTextAnchor090)，*实现MVVM架构*，介绍了MVVM架构模式及其如何在应用程序的表现层中使用。您将学习如何使用Android
    ViewModel和LiveData构建MVVM应用程序并将用例集成到ViewModel中。'
- en: '[*Chapter 9*](B18320_09_ePub.xhtml#_idTextAnchor098), *Implementing an MVI
    Architecture*, presents the MVI architecture pattern and how it can be used in
    an application''s presentation layer. You will learn how to use Kotlin flows and
    Android ViewModel to implement the MVI pattern.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第9章*](B18320_09_ePub.xhtml#_idTextAnchor098)，*实现MVI架构*，介绍了MVI架构模式及其如何在应用程序的表现层中使用。您将学习如何使用Kotlin流和Android
    ViewModel来实现MVI模式。'
- en: '[*Chapter 10*](B18320_10_ePub.xhtml#_idTextAnchor105), *Putting It All Together*,
    covers the benefits of clean architecture by analyzing an example of an application
    that implements the concepts and then adding instrumentation tests with Espresso
    and Jetpack Compose. The introduction of UI tests serves as a good example of
    how we can inject and change certain behaviors in the application for testing
    purposes without needing to modify the application''s code.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第10章*](B18320_10_ePub.xhtml#_idTextAnchor105)，*整合一切*，通过分析实现这些概念的应用程序示例，探讨了干净架构的好处，然后添加了Espresso和Jetpack
    Compose的仪器测试。UI测试的引入是一个很好的例子，说明了我们如何在不修改应用程序代码的情况下，为了测试目的注入和更改应用程序中的某些行为。'
- en: To get the most out of this book
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用本书
- en: You'll need the Android Studio IDE installed on your computer (version Arctic
    Fox 2020.3.1 Patch 3 or above) and Java 8 to be installed. Using later versions
    of Java such as Java 11 might cause errors when building some of the exercises.
    Knowing how to trigger builds on an emulator or device and Gradle Synchronizations
    from Android Studio is recommended before attempting the exercises presented in
    the book.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要在您的计算机上安装Android Studio IDE（版本Arctic Fox 2020.3.1 Patch 3或更高版本）并安装Java 8。使用Java
    11等较新版本的Java可能会在构建某些练习时导致错误。在尝试本书中提供的练习之前，建议您了解如何在模拟器或设备上触发构建以及从Android Studio中进行Gradle同步。
- en: '![](img/B18320_Preface_Table.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18320_Preface_Table.png)'
- en: You can expand on the final exercise of the book by optimizing the way the data
    is loaded, introducing in-memory caches, or integrating new network calls to fetch
    additional data for the users. You can also improve the instrumentation testing
    by adding interaction with the list of data and opening new screens and asserting
    that the correct data is displayed.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过优化数据加载方式、引入内存缓存或集成新的网络调用以获取用户额外的数据来扩展本书的最终练习。您还可以通过添加与数据列表的交互、打开新屏幕并断言正确数据显示来改进仪器测试。
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book''s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting of code.**'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您正在使用本书的数字版，我们建议您亲自输入代码或从本书的GitHub仓库（下一节中提供链接）获取代码。这样做将帮助您避免与代码复制和粘贴相关的任何潜在错误。**'
- en: Download the example code files
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Clean-Android-Architecture](https://github.com/PacktPublishing/Clean-Android-Architecture).
    If there's an update to the code, it will be updated on the existing GitHub repository.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本书代码包也托管在GitHub上，网址为[https://github.com/PacktPublishing/Clean-Android-Architecture](https://github.com/PacktPublishing/Clean-Android-Architecture)。如果代码有更新，它将在现有的GitHub仓库中更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有其他来自我们丰富图书和视频目录的代码包，可在[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)找到。查看它们！
- en: Code in Action
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代码实战
- en: The Code in Action videos for this book can be viewed at [https://bit.ly/3LqAa30](https://bit.ly/3LqAa30)
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 本书代码实战视频可在[https://bit.ly/3LqAa30](https://bit.ly/3LqAa30)查看
- en: Download the color images
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图像
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://static.packt-cdn.com/downloads/9781803234588_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781803234588_ColorImages.pdf)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一份包含本书中使用的截图和图表的彩色图像PDF文件。您可以从这里下载：[https://static.packt-cdn.com/downloads/9781803234588_ColorImages.pdf](https://static.packt-cdn.com/downloads/9781803234588_ColorImages.pdf)
- en: Conventions used
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 本书使用了许多文本约定。
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "Inside the `resources` folder, create a subfolder
    called `mockito-extensions`. Inside this folder, create a file named `org.mockito.plugins.MockMaker`,
    and inside this file, add the text `mock-maker-inline`."'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '`文本中的代码`: 表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter昵称。以下是一个示例：“在`resources`文件夹中，创建一个名为`mockito-extensions`的子文件夹。在这个文件夹中，创建一个名为`org.mockito.plugins.MockMaker`的文件，并在该文件中添加文本`mock-maker-inline`。”'
- en: 'A block of code is set as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    "Create a new project in Android Studio using an **Empty Compose Activity**."'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**: 表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以**粗体**显示。以下是一个示例：“在Android Studio中使用**Empty
    Compose Activity**创建一个新项目。”'
- en: Tips or Important Notes
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 小贴士或重要注意事项
- en: Appear like this.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来像这样。
- en: Get in touch
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at customercare@packtpub.com and mention the book title in the subject
    of your message.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**: 如果您对本书的任何方面有疑问，请通过customercare@packtpub.com发送电子邮件，并在邮件主题中提及本书标题。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将非常感激您能向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上发现任何形式的我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过[版权@packtpub.com](mailto:copyright@packtpub.com)与我们联系，并附上材料的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分享您的想法
- en: Once you've read *Clean Android Architecture*, we'd love to hear your thoughts!
    Please click here to go straight to the Amazon review page for this book and share
    your feedback.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您阅读了《Clean Android Architecture》，我们非常期待听到您的想法！请点击此处直接进入此书的亚马逊评论页面并分享您的反馈。
- en: Your review is important to us and the tech community and will help us make
    sure we're delivering excellent quality content.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 您的评论对我们和科技社区都非常重要，它将帮助我们确保我们提供的是高质量的内容。
