- en: Chapter 4. Trackables and Tracking
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 4 章。可追踪项和追踪
- en: Trackables are an integral part of an AR experience. It is the foundation on
    which the whole world we are building literally rests. We can have the best AR
    content in the world, but if the trackable is not suitable, the experience will
    degrade considerably. In this chapter we will try to understand the details of
    how to create and use suitable trackables. We will also explore how to modify
    a trackable to increase its trackability in the app.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 可追踪项是 AR 体验的一个基本组成部分。它是我们构建的整个世界的基石。我们可以拥有世界上最好的 AR 内容，但如果可追踪项不适合，体验将大大降低。在本章中，我们将尝试了解如何创建和使用合适的可追踪项的细节。我们还将探讨如何修改可追踪项以增加其在应用程序中的可追踪性。
- en: What are trackables for image targets?
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 图像目标的可追踪项是什么？
- en: Trackables are a collection of features that the AR app can track. This can
    be anything from the traditional QR code, where a collection of black and white
    binary code determines the object detected, to the image targets we experienced
    in the previous chapter where the trackable is just an image.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 可追踪项是 AR 应用程序可以追踪的一组特征。这可以是任何东西，从传统的二维码，其中一组黑白二进制代码决定了检测到的对象，到我们在上一章中体验到的图像目标，其中可追踪项只是一个图像。
- en: For image targets, only the natural features of the image itself is used as
    a way of detecting the image in the real, and its perspective to calculate where
    the AR camera should be. Natural features are analyzed, stored in a database,
    and then used to compare with the camera input feed. This naturally makes how
    effectively the image can be tracked, based on its features.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 对于图像目标，仅使用图像本身的自然特征作为在现实世界中检测图像的方式，并计算 AR 相机应该放置的位置。自然特征被分析、存储在数据库中，然后用于与相机输入流进行比较。这自然使得根据其特征，图像可以被跟踪得有多有效。
- en: Creating image targets
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建图像目标
- en: The process is made simple using Vuforia's **Target Manager**. The target manager
    is an online tool provided by Qualcomm that automatically analyzes and creates
    image target databases to be deployed in apps. It can also manage multiple datasets
    with multiple targets.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Vuforia 的 **目标管理器** 可以使这个过程变得简单。目标管理器是由高通提供的在线工具，它可以自动分析和创建用于在应用程序中部署的图像目标数据库。它还可以管理包含多个目标的多个数据集。
- en: 'To reach this target manager, simply go to the following URL: [https://developer.vuforia.com/target-manager](https://developer.vuforia.com/target-manager).'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 要到达这个目标管理器，只需访问以下网址：[https://developer.vuforia.com/target-manager](https://developer.vuforia.com/target-manager)。
- en: 'The following screenshot shows **Target Manager**:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了 **目标管理器**：
- en: '![Creating image targets](img/0032_4_1.jpg)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![创建图像目标](img/0032_4_1.jpg)'
- en: You should be greeted with a view similar to the one above. This is the target
    manager—the tool that we will use to create all of our targets and maintain them.
    The target manager can be used for both local target datasets and cloud-based
    ones. In this book, we will focus on **Device Databases**.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该会看到一个类似于上面的视图。这是目标管理器——我们将使用它来创建所有目标并维护它们的工具。目标管理器可以用于本地目标数据集和基于云的数据集。在这本书中，我们将专注于
    **设备数据库**。
- en: 'To start, let''s create a database that we will use to see how the process
    of creating targets works. Click on the **Create Database** button and name the
    database Chapter 4\. The following image shows a created dataset in **Target Manager**:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个数据库，我们将使用它来查看创建目标的过程。点击 **创建数据库** 按钮，并将数据库命名为第 4 章。以下图像显示了在 **目标管理器**
    中创建的数据集：
- en: '![Creating image targets](img/0032_4_2.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![创建图像目标](img/0032_4_2.jpg)'
- en: Now we have a dataset. Currently our dataset is empty, but we can add multiple
    image targets to a dataset for the AR app to track all of them. We can even create
    multiple datasets in this view, each with its own set of targets.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有一个数据集。目前我们的数据集是空的，但我们可以向数据集中添加多个图像目标，以便 AR 应用程序跟踪所有这些目标。我们甚至可以在这个视图中创建多个数据集，每个数据集都有自己的目标集。
- en: Now what we need to do is to create our first image target. First, we will use
    the stones image from Vuforia's sample project we did earlier. It will give us
    an idea of how the image targets for the sample project were created.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们需要做的是创建我们的第一个图像目标。首先，我们将使用之前在 Vuforia 示例项目中使用的石头图像。这将给我们一个关于如何创建示例项目的图像目标的思路。
- en: 'Click on the database to open it. We will find an add a target button on the
    right; click on it. The following image shows target creation:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 点击数据库以打开它。我们将在右侧找到一个添加目标按钮；点击它。以下图像显示了目标创建：
- en: '![Creating image targets](img/0032_4_3.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![创建图像目标](img/0032_4_3.jpg)'
- en: The parameters for creating a target are very simple. For the name, we will
    pick Stones, like it was in the sample app. For target type, we will leave it
    at Single Image. The other two types are used for MultiTarget prefab in Vuforia
    for detecting 3D objects in the world.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 创建目标参数非常简单。对于名称，我们将选择“Stones”，就像在示例应用中一样。对于目标类型，我们将保持为“单张图像”。其他两种类型用于Vuforia中的多目标预制件，用于检测世界中的3D对象。
- en: The last parameter, Target Dimension, is an important parameter. This number
    is the representation of the image target in the scene. It governs how objects
    that appear on top of it are scaled, and how much space it occupies of the virtual
    space in the scene. That said, it is a value easily ignorable in Unity 3D environment.
    This is due to the scaling property that is easily editable in Unity. This value
    is very important in OpenGL environment however. For now, we can leave it at 5
    units. This is a 5 units distance in the Unity 3D scene.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个参数，目标尺寸，是一个重要的参数。这个数字是场景中图像目标的表现。它决定了出现在其上的对象如何缩放，以及它占据了场景中虚拟空间多少空间。换句话说，在Unity
    3D环境中，这是一个很容易被忽略的值。这是由于Unity中可以轻松编辑的缩放属性。然而，在OpenGL环境中，这个值非常重要。目前，我们可以将其设置为5个单位。这是Unity
    3D场景中的5个单位距离。
- en: 'Click on the **Add** button, and let the image be uploaded. The target will
    have processing tag on it; processing takes a few minutes to happen. Give it some
    time, and then click on the target to see its details window. The following image
    shows Stones target details window:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**添加**按钮，上传图像。目标将会有处理标签；处理需要几分钟时间。给它一些时间，然后点击目标以查看其详细信息窗口。以下图像显示了“Stones”目标的详细信息窗口：
- en: '![Creating image targets](img/0032_4_4.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![创建图像目标](img/0032_4_4.jpg)'
- en: This is the details window of the target we just added to the database. To the
    right, we will find all the details about the target. It starts with a unique
    ID of the target across all databases, cloud-based and local. This is useful for
    global identification of the target.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这是刚刚添加到数据库中的目标的详细信息窗口。在右侧，我们将找到有关目标的所有详细信息。它以目标在所有数据库中的唯一ID开始，包括基于云的和本地的。这对于目标的全球识别很有用。
- en: Below the **Target ID**, we will find the augmentable score. This is the most
    important feature of the target. It demonstrates how well the target can be tracked
    in the app. This target has 5 stars out of 5; this is because the features in
    image are great for tracking.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在**目标ID**下方，我们将找到可增强分数。这是目标最重要的功能。它展示了目标在应用中的追踪效果。这个目标有5星中的5星；这是因为图像中的特征非常适合追踪。
- en: Trackable score
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可追踪分数
- en: Several factors affect the trackable score, but first we need to understand
    how the score affects the trackability for the image.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 影响可追踪分数的因素有几个，但首先我们需要了解分数是如何影响图像的可追踪性的。
- en: 'The augmentable score is based on 5 stars. It represents augmentability as
    follows:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 可增强分数基于5星。它如下表示增强性：
- en: '**Between 4 to 5 stars**: The trackable is very suitable for AR apps. It can
    handle part of the image to be occluded, and still the app will be able to track
    it. It can also be tracked in low light and other environment noise.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**4到5星之间**：可追踪目标非常适合AR应用。它可以处理部分图像被遮挡的情况，并且应用仍然能够追踪它。它也可以在低光和其他环境噪声中追踪。'
- en: '**Between 2 to 3 stars**: The trackable is augmentable. It will work fine under
    ideal conditions. It may not be very good with part of the images occluded. This
    is the least score to aim for that will not affect the user''s experience.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**2到3星之间**：可追踪目标是可增强的。在理想条件下，它将运行良好。如果部分图像被遮挡，可能表现不佳。这是不会影响用户体验的最小分数目标。'
- en: '**1 star**: This is the bare minimum score for trackability. It means that
    the image will be recognizable by the app, but the experience will be affected.
    Avoid attaining this score at all costs.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**1星**：这是可追踪性的最低分数。这意味着图像将被应用识别，但体验会受到影响。务必避免获得这个分数。'
- en: '**0 stars**: The image is not suitable for trackability at all; there are not
    enough recognizable features in the image for the app to recognize. This image
    will not be recognized at all by the app.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**0星**：图像根本不适合可追踪性；图像中缺乏足够的可识别特征，使得应用无法识别。这个图像将完全不会被应用识别。'
- en: In situations where the content of the trackable is restricted, and we know
    that the usage conditions will be idle in good lighting with no occlusion, we
    can aim for 2 to 3 stars. Otherwise, it is preferable to get 4 to 5 stars for
    optimal usage by the user. Anything below 2 stars should be avoided completely.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在追踪内容受限的情况下，并且我们知道在良好的光照和没有遮挡的情况下使用条件将是空闲的，我们可以争取2到3星。否则，最好争取4到5星，以便用户能够最优使用。任何低于2星的都应该完全避免。
- en: What decides trackable score?
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么决定了可追踪物的评分？
- en: Trackables are the foundation of the AR experience using Vuforia. It is paramount
    to understand and create a suitable trackable for the experience to be robust
    and useful. The score attributed to the trackable in the target manager is our
    indication of how robust the target image is going to perform, but what decides
    that score?
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 可追踪物是使用Vuforia进行AR体验的基础。理解和创建一个合适的可追踪物对于体验要稳健和有用至关重要。目标管理器中分配给可追踪物的分数是我们对目标图像将要表现出的稳健性的指示，但是什么决定了这个分数？
- en: The best way of understanding this, is by understanding how Vuforia tracks the
    images. The idea is simple; it looks for position of contrasting edges in clusters
    all around the image. Those edges are tracked, and based on the map of positions
    that are stored in the dataset, Vuforia can tell the relative position of the
    trackable in the real world, and accordingly render the 3D content on top of it.
    This particularly means that tracking the image is not a function of its color
    or what really is in it, as much as how many contrasting edges are there in the
    image, and how well they are distributed on the image.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 理解这一点的最好方式是了解Vuforia如何追踪图像。想法很简单；它在图像周围的所有集群中寻找对比边缘的位置。这些边缘被追踪，基于存储在数据集中的位置图，Vuforia可以告诉可追踪物在现实世界中的相对位置，并相应地在其上方渲染3D内容。这特别意味着追踪图像并不是由其颜色或其中真正包含的内容决定的，而是由图像中对比边缘的数量以及它们在图像上的分布情况决定的。
- en: 'To better understand this, we can look on the current edges that are recognizable
    in the image we have just uploaded. To do that, simply click on the **Show Features**
    link on the top left of the webpage. The following image shows features in image
    target stones:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解这一点，我们可以查看我们刚刚上传的图片中当前可识别的边缘。要做到这一点，只需简单地点击网页左上角的**显示特征**链接。以下图片显示了图像目标石头的特征：
- en: '![What decides trackable score?](img/0032_4_5.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![什么决定了可追踪物的评分？](img/0032_4_5.jpg)'
- en: Once the **Show Features** link has been clicked, the image target manager layers
    over the target image an overlay of where it detects a recognizable edge that
    it can track in a Vuforia image target. Notice that it is only tracking the dark
    edges between the `Stones` and nothing else in the image. It is even tracking
    only the high contrast edges between the `Stones`, while ignoring some of the
    lighter ones.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦点击了**显示特征**链接，图像目标管理器就会在目标图像上叠加一个覆盖层，显示它检测到的可识别边缘，这些边缘可以在Vuforia图像目标中进行追踪。注意，它只追踪`石头`之间的暗色边缘，而忽略图像中的其他部分。它甚至只追踪`石头`之间的高对比度边缘，而忽略一些较浅的边缘。
- en: Also notice that the number of edges found in the image is large, and evenly
    distributed all around the image. This is a great factor in what made this image
    suitable for tracking.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 还要注意的是，图像中找到的边缘数量很多，并且均匀地分布在图像周围。这是使这张图像适合追踪的重要因素之一。
- en: 'To contrast this image''s result, lets try an image that will yield a 1-star
    score when tried on the target manager. The following image shows landscape image
    added to target image:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 为了对比这张图片的结果，让我们尝试一个在目标管理器上尝试会得到1星评分的图片。以下图片显示了添加到目标图像中的景观图像：
- en: '![What decides trackable score?](img/0032_4_6.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![什么决定了可追踪物的评分？](img/0032_4_6.jpg)'
- en: Before adding this image, intuitively, we might think that this image is suitable
    for tracking. It certainly has a lot of details of a wide-angle landscape. But
    this image yielded a shocking 1-star result when added to the **Target Manager**.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在添加这张图片之前，直观地，我们可能会认为这张图片适合追踪。它确实有很多广角景观的细节。但将这张图片添加到**目标管理器**后，得到了惊人的1星结果。
- en: The main reason for the low score for this image is the fact that the entire
    image is a shade of green. This greatly diminishes contrasting edges in the image.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这张图片低分的主要原因在于整个图片都是绿色调。这极大地减弱了图片中的对比边缘。
- en: 'If we are to click on the **Show Features** link on the top, we will be able
    to see what the target manager detected from the image. The following image shows
    features in the mountain landscape image:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们点击顶部的**显示特征**链接，我们将能够看到目标管理器从图像中检测到的内容。以下图像显示了山景图像中的特征：
- en: '![What decides trackable score?](img/0032_4_7.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![什么决定了可追踪的分数？](img/0032_4_7.jpg)'
- en: Immediately, we notice the considerably lower number of features detected in
    the image compared to the stones one. It only detected the edges created by the
    shadows of the objects in the image, which is clearly not enough to award it any
    score above 1 star.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 立即，我们注意到图像中检测到的特征数量比石头少得多。它只检测到了图像中物体阴影产生的边缘，这显然不足以给它评出超过1星的分数。
- en: Features definition
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 特征定义
- en: To help us get a higher score, we must understand what are the features that
    the target manager is looking for. We do know now that the main thing that the
    target manager is looking for in an image is edges, but what kind of edges specifically?
    To understand that, we need the definition of features.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 为了帮助我们获得更高的分数，我们必须了解目标管理器正在寻找哪些特征。我们知道目标管理器在图像中寻找的主要是边缘，但具体是哪种边缘？为了理解这一点，我们需要了解特征的定义。
- en: 'A feature is a sharp and spiked detail in the image, like the corner of an
    edge. Features must be very contrasting to be found and it has to be distributed
    evenly across the image and in a random manner. The following image shows shapes
    and features recognized in them:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 特征是图像中尖锐且刺状的细节，就像边缘的角落。特征必须非常对比鲜明才能被发现，并且必须均匀地分布在图像中，以随机的方式。以下图像显示了识别出的形状和特征：
- en: '![Features definition](img/0032_4_8.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![特征定义](img/0032_4_8.jpg)'
- en: 'In the shapes illustrated above, we can see the yellow crosses representation
    of the features recognizable in the shape. The representation is as follows:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面所示的形状中，我们可以看到特征的黄色十字表示。表示如下：
- en: '**Shape 1**: It is a perfect circle without any corners at all, and as such,
    no features are recognizable in it.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**形状1**：它是一个完美的圆形，没有任何角落，因此，在它里面没有可识别的特征。'
- en: '**Shape 2**: It has an edge to the left with two recognizable corners. That
    yields two features recognizable in the shape.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**形状2**：它左侧有一个边缘，有两个可识别的角落。这导致在形状中可识别的两个特征。'
- en: '**Shape 3**: It is a square with four edges and four corners. This yields four
    recognizable features in the shape.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**形状3**：它是一个有四个边缘和四个角落的正方形。这导致在形状中有四个可识别的特征。'
- en: This means that any curved object yields little to none features at all. Primarily,
    humans and animals make very poor trackables due to their curved nature.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着任何曲线物体几乎都不会产生特征。主要来说，由于人类和动物具有曲线性质，它们在可追踪性方面非常差。
- en: Enhancing score by enhancing contrast
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过增强对比度来提高分数
- en: 'One of the easiest ways of enhancing an image''s score is by simply enhancing
    the image''s contrast. Feature detection looks for sharp edges like above; it
    is very hard to do so when the image''s contrast is low. Like the landscape image
    we used before, the main reason the image resulted in a low score was because
    of the low contrast in the image. Then what happens when we increase the image''s
    contrast and light levels in a photo editing application like Photoshop or Gimp?
    The following image shows the figure with enhanced contrast in landscape image:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 提高图像分数的最简单方法之一就是简单地增强图像的对比度。特征检测寻找像上面那样的尖锐边缘；当图像对比度低时，这样做非常困难。就像我们之前使用的风景图像一样，图像得分低的主要原因是图像对比度低。那么，当我们使用像Photoshop或Gimp这样的照片编辑应用程序增加图像的对比度和光级时会发生什么呢？以下图像显示了增强对比度的风景图像：
- en: '![Enhancing score by enhancing contrast](img/0032_4_9.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![通过增强对比度来提高分数](img/0032_4_9.jpg)'
- en: 'The score makes a giant leap from 1-star score to 4-star score. As you can
    see, if you compare the image used now to the one we used earlier, the image''s
    contrast is greatly enhanced, and the target manager easily detects such shadows
    and edges now. Lets look at the features detected by the target manager. The following
    image shows features in the high contrast image:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 分数从1星评分跃升至4星评分。如您所见，如果您将现在使用的图像与我们之前使用的图像进行比较，图像的对比度得到了极大的增强，目标管理器现在很容易检测到这样的阴影和边缘。让我们看看目标管理器检测到的特征。以下图像显示了高对比度图像中的特征：
- en: '![Enhancing score by enhancing contrast](img/0032_4_10.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![通过增强对比度来提高分数](img/0032_4_10.jpg)'
- en: The features detected in the image are way more than what the target manager
    found in the previous image. Mostly, the features are located around the mountain
    and tree shadows. Notice how the green field is still yielding little features,
    but the features from the mountain and trees are enough to yield a high score
    of 4 stars.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图像中检测到的特征远远多于之前图像中目标管理器找到的特征。大多数特征位于山和树影周围。注意绿色田野仍然产生很少的特征，但山和树木的特征足以产生4星的高分。
- en: It is highly recommend to enhance the contrast in all targets used for AR apps.
    It is greatly beneficial for the experience to have the best trackable possible.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 非常推荐增强用于AR应用的图像目标的对比度。拥有最佳的可追踪性对体验大有裨益。
- en: Feature distribution on image targets
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 图像目标上的特征分布
- en: 'Having recognizable features on the image is important, but how they are distributed
    is also very important. We can have all the features recognized on only one part
    of the image and nothing on another. This kind of imbalance lowers the score greatly,
    because it hinders the detection of the relative position of the image in the
    world for the AR app. For example, examine the image target below. The following
    image shows the lake target:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在图像上具有可识别的特征很重要，但它们的分布方式也同样重要。我们可以在图像的某一部分识别所有特征，而在另一部分则没有。这种不平衡会大大降低分数，因为它阻碍了AR应用在现实世界中检测图像相对位置的能力。例如，检查下面的图像目标。以下图像显示了湖泊目标：
- en: '![Feature distribution on image targets](img/0032_4_11.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图像目标上的特征分布](img/0032_4_11.jpg)'
- en: This is a lake image target that was added to the image target manager. It has
    a fair bit of details, but the left side of the image is mostly empty but for
    the lake. This image yielded 2 stars, and that is after enhancing the image's
    contrast.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一张添加到图像目标管理器的湖泊图像目标。它有很多细节，但图像的左侧除了湖泊外几乎都是空的。这张图像得到了2星的评价，这是在增强图像对比度之后的结果。
- en: 'To understand the reason for the low score, lets look at the features detected.
    The following image shows features in the lake house target:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解分数低的原因，让我们看看检测到的特征。以下图像显示了湖泊房屋目标中的特征：
- en: '![Feature distribution on image targets](img/0032_4_12.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图像目标上的特征分布](img/0032_4_12.jpg)'
- en: As expected, all the features detected are on the right side of the image, leaving
    the left side completely empty. This is very bad for occlusion management and
    relative position detection by the AR app. It will track, but it will be a very
    poor target.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如预期的那样，检测到的所有特征都位于图像的右侧，而左侧则完全为空。这对AR应用中的遮挡管理和相对位置检测非常不利。它将进行跟踪，但目标将非常差。
- en: How to enhance distribution of features
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何增强特征分布
- en: Enhancing distribution of features can be done by the obvious method, which
    is adding objects to the empty space of the image. If we are to add textured objects
    to the empty side of the image above, it will naturally enhance its score after
    the new object yields new detectable features. But changing the target's composition
    might not always be a viable option in practice if there is a restriction on what
    the target can be. For example, if the target is part of a magazine or a brochure,
    and we do not have control on what we can add to the image. However, we will always
    have control on what we can subtract from the target.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 通过明显的方法增强特征分布，即向图像的空白空间添加对象。如果我们向上述图像的空侧添加纹理对象，新对象产生可检测的特征后，它自然会提高其分数。但如果对目标可以包含的内容有限制，那么在实际操作中改变目标的组成可能并不总是可行的选择。例如，如果目标是杂志或小册子的一部分，而我们无法控制可以向图像添加的内容。然而，我们始终可以控制从目标中移除什么。
- en: 'If we manage to subtract the empty space from the image target and take a subset
    of the target that is rich in details and well-distributed features, we can circumvent
    the problem. The interesting part is that the AR app will trigger on the large
    image just fine, even if we only give data of the subset. For example, examine
    this subset target of the lake target we added earlier. The following figure shows
    a subset of the lake image target:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们能够从图像目标中移除空白空间，并取目标中细节丰富且特征分布良好的子集，我们就可以绕过这个问题。有趣的是，即使我们只提供子集的数据，AR应用也会在大型图像上正常触发。例如，检查我们之前添加的湖泊目标的子集目标。以下图显示了湖泊图像目标的子集：
- en: '![How to enhance distribution of features](img/0032_4_13.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![如何增强特征分布](img/0032_4_13.jpg)'
- en: As we can see, the above image is only a subset of the lake image, with just
    the lake house visible in it. Immediately, more features are recognizable now
    that target manager can focus on a smaller area. It also enhanced the feature
    distribution on the image. This enhanced the score to 3 stars for this trackable.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，上面的图像只是湖泊图像的一个子集，其中只可见湖泊房屋。现在，由于目标管理器可以聚焦于更小的区域，我们立即可以识别出更多特征。这也增强了图像上的特征分布。这使得这个可追踪目标的得分提升到3星。
- en: The AR app will trigger to this image, regardless if it's in this subset form,
    or if it was subjected to the original image before cropping the lake house from
    it. This is a very useful feature to keep in mind when trying to achieve a higher
    score for a target.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: AR应用会触发到这个图像，无论它是以这个子集形式存在，还是在对湖泊房屋进行裁剪之前被原始图像所影响。这是在尝试为图像目标获得更高分数时需要记住的一个非常有用的功能。
- en: The position of the AR content will need to be adjusted according to appear
    relative the original lake image and not the subset. This can be achieved easily
    with an offset to the position applied to the AR content in Unity.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: AR内容的定位需要根据相对于原始湖泊图像而不是子集进行调整。这可以通过在Unity中对AR内容的定位应用偏移量来轻松实现。
- en: Patterns in image targets
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 图像目标中的图案
- en: 'We now understand the need for a good distribution of features on the image,
    but there is one thing to keep in mind: having repeated patterns on the image
    is only counted once, meaning if we have a repeated pattern all across the image
    target, the score will be very bad. Examine the following image target. The following
    figure shows a snowflake pattern image target:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在明白在图像上需要有良好的特征分布，但有一点需要记住：图像上重复的图案只计算一次，这意味着如果我们整个图像目标上都有重复的图案，得分将会非常糟糕。请查看以下图像目标。以下图显示了雪花图案的图像目标：
- en: '![Patterns in image targets](img/0032_4_14.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![图像目标中的图案](img/0032_4_14.jpg)'
- en: 'The above image when used yields a staggering 0 star. This image is mainly
    a repeated pattern of a snowflake. If we examine the features detected, we will
    see something like the following image. The following figure shows features in
    snowflake pattern:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 上述图像使用时得到的分数令人震惊，只有0星。这个图像主要是雪花的重复图案。如果我们检查检测到的特征，我们会看到如下图像。以下图显示了雪花图案中的特征：
- en: '![Patterns in image targets](img/0032_4_15.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![图像目标中的图案](img/0032_4_15.jpg)'
- en: As we can see, there are enough features detected in the image to effectively
    be augmentable, but yet the target manager gives it a 0 star. It will not be detectable
    at all from the app's perspective.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，图像中检测到的特征足够多，可以有效地进行增强，但目标管理器却给它评了0星。从应用的角度来看，它将完全无法被检测到。
- en: 'To understand why that happens, we need to ask ourselves the following question:
    if we take a subset of the image at the center, would it be distinguishable from
    the larger image? The answer is no, the pattern repeats itself symmetrically around
    the image. The app will not be able to find the relative position of the target
    in the real world if it compares the features detected with that in the dataset.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解为什么会这样，我们需要问自己以下问题：如果我们从图像中心取一个子集，它是否与更大的图像可区分？答案是肯定的，图案在图像周围对称地重复。如果应用将检测到的特征与数据集中的特征进行比较，它将无法在现实世界中找到目标的相对位置。
- en: Exporting datasets to Unity
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将数据集导出到Unity
- en: 'Now that we know how to select and create our trackables, exporting them to
    Unity is a much easier task. The following figure shows highlighted targets to
    be exported:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道了如何选择和创建我们的可追踪目标，将它们导出到Unity就变得容易多了。以下图显示了要导出的突出显示的目标：
- en: '![Exporting datasets to Unity](img/0032_4_16.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![将数据集导出到Unity](img/0032_4_16.jpg)'
- en: 'From the dataset''s view, we can select what targets we want to export. Simply
    select any number of targets for deployment. Once the targets are selected, we
    can click on **Download Selected Targets** on the top left. The following image
    shows **Download Selected Targets**:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 从数据集的视图中，我们可以选择我们想要导出的目标。只需简单地选择任意数量的目标进行部署。一旦选择了目标，我们可以在左上角点击**下载所选目标**。以下图显示了**下载所选目标**：
- en: '![Exporting datasets to Unity](img/0032_4_17.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![将数据集导出到Unity](img/0032_4_17.jpg)'
- en: From the list of development option, select **Unity Editor** as the option.
    It is recommended to leave the database name the same name in the target manager.
    This makes it easier to update the dataset later. This will download a Unity package
    file that we can import easily into a project like we did in the sample project.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 从开发选项列表中，选择**Unity 编辑器**作为选项。建议在目标管理器中保持数据库名称与目标名称相同，这样在以后更新数据集时会更加方便。这将下载一个我们可以轻松导入到项目中的
    Unity 包文件，就像我们在示例项目中做的那样。
- en: As we have seen, the create of a dataset in the target manager is quite easy,
    and makes creating a project more fluid.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，在目标管理器中创建数据集相当简单，使得创建项目更加流畅。
- en: Summary
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we understood the process of creating our own trackables and
    datasets using the target manager from Qualcomm. We also explored how to design
    and use a trackable that will yield the best trackability in our apps. We have
    seen what makes a trackable bad, such as patterns and feature distribution, and
    what makes it good, such as contrast, and edges. We learned a couple of tricks
    to enhance the trackability score of our trackable, such as taking a subset of
    the original image or by increasing the contrast in Photoshop or apps like it.
    With this knowledge, we easily optimize the most important foundation of AR, which
    is our trackable.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们了解了使用高通的目标管理器创建自己的可追踪对象和数据集的过程。我们还探讨了如何设计和使用一个能够在我们应用中实现最佳追踪性的可追踪对象。我们看到了什么因素会使可追踪对象变得不好，例如图案和特征分布，以及什么因素会使它变得好，例如对比度和边缘。我们学到了一些提高我们可追踪对象追踪性评分的小技巧，例如从原始图像中取子集或在
    Photoshop 或类似应用程序中增加对比度。有了这些知识，我们很容易优化 AR 最重要的基础，即我们的可追踪对象。
- en: In the next chapter, we will create a project from the scratch that will be
    an AR game. Techniques and code will be of a higher level than previously explored
    in the book so far, and will get us closer to the full potential of Unity and
    Vuforia.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将从头开始创建一个将成为 AR 游戏的项目。技术和代码的级别将比本书迄今为止所探讨的更高，并将使我们更接近 Unity 和 Vuforia
    的全部潜力。
