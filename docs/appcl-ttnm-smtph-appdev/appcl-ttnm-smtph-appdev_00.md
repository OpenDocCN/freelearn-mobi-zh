# 前言

不久以前，创建一个移动应用程序并发布它是困难的、昂贵的，并且对于大多数开发者来说，在商业上是不切实际的。快进几年，iPhone 和 App Store 的推出，突然之间，任何能够用 Apple 的 Objective-C 语言编写代码，并且对 Mac 的配置文件证书有充分理解的人，都可以编写智能手机应用程序，并以极少的麻烦和非常少的官僚程序在全球范围内分发。在过去十年中，我们中的许多人已经从陈旧的基于 C 的语言中移开，并将我们的编程知识主要集中在 JavaScript 上，这个无处不在的小语言尽管存在许多缺点，但已经获得了动力，并且在网络内外都变得普遍。

在那之后不久，我们开始看到许多“替代”平台出现，这些平台承诺开发者能够无需在 Objective-C 或者在 Android 的情况下重新学习 Java，就能构建移动应用程序。其中之一是一个新出现的平台叫做 Titanium Mobile，它承诺只使用 JavaScript 就能构建原生应用程序，并且能够使这些应用程序跨平台（跨越 iOS 和 Android）。截至 2011 年 12 月，Appcelerator 的 Titanium Mobile 拥有超过 150 万活跃开发者，并在市场上发布了 30,000 个应用程序。它得到了 eBay 等主要玩家的支持，并推动了世界上一些最受欢迎的应用程序，包括 Wunderlist、eBay Mobile 和 GetGlue。它还支持 Blackberry 和移动网络。它甚至能够使用流行的引擎，如 OpenGL 和 Box2D，来构建跨平台游戏。它甚至拥有自己的移动市场，开发者可以在那里出售和分发他们的 Titanium 模块给整个社区。

在本书中，我们将涵盖使用 Titanium Mobile 构建移动应用程序的所有方面，从布局到地图和 GPS，一直到社交媒体集成以及访问设备的输入硬件，包括摄像头和麦克风。书中描述的每个“食谱”都是一个自包含的课程。你可以挑选你想要阅读和使用的区域，并将其作为参考。或者，你也可以按照章节顺序依次阅读每个食谱，从开始到结束构建一个小型应用程序。我们还将介绍如何使用自定义模块扩展应用程序，以及如何打包它们以便在 iTunes App Store 和 Android Marketplace 中分发和销售。

# 本书涵盖的内容

在第一章中，我们将通过了解布局的基础和创建控件来开始我们的 Titanium Mobile 之旅，然后转向标签界面、网页视图，以及如何添加和打开多个窗口。

在第二章，*使用本地和远程数据源*中，我们将构建一个迷你应用，使用 HTTP 请求从 Web 读取数据，并了解如何解析和迭代 XML 和 JSON 格式的数据。我们还将了解如何使用 SQLite 数据库和一些基本的 SQL 查询在本地存储和检索数据。

在第三章，*集成 Google Maps 和 GPS*中，我们将向您的应用中添加一个 MapView，并使用注释、地理编码和跟踪用户位置的事件与之交互。我们还将介绍添加路线和使用设备内置的指南针跟踪航向的基础知识。

在第四章，*使用音频、视频和摄像头增强您的应用*中，我们将了解如何使用 Titanium 与设备的媒体功能进行交互，包括摄像头、照片库和音频录制器。

在第五章，*将您的应用与社交媒体和电子邮件连接*中，我们将了解如何利用 Titanium 并将其与 Facebook、Twitter 以及移动设备的电子邮件功能集成。我们还将介绍设置 Facebook 应用，并简要介绍 OAuth 的世界。

在第六章，*掌握事件和属性*中，我们将简要介绍 Titanium 中属性的工作原理，以及如何在您的应用中获取和设置全局变量。我们还将解释事件监听器和处理程序的工作方式，以及如何从您的控件和应用程序中的任何位置触发事件。

在第七章，*创建动画、变换以及理解拖放*中，我们将向您展示如何创建动画，以及如何使用 Titanium 中的 2D 和 3D 矩阵来变换您的对象。我们还将演示如何使用内置的"toImage"功能进行拖放控制和截图。

在第八章，*与原生手机应用和 API 交互*中，我们将发现如何与原生设备 API 交互，例如设备的联系人日历。我们还将了解如何使用本地通知和后台服务。

在第九章，*将您的应用与外部服务集成*中，我们将深入了解 OAuth 和 HTTP 身份验证，并展示如何连接到外部 API，例如 Yahoo! YQL 和 Foursquare。我们还将介绍推送通知的设置和集成到 Titanium 应用中。

在第十章中，*使用自定义模块扩展你的应用*，我们将看到如何扩展 Titanium 的本地功能，并使用 Objective-C 和 Xcode 添加你自己的自定义、本地模块。我们将从开始到结束在 Xcode 中运行一个示例模块，使用 Bit.ly 服务创建短网址。

在第十一章中，*平台差异、设备信息和怪癖*，我们将探讨如何使用 Titanium 获取设备信息，包括重要功能，如打电话、检查内存和检查电池剩余分配。我们还将介绍屏幕方向以及如何在 iOS 和 Android 平台之间编写代码差异。

在第十二章中，*准备你的应用以分发和发布以及如何发布*，我们将看到如何准备和打包你的应用程序以供分发和销售到 iTunes App Store 和 Android 市场，以及如何使用配置文件和开发证书正确设置和配置你的应用。

# 你需要这本书的什么

你需要一个运行 Xcode（最新版本，可在[`developer.apple.com`](http://developer.apple.com)获取）的 Mac 和 Titanium Studio 软件（可在[www.appcelerator.com](http://www.appcelerator.com)获取）。你必须使用 Mac，因为所有说明都是基于它的（Unix），这是由于 iPhone 的原因。不推荐或以任何方式支持使用 PC 来开发苹果 iPhone。

# 这本书适合谁

这本书对于任何拥有一些 JavaScript 或 Web 开发知识并希望跃入为 iPhone 和 Android 构建原生应用的开发者来说都是必不可少的。不需要 Objective-C 或 Java 的知识。

# 术语

在这本书中，你将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词汇如下所示：“首先，打开你的`app.js`文件，还有两个名为`recipes.js`和`favorites.js`的 JavaScript 文件”

代码块如下设置：

```java
//add an image to the left of the annotation
var leftImage = Titanium.UI.createImageView({
image: 'images/start.png',
width: 25,
height: 25
});
annotation.leftView = leftImage;
//add the start button
var startButton = 'images/startbutton.png';
annotation.rightButton = startButton;
mapview.addAnnotation(annotation);

```

任何命令行输入或输出都如下所示：

```java
cd /<path to your android sdk>/tools

```

**新术语**和**重要词汇**将以粗体显示。屏幕上显示的词汇，例如在菜单或对话框中，将以如下方式显示：“一旦登录，点击**新建项目**，创建新项目的详细信息窗口将出现。”

### 注意

警告或重要注意事项将以这样的框显示。

### 小贴士

小技巧和窍门如下所示。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大收益的图书非常重要。

要发送一般反馈，只需发送一封电子邮件到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您有一本书需要我们出版，请通过[www.packtpub.com](http://www.packtpub.com)上的**建议书名**表单或通过电子邮件`<suggest@packtpub.com>`发送给我们。

如果您在某个主题上具有专业知识，并且您有兴趣撰写或为图书做出贡献，请参阅我们关于[www.packtpub.com/authors](http://www.packtpub.com/authors)的作者指南。

# 客户支持

现在您已经是 Packt 图书的骄傲拥有者了，我们有一些事情可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从您在[`www.PacktPub.com`](http://www.PacktPub.com)的账户下载您购买的所有 Packt 图书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.PacktPub.com/support`](http://www.PacktPub.com/support)，注册以直接将文件通过电子邮件发送给您。

## 错误清单

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进此书的后续版本。如果您发现任何错误清单，请通过访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，选择您的书，点击**错误提交表单**链接，并输入您的错误详细信息来报告它们。一旦您的错误清单得到验证，您的提交将被接受，错误清单将被上传到我们的网站，或添加到该标题的错误清单部分。任何现有的错误清单都可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)中选择您的标题来查看。

## 盗版

互联网上版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以追究补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您在保护我们的作者以及为我们提供有价值内容的能力方面的帮助。

## 问题

如果您在图书的任何方面遇到问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决。
