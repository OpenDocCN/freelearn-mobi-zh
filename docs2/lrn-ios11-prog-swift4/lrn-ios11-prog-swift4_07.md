# 第七章：设置基本结构

通常，在处理项目时，我在编写任何代码之前都喜欢设置我的故事板。这让我可以专注于编码，而无需在故事板和代码之间来回切换。在这本书中，我们将使用代码进行一些布局，以便向您展示如何做到这一点。但首先，正如我之前提到的，我的首选是在故事板内部尽可能多地设置。

本章将涵盖以下内容：

+   创建标签栏控制器

+   标签栏按钮

+   启动屏幕

+   导航控制器

在上一章中，我们创建了我们的项目，现在我们将继续创建一个从头开始创建的标签栏控制器。尽管有一个包含所有必需内容的标签栏控制器模板，但我发现从头开始是一个很好的学习方法。我还发现，开始时清理比修复或更新模板更容易。然而，你可能希望在将来利用模板开始你的项目。让我们开始设置我们的应用。

# 从零开始

我们将从头开始创建所有文件，因此我们将删除项目中的现有文件，并在接下来的章节中重新创建它们。这样做的原因是让你熟悉项目并了解它是如何设置的。

要删除`ViewController.swift`文件，请执行以下操作：

1.  在导航器面板中选择`ViewController.swift`文件：

![图片](img/73b05c88-307f-4c4d-8fce-239d950a6703.png)

1.  选择文件后，按*Delete/Backspace*键。你会看到以下信息：

![图片](img/4f517dee-fc8e-45ca-a609-70bf5ccaa4a0.png)

1.  选择移动到废纸篓。

现在，我们可以继续设置故事板。

# 故事板设置

让我们熟悉 UI 设置。为了更新你的`Main.storyboard`，请执行以下操作：

1.  在导航器面板中选择`Main.storyboard`文件：

![图片](img/7cd91f5e-e68e-4082-9f86-ac52a0c58e26.png)

1.  在故事板文件中，在大纲视图中选择视图控制器场景：

![图片](img/2a600ac4-d3fd-492a-b964-24e235d91ecd.png)

1.  在选择场景后，你会按*Delete/Backspace*键，现在你的`Main.storyboard`文件将是空的。

1.  然后，在你的实用工具面板中，在底部窗格中，你会看到库选择栏。在栏中，选择对象库：

![图片](img/9b3c69e8-c3d9-4f3e-8aab-e6c83e0aedcf.png)

1.  接下来，你应该向上拉动库选择栏以查看更多对象库：

![图片](img/423ae421-25c4-41f4-990b-02a85a10ef24.png)

1.  查找标签栏控制器：

![图片](img/4c966e2a-83a7-4418-bde3-da9f1d754a72.png)

1.  现在，将标签栏控制器拖到画布上：

![图片](img/cdb0f7bc-839e-4545-b340-09125fcb7dc9.png)

我们现在有了标签栏控制器，它将只有两个标签。

接下来，我们将设置我们的应用资源，以便我们可以为标签提供图像图标。

# 添加我们的应用资源

让我们在项目中添加图片：

1.  在导航器面板中选择`Assets.xcassets`文件夹：

![图片](img/4e0b1003-8749-43cb-94c8-a4d8caeea3d3.png)

1.  点击*删除/退格*按钮，你会看到以下信息：

![](img/1fb067bd-d9fe-4560-89d8-dc6c9bf5f590.png)

1.  选择移动到废纸篓。

1.  打开你从 Packt 网站或 GitHub 下载的项目`assets`文件夹。打开`Chapter_07`。将`Assets.xcassets`文件夹拖动到导航器面板中的项目中：

![](img/1f4d6927-9f50-4e7c-9295-62a6de08dba7.png)

1.  当你放下文件夹时，你会看到以下信息：

![](img/8d7c244d-b20c-460e-8ff4-2ab84a88a1e7.png)

1.  确保选中了“如果需要则复制项目”和“创建组”两项。然后，点击完成。

如果你打开`Assets.xcassets`文件夹，你现在将看到整个项目的所有资源：

![](img/1d4e4a82-328c-439b-a913-631ad3093edc.png)

当你探索资源时，你会注意到我们将使用 PNG 和 PDF。

使用 PDFs 允许我们仅使用一张图片来支持多个设备分辨率。因此，Xcode 可以处理为所有分辨率提供资源。

1.  再次选择`Main.storyboard`，在概览视图中，选择`Item 1 场景`和`Item 2 场景`的两个展开箭头，以便它们向下：

![](img/7f7e1cd8-b72d-415b-bebb-3efbc5774030.png)

1.  现在，选择`Item 1 场景`下的 Item 1 和`Item 2 场景`下的 Item 2，它们都应该向下：

![](img/598e9eda-c133-48fd-8d4b-7902880e8210.png)

1.  选择左侧带有蓝色星号的 Item 1，然后选择实用工具面板中的属性检查器：

![](img/00d8eba1-51aa-4a84-94b2-324c8d4c05fc.png)

1.  在面板中，使用以下值来更新你的第一个标签图标：

+   +   在标签条目项中，输入以下详细信息：

        +   徽章：留空此字段

        +   系统项目：从下拉列表中选择自定义

        +   已选图像：icon-explore-on

        +   标题位置：从下拉列表中选择默认位置

+   +   在条目项中，输入以下详细信息：

        +   **标题**：在此字段中输入`Explore`

        +   图像：icon-explore-off

        +   标签：在此字段中输入`0`

        +   启用：此复选框应该被勾选

1.  现在，在概览视图中，选择左侧带有蓝色星号的第 2 项，属性检查器应该已经打开：

![](img/66c5581c-7a6e-4a3a-aaa1-b4f4505a359e.png)

1.  将以下内容添加到面板中：

+   +   在标签条目项中，输入以下详细信息：

        +   徽章：留空此字段

        +   系统项目：从下拉列表中选择自定义

        +   已选图像：icon-map-on

        +   标题位置：从下拉列表中选择默认位置

    +   在条目项中输入以下详细信息

        +   **标题**：在此字段中输入`Map`

        +   **图像**：icon-map-off

        +   **标签**：在此字段中输入`0`

        +   **启用**：此复选框应该被勾选

1.  现在，通过点击播放按钮（或使用*cmd* + *R*）来运行项目，以便查看我们的位置：

![](img/0f9e7a3b-aca7-464d-9320-5ebf37520f09.png)

如你所见，这个屏幕看起来不像一个应用。由于我们是从头开始构建标签栏控制器，我们需要添加一个入口点。关闭模拟器，继续以下步骤：

1.  再次在概览视图中选择`Main.storyboard`，并确保`标签栏控制器场景`的展开箭头向下：

![图片](img/03c672a4-0002-4c41-9d51-a0d04df6cdc6.png)

1.  在`标签栏控制器场景`下选择`标签栏控制器`，并在实用工具面板中确保属性检查器被选中：

![图片](img/275b7ea5-46e8-4680-9235-dd97535963de.png)

1.  现在，在视图控制器部分，你需要勾选“是否为初始视图控制器”的框：

![图片](img/2bca73b3-bb17-4a61-8646-4b954f17f837.png)

1.  在设置初始视图控制器后，现在将有一个箭头指向标签栏控制器。这个箭头表示我们应用的入口点：

![图片](img/163a8e86-521b-434b-9beb-b27ec4243e86.png)

1.  通过点击播放按钮（或使用*cmd* + *R*）再次运行项目：

![图片](img/42469012-6a8e-4600-87a6-0de57286f4e1.png)

完美！现在，我们的基本结构已经建立，我们可以开始向我们的视图中添加更多特定的元素。

# 故事板

在我们这样做之前，让我们更新`LaunchScreen.storyboard`。这个故事板在我们应用首次启动时使用。

# 创建我们的启动屏幕

启动屏幕可以使用图像创建，但这意味着你必须为每个设备和设备方向创建图像。使用`LaunchScreen.storyboard`使我们能够为所有设备和方向创建一个资产：

1.  选择`LaunchScreen.storyboard`文件，并在概览视图中确保`视图控制器场景`和`视图控制器`的展开箭头向下。然后，在`视图控制器`下选择`视图`：

![图片](img/5e28b77a-deef-4c0f-ba5c-fb7b7cd5f93e.png)

1.  在实用工具面板中，选择属性检查器，并点击白色背景条：

![图片](img/eb81b9d1-a385-4f3a-9830-d48bf750c3ba.png)

1.  现在，你将看到一个颜色面板出现。选择第二个标签，它被称为**颜色滑块**：

![图片](img/aedadccc-7d56-4661-8590-f1c87dcbeae4.png)

1.  在 RGB 滑块下，将十六进制颜色#的值从`FFFFFF`更新到`4A4A4A`。这应该将你的背景颜色从白色更改为深灰色：

![图片](img/4dfcc3d9-de23-40c4-9914-9c4bc2e2489f.png)

1.  你可能需要再次选择背景颜色。如果是这样，只需再次在属性检查器中选择背景条，这将把十六进制颜色#恢复到`FFFFFF`。然后，只需再次将其更改为`4A4A4A`。你现在可以关闭颜色面板，你应该会在标准编辑器面板中看到背景颜色更新：

![图片](img/8ccd9910-9f24-4330-92c3-bd62b6915e7d.png)

接下来，我们需要将应用标志带到屏幕上：

1.  在仍然处于`LaunchScreen.storyboard`的情况下，在实用工具面板的库选择栏下选择媒体库：

![图片](img/6555e29c-0e96-4eda-abde-a078f97a2246.png)

媒体库允许我们访问我们的图像资源，并且它会将这些图像放置在我们的`UIImageView`中。

1.  在过滤器中，在库面板的底部，输入 `detail-logo`。一旦出现，将标志拖放到 `LaunchScreen.storyboard`：

![图片](img/6d314f1f-5651-41d6-9c85-c4392d83fa4f.png)

有可能在 Xcode 中存在一个错误，因此有时当你拖动标志时，宽度和高度将不会设置，你需要手动输入宽度和高度。

1.  如果您的标志没有拖动到所需大小，请执行以下步骤：选择标志，在实用工具面板中打开大小检查器，并将宽度和高度设置为以下值：

+   +   **宽度**： `220`

    +   **高度**： `112`

![图片](img/55eca239-65ac-4a7c-8406-eab214bb8c6b.png)

1.  我们希望我们的 *Let's Eat* 标志显示在屏幕中央。为了让我们的标志在所有设备上显示在中央，我们需要应用自动布局。选择 `detail-logo`，然后选择过滤器旁边的固定图标：

![图片](img/03ff2481-296b-41a9-825a-af35f1f57d42.png)

1.  接下来，选择对齐图标（如前图所示），它位于固定图标左侧，并勾选出现的以下复选框：

+   +   在容器中水平排列

    +   在容器中垂直排列

1.  然后，点击添加 2 个约束。

当你完成时，你会看到以下内容：

![图片](img/606802d6-7221-4c15-b54e-c54e785837f4.png)

现在我们的启动屏幕已针对所有设备设置。如果您再次运行项目，您现在将看到带有 *Let's Eat* 标志和新背景颜色的启动屏幕。

让我们继续添加探索标签页的详细信息，因为这是用户在应用启动后看到的第一件事。

# 添加导航控制器

我们首先需要将导航控制器添加到我们的探索标签页。这将允许我们做一些事情，例如在导航标题栏中添加一个按钮来展示我们的城市列表。

1.  选择 `Main.storyboard`，在大纲视图中选择带有左侧蓝色星号的 `Explore`，在 `Explore Scene` 的 `Item 1` 下：

![图片](img/56f2be3b-3485-47ca-b8c3-733ba8527a14.png)

1.  然后，导航到编辑器 | 嵌入 | 导航控制器：

![图片](img/9c84f2b3-1613-42c8-b89d-2839c6571c51.png)

1.  现在，我们的视图控制器已经有一个导航控制器：

![图片](img/dd680d1b-3737-4f47-b559-0f02757cd903.png)

1.  通过点击播放按钮（或使用 *cmd* + *R*）来运行项目：

![图片](img/a37b8d57-7000-4539-8638-4c366d89a485.png)

重复上述步骤 1 到 4，为地图标签添加导航控制器。现在我们已经添加了两个导航控制器，在下一章中，我们将继续创建其他视图控制器。

# 摘要

分镜设计是我喜欢做的事情之一。使用分镜设计快速且轻松地设置你的用户界面。能够将所需内容拖放到画布上是一种非常高效的开发应用分镜的方法。有时你将需要编写代码，但能够在不编写任何代码的情况下工作是一种美妙的能力。我的偏好是尽可能多地使用分镜设计，但许多开发者更喜欢用代码来实现。如果你来自其他编程语言，尝试保持开放的心态，真正学习分镜设计。

当你在一个使用分镜设计的项目中工作时，你可以获得项目的高级概述。当所有内容都编写在代码中时，需要更多的时间来获得对应用结构及其整体流程的基本理解。再次强调，有些人非常喜欢编写他们的 UI 代码，我们在这本书中也会做一些这方面的内容。我的主要观点是，你必须找到适合你的方法。这本书更倾向于分镜设计方面，而不是设置 UI 的编码方面。

在下一章中，我们将继续设置我们的 UI，并熟悉你在许多 iOS 应用中看到的一些更多 UI 元素。
