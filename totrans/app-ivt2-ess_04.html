<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;4.&#xA0;Fling App &#x2013; Part 2"><div class="book" id="NQU22-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04" class="calibre1"/>Chapter 4. Fling App – Part 2</h1></div></div></div><p class="calibre9">In <a class="calibre1" title="Chapter 3. Navigating the App Inventor Platform" href="part0020_split_000.html#J2B81-9c0b907946184095a315b26c8a9b12bc">Chapter 3</a>, <span class="strong"><em class="calibre19">Navigating the App Inventor Platform</em></span>, you learned to use the MIT App Inventor Designer and Blocks Editor by creating your first fully functional mobile app! In this chapter, we will show you how you can take the basic Fling app and build it out by adding more complex features. We will demonstrate how to enable:</p><div class="book"><ul class="itemizedlist"><li class="listitem">A scoring <a id="id180" class="calibre1"/>mechanism that will display when the ball touches the top edge</li><li class="listitem">Code, so the ball can only be flung from the lower half of the screen</li><li class="listitem">The increasing levels of difficulty by increasing ball speed</li></ul></div><p class="calibre9">We will also begin debugging. Debugging is a standard practice in app development and should be viewed as part of the process, not as something negative.</p><p class="calibre9">Each time you add new components to your app, we encourage you to share your app with others to get feedback. Not only will the feedback give you ideas about the design, but it will also help you learn what users want from an app game. Such information will prove invaluable once you begin designing apps from scratch. This chapter will not only help you discover new ways to enhance a game app, it will also trigger new paths of creativity! By the end of this chapter, your Fling app will resemble the following image:</p><div class="mediaobject"><img src="../images/00109.jpeg" alt="Fling App – Part 2" class="calibre11"/></div><p class="calibre12"> </p></div>

<div class="book" title="Chapter&#xA0;4.&#xA0;Fling App &#x2013; Part 2">
<div class="book" title="Adding a scoring feature"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch04lvl1sec19" class="calibre1"/>Adding a scoring feature</h1></div></div></div><p class="calibre9">Since most <a id="id181" class="calibre1"/>game apps include some sort of scoring feature, we will add <a id="id182" class="calibre1"/>this code to our Fling app. The score will display in the same label that will also display the <span class="strong"><strong class="calibre10">Game Over</strong></span> text.</p></div></div>

<div class="book" title="Chapter&#xA0;4.&#xA0;Fling App &#x2013; Part 2">
<div class="book" title="Adding a scoring feature">
<div class="book" title="Coding scoring blocks"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch04lvl2sec32" class="calibre1"/>Coding scoring blocks</h2></div></div></div><p class="calibre9">We left off in the last <a id="id183" class="calibre1"/>chapter with the ball bouncing off all the edges except the bottom edge. Now, we want to program the app to increase the score by one point every time the ball reaches the top edge. We will use another <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> block and add it into the <span class="strong"><strong class="calibre10">else</strong></span> portion of the existing <span class="strong"><strong class="calibre10">if/then/else</strong></span> block within the <span class="strong"><strong class="calibre10">when </strong></span><a id="id184" class="calibre1"/>
<span class="strong"><strong class="calibre10">Ball1.EdgeReached</strong></span> event, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00110.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Can you guess what block will fit in the <span class="strong"><strong class="calibre10">if</strong></span> opening? If the ball hits the top edge, then the app will increase the score by <span class="strong"><strong class="calibre10">1</strong></span>. In <a class="calibre1" title="Chapter 3. Navigating the App Inventor Platform" href="part0020_split_000.html#J2B81-9c0b907946184095a315b26c8a9b12bc">Chapter 3</a>, <span class="strong"><em class="calibre19">Navigating the App Inventor Platform</em></span>, you learned that the bottom edge is represented by <span class="strong"><strong class="calibre10">-1</strong></span> (and the top edge is represented by 1). Since we've already created an if/then scenario for the ball hitting the bottom edge, we can copy this set of blocks and adjust it for the ball hitting the top edge.</p><p class="calibre9">Copy the blue block from the existing <span class="strong"><strong class="calibre10">if</strong></span> block (note that by copying the blue block, you will also automatically copy the embedded orange <span class="strong"><strong class="calibre10">get edge</strong></span> block and the blue <span class="strong"><strong class="calibre10">-1</strong></span> math block). Snap these pasted blocks into the new <span class="strong"><strong class="calibre10">if</strong></span> block and change <span class="strong"><strong class="calibre10">-1</strong></span> to <span class="strong"><strong class="calibre10">1</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00111.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">We have <a id="id185" class="calibre1"/>coded: if the top edge is reached, then what will happen? We want the app to record a point. To code the score feature, we will first create a <span class="strong"><strong class="calibre10">global variable</strong></span>. A global variable is a value that can be used by any block, whereas a <span class="strong"><strong class="calibre10">local variable</strong></span> is one that can only be used by the specific block for which it was intended. Go to the <span class="strong"><strong class="calibre10">Variables</strong></span> block drawer and select the orange, <span class="strong"><strong class="calibre10">initialize global name to</strong></span> block.</p><div class="mediaobject"><img src="../images/00112.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Click on <span class="strong"><strong class="calibre10">name</strong></span> and change the text to <span class="strong"><strong class="calibre10">score</strong></span>. Next, in the <span class="strong"><strong class="calibre10">Math</strong></span> drawer, select the <span class="strong"><strong class="calibre10">0</strong></span> blue Math block. Connect it to the <span class="strong"><strong class="calibre10">initialize global score to</strong></span> block. Your blocks will now look like the following screenshot. Note that this <span class="strong"><strong class="calibre10">initialize global name</strong></span> block does not fit into any other block; it stands alone with the attached Math <span class="strong"><strong class="calibre10">0</strong></span> block.</p><div class="mediaobject"><img src="../images/00113.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">By setting the global variable equal to <span class="strong"><strong class="calibre10">0</strong></span>, essentially, we have established the initial score to be set to <code class="email">0</code>. Now, we can program the app to add <span class="strong"><strong class="calibre10">1</strong></span> to this score. Go back into the <span class="strong"><strong class="calibre10">Variables</strong></span> block drawer and select the <span class="strong"><strong class="calibre10">set to</strong></span> block. Click on the little arrow in the middle of the block and select <span class="strong"><strong class="calibre10">global score</strong></span> from the drop-down menu (this is now available for us to select because we created the global <a id="id186" class="calibre1"/>variable). Insert the block into the empty <span class="strong"><strong class="calibre10">then</strong></span> slot, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00114.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">You will insert a Math block into the <span class="strong"><strong class="calibre10">set global score to</strong></span> block because, every time the top edge is reached, we will want to get the current score (in this case, <span class="strong"><strong class="calibre10">0</strong></span>) and add <span class="strong"><strong class="calibre10">1</strong></span> to it. Therefore, we will need the blue Math addition block, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00115.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">The first <a id="id187" class="calibre1"/>blank will be filled with an orange <span class="strong"><strong class="calibre10">get global score</strong></span> block, in the second block after the plus sign, there will be a number block filled with <span class="strong"><strong class="calibre10">1</strong></span>, as shown in the following screenshot. There are two ways to find the get global score block. One is in the Variables drawer. Click on the get to block and then click on the downward arrow to select global score from the drop down menu. Or, you can hover (not click) over the initialize global score block and both a set and get global score block will appear. Select the get global score block. The reason we are using the get global score block and not the 0 block is because we want to add 1 to the most recent score. At the beginning of the game, the score is 0, but as soon as the ball hits the top edge, the new global score will be 0+1, then 1+1 (and so on):</p><div class="mediaobject"><img src="../images/00116.jpeg" alt="Coding scoring blocks" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">So now, we <a id="id188" class="calibre1"/>have created the code to update the score each time the top edge is reached. But we haven't yet created the code to display the score. Let's do this next.</p></div></div></div>

<div class="book" title="Chapter&#xA0;4.&#xA0;Fling App &#x2013; Part 2">
<div class="book" title="Adding a scoring feature">
<div class="book" title="Updating the score label"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch04lvl2sec33" class="calibre1"/>Updating the score label</h2></div></div></div><p class="calibre9">Take a <a id="id189" class="calibre1"/>look at the blocks in the first <span class="strong"><strong class="calibre10">then</strong></span> section in the following screenshot and notice the name change of our Score Label. Since the Score Label will be displaying both the score and the level, we decided to make that clear in our label name. In the Designer, we renamed the Label from Score to Score_Level_Label. This change updates in the Blocks Editor as well. The block name initially was, set Score.Text to is now, set Score_Level_Label.Text to. The blocks drawer is also updated. We show you this edit in the middle of development because sometimes, no matter how well thought out your app is, you may discover ways to improve it as you begin coding. Changing the Label name is not necessarily integral to the functioning of our app, but it helps us to be more clear in our design</p><div class="mediaobject"><img src="../images/00117.jpeg" alt="Updating the score label" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Since the Label will now display both the score and the level, we need to code that. Copy the green <span class="strong"><strong class="calibre10">set Score_Level_Label.Text to</strong></span> block, from the if/then/else block. Since it will also copy the pink <span class="strong"><strong class="calibre10">"Game Over"</strong></span> text block, you can merely delete this block as we won't need it. Instead, go into the pink <span class="strong"><strong class="calibre10">Text</strong></span> blocks and choose the <span class="strong"><strong class="calibre10">join</strong></span> block, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00118.jpeg" alt="Updating the score label" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">We need this block to set the Label text to display pieces of information: the score and the level. If you think about it, we can't just display two numbers because the user won't know what they mean. We have to display: the word <span class="strong"><strong class="calibre10">Score</strong></span> and the actual score (whatever number it is) and the word "Level" and the actual level (whatever number that is). To begin, we will just add two things, the word Score and the actual score. You probably can guess that the first block to attach to the join block is another blank <span class="strong"><strong class="calibre10">Text</strong></span> block will. Type the word <span class="strong"><strong class="calibre10">Score:</strong></span> with a space after the colon (so there will be a space between the word and the score number). The second block is the orange <span class="strong"><strong class="calibre10">get global score</strong></span> block.</p><div class="mediaobject"><img src="../images/00119.jpeg" alt="Updating the score label" class="calibre11"/></div><p class="calibre12"> </p></div></div></div>
<div class="book" title="Increasing difficulty" id="OPEK1-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec20" class="calibre1"/>Increasing difficulty</h1></div></div></div><p class="calibre9">If you <a id="id190" class="calibre1"/>stop and think about our app as it stands, it would be very easy to cheat! A user could just keep the ball very near the top edge and fling it a short distance to amass tons of points! If you'd like to make it harder for the user to score points, we will show you one way to increase the difficulty. If, on the other hand, you are making this app for a young user and want it to be easy for them to score points, then you can skip this section.</p></div>
<div class="book" title="Changing the game's dynamic"><div class="book" id="PNV62-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec21" class="calibre1"/>Changing the game's dynamic</h1></div></div></div><p class="calibre9">As the game <a id="id191" class="calibre1"/>stands, the ball is moving downward and whenever your <a id="id192" class="calibre1"/>finger touches it, it will get flung in another direction (to be exact, 360 degrees minus the direction it was heading). We can program the app so the ball only responds to a fling when it is below the middle of the screen. Can you guess how we might program this? If you guessed using an <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> block, you're on the right track! If the ball is below the middle of the screen, then it can be flung.</p><p class="calibre9">Currently, our blocks look like the following screenshot:</p><div class="mediaobject"><img src="../images/00120.jpeg" alt="Changing the game's dynamic" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">We want to tell the app to first check and see whether the ball is below the middle of the screen. We've coded something similar if you recall when we used the <span class="strong"><strong class="calibre10">Screen1.Width</strong></span> block. Since we won't know the screen size of every user, we cannot just input a specific number and divide it by 2. But we can get the user's screen size with the <span class="strong"><strong class="calibre10">Screen1.Height</strong></span> block and divide this by 2. In <a class="calibre1" title="Chapter 3. Navigating the App Inventor Platform" href="part0020_split_000.html#J2B81-9c0b907946184095a315b26c8a9b12bc">Chapter 3</a>, <span class="strong"><em class="calibre19">Navigating the App Inventor Platform</em></span>, you also learned that <span class="strong"><strong class="calibre10">x</strong></span> is used to represent the width and <span class="strong"><strong class="calibre10">y</strong></span> is used to represent the height. The values of <span class="strong"><strong class="calibre10">x</strong></span> and <span class="strong"><strong class="calibre10">y</strong></span> start with <code class="email">0</code>, <code class="email">0</code> in the top left corner of the screen. So, we will use the <span class="strong"><strong class="calibre10">y</strong></span> variable, which represents the height. We know that <span class="strong"><strong class="calibre10">y</strong></span> gets bigger from top to bottom. Thus, we want to enable the ball to be flung if <span class="strong"><strong class="calibre10">y</strong></span> is bigger than the screen size divided by <code class="email">2</code>. For example, suppose that the height of the screen is <code class="email">100</code> (with the value of <code class="email">0</code> at the top and the value of <code class="email">100</code> at the bottom). If the ball is at <span class="strong"><em class="calibre19">y = 51</em></span>, it will be just below the halfway mark. Thus, it will be enabled to be flung.</p><p class="calibre9">To begin coding <a id="id193" class="calibre1"/>this scenario temporarily, remove <span class="strong"><strong class="calibre10">set Ball1.Heading</strong></span> and <a id="id194" class="calibre1"/>its accompanying blocks from the when Ball1.Flung event block. Add an <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> block and a <span class="strong"><strong class="calibre10">greater than Math</strong></span> block (select the equals Math block and then chose the greater than symbol from the drop down menu by clicking on the downward arrow in the center of the block) to the <span class="strong"><strong class="calibre10">if</strong></span> opening, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00121.jpeg" alt="Changing the game's dynamic" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Next, hover over (don't click on) the light orange box with the variable <span class="strong"><strong class="calibre10">y</strong></span> in the <span class="strong"><strong class="calibre10">when Ball1.Flung</strong></span> event block. This will produce a pop-up window. Select the top choice, <span class="strong"><strong class="calibre10">get y</strong></span>, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00122.jpeg" alt="Changing the game's dynamic" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Insert the <a id="id195" class="calibre1"/>
<span class="strong"><strong class="calibre10">get y</strong></span> block into the first opening before the greater <a id="id196" class="calibre1"/>than sign. Remember we won't be adding a number into the second opening, but rather an equation of the screen height divided by 2.</p><div class="mediaobject"><img src="../images/00123.jpeg" alt="Changing the game's dynamic" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">In the second opening, insert another <span class="strong"><strong class="calibre10">Math</strong></span> block—this time, a division <span class="strong"><strong class="calibre10">Math</strong></span> block because we want the <span class="strong"><strong class="calibre10">y</strong></span> to be greater than the screen height divided by <span class="strong"><strong class="calibre10">2</strong></span>. Get the <span class="strong"><strong class="calibre10">Screen1.Height</strong></span> block from the <span class="strong"><strong class="calibre10">Screen1</strong></span> block drawer and the <span class="strong"><strong class="calibre10">number</strong></span> block from the <span class="strong"><strong class="calibre10">Math</strong></span> drawer, and change the value to <span class="strong"><strong class="calibre10">2</strong></span>. Insert the <span class="strong"><strong class="calibre10">Screen1.Height</strong></span> block into the first opening of the <span class="strong"><strong class="calibre10">Math</strong></span> division block and insert the number 2 block into the opening after the division sign.</p><p class="calibre9">Reinsert the set <span class="strong"><strong class="calibre10">Ball1.Heading</strong></span> blocks you removed earlier into the <span class="strong"><strong class="calibre10">then</strong></span> opening of the <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> block, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00124.jpeg" alt="Changing the game's dynamic" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Now, our app <a id="id197" class="calibre1"/>checks to see <span class="strong"><em class="calibre19">if</em></span> the ball's <span class="strong"><strong class="calibre10">y</strong></span> height value is below the halfway <a id="id198" class="calibre1"/>point on the screen. If it is, <span class="strong"><em class="calibre19">then</em></span> the ball will be flung in a direction indicated by our formula, <span class="strong"><strong class="calibre10">360 - Ball1.Heading</strong></span>. If it is not, nothing will happen.</p></div>
<div class="book" title="Creating levels"><div class="book" id="QMFO2-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec22" class="calibre1"/>Creating levels</h1></div></div></div><p class="calibre9">Computer games <a id="id199" class="calibre1"/>typically have multiple levels where the difficulty of <a id="id200" class="calibre1"/>playing the game progressively increases. This is what makes a game fun, challenging, and even somewhat addictive. We want to incorporate levels in our game as well.</p><p class="calibre9">One simple way to make the game play harder and harder is to increase the speed of the ball as the player continues to score points. You can create whatever tiers you like, but for the purpose of this tutorial, we will create a simple tier system: whenever a player scores 5 points, the player has completed a level. Again, to keep it simple, we will not pause game play (as is common in most computer games) when a level is completed. The player will automatically move on to the next level, which will also increase the speed of the ball.</p><p class="calibre9">To figure out whether a level change is needed or not, we will code the app to constantly check the value of score. Each time the score is incremented, the app will check to see whether it is a multiple of 5 (for example, <span class="strong"><em class="calibre19">score = 5, 10, 15, 20, and so on</em></span>). If the score is indeed a multiple of 5, it will mean that the player has scored another 5 points and a level change should occur. To change the level, we will simply increase the speed a little bit.</p><p class="calibre9">As explained earlier in this chapter, the event, <span class="strong"><strong class="calibre10">Ball1.EdgeReached</strong></span>, contains the code that increments the score: the <span class="strong"><strong class="calibre10">set global score to</strong></span> block. Whenever the score increases, the label will update to display the new score (the previous score plus 1). As you can see in the blocks shown in the following screenshot, the block immediately after the score-increment block is the <span class="strong"><strong class="calibre10">set Score_Level_Label.text to</strong></span> block to update the score displayed.</p><p class="calibre9">Now, we will add an <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> block right after the <span class="strong"><strong class="calibre10">set Score_Level_Label.text</strong></span> block. Do you remember <a id="id201" class="calibre1"/>where to find the <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> block?</p><div class="mediaobject"><img src="../images/00125.jpeg" alt="Creating levels" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Now, let's think about the condition that we want to insert in the empty socket next to <span class="strong"><strong class="calibre10">if</strong></span>. We want to check and see whether the score is a multiple of 5 (if it is a multiple of 5, then the remainder <a id="id202" class="calibre1"/>will be 0). In order to do so, we need to complete the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Get the current value of the score.</li><li class="listitem" value="2">Divide its value by 5 and calculate the remainder.</li><li class="listitem" value="3">See whether the remainder is equal to 0.</li></ol><div class="calibre23"/></div><p class="calibre9">To achieve these three subtasks, we will first get the <span class="strong"><strong class="calibre10">get global score</strong></span> block just like we did when we used this block to increment the score. This block can be select from the <span class="strong"><strong class="calibre10">Variables</strong></span> blocks or can be copied from your current set of blocks. This completes task 1.</p><p class="calibre9">Next, we will get the remainder of the block from under the <span class="strong"><strong class="calibre10">Math</strong></span> blocks. This step is not as obvious. When you go to the Math blocks, you will not see any remainder block. Instead, select the <span class="strong"><strong class="calibre10">modulo of</strong></span> block, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00126.jpeg" alt="Creating levels" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Click on the <a id="id203" class="calibre1"/>downward-facing triangle to the right of <span class="strong"><strong class="calibre10">modulo of</strong></span> and select <span class="strong"><strong class="calibre10">remainder of</strong></span> from the drop-down list. Modulo, remainder, and quotient are different mathematical operations related to division. Hence, they all belong to the same block. Place the <span class="strong"><strong class="calibre10">get global score</strong></span> block within the first slot of the <span class="strong"><strong class="calibre10">remainder of</strong></span> block. Since we want to calculate the remainder of the score when divided by 5, place number <span class="strong"><strong class="calibre10">5</strong></span> in the second slot of the <span class="strong"><strong class="calibre10">remainder of</strong></span> block (that is, insert a Math number block and change the value from 0 to 5). This completes step 2.</p><p class="calibre9">Finally, we want to check whether this remainder is equal to 0. If it is equal to 0, then it is time to increase the level (speed). If it is not, the level (speed) will remain the same. To check for the equality of numbers, we will need an <span class="strong"><strong class="calibre10">equal to</strong></span> block from the <span class="strong"><strong class="calibre10">Math</strong></span> blocks. Plug the <span class="strong"><strong class="calibre10">remainder of</strong></span> block (and its accompanying <span class="strong"><strong class="calibre10">get global score / 5</strong></span> blocks) that we created in step 2 into the left side of the <span class="strong"><strong class="calibre10">equal to</strong></span> block and the number <span class="strong"><strong class="calibre10">0</strong></span> into the right side. The following screenshot shows the completed steps plugged to the <span class="strong"><strong class="calibre10">if</strong></span> statement:</p><div class="mediaobject"><img src="../images/00127.jpeg" alt="Creating levels" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Blocks placed within the <span class="strong"><strong class="calibre10">then</strong></span> part of an <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span> statement are executed only when the condition plugged to the <span class="strong"><strong class="calibre10">if</strong></span> statement is true. In this case, when the score is a multiple of 5 (that is, the whole remainder equals 0 and the if block evaluates to be true), we would want to increase the speed. We need two blocks from the Ball1 drawer. The first block, <span class="strong"><strong class="calibre10">Ball1.Speed</strong></span>, gives <a id="id204" class="calibre1"/>us the current value of <span class="strong"><strong class="calibre10">Ball1</strong></span>'s speed property. The <a id="id205" class="calibre1"/>second one, <span class="strong"><strong class="calibre10">set Ball1.Speed</strong></span>, lets us change the speed.</p><div class="mediaobject"><img src="../images/00128.jpeg" alt="Creating levels" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Since we want to increase the speed relative to the current speed, we will use both these blocks by:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Using <span class="strong"><strong class="calibre10">Ball1.Speed</strong></span> to get the current speed.</li><li class="listitem" value="2">Increasing the <span class="strong"><strong class="calibre10">Ball1.Speed</strong></span> value by a small amount.</li><li class="listitem" value="3">Using the result to set the new speed.</li></ol><div class="calibre23"/></div><p class="calibre9">To complete these steps, drag an <span class="strong"><strong class="calibre10">add</strong></span> block from the <span class="strong"><strong class="calibre10">Math</strong></span> blocks and attach it to the <span class="strong"><strong class="calibre10">set Ball1.Speed</strong></span> block. Insert the <span class="strong"><strong class="calibre10">Ball1.Speed</strong></span> block into the opening on the left-hand side of the plus sign and a <span class="strong"><strong class="calibre10">number</strong></span> Math block set to 2 (the small amount that we are increasing the speed by) in the opening on the right-hand side of the plus sign. This completes tasks 1, 2, and 3. Finally, we will place the block within the <span class="strong"><strong class="calibre10">then</strong></span> block, as shown in the <a id="id206" class="calibre1"/>following screenshot:</p><div class="mediaobject"><img src="../images/00129.jpeg" alt="Creating levels" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">To summarize, whenever the user scores a point, the new score will be calculated. Then, the app will check to see whether the new score is a multiple of 5 or not. If it is indeed a multiple of 5, the app will increase the speed by a little bit to make the game harder. If the score is <a id="id207" class="calibre1"/>not a multiple of 5, nothing will change; the speed will remain the same.</p><p class="calibre9">We have completed coding the leveling part of our app! Can you think of what is still missing? We need to display the new level in the label!</p></div>
<div class="book" title="Updating the score label to display the level"><div class="book" id="RL0A2-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec23" class="calibre1"/>Updating the score label to display the level</h1></div></div></div><p class="calibre9">In our game, we <a id="id208" class="calibre1"/>have a label that displays the score or the <a id="id209" class="calibre1"/>words <span class="strong"><strong class="calibre10">"Game Over"</strong></span>. Now that we have implemented levels as well, we also want to display the level within that label.</p><p class="calibre9">As shown in the following screenshot, we used the <span class="strong"><strong class="calibre10">join</strong></span> block to join two pieces of information and display it in the label—the word <span class="strong"><strong class="calibre10">Score:</strong></span>  (there is a blank space after the colon) and the value of the score. Now that we want to display the level, we will add three more pieces of information to this <span class="strong"><strong class="calibre10">join</strong></span> block. There is another blank space after the score (value), followed by the word <span class="strong"><strong class="calibre10">"Level: "</strong></span> (there is also a blank space after the colon here), and finally the value of level.</p><p class="calibre9">To make room for these three new pieces of information, we need to add strings to the existing <span class="strong"><strong class="calibre10">join</strong></span> block. Click on the blue square in the top left corner of the <span class="strong"><strong class="calibre10">join</strong></span> block. This will open a pop-up window. Inside this popup, drag the <span class="strong"><strong class="calibre10">string</strong></span> block from the top left corner into the <span class="strong"><strong class="calibre10">join</strong></span> block on the right-hand side. Do this three times. Each time you add another <span class="strong"><strong class="calibre10">string</strong></span>, you will see a new space appear in the <span class="strong"><strong class="calibre10">join</strong></span> block below the <span class="strong"><strong class="calibre10">get global score</strong></span> block.</p><div class="mediaobject"><img src="../images/00130.jpeg" alt="Updating the score label to display the level" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">If you have <a id="id210" class="calibre1"/>done this correctly, there will be three empty slots, as shown in the following screenshot. Now, click anywhere outside the popup to close the pop-up menu.</p><div class="mediaobject"><img src="../images/00131.jpeg" alt="Updating the score label to display the level" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">Now, we are ready to plug in the three new pieces of information related to the levels. Plug in a blank text box in the first open slot (the blank text block is the first block in <span class="strong"><strong class="calibre10">Text</strong></span> block's drawer). Even though it seems like this contains a blank space, we must make one. Click inside the blank text and press your keyboard's spacebar to create a space. In the <a id="id211" class="calibre1"/>next empty slot, plug in another blank text block, and click and type in the word <span class="strong"><strong class="calibre10">Level:</strong></span> with a space after the colon.</p><p class="calibre9">As you might have correctly guessed, the last piece of text we will plug into the <span class="strong"><strong class="calibre10">join</strong></span> block is the level value. You might be wondering where this level value is going to come from. We will actually calculate this from the current score value.</p><p class="calibre9">When we implemented the levels, we assumed that an increase in score by 5 will trigger a level change. Hence, scores 0 to 4 correspond to level 0, scores 5 to 9 correspond to level 1, scores 10 to 14 correspond to level 2, and so on. We can use some math to calculate the level from the score. As you might have guessed, the math that we are going to use here is the quotient operation. More specifically, we will divide the score by 5 and use the quotient part to determine our levels.</p><p class="calibre9">To use the quotient block, go back to <span class="strong"><strong class="calibre10">Math</strong></span> Blocks drawer and drag a <span class="strong"><strong class="calibre10">modulo</strong></span> block. Then, click <a id="id212" class="calibre1"/>on the downward pointing triangle to <a id="id213" class="calibre1"/>change it to <span class="strong"><strong class="calibre10">quotient</strong></span>. Copy a <span class="strong"><strong class="calibre10">get global score</strong></span> block and plug it into the first open socket of the <span class="strong"><strong class="calibre10">quotient</strong></span> block. Insert a Math <span class="strong"><strong class="calibre10">number</strong></span> block into the second opening and change it to <code class="email">5</code>. The completed blocks are shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00132.jpeg" alt="Updating the score label to display the level" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">This is an ideal time to reconnect your mobile device to your Fling app. Your Label will now display both the score and the level, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00133.jpeg" alt="Updating the score label to display the level" class="calibre11"/></div><p class="calibre12"> </p></div>
<div class="book" title="Updating the Reset button"><div class="book" id="SJGS2-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec24" class="calibre1"/>Updating the Reset button</h1></div></div></div><p class="calibre9">Don't think that we have forgotten about our bug! Have you figured out what the bug is?" In the last chapter, we programmed the Reset button to move the ball to the top of the screen (y=2) and to a random x value. But, before the Play button starts the ball moving, it also moves the ball to a random x location. And the problem is, it isn't the same location that the Reset button previously set. So the ball moves once upon Reset and again on Play. We can fix this problem!" START A NEW PARAGRAPH Start it with "In addition to fixing the bug, we have some other updates to the Reset and Play buttons. Now that <a id="id214" class="calibre1"/>we have added scoring and leveling to our game, we <a id="id215" class="calibre1"/>need to edit the Reset button. There are several tasks related to resetting the game. They are as follows:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Stopping the ball's motion and resetting the position of the ball.</li><li class="listitem" value="2">Resetting the score variable.</li><li class="listitem" value="3">Updating the label used to display the score.</li></ol><div class="calibre23"/></div><p class="calibre9">Another point to note is that we can't assume that the only reason a user presses Reset is because the ball hit the bottom edge and the game ended. We also have to think of the scenario of the user pressing the Reset button to stop the game.</p><p class="calibre9">To reset the position of the ball, we will reuse the <span class="strong"><strong class="calibre10">Ball1.MoveTo</strong></span> block that we already coded in <a class="calibre1" title="Chapter 3. Navigating the App Inventor Platform" href="part0020_split_000.html#J2B81-9c0b907946184095a315b26c8a9b12bc">Chapter 3</a>, <span class="strong"><em class="calibre19">Navigating the App Inventor Platform</em></span>, when we created the <span class="strong"><strong class="calibre10">Play_Button.Click</strong></span> event. When the user presses <span class="strong"><strong class="calibre10">Play</strong></span> button, the ball will move to a random <span class="strong"><strong class="calibre10">x</strong></span> coordinate between the value of <span class="strong"><strong class="calibre10">1</strong></span> and the screen width.</p><div class="mediaobject"><img src="../images/00134.jpeg" alt="Updating the Reset button" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">You may also <a id="id216" class="calibre1"/>recall in <a class="calibre1" title="Chapter 3. Navigating the App Inventor Platform" href="part0020_split_000.html#J2B81-9c0b907946184095a315b26c8a9b12bc">Chapter 3</a>, <span class="strong"><em class="calibre19">Navigating the App Inventor Platform</em></span>, that we programmed the <span class="strong"><strong class="calibre10">Reset</strong></span> button to move the ball to a random integer between <span class="strong"><strong class="calibre10">1</strong></span> and <a id="id217" class="calibre1"/>the screen width, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00135.jpeg" alt="Updating the Reset button" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">As the app is currently programmed, the Reset button moves the ball to a random <span class="strong"><em class="calibre19">x</em></span> position at the top of the screen and the Play button also moves the ball to a random <span class="strong"><em class="calibre19">x</em></span> position at the top of the screen, but these two random positions are not the same. Imagine a scenario in which the ball hits the bottom edge and ends the game. A user presses Reset to move the ball back up to the top of the screen. It goes to a random <span class="strong"><em class="calibre19">x</em></span> location. Then, when the user presses Play, the ball is again reset to a new random <span class="strong"><em class="calibre19">x</em></span> location before it starts moving downward.</p><p class="calibre9">We first programmed the Play button to position the ball at the top of the screen, because the first time the game is played, the user wouldn't press the Reset button, but rather the Play button. However, after the game is played once, the user would press Reset and thus the Play button would no longer need to reposition the ball, since the Reset button will perform this function.</p><p class="calibre9">We want the Play button to let the ball start moving from the same location that the Reset button previously randomly selected. To do this, we need to program our app so that the Play button gets the ball's x location from the <span class="strong"><strong class="calibre10">Reset</strong></span> button.</p><p class="calibre9">To make this Reset_Button and Play_Button communication happen, we will first create a variable called <span class="strong"><strong class="calibre10">randomX</strong></span>. This variable will initially be set to <span class="strong"><strong class="calibre10">0</strong></span>. Initializing a variable to some value (even if that value is not used later on) is important. Select the <span class="strong"><strong class="calibre10">initialize global name to</strong></span> block from the <span class="strong"><strong class="calibre10">Variables</strong></span> blocks drawer. Change the name to <span class="strong"><strong class="calibre10">randomX</strong></span>. Select a number <span class="strong"><strong class="calibre10">Math</strong></span> block and attach it, as shown in the following screenshot (note that <a id="id218" class="calibre1"/>this set of blocks stands on its own; it does not fit into the other event blocks):</p><div class="mediaobject"><img src="../images/00136.jpeg" alt="Updating the Reset button" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">After initializing the <a id="id219" class="calibre1"/>global variable, randomX, we can now use it for both our Reset and Play buttons. If you recall, when we programmed the Play_Button.Click event, we enabled the ball to start moving. We set the value of the set Ball1.Enabled block to true, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00137.jpeg" alt="Updating the Reset button" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">So, for the <span class="strong"><strong class="calibre10">Reset</strong></span> button, we want to disable the ball. And we do this by making the value <span class="strong"><strong class="calibre10">false</strong></span>.</p><p class="calibre9">First, copy and paste the <span class="strong"><strong class="calibre10">set Ball1.Enabled</strong></span> block; it will also copy and paste the attached <span class="strong"><strong class="calibre10">true</strong></span> block. Simply click on the arrow to the right of the word <span class="strong"><strong class="calibre10">true</strong></span> and you will be able to select <span class="strong"><strong class="calibre10">false</strong></span>. This block disables the ball's movement. This was one of our goals, since the user will expect the game to stop when the Reset button is pressed.</p><p class="calibre9">Next, select the <span class="strong"><strong class="calibre10">set global randomX</strong></span> block from the <span class="strong"><strong class="calibre10">Variables</strong></span> block (it will be available as a choice in the blocks drawer, since we initialized the global variable, <span class="strong"><strong class="calibre10">randomX</strong></span>). We will generate a random integer for the x coordinate and store it in this <span class="strong"><strong class="calibre10">randomX</strong></span> variable. You know how to do this because we have already created the blocks to move the ball to a random x integer. Copy and paste the <span class="strong"><strong class="calibre10">random integer from to</strong></span> blocks and add them to the <span class="strong"><strong class="calibre10">set global randomX to</strong></span> block, as shown in the following screenshot. Once we set the global randomX variable to a random integer, we will use this variable in the <span class="strong"><strong class="calibre10">Call Ball1.MoveTo</strong></span> block. The following screenshot shows how to generate a random number, store it in the <a id="id220" class="calibre1"/>variable (set <span class="strong"><strong class="calibre10">global randomX</strong></span>), and then use this <a id="id221" class="calibre1"/>variable (get <span class="strong"><strong class="calibre10">global randomX</strong></span>). This completes <span class="strong"><em class="calibre19">Task 1</em></span>.</p><div class="mediaobject"><img src="../images/00138.jpeg" alt="Updating the Reset button" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9"><span class="strong"><em class="calibre19">Tasks 2</em></span> and <span class="strong"><em class="calibre19">Task 3</em></span> are relatively easy. Since the Reset button also resets the score to equal zero, we will also set the score variable to zero. To do this, we will copy and paste the <span class="strong"><strong class="calibre10">set global score</strong></span> block from the <span class="strong"><strong class="calibre10">Ball1.EdgeReached</strong></span> event and modify the right-hand side to simply be a Math number block of the value 0. For <span class="strong"><em class="calibre19">Task 3</em></span>, we will simply copy and paste the <span class="strong"><strong class="calibre10">Score_Level_Label.Text</strong></span> block that we created previously in this chapter. This block always updates the label using the latest value of the score and the level. Since we are resetting the score to <span class="strong"><strong class="calibre10">0</strong></span> right before we execute this block, this block will correctly reset the label to show <span class="strong"><strong class="calibre10">0</strong></span> for the score and the level. (Note: blocks execute from top to bottom.)</p><div class="mediaobject"><img src="../images/00139.jpeg" alt="Updating the Reset button" class="calibre11"/></div><p class="calibre12"> </p></div>
<div class="book" title="Updating the Play button" id="TI1E1-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec25" class="calibre1"/>Updating the Play button</h1></div></div></div><p class="calibre9">When we <a id="id222" class="calibre1"/>built the Play button, the blocks resembled the following <a id="id223" class="calibre1"/>screenshot:</p><div class="mediaobject"><img src="../images/00140.jpeg" alt="Updating the Play button" class="calibre11"/></div><p class="calibre12"> </p><p class="calibre9">But now, we want to redo the Play button blocks because we no longer want the Play button to set the ball's x random location. Instead, we want the Play button to get the location of the ball from the Reset button. This way, when the Play button is pressed, the ball will just begin moving from where it already is, having just been reset to the top of the screen by the Reset button between the very first time a user plays the game, the Play button will set the random location of the ball using the blocks we already programmed. Then the first time (and ensuing times) that the Reset button is pressed and sets the location of the ball at the top of the screen, we want the ball to start moving from that location when the Play button is pressed.</p><p class="calibre9">At this point, it might be obvious that we will use an <span class="strong"><strong class="calibre10">if</strong></span>/<span class="strong"><strong class="calibre10">then</strong></span>/<span class="strong"><strong class="calibre10">else</strong></span> event block. The reasoning, however, is a little counter-intuitive. The only time the Play button determines the ball's x location is the very first time that the user plays the app. This is when the global variable, randomX, has the value of 0. Instead of saying if the global randomX is equal to 0, then do something, we are going to say if the <span class="strong"><strong class="calibre10">global randomX</strong></span> is not equal to 0, then do something. We are going to program the blocks this way because there is only one time this won't happen. Every other time the app checks this information, the global randomX will indeed be a value between 1 and the screen width (as we coded in the Reset button). If the <span class="strong"><strong class="calibre10">global randomX</strong></span> <span class="strong"><em class="calibre19">is not equal to</em></span> 0, <span class="strong"><em class="calibre19">then</em></span> move the ball to the global randomX location set by the Reset button. Otherwise (else), we will move the ball to a random integer between 1 and the screen width (this code will only occur once—the first time the user plays the Fling app).</p><div class="mediaobject"><img src="../images/00141.jpeg" alt="Updating the Play button" class="calibre11"/></div><p class="calibre12"> </p></div>
<div class="book" title="Summary" id="UGI01-9c0b907946184095a315b26c8a9b12bc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch04lvl1sec26" class="calibre1"/>Summary</h1></div></div></div><p class="calibre9">We hope you found this chapter to be challenging yet rewarding. You have learned how to take a simple app and make it more intermediate by adding more complex features and code. Each feature, scoring, fling capability, and level requires a lot of thought on how each would work and interact with each other. As you experienced, enabling scoring and leveling mechanisms required us to alter code in a variety of block locations. Similarly, we had to reexamine how our buttons functioned and reprogram the buttons. You will discover that this is a typical process in coding. Changing or adding one thing requires reevaluating how other things would work and interact. Also, this chapter demonstrates how much thought needs to go into planning an app. Earlier in this chapter we decided to update our Label from Score to Score_Level_label to reflect that it would be displaying the Score, Level and Game Over. If you don't take sufficient time to map out your app design on paper initially, then you will most likely end up having to do more re-working than you may have anticipated. Most programming efforts require coders to do some troubleshooting along the way, so don't be discouraged if you find that your app building includes many rewrites. But, you can avoid grand overhauls by really thinking through each aspect of your app's features ahead of time.</p><p class="calibre9">In the next chapter, we will begin working on an intermediate app, an event app to plan events, parties, or meetings.</p></div></body></html>