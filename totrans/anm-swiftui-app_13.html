<html><head></head><body>
<div id="_idContainer188">
<h1 class="chapter-number" id="_idParaDest-179"><a id="_idTextAnchor187"/><span class="koboSpan" id="kobo.1.1">13</span></h1>
<h1 id="_idParaDest-180"><a id="_idTextAnchor188"/><span class="koboSpan" id="kobo.2.1">Creating a Word Game (Part 2)</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the first part of our project, we put together a good portion of the interface and implemented much of the game’s functionality, so we currently have a working game that can list all the user’s entered words. </span></p>
<p><span class="koboSpan" id="kobo.4.1">Let’s continue here in the second part of the project, finishing off the settings screen so that the user can select the language of their choice, and adding more elements to the UI to help make it more polished – for example, adding </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">user feedback.</span></span></p>
<p><span class="koboSpan" id="kobo.6.1">In this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.8.1">Creating a </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">settings screen</span></span></li>
<li><span class="koboSpan" id="kobo.10.1">Styling </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">the UI</span></span></li>
<li><span class="koboSpan" id="kobo.12.1">Implementing user feedback </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">with alerts</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">Adding a Footer View to display </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">more information</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Adding haptics and </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">button sounds</span></span></li>
</ul>
<h1 id="_idParaDest-181"><a id="_idTextAnchor189"/><span class="koboSpan" id="kobo.18.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.19.1">You can download the resources and finished project from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.20.1">Chapter 13</span></strong></span><span class="koboSpan" id="kobo.21.1"> folder on </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">GitHub: </span></span><a href="https://github.com/PacktPublishing/Animating-SwiftUI-Applications"><span class="No-Break"><span class="koboSpan" id="kobo.23.1">https://github.com/PacktPublishing/Animating-SwiftUI-Applications</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.24.1">.</span></span></p>
<h1 id="_idParaDest-182"><a id="_idTextAnchor190"/><span class="koboSpan" id="kobo.25.1">Creating a settings screen</span></h1>
<p><span class="koboSpan" id="kobo.26.1">Now that we can set</span><a id="_idIndexMarker716"/><span class="koboSpan" id="kobo.27.1"> the word length, let’s put together the settings view</span><a id="_idIndexMarker717"/><span class="koboSpan" id="kobo.28.1"> so that the user can click on the info button and actually change the language from there. </span><span class="koboSpan" id="kobo.28.2">We want to create three buttons – one for each language – and a fourth button, the </span><strong class="bold"><span class="koboSpan" id="kobo.29.1">Done</span></strong><span class="koboSpan" id="kobo.30.1"> button, which users can use to complete their selection and dismiss </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">the page.</span></span></p>
<p><span class="koboSpan" id="kobo.32.1">So, inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.33.1">SettingsView</span></strong><span class="koboSpan" id="kobo.34.1">, we’ll first need a variable to access </span><strong class="source-inline"><span class="koboSpan" id="kobo.35.1">DataModel</span></strong><span class="koboSpan" id="kobo.36.1">. </span><span class="koboSpan" id="kobo.36.2">Add this observed object variable at the top of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.37.1">SettingsView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.38.1"> struct:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.39.1">
 @ObservedObject var appData = DataModel()</span></pre>
<p><span class="koboSpan" id="kobo.40.1">Next, let’s add a title for this </span><a id="_idIndexMarker718"/><span class="koboSpan" id="kobo.41.1">page called </span><strong class="source-inline"><span class="koboSpan" id="kobo.42.1">Language Settings</span></strong><span class="koboSpan" id="kobo.43.1"> in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.44.1">body</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.45.1"> property:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.46.1">
 VStack {
        Text("Language Settings")
            .font(.title).bold()
            .padding(.top, 20)
        }</span></pre>
<p><span class="koboSpan" id="kobo.47.1">Here, we simply add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.48.1">Text</span></strong><span class="koboSpan" id="kobo.49.1"> view with a little padding and bold font, all inside </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.51.1">VStack</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.53.1">Next, let’s </span><a id="_idIndexMarker719"/><span class="koboSpan" id="kobo.54.1">add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.55.1">Form</span></strong><span class="koboSpan" id="kobo.56.1"> view and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.57.1">Section</span></strong><span class="koboSpan" id="kobo.58.1"> header view inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">VStack</span></strong><span class="koboSpan" id="kobo.60.1"> to group </span><a id="_idIndexMarker720"/><span class="koboSpan" id="kobo.61.1">the buttons that we will be adding. </span><span class="koboSpan" id="kobo.61.2">Place this code just under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.62.1">padding</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.63.1"> modifier:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.64.1">
        Form {
            Section(header: Text("Select a language")) {
            }
        }</span></pre>
<p><span class="koboSpan" id="kobo.65.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.66.1">Form</span></strong><span class="koboSpan" id="kobo.67.1"> view is a container that’s commonly used to group controls together, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">Section</span></strong><span class="koboSpan" id="kobo.69.1"> header will add some header text to each grouping. </span><span class="koboSpan" id="kobo.69.2">This is what </span><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">SettingsView</span></strong><span class="koboSpan" id="kobo.71.1"> looks like </span><span class="No-Break"><span class="koboSpan" id="kobo.72.1">so far:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer176">
<span class="koboSpan" id="kobo.73.1"><img alt="Figure 13.1: Styling the SettingsView using the Form and Section header views " src="image/B18674_13_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.74.1">Figure 13.1: Styling the SettingsView using the Form and Section header views</span></p>
<p><span class="koboSpan" id="kobo.75.1">Next, we </span><a id="_idIndexMarker721"/><span class="koboSpan" id="kobo.76.1">will </span><a id="_idIndexMarker722"/><span class="koboSpan" id="kobo.77.1">add buttons to let the user select </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">a language.</span></span></p>
<h2 id="_idParaDest-183"><a id="_idTextAnchor191"/><span class="koboSpan" id="kobo.79.1">Adding the language buttons</span></h2>
<p><span class="koboSpan" id="kobo.80.1">The buttons we </span><a id="_idIndexMarker723"/><span class="koboSpan" id="kobo.81.1">will create will be styled with a wood image background and some text applied to them. </span><span class="koboSpan" id="kobo.81.2">Let’s do the button styling in a </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">separate struct.</span></span></p>
<p><span class="koboSpan" id="kobo.83.1">Add the following struct anywhere in the file, as long as it’s not inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">SettingsView</span></strong><span class="koboSpan" id="kobo.85.1"> struct (I usually create other structs just above the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">Previews</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.87.1"> struct):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.88.1">
//style the button with a background and text
struct configureButton: View {
  var buttonText = ""
  var body: some View {
      ZStack {
          Image("background").resizable()
              .frame(width: 70, height: 35)
              .cornerRadius(10)
          Text(buttonText)
              .foregroundColor(.white)
              .shadow(color: .black, radius: 1, x: 1, y: 1)
      }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.89.1">We’re calling</span><a id="_idIndexMarker724"/><span class="koboSpan" id="kobo.90.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">configureButton</span></strong><span class="koboSpan" id="kobo.92.1"> struct, and inside it, we create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">string</span></strong><span class="koboSpan" id="kobo.94.1"> variable that will hold the text for the button. </span><span class="koboSpan" id="kobo.94.2">Then, we’re using the background image in the Assets Catalog and setting its size and </span><strong class="source-inline"><span class="koboSpan" id="kobo.95.1">cornerRadius</span></strong><span class="koboSpan" id="kobo.96.1"> value. </span><span class="koboSpan" id="kobo.96.2">After that, we add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">Text</span></strong><span class="koboSpan" id="kobo.98.1"> view with white color and shadow, all done inside of </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">ZStack</span></strong><span class="koboSpan" id="kobo.100.1"> so that they overlay </span><span class="No-Break"><span class="koboSpan" id="kobo.101.1">each other.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">Let’s proceed to add the first button, which will let the user play the game in the English language. </span><span class="koboSpan" id="kobo.102.2">Add the following code inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">Section</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.104.1">header braces:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.105.1">
var body: some View {
    VStack {
        Text("Language Settings")
            .font(.title).bold()
            .padding(.top, 20)
        Form {
            Section(header: Text("Select a language")) {
 </span><strong class="bold"><span class="koboSpan" id="kobo.106.1">       VStack(alignment: .center, spacing: 10) {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.107.1">            HStack {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.108.1">                //english button</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.109.1">                Button(action: {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.110.1">                   </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.111.1">                }){</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.112.1">                    configureButton(buttonText: "English")</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.113.1">                }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.114.1">                Spacer()</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.115.1">                </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.116.1">                //english flag</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.117.1">                Image("engFlag").resizable()</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.118.1">                    .border(Color.black, width: 1.5)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.119.1">                    .frame(width: 50, height: 30)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.120.1">            }</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.121.1">        }</span></strong><span class="koboSpan" id="kobo.122.1">
      }
    }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.123.1">In this code block, we</span><a id="_idIndexMarker725"/><span class="koboSpan" id="kobo.124.1"> added </span><strong class="source-inline"><span class="koboSpan" id="kobo.125.1">VStack</span></strong><span class="koboSpan" id="kobo.126.1"> with a center alignment and a spacing of 10 points. </span><span class="koboSpan" id="kobo.126.2">This will keep each button vertically spaced from each other by </span><span class="No-Break"><span class="koboSpan" id="kobo.127.1">10 points.</span></span></p>
<p><span class="koboSpan" id="kobo.128.1">Along with creating a button to select the English language, I want to add a flag for the chosen country’s language as well. </span><span class="koboSpan" id="kobo.128.2">We do this in </span><strong class="source-inline"><span class="koboSpan" id="kobo.129.1">HStack</span></strong><span class="koboSpan" id="kobo.130.1"> – the button will be on the left, and the flag will be on the right of the screen. </span><span class="koboSpan" id="kobo.130.2">Next, I call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">configureButton</span></strong><span class="koboSpan" id="kobo.132.1"> struct in the button closure, which will set the button to the word </span><strong class="bold"><span class="koboSpan" id="kobo.133.1">English</span></strong><span class="koboSpan" id="kobo.134.1"> and give it the wood background image. </span><span class="koboSpan" id="kobo.134.2">For the flag, I added a small border around it with a 1.5-point width, so it has a nice defined edge, and since this is associated with the English button, we will use the American </span><span class="No-Break"><span class="koboSpan" id="kobo.135.1">flag image.</span></span></p>
<p><span class="koboSpan" id="kobo.136.1">Now you can try it out; press the </span><strong class="bold"><span class="koboSpan" id="kobo.137.1">English</span></strong><span class="koboSpan" id="kobo.138.1"> button and see what happens. </span><span class="koboSpan" id="kobo.138.2">Note that the whole row will flash with each button press, which is not exactly the behavior we’re going for. </span><span class="koboSpan" id="kobo.138.3">This happens because we made a custom button that does not have the same behavior as a default button. </span><span class="koboSpan" id="kobo.138.4">Instead, it would be nice just to have the button flash on its own, and not the row. </span><span class="koboSpan" id="kobo.138.5">We can achieve this by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">ButtonStyle</span></strong><span class="koboSpan" id="kobo.140.1"> protocol to control what flashes when the button is pressed. </span></p>
<p><span class="koboSpan" id="kobo.141.1">Let’s do that. </span><span class="koboSpan" id="kobo.141.2">Add </span><a id="_idIndexMarker726"/><span class="koboSpan" id="kobo.142.1">the following code underneath the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">configureButton</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.144.1"> struct:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.145.1">
struct ButtonFlash: ButtonStyle {
    func makeBody(configuration: Configuration) -&gt; some 
View {
    configuration.label
        .shadow(color: .black, radius: 2, x: 2, y: 2)
        .opacity(configuration.isPressed ? </span><span class="koboSpan" id="kobo.145.2">0.3 : 1)
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.146.1">This struct is called </span><strong class="source-inline"><span class="koboSpan" id="kobo.147.1">ButtonFlash</span></strong><span class="koboSpan" id="kobo.148.1">, and it</span><a id="_idIndexMarker727"/><span class="koboSpan" id="kobo.149.1"> uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">ButtonStyle</span></strong><span class="koboSpan" id="kobo.151.1"> protocol. </span><span class="koboSpan" id="kobo.151.2">This is a protocol that applies interactive behavior and custom appearance to buttons. </span><span class="koboSpan" id="kobo.151.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">ButtonStyle</span></strong><span class="koboSpan" id="kobo.153.1"> protocol requires that we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.154.1">makeBody</span></strong><span class="koboSpan" id="kobo.155.1"> method to configure the behavior and look for the </span><span class="No-Break"><span class="koboSpan" id="kobo.156.1">button label.</span></span></p>
<p><span class="koboSpan" id="kobo.157.1">In the code, we’re only calling two modifiers in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.158.1">makeBody</span></strong><span class="koboSpan" id="kobo.159.1"> function – </span><strong class="source-inline"><span class="koboSpan" id="kobo.160.1">shadow</span></strong><span class="koboSpan" id="kobo.161.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.162.1">opacity</span></strong><span class="koboSpan" id="kobo.163.1">. </span><span class="koboSpan" id="kobo.163.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">opacity</span></strong><span class="koboSpan" id="kobo.165.1"> modifier will check the </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">isPressed</span></strong><span class="koboSpan" id="kobo.167.1"> property to see whether it’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1">true</span></strong><span class="koboSpan" id="kobo.169.1">. </span><span class="koboSpan" id="kobo.169.2">If it is </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">true</span></strong><span class="koboSpan" id="kobo.171.1">, that means the button has been pressed, so we can change the opacity to </span><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">.3</span></strong><span class="koboSpan" id="kobo.173.1">, which will make the button fade out slightly. </span><span class="koboSpan" id="kobo.173.2">Otherwise, if the button is not pressed, the button will remain at </span><span class="No-Break"><span class="koboSpan" id="kobo.174.1">full opacity.</span></span></p>
<p><span class="koboSpan" id="kobo.175.1">All we need to do next is call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.176.1">buttonFlash</span></strong><span class="koboSpan" id="kobo.177.1"> structure on the button, </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.179.1">
      HStack {
                //english button
                Button(action: {
                   
                }){
                    configureButton(buttonText: "English")
</span><strong class="bold"><span class="koboSpan" id="kobo.180.1">                }.buttonStyle(ButtonFlash())</span></strong><span class="koboSpan" id="kobo.181.1">
                Spacer()
                 
                //english flag
                Image("engFlag").resizable()
                    .border(Color.black, width: 1.5)
                    .frame(width: 50, height: 30)
            }</span></pre>
<p><span class="koboSpan" id="kobo.182.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">buttonStyle</span></strong><span class="koboSpan" id="kobo.184.1"> protocol </span><a id="_idIndexMarker728"/><span class="koboSpan" id="kobo.185.1">automatically creates a new modifier for us, also using </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">buttonStyle</span></strong><span class="koboSpan" id="kobo.187.1">, which we can access like any other modifier by using dot syntax and then passing in the name of our new </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1">struct, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">ButtonFlash</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.190.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.191.1">Now, the button has a new look. </span><span class="koboSpan" id="kobo.191.2">It has a shadow around its text that gives it a sort of </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">3D look:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer177">
<span class="koboSpan" id="kobo.193.1"><img alt="Figure 13.2: The English language button " src="image/B18674_13_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.194.1">Figure 13.2: The English language button</span></p>
<p><span class="koboSpan" id="kobo.195.1">When you press</span><a id="_idIndexMarker729"/><span class="koboSpan" id="kobo.196.1"> the button, the modifiers will help make it look like it’s actually being pushed down. </span><span class="koboSpan" id="kobo.196.2">Also, it will just look like the button is being pushed, rather than the </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">whole row.</span></span></p>
<p><span class="koboSpan" id="kobo.198.1">Now, with the configuring and styling of the button complete, let’s add two more buttons for the other languages. </span><span class="koboSpan" id="kobo.198.2">Add this code right after the closing brace </span><span class="No-Break"><span class="koboSpan" id="kobo.199.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">HStack</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.201.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.202.1">
          Divider()
            HStack {
                //English button
                Button(action: {
                    
                }){
                    configureButton(buttonText: "Spanish")
                }.buttonStyle(ButtonFlash())
                Spacer()
                //Spanish flag
                Image("esFlag").resizable()
                    .border(Color.black, width: 1.5)
                    .frame(width: 50, height: 30)
            }
            Divider()
            
            HStack {
                //Italian button
                Button(action: {
                    
                }){
                    configureButton(buttonText: "Italian")
                }.buttonStyle(ButtonFlash())
                Spacer()
                //italian flag
                Image("itFlag").resizable()
                    .border(Color.black, width: 1.5)
                    .frame(width: 50, height: 30)
            }</span></pre>
<p><span class="koboSpan" id="kobo.203.1">The code starts with </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">Divider</span></strong><span class="koboSpan" id="kobo.205.1">, which is a very thin line that delineates the first button from the second one. </span><span class="koboSpan" id="kobo.205.2">Then, we use another </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">HStack</span></strong><span class="koboSpan" id="kobo.207.1">, similar to what we’ve just added for the </span><strong class="bold"><span class="koboSpan" id="kobo.208.1">English</span></strong><span class="koboSpan" id="kobo.209.1"> button. </span><span class="koboSpan" id="kobo.209.2">The only changes we make here are for the text of the button so that it says </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Spanish</span></strong><span class="koboSpan" id="kobo.211.1">, and the flag so that it is the flag of Spain. </span><span class="koboSpan" id="kobo.211.2">After that, we use another </span><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">Divider</span></strong><span class="koboSpan" id="kobo.213.1"> and then create our </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.214.1">Italian</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.215.1"> button.</span></span></p>
<p><span class="koboSpan" id="kobo.216.1">Now, the buttons are complete, but they don’t do anything when they’re pressed other than look nice. </span><span class="koboSpan" id="kobo.216.2">We need to make them functional and actually select the individual languages. </span><span class="koboSpan" id="kobo.216.3">This is simple – we just have to access our data model and change the language properties to the correct value, either </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">true</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.218.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">false</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.221.1">Let’s start with </span><a id="_idIndexMarker730"/><span class="koboSpan" id="kobo.222.1">the </span><strong class="bold"><span class="koboSpan" id="kobo.223.1">English</span></strong><span class="koboSpan" id="kobo.224.1"> button. </span><span class="koboSpan" id="kobo.224.2">Inside the body of the button, add the </span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.226.1">
                    appData.englishIsOn = true
                    appData.spanishIsOn = false
                    appData.italianIsOn = false</span></pre>
<p><span class="koboSpan" id="kobo.227.1">What we are doing here is accessing </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">DataModel</span></strong><span class="koboSpan" id="kobo.229.1"> and changing </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">englishIsOnProperty</span></strong><span class="koboSpan" id="kobo.231.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">true</span></strong><span class="koboSpan" id="kobo.233.1"> because the </span><strong class="bold"><span class="koboSpan" id="kobo.234.1">English</span></strong><span class="koboSpan" id="kobo.235.1"> button was just pressed. </span><span class="koboSpan" id="kobo.235.2">At the same time, we want to make sure that the Spanish and Italian properties are set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">false</span></strong><span class="koboSpan" id="kobo.237.1">. </span><span class="koboSpan" id="kobo.237.2">Now, if the </span><strong class="bold"><span class="koboSpan" id="kobo.238.1">English</span></strong><span class="koboSpan" id="kobo.239.1"> button is pressed, only that data file will be used to make a new </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">random word.</span></span></p>
<p><span class="koboSpan" id="kobo.241.1">Let’s add similar logic inside the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.242.1">Spanish</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.243.1"> button:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.244.1">
                    appData.englishIsOn = false
                    appData.spanishIsOn = true
                    appData.italianIsOn = false</span></pre>
<p><span class="koboSpan" id="kobo.245.1">For the </span><strong class="bold"><span class="koboSpan" id="kobo.246.1">Spanish</span></strong><span class="koboSpan" id="kobo.247.1"> button, we want to make sure that the other two languages’ properties are set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">false</span></strong><span class="koboSpan" id="kobo.249.1">, and that the Spanish property is set </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.251.1">true</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.253.1">Finally, let’s add the following code to the </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.254.1">Italian</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.255.1"> button:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.256.1">
                    appData.englishIsOn = false
                    appData.spanishIsOn = false
                    appData.italianIsOn = true</span></pre>
<p><span class="koboSpan" id="kobo.257.1">Now, all the buttons are complete, and they will implement the user’s </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">chosen language.</span></span></p>
<h2 id="_idParaDest-184"><a id="_idTextAnchor192"/><span class="koboSpan" id="kobo.259.1">Adding a checkmark</span></h2>
<p><span class="koboSpan" id="kobo.260.1">However, we can </span><a id="_idIndexMarker731"/><span class="koboSpan" id="kobo.261.1">improve the design a little bit here. </span><span class="koboSpan" id="kobo.261.2">Currently, when the user presses the language buttons, there’s no indication that the button selected anything. </span><span class="koboSpan" id="kobo.261.3">How about we add a checkmark next to the flag for the </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">selected language?</span></span></p>
<p><span class="koboSpan" id="kobo.263.1">Let’s add another struct that will make checkmarks for the buttons. </span><span class="koboSpan" id="kobo.263.2">Add the following struct under the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">ButtonFlash</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.265.1"> struct:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.266.1">
//add a checkmark
struct addCheckmark: View {
    var isLanguageOn: Bool = false
    var body: some View {
        VStack{
            Image(systemName: "checkmark.circle")
                .imageScale(.small).foregroundColor(.green)
                .font(Font.largeTitle.weight(.regular))
                .opacity(isLanguageOn ? </span><span class="koboSpan" id="kobo.266.2">1.0 : 0)
        }
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.267.1">I’m calling the struct </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">addCheckmark</span></strong><span class="koboSpan" id="kobo.269.1"> and then creating a Boolean to check which language has been selected. </span><span class="koboSpan" id="kobo.269.2">Inside the body of the struct, we create a small checkmark, color it green, and set the opacity of the checkmark to either fully visible or hidden, depending on whether the </span><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">isLanguageOn</span></strong><span class="koboSpan" id="kobo.271.1"> property is </span><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">true</span></strong><span class="koboSpan" id="kobo.273.1"> or not. </span></p>
<p><span class="koboSpan" id="kobo.274.1">Now, we can call this struct inside each </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">HStack</span></strong><span class="koboSpan" id="kobo.276.1">, so a checkmark will be placed toward the flag side. </span><span class="koboSpan" id="kobo.276.2">For the sake of brevity, I will add the checkmark code to the first </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">HStack</span></strong><span class="koboSpan" id="kobo.278.1">, but you need to add it to all three </span><strong class="source-inline"><span class="koboSpan" id="kobo.279.1">HStack</span></strong><span class="koboSpan" id="kobo.280.1"> instances as well, in the same location that I </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">use here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.282.1">
  VStack(alignment: .center, spacing: 10) {
            HStack {
                //english button
                Button(action: {
                    appData.englishIsOn = true
                    appData.spanishIsOn = false
                    appData.italianIsOn = false
                }){
                    configureButton(buttonText: "English")
                }.buttonStyle(ButtonFlash())
                Spacer()
                //english - checkmark appears when 
                  englishIsOn is true
               </span><strong class="bold"><span class="koboSpan" id="kobo.283.1"> addCheckmark(isLanguageOn: </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.284.1">                  appData.englishIsOn)</span></strong><span class="koboSpan" id="kobo.285.1">
                //english flag
                Image("engFlag").resizable()
                    .border(Color.black, width: 1.5)
                    .frame(width: 50, height: 30)
            }
            Divider()</span></pre>
<p><span class="koboSpan" id="kobo.286.1">The code calls </span><a id="_idIndexMarker732"/><span class="koboSpan" id="kobo.287.1">the </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">addCheckmark</span></strong><span class="koboSpan" id="kobo.289.1"> struct, and a checkmark is added to each button </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">when pressed.</span></span></p>
<p><span class="koboSpan" id="kobo.291.1">If you now run the app from </span><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">ContentView</span></strong><span class="koboSpan" id="kobo.293.1">, you will see that you can press the information button to bring up the settings screen, select a language, and then dismiss the screen by sliding it down. </span></p>
<div>
<div class="IMG---Figure" id="_idContainer178">
<span class="koboSpan" id="kobo.294.1"><img alt="Figure 13.3: The language buttons complete " src="image/B18674_13_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.295.1">Figure 13.3: The language buttons complete</span></p>
<p><span class="koboSpan" id="kobo.296.1">Also, if you stop the app </span><a id="_idIndexMarker733"/><span class="koboSpan" id="kobo.297.1">and run it again, note that your selection choice will remain, as we store these settings internally in user defaults by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.298.1">@AppStorage</span></strong><span class="koboSpan" id="kobo.299.1"> property wrapper in the </span><span class="No-Break"><span class="koboSpan" id="kobo.300.1">data model.</span></span></p>
<p><span class="koboSpan" id="kobo.301.1">We’re just about done with the settings view, but I’d like to add one more modification here – how about giving the user another way of dismissing the settings screen by adding a dismiss button, instead of just sliding down from </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">the top?</span></span></p>
<h2 id="_idParaDest-185"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.303.1">Adding a dismiss button</span></h2>
<p><span class="koboSpan" id="kobo.304.1">For the dismiss</span><a id="_idIndexMarker734"/><span class="koboSpan" id="kobo.305.1"> button, we’ll need a property that can access the app’s environment. </span><span class="koboSpan" id="kobo.305.2">The environment is the part of the app that is generated automatically for us, and it’s where we can access system-wide settings such as the color scheme or </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">layout direction.</span></span></p>
<p><span class="koboSpan" id="kobo.307.1">It’s in this environment where we need to dismiss a screen, and to do so, we first need to create a variable using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">@Environment</span></strong><span class="koboSpan" id="kobo.309.1"> wrapper. </span><span class="koboSpan" id="kobo.309.2">Add this underneath the </span><strong class="source-inline"><span class="koboSpan" id="kobo.310.1">ObservedObject</span></strong><span class="koboSpan" id="kobo.311.1"> property at the top of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">SettingsView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.313.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.314.1">
//dismiss the SettingsView
    @Environment(\.presentationMode) var presentationMode</span></pre>
<p><span class="koboSpan" id="kobo.315.1">Now, we will use this property to dismiss the view. </span><span class="koboSpan" id="kobo.315.2">Add this final </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">HStack</span></strong><span class="koboSpan" id="kobo.317.1"> just after the closing brace of the last </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">HStack</span></strong><span class="koboSpan" id="kobo.319.1"> in </span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">the file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.321.1">
          //MARK: - DISMISS BUTTON
             HStack(alignment: .center) {
                Spacer()
                
                Button(action: {
                    presentationMode.wrappedValue.dismiss()
                }){
                    HStack {
                        Image(systemName: "checkmark")
                        Text("Done")
                            .padding(.horizontal, 5)
                    }.padding(8)
                        .shadow(color: .black, radius: 1, 
                          x: 1, y: 1)
                }.foregroundColor(Color.white)
                    .background(Color.green)
                     .cornerRadius(20).shadow(color: 
                       .black, radius: 1, x: 1, y: 1)
                    .buttonStyle(ButtonFlash())
                
               Spacer()
            }</span></pre>
<p><span class="koboSpan" id="kobo.322.1">Firstly, we used two </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">Spacer</span></strong><span class="koboSpan" id="kobo.324.1"> instances at the top and bottom of the code to align the button in the center of </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">this </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">HStack</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.328.1">Inside the button, the </span><strong class="source-inline"><a id="_idIndexMarker735"/></strong><strong class="source-inline"><span class="koboSpan" id="kobo.329.1">presentationMode</span></strong><span class="koboSpan" id="kobo.330.1"> property on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.331.1">wrappedValue</span></strong><span class="koboSpan" id="kobo.332.1"> property will gain access to the setting screen data, and then a call to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.333.1">dismiss</span></strong><span class="koboSpan" id="kobo.334.1"> function will close the </span><span class="No-Break"><span class="koboSpan" id="kobo.335.1">settings screen.</span></span></p>
<p><span class="koboSpan" id="kobo.336.1">The button is styled with a checkmark, and the text says </span><strong class="bold"><span class="koboSpan" id="kobo.337.1">Done</span></strong><span class="koboSpan" id="kobo.338.1">. </span><span class="koboSpan" id="kobo.338.2">It also has a little bit of padding and shadow, a green color, and finally, it calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">ButtonFlash</span></strong><span class="koboSpan" id="kobo.340.1"> function so that it flashes like the </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">other buttons.</span></span></p>
<p><span class="koboSpan" id="kobo.342.1">Now, run the app from </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">ContentView</span></strong><span class="koboSpan" id="kobo.344.1">, and you can see that the dismiss button </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">works perfectly:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer179">
<span class="koboSpan" id="kobo.346.1"><img alt="Figure 13.4: The Done button " src="image/B18674_13_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.347.1">Figure 13.4: The Done button</span></p>
<p><span class="koboSpan" id="kobo.348.1">This </span><a id="_idIndexMarker736"/><span class="koboSpan" id="kobo.349.1">completes </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">SettingsView</span></strong><span class="koboSpan" id="kobo.351.1">. </span><span class="koboSpan" id="kobo.351.2">Let’s go back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">ContentView</span></strong><span class="koboSpan" id="kobo.353.1"> and continue styling </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">the UI.</span></span></p>
<h1 id="_idParaDest-186"><a id="_idTextAnchor194"/><span class="koboSpan" id="kobo.355.1">Styling the UI</span></h1>
<p><span class="koboSpan" id="kobo.356.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">ContentView</span></strong><span class="koboSpan" id="kobo.358.1">, let’s add some</span><a id="_idIndexMarker737"/><span class="koboSpan" id="kobo.359.1"> more features for the user; we’ll a background, some animations </span><a id="_idIndexMarker738"/><span class="koboSpan" id="kobo.360.1">to the game, as well as a word count and language display label. </span><span class="koboSpan" id="kobo.360.2">Adding some more styling will help the UI </span><span class="No-Break"><span class="koboSpan" id="kobo.361.1">come alive.</span></span></p>
<h2 id="_idParaDest-187"><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.362.1">Adding the background</span></h2>
<p><span class="koboSpan" id="kobo.363.1">We’ll start by adding a</span><a id="_idIndexMarker739"/><span class="koboSpan" id="kobo.364.1"> background to the scene. </span><span class="koboSpan" id="kobo.364.2">We currently have a title and buttons that are styled with a wooden look, so let’s continue the wooden theme and use a wood image as a background. </span><span class="koboSpan" id="kobo.364.3">Add the following code after the closing brace </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">VStack</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.368.1">
    .background(Image("background").resizable()
          .edgesIgnoringSafeArea([.all])
          .aspectRatio(contentMode: .fill)
          .frame(width: 500, height: 800))</span></pre>
<p><span class="koboSpan" id="kobo.369.1">This code sets a wooden image as the background and uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">edgesIgnoringSafeAreas</span></strong><span class="koboSpan" id="kobo.371.1"> modifier to stretch the background out to fill the screen. </span><span class="koboSpan" id="kobo.371.2">Also, the aspect ratio is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.372.1">fill</span></strong><span class="koboSpan" id="kobo.373.1">, and it sets a frame to size this </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">background image:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer180">
<span class="koboSpan" id="kobo.375.1"><img alt="Figure 13.5: A wooden background " src="image/B18674_13_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.376.1">Figure 13.5: A wooden background</span></p>
<p><span class="koboSpan" id="kobo.377.1">The background looks</span><a id="_idIndexMarker740"/><span class="koboSpan" id="kobo.378.1"> good, but it does introduce a small problem – we need to change the color and size of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">wordToPlayFrom</span></strong><span class="koboSpan" id="kobo.380.1"> property, as its black color makes it hard to see against the wood background. </span><span class="koboSpan" id="kobo.380.2">Let’s do that now. </span><span class="koboSpan" id="kobo.380.3">Just after the button code, we can style this </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">Text</span></strong><span class="koboSpan" id="kobo.382.1"> view to make it </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">look better:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.384.1">
     //MARK: - WORD TO PLAY FROM
      Text("\(wordToPlayFrom)")
          .font(.custom("HelveticaNeue-Medium", size: 38))
          .foregroundColor(.white)
          .shadow(color: .black, radius: 1, x: 1, y: 1)</span></pre>
<p><span class="koboSpan" id="kobo.385.1">The code adds a custom </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">Helvetica</span></strong><span class="koboSpan" id="kobo.387.1"> font with a size of </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">38</span></strong><span class="koboSpan" id="kobo.389.1"> points, while changing the color of the text to</span><a id="_idIndexMarker741"/><span class="koboSpan" id="kobo.390.1"> white and adding a shadow so that it stands out a little more. </span><span class="koboSpan" id="kobo.390.2">This is what it </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">looks like:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer181">
<span class="koboSpan" id="kobo.392.1"><img alt="Figure 13.6: The styled base word " src="image/B18674_13_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.393.1">Figure 13.6: The styled base word</span></p>
<p><span class="koboSpan" id="kobo.394.1">That looks much </span><span class="No-Break"><span class="koboSpan" id="kobo.395.1">clearer now!</span></span></p>
<h2 id="_idParaDest-188"><a id="_idTextAnchor196"/><span class="koboSpan" id="kobo.396.1">Adding animations to the game word</span></h2>
<p><span class="koboSpan" id="kobo.397.1">How about we also add</span><a id="_idIndexMarker742"/><span class="koboSpan" id="kobo.398.1"> some animation to the new word? </span><span class="koboSpan" id="kobo.398.2">We can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.399.1">scaleEffect</span></strong><span class="koboSpan" id="kobo.400.1"> modifier to flip the word horizontally as it comes into view. </span></p>
<p><span class="koboSpan" id="kobo.401.1">Let’s first add a property to track this animation, right after the other properties </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">ContentView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.405.1">
    @State private var horizontalFLip = false</span></pre>
<p><span class="koboSpan" id="kobo.406.1">Now, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">WORD TO PLAY FROM</span></strong><span class="koboSpan" id="kobo.408.1"> Pragma Mark, and right after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.409.1">shadow</span></strong><span class="koboSpan" id="kobo.410.1"> modifier, add the </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.412.1">
            .scaleEffect(x: horizontalFLip ? </span><span class="koboSpan" id="kobo.412.2">-1 : 1, y: 1)
            .scaleEffect(x: horizontalFLip ? </span><span class="koboSpan" id="kobo.412.3">-1 : 1, y: 1)
            .animation(.spring(dampingFraction:0.8),value: 
              horizontalFLip)</span></pre>
<p><span class="koboSpan" id="kobo.413.1">By calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">scaleEffect</span></strong><span class="koboSpan" id="kobo.415.1"> modifier twice, each call will flip the text horizontally by 180° so that it completely makes one revolution, horizontally, as it enters the screen. </span><span class="koboSpan" id="kobo.415.2">It also gets a </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">spring</span></strong><span class="koboSpan" id="kobo.417.1"> animation applied to it, which will make it grow and shrink just a little bit; you can control the growth and shrinkage by setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">dampingFraction</span></strong><span class="koboSpan" id="kobo.419.1"> parameter to a lower or higher value. </span></p>
<p><span class="koboSpan" id="kobo.420.1">As well as this, we want the animation to start when the button is pressed because that’s when a new word appears on the screen, so let’s toggle the </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">horizontalFlip</span></strong><span class="koboSpan" id="kobo.422.1"> Boolean inside </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">the button:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.424.1">
//MARK: - BUTTON
      Button(action: {
          appData.getRandomWord()
          wordToPlayFrom = appData.baseWord
</span><strong class="bold"><span class="koboSpan" id="kobo.425.1">          horizontalFLip.toggle()</span></strong><span class="koboSpan" id="kobo.426.1">
      }){</span></pre>
<p><span class="koboSpan" id="kobo.427.1">Before we try it out, let’s go a bit further with the new incoming word – we’ll add pointing hands on each side of the new word and add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">spring</span></strong><span class="koboSpan" id="kobo.429.1"> animation as well. </span><span class="koboSpan" id="kobo.429.2">Let’s put the </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">Text</span></strong><span class="koboSpan" id="kobo.431.1"> view that is displaying </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">wordToPlayFrom</span></strong><span class="koboSpan" id="kobo.433.1"> into </span><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">HStack</span></strong><span class="koboSpan" id="kobo.435.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">like this:</span></span></p>
<pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.437.1">HStack {</span></strong><span class="koboSpan" id="kobo.438.1">
      Text(wordToPlayFrom)
          .font(.custom("HelveticaNeue-Medium", size: 38))
          .foregroundColor(.white)
          .shadow(color: .black, radius: 1, x: 1, y: 1)
          .scaleEffect(x: horizontalFLip ? </span><span class="koboSpan" id="kobo.438.2">-1 : 1, y: 1)
          .scaleEffect(x: horizontalFLip ? </span><span class="koboSpan" id="kobo.438.3">-1 : 1, y: 1)
          .animation(.spring(dampingFraction:0.8),value: 
            horizontalFLip)
</span><strong class="bold"><span class="koboSpan" id="kobo.439.1">  }</span></strong></pre>
<p><span class="koboSpan" id="kobo.440.1">Next, let’s add some </span><a id="_idIndexMarker743"/><span class="koboSpan" id="kobo.441.1">pointing hand images that will point to the word to play from. </span><span class="koboSpan" id="kobo.441.2">The first image is the system image called </span><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">hand.point.right</span></strong><span class="koboSpan" id="kobo.443.1">, and it </span><a id="_idIndexMarker744"/><span class="koboSpan" id="kobo.444.1">goes inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.445.1">HStack</span></strong><span class="koboSpan" id="kobo.446.1"> just above the </span><strong class="source-inline"><span class="koboSpan" id="kobo.447.1">Text</span></strong><span class="koboSpan" id="kobo.448.1"> view code, and the next image is called the </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">hand.point.left</span></strong><span class="koboSpan" id="kobo.450.1"> image, which gets placed below the </span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">Text</span></strong><span class="koboSpan" id="kobo.452.1"> view code, again, all inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">HStack</span></strong><span class="koboSpan" id="kobo.454.1"> view we </span><span class="No-Break"><span class="koboSpan" id="kobo.455.1">just added:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.456.1">
//MARK: - WORD TO PLAY FROM
 HStack () {
</span><strong class="bold"><span class="koboSpan" id="kobo.457.1">      //right hand image</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.458.1">      Image(systemName: "hand.point.right")</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.459.1">          .foregroundColor(.black)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.460.1">          .font(.system(size: 30))</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.461.1">          .animation(.spring(dampingFraction:0.2),value: </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.462.1">            horizontalFLip)</span></strong><span class="koboSpan" id="kobo.463.1">
      
      Text(wordToPlayFrom)
          .font(.custom("HelveticaNeue-Medium", size: 38))
          .foregroundColor(.white)
          .shadow(color: .black, radius: 1, x: 1, y: 1)
          .scaleEffect(x: horizontalFLip ? </span><span class="koboSpan" id="kobo.463.2">-1 : 1, y: 1)
          .scaleEffect(x: horizontalFLip ? </span><span class="koboSpan" id="kobo.463.3">-1 : 1, y: 1)
          .animation(.spring(dampingFraction:0.8),value: 
            horizontalFLip)
      
  </span><strong class="bold"><span class="koboSpan" id="kobo.464.1">    //left hand image</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.465.1">      Image(systemName:"hand.point.left")</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.466.1">         .foregroundColor(.black)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.467.1">         .font(.system(size: 30))</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.468.1">         .padding(-4)</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.469.1">         .animation(.spring(dampingFraction:0.2),value: </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.470.1">           horizontalFLip)</span></strong><span class="koboSpan" id="kobo.471.1">
  }</span></pre>
<p><span class="koboSpan" id="kobo.472.1">The code starts off with </span><a id="_idIndexMarker745"/><span class="koboSpan" id="kobo.473.1">a system image of a hand that’s pointing right, setting the foreground color to black and setting the image size by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">font</span></strong><span class="koboSpan" id="kobo.475.1"> modifier. </span><span class="koboSpan" id="kobo.475.2">Then, we add the spring animation to it, which has a damping fraction of </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">.4</span></strong><span class="koboSpan" id="kobo.477.1"> (again, the larger the value, the less spring animation there </span><span class="No-Break"><span class="koboSpan" id="kobo.478.1">will be).</span></span></p>
<p><span class="koboSpan" id="kobo.479.1">Then, we go to the left-hand image and do the same thing, setting its size and color, as well as a little padding to position it a bit more to the left. </span><span class="koboSpan" id="kobo.479.2">Also, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">value</span></strong><span class="koboSpan" id="kobo.481.1"> parameter in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">spring</span></strong><span class="koboSpan" id="kobo.483.1"> animation will be the </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">horizontalFlip</span></strong><span class="koboSpan" id="kobo.485.1"> Boolean property and toggled inside the button’s body, which is how the animation </span><span class="No-Break"><span class="koboSpan" id="kobo.486.1">gets triggered.</span></span></p>
<p><span class="koboSpan" id="kobo.487.1">Now, give the app another go – you’ll see that every time you hit the button to add a new word, not only does the word flip horizontally, and stretch and shrink, but also the two hands bounce in and out as the word enters </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">the </span></span><span class="No-Break"><a id="_idIndexMarker746"/></span><span class="No-Break"><span class="koboSpan" id="kobo.489.1">screen:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer182">
<span class="koboSpan" id="kobo.490.1"><img alt="Figure 13.7: Animating the base word, plus the hand images " src="image/B18674_13_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.491.1">Figure 13.7: Animating the base word, plus the hand images</span></p>
<p><span class="koboSpan" id="kobo.492.1">Before we continue with more enhancements, let’s fix one issue we have, which is that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.493.1">letterCount</span></strong><span class="koboSpan" id="kobo.494.1"> string only appears on the UI when the button is pressed. </span><span class="koboSpan" id="kobo.494.2">It's much better to always have it on the UI and just update it when the button is pressed. </span><span class="koboSpan" id="kobo.494.3">We can fix that with one line of code, a call to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.495.1">getRandomWord</span></strong><span class="koboSpan" id="kobo.496.1"> function in </span><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">ContentView</span></strong><span class="koboSpan" id="kobo.498.1">. </span><span class="koboSpan" id="kobo.498.2">Let’s add that call down at the bottom of </span><strong class="source-inline"><span class="koboSpan" id="kobo.499.1">VStack</span></strong><span class="koboSpan" id="kobo.500.1">, just after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.501.1">frame</span></strong><span class="koboSpan" id="kobo.502.1"> modifier of </span><span class="No-Break"><span class="koboSpan" id="kobo.503.1">the background:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.504.1">
.onAppear (perform: appData.getRandomWord)</span></pre>
<p><span class="koboSpan" id="kobo.505.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">onAppear</span></strong><span class="koboSpan" id="kobo.507.1"> modifier will call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">getRandomWord</span></strong><span class="koboSpan" id="kobo.509.1"> function and populate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">letterCount</span></strong><span class="koboSpan" id="kobo.511.1"> string so that it always stays on </span><span class="No-Break"><span class="koboSpan" id="kobo.512.1">the screen:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer183">
<span class="koboSpan" id="kobo.513.1"><img alt="Figure 13.8: The word length and flag string displayed " src="image/B18674_13_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.514.1">Figure 13.8: The word length and flag string displayed</span></p>
<p><span class="koboSpan" id="kobo.515.1">Next, we need</span><a id="_idIndexMarker747"/><span class="koboSpan" id="kobo.516.1"> to implement the alert system to give the user feedback about any words that don’t get accepted into </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">the list.</span></span></p>
<h1 id="_idParaDest-189"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.518.1">Implementing user feedback with alerts</span></h1>
<p><span class="koboSpan" id="kobo.519.1">The user can get</span><a id="_idIndexMarker748"/><span class="koboSpan" id="kobo.520.1"> a random word and try and make some words out of that word in the language of their choice, but there are certain checks that we’ve put in place that will stop those words from entering the list. </span><span class="koboSpan" id="kobo.520.2">Now, we need to let the user know why a certain word is not acceptable, using </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">SwiftUI alerts.</span></span></p>
<p><span class="koboSpan" id="kobo.522.1">Let’s go back into </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">DataModel</span></strong><span class="koboSpan" id="kobo.524.1"> and fill out the </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.526.1"> function stub with the appropriate code to get a message alert. </span><span class="koboSpan" id="kobo.526.2">Add the following code right into </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">the method:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.528.1">
//error message
    func displayErrorMessage(messageTitle: String, 
      description: String) {
        errorTitle = messageTitle
        errorDescription = description
        errorMessageIsShown = true
    }</span></pre>
<p><span class="koboSpan" id="kobo.529.1">The code takes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">messageTitle</span></strong><span class="koboSpan" id="kobo.531.1"> string and assigns it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.532.1">errorTitle</span></strong><span class="koboSpan" id="kobo.533.1"> property. </span><span class="koboSpan" id="kobo.533.2">Then, it takes the description string and assigns it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">errorDescription</span></strong><span class="koboSpan" id="kobo.535.1"> property. </span><span class="koboSpan" id="kobo.535.2">After that, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">errorMessagesIsShown</span></strong><span class="koboSpan" id="kobo.537.1"> Boolean is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">true</span></strong><span class="koboSpan" id="kobo.539.1"> because </span><a id="_idIndexMarker749"/><span class="koboSpan" id="kobo.540.1">at this point the function has been triggered, and we’ll need to have this property set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.541.1">true</span></strong><span class="koboSpan" id="kobo.542.1"> in order to initiate the </span><span class="No-Break"><span class="koboSpan" id="kobo.543.1">alert message.</span></span></p>
<p><span class="koboSpan" id="kobo.544.1">Next, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.546.1"> function needs to be called in the right place. </span><span class="koboSpan" id="kobo.546.2">If you remember from when we set up the </span><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">addWordToListist</span></strong><span class="koboSpan" id="kobo.548.1"> method earlier and added the method stubs in the data model, we also made a call to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.550.1"> method. </span><span class="koboSpan" id="kobo.550.2">Here is a look at the complete </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">addWordToList</span></strong><span class="koboSpan" id="kobo.552.1"> method that has a call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.554.1">, so there is nothing for us to </span><span class="No-Break"><span class="koboSpan" id="kobo.555.1">do there:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.556.1">
    func addWordToList() {
    let usersWord = 
      userEnteredWord.lowercased().trimmingCharacters(in: 
      .whitespacesAndNewlines)
    
    //guard against single letter words – they are too easy
    guard usersWord.count &gt; 1 else {
        return
    }
    //is the word a duplicate
    guard isWordDuplicate(word: usersWord) else {
        </span><strong class="bold"><span class="koboSpan" id="kobo.557.1">displayErrorMessage(messageTitle: "You already used </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.558.1">          this word", description: "Keep looking!")</span></strong><span class="koboSpan" id="kobo.559.1">
        return
    }
    //is the word possible given your base word letters to 
      work with?
</span><span class="koboSpan" id="kobo.559.2">    guard isWordFoundInBaseWord(userGuessWord: usersWord)
      else {
</span><strong class="bold"><span class="koboSpan" id="kobo.560.1">        displayErrorMessage(messageTitle: "This word is not </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.561.1">          possible", description: "Create only words from </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.562.1">          the letters in the given word")</span></strong><span class="koboSpan" id="kobo.563.1">
        return
    }
    //is the word a real word in the dictionary? </span><span class="koboSpan" id="kobo.563.2">- only 
      real words are allowed
    guard isWordInDictionary(word: usersWord) else {
        </span><strong class="bold"><span class="koboSpan" id="kobo.564.1">displayErrorMessage(messageTitle: "This is not a </span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.565.1">          valid word", description: "Use only real words")</span></strong><span class="koboSpan" id="kobo.566.1">
        return
    }
    userEnteredWordsArray.insert(usersWord, at: 0)
    userEnteredWord = ""
  }</span></pre>
<p><span class="koboSpan" id="kobo.567.1">Here’s a quick refresher on how the </span><strong class="source-inline"><span class="koboSpan" id="kobo.568.1">addNewWord</span></strong><span class="koboSpan" id="kobo.569.1"> function works. </span></p>
<p><span class="koboSpan" id="kobo.570.1">First, the word is made lowercase – that’s because all the word files are lowercase, and it’s how we can compare words. </span><span class="koboSpan" id="kobo.570.2">Then, we trim out any whitespaces that they might have typed into the text field. </span></p>
<p><span class="koboSpan" id="kobo.571.1">The next line of code guards against single-letter words – again, there is only a handful of those in any given language, and there’s no point in including them in the </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">game here.</span></span></p>
<p><span class="koboSpan" id="kobo.573.1">Then, we start to check the user’s word to see whether it’s a duplicate word. </span><span class="koboSpan" id="kobo.573.2">If it is, that means they added that word to the list already, so the </span><strong class="source-inline"><span class="koboSpan" id="kobo.574.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.575.1"> function will display an error message of </span><strong class="bold"><span class="koboSpan" id="kobo.576.1">You already used this word</span></strong><span class="koboSpan" id="kobo.577.1">, along with an instruction that says </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.578.1">Keep looking</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.580.1">The next </span><strong class="source-inline"><span class="koboSpan" id="kobo.581.1">guard</span></strong><span class="koboSpan" id="kobo.582.1"> statement checks whether the word is even possible to make, given the letters the user is working with. </span><span class="koboSpan" id="kobo.582.2">If it’s not possible, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.583.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.584.1"> function will be</span><a id="_idIndexMarker750"/><span class="koboSpan" id="kobo.585.1"> called and display the </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">This word is not possible</span></strong><span class="koboSpan" id="kobo.587.1"> error, along with an instruction that says </span><strong class="bold"><span class="koboSpan" id="kobo.588.1">Create only words from the letters in the </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.589.1">given word</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.591.1">Next, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.592.1">displayErrorMessage</span></strong><span class="koboSpan" id="kobo.593.1"> function will be called if the word is not a real word in the chosen language, showing the user an alert that says </span><strong class="bold"><span class="koboSpan" id="kobo.594.1">This is not a valid word</span></strong><span class="koboSpan" id="kobo.595.1">, along with an instruction that says </span><strong class="bold"><span class="koboSpan" id="kobo.596.1">Use only </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.597.1">real words</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.599.1">Finally, after the user’s word has been processed and gone through all those checks, it’s entered into </span><strong class="source-inline"><span class="koboSpan" id="kobo.600.1">userEnteredWordsArray</span></strong><span class="koboSpan" id="kobo.601.1">. </span><span class="koboSpan" id="kobo.601.2">Remember, an array’s elements are indexed, starting from 0, which is the beginning of the array. </span><span class="koboSpan" id="kobo.601.3">The index is how we access different elements in an array, so in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.602.1">insert(at)</span></strong><span class="koboSpan" id="kobo.603.1"> method, we pass in the “</span><strong class="source-inline"><span class="koboSpan" id="kobo.604.1">0</span></strong><span class="koboSpan" id="kobo.605.1">” value, which means inserting the user’s word into the list at the beginning of the list, the top. </span><span class="koboSpan" id="kobo.605.2">This way, as the user enters words, they will always be placed at the top of the list so they are visible on the screen, and if there are many words, the user can scroll up through the list to </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">see them.</span></span></p>
<p><span class="koboSpan" id="kobo.607.1">The final line of code sets the user-entered word back to an empty string, ready to start the </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">process again.</span></span></p>
<p><span class="koboSpan" id="kobo.609.1">Now that we have the error alerts all set up, we just need to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.610.1">alert</span></strong><span class="koboSpan" id="kobo.611.1"> modifier to make it functional. </span><span class="koboSpan" id="kobo.611.2">We can add it right after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">onAppear</span></strong><span class="koboSpan" id="kobo.613.1"> modifier in </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">ContentView</span></strong><span class="koboSpan" id="kobo.615.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.616.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.617.1">
     //add the alert popup
    .alert(isPresented: $appData.errorMessageIsShown) {
        Alert(title: Text(appData.errorTitle), message: 
          Text(appData.errorDescription), dismissButton: 
          .default(Text("OK")))
    }</span></pre>
<p><span class="koboSpan" id="kobo.618.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.619.1">alert</span></strong><span class="koboSpan" id="kobo.620.1"> modifier has a parameter called </span><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">isPresented</span></strong><span class="koboSpan" id="kobo.622.1">, and this will present an alert message when the </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">errorMessageIsShown</span></strong><span class="koboSpan" id="kobo.624.1"> Boolean variable becomes </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">true</span></strong><span class="koboSpan" id="kobo.626.1">. </span><span class="koboSpan" id="kobo.626.2">When it does become </span><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">true</span></strong><span class="koboSpan" id="kobo.628.1">, the code in the alert body – this being the error title and description – </span><span class="No-Break"><span class="koboSpan" id="kobo.629.1">gets executed.</span></span></p>
<p><span class="koboSpan" id="kobo.630.1">Now, try it out. </span><span class="koboSpan" id="kobo.630.2">Enter </span><a id="_idIndexMarker751"/><span class="koboSpan" id="kobo.631.1">a word that is already in the list, and you should see a popup </span><span class="No-Break"><span class="koboSpan" id="kobo.632.1">like this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer184">
<span class="koboSpan" id="kobo.633.1"><img alt="Figure 13.9: An alert message for duplicate words " src="image/B18674_13_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.634.1">Figure 13.9: An alert message for duplicate words</span></p>
<p><span class="koboSpan" id="kobo.635.1">If you enter a word that is not possible given the letters you have, you will see </span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">this alert:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer185">
<span class="koboSpan" id="kobo.637.1"><img alt="Figure 13.10: An alert message for words that are not possible using the given word " src="image/B18674_13_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.638.1">Figure 13.10: An alert message for words that are not possible using the given word</span></p>
<p><span class="koboSpan" id="kobo.639.1">And finally, if you enter </span><a id="_idIndexMarker752"/><span class="koboSpan" id="kobo.640.1">a word that does not exist in the chosen language’s dictionary, you will see </span><span class="No-Break"><span class="koboSpan" id="kobo.641.1">this alert:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer186">
<span class="koboSpan" id="kobo.642.1"><img alt="Figure 13.11: An alert message for words that are not real " src="image/B18674_13_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.643.1">Figure 13.11: An alert message for words that are not real</span></p>
<p><span class="koboSpan" id="kobo.644.1">Now, we have three </span><a id="_idIndexMarker753"/><span class="koboSpan" id="kobo.645.1">different checks on the user’s words, just to give them feedback and let them know where they went wrong. </span><span class="koboSpan" id="kobo.645.2">The user can then press the </span><strong class="bold"><span class="koboSpan" id="kobo.646.1">OK</span></strong><span class="koboSpan" id="kobo.647.1"> button to dismiss the alert and </span><span class="No-Break"><span class="koboSpan" id="kobo.648.1">continue playing.</span></span></p>
<p><span class="koboSpan" id="kobo.649.1">Let’s now continue with the UI and add a footer view to display some more information about the user’s progress in </span><span class="No-Break"><span class="koboSpan" id="kobo.650.1">the game.</span></span></p>
<h1 id="_idParaDest-190"><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.651.1">Adding a Footer View to display more information</span></h1>
<p><span class="koboSpan" id="kobo.652.1">The Footer view that </span><a id="_idIndexMarker754"/><span class="koboSpan" id="kobo.653.1">we will add will </span><a id="_idIndexMarker755"/><span class="koboSpan" id="kobo.654.1">contain two pieces of information – first, how many words the user has found so far, and second, what their letter average is for each found word. </span></p>
<p><span class="koboSpan" id="kobo.655.1">To do this, create a</span><a id="_idIndexMarker756"/><span class="koboSpan" id="kobo.656.1"> new </span><strong class="bold"><span class="koboSpan" id="kobo.657.1">SwiftUI View </span></strong><span class="koboSpan" id="kobo.658.1">file and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">FooterView</span></strong><span class="koboSpan" id="kobo.660.1">. </span><span class="koboSpan" id="kobo.660.2">This will contain the </span><strong class="source-inline"><span class="koboSpan" id="kobo.661.1">Text</span></strong><span class="koboSpan" id="kobo.662.1"> views we need to display </span><span class="No-Break"><span class="koboSpan" id="kobo.663.1">that information.</span></span></p>
<p><span class="koboSpan" id="kobo.664.1">Now let’s get to work and add some code. </span><span class="koboSpan" id="kobo.664.2">Add the following properties inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">FooterView</span></strong><span class="koboSpan" id="kobo.666.1"> struct: </span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.667.1">
struct FooterView: View {
    //MARK: - PROPERTIES
    @ObservedObject var appData = DataModel()
    @Binding var userEnteredWordsArray: [String]
    
    var foundWords: Double {
        let wordCount = userEnteredWordsArray.count
        //if theres no words in the array, return 0
        if wordCount == 0 {
            return 0
        }
        var letterAverage = 0
        //get a total of all the letters in each word
        for letterCount in userEnteredWordsArray {
            letterAverage += letterCount.count
        }
        return Double(letterAverage / wordCount)
    }
•••••••</span></pre>
<p><span class="koboSpan" id="kobo.668.1">As you recall, when we add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">Binding</span></strong><span class="koboSpan" id="kobo.670.1"> variable to a struct, we need to include it in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.671.1">Previews</span></strong><span class="koboSpan" id="kobo.672.1"> struct; otherwise, we will get an Xcode error. </span><span class="koboSpan" id="kobo.672.2">Modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.673.1">Previews</span></strong><span class="koboSpan" id="kobo.674.1"> struct as such to keep </span><span class="No-Break"><span class="koboSpan" id="kobo.675.1">Xcode happy:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.676.1">
struct FooterView_Previews: PreviewProvider {
    static var previews: some View {
      FooterView( userEnteredWordsArray: .constant(["0"]))
          .previewLayout(.fixed(width: 350, height: 125))
  }</span></pre>
<p><span class="koboSpan" id="kobo.677.1">Okay, we are now error-free, so let’s go back to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.678.1">FooterView</span></strong><span class="koboSpan" id="kobo.679.1"> struct and review the code we just </span><span class="No-Break"><span class="koboSpan" id="kobo.680.1">added there.</span></span></p>
<p><span class="koboSpan" id="kobo.681.1">There’s a </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">userEnteredWordsArray</span></strong><span class="koboSpan" id="kobo.683.1"> property that we will use to bind to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.684.1">ContentView</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.685.1">s</span><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.686.1">truct later.</span></span></p>
<p><span class="koboSpan" id="kobo.687.1">Next, we have a </span><a id="_idIndexMarker757"/><span class="koboSpan" id="kobo.688.1">computed </span><a id="_idIndexMarker758"/><span class="koboSpan" id="kobo.689.1">property called </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1">foundWords</span></strong><span class="koboSpan" id="kobo.691.1">. </span><span class="koboSpan" id="kobo.691.2">A computed</span><a id="_idIndexMarker759"/><span class="koboSpan" id="kobo.692.1"> property is a property that has a body and runs code in its body when the property is accessed. </span><span class="koboSpan" id="kobo.692.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.693.1">foundWords</span></strong><span class="koboSpan" id="kobo.694.1"> property displays how many words the user has found so far by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">count</span></strong><span class="koboSpan" id="kobo.696.1"> property, which will return the number of elements in </span><strong class="source-inline"><span class="koboSpan" id="kobo.697.1">userEnteredWordsArray</span></strong><span class="koboSpan" id="kobo.698.1">. </span><span class="koboSpan" id="kobo.698.2">If there are no words in the array, it will </span><span class="No-Break"><span class="koboSpan" id="kobo.699.1">return </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.701.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.702.1">Next, inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">foundWords</span></strong><span class="koboSpan" id="kobo.704.1"> computed property, we create a variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.705.1">totalLetters</span></strong><span class="koboSpan" id="kobo.706.1"> and use it to hold all the letters of the user’s word. </span><span class="koboSpan" id="kobo.706.2">To get all those letters, we use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.707.1">for in</span></strong><span class="koboSpan" id="kobo.708.1"> loop to iterate through the array, storing the amount of letters from each word the user enters on the list back in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.709.1">totalLetters</span></strong><span class="koboSpan" id="kobo.710.1"> va</span><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.711.1">riable. </span></p>
<p><span class="koboSpan" id="kobo.712.1">Finally, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.713.1">foundWords</span></strong><span class="koboSpan" id="kobo.714.1"> computed property returns all the letters from every word divided by the number of words entered, which returns the average amount of letters </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">per word.</span></span></p>
<p><span class="koboSpan" id="kobo.716.1">Now, let’s go into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">body</span></strong><span class="koboSpan" id="kobo.718.1"> property and start designing two text views that will display this information. </span><span class="koboSpan" id="kobo.718.2">Add the </span><span class="No-Break"><span class="koboSpan" id="kobo.719.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.720.1">
VStack {
    HStack(spacing: 80) {
        ZStack {
            Image("background").resizable()
            .frame(width: 80, height: 50)
            .clipShape(Capsule())
            .shadow(color: .black, radius: 1, x: 1, y: 1)
            .shadow(color: .black, radius: 1, x: -1, y: -1)
            
            Text("\(userEnteredWordsArray.count)")
            .frame(width: 50, height: 20)
            .font(.system(size: 25))
            .padding(20)
            .foregroundColor(.white)
            .font(.system(size: 80))
               
            
            Image("foundWords").resizable()
            .aspectRatio(contentMode: .fill).frame(width: 
              100, height: 70)
            .shadow(color: .black, radius: 1, x: 1, y: 1)
            .offset(y: 40)
            .padding(.horizontal, -10)
            .padding(.bottom, -10)
         }
     }
         }</span></pre>
<p><span class="koboSpan" id="kobo.721.1">The first thing we do is </span><a id="_idIndexMarker760"/><span class="koboSpan" id="kobo.722.1">style the</span><a id="_idIndexMarker761"/><span class="koboSpan" id="kobo.723.1"> background that the text will be placed over. </span><span class="koboSpan" id="kobo.723.2">We use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.724.1">background</span></strong><span class="koboSpan" id="kobo.725.1"> image from Assets catalog and set its size to a width of </span><strong class="source-inline"><span class="koboSpan" id="kobo.726.1">80</span></strong><span class="koboSpan" id="kobo.727.1"> points and a height of </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">50</span></strong><span class="koboSpan" id="kobo.729.1"> points. </span><span class="koboSpan" id="kobo.729.2">Then, we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.730.1">clipShape</span></strong><span class="koboSpan" id="kobo.731.1"> modifier to turn the rectangle into a capsule and add some shadow to the image. </span><span class="koboSpan" id="kobo.731.2">Note that we’re using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">shadow</span></strong><span class="koboSpan" id="kobo.733.1"> modifier twice here – this gives the image a more defined border than just a single </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">call would.</span></span></p>
<p><span class="koboSpan" id="kobo.735.1">Next, the text gets added, and by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.736.1">count</span></strong><span class="koboSpan" id="kobo.737.1"> property on </span><strong class="source-inline"><span class="koboSpan" id="kobo.738.1">textField</span></strong><span class="koboSpan" id="kobo.739.1">, we can show how many words the user has found so far. </span><span class="koboSpan" id="kobo.739.2">Then, we set the font size and add some padding and a foreground color </span><span class="No-Break"><span class="koboSpan" id="kobo.740.1">of white.</span></span></p>
<p><span class="koboSpan" id="kobo.741.1">We’re putting the images all inside three stacks: </span></p>
<ul>
<li><span class="koboSpan" id="kobo.742.1">First, inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">VStack</span></strong><span class="koboSpan" id="kobo.744.1"> to hold all of the views vertically on the screen and line them up accordingly </span></li>
<li><span class="koboSpan" id="kobo.745.1">Then, inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">HStack</span></strong><span class="koboSpan" id="kobo.747.1">, which will put the two </span><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">textField</span></strong><span class="koboSpan" id="kobo.749.1"> instances we need side by </span><span class="No-Break"><span class="koboSpan" id="kobo.750.1">side horizontally</span></span></li>
<li><span class="koboSpan" id="kobo.751.1">Finally, </span><strong class="source-inline"><span class="koboSpan" id="kobo.752.1">ZStack</span></strong><span class="koboSpan" id="kobo.753.1"> so that we can position the text directly over the </span><span class="No-Break"><span class="koboSpan" id="kobo.754.1">background image</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.755.1">Finally, we add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.756.1">foundWords</span></strong><span class="koboSpan" id="kobo.757.1"> image, size it up, and give it a little bit of shadow and some padding so that we can offset it downward from </span><span class="No-Break"><span class="koboSpan" id="kobo.758.1">the text.</span></span></p>
<p><span class="koboSpan" id="kobo.759.1">Now, we can add the</span><a id="_idIndexMarker762"/><span class="koboSpan" id="kobo.760.1"> other text, which will display the average amount of letters per word. </span><span class="koboSpan" id="kobo.760.2">Just after the closing bracket of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.761.1">ZStack</span></strong><span class="koboSpan" id="kobo.762.1">, add the </span><span class="No-Break"><span class="koboSpan" id="kobo.763.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.764.1">
ZStack {
        Image("background").resizable()
            .frame(width: 80, height: 50)
            .clipShape(Capsule())
            .shadow(color: .black, radius: 1, x: 1, y: 1)
            .shadow(color: .black, radius: 1, x: -1, y: -1)
            
        Text("\(foundWords, specifier: "%.0f")")
            .frame(width: 50, height: 20)
            .font(.system(size: 25))
            .padding(20)
            .foregroundColor(Color.white)
            .font(.system(size: 80))
            
        Image("letterAverage").resizable()
            .aspectRatio(contentMode: .fill)
            .shadow(color: .black, radius: 1, x: 1, y: 1)
            .frame(width: 100, height: 70)
            .offset(y: 40)
            .padding(.bottom, -10)
    }</span></pre>
<p><span class="koboSpan" id="kobo.765.1">This code replicates the previous </span><strong class="source-inline"><span class="koboSpan" id="kobo.766.1">Text</span></strong><span class="koboSpan" id="kobo.767.1"> view we added, only this time we’re displaying the </span><strong class="source-inline"><span class="koboSpan" id="kobo.768.1">foundWords</span></strong><span class="koboSpan" id="kobo.769.1"> computed </span><a id="_idIndexMarker763"/><span class="koboSpan" id="kobo.770.1">property, which</span><a id="_idIndexMarker764"/><span class="koboSpan" id="kobo.771.1"> will show the letter average from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1">foundWords</span></strong><span class="koboSpan" id="kobo.773.1"> array, and using the format specifier, it will format the text view to two </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1">decimal places.</span></span></p>
<p><span class="koboSpan" id="kobo.775.1">Now, we can call </span><strong class="source-inline"><span class="koboSpan" id="kobo.776.1">FooterView</span></strong><span class="koboSpan" id="kobo.777.1"> inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.778.1">ContentView</span></strong><span class="koboSpan" id="kobo.779.1">. </span><span class="koboSpan" id="kobo.779.2">Let’s go back there and add a call to </span><strong class="source-inline"><span class="koboSpan" id="kobo.780.1">FooterView</span></strong><span class="koboSpan" id="kobo.781.1"> at the end of the code in the </span><span class="No-Break"><span class="koboSpan" id="kobo.782.1">main </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.783.1">VStack</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.784.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.785.1">
//MARK: - FOOTER VIEW
    FooterView(userEnteredWordsArray: 
      $appData.userEnteredWordsArray)</span></pre>
<p><span class="koboSpan" id="kobo.786.1">Now, go ahead and try the app. </span><span class="koboSpan" id="kobo.786.2">Every word that you enter into the list will be counted on the bottom-left side of the screen, and the average amount of letters per word that you are getting will be displayed on the </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1">bottom-right side:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer187">
<span class="koboSpan" id="kobo.788.1"><img alt="Figure 13.12: Displaying the found words and letter average " src="image/B18674_13_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.789.1">Figure 13.12: Displaying the found words and letter average</span></p>
<p><span class="koboSpan" id="kobo.790.1">From the figure, we can see that the given random word is </span><strong class="bold"><span class="koboSpan" id="kobo.791.1">cambering</span></strong><span class="koboSpan" id="kobo.792.1">, and I found 4 related words so far, so the footer view displays those </span><strong class="bold"><span class="koboSpan" id="kobo.793.1">4</span></strong><span class="koboSpan" id="kobo.794.1"> found words. </span><span class="koboSpan" id="kobo.794.2">The letter average for</span><a id="_idIndexMarker765"/><span class="koboSpan" id="kobo.795.1"> those</span><a id="_idIndexMarker766"/><span class="koboSpan" id="kobo.796.1"> words is also displayed, </span><strong class="bold"><span class="koboSpan" id="kobo.797.1">4</span></strong><span class="koboSpan" id="kobo.798.1"> letters </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">per word.</span></span></p>
<p><span class="koboSpan" id="kobo.800.1">Before we move on to more feedback, let’s just do one more check in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.801.1">addWordToList</span></strong><span class="koboSpan" id="kobo.802.1"> function. </span><span class="koboSpan" id="kobo.802.2">I want to be able to stop the user from entering single-letter words, and that’s very easy to do. </span><span class="koboSpan" id="kobo.802.3">There are many single-letter words in any given language, so it’s not really a big deal, but we might as well prevent them anyway. </span><span class="koboSpan" id="kobo.802.4">Code inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">addWordToList</span></strong><span class="koboSpan" id="kobo.804.1"> function just after </span><strong class="source-inline"><span class="koboSpan" id="kobo.805.1">userWord</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.806.1">is declared:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.807.1">
//guard against one letter words - they are too easy
        guard usersWord.count &gt; 1 else {
            return
        }</span></pre>
<p><span class="koboSpan" id="kobo.808.1">We’re checking the count of </span><strong class="source-inline"><span class="koboSpan" id="kobo.809.1">usersWord</span></strong><span class="koboSpan" id="kobo.810.1"> to see whether it’s greater than 1; if not, we won’t allow single-letter words in the list and the function will just return right here. </span><span class="koboSpan" id="kobo.810.2">Give it a try and you’ll </span><a id="_idIndexMarker767"/><span class="koboSpan" id="kobo.811.1">see </span><a id="_idIndexMarker768"/><span class="koboSpan" id="kobo.812.1">that you cannot enter </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">single-letter words.</span></span></p>
<p><span class="koboSpan" id="kobo.814.1">Up next, in the spirit of giving the user feedback, we’ll continue and add haptics and audio to </span><span class="No-Break"><span class="koboSpan" id="kobo.815.1">the game.</span></span></p>
<h1 id="_idParaDest-191"><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.816.1">Adding haptics and button sounds</span></h1>
<p><span class="koboSpan" id="kobo.817.1">Haptics are a form</span><a id="_idIndexMarker769"/><span class="koboSpan" id="kobo.818.1"> of sensory feedback that works by accessing the internal vibration hardware on an iPhone, providing a physical response when the phone is being used. </span><span class="koboSpan" id="kobo.818.2">You are probably </span><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.819.1">familiar with haptics, as it’s felt every time we set our phones to vibrate. </span><span class="koboSpan" id="kobo.819.2">We won’t use a full vibration but just a brief one that the user can feel every time they click on </span><span class="No-Break"><span class="koboSpan" id="kobo.820.1">a button.</span></span></p>
<p><span class="koboSpan" id="kobo.821.1">The best place to add such code is in the button itself, so let’s do that. </span><span class="koboSpan" id="kobo.821.2">We’re going to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.822.1">UIImpactFeedbackGenerator</span></strong><span class="koboSpan" id="kobo.823.1"> class for this, and it is actually quite simple to implement. </span><span class="koboSpan" id="kobo.823.2">First, inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.824.1">ContentView</span></strong><span class="koboSpan" id="kobo.825.1">, we need an instance of that class underneath all the properties that we </span><span class="No-Break"><span class="koboSpan" id="kobo.826.1">already added:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.827.1">
//haptic feedback
var hapticImpact = UIImpactFeedbackGenerator(style: 
  .medium)</span></pre>
<p><span class="koboSpan" id="kobo.828.1">We have set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.829.1">hapticImpact</span></strong><span class="koboSpan" id="kobo.830.1"> variable style to </span><strong class="source-inline"><span class="koboSpan" id="kobo.831.1">medium</span></strong><span class="koboSpan" id="kobo.832.1">, but you can set the vibration to </span><strong class="source-inline"><span class="koboSpan" id="kobo.833.1">heavy</span></strong><span class="koboSpan" id="kobo.834.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.835.1">light</span></strong><span class="koboSpan" id="kobo.836.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.837.1">ridged</span></strong><span class="koboSpan" id="kobo.838.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.839.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.840.1">soft</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.841.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.842.1">Now, to use this, we just simply call this variable inside the button </span><span class="No-Break"><span class="koboSpan" id="kobo.843.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.844.1">
            //MARK: - BUTTON
            Button(action: {
                </span><strong class="bold"><span class="koboSpan" id="kobo.845.1">hapticImpact.impactOccurred()</span></strong><span class="koboSpan" id="kobo.846.1">
                appData.getRandomWord()
             
                   •••••••          </span></pre>
<p><span class="koboSpan" id="kobo.847.1">And that’s it – every time the </span><strong class="bold"><span class="koboSpan" id="kobo.848.1">New Word</span></strong><span class="koboSpan" id="kobo.849.1"> button is pressed, the user will feel a slight vibration on their finger. </span><span class="koboSpan" id="kobo.849.2">In order to try this out, you actually have to run this on a device, as you cannot use haptics in </span><span class="No-Break"><span class="koboSpan" id="kobo.850.1">the simulator.</span></span></p>
<p><span class="koboSpan" id="kobo.851.1">Since we’ve implemented haptics here with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.852.1">ContentView</span></strong><span class="koboSpan" id="kobo.853.1"> button, how about we also add it to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">SettingsView</span></strong><span class="koboSpan" id="kobo.855.1"> language buttons? </span><span class="koboSpan" id="kobo.855.2">Let’s go into </span><strong class="source-inline"><span class="koboSpan" id="kobo.856.1">SettingsView</span></strong><span class="koboSpan" id="kobo.857.1"> and add the same code as we did here. </span><span class="koboSpan" id="kobo.857.2">First, create an instance of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.858.1">UIImpactFeedbackGenerator</span></strong><span class="koboSpan" id="kobo.859.1"> class at the top of the file, </span><span class="No-Break"><span class="koboSpan" id="kobo.860.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.861.1">SettingsView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.863.1">
    //haptic feedback
       var hapticImpact = UIImpactFeedbackGenerator(style: 
         .light)</span></pre>
<p><span class="koboSpan" id="kobo.864.1">Now, in each of the three language buttons, add the </span><span class="No-Break"><span class="koboSpan" id="kobo.865.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.866.1">
hapticImpact.impactOccurred()</span></pre>
<p><span class="koboSpan" id="kobo.867.1">And that’s it – it’s very easy to implement tactile feedback for </span><span class="No-Break"><span class="koboSpan" id="kobo.868.1">the user.</span></span></p>
<p><span class="koboSpan" id="kobo.869.1">And how about one other form of feedback that we are already familiar with – audio? </span><span class="koboSpan" id="kobo.869.2">We can add a button click sound to the </span><strong class="bold"><span class="koboSpan" id="kobo.870.1">New Word</span></strong><span class="koboSpan" id="kobo.871.1"> button, so not only does the user feel the button being pressed but they also </span><span class="No-Break"><span class="koboSpan" id="kobo.872.1">hear it.</span></span></p>
<p><span class="koboSpan" id="kobo.873.1">We have already</span><a id="_idIndexMarker770"/><span class="koboSpan" id="kobo.874.1"> done this several times, so for the sake of brevity, I won’t go over the code; instead, you can simply refer back to many of the other projects in which we’ve added audio (such as our record </span><span class="No-Break"><span class="koboSpan" id="kobo.875.1">player project).</span></span></p>
<p><span class="koboSpan" id="kobo.876.1">As we always do, we create a </span><a id="_idIndexMarker771"/><span class="koboSpan" id="kobo.877.1">new </span><strong class="bold"><span class="koboSpan" id="kobo.878.1">SwiftUI</span></strong><span class="koboSpan" id="kobo.879.1"> file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.880.1">PlaySound</span></strong><span class="koboSpan" id="kobo.881.1"> and add the following code to </span><span class="No-Break"><span class="koboSpan" id="kobo.882.1">the file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.883.1">
import Foundation
import AVFoundation
var player: AVAudioPlayer?
</span><span class="koboSpan" id="kobo.883.2">func playSound(sound: String, type: String) {
    if let path = Bundle.main.path(forResource: sound, 
      ofType: type) {
        do {
        player = try AVAudioPlayer(contentsOf: 
          URL(fileURLWithPath: path))
        player?.play()
        
        } catch {
            print("Could not load audio file")
        }
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.884.1">Now that we have our sound file, all we need to do is use it inside the body of the </span><strong class="bold"><span class="koboSpan" id="kobo.885.1">New </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.886.1">Word</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.887.1"> button:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.888.1">
playSound(sound: "buttonClick", type: "m4a")</span></pre>
<p><span class="koboSpan" id="kobo.889.1">And that completes the sound. </span></p>
<p><span class="koboSpan" id="kobo.890.1">Now, the user has three forms of feedback when they press the </span><strong class="bold"><span class="koboSpan" id="kobo.891.1">New Word</span></strong><span class="koboSpan" id="kobo.892.1"> button – they see the button being pressed because, during the press, the button changes its form, they feel the </span><a id="_idIndexMarker772"/><span class="koboSpan" id="kobo.893.1">impact with their finger because we accessed the internal vibration motor of the phone, and they hear a clicking sound. </span><span class="koboSpan" id="kobo.893.2">This feedback all comes together to give the user a more enriched and tactile experience when interacting with </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">the app.</span></span></p>
<h1 id="_idParaDest-192"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.895.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.896.1">In this project, we built a complete app from start to finish and included different animations along </span><span class="No-Break"><span class="koboSpan" id="kobo.897.1">the way.</span></span></p>
<p><span class="koboSpan" id="kobo.898.1">We organized properties and functions in a data model, created separate header and footer views, implemented a picker control, and created some specific functions that can process and check a word’s authenticity within three different languages. </span><span class="koboSpan" id="kobo.898.2">We also implemented user feedback in three different ways – in the form of pop-up alerts to the user, in the form of haptic feedback, and as audio. </span><span class="koboSpan" id="kobo.898.3">Plus, we’ve added three languages to the game to make it educational for users learning languages. </span></p>
<p><span class="koboSpan" id="kobo.899.1">How about taking the gamer further by adding some more animations to it, by revisiting previous projects and using code that you already implemented into different areas of the game? </span><span class="koboSpan" id="kobo.899.2">For example, if the user gets a certain number of words in their list, they could be rewarded with points that get displayed in an animated label at the top. </span><span class="koboSpan" id="kobo.899.3">Alternatively, we could add another button that will ask the user to find only words that </span><span class="No-Break"><span class="koboSpan" id="kobo.900.1">are palindromes.</span></span></p>
<p><span class="koboSpan" id="kobo.901.1">In the next chapter, we will build another game – this time, a </span><span class="No-Break"><span class="koboSpan" id="kobo.902.1">color-matching game.</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer189">
</div>
</div>
</body></html>