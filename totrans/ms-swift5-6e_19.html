<html><head></head><body>
  <div><h1 class="chapterNumber">19</h1>
    <h1 id="_idParaDest-294" class="chapterTitle">Swift Formatting and Style Guide</h1>
    <p class="normal">Throughout my development experience, every time I learned a new programming language, there was usually some mention of how the code for that language should be written and formatted. Early in my development career (which was a long time ago), these recommendations were very basic formatting recommendations, being about things such as how to indent your code, or having one statement per line. It really wasn't until the last 10-12 years that I started to see complex and detailed formatting and style guides for different programming languages. Today, you would be hard-pressed to find a development shop with more than two or three developers that does not have a style/formatting guide for each language that they use. Even companies that do not create their own style guides generally refer back to some standard guide published by other companies, such as Google, Oracle, or Microsoft. These style guides help teams to write consistent and easy-to-maintain code.</p>
    <p class="normal">In this chapter, you will learn the following:</p>
    <ul>
      <li class="bullet">What a style guide is</li>
      <li class="bullet">What makes a good style guide</li>
      <li class="bullet">Why it is important to use a style guide</li>
      <li class="bullet">How to create a sample style guide</li>
    </ul>
    <h1 id="_idParaDest-295" class="title">What is a programming style guide?</h1>
    <p class="normal">Coding styles <a id="_idIndexMarker732"/>are very personal, and every developer has their own preferred style. These styles can vary from language to language, from person to person, and over time. The personal nature of coding styles can make it difficult to have a consistent and readable code base when numerous individuals are contributing to the code.</p>
    <p class="normal">While most developers might have their own preferred styles, the recommended or preferred style between languages can vary. As an example, in C#, when we name a method or function, it is preferred that we use Pascal case, which is similar to camel case except the first letter is capitalized. In most other languages, such as C, Objective-C, and Java, it is also recommended that we use camel case, where the first letter is lowercase.</p>
    <p class="normal">The best applications are coded so they are easy to maintain and the code is easy to read. It is hard for large projects and companies with many developers to have code that is easy to maintain and read if every developer uses their own coding style. This is why companies and projects with multiple developers usually adopt programming style guidelines for each language that they use.</p>
    <p class="normal">A programming <a id="_idIndexMarker733"/>style guide defines a set of rules and guidelines that a developer should follow while writing applications with a specific language within a project or company. These style guides can differ greatly between companies or projects and reflect how a company or project expects code to be written. These guides can also change over time. It is important to follow these style guides to maintain a consistent code base.</p>
    <p class="normal">A lot of developers do not like the idea of being told how they should write code, and claim that as long as their code functions correctly, it shouldn't matter how they format it. This type of philosophy doesn't work in a coding team for the same reason it doesn't work in a sports team. What do you think would happen if all the players on a basketball team believed that they could all play the way they wanted to play and the team was better when they did their own thing? That team would probably lose a lot of games. It is impossible for a basketball team (or any sports team, for that matter) to win consistently unless all team members are working together. It is up to the coach to make sure that everyone is working together and executing the same game plan, just as it is up to the team leader of a development project to make sure all the developers are writing code according to the adopted style guide.</p>
    <h1 id="_idParaDest-296" class="title">API Design Guide</h1>
    <p class="normal">Apple has <a id="_idIndexMarker734"/>released API Design Guidelines for Swift. This defines how APIs should be designed and is different from a language style guide. A language style guide defines how code should be written for a particular language; an API design guide defines how APIs should be designed. If you are creating an API that will be used by other Swift developers, you should become familiar with Apple's API Design <a id="_idIndexMarker735"/>Guidelines, which can be found here: <a href="https://swift.org/documentation/api-design-guidelines/">https://swift.org/documentation/api-design-guidelines/</a>.</p>
    <h2 id="_idParaDest-297" class="title">Your style guide</h2>
    <p class="normal">The style guide that we define in this book is just a guide. It reflects the author's opinion on how Swift <a id="_idIndexMarker736"/>code should be written and is meant to be a good starting point for creating your own style guide. If you really like this guide and adopt it as it is, great. If there are parts that you do not agree with and you change them within your guide, that is great as well.</p>
    <p class="normal">The appropriate style for you and your team is the one that you and your team feel comfortable with, and it may or may not be different from the guide in this book. Don't be afraid to adjust your style guide as needed. One thing that is noticeable in the style guide within this chapter, and most good style guides, is that there is very little explanation about why each item is preferred or not preferred. Style guides should give enough details so that the reader understands the preferred and non-preferred methods for each item but should also be small and compact to make them easy and quick to read. If a developer has questions about why a particular method is preferred, they should bring that concern up with the development group. With that in mind, let's get started with the guide.</p>
    <h3 id="_idParaDest-298" class="title">Do not use semicolons at the end of statements</h3>
    <p class="normal">Unlike a <a id="_idIndexMarker737"/>lot of languages, Swift does not <a id="_idIndexMarker738"/>require semicolons at the end of statements. Therefore, we should not use them. Let's look at the following code:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method
var name = "Jon" 
print(name)
//Non-preferred Method
var name = "Jon";
print(name);
</code></pre>
    <h3 id="_idParaDest-299" class="title">Do not use parentheses for conditional statements</h3>
    <p class="normal">Unlike <a id="_idIndexMarker739"/>a lot of <a id="_idIndexMarker740"/>languages, parentheses are not required around conditional statements; therefore, we should avoid using them unless <a id="_idIndexMarker741"/>they are needed <a id="_idIndexMarker742"/>for clarification. Let's look at the following code:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method
if speed == 300_000_000 { 
    print("Speed of light")
}
//Non-Preferred Method
if (speed == 300_000_000) { 
    print("Speed of light")
}
</code></pre>
    <h3 id="_idParaDest-300" class="title">Naming</h3>
    <p class="normal">We should <a id="_idIndexMarker743"/>always use descriptive names with <a id="_idIndexMarker744"/>camel case for custom types, methods, variables, constants, and so on. Let's look at some general naming rules.</p>
    <h4 class="title">Custom types</h4>
    <p class="normal">Custom types <a id="_idIndexMarker745"/>should have a descriptive name that describes what the type is for. The name should be in Pascal case. Here are examples of proper names and non-proper names based on our style guide:</p>
    <pre class="programlisting code"><code class="hljs-code">//Proper Naming Convention
BaseballTeam
LaptopComputer
//Non-Proper Naming Convention 
baseballTeam  //Starts with a lowercase letter 
Laptop_Computer  //Uses an underscore
</code></pre>
    <h4 class="title">Functions and methods</h4>
    <p class="normal">Function names <a id="_idIndexMarker746"/>should be descriptive, describing <a id="_idIndexMarker747"/>the function or method. They should be in camel case. Here are some examples of proper and non-proper names:</p>
    <pre class="programlisting code"><code class="hljs-code">//Proper Naming Convention
getCityName
playSound
//Non-Proper Naming Convention
get_city_name  //All lowercase and has an underscore
PlaySound  //Begins with an uppercase letter
</code></pre>
    <h4 class="title">Constants and variables</h4>
    <p class="normal">Constants and variables should have a descriptive name. They should begin with a lowercase <a id="_idIndexMarker748"/>letter and be in camel case. The only exception is when the constant is global; in that case, the name of the constant should <a id="_idIndexMarker749"/>contain all uppercase characters with the words separated by underscores. I have seen numerous guides that frown upon having all-uppercase names, but I personally like them for constants in the global scope, because it stands out that they are globally, not locally, scoped. </p>
    <p class="normal">Here are some examples of proper and non-proper names:</p>
    <pre class="programlisting code"><code class="hljs-code">//Proper Names
playerName
driveSize
//Non-Proper Names
PlayerName  //Starts with uppercase letter
drive_size  //Has underscore in name
</code></pre>
    <h3 id="_idParaDest-301" class="title">Indenting</h3>
    <p class="normal">Indenting <a id="_idIndexMarker750"/>width in Xcode, by default, is defined as four spaces, and tab <a id="_idIndexMarker751"/>width is also defined as four spaces. We should leave this as the default. The following screenshot shows the indentation setting in Xcode:</p>
    <figure class="mediaobject"><img src="img/B16683_19_01.png" alt="A screenshot of a cell phone screen with text  Description automatically generated"/></figure>
    <p class="packt_figref">Figure 19.1: Indentations</p>
    <p class="normal">We should add an extra blank line between functions/methods. We should also use a blank line <a id="_idIndexMarker752"/>to separate functionality within a function or method. That being said, using many blank lines within a function or method might indicate <a id="_idIndexMarker753"/>that we should break the function into multiple functions.</p>
    <h3 id="_idParaDest-302" class="title">Comments</h3>
    <p class="normal">We should <a id="_idIndexMarker754"/>use comments as needed to explain <a id="_idIndexMarker755"/>how and why our code is written. We should use block comments before custom types and functions. We should use double slashes to comment our code in one line. Here is an example of how comments should be written:</p>
    <pre class="programlisting code"><code class="hljs-code">/**
This is a block comment that should be used to explain a class or function
**/
public class EmployeeClass {
    // This is an inline comment with double slashes
    var firstName = ""
    var lastName = ""
/**
    Use Block comments for functions
        parameter paramName: use this tag for parameters
        returns: explain what is returned
        throws: Error thrown
**/
    func getFullName() -&gt; String { 
        return firstName + " " + lastName
    }
}
</code></pre>
    <p class="normal">When we are commenting methods, we should also use documentation tags, which will generate <a id="_idIndexMarker756"/>documentation in Xcode, as shown <a id="_idIndexMarker757"/>in the preceding example. At a minimum, we should use the following tags if they apply to our method:</p>
    <ul>
      <li class="bullet"><strong class="keyword">Parameter</strong>: This is used for parameters</li>
      <li class="bullet"><strong class="keyword">Returns</strong>: This is used for what is returned</li>
      <li class="bullet"><strong class="keyword">Throws</strong>: This is used to document errors that may be thrown</li>
    </ul>
    <h3 id="_idParaDest-303" class="title">Using the self keyword</h3>
    <p class="normal">Since Swift does not require us to use the <code class="Code-In-Text--PACKT-">self</code> keyword when accessing properties or invoking methods <a id="_idIndexMarker758"/>of an object, we should <a id="_idIndexMarker759"/>avoid using it unless we need to distinguish between an instance property and local variables. Here is an example of when you should use the <code class="Code-In-Text--PACKT-">self</code> keyword:</p>
    <pre class="programlisting code"><code class="hljs-code">public class EmployeeClass { 
    var firstName = ""
    var lastName = ""
    func setName(firstName: String, lastName: String) { 
       self.firstName = firstName
       self.lastName = lastName
    }
}
</code></pre>
    <p class="normal">Here is an example of when not to use the <code class="Code-In-Text--PACKT-">self</code> keyword:</p>
    <pre class="programlisting code"><code class="hljs-code">public class EmployeeClass { 
    var firstName = ""
    var lastName = ""
    func getFullName() -&gt; String {
       return self.firstName + " " + self.lastName
    }
}
</code></pre>
    <h3 id="_idParaDest-304" class="title">Constants and variables</h3>
    <p class="normal">The difference <a id="_idIndexMarker760"/>between constants and variables is that the value of a constant <a id="_idIndexMarker761"/>never changes, whereas the value of a variable may change. Wherever possible, we should define constants rather than variables.</p>
    <p class="normal">One of <a id="_idIndexMarker762"/>the easiest ways of doing this is by defining everything as a constant by default, and then changing the definition to a variable only after you reach a point in your code that requires you to change it. In Swift, you will get a warning if you define a variable and then never change the value within your code.</p>
    <h3 id="_idParaDest-305" class="title">Optional types</h3>
    <p class="normal">Only use <a id="_idIndexMarker763"/>optional types when absolutely necessary. If there is <a id="_idIndexMarker764"/>no absolute need for a nil value to be assigned to a variable, we should not define it as an optional.</p>
    <h4 class="title">Using optional binding</h4>
    <p class="normal">We should <a id="_idIndexMarker765"/>avoid forced unwrapping of optionals, as there is rarely any need to do this. We should preferably use optional binding or <a id="_idIndexMarker766"/>optional chaining rather than forced unwrapping.</p>
    <p class="normal">The following examples show the preferred and non-preferred methods where the <code class="Code-In-Text--PACKT-">myOptional</code> variable is defined as an optional:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method Optional Binding
if let value = myOptional {
    // code if myOptional is not nil
} else {
    // code if myOptional is nil
}
//Non-Preferred Method
if myOptional != nil {
    // code if myOptional is not nil
} else {
    // code if myOptional is nil
}
</code></pre>
    <p class="normal">If there are <a id="_idIndexMarker767"/>several optionals that we need to unwrap, we should include them in the same <code class="Code-In-Text--PACKT-">if-let</code> or <code class="Code-In-Text--PACKT-">guard</code> statement, rather than unwrapping them <a id="_idIndexMarker768"/>on separate lines. There are times, however, when our business logic may require us to handle nil values differently, and this may require us to unwrap the optionals on separate lines. The following examples show the preferred and non-preferred methods:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method Optional Binding
if let value1 = myOptional1, let value2 = myOptional2 {
// code if myOptional1 and myOptional2 is not nil
} else {
// code if myOptional1 and myOptional2 is nil
}
//Non-Preferred Method Optional Binding
if let value1 = myOptional1 {
    if let value2 = myOptional2 {
        // code if myOptional is not nil
    } else {
        // code if myOptional2 is nil
    } else {
    // code if myOptional1 is nil
}
</code></pre>
    <h4 class="title">Using optional chaining </h4>
    <p class="normal">When we <a id="_idIndexMarker769"/>need to unwrap multiple layers, we should use optional <a id="_idIndexMarker770"/>chaining over multiple optional binding statements. The following example shows the preferred and non-preferred methods:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method
if let color = jon.pet?.collar?.color { 
    print("The color of the collar is \(color)")
} else {
    print("Cannot retrieve color")
}
//Non-Preferred Method
if let tmpPet = jon.pet, let tmpCollar = tmpPet.collar{ 
    print("The color of the collar is \(tmpCollar.color)")
} else {
    print("Cannot retrieve color")
}
</code></pre>
    <h3 id="_idParaDest-306" class="title">Using type inference</h3>
    <p class="normal">Rather than <a id="_idIndexMarker771"/>defining variable types, we should <a id="_idIndexMarker772"/>let Swift infer the type. The only time we should define the variable or constant type is when we are not giving it a value while defining it. Let's look at the following code:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred method
var myVar = "String Type" //Infers a String type
var myNum = 2.25 //Infers a Double type
//Non-Preferred method
var myVar: String = "String Type"
var myNum: Double = 2.25
</code></pre>
    <h3 id="_idParaDest-307" class="title">Using shorthand declarations for collections</h3>
    <p class="normal">When declaring native Swift collection types, we should use the shorthand syntax, and, unless <a id="_idIndexMarker773"/>absolutely necessary, we should initialize the collection. The following example shows the <a id="_idIndexMarker774"/>preferred and non-preferred methods:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method
var myDictionary: [String: String] = [:]
var strArray: [String] = []
var strOptional: String?
//Non-Preferred Method
var myDictionary: Dictionary&lt;String,String&gt;
var strArray: Array&lt;String&gt;
var strOptional: Optional&lt;String&gt;
</code></pre>
    <h3 id="_idParaDest-308" class="title">Using switch rather than multiple if statements</h3>
    <p class="normal">Wherever <a id="_idIndexMarker775"/>possible, we should prefer <a id="_idIndexMarker776"/>to use a single <code class="Code-In-Text--PACKT-">switch</code> statement over multiple <code class="Code-In-Text--PACKT-">if</code> statements. The following example shows the preferred and non-preferred methods:</p>
    <pre class="programlisting code"><code class="hljs-code">//Preferred Method
let speed = 300_000_000
switch speed {
   case 300_000_000: 
       print("Speed of light") 
   case 340:
       print("Speed of sound")
   default:
       print("Unknown speed")
}
//Non-preferred Method
let speed = 300_000_000 if speed == 300_000_000 {
       print("Speed of light")
} else if speed == 340 { 
       print("Speed of sound")
} else {
       print("Unknown speed")
}
</code></pre>
    <h3 id="_idParaDest-309" class="title">Don't leave commented-out code in your application</h3>
    <p class="normal">If we <a id="_idIndexMarker777"/>comment out a block of <a id="_idIndexMarker778"/>code while we attempt to replace it, once we are comfortable with the changes we should remove the code that we commented out. Having large blocks of code commented out can make the code base look messy and make it harder to follow.</p>
    <h1 id="_idParaDest-310" class="title">Summary</h1>
    <p class="normal">When we are developing an application in a team environment, it is important to have a well-defined coding style that is adhered to by everyone on the team. This allows us to have a code base that is easy to read and maintain.</p>
    <p class="normal">If a style guide remains static for too long, it means that it is probably not keeping up with the latest changes within the language. What is considered "too long" is different for each language. For example, with the C language, too long will be defined in years, since the language is very stable; however, with Swift, the language is relatively new, and changes come pretty often, so "too long" can probably be defined as a couple of months.</p>
    <p class="normal">It is recommended that we keep our style guides in a version control system so that we can refer to older versions if need be. This allows us to pull older versions of the style guide and refer back to them when we are looking at older code.</p>
    <p class="normal">It is recommended, not only with Swift but other languages as well, that you use a lint tool to check and enforce good coding practices. For Swift, there is a great tool called SwiftLint (<a href="https://github.com/realm/SwiftLint">https://github.com/realm/SwiftLint</a>), which has a command-line tool.</p>
    <p class="normal">As you work on a style guide for your organization, you may want to keep an eye on Swift Evolution Proposal SE-0250 (<a href="https://github.com/apple/swift-evolution/blob/master/proposals/0250-swift-style-guide-and-formatter.md">https://github.com/apple/swift-evolution/blob/master/proposals/0250-swift-style-guide-and-formatter.md</a>). This proposal is to create an official Swift style guide and formatter. If this proposal is accepted and an official style guide is released, then you should adopt those guidelines.</p>
  </div>
</body></html>