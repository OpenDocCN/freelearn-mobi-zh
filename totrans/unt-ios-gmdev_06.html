<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Our Game: Battle Cry!"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Our Game: Battle Cry!</h1></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>We've spent some time talking about the basics of getting to know Unity iOS and we've looked at some examples of how to use some of its basic functions, but we need to bring it all together to build a game for the iOS market. While we could dream up any game concept we want, we need to be aware of our platform and the user expectations of the platform. Just because something worked well on a Nintendo DS or a PC with a keyboard and mouse, that doesn't mean that the game is appropriate for players whose primary interface is touching the screen and moving the device.</p></blockquote></div><p>In this chapter we shall:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Walk through the design decisions for building an iOS game</li><li class="listitem" style="list-style-type: disc">Organize our project</li><li class="listitem" style="list-style-type: disc">Determine the project asset budget</li><li class="listitem" style="list-style-type: disc">Import and optimize assets for our project</li></ul></div><div class="section" title="Game Concept"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec01"/>Game Concept</h1></div></div></div><p>As this is the first game we're going to be building for the app store, we will start with something that is fun, but relatively basic in concept and implementation — a third person perspective dungeon crawler. The design inspiration for the game will be the arcade classic Gauntlet. We will take advantage of common services used for mobile games through plugins and third party services to exploit some of the iOS functions available in Unity.</p><div class="section" title="Story"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec01"/>Story</h2></div></div></div><p>Every game needs a story and this one is no different. A story doesn't have to be a grand epic, but it should explain to the player why they are doing what they are doing and give them the motivation to play the game — and its sequel. For Battle Cry, which is a fairly simple third person shooter game, we will go with a fairly simple story.<a id="id272" class="indexterm"/>
</p><p>The planet of Vosh is the ancestral home of your people. The planet has one special resource — heavy water that, unbeknownst to the people of Vosh, is highly sought after by other intelligent species in the universe as it is used in their fusion power reactors. The people of Vosh have been filtering the heavy water into a special type of beverage for the royal family of the planet.<a id="id273" class="indexterm"/>
</p><p>One day an alien craft appears in orbit above Vosh carrying aliens that have determined that they need the heavy water and start an invasion of the planet. You are a soldier that is based at one of the filtering factories and responsible for defending the facility. Your commanding officers have called out for support, as your weaponry is limited. All you need to do is hold out and keep the facility in good repair.</p><p>With this simple story we can drive the player through our scene and easily incorporate elements of multiplayer gameplay.</p></div><div class="section" title="Interface"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec02"/>Interface</h2></div></div></div><p>The interface for this game can be relatively rudimentary and that is important as our gameplay has relatively straightforward gameplay considerations. We need a way to move our character through the world, a way to have them attack enemies, a display for health, and a way to keep score:<a id="id274" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_5.jpg" alt="Interface"/></div><p>This mockup represents the interface that we will need to construct for our game. The game design requires touch with the device and up to this point there is no reason for us to process voice, shake the device, or anything else. If there is no reason for these features, there is no reason to add them. Good game design is a matter of following the KISS principle (Keep It Simple Stupid).<a id="id275" class="indexterm"/>
</p></div><div class="section" title="Control"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec03"/>Control</h2></div></div></div><p>Control is one of the more difficult things to get right on a touch screen device and it's usually because you're dealing with a device that is designed to be held. Given this you have two general orientations of the device that you need to prepare for.<a id="id276" class="indexterm"/>
</p><p>The first use case is that the user is holding the device in the hands. In this case the primary user interaction is going to be their thumbs — a relatively low precision touch instrument and one that does not lend it self to rapid movement.</p><p>The second use case is that the user has positioned the device on a table and is looking down at it. In this case the user is more likely to be using a pointing finger, which is higher precision and capable of more rapid movement.</p><p>Why is this important, you may ask? If the user is working with a lower precision control instrument and a slower moving finger, to remove an element of frustration for a wide variety of genres of game, you need to make your control area larger and you need to make your game more responsive to its movement and vice versa. Given this, we need to give the user two sets of controls to reflect the different user hand sizes and we need to allow those controls to have variable sensitivity — preferably configurable by the user in the game's settings.<a id="id277" class="indexterm"/>
</p></div><div class="section" title="Audio"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec04"/>Audio</h2></div></div></div><p>Audio is usually an after thought in game design when it really should be thought about in great detail early in the design, so that it feels part of the game. If you feel that the audio of your game isn't nearly as important as the graphic element I offer you two challenges: listen to your favorite movie with the sound off, do a search on the Internet for video game music. Sound and music done properly will elicit an emotional response in the user and allow for a deeper emotional attachment to the rest of the game.<a id="id278" class="indexterm"/>
</p><p>We will want to have sounds for a variety of user interactions — the grunts of enemies, the battle cry of the champions of the city, the sounds of arrows in flight, the cries of the slain, and so on. Additionally, we will want to have several sets of music that will reflect the different moods of the game. Most importantly, we want all of this sound to actually fit on the device. We could make a design decision and allow the user to access their iTunes music library for music, but it isn't appropriate in this context.</p></div></div></div>
<div class="section" title="Time for action &#x2014; Project setup"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec02"/>Time for action —  Project setup</h1></div></div></div><p>It is now time for us to create the project for our game that will be used for the rest of the text. While we have walked through this at a high-level before, there are particular details that we want to include with this new project that require review.<a id="id279" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Create a new Unity Project.<a id="id280" class="indexterm"/><p>Our project will use some of the unitypackages that come with Unity to provide some of the core functions without us having to write a large amount of code.
</p></li><li class="listitem">Enter a directory name for the project.</li><li class="listitem">Select the<span class="strong"><strong> Character Controller, Skyboxes, Standard Assets (Mobile)</strong></span>, and<span class="strong"><strong> Terrain Assets</strong></span> packages in the<span class="strong"><strong> Project Wizard:</strong></span><a id="id281" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_1.jpg" alt="Time for action — Project setup"/></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Character Controller</strong></span> will allow us to move our character around the level without having to deal with a lot of scripting.<a id="id282" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Skyboxes</strong></span> are useful for being able to draw the sky for our world. We will be able to put up a simple texture to represent the sky or ceiling for our dungeons.<a id="id283" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Standard Assets (Mobile)</strong></span> will contain a lot of interface and optimized prefabs specifically for the iPhone.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Terrain Assets</strong></span> will give us the basics for being able to paint on our terrain without having to go off and search for other assets.</li></ul></div></li><li class="listitem">As we've done previously, we need to create a new<span class="strong"><strong> App ID</strong></span> and provisioning profile on the Apple Developer Center's provisioning portal.<a id="id284" class="indexterm"/></li><li class="listitem">Download and import the provisioning profile into XCode.</li><li class="listitem">In the<span class="strong"><strong> Player Settings</strong></span> change the<span class="strong"><strong> Product Name</strong></span> to<span class="strong"><strong> Battlecry</strong></span>. This is the name that the application will display when it is installed on the device.</li><li class="listitem">Set our<span class="strong"><strong> Bundle Identifier</strong></span> to that which we have from the provisioning portal. Here I have inserted<code class="literal"> com.sojournermobile.battlecry</code> to mimic what is stored in the provisioning profile.</li><li class="listitem">As we're targeting both the iPhone and the iPad we must set the<span class="strong"><strong> Target Device</strong></span> to<span class="strong"><strong> iPhone + iPad</strong></span> so that we will end up with a universal binary:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_28.jpg" alt="Time for action — Project setup"/></div></li><li class="listitem">Provide an image for the game so that it will display with a real icon when it starts. In the assets there is an "icon_57_57.png" file. Import that and drag it in to the Default Icon field:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_29.jpg" alt="Time for action — Project setup"/></div></li><li class="listitem">To ensure that we're linking to the latest SDK, and have access to all of the functions of iOS available to us, select iOS Latest as the SDK version:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_6.jpg" alt="Time for action — Project setup"/></div></li><li class="listitem">Save the scene in the project. You will need to do this before you can include the scene in the build:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_30.jpg" alt="Time for action — Project setup"/></div></li><li class="listitem">Open the<span class="strong"><strong> Build Settings</strong></span> and check our scene:<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note10"/>Note</h3><p>If the scene isn't showing up, make sure you have saved it.</p></div><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_2.jpg" alt="Time for action — Project setup"/></div></li><li class="listitem">Select the<span class="strong"><strong> Build &amp; Run</strong></span> function from the<span class="strong"><strong> File</strong></span> menu. If everything is okay you should see your iOS device start and display the Unity logo.<a id="id285" class="indexterm"/></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec05"/>What just happened?</h2></div></div></div><p>We have setup the project structure and produced our first build of the game. With this done we can begin to focus on importing assets into our project to begin building a real scene.<a id="id286" class="indexterm"/>
</p></div></div>
<div class="section" title="Time for action &#x2014; Building a game world"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec03"/>Time for action —  Building a game world</h1></div></div></div><p>There are a number of sites that we can reach out to to get assets for the game, but as of Unity 3.1 there has been an integrated store through which you can acquire assets for your project. This interface is so easy to use that it's worth examining for building our level. While we won't find everything here, this is a good start.<a id="id287" class="indexterm"/>
</p><p>One word of advice is that sometimes assets within the Asset Store can be purchased cheaper through other means so be sure to shop around.</p><div class="section" title="Unity Asset Store"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec06"/>Unity Asset Store</h2></div></div></div><p>The Unity Asset Store is a tool built right into the Unity environment through which you can purchase prefab and integrate them right into your project without ever having to leave the tool. The prefabs in the asset store cover models, scripts, and even functionality that will plug into the Unity IDE itself.<a id="id288" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Open the store by selecting<span class="strong"><strong> Asset Store</strong></span> in the<span class="strong"><strong> Window</strong></span> menu:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_13.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Authenticate with the<span class="strong"><strong> Asset Store</strong></span> by creating an account if you have not already done so:<a id="id289" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_11.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Next, you will be greeted by the main menu of the store where you can shop for various types of Unity compatible assets, sounds, prefabs, scripts, and so on:<a id="id290" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_12.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Create the ground plane for our scene with<span class="strong"><strong> Game Object | Create Other | Plane</strong></span>.<a id="id291" class="indexterm"/></li><li class="listitem">Insert a light into the scene with<span class="strong"><strong> Game Object | Create Other | Point Light</strong></span>.</li><li class="listitem">In the Unity<span class="strong"><strong> Asset Store</strong></span> window enter<span class="strong"><strong> Allegorithmic</strong></span> and select the<span class="strong"><strong> 18 FREE Substances</strong></span> package:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_18.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Download the package and import the assets into the project:<a id="id292" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_19.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Expand the<code class="literal"> Substances_Free</code> directory in your project.<a id="id293" class="indexterm"/></li><li class="listitem">Expand the<span class="strong"><strong> Desert_Sand_01</strong></span> package.</li><li class="listitem">Drag the<span class="strong"><strong> Desert_Sand_01</strong></span> material onto the plane:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_20.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Enter<span class="strong"><strong> Soldiers Pack</strong></span> into the search area:<a id="id294" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_21.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Import the<span class="strong"><strong> Soldiers Pack</strong></span> by<span class="strong"><strong> TheAvatarStudioi</strong></span> into the project:<a id="id295" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_22.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Expand the<code class="literal"> SoldiersPack</code> folder in the<span class="strong"><strong> Project</strong></span> view.<a id="id296" class="indexterm"/></li><li class="listitem">Expand the<code class="literal"> ArmyOne</code> folder located beneath<code class="literal"> SoldiersPack</code>.</li><li class="listitem">Drag the<span class="strong"><strong> Army 01</strong></span> prefab object to the scene:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_23.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Enter<span class="strong"><strong> Stone</strong></span> into the search field:<a id="id297" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_24.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Import the Stone assets from the Universal Image into the project.<a id="id298" class="indexterm"/></li><li class="listitem">Expand the<code class="literal"> Stone</code> folder in the project.</li><li class="listitem">Drag the stone prefab into the scene.</li><li class="listitem">Scale the Stone prefab by<span class="strong"><strong> 10</strong></span> units along each axis:<div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_25.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Position the enlarged stones in the scene to make some basic scenery:<a id="id299" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_6_26.jpg" alt="Unity Asset Store"/></div></li><li class="listitem">Save the scene.</li></ol></div></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec07"/>What just happened?</h2></div></div></div><p>We have laid out the stage where all the action will take place in our game by importing assets from the<span class="strong"><strong> Asset Store</strong></span>. While we have some basic animation ready for actors in the scene, we don't have a player character that can be controlled by the player. What we are missing are actors to participate in the game. We need to build a controller for our player character that will work with our game design.<a id="id300" class="indexterm"/>
</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec04"/>Summary</h1></div></div></div><p>In this chapter we discussed the design of our game and set up our project. Along the way we have setup version control, imported assets from a wide variety of sources including the Unity asset store, and produced the first build for our device. We are now ready to move onto the first hurdle that is to move our player character through the scene.</p></div></body></html>