<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Firebase - Flutter's Best Friend</h1>
                </header>
            
            <article>
                
<p>Building apps using <strong>Firebase</strong> is one of the fastest-growing technology trends in the world. Using Firebase, developers can build apps at a rapid pace without managing the infrastructure, <span>including authentication, storing and syncing data, securely hosting web assets, and cloud storage. Firebase has a base plan that is free, allowing 1 GB the storage and 100 simultaneous connections. If you wish to upgrade, you can check out the plans here: <a href="https://firebase.google.com/pricing/">https://firebase.google.com/pricing/</a>.<a href="https://firebase.google.com/pricing/"/></span></p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li class="h1">Connecting with Firebase</li>
<li class="h1">Creating the Cloud Firestore database</li>
<li class="h1">Firebase Cloud Messaging</li>
<li class="h1">Firebase Remote Config</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Connecting with Firebase</h1>
                </header>
            
            <article>
                
<p class="mce-root">Let's first take a look at how to connect with Firebase. We will first need to ensure whether the connections to the Firebase are made properly; to do so, follow these steps:</p>
<ol>
<li class="mce-root">Create a new Flutter project in your IDE or editor</li>
<li class="mce-root">Open the file <kbd>pubspec.yaml</kbd> file</li>
<li class="mce-root">Add the following dependency:</li>
</ol>
<pre style="padding-left: 60px"><span>dependencies</span>:<br/>  <span>flutter</span>:<br/>    <span>sdk</span>: flutter<br/>  <br/>  cloud_firestore: ^0.9.5+2  //Add this line</pre>
<div class="packt_infobox CDPAlignLeft CDPAlign">For details of the latest version of the Cloud Firestore plugin for Flutter, visit the Pub site:<a href="https://pub.dartlang.org/packages/cloud_firestore"> https://pub.dartlang.org/packages/cloud_firestore</a>.</div>
<ol start="4">
<li>Next, to make<span> your connection, </span>in your IDE or using command line run the following: </li>
</ol>
<pre style="padding-left: 60px"><strong>flutter packages get</strong></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a Firebase project</h1>
                </header>
            
            <article>
                
<p>Once the connection has been made, the next step will be to create a Firebase project. So, let's get started. Follow the given steps to create your project:</p>
<ol>
<li class="mce-root">Open the website <a href="https://firebase.google.com">https://firebase.google.com</a> and log in or sign up. You can use your Google credentials to log in here.</li>
<li class="mce-root"><span><span>Next, click on Add Project.</span></span></li>
</ol>
<ol start="3">
<li class="mce-root">Once you click this option, you will see the following screen:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b04f4a22-a72d-44a7-b6d8-f5a196155b8e.png" style="width:28.67em;height:35.25em;"/></p>
<ol start="4">
<li>Add a <span class="packt_screen">Project name</span> (for example: <kbd>Firebase Flutter Demo App</kbd> in our case). The <strong><span class="packt_screen">Project ID</span></strong> gets auto-generated, or you could type a unique project ID of your own. They are globally unique identifiers.</li>
<li>Select the country in <span class="packt_screen">Locations</span> and then proceed to accept the terms and conditions before you click <span class="packt_screen">Create project</span><strong>. </strong></li>
</ol>
<ol start="6">
<li>Click the <span class="packt_screen">Create project</span> option, and wait a few seconds before the Firebase console shows the message displayed in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-482 image-border" src="assets/38a93117-ba5f-4bb5-8838-54eef11a6727.png" style="width:16.08em;height:16.17em;"/></p>
<ol start="7">
<li class="CDPAlignLeft CDPAlign">If your screen shows the <strong><span class="packt_screen">Your new project is ready</span></strong> text, as shown in the preceding screenshot, you can click the <strong><span class="packt_screen">Continue</span> </strong>button.</li>
<li class="CDPAlignLeft CDPAlign">Once that is done, you will be shown the project settings dashboard of the app as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/28e7ff8a-a759-44d1-917d-f019ee7c78ef.png" style="width:45.25em;height:20.67em;"/></p>
<ol start="9">
<li>Choose platform-specific Firebase configurations, based on which app platform you will be building an app for, and click on the respective icon. In our case, since we are building an Android app, we will click on the Android icon to proceed. </li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Registering an app using a package name</h1>
                </header>
            
            <article>
                
<p>This step is needed to register your app's platform-specific ID with Firebase. This will generate configuration files that we will add to our project folders. Note that in the top-level directory of your Flutter app, iOS and Android are two of the subdirectories that hold the respective platform-specific configuration files: </p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/66815961-af58-4e30-ae9e-39f3b71315bd.png" style="width:35.58em;height:33.75em;"/></p>
<p>In the top-level directory of your Flutter app, you can see subdirectories; called Android and iOS. Here,you'll find platform-specific configuration files for iOS and Android.</p>
<p>The most important field here is the <span class="packt_screen">Android package name</span><strong>. </strong>This is generally the<strong> </strong><kbd>applicationId</kbd> in your app-level <kbd>build.gradle</kbd> file. Another way to find the package name is to follow these steps:</p>
<ol>
<li>In the Flutter app directory, check the <kbd>android/app/src/main/AndroidManifest.xml</kbd> file.</li>
<li>Under the Manifest tag, find the string value of the package, which will be the value of the package name.</li>
<li>In the Firebase dialog, paste the copied package name from step 2 into the <span class="packt_screen">Android package name</span> field.</li>
</ol>
<p>If you are developing the Flutter app for both iOS and Android, you need to register both the iOS and Android versions within the same Firebase project. But if you are developing it just for one platform, you can just click one of them. </p>
<p>Next, you can add the <span class="packt_screen">App nickname</span>, which is an optional field. There is another optional field <strong><span class="packt_screen">Debug signing certificate SHA-1,</span></strong> which has to be used in the same cases if the app uses features such as Google Sign in for Authentication, Dynamic Links, and Invites. In this case, you have to find the debug certificate fingerprint value that you can grab and paste in the field. Refer to the link here, <a href="https://developers.google.com/android/guides/client-auth">https://developers.google.com/android/guides/client-auth</a>, for understanding how to build client auth. Since, in this example, we are not using any of these features, we will leave it blank. Click on <span class="packt_screen">Register app</span>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Downloading and setting up the config file </h1>
                </header>
            
            <article>
                
<p>The next part will be to download and set up the config file. Follow the given steps to to download and set up the config file:</p>
<ol>
<li>After clicking <strong><span class="packt_screen">Register app</span></strong>, the console in this step will generate the <kbd>google-services.json</kbd> file. Download this file to your computer.</li>
<li>Once the file has been downloaded, go to your Flutter app directory, and move the <kbd>google-services.json</kbd> file that you downloaded previously into the <kbd>android/app</kbd> directory.</li>
</ol>
<ol start="3">
<li>After the file has been moved, in the Firebase console, click <span class="packt_screen">Next</span> as shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/8cdc637f-5749-4b21-b578-dda78daa6801.png" style="width:39.25em;height:26.50em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding Firebase SDK</h1>
                </header>
            
            <article>
                
<p>Now that we have downloaded and set up the config file, the penultimate step is to add Firebase SDK to your project. The Google services plugin for Gradle ensures that the JSON file you downloaded is read. In order to enable Google APIs or Firebase services in your application, you have to add a <kbd>google-services</kbd> dependency. Two minor modifications are needed to <kbd>build.gradle</kbd> files to use the plugin. Take a look at the following:</p>
<ol>
<li>Project-level <kbd>build.gradle</kbd> (<kbd>&lt;project&gt;/build.gradle</kbd>):</li>
</ol>
<pre style="padding-left: 60px">buildscript { <br/>dependencies <br/>{ <br/>// Add this line <br/>classpath 'com.google.gms:google-services:4.2.0' <br/>} <br/>}</pre>
<ol start="2">
<li>App-level <kbd>build.gradle</kbd> (<kbd>&lt;project&gt;/&lt;app-module&gt;/build.gradle</kbd>):</li>
</ol>
<pre style="padding-left: 60px"><span class="code-deemphasized">dependencies {</span>
  // Add this line
  <em>implementation 'com.google.firebase:firebase-core:16.0.1'</em> <span class="code-deemphasized">}</span>
<span class="code-deemphasized">...</span>
// Add to the bottom of the file<br/>apply plugin: 'com.google.gms.google-services'</pre>
<ol start="3">
<li>Click the <strong><span class="packt_screen">Sync Now</span></strong> option to complete this process. </li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Verifying the configuration</h1>
                </header>
            
            <article>
                
<p>Once the previous steps are complete, we have to verify whether your Flutter app is connected to Firebase. To ensure this, follow these steps:</p>
<ol>
<li>Build the project and run it on the device connected to your computer.</li>
<li>Once the app gets run on the phone, the Firebase console automatically detects the configurations and displays a success message as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-483 image-border" src="assets/964ea405-ea49-4315-9399-35ac557b61bd.png" style="width:29.50em;height:10.75em;"/></p>
<ol start="3">
<li>After you click <span class="packt_screen">Continue to console</span>, you will be taken to the console showing the project name and the other settings:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d330d3de-d403-4b32-ab77-32c097d27638.png" style="width:64.00em;height:32.92em;"/></p>
<p>In the next section, we will see how to connect to the Cloud Database. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a Cloud Firestore Database</h1>
                </header>
            
            <article>
                
<p>Once the Firebase-Flutter set up is complete, you are all set to build the app. We will now set up a Cloud Firestore database and initialize some values. Follow these steps:</p>
<ol>
<li>Under the <span class="packt_screen">Develop</span> option, click on <span class="packt_screen">Database.</span></li>
<li><span>In the panel shown, click</span><span> </span><span class="packt_screen">Create database:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><span><img src="assets/82461193-593c-406a-bb05-fb2bf5622ff1.png" style="width:21.42em;height:13.17em;"/></span></p>
<ol start="3">
<li>After clicking, you will see a pop-up panel: <span class="packt_screen">Security rules for Cloud Firestore</span>. Select <span class="packt_screen">Start in test mode</span> and enable it: </li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ead5da71-68cd-4755-9cfb-841c8a461650.png" style="width:40.33em;height:25.33em;"/></p>
<ol start="4">
<li>We select test mode because we want anyone with the database reference to be able to read or write to the database. When you build the production version of the app, ensure you set up security rules. You can read about these rules here: <a href="https://firebase.google.com/docs/reference/rules/rules">https://firebase.google.com/docs/reference/rules/rules</a>.  After clicking <span class="packt_screen">Enable</span>, the Cloud Firestore will be provisioned with security rules and will be ready for use. </li>
</ol>
<ol start="5">
<li>From the following panel, click <span class="packt_screen">Add collection</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-484 image-border" src="assets/6e7ad662-eb70-47ef-935d-4a59deaec5e3.png" style="width:20.75em;height:19.33em;"/></p>
<ol start="6">
<li class="CDPAlignLeft CDPAlign"><span>We presume that we would have just one collection in</span> Firestore,<span> called </span><span class="packt_screen">Votes</span><span>. A <strong>collection</strong> is a set of documents that comprise </span><span>the data:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-485 image-border" src="assets/0fd3ae41-6da4-4e00-b64b-3ba4e23acbec.png" style="width:32.92em;height:20.25em;"/></p>
<ol start="7">
<li>Click <span class="packt_screen">Next</span>.</li>
<li>A collection must contain at least one document, which is Cloud Firestore's unit of storage. You can either use an auto-generated ID or have a custom ID. In our case, we use <span class="packt_screen">partyvotes</span>.</li>
</ol>
<ol start="9">
<li class="CDPAlignLeft CDPAlign">For the existing <span class="packt_screen">F</span><span class="packt_screen">ield</span>, enter the value of the name (in our case, it's VoteCount), select the data <span class="packt_screen">Type</span>, then enter the <span class="packt_screen">Value</span> of <span><span class="packt_screen">partyvotes</span></span>. Since its an Integer, we select the number and set its initial value to be <span class="packt_screen">0</span>:  </li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/7cb97e95-da8c-4ecc-87d4-37ab0a25e859.png" style="width:35.83em;height:26.33em;"/></p>
<ol start="10">
<li><span>Click </span><span class="packt_screen">Save</span><span>. </span></li>
<li><span>After adding several documents to your collection, your database should look something like this:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><span><img src="assets/29a54618-ee2e-4166-ab11-315b67d494c2.png" style="width:43.67em;height:10.92em;"/></span></p>
<p>Firestore is a NoSQL database, which means that we would not be working with rows and columns. Now we will build the layout of the app. Using the Firestore details, we will construct the list layout, which will generate the list items runtime based on the values in the Firestore and read/update the fresh values when tapped on the list item into the Firestore database. The following is the <kbd>main.dart</kbd> file: </p>
<pre>import 'package:cloud_firestore/cloud_firestore.dart';<br/>import 'package:flutter/material.dart';<br/><br/>void main() =&gt; runApp(MyApp());<br/><br/>// Creating Object to temporary make the list items. We will replace it when we connect it to Firestore<br/><br/>final party = [<br/> {"partyname": "BJP", "rating": 1},<br/> {"partyname": "Congress", "rating": 3},<br/> {"partyname": "AAP", "rating": 5},<br/> {"partyname": "Janata Dal Party", "rating": 9},<br/> {"partyname": "NOTA", "rating": 11},<br/>];<br/><br/>class MyApp extends StatelessWidget {<br/> @override<br/> Widget build(BuildContext context) {<br/>   return MaterialApp(<br/>     title: 'State Party Elections - Worker Profile',<br/>     home: MyHomePage(),<br/>   );<br/> }<br/>}<br/><br/>class MyHomePage extends StatefulWidget {<br/> @override<br/> _MyHomePageState createState() {<br/>   return _MyHomePageState();<br/> }<br/>}<br/><br/>class _MyHomePageState extends State&lt;MyHomePage&gt; {<br/> @override<br/> Widget build(BuildContext context) {<br/>   return Scaffold(<br/>     appBar: AppBar(title: Text('Party Votes')),<br/>     body: _buildBody(context),<br/>   );<br/> }<br/><br/> Widget _buildBody(BuildContext context) {<br/>   // We will add the code here in the next section<br/>   return _buildList(context, party);<br/> }<br/><br/> Widget _buildList(BuildContext context, List&lt;Map&gt; snapshot) {<br/>   return ListView(<br/>     padding: const EdgeInsets.only(top: 22.0),<br/>     children: snapshot.map((data) =&gt; _buildListItem(context, data)).toList(),<br/>   );<br/> }<br/><br/> Widget _buildListItem(BuildContext context, Map data) {<br/>   final result = Record.fromMap(data);<br/><br/>// Adding the padding to ensure enough space is given<br/>   return Padding(<br/>     key: ValueKey(result.name),<br/>     padding: const EdgeInsets.symmetric(horizontal: 15.0, vertical: 7.0),<br/>     child: Container(<br/>       decoration: BoxDecoration(<br/>         border: Border.all(color: Colors.red),<br/>         borderRadius: BorderRadius.circular(6.0),<br/>       ),<br/>// Showing the list item, with name towards the left and the votes to the right<br/><br/>       child: ListTile(<br/>         title: Text(record.partyname),<br/>         trailing: Text(record.partyvotes.toString()),<br/>         onTap: () =&gt; print(record),<br/>       ),<br/>     ),<br/>   );<br/> }<br/>}<br/><br/>class Record {<br/> final String partyname;<br/> final int partyvotes;<br/> final DocumentReference reference;<br/><br/> Record.fromMap(Map&lt;String, dynamic&gt; map, {this.reference})<br/>     : assert(map['partyname'] != null),<br/>       assert(map['partyvotes'] != null),<br/>       name = map['partyname'],<br/>       votes = map['partyvotes'];<br/><br/> Record.fromSnapshot(DocumentSnapshot snapshot)<br/>     : this.fromMap(snapshot.data, reference: snapshot.reference);<br/><br/> @override<br/> String toString() =&gt; "Record&lt;$partyname:$partyvotes&gt;";<br/>}</pre>
<p class="mce-root">We have the collection ready on Firestore Cloud. In the previous example, we have used the <kbd>party</kbd><strong> </strong>object. It's time we now use the Firestore cloud data from our collection to be shown. We can do that by calling Cloud Firestore using a <kbd>Firestore.instance</kbd><strong> </strong>reference. For example, if you wish to call a specific collection from your Firestore Cloud database, you can use the following command to return a stream of snapshots:</p>
<pre>Firestore.instance.collection('collection_name').snapshots()</pre>
<p>Streams are of two types: single subscription or broadcast. Streams are responsible for providing an asynchronous sequence of data. User-generated events and data read from files are the two data sequences. Now, using <kbd>StreamBuilder</kbd> widget, we will inject the stream of data into the user interface we have created. One of the classic use cases of the <kbd>StreamBuilder</kbd> is that, whenever there is a change in the Firestore values, the list gets updated automatically. </p>
<p>Look for the <kbd>_buildBody</kbd> method in the previous code and replace the content with this code:</p>
<pre>Widget _buildBody(BuildContext context) {<br/> return StreamBuilder&lt;QuerySnapshot&gt;(<br/>   stream: Firestore.instance.collection('party').snapshots(),<br/>   builder: (context, snapshot) {<br/>     if (!snapshot.hasData) return LinearProgressIndicator();<br/>     return _buildList(context, snapshot.data.documents);<br/>   },<br/> );<br/>}</pre>
<p>Adding the preceding snippet will produce some errors. The <kbd>_buildListItem</kbd> method still thinks it's getting a map. Hence, we will need to make a couple of changes.</p>
<p>Firstly, make the method to accept <kbd>DocumentSnapshot</kbd> i<span>nstead of a list of a map:<strong><br/></strong></span></p>
<pre>Widget _buildList(BuildContext context, List&lt;DocumentSnapshot&gt; snapshot)<br/>{ .... <br/>}</pre>
<p>Secondly, use the constructor <kbd>Record.fromSnapshot()</kbd> to build the record. The method's updated code as follows:</p>
<pre>Widget _buildListItem(BuildContext context, DocumentSnapshot data) {<br/> final result = Record.fromSnapshot(data);</pre>
<p>Next, use the <kbd>onTap: ()</kbd> method to ensure whenever a list item is clicked, the votes are updated into the Firestore database. Whenever you click <span class="packt_screen">List Item</span>, Cloud Firestore notifies all listeners with the updated snapshot. The app is actively engaged using <kbd>StreamBuilder</kbd>, which acts to update with the new data. For a single user, it is fine, but when you have multiple users, there is a chance of <strong>Race Condition</strong> may occur. </p>
<p>The complete code for <kbd>main.dart</kbd> is as follows: </p>
<pre>import 'package:cloud_firestore/cloud_firestore.dart';<br/>import 'package:flutter/material.dart';<br/><br/>void main() =&gt; runApp(MyApp());<br/><br/>class MyApp extends StatelessWidget {<br/> @override<br/> Widget build(BuildContext context) {<br/>   return MaterialApp(<br/>     title: 'State Party Elections - Worker Profile',<br/>     home: MyHomePage(),<br/>   );<br/> }<br/>}<br/><br/>class MyHomePage extends StatefulWidget {<br/> @override<br/> _MyHomePageState createState() {<br/>   return _MyHomePageState();<br/> }<br/>}<br/><br/>class _MyHomePageState extends State&lt;MyHomePage&gt; {<br/> @override<br/> Widget build(BuildContext context) {<br/>   return Scaffold(<br/>     appBar: AppBar(title: Text('Party Votes')),<br/>     body: _buildBody(context),<br/>   );<br/> }<br/><br/> Widget _buildBody(BuildContext context) {<br/>   return StreamBuilder&lt;QuerySnapshot&gt;(<br/>     stream: Firestore.instance.collection('party').snapshots(),<br/>     builder: (context, snapshot) {<br/>       if (!snapshot.hasData) return LinearProgressIndicator();<br/><br/>       return _buildList(context, snapshot.data.documents);<br/>     },<br/>   );<br/> }<br/><br/> Widget _buildList(BuildContext context, List&lt;DocumentSnapshot&gt; snapshot) {<br/>   return ListView(<br/>     padding: const EdgeInsets.only(top: 22.0),<br/>     children: snapshot.map((data) =&gt; _buildListItem(context, data)).toList(),<br/>   );<br/> }<br/><br/> Widget _buildListItem(BuildContext context, DocumentSnapshot data) {<br/>   final result = Record.fromSnapshot(data);<br/><br/>   return Padding(<br/>     key: ValueKey(result.name),<br/>     padding: const EdgeInsets.symmetric(horizontal: 15.0, vertical: <br/>     7.0),<br/>     child: Container(<br/>       decoration: BoxDecoration(<br/>         border: Border.all(color: Colors.red),<br/>         borderRadius: BorderRadius.circular(6.0),<br/>       ),<br/>       child: ListTile(<br/>         title: Text(record.name),<br/>         trailing: Text(record.votes.toString()),<br/>         onTap: () =&gt; Firestore.instance.runTransaction((transaction) <br/>         async {<br/>           final freshFBsnapshot = await <br/>             transaction.get(record.reference);<br/>            final updated = Record.fromSnapshot(freshFBsnapshot);<br/><br/>               await transaction<br/>                   .update(record.reference, {'partyvotes': <br/>            updated.votes + 1});<br/>             }),<br/>       ),<br/>     ),<br/>   );<br/> }<br/>}<br/><br/>class Record {<br/> final String partyname;<br/> final int partyvotes;<br/> final DocumentReference reference;<br/><br/> Record.fromMap(Map&lt;String, dynamic&gt; map, {this.reference})<br/>     : assert(map['partyname'] != null),<br/>       assert(map['partyvotes'] != null),<br/>       name = map['partyname'],<br/>       votes = map['partyvotes'];<br/><br/> Record.fromSnapshot(DocumentSnapshot snapshot)<br/>     : this.fromMap(snapshot.data, reference: snapshot.reference);<br/><br/> @override<br/> String toString() =&gt; "Record&lt;$partyname:$partyvotes&gt;";<br/>}</pre>
<p>Once you run the code, try clicking on List Items and you will see the updates values mapped on the Firestore Cloud database. You could also try updating the List Item names (in our case, the Party names) in the Firestore Cloud database, and you will see the List Item option updating. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Firebase Cloud Messaging</h1>
                </header>
            
            <article>
                
<p><strong>Firebase Cloud Messaging</strong> (<strong>FCM</strong>) is an effective way to drive engagement within the app using the app notification.  Using FCM, you can send two kinds of messages to the client device:</p>
<ol>
<li>Notification messages that are directly handled by FCM SDK </li>
<li>Data messages </li>
</ol>
<p>Both these messages have a maximum payload of 4KB. When sending messages from the Firebase console, there is a 1,024 character limit. Firebase has Cloud Messaging as well as In-App messaging, but in this section, we will discuss only Firebase Cloud messaging. </p>
<p>In the Firebase console, click on <strong><span class="packt_screen">Grow | Cloud Messaging</span></strong> in the left panel. Follow this by clicking <span class="packt_screen">Send your first message</span><strong>.</strong> as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-486 image-border" src="assets/564de0dc-d7cb-4179-9abb-037698ad19ea.png" style="width:33.83em;height:18.83em;"/></p>
<p>To test the message on your device, FCM tokens are needed. Use the following Android code to generate these tokens:</p>
<pre>FirebaseInstanceId.getInstance().getInstanceId()<br/>        .addOnCompleteListener(new OnCompleteListener&lt;InstanceIdResult&gt;<br/>         () {<br/>            @Override<br/>            public void onComplete(@NonNull Task&lt;InstanceIdResult&gt; <br/>            actionable) {<br/>                if (!actionable.isSuccessful()) {<br/>                    Log.w(TAG, "getInstanceId failed", <br/>                    actionable.getException());<br/>                    return;<br/>                }<br/><br/>                // Get new Instance ID token<br/>                String tokenID = actionable.getResult().getToken();<br/><br/>                // Log and toast<br/>                String message = getString(R.string.msg_token_fmt, <br/>                tokenID);<br/>                Log.d(TAG, message);<br/>                Toast.makeText(MainActivity.this, message, <br/>               Toast.LENGTH_SHORT).show();<br/>            }<br/>        });</pre>
<p>FCM also allows configuring messages specific to targets such as <kbd>GeoLocations</kbd>, versions of the app, Languages, and User Audiences. This case is ideal when you wish to send notifications to a specific set of users. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Firebase Remote Config</h1>
                </header>
            
            <article>
                
<p>Using Firebase's Remote Config API, you can make changes to the app without the user actually downloading an app update. One example of this is when you push a new update to the app in production, you can show the pop-up message to the user when they launch the app about the update. </p>
<p>To set up Firebase Remote Config, head over to the <span class="packt_screen">Grow</span> tab in the Firebase console and click on <span class="packt_screen">Remote Config</span> as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-487 image-border" src="assets/1e9edec7-62aa-44a4-a151-fc3015d5d364.png" style="width:36.75em;height:17.67em;"/></p>
<p>Add the <span class="packt_screen">Parameter</span> <span class="packt_screen">key</span> and the <span class="packt_screen">Default value</span>. There is an optional field for adding the description. Click <span class="packt_screen">Add Parameter</span> to proceed. Avoid storing any confidential information in the remote config. Firebase also allows the setting of conditions for the parameter. For example, if you want to show a specific welcome message to a user in India and a different message to a user in the USA, remote configuration can come in handy. </p>
<div class="packt_infobox"><span>Disclaimer: Some of the code files are </span><span>are licensed under the </span><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2.0 License</a><span> and are available on </span><a href="https://firebase.google.com/docs/cloud-messaging/android/client">https://firebase.google.com/docs/cloud-messaging/android/client</a>.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>We started this chapter by looking at how Firebase can help us build apps quicker using the Firestore Cloud database—the NoSQL way to help app developers build apps in real-time. We also looked at an example that captured <kbd>ListView</kbd> with the Firestore Cloud database. This section was followed by looking at how Cloud messaging works. In the last section, we discussed some use cases for using Firebase Remote Config for your apps. </p>
<p>In the next chapter, we will take a look at how to deploy your Flutter applications.</p>


            </article>

            
        </section>
    </body></html>