<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Using Storyboards</h1></div></div></div><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Configuring storyboards for a project</li><li class="listitem" style="list-style-type: disc">Creating a Twitter application</li><li class="listitem" style="list-style-type: disc">Creating storyboard scenes</li><li class="listitem" style="list-style-type: disc">Configuring storyboard scenes</li><li class="listitem" style="list-style-type: disc">Applying transitions to storyboards</li><li class="listitem" style="list-style-type: disc">Configuring a tweet</li><li class="listitem" style="list-style-type: disc">Adding photos to a tweet</li><li class="listitem" style="list-style-type: disc">Preparing transition to another view controller</li><li class="listitem" style="list-style-type: disc">Presenting storyboard view controllers programmatically</li></ul></div><div><div><div><div><h1 class="title"><a id="ch03lvl1sec33"/>Introduction</h1></div></div></div><p>Starting with the release of Xcode 4.2 and iOS 5, developers and designers now have the ability to lay out the workflow of their applications using the new storyboards feature that has been incorporated as part of the XIB editor in Xcode.</p><p>Instead of creating numerous interface files, you can now start dragging and editing all your views in one place with the ability to specify transitions between screens and the associated actions that trigger them.</p><p>In this chapter, we will be gaining an understanding of what storyboards actually are, and how they require iOS 5 or later, as well as familiarizing ourselves with the new workflow that has been implemented within the XIB editor within Xcode.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec34"/>Configuring storyboards for a project</h1></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec109"/>Getting ready</h2></div></div></div><p>In this recipe, we will learn how to <a id="id222" class="indexterm"/>
<a id="id223" class="indexterm"/>configure an application's project properties using Xcode so that it is set up correctly to use a storyboard file.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec110"/>How to do it...</h2></div></div></div><p>To begin, perform the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select your project from the project navigator window.</li><li class="listitem">Then, select your project target from under the <strong>TARGETS</strong> group and select the <strong>Summary</strong> tab.<div><img src="img/3349_03_01.jpg" alt="How to do it..."/></div></li><li class="listitem">Select <strong>MainStoryboard</strong> from the <strong>Main Storyboard</strong> drop-down menu, as shown in the preceding screenshot.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec111"/>How it works...</h2></div></div></div><p>In this recipe, we gained an understanding of what storyboards are, as well as how they differ from user interfaces created in the past, whereby a new view would need to be created for each XIB file for your application.</p><p>Whether you are creating applications for the iPad or iPhone, each view controller that gets created within your storyboard represents the contents of a single screen, comprised of the contents of more than one scene.</p><p>Each object contained within a view controller can be linked to another view controller that implements another scene.</p><p>In our final steps, we looked at how to configure our project properties so that it is set up to use the storyboard user interface file by our application.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec112"/>There's more…</h2></div></div></div><p>You can also choose to manually add <a id="id224" class="indexterm"/>
<a id="id225" class="indexterm"/>new <strong>Storyboard</strong> template to your project. This can be achieved by performing the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select your project from the project navigator window.</li><li class="listitem">Select <strong>File</strong> | <strong>New</strong> | <strong>File…</strong> or press <em>command</em> + <em>N</em>.</li><li class="listitem">Select the <strong>Storyboard</strong> template from the list of available templates, located under the <strong>User Interface</strong> subsection within the <strong>iOS</strong> section.<div><img src="img/3349_03_02.jpg" alt="There's more…"/></div></li><li class="listitem">Click on the <strong>Next</strong> button to proceed to the next step in the wizard.</li><li class="listitem">Ensure that you have selected <strong>iPhone</strong> from under the <strong>Device Family</strong> drop-down menu.</li><li class="listitem">Click on the <strong>Next</strong> button to proceed to the next step in the wizard.</li><li class="listitem">Specify the name of the storyboard file within the <strong>Save As</strong> field as the name of the file to be created.</li><li class="listitem">Click on the <strong>Create</strong> button to save <a id="id226" class="indexterm"/><a id="id227" class="indexterm"/>the file to the specified folder.</li><li class="listitem">Finally, when we create our project using storyboards, we will need to modify our application's delegate <code class="literal">AppDelegate.m</code> file, as shown in the following code snippet:<div><pre class="programlisting">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after 
// application launch.
return YES;
}</pre></div><div><div><h3 class="title"><a id="note16"/>Note</h3><p>For more information about using storyboards in your applications, you can refer to the Apple Developer <a id="id228" class="indexterm"/>documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/InterfaceBuilder/InterfaceBuilder">https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/InterfaceBuilder/InterfaceBuilder</a>.</p></div></div></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec113"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Creating a Twitter application</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Creating storyboard scenes</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Adding and customizing views</em> recipe in <a class="link" href="ch02.html" title="Chapter 2. User Interfaces – Creating the UI">Chapter 2</a>, <em>User Interfaces – Creating the UI</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec35"/>Creating a Twitter application</h1></div></div></div><p>In this recipe, we will learn how to <a id="id229" class="indexterm"/>create a single view application to build our Twitter application.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec114"/>Getting ready</h2></div></div></div><p>In this recipe, we will start by creating our <strong>TwitterExample</strong> project.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec115"/>How to do it...</h2></div></div></div><p>To begin with creating a <a id="id230" class="indexterm"/>new Xcode project, perform the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Launch <strong>Xcode</strong> from the <code class="literal">/Developer/Applications</code> folder.</li><li class="listitem">Select <strong>Create a new Xcode project</strong>, or click on <strong>File</strong> | <strong>New</strong> | <strong>Project…</strong>.</li><li class="listitem">Select <strong>Single View Application</strong> from the list of available templates.</li><li class="listitem">Click on the <strong>Next</strong> button to proceed to the next step in the wizard.</li><li class="listitem">Next, enter in <code class="literal">TwitterExample</code> as the name of your project.</li><li class="listitem">Select <strong>iPhone</strong> from under the <strong>Devices</strong> drop-down menu.</li><li class="listitem">Ensure that the <strong>Use Storyboards</strong> checkbox has been checked.</li><li class="listitem">Ensure that the <strong>Use Automatic Reference Counting</strong> checkbox has been checked.</li><li class="listitem">Ensure that the <strong>Include Unit Tests</strong> checkbox has not been checked.</li><li class="listitem">Click on the <strong>Next</strong> button to proceed to the next step in the wizard.</li><li class="listitem">Specify the location where you would like to save your project.</li><li class="listitem">Then, click on the <strong>Create</strong> button to save your project at the specified location.<div><div><h3 class="title"><a id="note17"/>Note</h3><p>The Company Identifier for your app needs to be unique. Apple recommends that you use the reverse domain style (for example, <code class="literal">com.domainName.appName</code>).</p></div></div></li></ol></div><p>Once your project has been created, you will be presented with the Xcode development environment, along with the project files that the template created for you.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec116"/>How it works...</h2></div></div></div><p>In this recipe, we just created an application that contains a storyboard and consists of one view controller, which does not provide any functionality at the moment. In the following recipes, we will look at how we can add functionality to view controllers, create storyboard scenes, and transition between them.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec117"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Creating storyboard scenes</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Configuring storyboard scenes</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Applying transitions to storyboards</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Preparing transition to another view controller</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec36"/>Creating storyboard scenes</h1></div></div></div><p>The process of creating scenes involves adding a new view controller to the storyboard, where each view controller is responsible for managing a single scene. A better way to describe scenes would be to think of a movie reel, where each frame that is being displayed is the actual scene that connects onto the next part.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec118"/>Getting ready</h2></div></div></div><p>When adding scenes to your storyboard file, you can add controls and views to the view controller's view, just as you would do for an XIB file, and have the ability to configure outlets and actions between your view controllers and its views.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec119"/>How to do it...</h2></div></div></div><p>To add a new scene into your <a id="id231" class="indexterm"/>
<a id="id232" class="indexterm"/>storyboard file, perform the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">From the project navigator, select the file named <code class="literal">MainStoryboard.storyboard</code>.</li><li class="listitem">From <strong>Object Library</strong>, select and drag a new <strong>View Controller</strong> object on to the storyboard canvas. This is shown in the following screenshot:<div><img src="img/3349_03_03.jpg" alt="How to do it..."/></div></li><li class="listitem">Next, drag a <strong>Label</strong> control on to the view and change the label's text property to read <strong>About Twitter App</strong>.</li><li class="listitem">Next, drag a <strong>Round Rect Button</strong> control on to the view that we will use in a later section to call the calling view. In the button's attributes, change the text to read <strong>Go Back</strong>.</li><li class="listitem">Next, on the first view controller, <a id="id233" class="indexterm"/><a id="id234" class="indexterm"/>drag a <strong>Round Rect Button</strong> control on to the view. In the button's attributes, change the text to read <strong>About Twitter App</strong>. This will be used to call the new view that we added in the previous step.</li><li class="listitem">Next, on the first view controller, drag a <strong>Round Rect Button</strong> control on to the view, underneath the <strong>About Twitter App</strong> button that we created in the previous step. In the button's attributes, change the text to read <strong>Compose Tweet</strong>.</li><li class="listitem">Next, save your project by selecting <strong>File</strong> | <strong>Save</strong> from the menu bar, or alternatively by pressing <em>command</em> + <em>S</em>.</li></ol></div><p>Once you have added the controls to each of the view, your final interface should look something like what is shown in the following screenshot:</p><div><img src="img/3349_03_04.jpg" alt="How to do it..."/></div><div><div><h3 class="title"><a id="note18"/>Note</h3><p>If you would like to refresh your memory on how to create actions, these were discussed in the <em>Creating actions that respond to user actions</em> recipe in <a class="link" href="ch01.html" title="Chapter 1. Getting and Installing the iOS SDK Development Tools">Chapter 1</a>, <em>Getting and Installing the iOS SDK Development Tools</em>.</p></div></div><p>The next step is to create the <code class="literal">Action</code> event for our <strong>Compose Tweet</strong> button so that it has the ability to post tweets. To create an action, perform the following steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the assistant editor by <a id="id235" class="indexterm"/><a id="id236" class="indexterm"/>selecting <strong>Navigate</strong> | <strong>Open In Assistant Editor</strong> or by pressing <em>option</em> + <em>command</em> + <em>,</em>.</li><li class="listitem">Ensure that the <code class="literal">ViewController.h</code> interface file gets displayed.</li><li class="listitem">Select the <strong>Compose Tweet</strong> button; hold down the <em>control</em> key, and drag it from the <strong>Compose Tweet</strong> button to the <code class="literal">ViewController.h</code> interface file between the <code class="literal">@interface</code> and <code class="literal">@end</code> tags.</li><li class="listitem">Choose <strong>Action</strong> from the <strong>Connection</strong> drop-down menu for the connection to be created.</li><li class="listitem">Enter <code class="literal">composeTweet</code> for the name of the method to create.</li><li class="listitem">Choose <strong>UIButton</strong> from the <strong>Type</strong> drop-down menu for the type of method to create.<div><img src="img/3349_03_05.jpg" alt="How to do it..."/></div></li></ol></div><p>The highlighted line in the <a id="id237" class="indexterm"/>
<a id="id238" class="indexterm"/>following code snippet shows the completed <code class="literal">ViewController.h</code> interface file, with our method that will be responsible for calling and displaying our tweet sheet.</p><div><pre class="programlisting">//  ViewController.h
//  TwitterExample
//
//  Created by Steven F Daniel on 21/09/12.
//  Copyright (c) 2012 GenieSoft Studios. All rights reserved.

#import &lt;UIKit/UIKit.h&gt;

@interface ViewController : UIViewController

// Create the action methods
<strong>- (IBAction)composeTweet:(UIButton *)sender;</strong>

@end</pre></div><p>Now that we have created our scene, buttons, and actions, our next step is to configure the scene, which is shown in the next recipe.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec120"/>How it works...</h2></div></div></div><p>In this recipe, we looked at how we can add a new view controller to our storyboard and then started to add controls to each of our view controllers and customize their properties.</p><p>Next, we looked at how we can create an <code class="literal">Action</code> event for our <strong>Compose Tweet</strong> button that will be responsible for responding and executing the associated code behind it to display our tweet sheet.</p><p>Instead of us hooking up an event handler to the <code class="literal">TouchUpInside</code> event of the button, we decided to simply add an action to it and handle the output of this ourselves. These types of actions are called "instance methods". <a id="id239" class="indexterm"/>
<a id="id240" class="indexterm"/>Here we are basically creating the <code class="literal">Action</code> method that will be responsible for allowing the user to compose and send a Twitter message.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec121"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Configuring storyboard scenes</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Applying transitions to storyboards</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Preparing transition to another view controller</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Creating outlets to Interface Builder objects</em> recipe in <a class="link" href="ch01.html" title="Chapter 1. Getting and Installing the iOS SDK Development Tools">Chapter 1</a>, <em>Getting and Installing the iOS SDK Development Tools</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec37"/>Configuring storyboard scenes</h1></div></div></div><p>When you want to transition from <a id="id241" class="indexterm"/>
<a id="id242" class="indexterm"/>one view controller to another, you can hold down the <em>control</em> key and click a button, table view cell, or any other object from one view controller, and then drag it to the new view controller for a different scene. This technique of dragging between view controllers creates, what is known as a segue.</p><p>A <strong>segue</strong> is a configurable object that supports all of the same types of transitions made available to you within the <code class="literal">UIKit</code> class reference, such as modal transitions and navigation transitions.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec122"/>Getting ready</h2></div></div></div><p>You also have the ability to define custom transitions that replace one view controller with another.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec123"/>How to do it…</h2></div></div></div><p>In order to see how this can be achieved, we need to modify our <strong>TwitterExample</strong> application that we created in a previous recipe. Perform the following steps to do so:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <strong>About Twitter App</strong> (<code class="literal">Round Rect Button</code>) control, and then hold down the <em>control</em> key while dragging it to the view controller containing the <strong>Go Back</strong> button.</li><li class="listitem">Release the mouse button, and then choose the <strong>modal</strong> option from the <strong>Action Segue</strong> pop-up menu.<div><img src="img/3349_03_06.jpg" alt="How to do it…"/></div><p>You will notice that a gray arrow connects both of your view controllers. When the <strong>About Twitter App</strong> button is pressed, it will display the page containing the <strong>Go Back</strong> button.</p></li><li class="listitem">Next, we need to do the same <a id="id243" class="indexterm"/><a id="id244" class="indexterm"/>for our second view, so that when the <strong>Go Back</strong> button is pressed, it will return back to our first view.</li><li class="listitem">Repeat steps 1 to 2, but substitute the <strong>Go Back</strong> button for the <strong>About Twitter App</strong> button.</li></ol></div><p>Explanations of the storyboard segues that come part of Xcode 4 are included in the following table:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Segue name</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>modal</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>A <strong>modal</strong> view controller is not a specific subclass of the <code class="literal">UIViewController</code> class, as any type of view controller can be presented modally by your application. However, like the tab bar and navigation view controllers, you can present your view controllers modally when you want to convey a specific meaning about the relationship between the previous view hierarchy and the newly presented view hierarchy.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>push</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>The <strong>push</strong> segues allow you to push a new view controller onto the navigation stack, just as if you were stacking plates. The view at the top of the stack being the one that gets rendered.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>custom</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>These allow you to customize and call a view controller from code using the <code class="literal">prepareForSegue</code> method, and are what you use to present the content of your application.</p>
<p>The job of the view controller is to manage the presentation of some content and coordinate the update and the synchronization of that content with the application's underlying data objects.</p>
<p>In the case of a <strong>custom</strong> view controller, this involves creating a view to present the content and implementing the infrastructure needed to synchronize the contents of that view with your application's data structures.</p>
</td></tr></tbody></table></div><p>Once you have done this, your view <a id="id245" class="indexterm"/>
<a id="id246" class="indexterm"/>controllers should look like something shown in the following screenshot. You can apply a number of transitions to each of your view controllers, so that they can perform animation when they get displayed to the view.</p><div><img src="img/3349_03_07.jpg" alt="How to do it…"/></div><p>To learn how to apply transitions to your view controller, please refer to the <em>Applying transitions to storyboards</em> recipe on Transitions in this chapter.</p><p>Now that you have applied each of the segues to both view controllers, our final step is to compile, build, and run our application.</p><p>From the <strong>Product</strong> menu, select <strong>Run</strong>. <a id="id247" class="indexterm"/>
<a id="id248" class="indexterm"/>Alternatively, you can press the <em>command</em> + <em>R</em> keys to compile, build, and run the application.</p><p>The following screenshot shows our application running within the iOS Simulator, with each of their associated screens displayed:</p><div><img src="img/3349_03_08.jpg" alt="How to do it…"/></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec124"/>How it works...</h2></div></div></div><p>So there you have it. In this recipe, we have learned how to create and add new scenes into our main storyboard, as <a id="id249" class="indexterm"/>
<a id="id250" class="indexterm"/>well as the process on how we are able to link these up and configure each scene when a button has been pressed through the use of segues.</p><p>There is also another way in which we can transition to scenes within our storyboard through a programmatic approach. We will be taking a closer look into this, when we embark on the <em>Presenting storyboard view controllers programmatically</em> recipe in this chapter.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec125"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Applying transitions to storyboards</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Preparing transition to another view controller</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec38"/>Applying transitions to storyboards</h1></div></div></div><p>In this recipe, we will look at <a id="id251" class="indexterm"/>
<a id="id252" class="indexterm"/>how we can apply transition animations to views as well as each of the available transitions that come with storyboards.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec126"/>Getting ready</h2></div></div></div><p>You may have seen such transitions in applications, such as the photos app that comes as part of the iPhone and iPad, where you can apply a transition and start a slideshow.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec127"/>How to do it…</h2></div></div></div><p>In order to configure a segue to specify a kind of transition to use between the different scenes, perform the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Click on the segue link for the first view controller as indicated by the large circle in the following screenshot.</li><li class="listitem">Click on <strong>Attributes Inspector</strong> and then click on the <strong>Transitions</strong> drop-down menu.<div><img src="img/3349_03_09.jpg" alt="How to do it…"/></div></li></ol></div><p>You have the ability to choose from the <a id="id253" class="indexterm"/>
<a id="id254" class="indexterm"/>various transition types that are only applicable to the <strong>Modal</strong> style; these are explained within the following table:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Transition name</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<strong>Default</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>When this transition is selected, it uses the <strong>Cover Vertical</strong> transition style. </p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Cover Vertical</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>When the view controller is presented, its view slides up from the bottom of the screen. When the view is dismissed, it slides back down. </p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Flip Horizontal</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>When the view controller is presented, the current view initiates a horizontal 3D flip from right to left-hand side, resulting in the revealing of the new view as if it were on the back of the previous view. When this view is dismissed, the flip occurs from left to right-hand side, returning to the original view.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Cross Dissolve</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>When the view controller is presented, the current view fades out while the new view fades in at the same time. When the view is dismissed, a similar type of cross-fade is used to return to the original view.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<strong>Partial Curl</strong>
</p>
</td><td style="text-align: left" valign="top">
<p>When the view controller is presented, one corner of the current view curls up to reveal the modal view underneath. When the view is dismissed, the curled up page uncurls itself back on top of the modal view. A modal view presented using this transition is itself prevented from presenting any additional modal views.</p>
<p>This transition style is <a id="id255" class="indexterm"/>
<a id="id256" class="indexterm"/>supported only if the parent view controller is presenting a full-screen view and you use the <code class="literal">UIModalPresentationFullScreen</code> modal presentation style. Attempting to use a different form factor for the parent view or a different presentation style triggers an exception.</p>
</td></tr></tbody></table></div><p>These transitions come as part of the <code class="literal">UIViewController</code> class that inherits from the <code class="literal">UIKit</code> framework. The <code class="literal">UIViewController</code> class provides the underlying fundamental view-management model for all of your iOS apps.</p><div><div><h3 class="title"><a id="note19"/>Note</h3><p>For more information on the preceding transition types, refer to the <code class="literal">UIViewController</code> framework reference in the <a id="id257" class="indexterm"/>Apple Developer documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html">https://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html</a>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec128"/>How it works...</h2></div></div></div><p>Xcode provides the option of changing the visual appearance of the transition as it takes place from one scene to another within a storyboard. These are commonly referred to as segues.</p><p>Using transitions enables you to apply a variety of different styles to each of your view controllers that are to be rendered and displayed to the view, and are represented by arrows between each of the view controllers. By default, a <strong>Cover Vertical</strong> transition is performed whereby the new scene slides vertically upwards from the bottom of the view to cover the currently displayed scene.</p><p>You have the ability to define custom transitions that enable you to provide a custom segue class method to handle the transition. This can be achieved by selecting <strong>custom</strong> for the style of a segue, and fill in the name of the custom segue class to use. If you want to use any of the standard segue classes, you can find these located within the <code class="literal">UIKit</code> class.</p><div><div><h3 class="title"><a id="note20"/>Note</h3><p>For information on the standard segue classes, you can refer to the <code class="literal">UIKitframework</code> reference in the Apple Developer documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/_index.html">https://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/_index.html</a>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec129"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Preparing transition to another view controller</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec39"/>Composing a tweet</h1></div></div></div><p>In this recipe, we will look at how we can use the Twitter APIs for iOS 5 and interact with them effectively.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec130"/>Getting ready</h2></div></div></div><p>Twitter has provided us with some <a id="id258" class="indexterm"/>very simple APIs to follow, making it a snap to interact with them. In this recipe, we will look at how we can use these to post a tweet using the Twitter composition sheet.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec131"/>How to do it…</h2></div></div></div><p>In order to use Twitter within your application, we need to add the Twitter framework to your project. This can be achieved by performing the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select your project from within the project navigator.</li><li class="listitem">Then, select your project target from under the <strong>TARGETS</strong> group.</li><li class="listitem">Select the <strong>Build Phases</strong> tab.</li><li class="listitem">Expand the <strong>Link Binary with Libraries</strong> disclosure triangle. Click on the <strong>+</strong> button and select <strong>Twitter.framework</strong> from the list.</li><li class="listitem">Finally, click on the <strong>Add</strong> button to add the framework to your project.</li></ol></div><p>Our next step is to create the code functionality that will be responsible for posting our tweet to Twitter:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">ViewController.m</code> implementation file from the project navigator.</li><li class="listitem">Type in the following <code class="literal">import</code> statements:<div><pre class="programlisting">
<strong>#import &lt;Twitter/Twitter.h&gt;</strong>
</pre></div></li><li class="listitem">Next, modify the <code class="literal">composeTweet</code> method, as shown in the following code snippet:<div><pre class="programlisting">- (IBAction)composeTweet:(id)sender {
    
  TWTweetComposeViewController *myTwitter = 
[[TWTweetComposeViewController alloc] init];
  
BOOL isSUCCESS = TWTweetComposeViewController.canSendTweet;
  if (isSUCCESS == YES)
  {
    [myTwitter setInitialText:@"Welcome to Twitter API."];
    [self presentModalViewController:myTwitter 
animated:YES];
      
    // Retrieve the result of the Twitter handler to 
      // determine if the message was successfully sent.
    myTwitter.completionHandler = 
^(TWTweetComposeViewControllerResult res)
      {
    if (res == TWTweetComposeViewControllerResultDone) 
{
      UIAlertView *alertView = [[UIAlertView alloc] 
initWithTitle:@"Success" message:@"Your tweet was 
posted successfully." delegate:self 
cancelButtonTitle:@"OK" otherButtonTitles:nil];
      [alertView show];
      [self dismissModalViewControllerAnimated:YES];
    }
    else if (res == 
TWTweetComposeViewControllerResultCancelled) {
        UIAlertView *alertView = [[UIAlertView alloc] 
initWithTitle:@"Error" message:@"Tweet not 
posted." delegate:self cancelButtonTitle:@"OK" 
otherButtonTitles:nil];
        [alertView show];
      [self dismissModalViewControllerAnimated:YES];
      }
    };
  }
}</pre></div></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec132"/>How it works...</h2></div></div></div><p>Starting with iOS 5, whenever you want to compose a Twitter message for submission, you will need to use the <a id="id259" class="indexterm"/>
<code class="literal">TWTweetComposeViewController</code> class instance. The <code class="literal">TWTweetComposeViewController</code> class handles everything, and presents us with a tweet composition sheet, so that we can begin to type in our tweet.</p><p>The <code class="literal">TWTweetComposeViewController</code> <a id="id260" class="indexterm"/>class also enables you to set the initial Twitter text information to use, including how to go about adding images and URLs. Next, we declared a <code class="literal">myTwitter</code> <a id="id261" class="indexterm"/>variable to point to an instance of our <code class="literal">TWTweetComposeViewController</code> <a id="id262" class="indexterm"/>class.</p><p>We then used the <code class="literal">canSendTweet</code> class <a id="id263" class="indexterm"/>method of the <code class="literal">TWTweetComposeViewController</code> class to check to see if the user has correctly installed and set up Twitter. If this has <a id="id264" class="indexterm"/>not been done, this statement will fail, and a value of <code class="literal">NO</code> (or <code class="literal">FALSE</code>) will be returned to the <code class="literal">isSuccess</code> variable.</p><p>Next, we assigned some text to appear on our composition sheet, by setting the <code class="literal">setInitialText</code> method, and then displayed this to the view. Finally, we set up a handler, using the <code class="literal">completionHandler</code> method to notify us when the user has completed composing the tweet and display the relevant alert message based on the outcome returned by the method.</p><div><div><h3 class="title"><a id="note21"/>Note</h3><p>For more information on the <code class="literal">TWTweetComposeViewController</code> class, you can refer to the Twitter framework reference documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html">https://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html</a>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec133"/>There's more…</h2></div></div></div><p>With the release of iOS 6, integration of social networks is performed through the use of the <code class="literal">UIActivityViewController</code> class, or the classes that are contained with the new social framework of the iOS 6 SDK. For general-purpose social networking integration, the <code class="literal">UIActivityViewController</code> class is the recommended path.</p><p>When using this class, the user is presented with a screen providing a choice of social network services. Once the application has selected a target service, the class then presents the user with a blank message preview panel where the message can be reviewed and then posted.</p><p>Next, we will take a look at both the <code class="literal">UIActivityViewController</code> and <code class="literal">SLComposeViewController</code> classes to see each of their differences.</p><div><div><div><div><h3 class="title"><a id="ch03lvl3sec06"/>Using the UIActivityViewController class</h3></div></div></div><p>The <code class="literal">UIActivityViewController</code> <a id="id265" class="indexterm"/>class is instantiated from within an application at the point when posting is ready to be made to a social network. The following code snippet shows how to use the <code class="literal">UIActivityViewController</code> class to handle posts to Twitter:</p><div><pre class="programlisting">NSString *postText = @"My first Twitter Post from iOS 6";
NSArray *activityItems = @[postText];

UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];

[self presentViewController:activityController animated:YES completion:nil];</pre></div><p>The preceding code snippet instantiates a new <code class="literal">UIActivityViewController</code> instance, and passes the text to be included within the dialog box when it is presented to the user. There is an option to include an image with the post, which we will be taking a look at a bit later.</p><p>Once the user decides to take an action to post an update from within an application, the following screen is displayed:</p><div><img src="img/3349_03_10.jpg" alt="Using the UIActivityViewController class"/></div><p>Once a destination social network has been selected from the list of choices, a preview sheet will be displayed. In the event that the user has not yet configured an account for the selected social network in the <strong>Settings</strong> <a id="id266" class="indexterm"/>application, a dialog box will appear providing the user to either set up an account or simply cancel the posting.</p><div><div><h3 class="title"><a id="note22"/>Note</h3><p>For more information on the <code class="literal">UIActivityViewController</code> class, you can refer to the Apple Developer reference <a id="id267" class="indexterm"/>documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html">https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html</a>.</p></div></div></div><div><div><div><div><h3 class="title"><a id="ch03lvl3sec07"/>Using the SLComposeViewController class</h3></div></div></div><p>In order to use the <code class="literal">SLComposeViewController</code> class, a number of steps are required to be performed. First, we <a id="id268" class="indexterm"/>need to verify whether the message can be sent to the specific social network service to ensure that the device has been properly configured to use the particular service.</p><p>This is achieved by passing through the type of service as an argument to the <code class="literal">isAvailableForserviceType</code> method, as shown in the following code snippet:</p><div><pre class="programlisting">if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
      // Device has been set up to use Twitter
}</pre></div><p>The <code class="literal">isAvailableForServiceType</code> method accepts the following parameters:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">SLServiceTypeFacebook</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">SLServiceTypeTwitter</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">SLServiceTypeSinaWeibo</code></li></ul></div><p>The next step is to create an instance of the <code class="literal">SLComposeViewController</code> class and supply an optional completion handler to be called when the compose sheet is either cancelled by the user or used to <a id="id269" class="indexterm"/>send a message. Finally, when the message is ready to be presented to the user, the <code class="literal">SLComposeViewController</code> object is presented modally by calling the <code class="literal">presentViewController</code> method of the parent view controller.</p><p>The following code snippet shows how to configure and present the <code class="literal">SLComposeViewController</code> class instance for posting to Twitter:</p><div><pre class="programlisting">SLComposeViewController *composeController = [SLComposeViewController
composeViewControllerForServiceType:SLServiceTypeTwitter];
    
[composeController setInitialText:@"Posting using Twitter"];
[composeController addURL: [NSURL URLWithString:
@"http://www.packtpub.com/xcode-4-cookbook/book/"]];
    
[self presentViewController:composeController
               animated:YES completion:nil];</pre></div><p>The preceding code snippet presents you with the Twitter compose sheet with the default text preconfigured using the method calls. The completion handler can be set up to pass a value back, indicating the action taken by the user within the compose sheet view. These values are explained in the following table:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Compose sheet values</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SLComposeViewControllerResultCancelled</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The user <a id="id270" class="indexterm"/>cancelled the composition session by touching the <strong>Cancel</strong> button.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SLComposeViewControllerResultDone</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The user sent the <a id="id271" class="indexterm"/>composed message by touching the <strong>Sent</strong> button.</p>
</td></tr></tbody></table></div><p>The social framework class that comes with iOS 6 contains two classes that have been designed to provide more flexibility around social networking integration.</p><p>The <code class="literal">SLComposeViewController</code> class, unlike the <code class="literal">UIActivityViewController</code> class, allows you to post a message to a specific social network service within the application code, without requiring the user to make a selection from the list of available services.</p><p>The user is then presented with a preview sheet appropriate to the specific service the application has been set up for. Using the social framework within your application is very simple, and can be achieved by performing the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Add <strong>Social.framework</strong> into your project similarly as we did with <strong>Twitter.framework</strong>.</li><li class="listitem">Open the <code class="literal">ViewController.m</code> implementation file from the project navigator.</li><li class="listitem">Type in the following import statement:<div><pre class="programlisting">
<strong>#import &lt;Social/Social.h&gt;</strong>
</pre></div></li><li class="listitem">Next, modify the <code class="literal">composeTweet</code> method, as shown in the following code snippet:<div><pre class="programlisting">- (IBAction)composeTweet:(id)sender {
  
  if ([SLComposeViewController 
isAvailableForServiceType:SLServiceTypeTwitter])
  {
  // Device is able to send a Twitter message
  SLComposeViewController *composeController = 
[SLComposeViewController
composeViewControllerForServiceType:SLServiceTypeTwitter];
    
  SLComposeViewControllerCompletionHandler 
    __block myHandler = 
^(SLComposeViewControllerResult result) {
      if (result == SLComposeViewControllerResultDone) {
        UIAlertView *alertView = [[UIAlertView alloc] 
initWithTitle:@"Twitter"
  message:@"Yourtweet was posted successfully."
delegate:self
cancelButtonTitle:@"OK"
otherButtonTitles:nil];
        [alertView show];
      }
      else if (result == 
SLComposeViewControllerResultCancelled) {
        UIAlertView *alertView = [[UIAlertView 
alloc] initWithTitle:@"Twitter"
  message:@"Your Tweet was not posted."
delegate:self
cancelButtonTitle:@"OK"
otherButtonTitles:nil];
        [alertView show];
      }
      [composeController dismissViewControllerAnimated:YES 
completion:nil];
    };
    
    [composeController setCompletionHandler:myHandler];
    [composeController setInitialText:@"Welcome to iOS 6"];
    [composeController addURL: [NSURL URLWithString:
  @"http://www.packtpub.com/xcode-4-cookbook/book/"]];
    
    [self presentViewController:composeController
               animated:YES completion:nil];
  }
}</pre></div><div><div><h3 class="title"><a id="note23"/>Note</h3><p>For more information on the <code class="literal">SLComposeViewController</code> class, you can refer to the Apple Developer reference documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html">https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html</a>.</p></div></div></li></ol></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec134"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Adding photos to a Tweet </em>recipe</li><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Understanding the Core Motion framework</em> section in <a class="link" href="apa.html" title="Appendix A. Exploring the MultiTouch Interface">Appendix</a>, <em>Exploring the Multi-touch Interface</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec40"/>Adding photos to a tweet</h1></div></div></div><p>In this recipe, we will <a id="id272" class="indexterm"/>
<a id="id273" class="indexterm"/>learn how we can incorporate images within Twitter messages.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec135"/>Getting ready</h2></div></div></div><p>In this recipe, we will look at how we can add an image to a tweet using the Twitter composition sheet.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec136"/>How to do it…</h2></div></div></div><p>Adding images to a Twitter message is very easy and can be achieved by performing the following simple steps inside the <strong>TwitterExample</strong> project:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">ViewController.m</code> implementation file from the project navigator.</li><li class="listitem">Next, modify the <code class="literal">composeTweet</code> method and add the highlighted code within the following code snippet:<div><pre class="programlisting">- (IBAction) composeTweet: (UIButton *) sender {

// Attach an image to our Tweet
TWTweetComposeViewController *myTwitter =
   [[TWTweetComposeViewController alloc] init];

<strong>[myTwitter addImage:[UIImage imageNamed:@"Blue-Aqua-</strong>
<strong>Apple.png"]];</strong>
  [self presentModalViewController:myTwitteranimated:YES];
}</pre></div></li></ol></div><p>In this code snippet, we declare a <a id="id274" class="indexterm"/>
<code class="literal">myTwitter</code> variable to an instance of our <code class="literal">TWTweetComposeViewController</code> class. <a id="id275" class="indexterm"/>We then use the <code class="literal">addImageinstance</code> method, to add an image to the tweet, and then present the view along with the image to the user.Whenever you want to <a id="id276" class="indexterm"/>
<a id="id277" class="indexterm"/>add images to a Twitter message for submission, you will need to use the <code class="literal">TWTweetComposeViewController</code> class instance. This class handles everything required, and presents us with a tweet composition sheet, so that we can add images and URLs.</p><p>Now that we have added in the final piece of code to our <strong>TwitterExample</strong> application, first we need to configure our Twitter account information prior to building and running the application. Perform the following steps to set up and configure Twitter:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <strong>Settings</strong> application from the iOS home screen.</li><li class="listitem">Select the <strong>Twitter</strong> option from the <strong>Settings</strong> menu.</li><li class="listitem">Enter your username and password credentials, and click on the <strong>Sign In</strong> button. If you do not <a id="id278" class="indexterm"/>have a Twitter account, you can create one from this screen by selecting the <strong>Create New Account</strong> option.<div><img src="img/3349_03_11.jpg" alt="How to do it…"/></div></li><li class="listitem">Next, build and run the application by selecting <strong>Product</strong> | <strong>Run</strong> from the <strong>Product</strong> menu, or <a id="id279" class="indexterm"/><a id="id280" class="indexterm"/>alternatively by pressing <em>command</em> + <em>R</em>.</li></ol></div><p>When the compilation completes, the iOS Simulator will appear, showing our Twitter application.</p><div><img src="img/3349_03_12.jpg" alt="How to do it…"/></div><p>When you start composing your tweet, you can choose to have your current geographical location added to your message. This feature basically uses the Google Maps API to send your location along with the tweet, and then allowing others to view the precise location on Google Maps.</p><p>Attachments can also be added <a id="id281" class="indexterm"/>
<a id="id282" class="indexterm"/>to the composed message, and this can be any valid image (PNG, JPG, and so on).</p><p>Clicking on the <strong>Send</strong> button will submit the message to your Twitter account, and you will receive a message stating that the tweet has been successfully posted.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec137"/>How it works...</h2></div></div></div><p>In this recipe, we looked at how we can integrate Twitter-like functionality into our applications. There are many ways in which applications can be more social, by including Twitter. For example, you could make the application auto-tweet, when you unlock a special item within your game, or when you finish the game, or just want to upload your high-score achievements.</p><p>This lets all of their friends know <a id="id283" class="indexterm"/>
<a id="id284" class="indexterm"/>they are playing your game, which in turn, gets you more exposure. Another example could be a business application, which could allow the user to tweet the number of successful projects that they have completed. With Twitter getting so much attention lately, you would be crazy to not include some sort of Twitter integration into your own iOS applications.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec138"/>There's more...</h2></div></div></div><p>Adding an image to a tweet using the <code class="literal">SLComposeViewController</code> class can be achieved by adopting the following code snippet:</p><div><pre class="programlisting">// Device is able to send a Twitter message
SLComposeViewController *composeController = 
[SLComposeViewController
composeViewControllerForServiceType:SLServiceTypeTwitter];
    
[composeController setInitialText:@"
My first Twitter Post from iOS 6"];
[composeController addImage:
[UIImage imageNamed:@"Blue-Aqua-Apple.png"]];
[composeController addURL: [NSURL URLWithString:
  @"http://www.packtpub.com/xcode-4-cookbook/book/"]];
    
[self presentViewController:composeController
               animated:YES completion:nil];</pre></div><p>In the preceding code snippet, we used the <code class="literal">SLComposeViewController</code> method to configure and present the tweet composition sheet. We then configured our composer view using the method calls for displaying default text and setting the default image.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec139"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Presenting transition to another view controller</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec41"/>Preparing transition to another view controller</h1></div></div></div><p>In this recipe, we will learn <a id="id285" class="indexterm"/>how we can use the storyboard features to transition to another view controller through code.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec140"/>Getting ready</h2></div></div></div><p>In this section, we will look at how we can programmatically transition to another view controller through the use of segues.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec141"/>How to do it…</h2></div></div></div><p>In order to programmatically perform a transition to another view controller using a segue, perform the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <code class="literal">MainStoryboard.storyboard</code> file from the project navigator.</li><li class="listitem">Select the segue relationship for the <strong>About Twitter App</strong> button.</li><li class="listitem">Click on the <strong>Attributes Inspector</strong> button.</li><li class="listitem">Change the <strong>Identifier</strong> property to <code class="literal">secondViewController</code>.</li><li class="listitem">Change the <strong>Style</strong> property to <strong>Modal</strong>.</li><li class="listitem">Change the <strong>Transition</strong> property to <strong>Cover Vertical</strong>.<div><img src="img/3349_03_13.jpg" alt="How to do it…"/></div></li></ol></div><p>Next, we need to modify our view controller to include the <code class="literal">prepareForSegue:sender</code> method that will be responsible for handling transitions between view controllers within the storyboard:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">ViewController.m</code> implementation file from the project navigator.</li><li class="listitem">Create the <code class="literal">prepareForSegue:sender</code> <a id="id286" class="indexterm"/>method, as shown in the following code snippet:<div><pre class="programlisting">-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  // Ensure we are processing the correct segue within the
   // Storyboard.
  if ([segue.identifier 
isEqualToString:@"secondViewController"])
  {
    UIAlertView *alertView = [[UIAlertView alloc] 
initWithTitle:@"Twitter Example"
  message:@"Currently displaying View #2"
      delegate:self
            cancelButtonTitle:@"OK"
            otherButtonTitles:nil];
    [alertView show];
  }
}</pre></div></li><li class="listitem">Next, build and run the <a id="id287" class="indexterm"/>application by selecting <strong>Product</strong> | <strong>Run</strong> from the <strong>Product</strong> menu, or alternatively by pressing <em>command</em> + <em>R</em>.</li></ol></div><p>When the compilation completes, the iOS Simulator will appear; click on the <strong>About Twitter App</strong> button to see the transition happen to the second view controller.</p><div><img src="img/3349_03_14.jpg" alt="How to do it…"/></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec142"/>How it works...</h2></div></div></div><p>Whenever a user triggers a segue in the current scene, the storyboard runtime calls the <code class="literal">prepareForSegue:sender</code> <a id="id288" class="indexterm"/>method for the current view controller. This method gives the current view controller an opportunity to pass any needed data to the view controller that is about to be displayed.</p><p>Next, we perform a segue call <a id="id289" class="indexterm"/>associated with a control using its identifier, which we created, and check to ensure that we are processing the correct segue, before displaying an alert when the view is displayed.</p><p>Handling it this way allows us to customize segues, and applies any transition to the scene that is located within your storyboard, <a id="id290" class="indexterm"/>as long as the identifier is unique.</p><div><div><h3 class="title"><a id="note24"/>Note</h3><p>For information on how to implement the methods of the <code class="literal">UIViewController</code> class, refer to the Apple Developer documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html">https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html</a><code class="literal">#//apple_ref/occ/cl/UIViewController</code>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec143"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Presenting storyboard view controllers programmatically</em> recipe</li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec42"/>Presenting storyboard view controllers programmatically</h1></div></div></div><p>In this recipe, we will learn how we <a id="id291" class="indexterm"/>
<a id="id292" class="indexterm"/>can use the storyboard features to programmatically present view controllers within the storyboard.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec144"/>Getting ready</h2></div></div></div><p>In this recipe, we will look at how we can programmatically call another view controller within the storyboard by using its identifier.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec145"/>How to do it…</h2></div></div></div><p>In order to programmatically determine which view we are in, we will need to create a new <code class="literal">UIViewController</code> <a id="id293" class="indexterm"/>subclass for our second view controller. This can be achieved by performing the following simple steps:</p><div><ol class="orderedlist arabic"><li class="listitem">Select the <code class="literal">TwitterExample</code> folder from the project navigator.</li><li class="listitem">Select <strong>File</strong> | <strong>New</strong> | <strong>File…</strong> or press <em>command</em> + <em>N</em>.</li><li class="listitem">Select the <strong>Objective-C class</strong> template from the list of templates.</li><li class="listitem">Enter <code class="literal">SecondViewController</code> as the name of the class to create.</li><li class="listitem">Ensure that you have selected <strong>UIViewController</strong> as the type of subclass to create from the <strong>Subclass</strong> of drop-down list.</li><li class="listitem">Ensure that the <strong>Targeted for iPad</strong> checkbox has not been checked.</li><li class="listitem">Ensure that the <strong>With XIB for User Interface</strong> checkbox has not been checked.</li><li class="listitem">Click on <strong>Next</strong> to proceed to the next step in the wizard.</li><li class="listitem">Specify the location to save the class file, and then click on the <strong>Create</strong> button.</li></ol></div><p>Once you have done this, we need to <a id="id294" class="indexterm"/>
<a id="id295" class="indexterm"/>update the class method of our second view controller to use our <code class="literal">SecondViewController</code> subclass:</p><div><ol class="orderedlist arabic"><li class="listitem">Open the <code class="literal">SecondViewController.h</code> interface file, located under the <code class="literal">TwitterExample</code> folder, from within the project navigator.</li><li class="listitem">Modify the interface file by adding the highlighted code sections, as shown in the following code snippet:<div><pre class="programlisting">//  SecondViewController.h
//  TwitterExample
//
//  Created by Steven F Daniel on 21/09/12.
//  Copyright (c) 2012 GenieSoft Studios. All rights reserved.

#import &lt;UIKit/UIKit.h&gt;

<strong>@interface SecondViewController : UIViewController &lt;UIAlertViewDelegate&gt;</strong>

@end</pre></div></li><li class="listitem">Open the <code class="literal">SecondViewController.m</code> implementation file, located under the <code class="literal">TwitterExample</code> folder, from within the project navigator.</li><li class="listitem">Create the <code class="literal">prepareForSegue:sender</code> <a id="id296" class="indexterm"/>method, as shown in the following code snippet:<div><pre class="programlisting">-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  // Ensure we are processing the correct segue 
   // within the Storyboard
  if ([segue.identifier 
isEqualToString:@"firstViewController"])
  {
    UIAlertView *alertView = [[UIAlertView alloc] 
initWithTitle:@"Twitter Example"
  message:@"Currently displaying View #1"
    delegate:self
    cancelButtonTitle:@"OK"
    otherButtonTitles:nil];

    [alertView show];
  }
}</pre></div></li><li class="listitem">Select the second view controller <a id="id297" class="indexterm"/><a id="id298" class="indexterm"/>and click on the <strong>Identity Inspector</strong> button.</li><li class="listitem">Next, change the <strong>Custom Class</strong> property to read <code class="literal">SecondViewController</code>.<div><img src="img/3349_03_15.jpg" alt="How to do it…"/></div></li><li class="listitem">Next, we need to apply the same storyboard segues for our first view controller.</li><li class="listitem">Select the <strong>Attributes Inspector</strong> section, and then under the <strong>StoryboardSegue</strong> section, enter F<code class="literal">irstViewController</code> as the unique identifier to use.</li><li class="listitem">Repeat the same steps as we did for the <code class="literal">SecondViewController</code>.</li><li class="listitem">Next, build and run the application by selecting <strong>Product</strong> | <strong>Run</strong> from the <strong>Product</strong> menu, or alternatively by pressing <em>command</em> + <em>R</em>.</li></ol></div><p>When the compilation completes, the iOS Simulator will appear, showing the programmatic transitions between each of the view controllers that are defined within our storyboard.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec146"/>How it works...</h2></div></div></div><p>When you click on the <strong>About App</strong> button, it transitions over to the second view controller and then displays the message based on the <code class="literal">prepareForSegue:(UIStoryboardSegue*)segue</code> method call, determining the identifier of the current view controller that is being displayed within the view.</p><p>Clicking on the <strong>Go Back</strong> button will transfer control over to the first view controller; a call is made to the <code class="literal">prepareForSegue</code> <a id="id299" class="indexterm"/>method to determine the current identifier of the current view.</p></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec147"/>There's more…</h2></div></div></div><p>Although the storyboard runtime usually handles transitions between view controllers, you can also trigger segues programmatically directly from within your code. You may choose to do this when setting up the segue from within the XIB editor in Xcode, or you may want to use the accelerometer events to trigger a transition and display a graphic animation.</p><p>If you take a look at the following code <a id="id300" class="indexterm"/>
<a id="id301" class="indexterm"/>snippet, it shows you how you can programmatically display any view controller within your storyboard, by using the <code class="literal">instantiateViewControllerWithIdentifier:</code> method of the <code class="literal">UIStoryboard</code> class. We then use the <code class="literal">presentViewController:</code> method to push the view controller onto the view controller navigation stack.</p><div><pre class="programlisting">SecondViewController *mvc = [self.storyboard
     instantiateViewControllerWithIdentifier:@"secondViewController"];</pre></div><div><div><h3 class="title"><a id="note25"/>Note</h3><p>For information on how to implement the methods of the <code class="literal">UIStoryboard</code> class, refer to the Apple Developer documentation, located at <a class="ulink" href="https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html">https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html</a>.</p></div></div></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec148"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <em>Composing a tweet </em>recipe</li><li class="listitem" style="list-style-type: disc">The <em>Adding photos to a tweet </em>recipe</li><li class="listitem" style="list-style-type: disc">The <em>Applying transitions to storyboards</em> recipe</li><li class="listitem" style="list-style-type: disc">The <em>Preparing transition to another view controller</em> recipe</li></ul></div></div></div></body></html>