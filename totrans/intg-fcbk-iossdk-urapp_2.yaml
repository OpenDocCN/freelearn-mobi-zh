- en: Chapter 2. Creating a New iOS Social Project
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: With this chapter, we start our coding journey. We are going to build our social
    application from the group up.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter we will learn about:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Creating a Facebook App ID**: It is a key used with our APIs to communicate
    with the Facebook Platform.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Downloading the Facebook SDK**: iOS SDK can be downloaded from two different
    channels. We will look into both of them.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Creating a new XCode Project**: I will give a brief introduction on how to
    create a new XCode project and description of the IDE environment.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Importing Facebook iOS SDK into our XCode project**: I will go through the
    import of the Facebook SDK into our XCode project step-by-step.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Getting familiar with Storyboard to build a better interface**: This is a
    brief introduction on the Apple tool to build our application interface.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Before starting any job, we should always check whether we have the right tools.
    In order to start building our application, we need two things:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Mac OS machine**: XCode runs only on Macs (officially)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**XCode**: It is the editor used to build our social application'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The target of this book is to explain how to integrate the iOS Facebook SDK
    into our application. Using XCode and Objective-C concepts are outside the scope
    of this book. This chapter will give a quick introduction on XCode because we
    assume readers are already familiar with the Apple development environment and
    their features. We are going to build a social application for book tracking.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a Facebook App ID
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In order to communicate with the Facebook Platform using their SDK, we need
    an identifier for our application. This identifier, also known as Facebook App
    ID, will give access to the Platform; at the same time, we will be able to collect
    a lot of information about its usage, impressions, and ads.
  prefs: []
  type: TYPE_NORMAL
- en: 'To obtain a Facebook App ID, we need a Facebook account. If you don''t have
    one, you can create a Facebook account via the following page at [https://www.facebook.com](https://www.facebook.com):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/VDlWgBty.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The previous screenshot shows the new Facebook account sign up form. Fill out
    all the fields and you will be able to access the Facebook Developer Portal.
  prefs: []
  type: TYPE_NORMAL
- en: Once we are logged into Facebook, we need to visit the Developer Portal. You
    can find it at [https://developers.facebook.com/](https://developers.facebook.com/).
    I already mentioned the important role of Developer Portal in developing our social
    application.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/eAetWvJY.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The previous screenshot shows the Facebook Developer Portal. The main section,
    the top part, is dedicated to the current SDKs. On the top-blue bar, click on
    the **Apps** link, and it will redirect us to the Facebook App Dashboard.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/WjqVQLjn.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The previous screenshot shows the Facebook App Dashboard. To the left, we have
    a list of apps; on the center of the page, we can see the details of the currently
    selected app from our list. The page shows the application's setting and analytics
    (**Insights**).
  prefs: []
  type: TYPE_NORMAL
- en: In order to create a new Facebook App ID, you can click on **Create New App**
    on the top-right part of the App Dashboard.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/uhLazoAP.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The previous screenshot shows the first step in order to create a Facebook App
    ID. When providing the **App Name**, be sure the name does not already exist or
    violate any copyright laws; otherwise, Facebook will remove your app. **App Namespace**
    is something that we need if we want to define custom objects and/or actions in
    the Open Graph structure. The **App Namespace** topic is not part of this book.
    Web hosting is really useful when creating a social web application. Facebook,
    in partnership with other providers, can create a web hosting for us if needed.
    This part is not going to be discussed in this book; therefore, do not check this
    option for your application.
  prefs: []
  type: TYPE_NORMAL
- en: Once all the information is provided, we can move on to the next step. Please
    fill out the form, and move forward to the next one.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/Q4qJ03IT.jpg)'
  prefs: []
  type: TYPE_IMG
- en: On the top of the page, we can see both **App ID** and **App Secret**. These
    are the most important pieces of information about our new social applicaton.
    **App ID** is a piece of information that we can share unlike **App Secret**.
  prefs: []
  type: TYPE_NORMAL
- en: At the center of our new Facebook Application Page, we have basic information
    fields. Do not worry about **Namespace**, **App Domains**, and **Hosting URL**;
    these fields are for web applications. **Sandbox Mode** only allows developers
    to use the current application. Developers are specified through the **Developer
    Roles** link on the left side bar.
  prefs: []
  type: TYPE_NORMAL
- en: Moving down, select the type of app. For our goal, select **Native iOS App**.
    You can select multiple types and create multiplatform social applications.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you have checked **Native iOS App**, you will be prompted with the following
    form:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/dNN1zlqo.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The only field we need to provide for now is the **Bundle ID**. The **Bundle
    ID** is something related to XCode settings. Be sure that the Facebook **Bundle
    ID** will match our **XCode Social App Bundle Identifier**. The format for the
    bundle identifier is always something like `com.MyCompany.MyApp`.
  prefs: []
  type: TYPE_NORMAL
- en: '**iPhone**/**iPad App Store IDs** are the App Store identifiers of your application
    if you have published your app in the App Store. If you didn''t provide any of
    them after you saved your changes, you will receive a warning message; however,
    don''t worry, our new **App ID** is now ready to be used.'
  prefs: []
  type: TYPE_NORMAL
- en: Save your changes and get ready to start our developing journey.
  prefs: []
  type: TYPE_NORMAL
- en: Downloading the Facebook iOS SDK
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The iOS Facebook SDK can be downloaded through two different channels:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Facebook Developer Portal**: For downloading the installation package'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**GitHub**: For downloading the SDK source code'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using Facebook Developer Portal, we can download the iOS SDK as the installation
    package. Visit [https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)
    as shown in the following screenshot and click on **Download the SDK** to download
    the installation package.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/zLJTuTRO.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The package, once installed, will create a new **FacebookSDK** folder within
    our `Documents` folder.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/tIUBG5QS.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The previous screenshot shows the content of the iOS SDK installation package.
    Here, we can see four elements:'
  prefs: []
  type: TYPE_NORMAL
- en: '**FacebookSDK.framework**: This is the framework that we will import in our
    XCode social project'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**LICENSE**: It contains information about licensing and usage of the framework'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**README**: It contains all the necessary information about the framework installation'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Samples**: It contains a useful set of sample projects that uses the iOS
    framework''s features'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: With the installation package, we only have the compiled files to use, with
    no original source code.
  prefs: []
  type: TYPE_NORMAL
- en: 'It is possible to download the source code using the GitHub channel. To clone
    `git repo`, you will need a Git client, either Terminal or GUI. The iOS SDK framework
    `git repo` is located at [https://github.com/facebook/facebook-ios-sdk.git](https://github.com/facebook/facebook-ios-sdk.git).
    I prefer the Terminal client that I am using in the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'After we have cloned the repo, the target folder will look as the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/spAyo5lX.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The previous picture shows the content of the **iOS SDK GitHub repo**. Two
    new elements are present in this repo: **src** and **scripts**. **src** contains
    the framework source code that needs to be compiled. The **scripts** folder has
    all the necessary scripts needed to compile the source code.'
  prefs: []
  type: TYPE_NORMAL
- en: Using the GitHub version allows us to keep the framework in our social application
    always up-to-date, but for the scope of this book, we will be using the installation
    package.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a new XCode project
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We created a Facebook App ID and downloaded the iOS Facebook SDK. It's time
    for us to start our social application using XCode.
  prefs: []
  type: TYPE_NORMAL
- en: The application will prompt the welcome dialog if **Show this window when XCode
    launches** is enabled.![](img/vIhM2pXb.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choose the **Create a new XCode project** option. If the welcome dialog is disabled,
    navigate to **File** | **New** | **Project…**.![](img/V0Ysg5Oh.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Choosing the type of project to work with is the next step as shown in the following
    screenshot:![](img/hccaL07b.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The bar to the left defines whether the project is targeting a desktop or a
    mobile device. Navigate to **iOS** | **Application** and choose the **Single View
    Application** project type.![](img/fSaxx9pR.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The previous screenshot shows our new project''s details. Provide the following
    information for your new project:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Product Name**: This is the name of our application'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Organization Name**: I will strongly recommend filling out this part even
    if you don''t belong to an organization because this field will be part of our
    **Bundle Identifier**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Company Identifier**: It is still optional, but we should definitely fill
    it out to respect the best-practice format for **Bundle Identifier**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Class Prefix**: This prefix will be prepended to every class we are going
    to create in our project'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Devices**: We can select the target device of our application; in this case,
    it is an iPhone but we could also have chosen iPad or Universal'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Use Storyboards**: We are going to use storyboards to create the user interface
    for our application'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Use Automatic Reference Counting**: This feature enables reference counting
    in the **Objective C Garbage Collector**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Include Unit Tests**: If it is selected, XCode will also create a separate
    project target to unit-test our app; this is not part of this book'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Save the new project. I will strongly recommend checking the **Create a local
    git repository for this project** option in order to keep track of changes. Once
    the project is under version control, we can also decide to use GitHub as the
    remote host to store our source code.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/wClePNy7.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Importing the Facebook SDK into the application project
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'I have already mentioned that we are going to import Facebook SDK using the
    installation package. The installation package will create a **FacebookSDK** folder
    within the **Documents** folder. Within the folder, locate the **FacebookSDK**.
    **framework** folder, and drag it onto your XCode project. Drop the framework
    within the **Frameworks** section of **Project Navigator** as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/FVL4ym2c.jpg)'
  prefs: []
  type: TYPE_IMG
- en: When prompted to import the settings, check the **Copy items into destination
    group's folder (if needed)** option.
  prefs: []
  type: TYPE_NORMAL
- en: Locate the **Facebook SDK** folder within your project directory using **Finder**.
    You can find the folder location from XCode by right-clicking on and navigating
    to **SDK** | **Show in Finder**. Within the **Framework** folder, locate the **Resources**
    folder and open it.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/lafR3Ykx.jpg)'
  prefs: []
  type: TYPE_IMG
- en: As we did for the Facebook Framework, drag-and-drop `FacebookSDKResources.bundle`
    within the **Frameworks** section of XCode. It will be used for creating UI objects
    in the iOS project. Still check whether the **Copy items into destination group's
    folder (if needed)** option needs to be enabled.
  prefs: []
  type: TYPE_NORMAL
- en: The SDK relies on three frameworks already included in XCode, such as AdSupport,
    Accounts, and Social. We need to add these frameworks to our project. In the target's
    **Summary** pane, locate **Linked Frameworks and Libraries**, click on **+**,
    and the list of all available frameworks will show up.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ZDd9Fpd0.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Select the frameworks mentioned in the previous image, and click on **Add**.
    The three packages will be added into our root project folder. In order to keep
    our project in order, we can move the three frameworks into the **Frameworks**
    section of our project.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/InFQw62Z.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The next step is to add **SQLite** and the **-ObjC linker Flags**. In the **Summary**
    pane, select the project in **Targets**, locate **Build Settings** to your right,
    and check **All** and **Levels** in the bar underneath. Now in the search bar,
    type `other link`. The result should look as the following screenshot.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/WcZfnpJ2.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Then select the **Other Linker Flags** entry, and double-click on the third
    column, the one after **Resolved**. Add the following flags to it:'
  prefs: []
  type: TYPE_NORMAL
- en: '**-ObjC**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**-lsqlite3.0**![](img/XEdZOfh1.jpg)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Now we need to set the Facebook framework to use the Facebook App ID we created
    previously. In **Navigator**, locate the `Application-Info.plist` file; you can
    find it in the project **Navigator** | **Application Folder** | **Supporting Files**.
  prefs: []
  type: TYPE_NORMAL
- en: Create a new entry with the `FacebookAppID` key; the value needs to be a string
    type with your Facebook App ID previously created.
  prefs: []
  type: TYPE_NORMAL
- en: 'We also need to ensure that the application receives the callback URL of the
    web-based authentication flow (`OAuth`). To achieve this, create a new URL type
    array entry with a single item. Add a new **URL Schemes** array to the array item,
    and the first entry will be a string key with the Facebook App ID prefixed with
    `fb`. You can see the result in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/eEI49Aek.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The new social iOS project is now ready. In the next chapter, we will start
    coding new features.
  prefs: []
  type: TYPE_NORMAL
- en: Getting familiar with Storyboard to build a better interface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Storyboard** is a great tool to build an iPhone/iPad user interaction and
    interface. Using it, we are able to sketch the entire dataflow and interaction
    before we start developing our code.'
  prefs: []
  type: TYPE_NORMAL
- en: Storyboard was introduced with the iOS 5 release. Previously, the only available
    format to build the UI was the XIB format. The XIB format provides the ability
    to build one interface at a time, whereas Storyboard allows you to work across
    multiple interfaces and connect them using actions (**segues**).
  prefs: []
  type: TYPE_NORMAL
- en: Storyboard is not meant to completely replace the XIB format; in fact, they
    can coexist easily.
  prefs: []
  type: TYPE_NORMAL
- en: The following screenshot shows an example of Storyboard in action. Each of the
    elements in Storyboard is called a **scene**. Scenes are connected through segues.
    Two scenes are embedded within a navigation controller, the object to the extreme
    left in the screenshot; the two main controllers are connected to each other using
    two segues associated with a button in each scene.
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/Akrk34eB.jpg)'
  prefs: []
  type: TYPE_IMG
- en: For this project, we will be taking advantage of the Storyboard features to
    build the application interface.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we learned how to create a new Facebook App ID that will be
    used to identify our social application on the social platform. We also created
    a new iPhone project, and downloaded the Facebook iOS SDK. In order to use the
    Facebook iOS SDK, we had to import several frameworks in our social project, and
    set some specific linker flags that will be used by the Facebook SDK. It's important
    also to remember that we need to use the Facebook App ID previously created in
    our application; otherwise, Facebook SDK will throw an exception because the Facebook
    App ID is used to communicate with the social platform.
  prefs: []
  type: TYPE_NORMAL
- en: An important tool that will also be used to build our social project is Storyboard.
    Storyboard will help users to create our GUI and define user interaction.
  prefs: []
  type: TYPE_NORMAL
