<html><head></head><body>
		<div id="_idContainer046">
			<h1 id="_idParaDest-16" class="chapter-number"><a id="_idTextAnchor015"/>1</h1>
			<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/>Building Your Game</h1>
			<p>As we start on our journey of building mobile games using the Unity game engine, it’s important that you are familiar with the engine itself before we dive into the specifics of building things for mobile platforms. Although there is a chance that you’ve already built a game and want to transition it to mobile, there will also be those of you who haven’t touched <strong class="bold">Unity</strong> before or may not have used it in a long time. This chapter will act as an introduction to newcomers and a refresher for those coming back, and it will provide some best practices for those who are already familiar with Unity. While you may skip this chapter if you’re already familiar with Unity, I think it’s also a good idea to go through the project so that you know the thought processes behind why the project is made in the way that it is, so that you can keep it in mind for your own <span class="No-Break">future titles.</span></p>
			<p>In this chapter, we will build a 3D endless runner game in the same vein as <em class="italic">Imangi Studios LLC’s</em> <em class="italic">Temple Run</em> series. In our case, we will have a player who will run continuously in a certain direction and dodge the obstacles that are in their way. We can also add additional features to the game easily, as the game will endlessly have new things added <span class="No-Break">to it.</span></p>
			<p>This chapter will be split into several topics. It will contain simple, step-by-step processes for you to follow. Here is an outline of <span class="No-Break">our tasks:</span></p>
			<ul>
				<li>Setting up <span class="No-Break">the project</span></li>
				<li>Creating <span class="No-Break">the player</span></li>
				<li>Moving the player through a <span class="No-Break">C# script</span></li>
				<li>Improving scripts using attributes and <span class="No-Break">XML comments</span></li>
				<li>Update function versus <span class="No-Break">FixedUpdate function</span></li>
				<li>Having the camera follow <span class="No-Break">our player</span></li>
				<li>Creating a <span class="No-Break">basic tile</span></li>
				<li>Making the <span class="No-Break">game endless</span></li>
				<li><span class="No-Break">Creating obstacles</span></li>
			</ul>
			<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/><a id="_idTextAnchor018"/>Technical requirements</h1>
			<p>This book utilizes <em class="italic">Unity 2022.1.0b14</em> and <em class="italic">Unity Hub 3.3.1</em>, but the steps should work with minimal changes in future versions of the editor. If you would like to download the exact version used in this book, and there is a new version out, you can visit Unity’s download archive <span class="No-Break">at </span><a href="https://unity3d.com/get-unity/download/archive"><span class="No-Break">https://unity3d.com/get-unity/download/archive</span></a><span class="No-Break">.</span></p>
			<p>You can also find the system requirements for Unity at <a href="https://docs.unity3d.com/2022.1/Documentation/Manual/system-requirements.html">https://docs.unity3d.com/2022.1/Documentation/Manual/system-requirements.html</a> in the <em class="italic">Unity Editor system </em><span class="No-Break"><em class="italic">requirements</em></span><span class="No-Break"> section.</span></p>
			<p>You can find the code files for this chapter on GitHub <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Unity-2022-Mobile-Game-Development-3rd-Edition/tree/main/Chapter01"><span class="No-Break">https://github.com/PacktPublishing/Unity-2022-Mobile-Game-Development-3rd-Edition/tree/main/Chapter01</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-19"><a id="_idTextAnchor019"/>Setting up the project</h1>
			<p>Now that <a id="_idIndexMarker000"/>we have our goals in mind, let’s start building <span class="No-Break">our project:</span></p>
			<ol>
				<li>To get started, open Unity Hub on <span class="No-Break">your computer.</span></li>
				<li>From startup, we’ll opt to create a new project by clicking on the <span class="No-Break"><strong class="bold">New</strong></span><span class="No-Break"> button.</span></li>
				<li>Next, under <strong class="bold">Project Name</strong>, put in a name (I have chosen <strong class="source-inline">MobileDev</strong>), and under <strong class="bold">Templates</strong>, make sure that <strong class="bold">3D</strong> is selected. Afterward, click on <strong class="bold">CREATE</strong> and wait for Unity to <span class="No-Break">load up:</span></li>
			</ol>
			<div>
				<div id="_idContainer008" class="IMG---Figure">
					<img src="image/B18868_01_01.jpg" alt="Figure 1.1 – Creating a 3D project"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – Creating a 3D project</p>
			<ol>
				<li value="4"><a id="_idTextAnchor020"/>After it’s <a id="_idIndexMarker001"/>finished, you’ll see the Unity Editor pop up for the <span class="No-Break">first time:</span></li>
			</ol>
			<div>
				<div id="_idContainer009" class="IMG---Figure">
					<img src="image/B18868_01_02.jpg" alt="Figure 1.2 – The Unity Editor"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – The Unity Editor</p>
			<ol>
				<li value="5">If your <a id="_idIndexMarker002"/>layout doesn’t look the same as in the preceding screenshot, go to the top-right section of the toolbar and select the drop-down menu there that reads <strong class="bold">Layout</strong>. From there, select <strong class="bold">Default</strong> from the <span class="No-Break">options presented:</span></li>
			</ol>
			<div>
				<div id="_idContainer010" class="IMG---Figure">
					<img src="image/B18868_01_03.jpg" alt="Figure 1.3 – The Layout button"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – The Layout button</p>
			<p><a id="_idTextAnchor021"/>We now <a id="_idIndexMarker003"/>have opened Unity for the first time and have the default <span class="No-Break">layout displayed!</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">If this is your first time working with Unity, then I highly recommend that you read the <em class="italic">Unity’s interface</em> section of the <em class="italic">Unity Manual</em>, which you can access <span class="No-Break">at </span><a href="https://docs.unity3d.com/Manual/UsingTheEditor.html"><span class="No-Break">https://docs.unity3d.com/Manual/UsingTheEditor.html</span></a><span class="No-Break">.</span></p>
			<p>Now that we have Unity open, we can actually start building <span class="No-Break">our project.</span><a id="_idTextAnchor022"/><a id="_idTextAnchor023"/><a id="_idTextAnchor024"/></p>
			<h1 id="_idParaDest-20"><a id="_idTextAnchor025"/>Creating the player</h1>
			<p>To get <a id="_idIndexMarker004"/>started, we’ll build a player that will always move forward. Let’s start with <span class="No-Break">that now:</span></p>
			<ol>
				<li>To get started, we will create some ground for our player to walk on. To do that, go to the top menu and select <strong class="bold">GameObject</strong> | <strong class="bold">3D Object</strong> | <span class="No-Break"><strong class="bold">Cube</strong></span><span class="No-Break">.</span></li>
				<li>From there, we’ll move over to the <strong class="bold">Inspector</strong> window and change the name of the object to <strong class="source-inline">Floor</strong>. Then, for the <strong class="bold">Transform</strong> component, set <strong class="bold">Position</strong> to (<strong class="source-inline">0</strong>, <strong class="source-inline">0</strong>, <strong class="source-inline">0</strong>). This can be done by either typing the values in or right-clicking on the <strong class="bold">Transform</strong> component and then selecting the <strong class="bold">Reset </strong><span class="No-Break"><strong class="bold">Position</strong></span><span class="No-Break"> option.</span></li>
				<li>Then, we will set the <strong class="bold">Scale</strong> values of the object to (<strong class="source-inline">7</strong>, <span class="No-Break"><strong class="source-inline">0.1</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">10</strong></span><span class="No-Break">):</span></li>
			</ol>
			<div>
				<div id="_idContainer011" class="IMG---Figure">
					<img src="image/B18868_01_04.jpg" alt="Figure 1.4 – Creating the ground"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – Creating the ground</p>
			<p>In Unity, by default, <strong class="source-inline">1</strong> unit of space is representative of 1 meter in real life. So, our <strong class="bold">Scale</strong> values will <a id="_idIndexMarker005"/>make the floor longer than it is wide (<strong class="bold">X</strong> and <strong class="bold">Z</strong>), and we have some size on the ground (<strong class="bold">Y</strong>), so the player will collide and land on it because we have a <strong class="bold">Box Collider</strong> component attached to it <span class="No-Break">by default.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">The <strong class="bold">Box Collider</strong> component <a id="_idIndexMarker006"/>is added automatically when creating a <strong class="bold">Cube</strong> object and is required to have objects collide with it. For more information <a id="_idIndexMarker007"/>on the <strong class="bold">Box Collider</strong> component, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/Manual/class-BoxCollider.html"><span class="No-Break">https://docs.unity3d.com/Manual/class-BoxCollider.html</span></a><span class="No-Break">.</span></p>
			<ol>
				<li value="4">Next, we will create our player, which will be a sphere. To do this, we will go to <strong class="bold">GameObject</strong> | <strong class="bold">3D Object</strong> | <span class="No-Break"><strong class="bold">Sphere</strong></span><span class="No-Break">.</span></li>
				<li>Rename the sphere to <strong class="source-inline">Player</strong> and set the <strong class="bold">Transform</strong> component’s <strong class="bold">Position</strong> values to (<strong class="source-inline">0</strong>, <span class="No-Break"><strong class="source-inline">1</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">-4</strong></span><span class="No-Break">):</span></li>
			</ol>
			<div>
				<div id="_idContainer012" class="IMG---Figure">
					<img src="image/B18868_01_05.jpg" alt="Figure 1.5 – Positioning the player"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.5 – Positioning the player</p>
			<p>This places <a id="_idIndexMarker008"/>the ball slightly above the ground and shifts it back to near the starting point. Note that the camera object (see the camera icon) is pointing toward the ball by default because it is positioned at (<strong class="source-inline">0</strong>, <span class="No-Break"><strong class="source-inline">1</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">-1<a id="_idTextAnchor026"/>0</strong></span><span class="No-Break">).</span></p>
			<ol>
				<li value="6">We want the ball to move, so we will need to tell the physics engine that we want to have this object react to forces, so we will need to add a <strong class="bold">Rigidbody</strong> component. To do so, with the <strong class="bold">Player</strong> object selected, go to the menu and select <strong class="bold">Component</strong> | <strong class="bold">Physics</strong> | <strong class="bold">Rigidbody</strong>. To see what happens now, let’s click on the <strong class="bold">Play</strong> button, which can be seen in the middle of the <span class="No-Break">first toolbar:</span></li>
			</ol>
			<div>
				<div id="_idContainer013" class="IMG---Figure">
					<img src="image/B18868_01_06.jpg" alt="Figure 1.6 – Current state of the game"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.6 – Current state of the game</p>
			<p>As in the <a id="_idIndexMarker009"/>preceding screenshot, you should see the ball fall down onto the ground when we play <span class="No-Break">the game.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">You can disable/enable having the <strong class="bold">Game</strong> tab take up the entire screen when being played by clicking on the <strong class="bold">Maximize On Play</strong> button at the top, or by right-clicking on the <strong class="bold">Game</strong> tab and then <span class="No-Break">selecting </span><span class="No-Break"><strong class="bold">Maximi<a id="_idTextAnchor027"/>ze</strong></span><span class="No-Break">.</span></p>
			<ol>
				<li value="7">Click on the <strong class="bold">Play</strong> button again to turn the game off and go back to the <strong class="bold">Scene</strong> tab, if it doesn’t <span class="No-Break">happen automatically.</span></li>
			</ol>
			<p>We now have the objects for both the floor and the player in the game and have told the pl<a id="_idTextAnchor028"/>ayer to react to physics! Next, we will add interactivity to the player through the use <span class="No-Break">of co<a id="_idTextAnchor029"/>de.</span></p>
			<h1 id="_idParaDest-21"><a id="_idTextAnchor030"/>Moving the player through a C# script</h1>
			<p>We want <a id="_idIndexMarker010"/>the player to move, so in order to do that, we will create our own piece of functionality in a script, effectively <a id="_idIndexMarker011"/>creating our own custom component in <span class="No-Break">the process:</span></p>
			<ol>
				<li>To create a script, we will go to the <strong class="bold">Project</strong> window and select the <strong class="bold">Create</strong> button in the top-left corner of the menu by clicking on the <strong class="bold">+</strong> icon, and then we will <span class="No-Break">select </span><span class="No-Break"><strong class="bold">Folder</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer014" class="IMG---Figure">
					<img src="image/B18868_01_07.jpg" alt="Figure 1.7 – Location of the + icon"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.7 – Location of the + icon</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">You can also access the <strong class="bold">Create</strong> menu by right-clicking on the right-hand side of the <strong class="bold">Project</strong> window. With this method, you can right-click and then select <strong class="bold">Create</strong> | <span class="No-Break"><strong class="bold">Folder</strong></span><span class="No-Break">.</span></p>
			<ol>
				<li value="2">From there, we’ll name this folder <strong class="source-inline">Scripts</strong>. It’s always a good idea to organize our projects, so this will help <span class="No-Break">with that.</span></li>
			</ol>
			<p class="callout-heading">Tip</p>
			<p class="callout">If you happen to misspell the name of an item in the <strong class="bold">Project</strong> window, you can rename it by either right-clicking and selecting the <strong class="bold">Rename</strong> option or selecting the object and then single-clicking on <span class="No-Break">the name.</span></p>
			<ol>
				<li value="3">Double-click on the folder to enter it, create a script by going to <strong class="bold">Create</strong> | <strong class="bold">C# Script</strong>, and rename the newly created item to <strong class="source-inline">PlayerBehaviour</strong> (<span class="No-Break">no spaces).</span></li>
			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">The reason I’m using the <em class="italic">behaviour</em> spelling instead of <em class="italic">behavior</em> is that all components in Unity are children of another class called <strong class="source-inline">MonoBehaviour</strong>, and I’m following Unity’s lead in <span class="No-Break">that regard.</span></p>
			<ol>
				<li value="4">Double-click <a id="_idIndexMarker012"/>on the script to <a id="_idIndexMarker013"/>open up the script editor (IDE) of your choice and add the following code <span class="No-Break">to it:</span><pre class="source-code">
using UnityEngine;
public class PlayerBehaviour : MonoBehaviour
{
    // A reference to the Rigidbody component
    private Rigidbody rb;
    // How fast the ball moves left/right
    public float dodgeSpeed = 5;
    // How fast the ball moves forward  automatically
    public float rollSpeed = 5;
    // Start is called before the first frame update
    void Start()
    {
        // Get access to our Rigidbody component
        rb = GetComponent&lt;Rigidbody&gt;();
    }
    // Update is called once per frame
    void Update()
    {
        // Check if we're moving to the side
        var horizontalSpeed =
            Input.GetAxis("Horizontal") * dodgeSpeed;
        rb.AddForce(horizontalSpeed, 0, rollSpeed);
    }
}</pre></li>
			</ol>
			<p>In the <a id="_idIndexMarker014"/>preceding code, we <a id="_idIndexMarker015"/>have a couple of variables that we will be working with. The <strong class="source-inline">rb</strong> variable is a reference to the GameObject’s <strong class="source-inline">Rigidbody</strong> component that we added previously. It gives us the ability to make the object move, which we will use in the <strong class="source-inline">Update</strong> function. We also have two variables, <strong class="source-inline">dodgeSpeed</strong> and <strong class="source-inline">rollSpeed</strong>, which dictate how quickly the player will move when moving left/right or when moving <span class="No-Break">forward, respectively.</span></p>
			<p>Since our object has only one <strong class="source-inline">Rigidbody</strong> component, we assign <strong class="source-inline">rb</strong> once in the <strong class="source-inline">Start</strong> function, which is called when the GameObject is loaded into the scene at the beginning of <span class="No-Break">the game.</span></p>
			<p>Then, we use the <strong class="source-inline">Update</strong> function to check whether our player is pressing keys to move left or right based on Unity’s <strong class="bold">Input Manager</strong> system. By default, the <strong class="source-inline">Input.GetAxis</strong> function will return to us a negative value, moving to <strong class="source-inline">-1</strong> if we press <em class="italic">A</em> or the left arrow. If we press the right arrow or <em class="italic">D</em>, we will get a positive value up to <strong class="source-inline">1</strong> returned to us, and the input will move toward <strong class="source-inline">0</strong> if nothing is pressed. We then multiply this by <strong class="source-inline">dodgeSpeed</strong> in order to increase the speed so that the movement of the object is easier <span class="No-Break">to see.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more <a id="_idIndexMarker016"/>information on the Input Manager, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/Manual/class-InputManager.html"><span class="No-Break">https://docs.unity3d.com/Manual/class-InputManager.html</span></a><span class="No-Break">.</span></p>
			<p>Finally, once we have that value, we will apply a force to our ball’s <strong class="source-inline">horizontalSpeed</strong> units on the <em class="italic">X</em> axis and <strong class="source-inline">rollSpeed</strong> on the <span class="No-Break"><em class="italic">Z</em></span><span class="No-Break"> axis.</span></p>
			<ol>
				<li value="5">Save your <a id="_idIndexMarker017"/>script and return to the <span class="No-Break">Uni<a id="_idTextAnchor031"/>ty Editor.</span></li>
				<li>We will <a id="_idIndexMarker018"/>now need to assign this script to our player by selecting the <strong class="source-inline">Player</strong> object in the <strong class="bold">Hierarchy</strong> window, and then in the <strong class="bold">Inspector</strong> window, we will drag and drop the <strong class="source-inline">PlayerBehaviour</strong> script from the <strong class="bold">Project</strong> window to be on top of the <span class="No-Break"><strong class="source-inline">Player</strong></span><span class="No-Break"> object.</span></li>
			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">Note that when writing scripts, if we declare a variable as <strong class="source-inline">public</strong>, it will show up in the <strong class="bold">Inspector</strong> window for us to be able to set it. We typically set a variable as <strong class="source-inline">public</strong> when we want designers to tweak the values for gameplay purposes, but it also allows other scripts to access the property in code. By default, variables and methods are <strong class="source-inline">private</strong>, which means they can only be used within the class. For more information on access <a id="_idIndexMarker019"/>modifiers, check <span class="No-Break">out </span><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/access-modifiers"><span class="No-Break">https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/access-modifiers</span></a><span class="No-Break">.</span></p>
			<p>If all <a id="_idIndexMarker020"/>goes well, we should <a id="_idIndexMarker021"/>see the script appear on our object, <span class="No-Break">as follows:</span></p>
			<div>
				<div id="_idContainer015" class="IMG---Figure">
					<img src="image/B18868_01_08.jpg" alt="Figure 1.8 – The PlayerBehaviour co﻿mponent added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.8 – The PlayerBehaviour co<a id="_idTextAnchor032"/>mponent added</p>
			<ol>
				<li value="7">Save your scene by going to <strong class="bold">File</strong> | <strong class="bold">Save</strong>. Afterward, play the game and use the left and right arrows to see the player moving according to your input, but no matter what, moving forward <span class="No-Break">by default:</span></li>
			</ol>
			<div>
				<div id="_idContainer016" class="IMG---Figure">
					<img src="image/B18868_01_09.jpg" alt="Figure 1.9 – The current state of the game"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.9 – The current state of the game</p>
			<p>Now you <a id="_idIndexMarker022"/>can see that the ball moves <a id="_idIndexMarker023"/>automatically, and our input is <span class="No-Break">recei<a id="_idTextAnchor033"/><a id="_idTextAnchor034"/><a id="_idTextAnchor035"/>ved correctly!</span></p>
			<h1 id="_idParaDest-22"><a id="_idTextAnchor036"/>Improving our scripts with attributes and XML comments</h1>
			<p>We could <a id="_idIndexMarker024"/>stop working with the <strong class="source-inline">PlayerBehaviour</strong> class script here, but I want to touch on a couple of things that we can <a id="_idIndexMarker025"/>use in order to improve the quality and style of our code. This becomes especially useful when you start building projects in teams. As you’ll be working with other people, some of them will be working on code with you. Then, there will be designers and artists who will not be working on code with you but will still need to use the things that <span class="No-Break">you’ve programmed.</span></p>
			<p>When writing scripts, we want them to be as error-proof as possible. Making the <strong class="source-inline">rb</strong> variable <strong class="source-inline">private</strong> starts that process, as now the user will not be able to modify that anywhere outside of this class. We want our teammates to modify <strong class="source-inline">dodgeSpeed</strong> and <strong class="source-inline">rollSpeed</strong>, but we may want to give them some advice as to what it is and/or how it will be used. To do this in the <strong class="bold">Inspector</strong> window, we can make use of so<a id="_idTextAnchor037"/>mething call<a id="_idTextAnchor038"/>ed <span class="No-Break">an </span><span class="No-Break"><strong class="bold">attribute</strong></span><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-23"><a id="_idTextAnchor039"/>Using attributes</h2>
			<p>Attributes <a id="_idIndexMarker026"/>are things we can add to the beginning of a variable, class, or function declaration, which allow us to attach additional functionality to them. There are many of them that exist inside Unity, and you can write your very own attributes <a id="_idTextAnchor040"/>as well, but right now, we’ll talk about the ones that <a id="_idTextAnchor041"/>I use <span class="No-Break">most often.</span></p>
			<h3>The Tooltip attribute</h3>
			<p>If you’ve used <a id="_idIndexMarker027"/>Unity for a period of time, you may have noted <a id="_idIndexMarker028"/>that some components in the <strong class="bold">Inspector</strong> window, such as <strong class="source-inline">Rigidbody</strong>, have a nice feature—if you move your mouse over a variable name, you’ll see a description of what the variables are and/or how to use them. The first thing you’ll learn is how we can get the same effect in our own components by making use of the <strong class="source-inline">Tooltip</strong> attribute. If we do this for the <strong class="source-inline">dodgeSpeed</strong> and <strong class="source-inline">rollSpeed</strong> variables, it will look something <span class="No-Break">like this:</span></p>
			<pre class="source-code">
[Tooltip("How fast the ball moves left/right")]
public float dodgeSpeed = 5;
[Tooltip("How fast the ball moves forward  automatically")]
public f<a id="_idTextAnchor042"/>loat rollSpeed = 5;</pre>
			<p>Save the preceding script and return to <span class="No-Break">the editor:</span></p>
			<div>
				<div id="_idContainer017" class="IMG---Figure">
					<img src="image/B18868_01_10.jpg" alt="Figure 1.10 – Tooltip attribute example"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.10 – Tooltip attribute example</p>
			<p>Now, when we highlight the variable using the mouse and leave it there, the text we placed will <a id="_idIndexMarker029"/>be displayed. This is a great habit to get into, as your teammates can <a id="_idIndexMarker030"/>always tell what it is that your variables are being used for without having to actually look at the <span class="No-Break">script itself.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more <a id="_idIndexMarker031"/>information on the <strong class="source-inline">Tooltip</strong> attribute, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/ScriptReference/TooltipAttribute.html"><span class="No-Break">https://docs.unity3d.com/ScriptReference/TooltipAttribute.html</span></a><span class="No-Break">.</span></p>
			<h3>The Range attribute</h3>
			<p>Another thing that we can use to protect our code is the <strong class="source-inline">Range</strong> attribute. This will allow us to <a id="_idIndexMarker032"/>specify a minimum and maximum value for a variable. Since we want the player to always be moving forward, we may want to restrict the <a id="_idIndexMarker033"/>player from moving backward. To do that, we can add the following highlighted line <span class="No-Break">of code:</span></p>
			<pre class="source-code">
[Tooltip("How fast the ball moves forward  automatically")]
<strong class="bold">[Range(0, 10)]</strong>
public float rollSpeed = 5;</pre>
			<p>Save your script, and return to <span class="No-Break">the editor:</span></p>
			<div>
				<div id="_idContainer018" class="IMG---Figure">
					<img src="image/B18868_01_11.jpg" alt="Figure 1.11 – R﻿ange attribute example"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.11 – R<a id="_idTextAnchor043"/>ange attribute example</p>
			<p>We have now added a slider beside our value, and we can drag it to adjust between our minimum and <a id="_idIndexMarker034"/>maximum values. Not only does this protect our <a id="_idIndexMarker035"/>variable from being changed to an invalid state but also makes it so that our d<a id="_idTextAnchor044"/>esigners can tweak things easily by ju<a id="_idTextAnchor045"/>st dragging <span class="No-Break">them around.</span></p>
			<h3>The RequireComponent attribute</h3>
			<p>Currently, we are using the <strong class="source-inline">Rigidbody</strong> component in order to create our script. When working as <a id="_idIndexMarker036"/>a team member, others may not be reading your scripts but are still expected to use them when creating gameplay. Unfortunately, this <a id="_idIndexMarker037"/>means that they may do things that have unintended results, such as removing the <strong class="source-inline">Rigidbody</strong> component, which will cause errors when our script is run. Thankfully, we also have the <strong class="source-inline">RequireComponent</strong> attribute, which we can use to <span class="No-Break">fix this.</span></p>
			<p>It looks something <span class="No-Break">like this:</span></p>
			<pre class="source-code">
using UnityEngine;
[RequireComponent(typeof(Rigidbody))]
public class PlayerBehaviour : MonoBehaviour</pre>
			<p>By adding this attribute, we state that when we include this component in a GameObject and it doesn’t have a <strong class="source-inline">Rigidbody</strong> component attached to its GameObject, the component will be added automatically. It also makes it so that if we were to try to remove the <strong class="source-inline">Rigidbody</strong> component from this object, the editor will warn us that we can’t, unless we remove the <strong class="source-inline">PlayerBehaviour</strong> component first. Note that this works for any class extended from <strong class="source-inline">MonoBehaviour</strong>; just replace <strong class="source-inline">Rigidbody</strong> with whatever it is that you wish <span class="No-Break">to keep.</span></p>
			<p>Now, if we go into the Unity Editor and try to remove the <strong class="source-inline">Rigidbody</strong> component by right-clicking on it in <strong class="bold">Inspector</strong> and selecting <strong class="bold">Remove Component</strong>, the following message will <span class="No-Break">be seen:</span></p>
			<div>
				<div id="_idContainer019" class="IMG---Figure">
					<img src="image/B18868_01_12.jpg" alt="Figure 1.12 – Can’t remove component window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.12 – Can’t remove component window</p>
			<p>This is exactly <a id="_idIndexMarker038"/>what we want, and this ensures <a id="_idIndexMarker039"/>that the component will be there, allowing us not to have to include <strong class="source-inline">if</strong> checks every time we want to use <span class="No-Break">a component.</span></p>
			<p>Note that, previously, we did not use a <strong class="source-inline">Tooltip</strong> attribute on the private <strong class="source-inline">rb</strong> variable. Since it’s not being displayed in the editor, it’s not really needed. However, there is a way that we can enhance that a<a id="_idTextAnchor046"/><a id="_idTextAnchor047"/>s well: using <span class="No-Break">XML comments.</span></p>
			<h2 id="_idParaDest-24"><a id="_idTextAnchor048"/>XML comments</h2>
			<p>We can achieve a couple of nice things with XML comments that we otherwise couldn’t with <a id="_idIndexMarker040"/>traditional comments, which we were using previously. When using variables/functions instead of code in Visual Studio, we will now see a comment about it. This will help other coders on your team with additional information and details to ensure that they are using your <span class="No-Break">code correctly.</span></p>
			<p>XML comments look something <span class="No-Break">like this:</span></p>
			<pre class="source-code">
/// &lt;summary&gt;
/// A reference to the Rigidbody component
/// &lt;/summary&gt; 
private Rigidbody rb;</pre>
			<p>It may appear that a lot more writing is needed to use this format, but I did not actually type the entire thing out. XML comments are a fairly standard C# feature, so if you are using MonoDevelop or Visual Studio and type <strong class="source-inline">///</strong>, the action will automatically generate the summary blocks for you (and the <strong class="source-inline">param</strong> tags needed, if there are parameters needed for so<a id="_idTextAnchor049"/>mething such as <span class="No-Break">a function).</span></p>
			<p>Now, why would we want to do this? Well, if you select the variable in IntelliSense, it will display the following information <span class="No-Break">to us:</span></p>
			<div>
				<div id="_idContainer020" class="IMG---Figure">
					<img src="image/B18868_01_13.jpg" alt="Figure 1.13 – An example of tooltips from XML comments"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.13 – An example of tooltips from XML comments</p>
			<p>This is a great <a id="_idIndexMarker041"/>help when other people are trying to use your code and it is how Unity’s staff write their code. We can also extend this to functions and classes to ensure that our code is <span class="No-Break">more self-documented.</span></p>
			<p>Unfortunately, XML comments do not show up in the Inspector, and the <strong class="source-inline">Tooltip</strong> attribute can’t be used for some aspects of projects such as functions. With that in mind, I use <strong class="source-inline">Tooltip</strong> for public instructions and/or things that will show up in the <strong class="bold">Inspector</strong> window and XML comments for <span class="No-Break">everything else.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you’re <a id="_idIndexMarker042"/>interested in looking into XML comments more, feel free to check <span class="No-Break">out </span><a href="https://msdn.microsoft.com/en-us/library/b2s063f7.aspx"><span class="No-Break">https://msdn.microsoft.com/en-us/library/b2s063f7.aspx</span></a><span class="No-Break">.</span></p>
			<p>Now that we <a id="_idIndexMarker043"/>have looked at ways of improving the formatting of our code; let’s look at how we can improve the performance by looking at some of the different <strong class="source-inline">Up<a id="_idTextAnchor050"/><a id="_idTextAnchor051"/><a id="_idTextAnchor052"/>date</strong> functions <span class="No-Break">Unity provides.</span></p>
			<h1 id="_idParaDest-25"><a id="_idTextAnchor053"/>Update function versus FixedUpdate function</h1>
			<p>The next thing to look at is our movement code. You may have noticed that we are currently <a id="_idIndexMarker044"/>using the <strong class="source-inline">Update</strong> function in <a id="_idIndexMarker045"/>order to move our player. As the comment above it states, the <strong class="source-inline">Update</strong> function is called once per frame that the game is running. One thing to consider is that the frequency of <strong class="source-inline">Update</strong> being called is variable, meaning that it can change over time. This is dependent on a number of factors, including the hardware that is being used. This means that the more times the <strong class="source-inline">Update</strong> function is called, the better the computer is. We want a consistent experience for all of our players, and one of the ways that we can do that is by using the <span class="No-Break"><strong class="source-inline">FixedUpdate</strong></span><span class="No-Break"> function.</span></p>
			<p><strong class="source-inline">FixedUpdate</strong> is similar to <strong class="source-inline">Update</strong> with some key differences. The first is that it is called at fixed timesteps, meaning the same time between calls. It’s also important to note that physics calculations are done after <strong class="source-inline">FixedUpdate</strong> is called. This means code-modifying physics-based objects should be executed within the <strong class="source-inline">FixedUpdate</strong> function generally, apart from one-off events such <span class="No-Break">as jumping:</span></p>
			<pre class="source-code">
/// &lt;summary&gt;
/// FixedUpdate is a prime place to put physics
/// calculations happening over a period of time.
/// &lt;/summary&gt;
void FixedUpdate()
{
    // Check if we're moving to the side
    var horizontalSpeed = Input.GetAxis("Horizontal") *
                           dodgeSpeed;
    rb.AddForce(horizontalSpeed, 0, rollSpeed);
}</pre>
			<p>By adjusting <a id="_idIndexMarker046"/>the code to use <strong class="source-inline">FixedUpdate</strong>, the ball <a id="_idIndexMarker047"/>should be much more consistent in its <span class="No-Break">movement speed.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more <a id="_idIndexMarker048"/>information on <strong class="source-inline">FixedUpdate</strong>, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.FixedUpdate.html"><span class="No-Break">https://docs.unity3d.com/ScriptRefere<span id="_idTextAnchor054"/><span id="_idTextAnchor055"/>nce/MonoBehaviour.FixedUpdate.html</span></a><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-26"><a id="_idTextAnchor056"/>Putting it all together</h2>
			<p>With all of the stuff we’ve been talking about, we can now have the final version of the script, which looks like <span class="No-Break">the following:</span></p>
			<pre class="source-code">
using UnityEngine;
/// &lt;summary&gt;
/// Responsible for moving the player automatically and
/// receiving input.
/// &lt;/summary&gt;
[RequireComponent(typeof(Rigidbody))]
public class PlayerBehaviour : MonoBehaviour
{
    /// &lt;summary&gt;
    /// A reference to the Rigidbody component
    /// &lt;/summary&gt;
    private Rigidbody rb;
    [Tooltip("How fast the ball moves left/right")]
    public float dodgeSpeed = 5;
    [Tooltip("How fast the ball moves
        forward  automatically")]
    [Range(0, 10)]
    public float rollSpeed = 5;
    // Start is called before the first frame update
    public void Start()
    {
        // Get access to our Rigidbody component
        rb = GetComponent&lt;Rigidbody&gt;();
    }
    /// &lt;summary&gt;
    /// FixedUpdate is a prime place to put physics
    /// calculations happening over a period of time.
    /// &lt;/summary&gt;
    void FixedUpdate()
    {
        // Check if we're moving to the side
        var horizontalSpeed = Input.GetAxis("Horizontal") *
                              dodgeSpeed;
        rb.AddForce(horiz<a id="_idTextAnchor057"/>ontalSpeed, 0, rollSpeed);
    }
}</pre>
			<p>I hope that you also agree that this makes the code eas<a id="_idTextAnchor058"/>ier to understand and better to work with. Now, we can move on <a id="_idTextAnchor059"/>to additional features in <span class="No-Break">the game!</span></p>
			<h1 id="_idParaDest-27"><a id="_idTextAnchor060"/>Having the camera following our player</h1>
			<p>Currently, our camera stays in the same spot while the game is going on. This does not work very well for this game, as the player will be moving while the game is going on. There are <a id="_idIndexMarker049"/>two main ways that we can move our camera. We can just move the camera and make it a child of the player, but that will not work due to the fact that the camera would have the same rotation as the ball, which would cause the camera to spin around constantly and likely cause dizziness and disorientation for the players. Due to that, we will likely want to use a script to move it instead. Thankfully, we can modify how our camera looks at things fairly easily, so let’s go ahead and fix <span class="No-Break">that next:</span></p>
			<ol>
				<li>Go to the Project window and create a new C# script called <strong class="source-inline">CameraBehaviour</strong>. From there, use <a id="_idIndexMarker050"/>the <span class="No-Break">following code:</span><pre class="source-code">
using UnityEngine;
/// &lt;summary&gt;
/// Will adjust the camera to follow and face a target
/// &lt;/summary&gt;
public class CameraBehaviour : MonoBehaviour
{
    [Tooltip("What object should the camera be looking
        at")]
    public Transform target;
    [Tooltip("How offset will the camera be to the
        target")]
    public Vector3 offset = new Vector3(0, 3, -6);
    /// &lt;summary&gt;
    /// Update is called once per frame
    /// &lt;/summary&gt;
    private void Update()
    {
        // Check if target is a valid object
        if (target != null)
        {
            // Set our position to an offset of our
            // target
            transform.position = target.position +
                offset;
            // Change the rotation to face target
            transform.LookAt(target);
        }
    }
}</pre></li>
			</ol>
			<p>This script <a id="_idIndexMarker051"/>will set the position of the object it is attached to to the position of a target with an offset. Afterward, it will change the rotation of the object to face the target. Both of the parameters are marked as <strong class="source-inline">public</strong>, so they can be tweaked in the <span class="No-Break"><strong class="bold">Inspector</strong></span><span class="No-Break"> window.</span></p>
			<ol>
				<li value="2">Save the script and dive back into the Unity Editor. Select the <strong class="bold">Main Camera</strong> object in the <strong class="bold">Hierarchy</strong> window. Then, go to the <strong class="bold">Inspector</strong> window and add the <strong class="source-inline">CameraBehaviour</strong> component to it. You may do this by dragging and dropping the script from the <strong class="bold">Project</strong> window onto the GameObject or by clicking on the <strong class="bold">Add Component</strong> button at the bottom of the <strong class="bold">Inspector</strong> window, typing in the name of our component, and then hitting <em class="italic">Enter</em> to confirm once it <span class="No-Break">is highlighted.</span></li>
				<li>Afterward, drag and drop the <strong class="source-inline">Player</strong> object from the <strong class="bold">Hierarchy</strong> window into the <strong class="bold">Target</strong> property of the script in the <span class="No-Break"><strong class="bold">Inspector</strong></span><span class="No-Break"> window:</span></li>
			</ol>
			<div>
				<div id="_idContainer021" class="IMG---Figure">
					<img src="image/B18868_01_14.jpg" alt="Figure 1﻿.14 – CameraBehaviour component setup"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1<a id="_idTextAnchor061"/>.14 – CameraBehaviour component setup</p>
			<ol>
				<li value="4">Save <a id="_idIndexMarker052"/>the scene and play <span class="No-Break">the game:</span></li>
			</ol>
			<div>
				<div id="_idContainer022" class="IMG---Figure">
					<img src="image/B18868_01_15.jpg" alt="Figure 1.15 – The current state of the game"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.15 – The current state of the game</p>
			<p>The camera <a id="_idIndexMarker053"/>now follows the player as it moves. Feel free to tweak the variables and see how it affects the look of the camera to get the feeling you’d like best for the project. After this, we can have a place for the ball to move toward, which we<a id="_idTextAnchor062"/><a id="_idTextAnchor063"/><a id="_idTextAnchor064"/> will be covering in the <span class="No-Break">next section.</span></p>
			<h1 id="_idParaDest-28"><a id="_idTextAnchor065"/>Creating a basic tile</h1>
			<p>We want <a id="_idIndexMarker054"/>our game to be endless, but in order to achieve that, we will need to have pieces that we can spawn to build our environment; let’s do <span class="No-Break">that now:</span></p>
			<ol>
				<li>To get started, we will first need to create a single repeatable piece for our runner game. To do that, we’ll add some walls to the floor we already have. From the <strong class="bold">Hierarchy</strong> window, select the <strong class="bold">Floor</strong> object and duplicate it by pressing <em class="italic">Ctrl</em> + <em class="italic">D</em> in Windows or <em class="italic">Command</em> + <em class="italic">D</em> on macOS. Rename this new object <span class="No-Break"><strong class="source-inline">Left Wall</strong></span><span class="No-Break">.</span></li>
				<li>Change the <strong class="bold">Left Wall</strong> object’s <strong class="bold">Transform</strong> component by adjusting the <strong class="bold">Scale</strong> values to (<strong class="source-inline">1</strong>, <strong class="source-inline">2</strong>, <strong class="source-inline">10</strong>). From there, select the <strong class="bold">Move</strong> tool by clicking on the button with arrows on the tools overlay or by pressing the <span class="No-Break"><em class="italic">W</em></span><span class="No-Break"> key.</span></li>
			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">A recent addition to Unity is the concept of <strong class="bold">Overlays</strong>, which have replaced the original toolbar. For more <a id="_idIndexMarker055"/>information about them and how to use them, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/2022.1/Documentation/Manual/overlays.html"><span class="No-Break">https://docs.unity3d.com/2022.1/Documentation/Manual/overlays.html</span></a><span class="No-Break">.</span></p>
			<p class="callout">For more <a id="_idIndexMarker056"/>information on Unity’s built-in shortcuts, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/Manual/UnityHotkeys.html"><span class="No-Break">https://docs.unity3d.com/Manual/UnityHotkeys.html</span></a><span class="No-Break">.</span></p>
			<ol>
				<li value="3">We want <a id="_idIndexMarker057"/>this wall to match up with the floor, so hold down the <em class="italic">V</em> key to enter <em class="italic">Vertex Snap</em> mode. In Vertex Snap mode, we can select any of the vertices on a mesh and move them to the same position as another vertex on a different object. This is really useful for making sure that objects don’t have holes <span class="No-Break">between them.</span></li>
				<li>With Vertex Snap mode on, select the inner edge and drag it until it hits the edge of the floor. Alternatively, you can set the <strong class="bold">Position</strong> values to (<strong class="source-inline">3</strong>, <span class="No-Break"><strong class="source-inline">0.95</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">0</strong></span><span class="No-Break">):</span></li>
			</ol>
			<div>
				<div id="_idContainer023" class="IMG---Figure">
					<img src="image/B18868_01_16.jpg" alt="Figure 1.16 – Left Wall setup"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.16 – Left Wall setup</p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more <a id="_idIndexMarker058"/>information on moving objects through the scene, including more details on Vertex Snap mode, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/Manual/PositioningGameObjects.html"><span class="No-Break">https://docs.unit<span id="_idTextAnchor066"/>y3d.com/Manual/PositioningGameObjects.html</span></a><span class="No-Break">.</span></p>
			<ol>
				<li value="5">Then, duplicate <a id="_idIndexMarker059"/>this wall and put the other object on the other side (<strong class="source-inline">-3</strong>, <strong class="source-inline">0.95</strong>, <strong class="source-inline">0</strong>), naming it <span class="No-Break"><strong class="source-inline">Right Wall</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer024" class="IMG---Figure">
					<img src="image/B18868_01_17.jpg" alt="Figure 1.17 – Right Wall setup"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.17 – Right Wall setup</p>
			<p>As you can see in the preceding screenshot, we now protect the player from falling off the left and right edges of the play area. Due to how the walls are set up, if we move the <strong class="source-inline">Floor</strong> object, the walls will move <span class="No-Break">as well.</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">For information <a id="_idIndexMarker060"/>on moving Unity’s camera or navigating to the <strong class="bold">Scene</strong> view, check <span class="No-Break">out </span><a href="https://docs.unity3d.com/Manual/SceneViewNavigation.html"><span class="No-Break">https://docs.unity3d.com/Manual/SceneViewNavigation.html</span></a><span class="No-Break">.</span></p>
			<p>The way this game is designed, after the ball rolls past a single tile, we will no longer need <a id="_idIndexMarker061"/>it to be there anymore. If we just leave it there, the game will get slower over time due to us having so many things in the game environment using memory, so it’s a good idea to remove assets we are no longer using. We also need to have some way to figure out when we should spawn new tiles to continue the path the player <span class="No-Break">can take.</span></p>
			<ol>
				<li value="6">Now, we also want to know where this piece ends, so we’ll add an object with a trigger collider in it. Select <strong class="bold">GameObject</strong> | <strong class="bold">Create Empty</strong> and name this object <span class="No-Break"><strong class="source-inline">Tile End</strong></span><span class="No-Break">.</span></li>
				<li>Then, we will add a <strong class="bold">Box Collider</strong> component to our <strong class="bold">Tile End</strong> object. Under <strong class="bold">Box Collider</strong> in the <strong class="bold">Inspector</strong> window, set the <strong class="bold">Scale</strong> values to (<strong class="source-inline">7</strong>, <strong class="source-inline">2</strong>, <strong class="source-inline">1</strong>) to fit the size of the space the player can walk in. Note that there is a green box around that space showing where collisions can take place. Set the <strong class="bold">Position</strong> property to (<strong class="source-inline">0</strong>, <strong class="source-inline">1</strong>, <strong class="source-inline">10</strong>) to reach past the end of our tile. Finally, check the <strong class="bold">Is Trigger</strong> property so that the collision engine will turn the collider into a trigger, which will be able to run code events when it is hit, but will not prevent the player from moving <span class="No-Break">through it:</span></li>
			</ol>
			<div>
				<div id="_idContainer025" class="IMG---Figure">
					<img src="image/B18868_01_18.jpg" alt="Figure 1.18 – Caption"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.18 – Caption</p>
			<p>As I mentioned briefly before, this trigger will be used to tell the game that our player has finished walking over this tile. This is positioned past the tile due to the fact that <a id="_idIndexMarker062"/>we want to still see tiles until they pass what the camera can see. We’ll tell the engine to remove this tile from the game, but we will <a id="_idTextAnchor067"/>dive more into that later on in <span class="No-Break">the chapter.</span></p>
			<ol>
				<li value="8">Now that we have all of the objects created, we want to group our objects together as one piece that we can create duplicates of. To do this, let’s create an empty GameObject instance by going to <strong class="bold">GameObject</strong> | <strong class="bold">Create Empty</strong> and naming the newly created object <strong class="source-inline">Basic Tile</strong>. Set the <strong class="bold">Position</strong> values of this new object to (<strong class="source-inline">0</strong>, <span class="No-Break"><strong class="source-inline">0</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">0</strong></span><span class="No-Break">).</span></li>
				<li>Then, go to the <strong class="bold">Hierarchy</strong> window and drag and drop the <strong class="bold">Floor</strong>, <strong class="bold">Tile End</strong>, <strong class="bold">Left Wall</strong>, and <strong class="bold">Right Wall</strong> objects on top of it to make them children of the <strong class="bold">Basic </strong><span class="No-Break"><strong class="bold">Tile</strong></span><span class="No-Break"> object.</span></li>
				<li>Currently, the camera can see the start of the tiles, so to fix that, let’s set the <strong class="bold">Basic Tile</strong> <strong class="bold">Position</strong> values to (<strong class="source-inline">0</strong>, <strong class="source-inline">0</strong>, <strong class="source-inline">-5</strong>). As you can see in the following screenshot, now the entire tile will <span class="No-Break">shift back:</span></li>
			</ol>
			<div>
				<div id="_idContainer026" class="IMG---Figure">
					<img src="image/B18868_01_19.jpg" alt="Figure 1.19 – Shifting the tile back"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.19 – Shifting the tile back</p>
			<ol>
				<li value="11">Finally, we will need to know at what position we should spawn the next piece, so create <a id="_idIndexMarker063"/>another empty GameObject by going to <strong class="bold">GameObject</strong> | <strong class="bold">Create Empty</strong> or by pressing <em class="italic">Ctrl</em> + <em class="italic">Shift</em> + <em class="italic">N</em>. Make the new object a child of <strong class="bold">Basic Tile</strong> as well, give it the name <strong class="source-inline">Next Spawn Point</strong>, and set its <strong class="bold">Position</strong> values to (<strong class="source-inline">0</strong>, <span class="No-Break"><strong class="source-inline">0</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">5</strong></span><span class="No-Break">).</span></li>
			</ol>
			<p class="callout-heading">Note</p>
			<p class="callout">Note that when we modify an object that has a parent, the position is rel<a id="_idTextAnchor068"/>ative to the parent, not its <span class="No-Break">world position.</span></p>
			<p>As you can see, the spawn point position will now be on the edge of our <span class="No-Break">current title:</span></p>
			<div>
				<div id="_idContainer027" class="IMG---Figure">
					<img src="image/B18868_01_20.jpg" alt="Figure 1.20 – Next Spawn Point position"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.20 – Next Spawn Point position</p>
			<ol>
				<li value="12">Now we have a single tile that is fully completed. Instead of duplicating this a number of <a id="_idIndexMarker064"/>times by hand, we will make use of Unity’s <a id="_idIndexMarker065"/>concept of <strong class="bold">Prefabs</strong>. Prefabs, or prefabricated objects, are blueprints of GameObjects and components that we can turn into files, which can be duplicated. There are other interesting features that Prefabs have, but we will discuss them as we make use <span class="No-Break">of them.</span></li>
			</ol>
			<p>From the <strong class="bold">Project</strong> window, go to the <strong class="bold">Assets</strong> folder and then create a new folder called <strong class="source-inline">Prefabs</strong>. Then, drag and drop the <strong class="bold">Basic Tile</strong> object from the <strong class="bold">Hierarchy</strong> window to the <strong class="bold">Project</strong> window inside the <strong class="bold">Prefabs</strong> folder. If the text for the <strong class="bold">Basic Tile</strong> name in the <strong class="bold">Hierarchy</strong> window becomes bl<a id="_idTextAnchor069"/>ue, we will know that it was <span class="No-Break">made correctly:</span></p>
			<div>
				<div id="_idContainer028" class="IMG---Figure">
					<img src="image/B18868_01_21.jpg" alt="Figure 1.21 – Basic Tile Prefab created"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.21 – Basic Tile Prefab created</p>
			<p>We now <a id="_idIndexMarker066"/>have a tile prefab that we can create duplicat<a id="_idTextAnchor070"/>es of through code to extend <span class="No-Break">our environment.</span></p>
			<h1 id="_idParaDest-29"><a id="_idTextAnchor071"/>Making it endless</h1>
			<p>Now that we have a foundation, let’s make it so that we can continue running instead of stopping after a short time by spawning copies of this basic tile in front of <span class="No-Break">each other:</span></p>
			<ol>
				<li>To start off with, we have our prefab, so we can delete the original <strong class="bold">Basic Tile</strong> in the <strong class="bold">Hierarchy</strong> window by selecting it and then pressing the <span class="No-Break"><em class="italic">Delete</em></span><span class="No-Break"> key.</span></li>
				<li>We need to have a place to create all of these tiles and potentially manage information for the game, such as the player’s score. In Unity, this is typically referred to as a <strong class="source-inline">GameManager</strong>. From the <strong class="bold">Project</strong> window, go to the <strong class="bold">Scripts</strong> folder and create a new C# script <span class="No-Break">called </span><span class="No-Break"><strong class="source-inline">GameManager</strong></span><span class="No-Break">.</span></li>
				<li>Open the <a id="_idIndexMarker067"/>script in your IDE and use the <span class="No-Break">following code:</span><pre class="source-code">
using UnityEngine;
/// &lt;summary&gt;
/// Manages the main gameplay of the game
/// &lt;/summary&gt;
public class GameManager : MonoBehaviour
{
    [Tooltip("A reference to the tile we want to
        spawn")]
    public Transform tile;
    [Tooltip("Where the first tile should be placed
        at")]
    public Vector3 startPoint = new Vector3(0, 0, -5);
    [Tooltip("How many tiles should we create in
        advance")]
    [Range(1, 15)]
    public int initSpawnNum = 10;
    /// &lt;summary&gt;
    /// Where the next tile should be spawned at.
    /// &lt;/summary&gt;
    private Vector3 nextTileLocation;
    /// &lt;summary&gt;
    /// How should the next tile be rotated?
    /// &lt;/summary&gt;
    private Quaternion nextTileRotation;
    /// &lt;summary&gt;
    /// Start is called before the first frame update
    /// &lt;/summary&gt;
    private void Start()
    {
        // Set our starting point
        nextTileLocation = startPoint;
        nextTileRotation = Quaternion.identity;
        for (int i = 0; i &lt; initSpawnNum; ++i)
        {
            SpawnNextTile();
        }
    }
    /// &lt;summary&gt;
    /// Will spawn a tile at a certain location and
    /// setup the next position
    /// &lt;/summary&gt;
    public void SpawnNextTile()
    {
        var newTile = Instantiate(tile,
            nextTileLocation, nextTileRotation);
        // Figure out where and at what rotation we
        /// should spawn the next item
        var nextTile = newTile.Find("Next Spawn
            Point");
        nextTileLocation = nextTile.position;
        nextTileRotation = nextTile.rotation;
    }
}</pre></li>
			</ol>
			<p>This script <a id="_idIndexMarker068"/>will spawn a number of tiles, one after another, based on the <strong class="source-inline">tile</strong> and <span class="No-Break"><strong class="source-inline">initSpawnNum</strong></span><span class="No-Break"> properties.</span></p>
			<ol>
				<li value="4">Save your script and dive back into Unity. From there, create a new <strong class="source-inline">empty GameObject</strong> and name it <strong class="source-inline">Game Controller</strong>, optionally resetting the position if wanted for organizational purposes. Drag and drop it at the top of the <strong class="bold">Hierarchy</strong> window. For clarity’s sake, go ahead and reset the position if you want to. Then, attach the <strong class="bold">Game Manager</strong> script to the object and then set the <strong class="bold">Tile</strong> property <a id="_idIndexMarker069"/>by dragging and dropping the <strong class="bold">Basic Tile</strong> prefab from the <strong class="bold">Project</strong> window into the <span class="No-Break"><strong class="bold">Tile</strong></span><span class="No-Break"> sl<a id="_idTextAnchor072"/>ot:</span></li>
			</ol>
			<div>
				<div id="_idContainer029" class="IMG---Figure">
					<img src="image/B18868_01_22.jpg" alt="Figure 1.22 – Assigning the Tile property"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.22 – Assigning the Tile property</p>
			<ol>
				<li value="5">Save your scene and run <span class="No-Break">the project:</span></li>
			</ol>
			<div>
				<div id="_idContainer030" class="IMG---Figure">
					<img src="image/B18868_01_23.jpg" alt="Figure 1.23 – The current state of the game"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.23 – The current state of the game</p>
			<p>Great, but now we will need to create new objects after these, and we don’t want to <a id="_idIndexMarker070"/>spawn a crazy number of these at once. It’s better that once we reach the end of a tile, we create a new tile and remove it. We’ll work on optimizing this more later, but that way, we always have about the same number of tiles in the game at any <span class="No-Break">given time.</span></p>
			<ol>
				<li value="6">Go into the <strong class="bold">Project</strong> window and from the <strong class="bold">Scripts</strong> folder, create a new script called <strong class="source-inline">TileEndBehaviour</strong>, using the <span class="No-Break">following code:</span><pre class="source-code">
using UnityEngine;
/// &lt;summary&gt;
/// Handles spawning a new tile and destroying this
/// one upon the player reaching the end
/// &lt;/summary&gt;
public class TileEndBehaviour : MonoBehaviour
{
    [Tooltip("How much time to wait before destroying
        " + "the tile after reaching the end")]
    public float destroyTime = 1.5f;
    private void OnTriggerEnter(Collider other)
    {
        // First check if we collided with the player
        if(other.gameObject.GetComponent
        &lt;PlayerBehaviour&gt;())
        {
            // If we did, spawn a new tile
            var gm = GameObject.FindObjectOfType
                &lt;GameManager&gt;();
            gm.SpawnNextTile();
            // And destroy this entire tile after a
            // short delay
            Destroy(transform.parent.gameObject,
                destroyTime);
        }
    }
}</pre></li>
				<li>Now, to assign it to the prefab, we can go to the <strong class="bold">Project</strong> window and then go into the <strong class="bold">Prefabs</strong> folder. From there, double-click on the <strong class="bold">Basic Tile</strong> object to open up <a id="_idIndexMarker071"/>its editor. From the <strong class="bold">Hierarchy</strong> tab, select the <strong class="bold">Tile End</strong> object and then add a <strong class="bold">Tile End Behaviour</strong> component <span class="No-Break">to it<a id="_idTextAnchor073"/>:</span></li>
			</ol>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/B18868_01_24.jpg" alt="Figure 1.24 – Adding the Tile End Behaviour"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.24 – Adding the Tile End Behaviour</p>
			<ol>
				<li value="8">Click on the left arrow next to the prefab name to return to the <span class="No-Break">basic scene:</span></li>
			</ol>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/B18868_01_25.jpg" alt="Figure 1.25 – Left Arrow location"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.25 – Left Arrow location</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">You can also open the prefab editor by selecting a prefab object from the <strong class="bold">Project</strong> window, going to the <strong class="bold">Inspector</strong> tab, and clicking the <strong class="bold">Open </strong><span class="No-Break"><strong class="bold">Prefab</strong></span><span class="No-Break"> button.</span></p>
			<ol>
				<li value="9">Save your scene and play. You’ll now note that as the player continues to move, new tiles <a id="_idIndexMarker072"/>will spawn as you go; if you switch to the <strong class="bold">Scene</strong> tab while playing, you’ll see that as the ball passes the tiles, they will <span class="No-Break">destroy themselves:</span></li>
			</ol>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/B18868_01_26.jpg" alt="Fig﻿ure 1.26 – Tiles automatically being destroyed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Fig<a id="_idTextAnchor074"/>ure 1.26 – Tiles automatically being destroyed</p>
			<p>This will ensure that there will be tiles in front of the player to visit! But of course, this is just an endless straight line. In the next<a id="_idTextAnchor075"/> section, we will s<a id="_idTextAnchor076"/>ee how to make the game much <span class="No-Break">more interesting.</span></p>
			<h1 id="_idParaDest-30"><a id="_idTextAnchor077"/>Creating obstacles</h1>
			<p>It’s great that we have some basic tiles, but it’s a good idea to give the player something to do, or in our case, something to avoid. This will provide the player with some kind of challenge <a id="_idIndexMarker073"/>and a basic gameplay goal, which is avoiding obstacles here. In this section, you’ll learn how to customize your tiles to add obstacles for your player to avoid. So, let’s look at <span class="No-Break">the steps:</span></p>
			<ol>
				<li>Just like we created a prefab for our basic tile, we will create a single obstacle through code. I want to make it easy to see what the obstacle will look like in the world and make sure that it’s not too large, so I’ll drag and drop a <strong class="bold">Basic Tile</strong> prefab back into <span class="No-Break">the world.</span></li>
				<li>Next, we will create a cube by going to <strong class="bold">GameObject</strong> | <strong class="bold">3D Object</strong> | <strong class="bold">Cube</strong>. We will name this object <strong class="source-inline">Obstacle</strong>. Change the <strong class="bold">Scale</strong> value of <strong class="bold">Y</strong> to <strong class="source-inline">2</strong> and position it above the platform at (<strong class="source-inline">0</strong>, <span class="No-Break"><strong class="source-inline">1</strong></span><span class="No-Break">, </span><span class="No-Break"><strong class="source-inline">0.25</strong></span><span class="No-Break">):</span></li>
			</ol>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/B18868_01_27.jpg" alt="Figure 1.27 – Adding obstacles"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.27 – Adding obstacles</p>
			<ol>
				<li value="3">We c<a id="_idTextAnchor078"/>an then play the game to see how <span class="No-Break">that’ll work:</span></li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/B18868_01_28.jpg" alt="Figure 1.28 – Obstacles stop the player"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.28 – Obstacles stop the player</p>
			<ol>
				<li value="4">As you can see in the preceding screenshot, the player gets stopped, but nothing <a id="_idIndexMarker074"/>really happens. In this instance, we want the player to lose when they hit this obstacle and then restart the game; to do that, we’ll need to write a script. From the <strong class="bold">Project</strong> window, go to the <strong class="bold">Scripts</strong> folder and create a new script called <strong class="source-inline">ObstacleBehaviour</strong>. We’ll use the <span class="No-Break">following code:</span><pre class="source-code">
using UnityEngine;
using UnityEngine.SceneManagement; // LoadScene
public class ObstacleBehaviour : MonoBehaviour
{
    [Tooltip("How long to wait before restarting the
        game")]
    public float waitTime = 2.0f;
    private void OnCollisionEnter(Collision collision)
    {
        // First check if we collided with the player
        if (collision.gameObject.GetComponent
        &lt;PlayerBehaviour&gt;())
        {
            // Destroy the player
            Destroy(collision.gameObject);
            // Call the function ResetGame after
            // waitTime has passed
            Invoke("ResetGame", waitTime);
        }
    }
    /// &lt;summary&gt;
    /// Will restart the currently loaded level
    /// &lt;/summary&gt;
    private void ResetGame()
    {
        // Get the current level's name
        string sceneName =
            SceneManager.GetActiveScene().name;
        // Restarts the current level
        SceneManager.LoadScene(sceneName);
    }
}</pre></li>
				<li>Save the <a id="_idIndexMarker075"/>script and return to the editor, attaching the script to the <strong class="source-inline">Obstacle</strong> GameObject we <span class="No-Break">just created.</span></li>
				<li>Save your scene and try <span class="No-Break">the game<a id="_idTextAnchor079"/>:</span></li>
			</ol>
			<div>
				<div id="_idContainer036" class="IMG---Figure">
					<img src="image/B18868_01_29.jpg" alt="Figure 1.29 – Obstacles destroy the player"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.29 – Obstacles destroy the player</p>
			<p>As you can see in the preceding screenshot, once we hit the obstacle, the player gets destroyed, and then after a few seconds, the game starts up again. You’ll learn how to use particle systems and other things to polish this up, but at this point, it’s functional, which is what <span class="No-Break">we want.</span></p>
			<ol>
				<li value="7">Now that <a id="_idIndexMarker076"/>we know it works correctly, we can make it a prefab. Just as we did with the original tile, go ahead and drag and drop the <strong class="bold">Obstacle</strong> object from <strong class="bold">Hierarchy</strong> into the <strong class="bold">Project</strong> tab and into the <span class="No-Break"><strong class="bold">Prefabs</strong></span><span class="No-Break"> folder<a id="_idTextAnchor080"/>:</span></li>
			</ol>
			<div>
				<div id="_idContainer037" class="IMG---Figure">
					<img src="image/B18868_01_30.jpg" alt="Figure 1.30 – Creating the Obstacle ﻿prefab"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.30 – Creating the Obstacle prefab</p>
			<ol>
				<li value="8">Next, we will remove the <strong class="bold">Obstacle</strong> object, as we’ll spawn it upon creating the tile. To do so, select the <strong class="bold">Obstacle</strong> object in the <strong class="bold">Hierarchy</strong> window and then press the <span class="No-Break"><em class="italic">Delete</em></span><span class="No-Break"> key.</span></li>
				<li>We will make markers to indicate where we would possibly like to spawn our obstacles. Expand the <strong class="bold">Basic Tile</strong> object to show its children and then duplicate the <strong class="source-inline">Next Spawn Point</strong><strong class="bold"> </strong>object and move the new one’s <strong class="bold">Position</strong> to (<strong class="source-inline">0</strong>, <strong class="source-inline">1</strong>, <strong class="source-inline">4</strong>). We will then rename the <span class="No-Break">object </span><span class="No-Break"><strong class="source-inline">Center</strong></span><span class="No-Break">.</span></li>
				<li>Afterward, to help <a id="_idIndexMarker077"/>see the objects within the <strong class="bold">Scene</strong> window, go to the <strong class="bold">Inspector</strong> window and click on the <em class="italic">gray cube</em> icon, and then on the <strong class="bold">Select Icon</strong> menu, select whichever of the color options you’d like (I went with blue). Upon doing this, you’ll see that we can see the text inside the editor if we are close to the object (but it won’t show up in the <strong class="bold">Game</strong> tab <span class="No-Break">by defa<a id="_idTextAnchor081"/>ult):</span></li>
			</ol>
			<div>
				<div id="_idContainer038" class="IMG---Figure">
					<img src="image/B18868_01_31.jpg" alt="Figure 1.31 – Creating a Center marker"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.31 – Creating a Center marker</p>
			<ol>
				<li value="11">We want a way to get all of the potential spawn points we will want in case we decide to extend the project in the future, so we will assign a tag as a reference to make those objects easier to find. To do that, at the top of the <strong class="bold">Inspector</strong> window, click on the <strong class="bold">Tags</strong> dropdown and select <strong class="bold">Add Tag...</strong>. From the menu that pops up, press the <strong class="bold">+</strong> button and then name <span class="No-Break">it </span><span class="No-Break"><strong class="source-inline">ObstacleSpawn</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer039" class="IMG---Figure">
					<img src="image/B18868_01_32.jpg" alt="Figure 1.32 – Creating the ObstacleSpawn tag"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.32 – Creating the ObstacleSpawn tag</p>
			<ol>
				<li value="12">Go back <a id="_idIndexMarker078"/>and select the <strong class="bold">Center</strong> object and assign the <strong class="bold">Tag</strong> property <span class="No-Break">to </span><span class="No-Break"><strong class="bold">ObstacleSpawn</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer040" class="IMG---Figure">
					<img src="image/B18868_01_33.jpg" alt="Figure 1.33 – Assigning the tag to the Center object"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.33 – Assigning the tag to the Center object</p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more information on tags and why we’d want to use them, check <span class="No-Break">o<a id="_idTextAnchor082"/>ut </span><a href="https://docs.unity3d.com/Manual/Tags.html"><span class="No-Break">https://docs.unity3d.com/Manual/Tags.html</span></a><span class="No-Break">.</span></p>
			<ol>
				<li value="13">Go ahead and duplicate this twice and name the others <strong class="source-inline">Left</strong> and <strong class="source-inline">Right</strong>, moving them two units to the left and right of the center to become other possible <span class="No-Break">obstacle points:</span></li>
			</ol>
			<div>
				<div id="_idContainer041" class="IMG---Figure">
					<img src="image/B18868_01_34.jpg" alt="Figure 1.34 – Creating the Left and Right markers"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.34 – Creating the Left and Right markers</p>
			<ol>
				<li value="14">Note that these changes don’t affect the original prefab, by default; that’s why the objects <a id="_idIndexMarker079"/>are currently black text. To make this happen, select <strong class="bold">Basic Tile</strong>, and then in the <strong class="bold">Inspector</strong> window under the <strong class="bold">Prefab</strong> section, click on <strong class="bold">Overrides</strong> and select <span class="No-Break"><strong class="bold">Apply All</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer042" class="IMG---Figure">
					<img src="image/B18868_01_35.jpg" alt="﻿Figure 1.35 – Applying changes to the prefab"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor083"/>Figure 1.35 – Applying changes to the prefab</p>
			<ol>
				<li value="15">Now that the prefab is set up correctly, we can go ahead and remove it by selecting it in the <strong class="bold">Hierarchy</strong> window and <span class="No-Break">pressing </span><span class="No-Break"><em class="italic">Delete</em></span><span class="No-Break">.</span></li>
				<li>We then <a id="_idIndexMarker080"/>need to go into the <strong class="source-inline">GameManager</strong> script and make some modifications. To start with, we will need to introduce some <span class="No-Break">new variables:</span><pre class="source-code">
/// &lt;summary&gt;
/// Manages the main gameplay of the game
/// &lt;/summary&gt;
public class GameManager : MonoBehaviour
{
    [Tooltip("A reference to the tile we want to
        spawn")]
    public Transform tile;
    [Tooltip("A reference to the obstacle we want to
        spawn")]
    public Transform obstacle;
    [Tooltip("Where the first tile should be placed
        at")]
    public Vector3 startPoint = new Vector3(0, 0, -5);
    [Tooltip("How many tiles should we create in
        advance")]
    [Range(1, 15)]
    public int initSpawnNum = 10;
    [Tooltip("How many tiles to spawn with no
        obstacles")]
    public int initNoObstacles = 4;</pre></li>
			</ol>
			<p>The first of these variables is a reference to the obstacle that we will be creating copies of. The second is a parameter of how many tiles should be spawned before spawning obstacles. This is to ensure that the player can see the obstacles before they need to <span class="No-Break">avoid them.</span></p>
			<ol>
				<li value="17">Then, we need <a id="_idIndexMarker081"/>to modify the <strong class="source-inline">SpawnNextTile</strong> function in order to spawn obstacles <span class="No-Break">as well:</span><pre class="source-code">
/// &lt;summary&gt;
/// Will spawn a tile at a certain location and setup
/// the next position
/// &lt;/summary&gt;
<strong class="bold">/// &lt;param name="spawnObstacles"&gt;If we should spawn an</strong>
<strong class="bold">/// obstacle&lt;/param&gt;</strong>
public void SpawnNextTile(bool spawnObstacles = true)
{
    var newTile = Instantiate(tile, nextTileLocation,
                              nextTileRotation);
    // Figure out where and at what rotation we should
    // spawn the next item
    var nextTile = newTile.Find("Next Spawn Point");
    nextTileLocation = nextTile.position;
    nextTileRotation = nextTile.rotation;
<strong class="bold">    if (spawnObstacles)</strong>
<strong class="bold">    {</strong>
<strong class="bold">        SpawnObstacle(newTile);</strong>
<strong class="bold">    }</strong>
}</pre></li>
			</ol>
			<p>Note that we modified the <strong class="source-inline">SpawnNextTile</strong> function to now have a default parameter set to <strong class="source-inline">true</strong>, which will tell us whether we want to spawn obstacles or not. At the <a id="_idIndexMarker082"/>beginning of the game, we may not want the player to have to start dodging immediately, but we can tweak the value to increase or decrease the number we are using. Because it has a default value of <strong class="source-inline">true</strong>, the original version of calling this in the <strong class="source-inline">Start</strong> function will still work without an error, but we will be modifying it <span class="No-Break">later on.</span></p>
			<ol>
				<li value="18">Here, we ask whether the value is <strong class="source-inline">true</strong> to call a function called <strong class="source-inline">SpawnObstacle</strong>, but that isn’t written yet. We will add that next, but first, we will be making use of the <strong class="source-inline">List</strong> class and we want to make sure that the compiler knows which <strong class="source-inline">List</strong> class we are referring to, so we need to add a <strong class="source-inline">using</strong> statement at the top of <span class="No-Break">the file:</span><pre class="source-code">
using UnityEngine;
using System.Collections.Generic; // List</pre></li>
				<li>Now we can write the <strong class="source-inline">SpawnObstacle</strong> function. Add the following function to <span class="No-Break">the script:</span><pre class="source-code">
private void SpawnObstacle(Transform newTile)
{
    // Now we need to get all of the possible places
    // to spawn the obstacle
    var obstacleSpawnPoints = new List&lt;GameObject&gt;();
    // Go through each of the child game objects in
    // our tile
    foreach (Transform child in newTile)
    {
        // If it has the ObstacleSpawn tag
        if (child.CompareTag("ObstacleSpawn"))
        {
            // We add it as a possibility
            obstacleSpawnPoints.Add(child.gameObject);
        }
    }
    // Make sure there is at least one
    if (obstacleSpawnPoints.Count &gt; 0)
    {
        // Get a random spawn point from the ones we
        // have
        int index = Random.Range(0,
            obstacleSpawnPoints.Count);
        var spawnPoint = obstacleSpawnPoints[index];
        // Store its position for us to use
        var spawnPos = spawnPoint.transform.position;
        // Create our obstacle
        var newObstacle = Instantiate(obstacle,
            spawnPos, Quaternion.identity);
        // Have it parented to the tile
        newObstacle.SetParent(spawnPoint.transform);
    }
}</pre></li>
				<li>Lastly, let’s <a id="_idIndexMarker083"/>update the <span class="No-Break"><strong class="source-inline">Start</strong></span><span class="No-Break"> function:</span><pre class="source-code">
/// &lt;summary&gt;
/// Start is called before the first frame update
/// &lt;/summary&gt;
private void Start()
{
    // Set our starting point
    nextTileLocation = startPoint;
    nextTileRotation = Quaternion.identity;
    for (int i = 0; i &lt; initSpawnNum; ++i)
    {
        SpawnNextTile(<strong class="bold">i &gt;= initNoObstacles</strong>);
    }
}</pre></li>
			</ol>
			<p>Now, as long as <strong class="source-inline">i</strong> is less than the value of <strong class="source-inline">initNoObstacles</strong>, it will not spawn a <a id="_idIndexMarker084"/>variable, effectively giving us a buffer of four tiles that can be a<a id="_idTextAnchor084"/>djusted by changing the <span class="No-Break"><strong class="source-inline">initNoObstacles</strong></span><span class="No-Break"> variable.</span></p>
			<ol>
				<li value="21">Save the script and go back to the Unity Editor. Then, assign the <strong class="source-inline">Obstacle</strong> variable of the <strong class="bold">Game Manager (Script)</strong> component in the <strong class="bold">Inspector</strong> window with the <strong class="bold">Obstacle</strong> prefab we <span class="No-Break">created previously:</span></li>
			</ol>
			<div>
				<div id="_idContainer043" class="IMG---Figure">
					<img src="image/B18868_01_36.jpg" alt="Figure 1.36 – Assigning the Obstacle property"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.36 – Assigning the Obstacle property</p>
			<ol>
				<li value="22">It’s a bit hard <a id="_idIndexMarker085"/>to see things currently due to the default light settings, so let’s go to the <strong class="bold">Hierarchy</strong> window and select the <strong class="bold">Directional Light</strong> object. A directional light acts similar to how the Sun works on Earth, shining everywhere from a <span class="No-Break">certain position.</span></li>
				<li>With the default settings, the light is a bit too bright and the shadows are too dark by default, so in the <strong class="bold">Inspector</strong> window, I changed <strong class="bold">Intensity</strong> to <strong class="source-inline">0.5</strong> and then the <strong class="bold">Realtime Shadows</strong> | <strong class="bold">Strength</strong> property <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">0.5</strong></span><span class="No-Break">:</span><a id="_idTextAnchor085"/></li>
			</ol>
			<div>
				<div id="_idContainer044" class="IMG---Figure">
					<img src="image/B18868_01_37.jpg" alt="Figure 1.37 – Adjusting the Directional Light"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.37 – Adjusting the Directional Light</p>
			<ol>
				<li value="24">Save your <a id="_idIndexMarker086"/>scene and play <span class="No-Break">the game:</span></li>
			</ol>
			<div>
				<div id="_idContainer045" class="IMG---Figure">
					<img src="image/B18868_01_38.jpg" alt="Figure 1.38 – The current state of the game"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.38 – The current state of the game</p>
			<p>As you can <a id="_idIndexMarker087"/>see in the preceding screenshot, we now have a number of obstacles for our player <span class="No-Break">to avoid!</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">For more <a id="_idIndexMarker088"/>information on directional lights and the other lighting types that Unity has, check <span class="No-Break">out </span><a href="https://unity3d.com/learn/tutorials/topics/graphics/light-types?playlist=17102"><span class="No-Break">https://unity3d.com/learn/tutorials/topics/graphics/light-types?playlist=17102</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-31"><a id="_idTextAnchor086"/>Summary</h1>
			<p>There you have it! A solid foundation – but just that, a foundation. However, that being said, we covered a lot of content in this chapter. We discussed how to create a new project in Unity, and we built a player that will move continuously, as well as take inputs to move horizontally. We then discussed how we can use Unity’s attributes and XML comments to improve our code quality and help us when working in teams. We also covered how to have a moving camera. We created a tile-based level design system where we created new tiles as the game continued, randomly spawning obstacles for the player <span class="No-Break">to avoid.</span></p>
			<p>Throughout this book, we will explore more that we can do to improve this project and polish it while changing it to make for the best experience possible on mobile platforms. However, before we get to that, we’ll actually need to figure out how to deploy our projects, which is what we will be working on in the <span class="No-Break">next chapter.</span></p>
		</div>
	</body></html>