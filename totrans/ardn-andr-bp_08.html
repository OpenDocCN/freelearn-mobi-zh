<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch08"/>Chapter 8. Control an Arduino Board via NFC</h1></div></div></div><p>In this chapter, we will see <a id="id408" class="indexterm"/>the capabilities of integrating the Arduino <strong>Near Field Communications</strong> (<strong>NFC</strong>) shield from Seeed Studio with an NFC-enabled Android application that uses the <strong>Android Beam</strong> technology<a id="id409" class="indexterm"/> to send a message from the Android app to the<a id="id410" class="indexterm"/> NFC shield antenna. NFC allows instant communication between two devices that are close to each<a id="id411" class="indexterm"/> other, which makes it the perfect technology to open door locks or for payment services.</p><p>We will make a home automation application in this chapter. The NFC shield will be connected to the Arduino Uno board, along with the relay. Therefore, we will be able to switch the relay on or off depending on the message sent by the Android application.</p><p>This baseline project will help you develop interesting projects that use NFC and will potentially expand the capabilities of such a project.</p><p>The following will be the major takeaways from this chapter:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Connecting an NFC shield to an Arduino board</li><li class="listitem" style="list-style-type: disc">Building an Android app to communicate with the NFC Arduino shield</li><li class="listitem" style="list-style-type: disc">Opening and closing a relay from an Android device via NFC</li></ul></div><div><div><div><div><h1 class="title"><a id="ch08lvl1sec34"/>Hardware and software requirements</h1></div></div></div><p>The first<a id="id412" class="indexterm"/> thing you will need for this project is an Arduino Uno board.</p><p>Then, you need<a id="id413" class="indexterm"/> an NFC shield. There are many NFC shields available on the market, but for this project, we chose an NFC shield V2.0 from SeeedStudio. We made this choice as the shield has good documentation and because some example code was already available.</p><p>You will also need a relay module. For this project, we used a 5V relay module from Polulu.</p><p>Finally, to <a id="id414" class="indexterm"/>make the different electrical connections, you will need some jumper wires.</p><p>The following<a id="id415" class="indexterm"/> is the list of all hardware parts you will need for this project, along with links to find these parts on the Web:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <a id="id416" class="indexterm"/>Arduino Uno board (<a class="ulink" href="http://www.adafruit.com/product/50">http://www.adafruit.com/product/50</a>)</li><li class="listitem" style="list-style-type: disc">The <a id="id417" class="indexterm"/>5V relay module (<a class="ulink" href="http://www.pololu.com/product/2480">http://www.pololu.com/product/2480</a>)</li><li class="listitem" style="list-style-type: disc">The <a id="id418" class="indexterm"/>Arduino NFC shield (<a class="ulink" href="http://www.seeedstudio.com/depot/nfc-shield-v20-p-1370.html">http://www.seeedstudio.com/depot/nfc-shield-v20-p-1370.html</a>)</li><li class="listitem" style="list-style-type: disc">The<a id="id419" class="indexterm"/> breadboard (<a class="ulink" href="https://www.adafruit.com/product/64">https://www.adafruit.com/product/64</a>)</li><li class="listitem" style="list-style-type: disc">Jumper <a id="id420" class="indexterm"/>wires (<a class="ulink" href="https://www.adafruit.com/product/758">https://www.adafruit.com/product/758</a>)</li></ul></div><p>On the software side, you will of course need the Arduino IDE. You will also need the following libraries to make the NFC chip work:</p><div><ol class="orderedlist arabic"><li class="listitem">First, download the <a id="id421" class="indexterm"/>PN532 library (<a class="ulink" href="https://github.com/Seeed-Studio/PN532">https://github.com/Seeed-Studio/PN532</a>) and put all the folders into your Arduino's <code class="literal">libraries</code> folder.</li><li class="listitem">Then, download the <a id="id422" class="indexterm"/>NDEF library (<a class="ulink" href="https://github.com/don/NDEF">https://github.com/don/NDEF</a>), and put it in your Arduino's <code class="literal">libraries</code> folder and rename the folder to <code class="literal">NDEF</code>.</li></ol></div><div><div><div><div><h2 class="title"><a id="ch08lvl2sec53"/>Configuring the hardware</h2></div></div></div><p>Now, let's<a id="id423" class="indexterm"/> assemble the project. The first step is to simply put the NFC shield on top of the Arduino Uno board, and to connect the NFC reader to the shield. Note that the NFC can come without the header being soldered; in this case, you will need to solder the headers on the shield yourself. To assemble the NFC reader to the shield, simply connect the reader via the antenna connector on the shield.</p><p>Now, let's connect the relay. Simply connect the relay module <strong>VCC</strong> pin to the 5V pin of the Arduino board, and the <strong>GND</strong> pin to the <strong>GND</strong> pin of the board. Finally, connect the <strong>SIG</strong> pin of the relay to pin <a id="id424" class="indexterm"/>number <strong>8</strong> of the Arduino board.</p><p>The following is what you should end up with:</p><div><img src="img/0389OS_08_01.jpg" alt="Configuring the hardware"/></div></div><div><div><div><div><h2 class="title"><a id="ch08lvl2sec54"/>Testing the NFC shield</h2></div></div></div><p>Before<a id="id425" class="indexterm"/> writing the application to<a id="id426" class="indexterm"/> control the relay via NFC, we will first make sure that the shield is functional and that all the libraries were correctly installed. To do so, we will write a simple Arduino sketch. The following is the complete code for this part:</p><div><pre class="programlisting">#include &lt;SPI.h&gt;
#include &lt;PN532_SPI.h&gt;
#include &lt;PN532.h&gt;
#include &lt;NfcAdapter.h&gt;

// NFC instances
PN532_SPI pn532spi(SPI, 10);
NfcAdapter nfc = NfcAdapter(pn532spi);

void setup(void) {
  
  // Start Serial
  Serial.begin(9600);
  
  // Start NFC chip
  Serial.println("NFC shield started");
  nfc.begin();
}

void loop(void) {
  
  // Start scan
  Serial.println("\nScan a NFC tag\n");
  if (nfc.tagPresent())
  {
    NfcTag tag = nfc.read();
    tag.print();
  }
  delay(5000);
}</pre></div><p>Let's now<a id="id427" class="indexterm"/> look at the details of this sketch. It <a id="id428" class="indexterm"/>starts by including the required libraries:</p><div><pre class="programlisting">#include &lt;SPI.h&gt;
#include &lt;PN532_SPI.h&gt;
#include &lt;PN532.h&gt;
#include &lt;NfcAdapter.h&gt;</pre></div><p>Then, we can create an instance of the NFC adapter with these two lines of code:</p><div><pre class="programlisting">PN532_SPI pn532spi(SPI, 10);
NfcAdapter nfc = NfcAdapter(pn532spi);</pre></div><p>Now, in the <code class="literal">setup()</code> function of the sketch, we will initialize the serial communications:</p><div><pre class="programlisting">Serial.begin(9600);</pre></div><p>We will also start the NFC chip, and print a message on the serial monitor:</p><div><pre class="programlisting">nfc.begin();
Serial.println("NFC shield started");</pre></div><p>Now, in the <code class="literal">loop()</code> function of the sketch, we will check if an NFC tag is present, and we will read it if this is the case:</p><div><pre class="programlisting">if (nfc.tagPresent())
{
  NfcTag tag = nfc.read();
  tag.print();
}
  delay(5000);
}</pre></div><div><div><h3 class="title"><a id="note12"/>Note</h3><p>Note that <a id="id429" class="indexterm"/>all the code for this chapter can be found in the GitHub repository of the book at <a class="ulink" href="https://github.com/marcoschwartz/arduino-android-blueprints">https://github.com/marcoschwartz/arduino-android-blueprints</a>.</p></div></div><p>You can now <a id="id430" class="indexterm"/>upload the sketch to the<a id="id431" class="indexterm"/> Arduino board and open the serial monitor. You should see that the NFC chip is being initialized, and then it starts checking for available tags. If you have a simple NFC tag, you can test it now.</p><p>As an example, you can<a id="id432" class="indexterm"/> also use a simple tag from SeeedStudio (<a class="ulink" href="http://www.seeedstudio.com/depot/MifareOne-RFID-Tag-1356MHz-p-923.html">http://www.seeedstudio.com/depot/MifareOne-RFID-Tag-1356MHz-p-923.html</a>).</p><p>These kinds of tags are actually simpler than the actual RFID technology, but they will work just fine to test our project.</p></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch08lvl1sec35"/>Writing the Arduino sketch</h1></div></div></div><p>We will <a id="id433" class="indexterm"/>now write the code that will receive commands from the Android NFC app. The goal of this code will be to <a id="id434" class="indexterm"/>switch the relay on or off when the NFC shield receives a given code from the Android device. As the code for this part is quite long, we will split the code into several parts that will be detailed individually.</p><p>The code starts by including the required libraries:</p><div><pre class="programlisting">#include "SPI.h"
#include "PN532_SPI.h"
#include "snep.h"
#include "NdefMessage.h"</pre></div><p>We will also define on which pin the relay is connected:</p><div><pre class="programlisting">#define RELAY_PIN 8</pre></div><p>After this, we will define the code that should be received from the Android app to switch the relay on or off:</p><div><pre class="programlisting">#define RELAY_ON "oWnHV6uXre"</pre></div><p>We will also need to create an instance of the NFC chip:</p><div><pre class="programlisting">PN532_SPI pn532spi(SPI, 10);
SNEP nfc(pn532spi);</pre></div><p>To store data<a id="id435" class="indexterm"/> coming from the Android phone via NFC, we will create a <code class="literal">char</code> buffer:</p><div><pre class="programlisting">uint8_t ndefBuf[128];</pre></div><p>In the <code class="literal">setup()</code> function of the sketch, we will start the serial communications:</p><div><pre class="programlisting">Serial.begin(9600);
Serial.println("NFC Peer to Peer Light Switch");</pre></div><p>We will also declare the relay pin as an output:</p><div><pre class="programlisting">pinMode(RELAY_PIN, OUTPUT);</pre></div><p>Now, in<a id="id436" class="indexterm"/> the <code class="literal">loop()</code> function, we will constantly check for data coming from the phone via NFC:</p><div><pre class="programlisting">Serial.println("Waiting for message from Peer");
int msgSize = nfc.read(ndefBuf, sizeof(ndefBuf));</pre></div><p>Now, if the message has a size different from zero, we store it, process it, and then check if it contains the correct key that we defined before. If this is the case, we will switch the state of the relay. The following piece of code does exactly the same:</p><div><pre class="programlisting">if (msgSize &gt; 0) {
    
    // Read message
    NdefMessage message  = NdefMessage(ndefBuf, msgSize);
      
    // Make sure there is at least one NDEF Record
    if (message.getRecordCount() &gt; 0) {

      NdefRecord record = message.getRecord(0);
      Serial.println("Got first record");
  
      // Check the TNF and Record Type
      if (record.getTnf() == TNF_MIME_MEDIA &amp;&amp; record.getType() == "application/com.arduinoandroid.arduinonfc") {
        Serial.println("Type is OK");
    
        // Get the bytes from the payload
        int payloadLength = record.getPayloadLength();
        byte payload[payloadLength];
        record.getPayload(payload);

        // Convert the payload to a String
        String payloadAsString = "";
        for (int c = 0; c &lt; payloadLength; c++) {
          payloadAsString += (char)payload[c];
        }
        
        // Print out the data on the Serial monitor
        Serial.print("Payload is ");Serial.println(payloadAsString);
        
        // Modify the state of the light, based on the tag contents
        if (payloadAsString == RELAY_ON) {
            digitalWrite(RELAY_PIN, HIGH);
        } else {
            digitalWrite(RELAY_PIN, LOW);    
        }
      } else {
        Serial.print("Expecting TNF 'Mime Media' (0x02) with type 'application/com.arduinoandroid.arduinonfc' but found TNF ");
        Serial.print(record.getTnf(), HEX);
        Serial.print(" type ");
        Serial.println(record.getType());
      }
    }
  }
}</pre></div><p>Note that<a id="id437" class="indexterm"/> all <a id="id438" class="indexterm"/>the code for this chapter can be found in the<a id="id439" class="indexterm"/> GitHub repository of the book at <a class="ulink" href="https://github.com/marcoschwartz/arduino-android-blueprints">https://github.com/marcoschwartz/arduino-android-blueprints</a>.</p><p>You can now upload the code to the Arduino board, and move on to the development of the Android application.</p><div><div><div><div><h2 class="title"><a id="ch08lvl2sec55"/>Setting up the Android app</h2></div></div></div><p>In this project, we <a id="id440" class="indexterm"/>will be implementing an Android app that leverages the use of the NFC API and hardware allowing us to send a MIME-type message to switch on and switch off the relay.</p><p>We will assume that you will have switched on the <code class="literal">Auto-Import</code> function within your preferences. If not, <a id="id441" class="indexterm"/>activate it by going to the <strong>Auto-Import</strong> preferences and selecting all available options. The <strong>Auto-Import</strong> preferences are available on Mac and Windows as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">On a Mac, navigate to<strong> Android Studio</strong> &gt; <strong>Preferences</strong>| <strong>Editor</strong>| <strong>Auto-Import</strong></li><li class="listitem" style="list-style-type: disc">On Windows, navigate to <strong>File</strong> | <strong>Settings</strong> &gt; <strong>Editor</strong> &gt; <strong>Auto-Import</strong></li></ul></div><p>With all the necessary settings in place, we will first start off by creating a new project, where we will choose the following within the <strong>New Project</strong> setup:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><strong>Name</strong>: <code class="literal">Arduino NFC</code></li><li class="listitem" style="list-style-type: disc"><strong>Minimum SDK</strong>: <code class="literal">18</code></li><li class="listitem" style="list-style-type: disc"><strong>Project</strong>: <code class="literal">Blank Activity</code></li><li class="listitem" style="list-style-type: disc"><strong>Activity Name</strong>: MainScreen</li><li class="listitem" style="list-style-type: disc"><strong>Domain</strong>: <code class="literal">arduinoandroid.com</code></li></ul></div><p>In order to make this project work, we will need to first go over to the Android <code class="literal">Manifest</code> file, which is available at <code class="literal">app</code> &gt; <code class="literal">src</code> &gt; <code class="literal">main</code> &gt; <code class="literal">AndroidManifest.xml</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch08lvl2sec56"/>Laying out the Android user interface and permissions</h2></div></div></div><p>Once<a id="id442" class="indexterm"/> we open the file, we need to add permissions for the Android application to be able to access the NFC hardware. We <a id="id443" class="indexterm"/>will need to add the following two lines of code to our <code class="literal">AndroidManifest.xml </code>file in order to access both the user permissions and the actual NFC hardware:</p><div><pre class="programlisting">&lt;uses-permission android:name="android.permission.NFC" /&gt;
&lt;uses-feature android:name="android.hardware.nfc" android:required="true" /&gt;</pre></div><p>The next step is to set up the basic Android layout file. This will allow us to implement a user interface consisting of two buttons (switch on and off) and a text view.</p><p>The text within the TextView will be the message that we will be sending to our NFC shield. The first step will be to navigate to the Android layout file, which is available at <code class="literal">app</code> &gt; <code class="literal">src</code> &gt; <code class="literal">res</code> &gt; <code class="literal">layout</code> &gt; <code class="literal">activity_nfc.xml</code>.</p><p>Once we are within this layout file, we will switch to the text view of the Android layout file, and we <a id="id444" class="indexterm"/>will replace the <a id="id445" class="indexterm"/>current code with the following lines of code:</p><div><pre class="programlisting">&lt;RelativeLayout 
    
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:paddingBottom="@dimen/activity_vertical_margin"
    tools:context=".NFCActivity"&gt;

    &lt;TextView
        android:text="NFC Status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/nfcTextStatus"
        android:layout_marginTop="83dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" /&gt;

    &lt;Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Switch On"
        android:id="@+id/switchOnBtn"
        android:layout_marginTop="59dp"
        android:layout_below="@+id/nfcTextStatus"
        android:layout_toLeftOf="@+id/nfcTextStatus"
        android:layout_toStartOf="@+id/nfcTextStatus" /&gt;

    &lt;Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Switch Off"
        android:id="@+id/switchOffBtn"
        android:layout_alignTop="@+id/switchOnBtn"
        android:layout_toRightOf="@+id/nfcTextStatus"
        android:layout_toEndOf="@+id/nfcTextStatus" /&gt;

    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="NFC Message to be sent"
        android:id="@+id/messageToBeam"
        android:layout_below="@+id/switchOnBtn"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="93dp" /&gt;

&lt;/RelativeLayout&gt;</pre></div><p>At this<a id="id446" class="indexterm"/> point, we <a id="id447" class="indexterm"/>should have something that looks as follows:</p><div><img src="img/0389OS_08_02.jpg" alt="Laying out the Android user interface and permissions"/></div></div><div><div><div><div><h2 class="title"><a id="ch08lvl2sec57"/>Coding the app's internals</h2></div></div></div><p>We will then <a id="id448" class="indexterm"/>move on to the <code class="literal">MainScreen.java</code> file, which is available at <code class="literal">app</code> &gt; <code class="literal">src</code> &gt; <code class="literal">main</code> &gt; <code class="literal">java</code> &gt; <code class="literal">package name</code> &gt; <code class="literal">NFCActivity.java</code>.</p><p>We will implement the project step by step within our code. Don't worry about importing the right statements for our project, as Android Studio will automatically import all the statements that we will need for our project if you have the <strong>Auto-Import</strong> function switched on. If not, please follow the instructions present in the Android section of this chapter.</p><p>Feel free to follow along the project through the GitHub Repository where all the source code is available for the readers of our book in its entirety. The repository for this chapter is available at <a class="ulink" href="https://github.com/marcoschwartz/arduino-android-blueprints/tree/master/chapter8/ArduinoNFC">https://github.com/marcoschwartz/arduino-android-blueprints/tree/master/chapter8/ArduinoNFC</a>.</p><p>We will first start off by declaring the user interface's variables and the necessary variables to get the NFC up and running:</p><div><pre class="programlisting">    //Declaring the User Interface Variables for mStatusText as a TextView
    private TextView mStatusText;
    private TextView messageToBeam;
    private Button switchOn;
    private Button switchOff;

    //Initializing the NFC Adapater for sending messages
    NfcAdapter mNfcAdapter;
    private static final int BEAM_BEAMED = 0x1001;
    public static final String MIMETYPE = "application/com.arduinoandroid.arduinonfc";

    //Keys for Opening and Closing the Relay
    String open_key = "oWnHV6uXre";
    String close_key = "C19HNuqNU4";

    //Getting the name for Log Tags
    private final String TAG = NFCActivity.class.getSimpleName();</pre></div><p>Within the <code class="literal">onCreate</code> method, we will implement a number of anonymous classes that we will go through step by step.</p><p>In the first part, we will connect the user interface elements to the main Android code:</p><div><pre class="programlisting">        mStatusText = (TextView) findViewById(R.id.nfcTextStatus);
        messageToBeam = (TextView) findViewById(R.id.messageToBeam);
        switchOn = (Button) findViewById(R.id.switchOnBtn);
        switchOff = (Button) findViewById(R.id.switchOffBtn);</pre></div><p>Then, in <a id="id449" class="indexterm"/>the following code, we need to set <code class="literal">onClickListeners</code> to our button to be able to change the <code class="literal">TextView</code> part to the right text to beam the message to our NFC shield. The term <em>beam</em> is used in this code section since <strong>Android Beam</strong><a id="id450" class="indexterm"/> is the feature of the Android mobile operating system that allows data to be transferred via NFC.</p><div><pre class="programlisting">// Adding OnClick Listeners to the Buttons
        switchOn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                messageToBeam.setText(open_key);
            }
        });

        switchOff.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                messageToBeam.setText(close_key);
            }
        });</pre></div><p>In order to enhance the user experience, we need to send a message to the users that they are unable to use this Android application as they don't have NFC enabled on their device:</p><div><pre class="programlisting">// Check for available NFC Adapter
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            mStatusText.setText("NFC is not available on this device.");
        }</pre></div><p>In the <code class="literal">onCreate()</code> method, we will also implement our basic NFC callback functions to be able to send and receive a message via NFC:</p><div><pre class="programlisting">// Register to create and NDEF message when another device is in range
        mNfcAdapter.setNdefPushMessageCallback(new NfcAdapter.CreateNdefMessageCallback() {
            @Override
            public NdefMessage createNdefMessage(NfcEvent event) {
                //the variable message is from the EditText field
                String message = messageToBeam.getText().toString();
                String text = (message);
                byte[] mime = MIMETYPE.getBytes(Charset.forName("US-ASCII"));
                NdefRecord mimeMessage = new NdefRecord(
                        NdefRecord.TNF_MIME_MEDIA, mime, new byte[0], text
                        .getBytes());
                NdefMessage msg = new NdefMessage(
                        new NdefRecord[]{
                                mimeMessage,
                                NdefRecord
                                        .createApplicationRecord("com.arduinoandroid.arduinonfc")});
                return msg;
            }
        }, this);

        // And handle the send status
        mNfcAdapter.setOnNdefPushCompleteCallback(
                new NfcAdapter.OnNdefPushCompleteCallback() {

                    @Override
                    public void onNdefPushComplete(NfcEvent event) {
                        mHandler.obtainMessage(BEAM_BEAMED).sendToTarget();
                    }
                }, this);</pre></div><p>We need to also<a id="id451" class="indexterm"/> implement a method known as <code class="literal">Handler</code>, which will notify the user via the NFC status text view as to whether the message has been beamed or not:</p><div><pre class="programlisting">   @SuppressLint("HandlerLeak")
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message message) {
            switch (message.what) {
                case BEAM_BEAMED:
                    mStatusText.setText("Your message has been beamed");
                    break;
            }
        }
    };</pre></div><p>For the sake of completeness, we will also include the necessary methods to be able to read NDEF messages<a id="id452" class="indexterm"/> sent via NFC and to improve app performance by not including a number of different instances within the application:</p><div><pre class="programlisting">    @Override
    public void onResume() {
        super.onResume();
        // Did we receive an NDEF message?

        Intent intent = getIntent();
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
            try {
                Parcelable[] rawMsgs = intent
                        .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);

                // we created the message, so we know the format
                NdefMessage msg = (NdefMessage) rawMsgs[0];
                NdefRecord[] records = msg.getRecords();
                byte[] firstPayload = records[0].getPayload();
                String message = new String(firstPayload);
                mStatusText.setText(message);
            } catch (Exception e) {
                Log.e(TAG, "Error retrieving beam message.", e);
            }
        }
    }

    @Override
    public void onNewIntent(Intent intent) {
        setIntent(intent);
    }</pre></div><p>Once you have included all the methods, you should be able to build the app and run it on your Android physical device with NFC capabilities, running Android 4.3 or higher, and with Android Beam activated within the settings.</p><p>You can switch on the relay by tapping the <strong>Switch On</strong> button and, holding the phone against the NFC shield for at least 5 to 10 seconds, and the user interface will get smaller in size. At this point, you need to tap again on the user interface to send your message.</p></div><div><div><div><div><h2 class="title"><a id="ch08lvl2sec58"/>How to go further</h2></div></div></div><p>This project<a id="id453" class="indexterm"/> focused mainly on using NFC to transmit a message and have it read by the Arduino NFC shield.</p><p>The ideal user experience would be the user merely tapping the phone against the NFC shield and switching on the light. This could be achieved via <a id="id454" class="indexterm"/>
<strong>Host-Card Emulation</strong> or with further modification of this baseline project.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch08lvl1sec36"/>Summary</h1></div></div></div><p>In this chapter, we learned the basic essentials of setting an NFC-enabled Android app. This app communicates with Arduino using the NFC shield and the NFC capabilities of Android 4.3 and higher.</p><p>In this, we highlighted the opportunities available for user-engaging projects using NFC. In the next chapter, we will take this to the next level and use Bluetooth to give the user the opportunity to control and engage with a robot.</p></div></body></html>