<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;8.&#xA0;Introduction to Game Math and Physics"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08" class="calibre1"/>Chapter 8. Introduction to Game Math and Physics</h1></div></div></div><p class="calibre8">In this chapter, we will cover the following recipes:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The Pythagorean theorem</li><li class="listitem">Using vectors</li><li class="listitem">Physics</li></ul></div></div>

<div class="book" title="Chapter&#xA0;8.&#xA0;Introduction to Game Math and Physics">
<div class="book" title="Introduction"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch08lvl1sec43" class="calibre1"/>Introduction</h1></div></div></div><p class="calibre8">In this chapter, we will learn all the basic mathematical concepts that we will be using in the next few chapters of this book. While learning game physics, it's always good to have some basic command over mathematics and physics, as they are the main key components in making realistic games. For example, when we drop a ball on the ground, it keeps bouncing back and forth before coming to rest. To implement such conditions, we have to apply certain conditions to physical bodies by updating their physical parameters, such as restitution, force, bounce, friction, and so on. In the next chapter, we will use all the physics and mathematical concepts that we will learn in this chapter.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="The Pythagorean theorem"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec44" class="calibre1"/>The Pythagorean theorem</h1></div></div></div><p class="calibre8">The most widely <a id="id317" class="calibre1"/>used triangles are right-angled triangles. There are many interesting properties of right-angled triangles that can be used in games to make life easier. One of the famous properties is that the square of the hypotenuse of a right-angled triangle is equal to the sum of the squares of the other two sides.</p></div>

<div class="book" title="The Pythagorean theorem">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec108" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre8">The <a id="id318" class="calibre1"/>hypotenuse of a triangle is the longest side of a right-angled triangle, as shown in the following diagram:</p><div class="mediaobject"><img src="../images/00125.jpeg" alt="Getting ready" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">If the hypotenuse is denoted as h, the Pythagorean theorem can be written as follows:</p><p class="calibre8">h<sup class="calibre16">2</sup> = a<sup class="calibre16">2</sup> +b<sup class="calibre16">2</sup></p><p class="calibre8">If you take the square root of both the sides, you will get the following:</p><p class="calibre8">h = sqrt(a<sup class="calibre16">2</sup>+b<sup class="calibre16">2</sup>)</p><p class="calibre8">This means that if we know the length of any two sides of a right-angled triangle, we can easily find the length of the third side.</p><p class="calibre8">When working with the game's Artificial Intelligence (AI), we will be using the Pythagorean theorem frequently to calculate which agent is closer to the object. If side A is bigger than side B, then it will always be bigger, irrespective of whether the lengths are squared or not. Now, we can avoid taking the square roots to compare the distance. Instead, we can just compare the squared values.</p></div></div>

<div class="book" title="The Pythagorean theorem">
<div class="book" title="How to do it"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec109" class="calibre1"/>How to do it</h2></div></div></div><p class="calibre8">Here's a practical usage<a id="id319" class="calibre1"/> of the Pythagorean theorem:</p><p class="calibre8">Let's say we have a gunman at position X (8, 4) and his target at position Y (2, 1). The gunman can only fire a bullet a maximum distance of 10 units. Consequently, to determine whether he can hit the target, the distance between them must be calculated. This is easy to determine using the Pythagorean theorem. First, the lengths of the sides YZ and XZ shown in the following figure are calculated:</p><div class="mediaobject"><img src="../images/00126.jpeg" alt="How to do it" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">To find the<a id="id320" class="calibre1"/> distance XZ, the y component of the gunman's position is subtracted from the y component of the target's position as follows:</p><p class="calibre8">XZ = 4 - 1 = 3</p><p class="calibre8">To find the distance YZ, we do the same, but with the x components:</p><p class="calibre8">YZ =8 - 2 =6</p><p class="calibre8">Now that YZ and XZ are known, the distance from the gunman to the target can be calculated using the Pythagorean theorem as follows:</p><div class="mediaobject"><img src="../images/00127.jpeg" alt="How to do it" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">Well within target range. Let the target be hit!</p><p class="calibre8">If you know the length of one of the sides of a right-angled triangle and one of the remaining two angles, you can determine everything else about the triangle using trigonometry. First, take a look at the following figure. It shows the names of each side of a right-angled triangle.</p><div class="mediaobject"><img src="../images/00128.jpeg" alt="How to do it" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">The following<a id="id321" class="calibre1"/> is what the figure represents:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><em class="calibre9">Sin(θ) = opposite/hypotenuse</em></span></li><li class="listitem"><span class="strong"><em class="calibre9">Cos(θ) = adjacent/hypotenuse</em></span></li><li class="listitem"><span class="strong"><em class="calibre9">Tan(θ) = opposite/adjacent</em></span></li></ul></div><p class="calibre8">The best way to see how the sine, cosine, and tangent functions can be utilized is by taking a look at the following example:</p><div class="mediaobject"><img src="../images/00129.jpeg" alt="How to do it" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">We want to calculate the length of the opposite side, given the length of the adjacent side and the angle. From here, we know that the tangent of an angle is equal to the opposite side divided by the adjacent side. Rearranging the equation a little gives us the following:</p><p class="calibre8">
<span class="strong"><em class="calibre9">o = aTan(θ)</em></span>
</p><p class="calibre8">So, all we have to do in order to get <span class="strong"><strong class="calibre2">o</strong></span> is to pick up a calculator (to determine the tangent) and plug in the numbers, as follows:</p><p class="calibre8">
<span class="strong"><em class="calibre9">o = 6Tan(0.9)</em></span>
</p><p class="calibre8">
<span class="strong"><em class="calibre9">   = 7.56</em></span>
</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Using vectors"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec45" class="calibre1"/>Using vectors</h1></div></div></div><p class="calibre8">We will be using <a id="id322" class="calibre1"/>vector math frequently when designing the AI for our games. Vectors are used everywhere, from calculating which direction a game agent should shoot its gun in, to expressing the inputs and outputs of an artificial neural network. You should know them well.</p><p class="calibre8">Let's take a point P as follows:</p><p class="calibre8">P = (x, y)</p><p class="calibre8">A two-dimensional vector<a id="id323" class="calibre1"/> looks almost the same when written, as follows:</p><p class="calibre8">V = (x, y)</p><p class="calibre8">However, although similar, a vector represents two components: direction and magnitude. The right-hand side of the following diagram shows the vector (9, 6) situated at the origin:</p><div class="mediaobject"><img src="../images/00130.jpeg" alt="Using vectors" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">The bearing of the arrow shows the direction of the vector, and the length of the line represents the magnitude of the vector. A vector can represent the velocity of a vehicle. The magnitude of the vector represents the speed of the vehicle, and the direction represents the heading of the vehicle.</p><p class="calibre8">That's quite a lot<a id="id324" class="calibre1"/> of information from just two numbers (x, y). Vectors aren't restricted to two dimensions either. They can be any size at all. You would use a three-dimensional vector, (x, y, z), for example, to represent the velocity of a vehicle that moves in three dimensions, like a helicopter. Let's take a look at some of the things you can do with vectors.</p></div>

<div class="book" title="Using vectors">
<div class="book" title="How to do it"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec110" class="calibre1"/>How to do it</h2></div></div></div><p class="calibre8">Vectors can be used in multiple ways, few of them are listed as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Multiplying vectors is a cinch. You just multiply each component by the value. For example, the vector V (4, 5) multiplied by 2 is (8, 10).</li><li class="listitem">The magnitude of a vector is its length. In the previous example, the magnitude of the vector V (4, 5) is the distance from the start point to the point P(4, 5) which is illustrated in the following figure:<div class="mediaobject"><img src="../images/00131.jpeg" alt="How to do it" class="calibre10"/></div><p class="calibre13"> </p><p class="calibre15">This is easy to calculate using the Pythagorean theorem as follows:</p><p class="calibre15">magnitude = <span class="strong"><img src="../images/00132.jpeg" alt="How to do it" class="calibre17"/></span>
</p><p class="calibre15">If you had a three-dimensional vector, then you would use the similar equation:</p><p class="calibre15">magnitude = <span class="strong"><img src="../images/00133.jpeg" alt="How to do it" class="calibre17"/></span>
</p><p class="calibre15">Mathematicians place two vertical bars around a vector to denote its length, as shown in the following:</p><p class="calibre15">magnitude = |V|</p></li><li class="listitem"><span class="strong"><strong class="calibre2">Normalizing Vectors</strong></span>: When <a id="id325" class="calibre1"/>a vector is normalized, it retains its direction but its magnitude is recalculated so that it is of unit length (a length of 1). To do this you divide each component of the vector by the magnitude of the vector. Mathematicians write the formula as follows:<p class="calibre15">N = V/|V|</p><p class="calibre15">Therefore, to normalize the vector (4, 5), you would do the following:</p><p class="calibre15">new X = 4 /6.403 = 0.62</p><p class="calibre15">new Y = 5 /6.403 = 0.78</p></li><li class="listitem"><span class="strong"><strong class="calibre2">Resolving Vectors</strong></span>: It's <a id="id326" class="calibre1"/>possible to use trigonometry to resolve a vector into two separate vectors, one parallel to the <span class="strong"><em class="calibre9">x</em></span> axis and one to the <span class="strong"><em class="calibre9">y</em></span> axis. Take a look at the vector, V, representing the thrust of a jet fighter at point V, as shown in the following figure:<div class="mediaobject"><img src="../images/00134.jpeg" alt="How to do it" class="calibre10"/></div><p class="calibre13"> </p></li></ul></div><p class="calibre8">To resolve V into its x/y components, we need to find <span class="strong"><strong class="calibre2">Oa</strong></span> and <span class="strong"><strong class="calibre2">Ob</strong></span>. This will give us the component of the aircraft's thrust<a id="id327" class="calibre1"/> that is acting along the <span class="strong"><em class="calibre9">y</em></span> axis, and the component along the <span class="strong"><em class="calibre9">x</em></span> axis. Another way of putting it is that <span class="strong"><strong class="calibre2">Oa</strong></span> is the amount of thrust acting along the <span class="strong"><em class="calibre9">x</em></span> axis, and <span class="strong"><strong class="calibre2">Ob</strong></span> is the amount along the <span class="strong"><em class="calibre9">y</em></span> axis.</p><p class="calibre8">First, let's calculate the amount of thrust along the <span class="strong"><em class="calibre9">y</em></span> axis: <span class="strong"><strong class="calibre2">Oa</strong></span>. From trigonometry, we know that:</p><p class="calibre8">cos(θ) = adjacent / hypotenuse = Oa / |V|</p><p class="calibre8">Rearranged, this gives:</p><p class="calibre8">Oa = |V| Cos(θ) = y component</p><p class="calibre8">To calculate Ob, the following equation is used:</p><p class="calibre8">sin(θ) = opposite / hypotenuse = Ob / |V|</p><p class="calibre8">Giving:</p><p class="calibre8">Ob = |V| sin(θ) = x component</p><p class="calibre8">
<span class="strong"><strong class="calibre2">The Dot Product</strong></span>: The dot product<a id="id328" class="calibre1"/> gives the angle between two vectors—something you will need to calculate often when programming AI. Given the two two-dimensional vectors, u and v, the equation looks like the following:</p><p class="calibre8">u.v = ux vx + uy uy  //Equation (1)</p><p class="calibre8">The <code class="email">. </code>(dot) symbol denotes the dot product. Equation (1) doesn't give us an angle though. I promised an angle, so you'll get one! Here's another way of calculating the dot product:</p><p class="calibre8">u.v = |u| |v| cos(θ)</p><p class="calibre8">Rearranging, we get:</p><p class="calibre8">
<span class="strong"><em class="calibre9">cos(θ) = u.v / |u| |v|</em></span>
</p><p class="calibre8">Remember, the<a id="id329" class="calibre1"/> vertical lines surrounding a vector indicate its magnitude. Now is the time when you discover one of the useful uses for normalizing vectors. If v and u are both normalized, then the equation simplifies enormously to:</p><p class="calibre8">
<span class="strong"><em class="calibre9">cos(θ) = u.v / 1*1            = u.v</em></span>
</p><p class="calibre8">Substituting in the equation from Equation (1) for the right-hand side gives:</p><p class="calibre8">
<span class="strong"><em class="calibre9">cos(θ) = u.v = ux vx + uy uy</em></span>
</p><p class="calibre8">This gives us an equation for the angle between the vectors.</p></div></div>

<div class="book" title="Using vectors">
<div class="book" title="How it works"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec111" class="calibre1"/>How it works</h2></div></div></div><p class="calibre8">Here's an example <a id="id330" class="calibre1"/>of some of the vector methods you've just learned about working together. Let's say you have a game agent, Eric the Troll, who stands at position T (the origin) and facing in the direction given by the normalized vector H (for heading). He can smell a helpless princess at position P and would very much like to throw his club at her, to tenderize her a little, before he rips her to pieces. To do this, he needs to know how many radians he must rotate to face her. The following figure shows the situation:</p><div class="mediaobject"><img src="../images/00135.jpeg" alt="How it works" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">You've discovered<a id="id331" class="calibre1"/> that you can calculate the angle between two vectors using the dot product. However, in this problem you only have one vector to start with, <span class="strong"><strong class="calibre2">H</strong></span>. Therefore, we need to determine a vector—the vector <span class="strong"><strong class="calibre2">TP</strong></span> that points directly at the princess. This is calculated by subtracting point <span class="strong"><strong class="calibre2">T</strong></span> from point <span class="strong"><strong class="calibre2">P</strong></span>. Because <span class="strong"><strong class="calibre2">T</strong></span> is at the origin (0, 0), in this example, P–T= P. However, the answer P–T is a vector, so let's show this by typing it in bold and calling it <span class="strong"><strong class="calibre2">P</strong></span>.</p><p class="calibre8">We know that the cosine of the angle the troll needs to turn to face the princess is equivalent to the dot product of <span class="strong"><strong class="calibre2">H</strong></span> and <span class="strong"><strong class="calibre2">P</strong></span>, provided both vectors are normalized. <span class="strong"><strong class="calibre2">H</strong></span> is already normalized, so we only need to normalize <span class="strong"><strong class="calibre2">P</strong></span>. Remember, to normalize a vector, its components are divided by its magnitude.</p><p class="calibre8">Consequently, the normal of P (NP) is:</p><p class="calibre8">Np = P / |P| // Equation (2)</p><p class="calibre8">The dot product can now be used to determine the angle:</p><p class="calibre8">cos(θ) = Np.H // Equation (3)</p><p class="calibre8">So:</p><p class="calibre8">θ = cos<sup class="calibre16">-1</sup>(Np.H) // Equation (4)</p><p class="calibre8">To clarify the process, let's do the whole thing again, but with some numbers. Let's say, the troll is situated at the origin T (0, 0) and has a heading of H (1, 0). The princess is standing at the point P (4, 5). How many radians does the troll have to turn to face the princess? We know<a id="id332" class="calibre1"/> that we can use Equation (4) to calculate the angle, but first we need to determine the vector, TP, between the troll and the princess and normalize it. To obtain TP, we subtract T from P, resulting in the vector (4,5). To normalize TP, we divide it by its magnitude, resulting in NTP (0.62,0.78). Finally, we plug the numbers into Equation (4), which is illustrated as follows:</p><p class="calibre8">
<span class="strong"><em class="calibre9">θ = cos</em></span><sup class="calibre16">-1</sup><span class="strong"><em class="calibre9">(Ntp.H)</em></span>
</p><p class="calibre8">
<span class="strong"><em class="calibre9">θ = cos</em></span><sup class="calibre16">-1</sup><span class="strong"><em class="calibre9"> ((0.62 *1) + (0.78 * 0))</em></span>
</p><p class="calibre8">
<span class="strong"><em class="calibre9">θ = cos</em></span><sup class="calibre16">-1</sup><span class="strong"><em class="calibre9"> (0.62)</em></span>
</p><p class="calibre8">
<span class="strong"><em class="calibre9">θ = 0.902 radians</em></span>
</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Physics"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec46" class="calibre1"/>Physics</h1></div></div></div><p class="calibre8">Physics is the<a id="id333" class="calibre1"/> branch of science concerned with the nature and properties of matter and energy. The subject matter of physics includes mechanics, heat, light and other radiation, sound, electricity, magnetism, and the structure of atoms.</p></div>

<div class="book" title="Physics">
<div class="book" title="How to do it"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec112" class="calibre1"/>How to do it</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Time</strong></span>: Time <a id="id334" class="calibre1"/>is a scalar quantity (completely specified by its magnitude and with no direction) measured in seconds:<p class="calibre15">Time = Distance / Speed</p></li><li class="listitem"><span class="strong"><strong class="calibre2">Distance</strong></span>: The <a id="id335" class="calibre1"/>standard unit of distance—a scalar quantity—is the meter, abbreviated to m:<p class="calibre15">Distance=Speed * Time</p></li><li class="listitem"><span class="strong"><strong class="calibre2">Mass</strong></span>: Mass<a id="id336" class="calibre1"/> is a scalar quantity measured in kilograms, abbreviated to kg. Mass is the measure of an amount of something.</li><li class="listitem"><span class="strong"><strong class="calibre2">Velocity</strong></span>: Velocity<a id="id337" class="calibre1"/> is a vector quantity (a quantity that has magnitude and direction) that expresses the rate of change of distance over time. The standard unit of measurement of velocity is meters per second, abbreviated to m/s. This can be expressed mathematically as:<p class="calibre15">v = ∆x / ∆t</p><p class="calibre15">The Greek capital letter ∆, read as delta, is used in mathematics to denote a change in quantity.</p></li><li class="listitem"><span class="strong"><strong class="calibre2">Acceleration</strong></span>: Acceleration<a id="id338" class="calibre1"/> is a vector quantity that expresses the rate of change of velocity over time and is measured in meters per second square, written as m/s². Acceleration can be expressed mathematically as:<p class="calibre15">a = ∆v / ∆t </p></li></ul></div></div></div>

<div class="book" title="Physics">
<div class="book" title="How it works"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec113" class="calibre1"/>How it works</h2></div></div></div><p class="calibre8">The above <a id="id339" class="calibre1"/>physics properties are used in the following ways:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre2">Time</strong></span>: In <a id="id340" class="calibre1"/>games often we have to evaluate the time required for the player to reach a object with a given speed. In such cases, we use the Pythagorean theorem to evaluate the distance between the object and the player, then we will use the <span class="strong"><em class="calibre9">Time = Distance/Speed</em></span> formula to evaluate the time that the player will need to cover a certain distance with a given speed.</li><li class="listitem"><span class="strong"><strong class="calibre2">Distance</strong></span>: Similarly, to <a id="id341" class="calibre1"/>evaluate the distance between the player and the object, we can use the <span class="strong"><em class="calibre9">Distance = Speed * Time</em></span> formula to evaluate the distance between the object and the player, considering the speed and time as known factors.</li><li class="listitem"><span class="strong"><strong class="calibre2">Mass</strong></span>: This <a id="id342" class="calibre1"/>is a property that is frequently used while dealing with the physics engine. Whenever we want to demonstrate both the objects with different behavior in terms of movement, we can change their mass property. Consider a situation in which we want to have two physics objects such as bullet and a ball. In this case, the mass of the bullet will be very low as compared to the ball, so as to make the bullet travel with a high speed, even with a very little applied force or impulse.</li><li class="listitem"><span class="strong"><strong class="calibre2">Velocity</strong></span>: Whenever<a id="id343" class="calibre1"/> we apply any force to any physics body by using a vector, we are changing the velocity of the object by providing the magnitude and the direction to the physics object.</li></ul></div></div></div></body></html>