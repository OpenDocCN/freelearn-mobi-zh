<html><head></head><body>
        <section>

            <header>
                <h1 class="header-title">Adding Player Character for an Action Fighting Game</h1>
            </header>

            <article>
                
<p>The previous chapter covered many different things and concepts regarding 2D game development in Unity and it followed a practical approach to finish a simple 2D game called Perky Penguin. The chapter continued the practice example of the game from <a href="ca00129d-f14f-4f32-9ceb-9d05d828b98b.xhtml" target="_blank">Chapter 1</a>, <em>Introduction to Android Game Development with Unity3D</em>, and finished by covering important topics on 2D games. It started by adding particle effects in Unity and then it explained in detail about the concept of Particle Systems, the basics of Particle Systems, and how these are added in Unity. Then we continued the discussion to apply the concepts in a practical example by adding a rocket fire particle system for the penguin in the game, and discussed such properties as emission, shape, and color.</p>
<p>After Particle Systems, the chapter focused on creating an environment and adding backgrounds in the game. It explained how to import these backgrounds, and how to make them repeatable in the game. The concept of sorting layers and tags was also covered and the chapter moved on to camera management and how a penguin would never go out of the screen if the camera always focused on it.</p>
<p>After these regular topics, a very interesting and useful topic of Prefabs was discussed in the chapter. After some basic discussion of Prefabs, the game was enlightened with Level Prefabs, which allowed the game to repeat the background and generate obstacles at runtime. This discussion also included the generator concept and its code implementation as well.</p>
<p>Finally, the chapter finished with adding obstacles in the game and the basic collision detection with the penguin. This led to the concept of triggers as well, which becomes very useful in creating invisible colliders to detect some object's presence at some place in the game. The following is a screenshot of the game after completion of the previous chapter:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="249" src="assets/image_03_001.png" width="639"/></div>
<div class="packt_figure packt_figref CDPAlignCenter CDPAlign">Figure 3.1 A snapshot of Penguin Perky game</div>
<div class="packt_infobox">If you are interested in creating any 2D game in Unity, then this is covered in more detail in <a href="ca00129d-f14f-4f32-9ceb-9d05d828b98b.xhtml" target="_blank">Chapter 1</a>, <em>Introduction to Android Game Development with Unity3D</em> and <a href="36ed5299-901b-4888-9b37-b21738cc051a.xhtml" target="_blank">Chapter 2</a>, <em>Finishing the Perky Penguin 2D Game</em>.</div>
<p>This chapter is a totally new level compared to previous chapters. In this chapter, we will extend our knowledge about Unity to 3D game development, which can often become very confusing and tricky for new game developers. Up until 2D game development, the focus of developers and programmers revolved around the concept of images, sprites, and two dimensions, ignoring the camera's depth. The new developers who have worked on graphics tools such as Adobe Photoshop or Gimp prove to be very good in 2D game development and grasp the concepts very quickly, but 3D becomes very tough because it needs expertise in highly-used advanced commercial tools such as Autodesk Maya, 3D Studio Max, and so on. These tools require many years of practice and experience and that makes 3D game development very hard to learn for new programmers.</p>
<p>It is out of the scope of this book to cover all the topics, but we will learn about basic concepts and their usage through creating a 3D action fighting game from scratch. This chapter will teach from the very start about the configuration of 3D game projects, importing 3D models, and how textures and materials are applied on these models. Moving on, this chapter will introduce the concept of rigging and what interfaces Unity has to offer to make rigging easier, such as humanoid rigging, generic rigging, and so on. This concept of rigging will be implemented in practice by importing and rigging the player character model of the action fighting game in Unity. We will further apply animations to allow for basic character movement.</p>
<p>Now, let's put our words into action and start learning about 3D game development, focusing on the configuration of 3D game projects in Unity in the following section.</p>
<p>This chapter includes the following topics:</p>
<ul>
<li>Configuring a project for 3D games</li>
<li>Importing 3D models</li>
<li>Applying textures and materials</li>
<li>Generic and humanoid rigs</li>
<li>Configuring humanoid avatars</li>
<li>Legacy and Mecanim animation systems</li>
<li>State machines with Animation controllers</li>
</ul>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Configuring Project for 3D Games in Unity</h1>
            </header>

            <article>
                
<p>In previous chapters, we were learned about 2D games and we also learned about how 2D game projects are created and configured in Unity. For 3D projects, the procedure is almost identical, except some changes need to be done. Let's start by launching Unity 5 and creating an empty project with it.</p>
<p>If you are already aware of 3D game projects configuration or have worked on any 3D game before, you can safely skip this section. When you launch Unity 5, it shows a project wizard, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="380" src="assets/image_03_002.png" width="656"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.2 Unity 5 new project wizard</div>
<p>The project wizard shows a list of all the recent projects along with their names. The most recent project is highlighted for quick opening. On the top-right side of the wizard, there are controls to create a new project from scratch and open any specific project from any directory. Let's start by creating a new project by clicking on the <span class="packt_screen">New project</span> button on the top right. You will be presented with the dialog, shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="456" src="assets/image_03_003.png" width="788"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.3 New project details wizard</div>
<p>Write the project name and select its path location. Below these text inputs, you will observe a simple selection from two options: 2D and 3D. We will choose 3D as we are creating a 3D game. This is shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="60" src="assets/image_03_004.png" width="202"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.4 Project type selector for 2D and 3D</div>
<p>This toggle lets you tell Unity whether your project is 2D or 3D. Although this doesn't affect or change the project in any way while working on it, it affects the default project setting for an easier workflow. For example, in 3D mode when you import any image asset into the project, Unity will take it as a texture and in 2D mode, Unity will take it as a sprite. You can also change the mode later from the project anytime; it is not necessary to select at project creation time. By default, Unity will create the project in 3D mode.</p>
<p>Now, let's name the project as <span class="packt_screen">Free Fighter</span> and press <span class="packt_screen">Create Project</span>. This will import some pre-defined assets and launch the Unity interface editor. You can observe that an empty new scene will be created as well containing two game objects in the hierarchy panel: <span class="packt_screen">Main Camera</span> and <span class="packt_screen">Directional Light</span>. We won't discuss these objects at the moment, but these will be covered in upcoming chapters as we manage the cameras and lights for the games.</p>
<p>In this blank unsaved empty scene, the first thing we need is the model of the player character. Let's discuss the model or models in general in the next section.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Importing 3D models</h1>
            </header>

            <article>
                
<p>Before we go into the nifty details of 3D modeling and Unity3D, let's discuss first what 3D models are. In computer graphics, 3D modeling is the process of constructing and developing a mathematical and visual representation of any three-dimensional (3D) surface of an object via any 3D modeling software. The end product of that process is called a <strong>3D model</strong>, or simply model, in the context of this book. The interesting thing about 3D models is that they are in 3D and any computer or laptop screen is a 2D surface, so it becomes a tricky task to display the 3D model in the horizons and bounds of 2D screens. So a process of displaying 3D models in the form of 2D images is used and this is called <strong>3D rendering</strong>. It comes with 3D software tools including our very own Unity3D. This rendering process uses lights and cameras to render the 3D model as it's something real and it presents the image of it in the viewer's mind. We can get into more and more details of this never-ending topic and discussion of 3D models but it is far outside the scope of this book. So, we will talk only about the important details that can help in building a 3D game in Unity, namely models and modeling tools.</p>
<p>3D modelling is the process of developing a mathematical representation of any three-dimensional surface of an object. Remember, a 3D model is the main asset of any game. A model file may contain a 3D model, such as any character, building, furniture, and so on. A model file may also contain animation data which can be used to animate this model or other models. The animation data is imported as one or more animation clips. We can't create 3D models in Unity because Unity is the gaming engine for developing games, not for creating 3D models. We just can just import them and use them in the game. There are many 3D modeling software packages available on the market, and they are improving day by day as well.</p>
<p>In Unity, importing meshes can be achieved from two main types of files: <strong>exported 3D</strong> file formats and <strong>proprietary 3D application</strong> files. Let's further describe exported 3D file formats. Unity can read <kbd>.fbx</kbd>, <kbd>.dae</kbd>, <kbd>.3DS</kbd>, <kbd>.dxf</kbd>, and <kbd>.obj</kbd>. The advantages and disadvantages of exported 3D file formats are described in the following text:</p>
<p><strong>Advantages</strong></p>
<ul>
<li>Only export the data you need</li>
<li>Verifiable data (re-import into the 3D package before Unity)</li>
<li>Generally smaller files</li>
<li>Encourages modular approach; for example, different components for collision types or interactivity</li>
<li>Supports other 3D packages whose proprietary formats we don't have direct support for</li>
</ul>
<p><strong>Disadvantages</strong></p>
<ul>
<li>Can be a slower pipeline for prototyping and iterations</li>
<li>Easier to lose track of versions between source (working file) and game data (for example, exported FBX)</li>
</ul>
<p>The second type of files are the proprietary 3D application files such as <kbd>.Max</kbd> and <kbd>.Blend</kbd> file formats from 3D Studio Max or Blender. Unity also can import Max, Maya, Blender, Cinema4D, Modo, Lightwave, and Cheetah3D files. For example, MAX, MB, MA, and so on. The advantages and disadvantages of proprietary 3D application files are as follows:</p>
<p><strong>Advantages:</strong></p>
<ul>
<li>Quick iteration process (save the source file and Unity reimports)</li>
<li>Simple initially</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>A licensed copy of that software must be installed on all machines using the Unity project</li>
<li>Files can become bloated with unnecessary data</li>
<li>Big files can slow Unity updates</li>
<li>Less validation, so it is harder to troubleshoot problems</li>
</ul>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">3D models</h1>
            </header>

            <article>
                
<p>3D models are the representation of any physical object constructed using a collection of geometric primitives such as triangles, lines, curved surfaces, and so on. The following figure shows some basic primitives used for the creation of 3D models:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="215" src="assets/image_03_005.png" width="314"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign">Figure 3.5 Some basic primitives for 3D modeling</div>
<p>All the 3D models and objects are created by assembling, modifying, nudging, and so on, these primitive shapes and objects. To understand it better, take a look at the following figure which shows some 2D primitives used behind the scenes of 2D graphics tools such as Photoshop or Gimp:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="408" src="assets/image_03_006.png" width="478"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.6 Some 2D primitives</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Modelling tools</h1>
            </header>

            <article>
                
<p>Now that you have a good understanding of 3D models, let's move ahead in our discussion with the modeling tools. These 3D models are created in very advanced and mostly commercial tools such as Autodesk Maya, Autodesk 3D Studio Max, Blender, and so on. These tools offer modelers a variety of choices and features to create and animate the 3D models and render them in the form of images or video movies, or directly export them into model files.</p>
<p>The following table shows some 3D modelling tools along with their license types of usage:</p>
<table class="table">
<tbody>
<tr>
<td>
<p><strong>Tool name</strong></p>
</td>
<td>
<p><strong>License type</strong></p>
</td>
</tr>
<tr>
<td>
<p>Autodesk Maya</p>
</td>
<td>
<p>Commercial</p>
</td>
</tr>
<tr>
<td>
<p>Autodesk 3D Studio Max</p>
</td>
<td>
<p>Commercial</p>
</td>
</tr>
<tr>
<td>
<p>Cinema 4D</p>
</td>
<td>
<p>Commercial</p>
</td>
</tr>
<tr>
<td>
<p>Cheetah 3D</p>
</td>
<td>
<p>Commercial</p>
</td>
</tr>
<tr>
<td>
<p>Blender</p>
</td>
<td>
<p>General public</p>
</td>
</tr>
</tbody>
</table>
<div class="CDPAlignCenter CDPAlign">Table 3.1 Some 3D modeling tools</div>
<p>Unity3D is not an advanced modeling tool but it offers some basic primitives and allows some basic modeling features as well. But, in order to create any 3D game or movie in Unity3D, you need more detailed 3D models in it. So, Unity3D allows developers and modelers to import most kinds of 3D model files to customize, animate, and use them in games or movies with programming as well. This feature makes Unity3D quite powerful indeed compared to other 2D or 3D game engines. Unity3D supports two types of files when it comes to import models:</p>
<ol>
<li>Exported 3D file formats such as <kbd>.fbx</kbd>, <kbd>.dae</kbd>, <kbd>.obj</kbd>.</li>
<li>Proprietary 3D application/tool files or native files of modeling tools such as <kbd>.max</kbd>, or <kbd>.mb</kbd>.</li>
</ol>
<p>The exported files tend to be lighter in size and these files allow you to select the data you want to use in Unity3D at the time of exporting it. Unity3D recommends these types of models to use in the game or movie in order to optimize it for the sake of real-time rendering and high performance.</p>
<p>The later proprietary files are the native source files of the models of tools such as Maya and 3D Studio Max. The biggest advantage of these files is that they allow for a quick iteration process of testing games/movies by seemingly re-importing models at the time of editing as well. But you need the licensed copy of the modeling tool on every computer in which you use Unity3D and the model files. These files are often very large and not recommended for releasing games or movies in Unity3D.</p>
<div class="packt_infobox">It is highly recommended to use FBX files in Unity3D as it allows for embedding animations and textures directly in the model itself.</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Importing 3D models in Unity3D</h1>
            </header>

            <article>
                
<p>So, after a little detailed discussion on 3D models and modeling tools, let's get into the real details of how to import 3D models in Unity3D. If we say this in terms of importing sprites, images, and sounds, it sounds similar to putting any 3D model file in the <kbd>Assets</kbd> folder of the project, but it actually gets complicated due to lots of concepts and settings involved in the process of importing in Unity3D.</p>
<p>In this section, we will discuss how to import any 3D model in Unity. We will import a simple house model of FBX type in Unity now. The FBX type is short for Filmbox files and is used mostly in AutoCAD for CAD/CAM designing for houses, architectures, cars, and engineering modeling. Major 3D modeling tools also give the option of exporting models into <kbd>.fbx</kbd> format as well. The main advantage of using FBX files is that it allows developers to select which type of data should be exported in the file. This data can include meshes, mesh animations, rigs, or bone animations. We have used a simple house model as shown in the following figure, downloaded from The <strong>Free 3D Models</strong> (<strong>t3fm</strong>) website available for general public use:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class="image-border" height="285" src="assets/image_03_007.jpg" width="365"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.7 A house model</div>
<p>Now, first open our 3D Free Fighter project in Unity, and you will see the <span class="packt_screen">Assets</span> folder in the <span class="packt_screen">Project</span> panel. Right-click on the <span class="packt_screen">Assets</span> folder and create a new folder called <kbd>Models</kbd>. There are many methods of importing models into Unity3D. Click on the <span class="packt_screen">Assets</span> menu and choose the <span class="packt_screen">Import New Asset...</span> option and select the <span class="packt_screen">Farmhouse.fbx</span> file and finally click on the <span class="packt_screen">Import</span> button.</p>
<p>This whole process is as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="555" src="assets/image_03_008.png" width="819"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.8 Importing 3D model in Unity3D</div>
<p>After importing, you will see that the file will be placed in the <span class="packt_screen">Models</span> folder. But you will also notice that another folder with the name <span class="packt_screen">Materials</span> will automatically be created with the model file in the <span class="packt_screen">Project</span> panel, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="519" src="assets/image_03_009.png" width="487"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.9 House model in project panel</div>
<p>Now the model is imported into Unity and it can be used in the game. You can drag it in the scene in a similar way as you did to add images and sprites in Unity3D. After dragging it into the scene, you will notice that the model is not colored. It's just a single color white and gray model as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="363" src="assets/image_03_010.png" width="506"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.10 The house model in scene</div>
<p>The reason for the disappearance of the colors, called textures and materials in Unity3D, is that the .FBX file of this model only contains the mesh of the model that is shown in the scene. The textures and materials also come separate from the models and can also be embedded into the model file itself. It is good practice to separate these files into Unity3D.</p>
<div class="packt_infobox">The model files placed in the <kbd>Assets</kbd> folder manually are automatically imported into Unity3D.</div>
<p>A model file can contain any 3D model such as any character, building, or any geometric shape. We have a farmhouse model imported in Unity3D. In the <span class="packt_screen">Scene view</span> or <span class="packt_screen">Hierarchy</span> panel, the imported model is placed as a game object of the model prefab, which is automatically created by Unity3D at the time of importing the models. This game object will contain all the model data such as mesh, lights, and so on, as the children objects of it. The following figure shows the farmhouse model's game object in the <span class="packt_screen">Hierarchy</span> panel:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="184" src="assets/image_03_011.png" width="179"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.11 The Farmhouse model prefab object hierarchy</div>
<p>Developers often get confused after importing models with the different issues involved in the process. Some models become too much small in size after importing, or some models come rotated reversely in Unity3D. This is all about the settings of the model. Since these models are created in other tools such as Maya3D, the difference in scaling and scene settings can cause such issues.</p>
<p>So, in order to customize these settings more, Unity provides the properties of the model in the <span class="packt_screen">Inspector</span> panel, which can help in setting the properties of the model before using it in the scene. When you select the imported model in the <kbd>Assets</kbd> directory, you will see some other settings in the <span class="packt_screen">Inspector</span> panel, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="327" src="assets/image_03_012.png" width="476"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.12 Farmhouse model settings</div>
<p>As you can see in the preceding screenshot, a model file contain three kinds of data presented in tabs form in the settings: <span class="packt_screen">Model</span>, <span class="packt_screen">Rig</span>, and <span class="packt_screen">Animations</span>. The <span class="packt_screen">Model</span> tab includes all the data related to the mesh, materials, and the model itself. The <span class="packt_screen">Rig</span> tab and <span class="packt_screen">Animations</span> tab allow developers to set the animation behavior of the model, either with the embedded animations in the model file itself or from other animation clips in Unity3D. We will discuss these details later in this chapter. Although there are lots of settings in the <span class="packt_screen">Model</span> tab itself, we will discuss only some of the important settings which are used generally when importing FBX models in Unity3D:</p>
<ol>
<li><strong>Scale</strong>: This scale factor is used for removing the gap between the units system in Unity3D and the units system in the modeling tool in which the model has been created. Unity3D generally refers to one unit of the scale factor as one meter. So, developers should set the scale factor accordingly. Normally, this is set to 1.</li>
</ol>
<ol start="2">
<li><strong>Generate colliders</strong>: This check allows developers to automatically generate colliders for the mesh and model for the collision detection. Keep in mind that with this check enabled, Unity3D will create mesh colliders, which can sometimes result in very heavy processing, depending on the mesh itself. So, if you want the customized colliders, you can customize, or create your mesh collider in Unity as well.</li>
</ol>
<p>These two settings will set the model to a good condition. We should be reminded that our model is still in a single color and we haven't yet imported textures and materials to it. So in the next section, we will discuss about applying textures and materials on the model objects.</p>
<div class="packt_infobox">The default scale factor for different 3D models is as follows: <kbd>.fbx</kbd>, <kbd>.max,</kbd> <kbd>.jas</kbd>, <kbd>.c4d</kbd> = 0.01, <kbd>.mb</kbd>, <kbd>.ma</kbd>, <kbd>.lxo</kbd>, <kbd>.dxf</kbd>, <kbd>.blend</kbd>, <kbd>.dae</kbd> = 1, <kbd>.3ds</kbd> = 0.1.</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Importing FBX Model</h1>
            </header>

            <article>
                
<p>FBX is the abbreviation of Filmbox. Unity supports FBX files which can be generated from many popular 3D applications. Be aware of export scope, for example, meshes, cameras, lights, animation rigs, and so on:</p>
<ol>
<li>Applications often let you export selected objects or a whole scene</li>
<li>Make sure you are exporting only the objects you want to use from your scene by either exporting selected data, or removing unwanted data from your scene.</li>
<li>Good working practice often means keeping a working file with all lights, guides, control rigs etc. but only exporting the data you need with export selected, an export preset, or even a custom scene exporter.</li>
</ol>
<p>See the following figure to determine the difference between OBJ and FBX:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" height="127" src="assets/image_03_047.jpg" width="493"/></div>
<div class="packt_infobox">In Unity asset store, many 3d models are available free or paid, that can be easily used in any game. Also you can find on internet many website are available where user sell or royalty-free 3D models (<span class="URLPACKT"><a href="http://tf3dm.com/">http://tf3dm.com</a>)</span></div>
<p>So, we have modelled a house in 3D Max, and exported it into FBX format; remember in that model we have only mash, do right click in the <span class="packt_screen">Project</span> panel then click <span class="packt_screen">Import New Asset...</span>, then browse you FBX model path and click <span class="packt_screen">import</span> button. Unity provides us also with a drag and drop feature so we can drop an fbx model into the <span class="packt_screen">Project</span> panel. The following figure shows how to import a model into the scene by clicking the <span class="packt_screen">Import New Asset...</span> button:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" height="458" src="assets/image_03_048.jpg" width="776"/></div>
<p>You can see the FBX model in the <span class="packt_screen">Project</span> panel the better way to go forward your project in managed way so create empty folder name as <span class="packt_screen">Model</span> in root, then drop your fbx file and material folder of it into the <span class="packt_screen">Model</span> folder. The following figure depicts the drop FBX model into the <span class="packt_screen">Model</span> folder:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img src="assets/image_03_049.jpg"/></div>
<p>Now go to the <span class="packt_screen">Model</span> folder and drag <span class="packt_screen">Farmhouse FBX.fbx</span> file and drop it into the <span class="packt_screen">Hierarchy</span> panel; if the models showing are small, that means the scale of models are small, to increase the scale size of model select <span class="packt_screen">Farmhouse FBX.fbx</span> from the <span class="packt_screen">Project</span> panel, you will see 3 tabs in <span class="packt_screen">Inspector</span> panel named <span class="packt_screen">Model</span>, <span class="packt_screen">Rig</span> and <span class="packt_screen">Animations</span>, we focus on model for now model are selected by default. In the first textbox, <span class="packt_screen">Scale</span> <span class="packt_screen">Factor</span>, do change value 1 to whatever you need let suppose 10, then click on <span class="packt_screen">Apply</span> button end of <span class="packt_screen">Model</span> panel.</p>
<p>Consider the following figure for illustrating the increase in the scale size of the model:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img height="576" src="assets/image_03_050.jpg" width="378"/></div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Applying textures and materials</h1>
            </header>

            <article>
                
<p>When it comes to 3D modeling, textures and materials become tricky as they give life to models. The 3D modeling tools give quite a lot of flexibility to modelers and designers to work together and create amazing textures and convert them from simple images to 3D working models. Looking from a graphics and designing perspective, there are three components to materialize the model: textures, shaders, and materials. Unity3D gives lot of options to customize these three parts and lets developers create exactly what they want that model to look like. These three components are connected in such a way that developers can easily change and alter each component individually and see its results on the model in real-time. The following figure shows the connection of these three components:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class="image-border" height="167" src="assets/image_03_013.jpg" width="291"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.13 Connection between textures, shades, and materials</div>
<p>You can see in the preceding figure that textures are not directly applied on the model. Instead, they are applied on the materials and the materials are then applied on the model. Materials also add some materializing properties in order to behave with the lights present in the scene to make the model look 3D in the 2D world of the computer screen. Let's give a little detail to each component in the following sub-sections.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Textures</h1>
            </header>

            <article>
                
<p>Generally, the mesh object gives a rough approximation of the shape of the model and how it will look like, but it's the textures that define the shape itself and present it in a real form from the perspective of the viewer. Textures are the flat bitmap images that are wrapped on the model mesh surface. The easiest example would be to think of them as the image that is printed on any 3D model, such as any cylinder or cube or any complex model such as our farmhouse.</p>
<p>The following figure shows this scenario:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="112" src="assets/image_03_014.png" width="365"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.14 Texture on 3D model</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Texture Importer</h1>
            </header>

            <article>
                
<p>All the texture exist in the <kbd>Project</kbd> folder in the image form. Unity gives to change the type of texture--after importing a texture you just select texture from the project panel and modify from the topmost item in the inspector. That allows you to select the type of texture you want to create from the source image file. All the types of texture are shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class="image-border" height="247" src="assets/image_03_051.jpg" width="623"/></div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Applying texture in shaders</h1>
            </header>

            <article>
                
<p>The shaders you use for your objects put specific requirements on which textures you need, but the basic principle is that you can put any image file inside your project. If it meets the size requirements (specified in the following text), it will get imported and optimized.</p>
<p>There are certain steps to put texture in shaders:</p>
<ol>
<li>After selecting <span class="packt_screen">Model</span>, shaders will be visible in the <span class="packt_screen">Inspector</span> panel.</li>
<li><span class="packt_screen">Texture</span> button is present in it, click on it for applying texture.</li>
<li>Select Texture, so that our 3D model will be wrapped in our selected texture.</li>
</ol>
<p>This is represented in the following figure:</p>
<div class="CDPAlignCenter CDPAlign"><img class="image-border" height="455" src="assets/image_03_052.jpg" width="701"/></div>
<div class="packt_infobox">Unity can read the following file formats for texture PSD, TIFF, JPG, TGA, PNG, GIF, BMP, IFF, and PICT. It should be noted that Unity can import multi-layer PSD and TIFF files.</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Shaders</h1>
            </header>

            <article>
                
<p>In computer graphics, shaders are a little hard to understand for newbies. A texture tells the viewer of what is drawn on the surface and mesh of the 3D model object, but it is the shader that tells how that texture is drawn. As we saw earlier in <em>Figure 3.13</em>, a material is a mixture of textures and shaders. A material contains the properties and textures, and a shader tells us which properties and shaders a material can have. Let's take an example to understand this concept better. Imagine you have a piece of wood. The shape of the piece is the mesh object of the 3D model. And the color, wooden pattern, and other visible elements on the shape are the textures of the 3D model. Now if you drop that wooden piece in the water, then it will look a little different than the original wooden piece. Note that it is still the same mesh with the same textures, but it will look different when it is dropped in the water. That difference in the visibility is defined by the shader in Unity3D. The water is the shader in this example. We will discuss about how these are made and applied in Unity3D later in this book.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Materials</h1>
            </header>

            <article>
                
<p>In simple terms, materials define how a surface should be rendered in computer graphics. It is not just a container of textures and shaders. Rather it comes with many different properties which vary on the shader itself and gets the reference of the textures to further define the final visibility of the model itself. The following figure shows the difference in two materials with different shaders:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class="image-border" height="375" src="assets/image_03_015.jpg" width="411"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.15 Materials with different shaders in Unity</div>
<p>Note the little shine in the left-side material. The reason for this is the specular shader and the right-side material is using the diffuse shader. Both have common properties such as color, base texture, and so on. Unity comes with a lot of built-in shaders, and you can also write your own custom shaders to further polish and define the look of the model.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Applying textures on a farmhouse model</h1>
            </header>

            <article>
                
<p>So far, we have given an overview of textures, shaders, and materials, and how they are all connected with each other. But, don't forget that we have an imported model of the farmhouse in our scene which appears in the shade of a white and gray color. Now, we have to apply texture on it and create a material for the model. Unity provides a very easy and convenient way of applying textures on the models.</p>
<p>Create a new folder called <kbd>Textures</kbd> in the <kbd>Assets</kbd> folder, and load the image shown in the following figure in that folder by using the normal file explorer or dragging the image into the folder in Unity3D:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class="image-border" height="552" src="assets/image_03_016.jpg" width="551"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.16 Farmhouse model texture</div>
<p>Once it is imported in the <kbd>Assets</kbd> folder, you have to apply it on the model placed in the Scene view. Drag the texture from the <kbd>Assets</kbd> folder and drop it on the model in the Scene view and Unity will automatically create a material and do the rendering stuff for you. You can then further customize it according to your requirements. The following figure shows the process of applying textures on the material:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="497" src="assets/image_03_017.png" width="542"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.17 Farmhouse model texture</div>
<p>After applying the texture, you will observe that the farmhouse will be in the color form and will look much more realistic now. The following figure shows the simple comparison between before texture and after texture of the farmhouse model and its properties in the <span class="packt_screen">Inspector</span> panel:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="552" src="assets/image_03_018.png" width="554"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.18 Comparison between before texture and after texture</div>
<p>Note that before texture, Unity3D has applied a default texture of the farmhouse texture with the standard shader on the model, which makes it look like a white color. While after texture is applied, Unity puts a numbered name of the texture (called <strong>Farmhouse Texture 6</strong> in the image). Refer to the label number 1 in the preceding figure for the shader. You can also note that the Albedo property (labelled as number 2 in the figure) was empty before but now it is filled with our texture image. You can also apply texture by clicking on the little square shape on the side of Albedo. It will open a popup of the <kbd>Assets</kbd> explorer panel, through which you can select your required texture from Assets and it will be applied on the model.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Generic and humanoid rigs</h1>
            </header>

            <article>
                
<p>Although we have discussed the models and how to import these models in Unity3D, we have not talked about what those models should be or which types of models are preferred by the game engine. A model can include anything from a simple cube with texture to furniture and homes to life characters and aliens to space orbits and planets. In most cases, games are more about the interactive storyline, which involves lots of characters (mostly humans) with many kinds of emotions and expressions. Unity3D, being a very easy to learn and use platform for game development, took this task of providing characters and humans support and offers a highly flexible and fully featured set of tools to handle, animate, and manage character models in a very easy way.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">What are humanoid characters?</h1>
            </header>

            <article>
                
<p>As it is clear in the word <em>humanoid</em> itself, humanoid characters are the characters based on humans. It is not necessary to be a human, but it should be based on the physical shape of humans. The monkey model is a great example of a humanoid model. It could be a two-legged alien and so on. Since most games contain humanoid models, to make things easier, Unity3D provides good feature set for working with humanoid models.</p>
<p>There are a lot of free and paid resources to get humanoid models from the Internet. Or you can create your own humanoid models using tools such as Poser, MakeHuman, or Mixamo. Some of these tools also provide features for rigging and adding skin on the model as well.</p>
<div class="packt_infobox">Rigging, in simple words, is the process of adding a skeleton and joining bones in any 3D model.</div>
<p>You can also get many free and paid humanoid models of various varieties such as males, females, old characters, warriors, fighters, force characters, and so on, from the Asset Store. Humanoid characters mostly possess bone structure, skin muscles, and textures for costumes or clothing. The bone structure or skeleton, as it is called in real life, is the important thing in any humanoid character. It allows us to repose and animate other humanoid characters with the same skeleton or, as it's called <strong>rigging</strong>. The following figure shows a simple human character with its skin, rigging, and muscles:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/image_03_019.png"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.18 A simple humanoid character with skin mesh (left), rigging (middle), and muscles (right)</div>
<p>It should be noted that any humanoid character will have the rigging structure as shown in the previous figure. We will discuss about rigging in the later sections in more detail. Now, we will discuss about what kind of tools are offered by Unity3D for humanoid character models and how they are used. We will learn this by importing a freely available character model from the Unity Asset store.</p>
<div class="packt_infobox">The Unity Asset store (<a href="http://assetstore.unity3d.com"><span class="URLPACKT">http://assetstore.unity3d.com</span></a>) is an online marketplace from Unity3D for the assets and ready-made toolkits, add-ons, extensions, and code for usage in Unity games, and is available in free and paid versions.</div>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Importing humanoid models</h1>
            </header>

            <article>
                
<p>Let's start learning how to import humanoid models into Unity. We will start from creating an empty project called <span class="packt_screen">Humanoid Character</span>. As the project is built and compiled successfully, we have an empty project with an empty scene opened as always.</p>
<p>Now, there is nothing different about humanoid models when it comes to modeling formats. A humanoid model is a simple model of file types we discussed in previous sections, such as FBX, MB, 3DS, and so on. We can import those by dragging and dropping the file from the File Explorer into Unity or by manually importing it with the menu option of <span class="packt_screen">Import New Asset...</span> as well. In this example, we will use a freely available model from the Unity Asset Store. The asset name is Raw Mocap Data for Mecanim and it includes a character developed by Unity3D and a huge collection of animations such as moving forward, backward, jump, crawl, and so on. This can be found at: <a href="https://www.assetstore.unity3d.com/en/#!/content/5330"><span class="URLPACKT">https://www.assetstore.unity3d.com/en/#!/content/5330</span></a>. Paste this URL into your browser, and click on the <span class="packt_screen">Open in Unity</span> button, and it will open Unity3D and show the Asset Store panel with the asset on it, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="394" src="assets/image_03_020.png" width="602"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.19 Unity Asset Store panel in Unity3D</div>
<p>Now, if you have already downloaded this asset into your local computer, then it will show you the <span class="packt_screen">Import</span> button; otherwise, it will show you the <span class="packt_screen">Download</span> button. Download and then import this asset into your Unity project and it will show you a dialog panel with the list of all the files to be imported. This is to let developers know which files are new and which files will get replaced with this asset package. This is shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="396" src="assets/image_03_021.png" width="342"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.20 Raw Mocap data files before importing</div>
<p>We have an empty project, so it is showing the <span class="packt_screen">NEW</span> tab in front of all the files. For now, click on the <span class="packt_screen">All</span> button on the bottom left section of the panel and then click on the <span class="packt_screen">Import</span> button. This will take a little time to import, decompress, and import all the assets into the project. Once it is done, you will notice a new directory called <span class="packt_screen">Raw Mocap Data</span> in your <kbd>Assets</kbd> folder. This is where all the files and asset data have been placed. This is shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="163" src="assets/image_03_022.png" width="245"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.21 Raw Mocap data files into Assets after importing</div>
<p>Since this section is all about the model and its settings, we will ignore the <span class="packt_screen">Animations</span> directory for now. In the <span class="packt_screen">Raw Mocap Data</span> directory, you will observe a model called the <span class="packt_screen">DefaultAvatar</span> file. This is technically an FBX file, if you see it in File Explorer and FBX files are the most preferred model files in Unity3D. When you select it, you will see the <span class="packt_screen">Rig</span> tab of settings selected in the <span class="packt_screen">Inspector</span> panel along with some predefined import options as shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="328" src="assets/image_03_023.png" width="438"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.22 Default avatar model import settings in the Inspector</div>
<p>This model comes with many materials placed in the <span class="packt_screen">Materials</span> directory, which are assigned on the character and show its skin and clothing, as we can see in the small preview section in the preceding figure. There is also the <span class="packt_screen">Animations</span> directory with a text file containing the animations list. We will talk about those animations in later sections.</p>
<p>So, let's select the <span class="packt_screen">Rig</span> tab, if it is not already selected from the <span class="packt_screen">Inspector</span> panel, and discuss the different options there. You will notice that <span class="packt_screen">Animation Type</span> is already selected as the <span class="packt_screen">Humanoid</span> option. When any model file is imported in Unity, it automatically tries to detect the type of the model by comparing its rigging structure with a predefined humanoid structure and create an automatic avatar for it. We will discuss this predefined humanoid skeleton structure in the later sections. If it is matched successfully, Unity associates the <span class="packt_screen">Animation Type</span> to <span class="packt_screen">Humanoid;</span> otherwise it sets it to <span class="packt_screen">Generic</span>. There are also two more options, namely <span class="packt_screen">None</span> and <span class="packt_screen">Legacy</span>. The <span class="packt_screen">None</span> option allows Unity to ignore the whole rigging and let the humanoid be without any bones and animations. The <span class="packt_screen">Legacy</span> option is the older method for handling humanoid characters and it is now deprecated and not recommended to use. You can also manually change the <span class="packt_screen">Animation Type</span> option of the model. The <span class="packt_screen">Generic</span> type option is used to tell Unity that a character is not humanoid. For example, it can be some six-legged alien or any horse model, or any strange kind of spider, or any static tree, and so on.</p>
<p>Below the <span class="packt_screen">Animation Type</span>, you will see the <span class="packt_screen">Avatar Definition</span> option. Basically, when any humanoid model is imported in Unity, it starts looking for the avatar of the model. An avatar in Unity is a simple skeleton that provides a way to control the mesh, skin, and materials of the model to animate, move, and so on. If the model is already rigged properly and is humanoid, Unity will automatically create an avatar from this model file. We can also copy an avatar from any other model file as well using the <span class="packt_screen">Copy From Other Avatar</span> option. The copying option will ask for the source avatar, and put the new skeleton in the current model. It is like putting one character's rigging into another's body mesh. It is a very powerful feature of Unity3D and makes character handling a lot easier.</p>
<p>The next option is the <span class="packt_screen">Configure</span> button with a small tick icon. This icon informs us whether our model is okay to use or not. In simple words, Unity tries to create an avatar automatically from the model and this icon shows whether Unity has been able to do it or not. Select the <span class="packt_screen">None</span> option from the <span class="packt_screen">Animation Type</span> and then again select the <span class="packt_screen">Humanoid</span> option. Now you will see the three dots symbol before the <span class="packt_screen">Configure</span> button. This tells that the model is not configured yet and the avatar is not created yet. That means Unity hasn't yet acknowledged whether the model file is humanoid or not. You can click on <span class="packt_screen">Apply</span>, and Unity will try to automatically detect its humanoid characteristics and create an automatic avatar. If the model is humanoid, then the icon will be changed to a tick icon; otherwise, it will be changed into a cross icon, indicating that the model is not properly configured and is not humanoid.</p>
<p>The following figure shows all the different states of configuration of the humanoid model:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/image_03_024.png"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.23 Different states of configuration of the humanoid model</div>
<p>We have learned that Unity automatically tries to detect whether the model is humanoid or not and tries to configure it properly by creating an automatic avatar with its pre-defined humanoid rigging. But, we still don't know how Unity does that and what kind of benefits and customizations can be made in the process of Unity to achieve the requirements of our own characters of the game. In the next section, we will discuss about how any character is configured to be a humanoid in Unity and how automatic avatar creation works.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Configuring the avatar of humanoid models</h1>
            </header>

            <article>
                
<p>Since the avatar defines the whole rigging and skeleton structure of humanoid models in Unity, it is very important that it is configured properly for the model. We shouldn't depend on the results of automatic avatar creation of Unity. Whether it is configured properly with the tick icon or not configured with a cross icon, you need to go into the <span class="packt_screen">Configure Avatar</span> mode to personally ensure that the avatar is properly set up and is valid for use in the game. This is a very important requirement for the whole character animation called the <strong>MecAnim System</strong>, which we will discuss in the next section.</p>
<p>Now, as shown in the preceding figure, click on the <span class="packt_screen">Configure...</span> button. It will ask you to save the current scene if it's not already saved, and will open a new scene as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/image_03_025.png"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.24 Avatar configuration scene</div>
<p>You can observe that a new scene is opened with our character model placed at the center of the Scene View. In the <span class="packt_screen">Inspector</span> panel, a 2D human character is shown with a lot of green circles within the body of it, as shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="452" src="assets/image_03_026.png" width="519"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.25 View of avatar of humanoid character</div>
<p>This area consists of two tabs, <span class="packt_screen">Mapping</span> and <span class="packt_screen">Muscles &amp; Settings,</span> with the first one already selected. In the <span class="packt_screen">Mapping</span> tab, there is a human body with green circles of solid strokes and dashed strokes placed inside it. These circles map the bones' game objects with the joints of the human body so that it can behave that way. The circles with solid strokes are required to associate with any bone game object. Even if a single required circle is not mapped correctly, then the avatar will not be configured and show a red circle, as shown in Figure 3.25 on the right side.</p>
<div class="packt_infobox">To improve your chances of finding a match to an avatar, name your bones in a way that reflects the body parts they represent such as LeftArm, RightForearm, and so on.</div>
<p>In the Inspector view, you can also observe other buttons aligned vertically: <span class="packt_screen">Body</span>, <span class="packt_screen">Head</span>, <span class="packt_screen">Left Hand</span>, and <span class="packt_screen">Right Hand</span>. As a body is shown in the Inspector, other buttons show other parts of the human body to map more bones to give the character tiny details for use in animations. These are shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="565" src="assets/image_03_027.png" width="425"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.26 Avatar mapping of all parts</div>
<p>You can see that, except the body section, all other sections have only optional bones. And in general, every bone of the human body is covered in Unity. The optional bones are automatically mapped and animated in Unity, but the required bones are to be mapped from the model. And if any one bone is missed while rigging the character, whether it is in Autodesk Maya, or 3D Studio Max, or any other 3D modelling tool, Unity will show a red circle there and it is the developer's job to provide that missing bone by selecting the game object from the <span class="packt_screen">Hierarchy</span> panel and placing it below the list of bones in <span class="packt_screen">Inspector</span> panel.</p>
<p>Now, you might also have observed that our character is in the pose of a T shape if you look in the Scene View. If your model is not in the T-Pose, Unity will print the message in the <span class="packt_screen">Scene View</span> to enforce the model in the T-Pose. The T-Pose is the origin point of the model for Unity to map the right bones with the right game objects. You can manually rotate bones' game objects to form a T-Pose, or you can automatically do it by selecting <span class="packt_screen">Enforce T-Pose</span> from the <span class="packt_screen">Pose</span> dropdown in the bottom section of the <span class="packt_screen">Inspector</span> panel as shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="191" src="assets/image_03_028.png" width="266"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.27 Enforce T-Pose option in the Inspector panel</div>
<p>Once the option is selected, the model object will be automatically positioned to the T-Pose if all its bones are correctly rigged and assigned. The other options in this dropdown include <span class="packt_screen">Reset</span>, which will reset all the bones and sets the avatar configuration to the initial one, and <span class="packt_screen">Sample Bind-Pose</span>, which will enforce the model to set to the same pose it was at the time of importing the model.</p>
<div class="packt_infobox">You can reset the whole mapping and use Unity's automatic avatar configuration by selecting the Automap option from the Mappings dropdown beside the Pose dropdown in the <span class="packt_screen">Inspector</span> panel.</div>
<p>After any changes you make, you can click on <span class="packt_screen">Apply</span> or <span class="packt_screen">Revert</span> to apply or cancel the changes. Once you are ready with the configuration and avatar, you can click on the <span class="packt_screen">Done</span> button to close the avatar scene and navigate back to your original working scene.</p>
<p>The other tab, <span class="packt_screen">Muscles &amp; Settings,</span> is beyond the scope of the book, but you can go ahead and experiment a little. It allows you to verify all the bones with the muscles and you can also put restrictions on the movement of bones, such as the head can't rotate fully, by defining ranges in it.</p>
<p>Now, our model is imported and is properly configured to the humanoid avatar. It's time to bring it to life and add some locomotion animations such as walking, running, jumping, and so on. In the section, we will discuss how Unity allows us to manage animations and apply them on the humanoid model objects.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Humanoid animation using Unity</h1>
            </header>

            <article>
                
<p>Animations are the core component of any game. Without them, a game is just a sequence of pictures and the user will have no idea of what's going on in the game. We learned about animations in <a href="36ed5299-901b-4888-9b37-b21738cc051a.xhtml" target="_blank">Chapter 2</a>, <em>Finishing the Perky Penguin 2D Game</em>, for our 2D game, Perky Penguin, to control the animations of a penguin and lasers using state machines and controllers. But, when it comes to 3D, things get a lot more complicated to manage and handle. The reasons for this complexity varies depending on what kind of animations we want to create and manage in Unity, but generally creating character animations such as walk cycle or running cycle takes a lot of effort and cannot be made in Unity. These animations need more details and are developed in advanced tools such as Autodesk Maya, 3D Studio Max, and so on. In this section, we will not discuss how these animations are created, as it is beyond the scope of this book, but we will discuss how these animations are imported in Unity and managed further with programming and state machine controllers to achieve our game requirements of animating a player character for the fighting game.</p>
<p>Unity's animation system allows you to create amazingly animated characters by the support of animation blending, mixing, additive animations, loop animations, time synchronization such as walk cycle, layered animations, animation control playback on factors like speed, time, and so on, and the support of physically-based rag dolls. Unity provides extended graphical user interfaces to make things much easier as compared to previous animation tools such as Adobe Flash.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Legacy Animation System</h1>
            </header>

            <article>
                
<p>Before the release of Unity 4.x versions, Unity provided a simpler animation system, now called the <strong>Legacy Animation System</strong>. For backwards compatibility, this system is still available. You can use the legacy system in older projects without updating it to the new system. But, it is not recommended to use the legacy system in any new projects.</p>
<p>We will not go into the details of how the legacy animation system works as it is not a good choice in games in Unity, but we will discuss a basic overview of how it is used in Unity. The Legacy Animation System is based on the following steps to create and manage animations in Unity:</p>
<ol>
<li>You prepare the game object that you want to animate. For example, let's take a fighter character. Now, in order to animate this in Unity, you have to create a model, rig it, texture it, and then import it in Unity. This step is done by artists or 3D modelers and animators.</li>
<li>After importing the model, you have to set its <span class="packt_screen">Animation Type</span> field to <span class="packt_screen">Legacy</span> manually, as Unity doesn't do it automatically, from the <span class="packt_screen">Rig</span> tab in the <span class="packt_screen">Inspector</span> settings of the model. This is shown in the following figure:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="127" src="assets/image_03_029.png" width="237"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.28 Setting Animation Type field to Legacy</div>
<ol start="3">
<li>Now, you set all the animation clips such as walk forward, walk backward, run, jump, and so on, and set the times and speeds of those clips in the <span class="packt_screen">Animations</span> tab. You can customize and edit clips here with features such as cropping and cutting frames from animation clips, modifying speed, creating loop or Ping-Pong sequences, and so on.</li>
</ol>
<div class="packt_infobox">Animation clips can also be embedded in the model file with tools such as Autodesk Maya or 3D Studio Max. Also, animations can be separate files from the model file itself. Unity3D shows embedded animations in the Animations tab of the model file settings here.</div>
<ol start="4">
<li>Once all animation clips are set and ready, it's time to create a controller. The legacy animation system allows you to create a controller in C# or JavaScript, which will tell Unity about which clip to play at what time and for how long, and so on. This controller is basically managed by the game input, for example, on pressing the space key, the character should jump.</li>
</ol>
<p>Although these four steps don't explain the whole process in detail as to use the legacy animation system, it's enough to get an idea of how the legacy system is used in Unity. The legacy system relies heavily on the scripting part to manage animations and its controller is fully programmed and coded by the developer himself. This makes the legacy system more complex when compared to the new Mecanim animation system, which we will discuss in the next section.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Mecanim animation system</h1>
            </header>

            <article>
                
<p>Although Unity had an animation system in place and developers were utilizing it, Unity3D released a whole new system created from scratch for creating and managing more complex animations with a lot more ease. That system became known as the Mecanim animation system. Here are some features of the Mecanim animation system:</p>
<ul>
<li>Easy workflow and set up of animations</li>
<li>Supports animation clips created within Unity or imported externally</li>
<li>Retargets humanoid animations from one character model to another</li>
<li>A visual programming tool for managing and previewing animation clips</li>
<li>Layering and masking features</li>
</ul>
<p>It is possible that you might not have clearly understood some of these features . However, it's nothing to worry about, as we will discuss these features and the system in a lot of detail in this section.</p>
<p>We will start by discussing the Mecanim in our humanoid character project from the previous section.</p>
<p>In the previous section, we imported a free character alongside a lots of animation clips. We discussed the model file and its materials folder, and then we also configured a humanoid avatar for it. Now, we will continue from that humanoid avoid setting and use the Mecanim animation system to animate the character. To do this, first we have to see what kind of animations we have got from the <span class="packt_screen">Raw Mocap Animation Data</span> asset. Expand the <span class="packt_screen">Animations</span> folder in the <span class="packt_screen">Project Explorer</span> panel, then expand the <span class="packt_screen">Walking</span> folder again to view some of the walk animations.</p>
<p>Now, select any random animation clip from that folder, and in the <span class="packt_screen">Inspector</span> panel you will see a small preview window with a little <span class="packt_screen">Play</span> button which will pause/play the animation clip. This whole process is shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="507" src="assets/image_03_030.png" width="454"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.29 Preview any animation clip from the Walking folder</div>
<p>This preview window shows you the animation clip to give you better idea as to which animation is more suitable for your game requirements. You can play more animations from other folders as well.</p>
<div class="packt_infobox">This preview system of the animations was only available in Mecanim after Unity 4.0 was introduced.</div>
<p>The Unity's Mecanim animation system is based on the concept of <strong>animation clips</strong>, which contain information about how different objects should be moved, rotated, or transformed over time. Each clip can be a different, separate recording of the same object. These animation clips are mostly created by 3D animation artists using third-party tools such as Autodesk Maya, 3D Studio Max, or any other source. Then these clips can be exported using those tools as separate clips or can also be embedded into the model file itself. To understand this better, select the <span class="packt_screen">DefaultAvatar.fbx</span> from the <span class="packt_screen">Raw Mocap Data</span> directory in the <span class="packt_screen">Project</span> panel, and select the <span class="packt_screen">Animations</span> tab in the <span class="packt_screen">Inspector</span> panel. You will observe that the <span class="packt_screen">Import Animations</span> check is already selected, and below that there is an information box telling you that the model file doesn't contain any animation data. That means there is not a single animation clip embedded in the model file itself. This whole process is shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="319" src="assets/image_03_031.png" width="423"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.30 Viewing embedded animation data in the model</div>
<p>Whether you get embedded animation clips in the model, or you import animation clips separately (as in this case), these animation clips are then organized into a structure flowchart-like system called the <strong>Animation Controller</strong>. This animation controller plays the role of a state-machine which keeps track of which animation clip should be playing, when the animation clip should stop, and so on. This is one of the most important features of the Mecanim system, which differentiates it from the legacy animation system and provides a lot of ease and control to the developers. In the legacy systems, the developers used to write the whole animation controller using C# or JavaScript programming, but in Mecanim, Unity3D offers a visual interface to create a whole controller without a single line of code with lots of built-in functionality.</p>
<p>Any simple animation controller must contain at least one or two animation clips. These animation clips can be as simple as opening and closing animations of any door or walking forward and backward animations of any humanoid character. A more advanced animation controller can contain dozens of humanoid animations for all the character's main actions such as walking, running, jumping, fighting, and so on. Our game project contains the characters with the abilities to walk, run, jump, fight with hands, legs, and super moves. So, our animation controller for a single character is quite detailed and advanced. In the next section, we will discuss about how an animation controller is created and we will create a simple controller for our player character for the fighting game.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Creating layer character for the fighting game</h1>
            </header>

            <article>
                
<p>In the previous section, we discussed the animation systems of Unity; legacy, and Mecanim. In this section, we will not only discuss, but also practically create, the animation controller for our player character of the fighting game. We will use the free character provided by Unity contained in the <span class="packt_screen">Raw Mocap Data</span> asset project.</p>
<p>First of all, we need a humanoid character in the <span class="packt_screen">Scene</span> view. Drag the <span class="packt_screen">DefaultAvatar.fbx</span> prefab from the <span class="packt_screen">Raw Mocap Data</span> directory in the <span class="packt_screen">Project</span> panel to the <span class="packt_screen">Hierarchy</span> panel, and it will show a T-Posed character with a black suit on it as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="274" src="assets/image_03_032.png" width="494"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.31 The T-Posed character in the Scene View</div>
<p>Now, select the <span class="packt_screen">DefaultAvatar</span> in the <span class="packt_screen">Hierarchy</span> panel, and look at its <span class="packt_screen">Inspector</span> settings. There will be a new component added below the <span class="packt_screen">Transform</span> component called the <span class="packt_screen">Animator</span> component, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="248" src="assets/image_03_033.png" width="380"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.32 Animator component of the character model</div>
<p>You can observe that an information note is given in the component stating that the controller is not initialized. When any humanoid character is placed for the first time in the scene, Unity creates a default runtime animation controller and assigns it to the character. We can also change or modify its controller anytime with our customized controllers as well. There are multiple properties in the Animator component as shown in the preceding figure. Let's discuss some minor details of these properties before moving further ahead:</p>
<ol>
<li><strong>The Controller</strong> property is used to set the animation controller of the Animator component. This is the most important property, and through this controller the whole character's animations are managed and handled in Unity.</li>
<li><strong>The Avatar</strong> property tells Unity3D about the rigging and avatar configuration to use for the character. This is the same avatar configuration which we set in the previous section of the humanoid character. We can also use some other character's avatar for some other character's animator. That's why Mecanim animation is so powerful and allows developers to retarget their avatar's definitions on other characters without any more efforts.</li>
</ol>
<p>Now, with the avatar property already set with our configured avatar; let's create our first animation controller. Right-click on the <span class="packt_screen">Assets</span> folder, and select <span class="packt_screen">Create |</span> <span class="packt_screen">Animation</span><span class="packt_screen">Controller</span> and name it <span class="packt_screen">PlayerAnimController,</span> as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="311" src="assets/image_03_034.png" width="524"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.33 Creating an animation controller for the player</div>
<p>You will notice that a different file will be added in the <span class="packt_screen">Project</span> panel in the <span class="packt_screen">Assets</span> directory. Double-click on it, and you will be presented with an <span class="packt_screen">Animator</span> window showing a state-machine-like user interface, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="276" src="assets/image_03_035.png" width="556"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.34 The Animator panel in Unity3D</div>
<p>As you can see in this panel, there are three already added states called as <span class="packt_screen">Any State, Entry,</span> and <span class="packt_screen">Exit</span> respectively. The primary objective of this panel is to organize all the animation clips, here called <strong>States</strong>, and connect these with each other using sequential, parallel, or more complex relationships using a flowchart-like approach. In order to create a simple state-machine, we need at least one animation state in the <span class="packt_screen">Animator</span> panel. We already have lots of animations in the project assets imported; we have to just choose a few of those animations for our simple animation controller.</p>
<p>Now, create a new directory in <span class="packt_screen">Assets</span> with the name of <span class="packt_screen">Player Animations</span>. I have selected four animation clips from our <span class="packt_screen">Raw Mocap Data</span> folder and placed those in our new folder:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" src="assets/image_03_036.png"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.35 Animation states in the Player Animations directory</div>
<p>Once your animation clips are all set in a single directory, let's explore these animations in a little more depth. Click on the <span class="packt_screen">Idle_Neutral_2</span> animation clip in the <span class="packt_screen">Project</span> panel, and select the <span class="packt_screen">Rig</span> tab in the <span class="packt_screen">Inspector</span>. You will notice that the <span class="packt_screen">Animation Type</span> is set to <span class="packt_screen">Humanoid</span> and the <span class="packt_screen">Avatar</span> definition is set to get copied from another avatar. You must be wondering where the other avatar is. You can select this other avatar in the <span class="packt_screen">Source</span> property and click <span class="packt_screen">Apply</span> to save the changes. The Source property is set to our configured avatar definition called <span class="packt_screen">DefaultAvatarAvatar</span> for our character model. Through this property, you can select any other avatar's definition and retarget the same animation clip on multiple characters very easily. These properties are shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="229" src="assets/image_03_037.png" width="367"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.36 Rig tab of an animation clip</div>
<p>The <span class="packt_screen">Rig</span> tab settings are almost identical for all the animation clips we have got in our project. Now, select the <span class="packt_screen">Animations</span> tab to customize the animation according to our own project requirements. The partial <span class="packt_screen">Animations</span> tab is shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="318" src="assets/image_03_038.png" width="337"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.37 Partial Animations tab</div>
<p>If you don't want to import any animation, just toggle off the <span class="packt_screen">Import Animation</span> check and Unity will ignore the animation from that clip. The rest of the settings are not important at this moment and we will discuss them later in the book. For now, the most important setting is the <span class="packt_screen">Clips</span> property. This is where the whole animation timeline is created. You can observe the <span class="packt_screen">Start</span> and <span class="packt_screen">End</span> values for the frames of the animation. You can click on the <span class="packt_screen">plus (+)</span> sign to add a new sub-animation by defining the start and end frames and Unity will crop that part of the animation in a separate clip. You can experiment with this panel on your own and see what happens on what properties. Also, you can observe a small preview window which allows you to play and stop the customized animation.</p>
<p>Currently, we have only one clip in the <span class="packt_screen">Clips</span> list and that is selected by default. Below the <span class="packt_screen">Clips</span> property, Unity is showing you more details of this particular clip, as shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="478" src="assets/image_03_039.png" width="344"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.38 More properties of any selected sub-animation clip</div>
<p>You can observe a lot of options here. We won't discuss all of these in much detail, but we will get an overview of this panel here. There are various sections such as <span class="packt_screen">Loop Time</span>, <span class="packt_screen">Root Transform Rotation</span> , and so on. These sections define that specific part of the animation. For example, <span class="packt_screen">Loop Time</span> defines whether the animation as a whole is a loop animation or not. Before every section, there is a color circle with red, yellow, or green fill. This circle tells us about the loop match state of the animation. Red means it's not a loop, yellow means it's somewhat a loop but is not perfectly synced, and green means that it is a perfect loop. These properties allow developers to define the animations in a very detailed way to manage the <kbd>Y</kbd> axis position of the character when animating and so on. You can alter the <span class="packt_screen">Start</span> and <span class="packt_screen">End</span> values to see where exactly the animation is a perfect loop with all of the green circles and customize it accordingly.</p>
<p>Finally, after discussing many details and properties about animation clips, let's move on to create our simple animation controller. Double-click on the <span class="packt_screen">PlayerAnimController</span> file from <span class="packt_screen">Assets</span> directory. It will show the <span class="packt_screen">Animator</span> view with three states as we discussed earlier. Now, follow these steps to create a walk cycle animation state-machine:</p>
<ol>
<li>Drag the <span class="packt_screen">Idle_Neutral_2</span> animation clip from the <span class="packt_screen">Player Animations</span> directory to the <span class="packt_screen">Animator</span> view. You will see a new orange rectangle added with the animation clip name. This rectangle shows this animation clip state. This is shown in the following figure:</li>
</ol>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="192" src="assets/image_03_040.png" width="453"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.39 New animation added in the Animator view</div>
<div class="packt_infobox">Any animation can be set as the default animation by right-clicking on it and selecting <span class="packt_screen">Set as Default Layer State</span> from the menu. Unity will change its color to orange. There can be only one default state in any single layer.</div>
<p>Now, if you play the game, you will see that character in the scene is not animating. Although we have set its default animation state to the idle animation, still the character is not moving. It is because we have only created Animation Controller, but still we have to link the controller with our character:</p>
<ul>
<li>To link our character with the newly created animation controller, select the character from the <span class="packt_screen">Hierarchy</span> panel. Now, drag our <span class="packt_screen">PlayerAnimController</span> from <span class="packt_screen">Assets</span> to the <span class="packt_screen">Controller</span> property of the <span class="packt_screen">Animator</span> component in the <span class="packt_screen">Inspector,</span> as shown in the following figure:</li>
</ul>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="379" src="assets/image_03_041.png" width="650"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.40 Linking character with animation controller</div>
<p>Now, play the game and you will see that character is following the idle animation. But, once the animation is finished, it will stop there. We want to loop the animation infinitely in our case.</p>
<ul>
<li>To set the animation loop, select the <span class="packt_screen">Idle_Neutral_2</span> from the <span class="packt_screen">Player Animations</span> directory, and go to the <span class="packt_screen">Animations</span> tab in the <span class="packt_screen">Inspector</span> settings. Below <span class="packt_screen">Clips</span>, we have to first set the animation as a perfect loop and make all the circles green. So, set the value of <span class="packt_screen">Start</span> to 265, and it will turn into green. Also, toggle the <span class="packt_screen">Loop Time</span> check to on and click <span class="packt_screen">Apply</span>. Now, play the game and your character will be continuously repeating the animation once it ends. Also, you won't be able to observe the end of the animation, because a perfect loop is created in the animation. This is shown in the following figure:</li>
</ul>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="353" src="assets/image_03_042.png" width="352"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.41 Setting animation to loop</div>
<ul>
<li>Now let's add another animation state of walk into it. As we did earlier, drag <span class="packt_screen">WalkFWD</span> from <span class="packt_screen">Assets</span> to the <span class="packt_screen">Animator</span> view. It will create another rectangle state, this time with a gray color. This animation state is added in the controller, but it is not linked with the animator. To link this state with our default <span class="packt_screen">Idle</span> state, right click on the <span class="packt_screen">Idle_Neutral_2</span> state, and select <span class="packt_screen">Make Transition</span>. It will allow you to create a white line from the Idle state to another state. Now, click on the <span class="packt_screen">WalkFWD</span> state and a line will be drawn between Idle and the <span class="packt_screen">WalkFWD</span> state with an arrow towards the <span class="packt_screen">WalkFWD</span> state. This is shown in the following figure:</li>
</ul>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="217" src="assets/image_03_043.png" width="760"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.42 Creating transition between two states</div>
<p>Now, play the game and you will observe that once the idle animation is finished, it will start the <span class="packt_screen">WalkFWD</span> animation. After the walk animation, it will be stopped. We can also create another transition from <span class="packt_screen">WalkFWD</span> to the <span class="packt_screen">Idle_Nuetral_2</span> state and this will make the character continuously animate. Once the idle animation is finished, it will start walking, and once the walking is finished it will go back to the idle animation and this will be running continuously resulting in a looped animation.</p>
<p>Now, it's time to add some control in the animator. In the <span class="packt_screen">Animator</span> panel, on the left side, there are two tabs: <span class="packt_screen">Layers</span> and <span class="packt_screen">Parameters</span>. Click on the <span class="packt_screen">Parameters</span> tab, and click the on <span class="packt_screen">Plus (+)</span> button to add a new parameter. It will show you a dropdown of which type of parameter we want to add. Select <span class="packt_screen">Bool</span> from it and name it to <span class="packt_screen">ShouldWalk</span>. This is shown in the following screenshot:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="228" src="assets/image_03_044.png" width="704"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Figure 3.43 Adding a new parameter in Animator</div>
<p>Now, you will see a new parameter is added in the <span class="packt_screen">Parameters</span> list. The parameters allow developers to control the animation and states flow based on their values. At this moment, the walk animation is automatically started after completion of the idle animation. Now, we will integrate this <span class="packt_screen">ShouldWalk</span> parameter with the animator so that the walking animation will start if the <span class="packt_screen">ShouldWalk</span> parameter is true; otherwise, it will go back to the idle state:</p>
<p>To do this, click on the transition arrow of Idle to Walk and check the <span class="packt_screen">Inspector</span> panel. You will see various settings there. At the end, you will see a small view of <span class="packt_screen">Conditions</span>. Click on the <span class="packt_screen">Plus(+)</span> icon from there, and set <span class="packt_screen">ShouldWalk</span> to true. This is shown in the following figure:</p>
<div class="packt_figure CDPAlignCenter CDPAlign"><img class=" image-border" height="386" src="assets/image_03_045.png" width="232"/></div>
<div class="packt_figure CDPAlignCenter CDPAlign packt_figref">Figure 3.44 Adding a condition on transition</div>
<p>Similarly, now repeat the same process for other reverse transitions as well but this time set the <span class="packt_screen">ShouldWalk</span> value to false. Now play the game, and you will observe that the character is not going to the walk animation and it is continuously repeating the same idle animation over and over again. It will play the walk animation if the <span class="packt_screen">ShouldWalk</span> parameter is set to <kbd>true</kbd>. This can be done from the code very easily.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    

        <section>

            <header>
                <h1 class="header-title">Summary</h1>
            </header>

            <article>
                
<p>This chapter was an introduction to the basic concepts of 3D games. We discussed how any Unity project is configured for 3D games and how 3D model files are imported in Unity. We also discussed the materials and textures for the 3D models. In order to focus on our fighting action game, we discussed humanoid models or character models and how they are imported. We then discussed the configuration of an avatar for the humanoid models to use in the animation system. Unity offers two kinds of animation systems; legacy and Mecanim. We discussed brief details about legacy as it has been deprecated in Unity now followed by a more detailed discussion on the Mecanim animation system. We imported a few animations and worked to create a simple animation controller alongside a simple parameter to control the flow of the animations.</p>
<p>In the next chapter, we will continue from the controller and create a detailed animation controller with lots of animations and parameters, which will be used for both player and enemy characters. We will then control the player movement and animations using virtual joystick controls and discuss a little about artificial intelligence behind enemy characters.</p>


            </article>

            <footer style="margin-top: 5em;">
                
            </footer>

        </section>
    </body></html>