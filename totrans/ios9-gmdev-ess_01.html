<html><head></head><body>
<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. The Swift Programming Language</h1></div></div></div><p class="calibre8">At the core of game development is your game's code. It is the brain of your project and outside of the art, sound, and various asset developments. It is where you will spend most of your time creating and testing your game. Up until Apple's <a id="id0" class="calibre1"/><strong class="calibre9">Worldwide Developers Conference WWDC14</strong> in June of 2014, the code of choice for iOS game and app development was <a id="id1" class="calibre1"/><strong class="calibre9">Objective-C</strong>. At <em class="calibre10">WWDC14</em>, a new and faster programming language, Swift, was announced and is now the recommended language for all current and future iOS games and general app creation.</p><p class="calibre8">As of the time of writing, you can still use Objective-C to design your games, but programmers, both, new and seasoned, will see why writing in Swift is not only easier for expressing your game's logic, but even more preformat. Keeping your game running at that critical 60 fps is dependent on fast code and logic. Engineers at Apple developed the Swift programming language from the ground up with performance and readability in mind, so this language can execute certain code iterations faster than Objective-C while also keeping code ambiguity to a minimum. Swift also uses many of the methodologies and syntaxes found in more modern languages, such as Scala, JavaScript, Ruby, and Python.</p><p class="calibre8">So, let's dive into the <a id="id2" class="calibre1"/>Swift language.</p><div><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre8">It is recommended that some basic knowledge of object-oriented programming (OOP) be known previously, but we will try to keep the build-up and explanation of code simple and easy to follow as we move on to the more advanced topics related to game development.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>Hello World!</h1></div></div></div><p class="calibre8">It's somewhat traditional when learning programming languages to begin with a <strong class="calibre9">Hello World</strong> example. A Hello World program<a id="id3" class="calibre1"/> is simply using your code to display or log the text Hello World. It's always been the general starting point because sometimes just getting your code environment set up and having your code executing correctly is half the battle. At least, this was more the case in older programming languages.</p><p class="calibre8">Swift makes this easier than ever, and without going into the structure of a Swift file (which we shall do later on and is also much easier than Objective-C and past languages), here's how you create a Hello World program:</p><div><pre class="programlisting">print("Hello, World!")</pre></div><p class="calibre8">That's it! That is all you need to have the text <code class="email">Hello World</code> appear in Xcode's debug area output.</p></div></div>
<div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>No more semicolons</h1></div></div></div><p class="calibre8">Those of us who have been programming for some time might note that the usually all-important semicolon (<code class="email">;</code>) is missing. This isn't a mistake; in Swift, we don't have to use a semicolon to mark the end of an expression. We can if we'd like, and some of us might still do it as a force of habit, but Swift has omitted that common concern.</p><div><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre8">The use of the semicolon to mark the end of an expression stems from the earliest days of programming when code was written in simple word processors and needed a special character to represent when the code's expression ends and the next begins.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Variables, constants, and primitive data types</h1></div></div></div><p class="calibre8">While <a id="id4" class="calibre1"/>programming any application, either if new to programming or trying to learn a different language, first we should get an understanding of how a language handles variables, constants, and various data types, such as Booleans, integers, floats, strings, and arrays. You can think of the data in your program as boxes or containers of information. Those containers can be of different flavors or types. Throughout the life of your game, the data can change (variables, objects, and so on) or they can stay the same.</p><p class="calibre8">For example, the number of lives a player has would be stored as a variable, as that is expected to change during the course of the game. That variable would then be of the primitive data type integer, which is basically whole numbers. Data that stores, say, the name of a certain weapon or power-up in your game, would be stored in what's known as a constant, as the name of that item is never going to change. In a game where the player can have interchangeable weapons or power-ups, the best way to represent the currently equipped item would be to use a variable. A variable is a piece of data that is bound to change. That <a id="id5" class="calibre1"/>weapon or power-up will also most likely have a bit more information to it than just a name or number; the primitive types we mentioned prior. The currently equipped item would be made up of properties, such as its name, power, effects, index number, and the sprite or 3D model that visually represents it. Thus, the currently equipped item wouldn't just be a variable of a primitive data type, but be what is known as a type of object. Objects in programming can hold a number of properties and functionalities that can be thought of as a <em class="calibre10">black box</em> of both function and information. The currently equipped item in our case would be a sort of <em class="calibre10">placeholder</em> that can hold an item of that type and interchange it when needed, fulfilling its purpose as a replaceable item.</p><div><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre8">Swift is what's known as a <em class="calibre10">type-safe language</em>, so we should keep track of the exact type of data and even it's future usage (that is, if the data is or will be <code class="email">NULL</code>), as it's very important when working with Swift compared with other languages. Apple made Swift behave this way to help keep runtime errors and bugs in your applications to a minimum, so we can find them much earlier in the development process.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec08" class="calibre1"/>Variables</h2></div></div></div><p class="calibre8">Let's look at <a id="id6" class="calibre1"/>how variables are declared in Swift.</p><div><pre class="programlisting">var lives = 3      //variable of representing the player's lives
lives = 1          //changes that variable to a value of 1</pre></div><p class="calibre8">Those of us who have been developing in JavaScript will feel right at home here. Like JavaScript, we use the keyword <code class="email">var</code> to represent a variable, and we named the variable <code class="email">lives</code>.</p><p class="calibre8">The compiler implicitly knows that the type of this variable is a whole number, the primitive data type <code class="email">Int</code>.</p><p class="calibre8">The type can be explicitly declared as such:</p><div><pre class="programlisting">var lives: Int = 3    //variable of type Int</pre></div><p class="calibre8">We can also represent lives as the floating point data types double or float, as follows:</p><div><pre class="programlisting">// lives are represented here as 3.0 instead of 3
var lives: Double = 3           //of type Double
var lives: Float = 3            //of type Float</pre></div><p class="calibre8">Using a colon after the variable's name declaration allows us to explicitly typecast the variable.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec09" class="calibre1"/>Constants</h2></div></div></div><p class="calibre8">During <a id="id7" class="calibre1"/>your game, there will be points of data that don't change <a id="id8" class="calibre1"/>throughout the life of the game or the game's current level/scene. These can be various data, such as gravity, a text label in the <a id="id9" class="calibre1"/><strong class="calibre9">Heads-Up Display</strong> (<strong class="calibre9">HUD</strong>), the center point of character's 2D animation, an event declaration, or the time before your game checks for new touches/swipes.</p><p class="calibre8">Declaring constants is almost the same as declaring variables.</p><p class="calibre8">Using a colon after the variable's name declaration allows us to explicitly typecast the variable.</p><div><pre class="programlisting">let gravityImplicit  = -9.8         //implicit declaration
let gravityExplicit: Float  =  -9.8 //explicit declaration</pre></div><p class="calibre8">As we can see, we use the keyword <code class="email">let</code> to declare constants.</p><p class="calibre8">Here's another example using a string that could represent a message displayed on the screen at the start or end of a stage:</p><div><pre class="programlisting">let stageMessage  = "Start!"
stageMessage      = "You Lose!"   //error</pre></div><p class="calibre8">Since the string <code class="email">stageMessage</code> is a constant, we cannot change it once it has been declared. Something like this would be better as a variable using <code class="email">var</code> instead of <code class="email">let</code>.</p><div><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre8">"Why don't we declare everything as a variable?"</p></div><p class="calibre8">This is a question sometimes asked by new developers and is understandable why it's asked, especially since game apps tend to have a large number of variables and more interchangeable states than an average application. When the compiler is building its internal list of your game's objects and data, more goes on behind the scenes with variables than with constants.</p><p class="calibre8">Without getting too much into topics, such as the program's stack and other details, in short, having objects, events, and data declared as constants with the <code class="email">let</code> keyword is more efficient than <code class="email">var</code>. In a small app on the newest devices today, though not recommended, we could possibly get away with this without seeing a great deal of loss in app performance. When it comes to video games, however, performance is critical. Buying back as much performance as possible can allow a better player experience. Apple recommends that when in doubt, always use <code class="email">let</code> at the time of declaration and have the compiler say when to change to <code class="email">var</code>.</p></div></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec10" class="calibre1"/>More about constants…</h2></div></div></div><p class="calibre8">As of Swift version 1.2, constants <a id="id10" class="calibre1"/>can have a conditionally controlled initial value.</p><p class="calibre8">Prior to this update, we had to initialize a constant with a single starting value or be forced to make the property a variable. In Xcode 6.3 and newer, we can perform the following logic:</p><div><pre class="programlisting">let x : SomeThing

if condition
{
  x = foo()
}
else
{
  x = bar()
}
use(x)</pre></div><p class="calibre8">An example of this in a game could be as follows:</p><div><pre class="programlisting">let stageBoss : Boss

if (stageDifficulty == gameDifficulty.hard)
{
  stageBoss = Boss.toughBoss()
}
else
{
  stageBoss = Boss.normalBoss()
}
loadBoss(stageBoss)</pre></div><p class="calibre8">With this functionality, a constant's initialization can have a layer of variance while still keeping it unchangeable, or immutable through its use. Here, the constant <code class="email">stageBoss</code> can be one of two types based on the game's difficulty: <code class="email">Boss.toughBoss()</code> or <code class="email">Boss.normalBoss()</code>. The boss won't change for the course of this stage, so it makes sense to keep it as a constant. More on <a id="id11" class="calibre1"/><strong class="calibre9">if and else statements</strong> is covered later in the chapter.</p></div></div>

<div><div><div><div><div><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Arrays, matrices, sets, and dictionaries</h1></div></div></div><p class="calibre8">Variables and constants can represent a collection of various properties and objects. The most common collection types are arrays, matrices, sets, and dictionaries. An array is an ordered list of distinct objects; a matrix is, in short, an array of arrays; a set is an unordered list of distinct objects; and a dictionary is an unordered list that utilizes a <em class="calibre10">key : value</em> association with the data.</p></div>

<div><div><div><div><div><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec11" class="calibre1"/>Arrays</h2></div></div></div><p class="calibre8">Here's an<a id="id12" class="calibre1"/> example of an array in Swift:</p><div><pre class="programlisting">let stageNames : [String] = ["Downtown Tokyo","Heaven Valley","Nether"]</pre></div><p class="calibre8">The object <code class="email">stageNames</code> is a collection of strings representing the names of a game's stages. Arrays are ordered by subscripts from <code class="email">0</code> to array length <code class="email">-1</code>. So, <code class="email">stageNames[0]</code> would be <code class="email">Downtown Tokyo</code>; <code class="email">stageNames[2]</code> would be <code class="email">Nether</code>; and <code class="email">stageNames[4]</code> would give an error since that's beyond the limits of the array and doesn't exist. We use <code class="email">[]</code> brackets around the class type of <code class="email">stageNames</code>, <code class="email">[String]</code>, to tell the compiler that we are dealing with an array of strings. Brackets are also used around the individual members of this array.</p></div></div></body></html>