<html><head></head><body>
		<div><h1 id="_idParaDest-131" class="chapter-number"><a id="_idTextAnchor347"/>12</h1>
			<h1 id="_idParaDest-132"><a id="_idTextAnchor348"/>Improving Game Feel</h1>
			<p>We now have a basic game, but it’s just that... basic. In this chapter, you will learn some of the secrets of game developers to take the basic prototype of their game and turn it into something with a lot of polish that feels satisfying to play, which is known as improving the game feel of the project.</p>
			<p>Also known as <em class="italic">juiciness</em>, or making our games juicy, in some corners of the game industry, <strong class="bold">game feel</strong> is a kind of catch-all term for all the things that we do in a game to make it pleasing for its users to interact with. This is something that is done with most mobile games that are out there today, and lacking this kind of interactivity will make others believe our project is lacking in polish.</p>
			<p>In this chapter, you will learn some of the different ways that you can integrate several of these features into your projects. We will start off by learning how to make use of animations. We will then see how we can use Unity’s material system in order to add visual appeal to our objects. We will then improve the overall visual quality of our game through the use of postprocessing effects. Lastly, we will use one of the most powerful tools in a game developer’s toybox, the particle system, to improve feedback when the player moves in the environment.</p>
			<p>This chapter covers a number of topics. It goes through a simple step-by-step process from beginning to end. Here is an outline of the tasks we will cover:</p>
			<ul>
				<li>Animation using LeanTween</li>
				<li>Adding tweens to the pause menu</li>
				<li>Working with materials</li>
				<li>Using postprocessing effects</li>
				<li>Adding particle effects</li>
			</ul>
			<h1 id="_idParaDest-133"><a id="_idTextAnchor349"/>Technical requirements</h1>
			<p>This book utilizes Unity 2022.1.0b16 and Unity Hub 3.3.1, but the steps should work with minimal changes in future versions of the editor. If you would like to download the exact version used in this book, and there is a new version out, you can visit Unity’s download archive at <a href="https://unity3d.com/get-unity/download/archive">https://unity3d.com/get-unity/download/archive</a>. You can also find the system requirements for Unity at <a href="https://docs.unity3d.com/2022.1/Documentation/Manual/system-requirements.html">https://docs.unity3d.com/2022.1/Documentation/Manual/system-requirements.html</a> in the <strong class="bold">Unity Editor system requirements</strong> section. To deploy your project, you will need an Android or iOS device.</p>
			<p>You can find the code files present in this chapter on GitHub at <a href="https://github.com/PacktPublishing/Unity-2022-Mobile-Game-Development-3rd-Edition/tree/main/Chapter12">https://github.com/PacktPublishing/Unity-2022-Mobile-Game-Development-3rd-Edition/tree/main/Chapter12</a>.</p>
			<h1 id="_idParaDest-134"><a id="_idTextAnchor350"/>Animation using LeanTween</h1>
			<p>Currently, our<a id="_idIndexMarker674"/> game’s<a id="_idIndexMarker675"/> menus are completely static. This is functional but does not make players excited about playing our game. To make the game seem more alive, we should animate our menus. Being able to use Unity’s built-in animation system is great, and it can be quite useful if you want to modify many different properties at once. If you don’t need precise control, say, if you’re only modifying a single property or you want to animate something purely via code, you can also make use of a tweening library.</p>
			<p>Tweening, short for “in-betweening,” is a common technique used in animation and game development to create smooth transitions between two states or values over a specified duration. It involves interpolating or transitioning a property or set of properties from one value to another gradually.</p>
			<p>If it is given a start and an end, the library will take care of all the work in the middle to get that property to that endpoint within the time and speed you specify. By using tweens, developers can easily add fluid and visually appealing animations to their applications without having to manually handle the interpolation calculations and animation loops. Tweening libraries provide convenient APIs and functionalities to create and control tweens in a straightforward and efficient manner.</p>
			<p>One of my favorite tweening libraries is Dented Pixel’s <em class="italic">LeanTween</em>, which is open source, usable for free in commercial and non-commercial projects, optimized for mobile devices, and used in many games, including Pokémon Go. In the following sections, we will <a id="_idIndexMarker676"/>first<a id="_idIndexMarker677"/> install and set up LeanTween and then see how we can use it to animate our t<a id="_idTextAnchor351"/>itle screen UI men<a id="_idTextAnchor352"/>us.</p>
			<h2 id="_idParaDest-135"><a id="_idTextAnchor353"/>LeanTween setup</h2>
			<p>LeanTween allows us<a id="_idIndexMarker678"/> to spin, shake, punch, move, fade, and tweak objects in many different ways with only one line of code per task. It also gives us the ability to fire custom events during the start, middle, and end of the animations, allowing us to effectively do whatever we want to create an animation in a way that is incredibly powerful once you get familiar with it.</p>
			<p>Now that we know we want to add tweens to our project, let’s start off by actually adding the LeanTween engine to our project. Implement the following steps:</p>
			<ol>
				<li>Open up the <code>LeanTween</code> and then press <em class="italic">Enter</em>.</li>
				<li>From there, you’ll be brought to a list of items, with the first one being<strong class="bold"> LeanTween</strong>; select it and you will be brought to LeanTween’s product page:</li>
			</ol>
			<div><div><img src="img/B18868_12_01.jpg" alt="Figure 12.1: Asset Store search"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.1: Asset Store search</p>
			<ol>
				<li value="3">Once on the project <a id="_idIndexMarker679"/>page, click on button that either says <strong class="bold">Add to My Assets</strong> or <strong class="bold">Open In Unity</strong> depending on if you have the package or not. At this point you may need to log into your Unity account. Once added, from the <strong class="bold">Package Manager</strong>, go ahead and from the asset page click on the <strong class="bold">Import</strong> button.</li>
			</ol>
			<div><div><img src="img/B18868_12_02.jpg" alt="Figure 12.2: Package Manager"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.2: Package Manager</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">The packages in the Package Manager here will likely look different than yours as they are ones that I have personally purchased from the Asset Store.</p>
			<ol>
				<li value="4">You should <a id="_idIndexMarker680"/>see an <code>Framework</code> folder here; however, the others may be useful to you, so feel free to use them yourself.</li>
				<li>Once you’ve finished selecting what you want, click on the <strong class="bold">Import</strong> button:</li>
			</ol>
			<div><div><img src="img/B18868_12_03.jpg" alt="Figure 12.3: Import Unity Package dialog"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.3: Import Unity Package dialog</p>
			<ol>
				<li value="6">We don’t need the Package Manager anymore, so go ahead and close it. You’ll notice that now we have the files we have selected inside our <code>Assets/LeanTween/Framework</code> folder:</li>
			</ol>
			<div><div><img src="img/B18868_12_04.jpg" alt="Figure 12.4: LeanTween imported"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.4: LeanTween imported</p>
			<p>With that, we have set up LeanTween.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">There are other tweening libraries that you may want to consider, such as iTween and DOTween. For some more information and a comparison of them, check out <a href="http://dotween.demigiant.com/#enginesComparison">http://dotween.demigiant.com/#enginesComparison</a>.</p>
			<p>Now that we have <a id="_idIndexMarker681"/>a tweening system in place, let’s see how we can actually use <a id="_idTextAnchor354"/>it!</p>
			<h2 id="_idParaDest-136"><a id="_idTextAnchor355"/>Creating a simple tween</h2>
			<p>Made popular in<a id="_idIndexMarker682"/> animation before transitioning to game development, the process of tweening (or <em class="italic">inbetweening</em>) is where, given a starting and ending value, the computer will generate the intermediate frames between the two states, giving the appearance of the beginning value evolving smoothly into the second value. A tween is the information that we have to provide in order to start the tweening process.</p>
			<p>Now that we have LeanTween included in our project, we can use it inside our code. To do that, perform the following steps:</p>
			<ol>
				<li>From the Unity Editor, open the <strong class="bold">MainMenu</strong> level by going to the <strong class="bold">Project</strong> window and double-clicking on the <strong class="bold">MainMenu</strong> scene.</li>
				<li>Now, move to the <code>Scripts</code> folder and open <code>MainMenuBehaviour</code> by double-clicking on it.</li>
				<li>We will add the following new function, which we will use to have the object move from the<a id="_idIndexMarker683"/> left side of the screen to the center:<pre class="source-code">
/// &lt;summary&gt;
/// Will move an object from the left side of the screen
/// to the center
/// &lt;/summary&gt;
/// &lt;param name="obj"&gt;The UI element we would like to
/// move&lt;/param&gt;
public void SlideMenuIn(GameObject obj)
{
    obj.SetActive(true);
    var rt = obj.GetComponent&lt;RectTransform&gt;();
    if (rt)
    {
        /* Set the object's position offscreen */
        var pos = rt.position;
        pos.x = -Screen.width / 2;
        rt.position = pos;
        /* Move the object to the center of the screen
           (x of 0 is centered) */
        LeanTween.moveX(rt, 0, 1.5f);
    }
}</pre></li>
			</ol>
			<p>Before we move anything using LeanTween, we will first set the position of our object (the <code>obj</code> parameter) off screen by setting the <code>x</code> position. It’s important to note that when dealing with UI elements in Unity, by default, we are dealing with screen space, which, as you can recall from <a href="B18868_03.xhtml#_idTextAnchor125"><em class="italic">Chapter 3</em></a>, <em class="italic">Mobile Input/Touch Controls</em>, means that we are moving in terms of pixels.</p>
			<p>From here, we’ll<a id="_idIndexMarker684"/> see that we are calling the <code>moveX</code> function from LeanTween. The version we are using takes in three parameters, the first being the <code>RectTransform</code> object we wish to move and the second being the <code>x</code> position to move it to. Based on how we set up the anchors and pivots, a position of 0 on the <em class="italic">x</em> axis is actually centered, so we pass in <code>0</code>. Lastly, we have the amount of time (in seconds) in which we want the transition to happen.</p>
			<ol>
				<li value="4">Now that we have this function, let’s actually call it. Change the <code>Start</code> function of the <code>MainMenuBehaviour</code> script so that it now looks as follows:<pre class="source-code">
protected virtual void Start()
{
    /* Initialize the showAds variable */
    bool showAds =
        (PlayerPrefs.GetInt("Show Ads", 1) == 1);
    UnityAdController.showAds = showAds;
<strong class="bold">    /* Slide in the login menu if it exists */</strong>
<strong class="bold">    if (facebookLogin != null)</strong>
<strong class="bold">    </strong><strong class="bold">{</strong>
<strong class="bold">        SlideMenuIn(facebookLogin);</strong>
<strong class="bold">    }</strong>
<strong class="bold">    /* Unpause the game if needed */</strong>
<strong class="bold">    Time.timeScale = 1;</strong>
}</pre></li>
			</ol>
			<p>The first thing we do is<a id="_idIndexMarker685"/> bring the Facebook login menu to the screen by calling the <code>SlideMenuIn</code> function, which in turn will tween the menu to the center of the screen. LeanTween, by default, makes use of the game’s <code>Time.timeScale</code> property to scale movement. When we leave the game from the pause menu and go back to the main menu, the game will still be paused. This ensures that the game will be unpaused by the time we want to slide this menu in. When we start building the pause menu, we’ll see how we can make our tweens work even when the game is paused.</p>
			<p>If you play the game now, you’ll notice that the Facebook login screen will now move from off screen back into the center of the screen.</p>
			<p>Right now, the object moves in a fairly static manner. One of the ways we can add life to this tween is by giving it some additional features, such as <code>easeType</code>.</p>
			<ol>
				<li value="5">Add the following <a id="_idIndexMarker686"/>highlighted code to the <code>SlideMenuIn</code> function:<pre class="source-code">
/// &lt;summary&gt;
/// Will move an object from the left side of the screen
/// to the center
/// &lt;/summary&gt;
/// &lt;param name="obj"&gt;The UI element we would like to
/// move&lt;/param&gt;
public void SlideMenuIn(GameObject obj)
{
    obj.SetActive(true);
    var rt = obj.GetComponent&lt;RectTransform&gt;();
    if (rt)
    {
        /* Set the object's position offscreen */
        var pos = rt.position;
        pos.x = -Screen.width / 2;
        rt.position = pos;
        /* Move the object to the center of the screen
           (x of 0 is centered) */
        LeanTween.moveX(rt, 0,
           1.5f)<strong class="bold">.setEase(LeanTweenType.easeInOutExpo);</strong>
    }
}</pre></li>
			</ol>
			<p>What is happening here is that the <code>LeanTween.moveX</code> function returns an object of the <code>LTDescr</code> type, which is actually a reference to the tween that was created. To that tween, we can add additional parameters by calling additional functions onto the tween. In fact, an alternate way to write this is the following:</p>
			<pre class="source-code">
// Move the object to the center of the screen (x of 0 is 
// centered) 
<strong class="bold">var tween = </strong>LeanTween.moveX(rt, 0, 1.5f); 
<strong class="bold">tween.setEase(LeanTweenType.easeInOutExpo);</strong></pre>
			<p>However, most of the examples in LeanTween’s documentation use the former method, chaining<a id="_idIndexMarker687"/> a number of different events to happen at once.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">To see what some of the other commonly used methods are besides <code>easeType</code> in LeanTween, check out <a href="https://tedliou.com/archives/leantween-ui-animation/">https://tedliou.com/archives/leantween-ui-animation/</a>.</p>
			<ol>
				<li value="6">Finally, we will add the ability for the current menu to slide off screen when we select a button to go to another menu:<pre class="source-code">
/// &lt;summary&gt;
/// Will move an object to the right offscreen
/// &lt;/summary&gt;
/// &lt;param name="obj"&gt;The UI element we would like to
/// move &lt;/param&gt;
public void SlideMenuOut(GameObject obj)
{
    var rt = obj.GetComponent&lt;RectTransform&gt;();
    if (rt)
    {
        var tween = LeanTween.moveX(rt,
            Screen.width / 2, 0.5f);
        tween.setEase(LeanTweenType.easeOutQuad);
        tween.setOnComplete(() =&gt;
        {
            obj.SetActive(false);
        });
    }
}</pre></li>
			</ol>
			<p>Note that this is similar <a id="_idIndexMarker688"/>to the previously written function, except now we are also using another function called <code>setOnComplete</code>, which can take in either a function or an expression lambda, which works basically as a function without a name and is often used in <code>obj</code>, I used a lambda. What this will do is after the object is off screen, it will automatically turn off; but we have the potential to do anything. This can be incredibly powerful, as we can do anything that we’d normally be able to do via code.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">For more information on lambda expressions, check out <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/lambda-expressions">https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/lambda-expressions</a>.</p>
			<ol>
				<li value="7">Then, we will <a id="_idIndexMarker690"/>need to update the <code>ShowMainMenu</code> function to actually display the menus:<pre class="source-code">
public void ShowMainMenu()
{
    if (facebookLogin != null &amp;&amp; mainMenu != null)
    {
        SlideMenuIn(mainMenu);
        SlideMenuOut(facebookLogin);
        // No longer needed as menus will be animating
        //facebookLogin.SetActive(false);
        //mainMenu.SetActive(true);
        if (FB.IsLoggedIn)
        {
            /* Get information from Facebook profile
            */
            FB.API("/me?fields=name",
                    HttpMethod.GET,
                    SetName);
            FB.API("/me/picture?width=256&amp;height=256",
                    HttpMethod.GET,
                    SetProfilePic);
        }
    }
}</pre></li>
				<li>Save the script <a id="_idIndexMarker691"/>and dive back into the game:</li>
			</ol>
			<div><div><img src="img/B18868_12_05.jpg" alt="Figure 12.5: Menus sliding in and out"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.5: Menus sliding in and out</p>
			<p>As you can see, the menus will now fly in and out when on the main menu.</p>
			<p>With the preceding example, you should be able to see just how easy it is to add motion to our projects and<a id="_idIndexMarker692"/> how it can improve the overall quality of the game, making it more enjoyable to interact with.</p>
			<h1 id="_idParaDest-137"><a id="_idTextAnchor356"/>Adding tweens to the pause menu</h1>
			<p>Now that we have<a id="_idIndexMarker693"/> finished <a id="_idIndexMarker694"/>the main menu, let’s continue adding tweens to the pause menu:</p>
			<ol>
				<li>Go ahead and open up our <code>PauseScreenBehaviour</code> script to have the following implementation of <code>SetPauseMenu</code>:<pre class="source-code">
/// &lt;summary&gt;
    /// Will turn our pause menu on or off
    /// &lt;/summary&gt;
    /// &lt;param name="isPaused"&gt;is the game currently
    /// paused&lt;/param&gt;
    public void SetPauseMenu(bool isPaused)
    {
        paused = isPaused;
        /* If the game is paused, timeScale is 0,
           otherwise 1 */
        Time.timeScale = (paused) ? 0 : 1;
<strong class="bold">        // No longer needed</strong>
<strong class="bold">        //pauseMenu.SetActive(paused);</strong>
<strong class="bold">        if (paused)</strong>
<strong class="bold">        {</strong>
<strong class="bold">            SlideMenuIn(pauseMenu);</strong>
<strong class="bold">        }</strong>
<strong class="bold">        else</strong>
<strong class="bold">        {</strong>
<strong class="bold">            SlideMenuOut(pauseMenu);</strong>
<strong class="bold">        }</strong>
        onScreenControls.SetActive(!paused);
        /* Send custom gamePaused event */
        if (paused &amp;&amp; (AnalyticsService.Instance != null))
        {
            AnalyticsService.Instance.CustomData(
                "game Paused");
            AnalyticsService.Instance.Flush();
        }
    }</pre></li>
			</ol>
			<p>Note<a id="_idIndexMarker695"/> that <a id="_idIndexMarker696"/>because <code>PauseMenuBehaviour</code> inherits from <code>MainMenuBehaviour</code>, it can also call the <code>SlideMenuIn</code> and <code>SlideMenuOut</code> functions, respectively, as long as they are marked as <code>protected</code> or <code>public</code>.</p>
			<p>Now, if we run the game, nothing will appear to happen when we hit the pause menu. This is because—as I mentioned previously—tweens are scaled by <code>Time.timeScale</code>, which we just changed. To fix this, we can make use of another LeanTween function, called <code>setIgnoreTimeScale</code>, which we will set to <code>true</code> in both functions we wrote previously in the <code>MainMenuBehaviour</code> script. Go back to the <code>MainMenuBehaviour</code> script and add the<a id="_idIndexMarker697"/> following<a id="_idIndexMarker698"/> highlighted code to the <code>SlideMenuIn</code> method:</p>
			<pre class="source-code">
/// &lt;summary&gt;
/// Will move an object from the left side of the screen
/// to the center
/// &lt;/summary&gt;
/// &lt;param name="obj"&gt;The UI element we would like to
/// move&lt;/param&gt;
public void SlideMenuIn(GameObject obj)
{
    obj.SetActive(true);
    var rt = obj.GetComponent&lt;RectTransform&gt;();
    if (rt)
    {
        /* Set the object's position offscreen */
        var pos = rt.position;
        pos.x = -Screen.width / 2;
        rt.position = pos;
        /* Move the object to the center of the screen
           (x of 0 is centered) */
<strong class="bold">        var tween = LeanTween.moveX(rt, 0, 1.5f);</strong>
<strong class="bold">        tween.setEase(LeanTweenType.easeInOutExpo);</strong>
<strong class="bold">        tween.setIgnoreTimeScale(true);</strong>
    }
}</pre>
			<ol>
				<li value="2">Add the<a id="_idIndexMarker699"/> highlighted<a id="_idIndexMarker700"/> code to the <code>SlideMenuOut</code> method:<pre class="source-code">
/// &lt;summary&gt;
/// Will move an object to the right offscreen
/// &lt;/summary&gt;
/// &lt;param name="obj"&gt;The UI element we would like to
/// move &lt;/param&gt;
public void SlideMenuOut(GameObject obj)
{
    var rt = obj.GetComponent&lt;RectTransform&gt;();
    if (rt)
    {
        var tween = LeanTween.moveX(rt,
            Screen.width / 2, 0.5f);
        tween.setEase(LeanTweenType.easeOutQuad);
<strong class="bold">        tween.setIgnoreTimeScale(true);</strong>
        tween.setOnComplete(() =&gt;
        {
            obj.SetActive(false);
        });
    }
}</pre></li>
				<li>Save both scripts <a id="_idIndexMarker701"/>and <a id="_idIndexMarker702"/>dive into the Editor to try it out:</li>
			</ol>
			<div><div><img src="img/B18868_12_06.jpg" alt="Figure 12.6: Screen flying in"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.6: Screen flying in</p>
			<p>Perfect! We now have the screen flying in just like we wanted it to.</p>
			<p>In the previous two sections, we learned how to create tweening events and how to apply them to<a id="_idIndexMarker703"/> different <a id="_idIndexMarker704"/>scenarios. In the next section, we will se<a id="_idTextAnchor357"/>e another way that we can improve the visuals of our project throu<a id="_idTextAnchor358"/>gh the use of materials.</p>
			<h1 id="_idParaDest-138"><a id="_idTextAnchor359"/>Working with materials</h1>
			<p>Previously, we have <a id="_idIndexMarker705"/>always used the default material for everything in our project. This has worked out well for us, but it may be a good idea for us to talk a little bit about creating custom ones to improve the visuals of our player. Materials are instructions on how to draw 3D objects within Unity. They consist of a shader and properties that the shader uses. A <strong class="bold">shader</strong> is a<a id="_idIndexMarker706"/> script that instructs the material on how to draw things on the object.</p>
			<p>Shaders are a huge subject that entire books have been written on, so we can’t dive too much into them here, but we can talk about working with one that is included in Unity, the <strong class="bold">Standard Shader</strong>. Implement <a id="_idIndexMarker707"/>the following steps:</p>
			<ol>
				<li>First, open the <code>Materials</code>:</li>
			</ol>
			<div><div><img src="img/B18868_12_07.jpg" alt="Figure 12.7: Adding Materials"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.7: Adding Materials</p>
			<ol>
				<li value="2">Open up the <code>Materials</code> folder<a id="_idIndexMarker708"/> we just created, and then once inside, create a new material by right-clicking within the folder and then selecting <strong class="bold">Create</strong> | <strong class="bold">Material</strong>:</li>
			</ol>
			<div><div><img src="img/B18868_12_08.jpg" alt="Figure 12.8: Creating a material"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.8: Creating a material</p>
			<ol>
				<li value="3">Name this new <a id="_idIndexMarker709"/>material <code>Ball</code>. In the <code>0.9</code> and the <code>0.8</code>.</li>
				<li>Now, go to the <strong class="bold">Scene</strong> view and drag and drop the <strong class="bold">Ball</strong> material onto our player object.</li>
			</ol>
			<div><div><img src="img/B18868_12_09.jpg" alt="Figure 12.9: Setting material properties"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.9: Setting material properties</p>
			<p>The albedo property<a id="_idIndexMarker710"/> acts as a diffuse map setting the base color of an object, though you can also apply a texture to use an image file to change how it looks. The <strong class="bold">Metallic</strong> parameter of a material determines how <em class="italic">metal-like</em> the surface is. The more metallic a surface is, the more it reflects its environment. The <strong class="bold">Smoothness</strong> property determines how smooth the surface is; a higher smoothness will have light bounce off it uniformly, making the reflections clearer.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">For more information on the standard shader and its parameters, check out <a href="https://docs.unity3d.com/Manual/StandardShaderMaterialParameters.html">https://docs.unity3d.com/Manual/StandardShaderMaterialParameters.html</a>.</p>
			<p>Using materials is only one of the ways that we can improve the visual quality of our project. In fact, one of the most drastic ways that we can modify our project’s visuals is through the use of postprocessing effects, which <a id="_idTextAnchor360"/><a id="_idTextAnchor361"/>we will be looking at next.</p>
			<h1 id="_idParaDest-139"><a id="_idTextAnchor362"/>Using postprocessing effects</h1>
			<p>One of the ways that <a id="_idIndexMarker711"/>we can improve the visual quality of our game with little effort is by using postprocessing effects (previously<a id="_idIndexMarker712"/> called <strong class="bold">Image Effects</strong>). Postprocessing is the process of applying filters and other effects to what the camera will draw (the image buffer) before it is displayed on screen.</p>
			<p>Unity includes a number of effects in its freely available postprocessing stack. Unity’s postprocessing stack is a set of visual effects that can be applied to the rendered images in a game or application to enhance the overall visual quality. These effects can include things like color grading, depth of field, motion blur, ambient occlusion, and more. By using the postprocessing stack, developers can easily add these effects to their games without having to create them from scratch.</p>
			<p>The term “stack” is used to emphasize that these effects are designed to be used together, in a layered manner, to achieve a desired visual style or aesthetic. By providing a pre-built collection of effects as a stack, Unity simplifies the process of implementing advanced visual effects for developers, allowing them to focus more on the creative aspects of their projects. So, let’s go ahead and add it using the following steps:</p>
			<ol>
				<li>Open up the Package Manager again by going to <strong class="bold">Window</strong> | <strong class="bold">Package Manager</strong>. From there, go to the <strong class="bold">Packages</strong> dropdown from the top left and set it to <strong class="bold">Unity Registry</strong>. Afterward, scroll down until you see the <strong class="bold">Post Processing</strong> option and select it:</li>
			</ol>
			<div><div><img src="img/B18868_12_10.jpg" alt="Figure 12.10: Post Processing"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.10: Post Processing</p>
			<ol>
				<li value="2">Once selected, click<a id="_idIndexMarker713"/> on the <strong class="bold">Install</strong> button and wait for it to complete.</li>
				<li>Switch to the <code>Post Process</code>. Then, move your mouse over the <strong class="bold">Post-process Layer</strong> selection and click to add the script to your project.</li>
			</ol>
			<p>The <strong class="bold">Post-process Layer</strong> component handles the blending of postprocessing volumes and what the postprocessing should be based on.</p>
			<ol>
				<li value="4">Under the <strong class="bold">Post-process Layer</strong> component, change <strong class="bold">Layer</strong> to <strong class="bold">Everything</strong>. This will make it so everything in our scene will be used in terms of blending between volumes.</li>
				<li>We will next need to add the <strong class="bold">Post-process Volume</strong> component to our <strong class="bold">Main Camera</strong> game object. Do this by clicking on the <strong class="bold">Add Component</strong> button and then selecting the <strong class="bold">Post-process </strong><strong class="bold">Volume</strong> option.</li>
			</ol>
			<div><div><img src="img/B18868_12_11.jpg" alt="Figure 12.11: Adding the volume"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.11: Adding the volume</p>
			<p>Note that this<a id="_idIndexMarker714"/> component requires a profile. We can go ahead and add that next.</p>
			<ol>
				<li value="6">We can create a new postprocessing profile by right-clicking on the <code>Assets</code> folder, selecting <code>MobilePostProcessing</code>:</li>
			</ol>
			<div><div><img src="img/B18868_12_12.jpg" alt="Image 12.12: Adding a postprocessing profile"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Image 12.12: Adding a postprocessing profile</p>
			<ol>
				<li value="7">Go back to the <strong class="bold">Main Camera</strong> object and attach this object to the <strong class="bold">Profile </strong>property <a id="_idIndexMarker715"/>of the <strong class="bold">Post-process Volume</strong> component. Afterward, go to the <strong class="bold">Post-process Volume</strong> component and then check the <strong class="bold">Is Global</strong> property box.</li>
			</ol>
			<p>This will make it so the volume we have created will always be visible on our player’s screen no matter where their camera is positioned in the world.</p>
			<ol>
				<li value="8">Because <code>Post-processing Profile</code> is a separate file, we can make changes to it while playing the game without worrying about losing our changes. With that in mind, start the game and pause it once gameplay has started.</li>
			</ol>
			<p>Now, there’s a large number of possible effects that can be added to modify how the game looks.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Note that for each element that we add to the profile you add, the frame rate of the devices we are trying to run our game on will be decreased. Keep testing your device with these options and note how it works.</p>
			<ol>
				<li value="9">Next, under the <code>0.45</code>:</li>
			</ol>
			<div><div><img src="img/B18868_12_13.jpg" alt="Figure 12.13: Adding Vignette"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.13: Adding Vignette</p>
			<p>Note how there<a id="_idIndexMarker716"/> now seems to be a blackened edge or border around the game.</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">If the UI menu disappears, switching from the <strong class="bold">Scene</strong> view back to the <strong class="bold">Game</strong> view seems to fix this issue.</p>
			<ol>
				<li value="10">Next, enable <code>0.35</code> to make it even darker by clicking on the top right of the section to expand it:</li>
			</ol>
			<div><div><img src="img/B18868_12_14.jpg" alt="Figure 12.14: Enabling Smoothness"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.14: Enabling Smoothness</p>
			<p>Vignetting is the<a id="_idIndexMarker717"/> term used for the darkening and/or desaturating toward the edges of an image compared to the center. I like to use this when I want to have players focus on the center of the screen.</p>
			<ol>
				<li value="11">Click on the <strong class="bold">Add effect...</strong> button again and this time, select <strong class="bold">Unity</strong> | <strong class="bold">Grain</strong>.</li>
			</ol>
			<p>Check and set <code>0.15</code> and you’ll note that the screen has become fuzzier. While it’s not a great idea if it is set too large, note that decreasing <code>0.3</code> and unchecking <strong class="bold">Colored</strong> will help with the appearance of things:</p>
			<div><div><img src="img/B18868_12_15.jpg" alt="Figure 12.15: Grain"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.15: Grain</p>
			<p>If you’ve been to a<a id="_idIndexMarker718"/> movie theater that still uses film, you may have noticed how there were little specks in the filmstock that were visible over the course of the film. The <strong class="bold">Grain</strong> effect in Unity simulates this film grain, causing the effect to become more pronounced the more the movie is played. This is often used in horror games to obscure the player’s vision.</p>
			<ol>
				<li value="12">Another property to add is <code>10</code>. From there, set <code>0.6</code> to help brighten things up:</li>
			</ol>
			<div><div><img src="img/B18868_12_16.jpg" alt="Figure 12.16: Bloom"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.16: Bloom</p>
			<p>The <strong class="bold">Bloom</strong> effect<a id="_idIndexMarker719"/> attempts to mimic the imaging artifacts of real-world cameras, where things in areas with light will glow along the edges, thus overwhelming the camera.</p>
			<ol>
				<li value="13">Lastly, stop the game, then go back to the <strong class="bold">Post-process Layer </strong>component and, under <strong class="bold">Anti-aliasing</strong>, change <strong class="bold">Mode</strong> to <strong class="bold">Fast Approximate Anti-aliasing (FXAA)</strong> and then check <strong class="bold">Fast</strong> <strong class="bold">Mode</strong>:</li>
			</ol>
			<div><div><img src="img/B18868_12_17.jpg" alt="Figure 12.17: Anti-aliasing"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.17: Anti-aliasing</p>
			<p>Aliasing is an effect <a id="_idIndexMarker720"/>where lines appear jagged on the screen. This happens if the screen on the device we are trying to play our game on doesn’t have a high enough resolution to display properly.</p>
			<p>Anti-aliasing attempts to reduce that effect by combining colors near these lines to remove its prominence, at the cost of it appearing blurrier.</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">For more information on postprocessing in Unity, check out <a href="https://docs.unity3d.com/Packages/com.unity.postprocessing@3.2/manual/index.html">https://docs.unity3d.com/Packages/com.unity.postprocessing@3.2/manual/index.html</a>.</p>
			<p>There are a number of other properties to look into and adapt to get your project looking just the way you want. Explore them and find what<a id="_idTextAnchor363"/> works well for the vision you are looking to achieve!</p>
			<p>The game itself currently works, but it could use some more polish. One of the things we can do to increase the polish of the game is to make use of particle systems, which <a id="_idTextAnchor364"/>is what we can look <a id="_idIndexMarker721"/>at next.</p>
			<h1 id="_idParaDest-140"><a id="_idTextAnchor365"/>Adding particle effects</h1>
			<p>Typically used for effects <a id="_idIndexMarker722"/>that are natural or organic, such as fire, smoke, and sparks, particle systems create objects that are designed to be as low cost as possible, called <a id="_idIndexMarker723"/>particles. Due to this, we can spawn many of the particles at once with a minimal performance cost. One of the easiest types of particle systems to create is a trail to follow our player, so let’s add one of those now using the following steps:</p>
			<ol>
				<li>Select <strong class="bold">Player</strong> in the <strong class="bold">Hierarchy</strong> window, and then right-click and select <strong class="bold">Effects</strong> | <strong class="bold">Particle System</strong>.</li>
			</ol>
			<p>This will make this system a child of the player, which will be good for what we are going to do.</p>
			<ol>
				<li value="2">In the <code>0</code> and <strong class="bold">Simulation Space</strong> to <strong class="bold">World</strong>. Then, change <strong class="bold">Start Color</strong> to a color that stands out, such as purple.</li>
				<li>Open up the <code>0</code> (it will automatically change to <code>0.0001</code>).</li>
			</ol>
			<p>This is a step in the right direction. The purple particles are now following the playe<a id="_idTextAnchor366"/>r, as shown in the screenshot:</p>
			<div><div><img src="img/B18868_12_18.jpg" alt="Figure 12.18: Particle trail"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.18: Particle trail</p>
			<p>However, there are <a id="_idIndexMarker724"/>still a number of things we can do to improve this. Instead of just a single color, we can change it so that it randomly alternates between two colors.</p>
			<ol>
				<li value="4">To do that, go to the right side of <strong class="bold">Start Color</strong>, and you’ll see a little downward-facing arrow. Click on that and then select <strong class="bold">Random Between Two Colors</strong>. Then, change the color to one of two purple colors for some randomness.</li>
				<li>Then, next to <code>0.5</code> and <code>1.2</code>.</li>
				<li>With that, set the <code>0</code> to <code>0.2</code>.</li>
				<li>Then, open up the <code>100</code>:</li>
			</ol>
			<div><div><img src="img/B18868_12_19.jpg" alt="Figure 12.19: Particle settings"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.19: Particle settings</p>
			<ol>
				<li value="8">Save the <a id="_idIndexMarker725"/>game and play:</li>
			</ol>
			<div><div><img src="img/B18868_12_20.jpg" alt="Figure 12.20: Final particle trail"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 12.20: Final particle trail</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">If you’re interested in exploring more details on things that can be done to polish projects, you can check out another of my Unity books, <em class="italic">Unity 5.x Game Development Blueprints</em>, also available from Packt, which also dives into game polish.</p>
			<p>As you can see, the particle system looks great on both our PC and mobile devices.</p>
			<p>Of course, there are many other areas that can be improved through the use of particle systems. Perhaps <a id="_idIndexMarker726"/>whenever the player hits a wall, we can display some sparks; when we swipe, we could play another effect; when the player pauses the game, we could have something falling on the screen<a id="_idTextAnchor367"/>. The possibilities are endless!</p>
			<h1 id="_idParaDest-141"><a id="_idTextAnchor368"/>Summary</h1>
			<p>We have now improved our game by a huge amount by only doing a few simple things. We first animated our menus with a few lines of code using tweens from LeanTween and saw how a few lines of code can improve the visual quality of our UI in a number of ways. We next saw how to create materials to improve the visual quality of our ball and then used some postprocessing effects to polish the contents of our screen. Finally, we discussed how to use particle effects to create a nice trail following our player.</p>
			<p>With these concepts, you now have the skills to dramatically improve the feel of your game projects so that players actually enjoy interacting with your game.</p>
			<p>By this point, our game is finally ready for the big leagues. In the next chapter, we will explore how to build our games in order to get our game onto the Apple App Store and Google Play.</p>
		</div>
	</body></html>