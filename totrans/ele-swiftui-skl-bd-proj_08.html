<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-120"><a id="_idTextAnchor402"/>8</h1>
<h1 id="_idParaDest-121"><a id="_idTextAnchor403"/>Watch Project – Fitness Companion Design</h1>
<p>In the previous six chapters, we have created various applications for our Apple devices. These chapters taught us how to set up projects for the iPhone, iPad, and Mac. They also demonstrated the design differences between small and large displays. In this chapter, we will be designing a fitness companion application for the Apple Watch. Due to the small screen size of the watch, we will need to simplify the design. We will assess the requirements and discuss the design specifications before starting the coding process.</p>
<p>Firstly, we will assess the requirements needed for designing a fitness companion application for the Apple Watch. We will then move on to discussing the design specifications, which will give us a better understanding of what is required and how it will all fit together. This will be followed by the coding process, where we will build the fitness app over the course of these two chapters. This project will cover the foundations of SwiftUI components. We will discuss all this in the following sections:</p>
<ul>
<li>Understanding the design specifications</li>
<li>Building the fitness app</li>
</ul>
<p>In this chapter, we will gain a better understanding of the requirements and design of our application. The foundations we have established over the previous chapters in SwiftUI components, design, and Xcode navigation will serve as a strong starting point for the next chapter. Stay tuned for more progress as we continue to build upon these foundations.</p>
<h1 id="_idParaDest-122"><a id="_idTextAnchor404"/>Technical requirements</h1>
<p>This chapter requires you to download Xcode version 14 or above from Apple’s App Store.</p>
<p>To install it, just search for Xcode in the App Store, then select and download the latest version. Open Xcode and follow any additional installation instructions. Once Xcode has opened and launched, you’re ready to go.</p>
<p>Version 14 of Xcode has the following features/requirements:</p>
<ul>
<li>Includes SDKs for iOS 16, iPadOS 16, macOS 12.3, tvOS 16, and watchOS 9.</li>
<li>Supports on-device debugging in iOS 11 or later, tvOS 11 or later, and watchOS 4 or later.</li>
<li>Requires a Mac running macOS Monterey 12.5 or later.</li>
</ul>
<p>You can download the sample code from the following GitHub link: <a href="https://github.com/PacktPublishing/Elevate-SwiftUI-Skills-by-Building-Projects">https://github.com/PacktPublishing/Elevate-SwiftUI-Skills-by-Building-Projects</a></p>
<p><a id="_idTextAnchor405"/>In the next section, we will provide clarity on the specifications of our application’s design and look at mockups of what the app will look like.</p>
<h1 id="_idParaDest-123"><a id="_idTextAnchor406"/>Understanding the Design Specifications</h1>
<p><a id="_idTextAnchor407"/>This section <a id="_idIndexMarker328"/>outlines the design specifications for our <a id="_idIndexMarker329"/>fitness companion application. Our goal is to implement features that will enhance the user experience. To achieve this, we have put ourselves in the user’s shoes to determine how they will use the app. We have then broken down the process into individual steps to identify the necessary features. By doing this, we can ensure that our fitness app will be user-friendly and efficient.</p>
<p><a id="_idTextAnchor408"/>In this section, we will look at the design specifications of our fitness companion application and describe the features we are going to implement. The best method for figuring out the features required is to put yourself in the user’s shoes to determine how they will use the app and break it down into individual steps.</p>
<p><a id="_idTextAnchor409"/>Our fitness application has been designed with several features to assist users in achieving their fitness goals. We are confident that our app will provide users with a seamless and effective fitness experience.</p>
<p>The features we <a id="_idIndexMarker330"/>would like our app to have are as follows:</p>
<ul>
<li>Current time</li>
<li>Active/workout time</li>
<li>BPM (beats per minute)</li>
<li>Total calories burned</li>
<li>Activity</li>
<li>Views that can be swiped</li>
<li>Starting a new workout</li>
<li>Pausing a workout</li>
<li>Ending a workout</li>
<li>Locking a workout</li>
<li>Goals</li>
<li>Different exercises</li>
</ul>
<p>After <a id="_idIndexMarker331"/>listing the ideal features, it is crucial to <a id="_idIndexMarker332"/>determine which ones are mandatory. Understanding the end use of our product is key. For me, the purpose of creating this fitness companion app is to provide a solid foundation for adding more advanced functionality later. We will not be implementing all the features in the preceding list, as it would be beneficial to try and implement them on your own as extra tasks to put the concepts you’ve learned into practice. Therefore, the following are the core features we will be implementing:</p>
<ul>
<li>Current time</li>
<li>Active/workout time</li>
<li>BPM (beats per minute)</li>
<li>Total calories burned</li>
<li>Activity</li>
<li>Views that can be swiped</li>
<li>Starting a new workout icon</li>
<li>Pausing a workout icon</li>
<li>Ending a workout icon</li>
<li>Locking a workout icon</li>
</ul>
<p>Once you have finished reading this chapter and the following one, you will be ready to tackle the remaining features on your own. The next section will outline the acceptance criteria for our application, providing you with the necessary guidelines to ensure its success.</p>
<h1 id="_idParaDest-124"><a id="_idTextAnchor410"/>Acceptance criteria for our app</h1>
<p>In this section, we will outline the <a id="_idIndexMarker333"/>mandatory requirements for our application. These requirements are crucial for the end product and must be measurable. We need to ensure that these requirements are met to deliver a successful application. Let’s get started:</p>
<ul>
<li>Current time – this will show the actual time as per your time zone.</li>
<li>Active/workout time – this will be a live timer that shows the current workout time.</li>
<li>BPM (beats per minute) – this label will be linked to a variable to show the user’s heartbeats per minute.</li>
<li>Total calories burned – this will display the calories burned and will be linked to the calories variable.</li>
<li>Activity – this will be used to display the current activity; for example, running, swimming, yoga, and so on.</li>
<li>Views that can be swiped – this will allow us to have two separate screens on a single page and expand it as our needs increase.</li>
<li>Starting a new workout – a button composed of an image and text item will allow the user to start the workout.</li>
<li>Pausing a workout icon – this button will also be composed of an image and text item that will be used to pause the workout.</li>
<li>Ending a workout icon – another button, similar to the previous two, will be used for ending the workout.</li>
<li>Locking a workout icon – finally, this button will be used for locking the workout.</li>
</ul>
<p><a id="_idTextAnchor411"/>To ensure the success of the application, it is <a id="_idIndexMarker334"/>crucial to develop test cases that measure the acceptance criteria. These test cases should simulate real-life scenarios and conditions in which the end user will use the application. By doing so, we can accurately measure the performance level that needs to be obtained for the application to be considered successful. Therefore, creating detailed test cases or scenarios is necessary to ensure the application meets the expected standards.</p>
<h1 id="_idParaDest-125"><a id="_idTextAnchor412"/>Wireframe for our app</h1>
<p>Wireframing is an essential <a id="_idIndexMarker335"/>tool for designing layouts. It provides an overview of how the layout will look. The wireframe for the current activity in the fitness application is depicted in the following figure:</p>
<div><div><img alt="Figure 8.1 – Wireframe for our watch app" src="img/B18783_08_001.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.1 – Wireframe for our watch app</p>
<p>The following figure shows the wireframe for the view that allows you to start, stop, and pause activities:</p>
<div><div><img alt="Figure 8.2 – Activity button wireframe" src="img/B18783_08_002.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.2 – Activity button wireframe</p>
<p>We have now seen the <a id="_idIndexMarker336"/>wireframes for our fitness application. These wireframes will serve as the initial foundation for building the UI of our application.</p>
<p>In the next section, we will construct the interface for our application and verify that it matches the design we created in the wireframe. While we will follow the same process, there may be minor discrepancies. Our primary focus will be on the initial view in this chapter, with the second view being addressed in the subsequent chapter.</p>
<h1 id="_idParaDest-126">Bu<a id="_idTextAnchor413"/>ilding the Fitness App</h1>
<p>We<a id="_idTextAnchor414"/> will now build the <a id="_idIndexMarker337"/>UI for the sidebar. First, let’s create our project. Follow these steps:</p>
<ol>
<li>Open Xcode and select <strong class="bold">Create a new </strong><strong class="bold">Xcode Project</strong>:</li>
</ol>
<div><div><img alt="Figure 8.3 – Create a new Xcode project" src="img/B18783_08_003.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.3 – Create a new Xcode project</p>
<ol>
<li value="2">Now we will choose the <a id="_idIndexMarker338"/>template for our application. As we are creating an Apple Watch application, we will select <strong class="bold">WatchOS</strong> from the top, then select <strong class="bold">App</strong>, and click <strong class="bold">Next</strong>:</li>
</ol>
<div><div><img alt="Figure 8.4 – Xcode project template selection" src="img/B18783_08_004.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.4 – Xcode project template selection</p>
<ol>
<li value="3">We will now choose the options for our project. Here, there is only one crucial thing to select/set. Make sure <strong class="bold">Watch-only App</strong> is selected:</li>
</ol>
<div><div><img alt="Figure 8.5 – Xcode project options" src="img/B18783_08_005.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.5 – Xcode project options</p>
<ol>
<li value="4">Once you press <strong class="bold">Next</strong>, you can choose where to create your project, as seen in the following figure:</li>
</ol>
<div><div><img alt="Figure 8.6 – Xcode project save directory" src="img/B18783_08_006.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.6 – Xcode project save directory</p>
<ol>
<li value="5">Once you have found the <a id="_idIndexMarker339"/>location where you would like to create it, click <strong class="bold">Create</strong> in the bottom right. Xcode shows your project in all its glory, as seen in the following figure:</li>
</ol>
<div><div><img alt="Figure 8.7 – New Xcode project overview" src="img/B18783_08_007.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.7 – New Xcode project overview</p>
<p>In this<a id="_idTextAnchor415"/> section, we set up our WatchOS project. Now that we are all set up, we will implement the interface for the first page of our fitness application.</p>
<h2 id="_idParaDest-127"><a id="_idTextAnchor416"/>Activity Details</h2>
<p>In this section, we will implement the <a id="_idIndexMarker340"/>first page of the fitness application, which will represent the current activity details. As a reminder, refer to <em class="italic">Figure 8</em><em class="italic">.1</em> to see what it looks like.</p>
<p>There are five main elements to the current activity screen. As a little task, see whether you can figure out what they are. Don’t worry if you don’t know the exact UI component names; we will look at these components in the following section.</p>
<h3>Text</h3>
<p>A <a id="_idTextAnchor417"/>text component displays a <a id="_idIndexMarker341"/>string of characters, numerals, or even icons, all of which can be used in conjunction with each other. For us, it will be used to display all five components as follows:</p>
<ol>
<li>Current time:</li>
</ol>
<div><div><img alt="Figure 8.8 – Current time label" src="img/B18783_08_008.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.8 – Current time label</p>
<ol>
<li value="2">Activity running time:</li>
</ol>
<div><div><img alt="Figure 8.9 – Activity time label" src="img/B18783_08_009.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.9 – Activity time label</p>
<ol>
<li value="3">Beats per minute (BPM):</li>
</ol>
<div><div><img alt="Figure 8.10 – BPM label" src="img/B18783_08_010.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.10 – BPM label</p>
<ol>
<li value="4">Calories burned:</li>
</ol>
<div><div><img alt="Figure 8.11 – Calories label" src="img/B18783_08_011.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.11 – Calories label</p>
<ol>
<li value="5">Current activity:</li>
</ol>
<div><div><img alt="Figure 8.12 – Current activity label" src="img/B18783_08_012.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.12 – Current activity label</p>
<p class="callout-heading">Important no<a id="_idTextAnchor418"/>te</p>
<p class="callout">To rename views, please refer to the <em class="italic">Renaming views</em> section in the previous chapter to revisit the concept.</p>
<p>In this section, we analyzed the acceptance criteria along with the requirements of our fitness companion application. We also broke down the wireframes, enabling us to determine how the application works and is structured. We will utilize this knowledge going forward into the next section.</p>
<h1 id="_idParaDest-128">Implementing<a id="_idTextAnchor419"/> the Current Activity UI</h1>
<p>In this section, we will <a id="_idIndexMarker342"/>use the newly set up project to start the coding of our fitness watch application. We will implement the current activity UI, which will display the information for the current activity.</p>
<p>As we have created a fresh project, the coding standards aren’t in line with my personal preference. So, firstly, I will change the standards. Feel free to take a few moments to do the same.</p>
<p>If you run the newly created application as it is, you will notice that we already have the current time in the top right, as shown in the following screenshot:</p>
<div><div><img alt="Figure 8.13 – Default time" src="img/B18783_08_013.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.13 – Default time</p>
<p>It’s great for us, as the time is already in place by default. There may be scenarios where you want to remove the time, but as we do not, we <a id="_idIndexMarker343"/>can proceed. Now, we will move on to implementing the text items for the current activity. Implementing the remaining text items is actually very simple. Remove all the code within the VStack and add the following labels:</p>
<pre class="source-code">
var body: some View{
    VStack( )
    {
        Text( "00:10:44" )
        Text( "120 BPM" )
        Text( "110 Calories" )
        Text( "Running" )
    }
    .padding( )
}</pre>
<p>This will result in the following layout:</p>
<div><div><img alt="Figure 8.14 – Text items added" src="img/B18783_08_014.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.14 – Text items added</p>
<p>Firstly, we will set the alignment of the VStack to left-aligned, like so:</p>
<pre class="source-code">
VStack( alignment: .leading )</pre> <p>Though all the <a id="_idIndexMarker344"/>content is present, it’s not dynamic or styled. First, we will make it dynamic. To do so, create five variables to store the following:</p>
<ul>
<li>Time counter – this will count up every second; it can be modified for more frequent counting.</li>
<li>Timer string – this will use the time counter and convert it into 00:00:00 format.</li>
<li>BPM – this will store the BPM number.</li>
<li>Calories – this will store the number of calories burned during the workout session.</li>
<li>Activity – this will inform the user which workout is active.</li>
</ul>
<p>The code for this is as follows:</p>
<pre class="source-code">
@State private var counter = 0@State private var timerString = "00:00:00"
@State private var bpm = 120
@State private var calories = 110
@State private var activity = "Running"</pre>
<p>Next, we will create a timer that runs every second:</p>
<pre class="source-code">
let timer = Timer.publish(every: 1, on: .main, in: .common).autoconnect()</pre> <p>Now, it is time to link these variables and the timer to the appropriate components. Firstly, add an <code>onReceive</code> event to the timer text component, like so:</p>
<pre class="source-code">
Text( timerString )    .onReceive( timer )
    { time in
        counter += 1
        let hours = counter / 3600
        let minutes = ( counter % 3600 ) / 60
        let seconds = counter % 3600 % 60
        timerString = String( hours ) + ":"
+ String( minutes ) + ":" +
String( seconds )
    }</pre>
<p>Let’s take a look at what we just did. The <code>onReceive</code> event takes the timer as the parameter, which is used to observe how often the published events are triggered by the timer. In each pass, we increment the counter by one, so the counter is the number of seconds elapsed. Then, we create constants for hours, minutes, and seconds. We do some simple mathematical calculations to figure out how many hours, minutes, and seconds the timer has been running. Finally, we will format our <code>timerString</code> to show <code>hours:minutes:seconds</code>. Running the application will show the following result:</p>
<div><div><img alt="Figure 8.15 – Dynamically linked variables" src="img/B18783_08_015.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.15 – Dynamically linked variables</p>
<p>You may notice that the time is <a id="_idIndexMarker345"/>currently in the format of <code>0:0:0</code>, not <code>00:00:00</code>. Fixing this is super simple; we need to add a formatter onto each string to format it using two decimal places for the hours, minutes, and seconds. Update the <code>timerString</code> as follows:</p>
<pre class="source-code">
timerString = String( format: "%02d", hours ) + ":" + String( format: "%02d", minutes ) + ":" + String( format: "%02d", seconds )</pre> <p>Now, the application will appear as follows:</p>
<div><div><img alt="Figure 8.16 – Formatted time﻿rString" src="img/B18783_08_016.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.16 – Formatted timerString</p>
<p>It is looking better now. The BPM, calories, and current activity labels are all fine; we just need to modify the current activity time label. Three things need to be done: make it bigger, change the color to yellow, and add some padding below. Doing <a id="_idIndexMarker346"/>all of this is simple. Modify the current activity time text item, like so:</p>
<pre class="source-code">
Text( timerString )    .font( .title2 )
    .foregroundColor( Color.yellow )
    .padding( .bottom )
    .onReceive( timer ) …</pre>
<p>Once we run the application, we will see we have completed the code for this chapter.</p>
<div><div><img alt="Figure 8.17 – Current activity time styled" src="img/B18783_08_017.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 8.17 – Current activity time styled</p>
<p>In this section, <a id="_idTextAnchor420"/>we implemented the current activity screen for our fitness companion application. You learned that even though Apple WatchOS is the newest of the four SDKs and seems difficult, it is just the same and very simple to use. In the next chapter, we will implement a swipe view to add the activity button screen.</p>
<h1 id="_idParaDest-129"><a id="_idTextAnchor421"/>Summary</h1>
<p>In this chapter, we covered the design of our fitness companion application. We looked at wireframes and broke each element down into SwiftUI components. We then implemented the SwiftUI components to match the design from the wireframes for the current activity screen. We also looked at the requirements and design specifications for building this application, then simplified it to the core features our app will provide.</p>
<p>Next, we designed our fitness companion app by creating wireframes and breaking down each element into SwiftUI components. We implemented these components to match the wireframe design for the current activity screen. We also reviewed the requirements and design specifications for building the app and simplified it to focus on the core features it will provide. There are always features that are nice to have but are inevitably cut from the first release, or what many call the <strong class="bold">MVP</strong> (<strong class="bold">minimum viable product</strong>). This is effectively what we did. It is crucial to curb the scope to prevent it from becoming too large and out of hand.</p>
<p>In the next chapter, we’ll look at implementing the activity button screen for our fitness companion application.</p>
</div>
</body></html>