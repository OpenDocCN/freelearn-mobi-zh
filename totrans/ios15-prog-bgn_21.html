<html><head></head><body>
		<div id="_idContainer440">
			<h1 id="_idParaDest-261"><em class="italic"><a id="_idTextAnchor299"/>Chapter 18</em>: Displaying Data in a Static Table View</h1>
			<p>You've come a long way, and your app has data in all its screens except for the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<p>In this chapter, you'll configure the <strong class="source-inline">RestaurantDetailViewController</strong> class to manage the views in the <strong class="bold">Restaurant Detail</strong> screen. Next, you'll add methods to <strong class="source-inline">viewDidLoad()</strong> to populate the table view when the <strong class="bold">Restaurant Detail</strong> screen is displayed. Finally, you will pass the appropriate <strong class="source-inline">RestaurantItem</strong> instance from the <strong class="source-inline">RestaurantListViewController</strong> and <strong class="source-inline">MapViewController</strong> instances to the <strong class="source-inline">RestaurantDetailViewController</strong> instance, which will display the data from that <strong class="source-inline">RestaurantItem</strong> instance on the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<p>By the end of this chapter, you'll have learned how to make table views with static cells display data, and how to create a custom map image. By doing so, you'll be able to implement these features in your own apps.</p>
			<p>The following topics will be covered in this chapter:</p>
			<ul>
				<li>Setting up outlets for the <strong class="source-inline">RestaurantDetailViewController</strong> class</li>
				<li>Displaying data in the static table view</li>
				<li>Passing data to the <strong class="source-inline">RestaurantDetailViewController</strong> instance</li>
			</ul>
			<h1 id="_idParaDest-262"><a id="_idTextAnchor300"/>Technical requirements</h1>
			<p>You will continue working on the <strong class="source-inline">LetsEat</strong> project that you modified in the previous chapter.</p>
			<p>The completed Xcode project for this chapter is in the <strong class="source-inline">Chapter18</strong> folder of the code bundle for this book, which can be downloaded here:</p>
			<p><a href="https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition">https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition</a> </p>
			<p>Check out the following video to see the code in action:</p>
			<p><a href="https://bit.ly/3l2h6xq">https://bit.ly/3l2h6xq</a></p>
			<p>Let's start by creating outlets in the <strong class="source-inline">RestaurantDetailViewController</strong> class to enable it to manage the views in the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<h1 id="_idParaDest-263"><a id="_idTextAnchor301"/>Setting up outlets for the RestaurantDetailViewController class</h1>
			<p>Your<a id="_idIndexMarker965"/> app has data in all its <a id="_idIndexMarker966"/>screens except for the <strong class="bold">Restaurant Detail</strong> screen. This screen is accessed either by tapping a restaurant in the <strong class="bold">Restaurant List</strong> screen or by tapping the restaurant annotation view's callout bubble button in the <strong class="bold">Map</strong> screen. If you build and run your app, tapping a restaurant in the <strong class="bold">Restaurant List</strong> screen shows the placeholder <strong class="bold">Restaurant Detail</strong> screen:</p>
			<div>
				<div id="_idContainer419" class="IMG---Figure">
					<img src="image/Figure_18.01_B17469.jpg" alt="Figure 18.1: iOS Simulator showing placeholder Restaurant Detail screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.1: iOS Simulator showing placeholder Restaurant Detail screen</p>
			<p>Tapping <a id="_idIndexMarker967"/>the button in the<a id="_idIndexMarker968"/> restaurant annotation view's callout bubble in the <strong class="bold">Map</strong> screen shows the actual <strong class="bold">Restaurant Detail</strong> screen, but it does not contain any restaurant data:</p>
			<div>
				<div id="_idContainer420" class="IMG---Figure">
					<img src="image/Figure_18.02_B17469.jpg" alt="Figure 18.2: iOS Simulator showing Restaurant Detail screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.2: iOS Simulator showing Restaurant Detail screen</p>
			<p>To <a id="_idIndexMarker969"/>fix this, let's set up<a id="_idIndexMarker970"/> the outlets for the <strong class="source-inline">RestaurantDetailViewController</strong> class. Click the <strong class="source-inline">RestaurantDetailViewController</strong> file in the Project navigator. Add the following outlets after the class declaration and before the <strong class="source-inline">selectedRestaurant</strong> property declaration:</p>
			<p class="source-code">// Nav Bar</p>
			<p class="source-code">@IBOutlet var heartButton: UIBarButtonItem!</p>
			<p class="source-code">// Cell One</p>
			<p class="source-code">@IBOutlet var nameLabel: UILabel!</p>
			<p class="source-code">@IBOutlet var cuisineLabel: UILabel!</p>
			<p class="source-code">@IBOutlet var headerAddressLabel: UILabel!</p>
			<p class="source-code">// Cell Two</p>
			<p class="source-code">@IBOutlet var tableDetailsLabel: UILabel!</p>
			<p class="source-code">// Cell Three</p>
			<p class="source-code">@IBOutlet var overallRatingLabel: UILabel!</p>
			<p class="source-code">// Cell Eight</p>
			<p class="source-code">@IBOutlet var addressLabel: UILabel!</p>
			<p class="source-code">// Cell Nine</p>
			<p class="source-code">@IBOutlet var locationMapImageView: UIImageView!</p>
			<p>The <a id="_idIndexMarker971"/>outlets that you just <a id="_idIndexMarker972"/>set up are as follows:</p>
			<ul>
				<li><strong class="source-inline">heartButton</strong> is the outlet for the heart-shaped button in the navigation bar. You won't be using it in this book, but it's something that you can work on later on your own.</li>
				<li><strong class="source-inline">nameLabel</strong> is the outlet for the label that displays the name of the restaurant in the first cell.</li>
				<li><strong class="source-inline">cuisineLabel</strong> is the outlet for the label that displays the cuisines offered by the restaurant in the first cell.</li>
				<li><strong class="source-inline">headerAddressLabel</strong> is the outlet for the label that displays the address of the restaurant in the first cell.</li>
				<li><strong class="source-inline">tableDetailsLabel</strong> is the outlet for the label that displays the table details of the restaurant in the second cell.</li>
				<li><strong class="source-inline">overallRatingLabel</strong> is the outlet for the label that displays the overall rating for the restaurant in the third cell. You will calculate and set this value in <a href="B17469_21_Final_VK_ePub.xhtml#_idTextAnchor362"><em class="italic">Chapter 21</em></a>, <em class="italic">Understanding Core Data</em>.</li>
				<li><strong class="source-inline">addressLabel</strong> is the outlet for the label that displays the address of the restaurant in the eighth cell.</li>
				<li><strong class="source-inline">locationMapImageView</strong> is the outlet for the image view that displays a location map for the restaurant in the ninth cell. You will write methods to generate this map later in this chapter.</li>
			</ul>
			<p>Now that you've created the outlets, you'll connect them to the UI elements in the <strong class="bold">Restaurant Detail View Controller Scene</strong> in the <strong class="source-inline">RestaurantDetail</strong> storyboard file. Follow these steps:</p>
			<ol>
				<li>Expand<a id="_idIndexMarker973"/> the <strong class="source-inline">RestaurantDetail</strong> folder in the Project navigator. Click the <strong class="source-inline">RestaurantDetail</strong> storyboard file. Then, click the <strong class="bold">View Controller</strong> icon in the <strong class="bold">Restaurant Detail View Controller Scene</strong>. Next, click the Identity inspector button. Under <strong class="bold">Custom Class</strong>, confirm that <strong class="bold">Class</strong> has been set to the <strong class="source-inline">RestaurantDetailViewController</strong> class:<div id="_idContainer421" class="IMG---Figure"><img src="image/Figure_18.03_B17469.jpg" alt="Figure 18.3: Identity inspector settings for Restaurant Detail View Controller&#13;&#10;"/></div><p class="figure-caption">Figure 18.3: Identity inspector settings for Restaurant Detail View Controller</p><p>Note that the name of the view controller will change to <strong class="bold">Restaurant Detail View Controller</strong> once the class is set. Unlike the table view in the <strong class="bold">Location View Controller Scene</strong>, the table view in the <strong class="bold">Restaurant Detail View Controller Scene</strong> has static cells, meaning the number of cells is not dynamically generated based on data from a model object. As can be seen in the document outline, there are nine cells, and each cell has already been configured with the appropriate view objects. Clicking on each table view cell in the document outline will display that cell in the Editor area.</p></li>
				<li>Click the<a id="_idIndexMarker974"/> Connections inspector button. You'll see all the outlets you added earlier in the <strong class="source-inline">RestaurantDetailViewController</strong> class:<div id="_idContainer422" class="IMG---Figure"><img src="image/Figure_18.04_B17469.jpg" alt="Figure 18.4: Connections inspector showing outlets for RestaurantDetailViewController class&#13;&#10;"/></div><p class="figure-caption">Figure 18.4: Connections inspector showing outlets for RestaurantDetailViewController class</p></li>
				<li>Click and drag from the <strong class="source-inline">heartButton</strong> outlet to the heart in the navigation bar:<div id="_idContainer423" class="IMG---Figure"><img src="image/Figure_18.05_B17469.jpg" alt="Figure 18.5: Connections inspector showing heartButton outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.5: Connections inspector showing heartButton outlet</p></li>
				<li>The <strong class="source-inline">heartButton</strong> outlet is now connected. Note that the description of the view will<a id="_idIndexMarker975"/> change to <strong class="bold">Heart Button</strong> in the document outline:<div id="_idContainer424" class="IMG---Figure"><img src="image/Figure_18.06_B17469.jpg" alt="Figure 18.6: Document outline showing Heart Button view&#13;&#10;"/></div><p class="figure-caption">Figure 18.6: Document outline showing Heart Button view</p></li>
				<li>Click on the last <strong class="bold">Table View Cell</strong> in the document outline to see the bottom of the table view and click <strong class="bold">Restaurant Detail View Controller</strong> (You may need to click a few times). You should see a <strong class="bold">UIImageView</strong>. Click and drag from the <strong class="source-inline">locationMapImageView</strong> outlet to the <strong class="bold">Image View</strong> in the last cell to connect them. Note that the <a id="_idIndexMarker976"/>name will change from <strong class="bold">Image View</strong> to <strong class="bold">Location Map Image View</strong> in the document outline:<div id="_idContainer425" class="IMG---Figure"><img src="image/Figure_18.07_B17469.jpg" alt="Figure 18.7: Connections inspector showing locationMapImageView outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.7: Connections inspector showing locationMapImageView outlet</p></li>
				<li>Click on the eighth <strong class="bold">Table View Cell</strong> in the document outline and click <strong class="bold">Restaurant Detail View Controller</strong>. Click and drag from the <strong class="source-inline">addressLabel</strong> outlet to the <strong class="bold">Label</strong> in the eighth cell to connect them. Note that the name will change from <strong class="bold">Label</strong> to <strong class="bold">Address Label</strong> in the document outline:<div id="_idContainer426" class="IMG---Figure"><img src="image/Figure_18.08_B17469.jpg" alt="Figure 18.8: Connections inspector showing addressLabel outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.8: Connections inspector showing addressLabel outlet</p></li>
				<li>Click on the first <strong class="bold">Table View Cell</strong> in the document outline and click <strong class="bold">Restaurant Detail View Controller</strong>. Click and drag from the <strong class="source-inline">cuisineLabel</strong> outlet to the second <strong class="bold">Label</strong> in the first cell to connect them. Note that the name will change from <strong class="bold">Label</strong> to <strong class="bold">Cuisine Label</strong> in the document outline:<div id="_idContainer427" class="IMG---Figure"><img src="image/Figure_18.09_B17469.jpg" alt="Figure 18.9: Connections inspector showing cuisineLabel outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.9: Connections inspector showing cuisineLabel outlet</p></li>
				<li>Click and drag from the <strong class="source-inline">headerAddressLabel</strong> outlet to the third <strong class="bold">Label</strong> in the first cell to<a id="_idIndexMarker977"/> connect them. Note that the name will change from <strong class="bold">Label</strong> to <strong class="bold">Header Address Label</strong> in the document outline:<div id="_idContainer428" class="IMG---Figure"><img src="image/Figure_18.10_B17469.jpg" alt="Figure 18.10: Connections inspector showing headerAddressLabel outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.10: Connections inspector showing headerAddressLabel outlet</p></li>
				<li>Click and drag from the <strong class="source-inline">nameLabel</strong> outlet to the first <strong class="bold">Label</strong> in the first cell to connect them. Note that the name will change from <strong class="bold">Label</strong> to <strong class="bold">Name Label</strong> in the document outline:<div id="_idContainer429" class="IMG---Figure"><img src="image/Figure_18.11_B17469.jpg" alt="Figure 18.11: Connections inspector showing nameLabel outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.11: Connections inspector showing nameLabel outlet</p></li>
				<li>Click on the third <strong class="bold">Table View Cell</strong> in the document outline and click <strong class="bold">Restaurant Detail View Controller</strong>. Click and drag from the <strong class="source-inline">overallRatingLabel</strong> outlet to the <strong class="bold">Label</strong> with the big black <strong class="bold">0.0</strong> inside it to connect them. Note <a id="_idIndexMarker978"/>that the name will change from <strong class="bold">Label</strong> to <strong class="bold">Overall Rating Label</strong> in the document outline:<div id="_idContainer430" class="IMG---Figure"><img src="image/Figure_18.12_B17469.jpg" alt="Figure 18.12: Connections inspector showing overallRatingLabel outlet&#13;&#10;"/></div><p class="figure-caption">Figure 18.12: Connections inspector showing overallRatingLabel outlet</p></li>
				<li>Click on the second <strong class="bold">Table View Cell</strong> in the document outline and click <strong class="bold">Restaurant Detail View Controller</strong>. Click and drag from the <strong class="source-inline">tableDetailsLabel</strong> outlet to the <strong class="bold">Label</strong> just above the three red buttons in the second cell to connect them. Note that the name will change from <strong class="bold">Label</strong> to <strong class="bold">Table Details Label</strong> in the document outline:</li>
			</ol>
			<div>
				<div id="_idContainer431" class="IMG---Figure">
					<img src="image/Figure_18.13_B17469.jpg" alt="Figure 18.13: Connections inspector showing tableDetailsLabel outlet&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.13: Connections inspector showing tableDetailsLabel outlet</p>
			<p>All the outlets<a id="_idIndexMarker979"/> for the <strong class="source-inline">RestaurantDetailViewController</strong> class have now been set up. In the next section, you'll modify the <strong class="source-inline">RestaurantDetailViewController</strong> class to receive restaurant data from the <strong class="source-inline">RestaurantListViewController</strong> and <strong class="source-inline">MapViewController</strong> instances and display it in the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<h1 id="_idParaDest-264"><a id="_idTextAnchor302"/>Displaying data in the static table view</h1>
			<p>You have<a id="_idIndexMarker980"/> successfully connected all the outlets <a id="_idIndexMarker981"/>in the <strong class="source-inline">RestaurantDetailViewController</strong> class to the user interface elements in the <strong class="bold">Restaurant Detail</strong> screen. Since this is a static table view, you won't be adopting the <strong class="source-inline">UITableViewDataSource</strong> protocol to populate the outlets. Instead, you will write custom methods to do so. Follow these steps:</p>
			<ol>
				<li value="1">Click the <strong class="source-inline">RestaurantDetailViewController</strong> file in the Project navigator.</li>
				<li>Add code to import the <strong class="source-inline">MapKit</strong> framework after the existing <strong class="source-inline">import</strong> statemen<a id="_idTextAnchor303"/><a id="_idTextAnchor304"/>t:<p class="source-code">import MapKit</p><p>This is required since you will be using the <strong class="source-inline">MapKit</strong> framework's properties and methods to generate an image of a map for the image view in the last cell.</p></li>
				<li>Add a private extension containing code to set the labels in the <strong class="bold">Restaurant Detail</strong> screen after the last curly bra<a id="_idTextAnchor305"/><a id="_idTextAnchor306"/>ce:<p class="source-code">private extension RestaurantDetailViewController {</p><p class="source-code">   func setupLabels() {</p><p class="source-code">      guard let restaurant = </p><p class="source-code">      selectedRestaurant else { </p><p class="source-code">         return </p><p class="source-code">      }</p><p class="source-code">      title = restaurant.name </p><p class="source-code">      nameLabel.text = restaurant.name</p><p class="source-code">      cuisineLabel.text = restaurant.subtitle </p><p class="source-code">      headerAddressLabel.text = restaurant.address </p><p class="source-code">      tableDetailsLabel.text = "Table for 7, tonight </p><p class="source-code">      at 10:00 PM"</p><p class="source-code">      addressLabel.text = restaurant.address</p><p class="source-code">   }</p><p class="source-code">}</p><p>The <strong class="source-inline">setupLabels()</strong> method is quite straightforward; it gets values from a <strong class="source-inline">RestaurantItem</strong> instance and puts them into the outlets in the <strong class="source-inline">RestaurantDetailViewController</strong> instance except for <strong class="source-inline">tableDetailsLabel</strong>, which is just assigned a string.</p></li>
				<li>In the<a id="_idIndexMarker982"/> last cell, you will display an image of<a id="_idIndexMarker983"/> a map. To do this, you'll generate an image from a map region and set the <strong class="source-inline">locationMapImageLabel</strong> outlet to display that image. This image will also display the same custom annotation image you used in the <strong class="bold">Map</strong> screen. Add the following method after <strong class="source-inline">setupLabels()</strong> and before the last curly b<a id="_idTextAnchor307"/><a id="_idTextAnchor308"/>race:<p class="source-code">func createMap() {</p><p class="source-code">   guard let annotation = selectedRestaurant, let long</p><p class="source-code">   = annotation.long, let lat = annotation.lat else { </p><p class="source-code">      return </p><p class="source-code">   }</p><p class="source-code">   let location = CLLocationCoordinate2D(latitude: </p><p class="source-code">   lat, longitude: long)</p><p class="source-code">   takeSnapshot(with: location)</p><p class="source-code">}</p><p>This method creates a <strong class="source-inline">CLLocationCoordinate2D</strong> instance using the <strong class="source-inline">selectedRestaurant</strong> property's <strong class="source-inline">lat</strong> and <strong class="source-inline">long</strong> properties and assigns it to <strong class="source-inline">location</strong>. Then, it calls the <strong class="source-inline">takeSnapshot(with:)</strong> method, passing <strong class="source-inline">location</strong> as a parameter.</p></li>
				<li>You'll see an<a id="_idIndexMarker984"/> error since <strong class="source-inline">takeSnapShot(with:)</strong> hasn't been implemented yet, so add the following code after <a id="_idIndexMarker985"/>the <strong class="source-inline">createMap()</strong> function to implem<a id="_idTextAnchor309"/><a id="_idTextAnchor310"/>ent it:<p class="source-code">func takeSnapshot(with location:</p><p class="source-code">CLLocationCoordinate2D) {</p><p class="source-code">   let mapSnapshotOptions = MKMapSnapshotter.Options()</p><p class="source-code">   var loc = location</p><p class="source-code">   let polyline = MKPolyline(coordinates: &amp;loc, count:</p><p class="source-code">   1 )</p><p class="source-code">   let region = MKCoordinateRegion(polyline.</p><p class="source-code">   boundingMapRect)</p><p class="source-code">   mapSnapshotOptions.region = region </p><p class="source-code">   mapSnapshotOptions.scale = UIScreen.main.scale </p><p class="source-code">   mapSnapshotOptions.size = CGSize(width: 340, </p><p class="source-code">   height: 208) </p><p class="source-code">   mapSnapshotOptions.showsBuildings = true </p><p class="source-code">   mapSnapshotOptions.pointOfInterestFilter = </p><p class="source-code">   .includingAll</p><p class="source-code">   let snapShotter = MKMapSnapshotter(options: </p><p class="source-code">   mapSnapshotOptions)</p><p class="source-code">   snapShotter.start() { snapshot, error in </p><p class="source-code">      guard let snapshot = snapshot else {</p><p class="source-code">         return </p><p class="source-code">      }</p><p class="source-code">      UIGraphicsBeginImageContextWithOptions(</p><p class="source-code">      mapSnapshotOptions.size, true, 0)</p><p class="source-code">      snapshot.image.draw(at: .zero)</p><p class="source-code">      let identifier = "custompin"</p><p class="source-code">      let annotation = MKPointAnnotation()</p><p class="source-code">      annotation.coordinate = location</p><p class="source-code">      let pinView = MKPinAnnotationView(annotation: </p><p class="source-code">      annotation, reuseIdentifier: identifier) </p><p class="source-code">      pinView.image = UIImage(named: "custom-</p><p class="source-code">      annotation")! </p><p class="source-code">      let pinImage = pinView.image</p><p class="source-code">      var point = snapshot.point(for: location)</p><p class="source-code">      let rect = self.locationMapImageView.bounds </p><p class="source-code">      if rect.contains(point) { </p><p class="source-code">         let pinCenterOffset = pinView.centerOffset</p><p class="source-code">         point.x -= pinView.bounds.size.width / 2</p><p class="source-code">         point.y -= pinView.bounds.size.height / 2</p><p class="source-code">         point.x += pinCenterOffset.x</p><p class="source-code">         point.y += pinCenterOffset.y</p><p class="source-code">         pinImage?.draw(at: point)</p><p class="source-code">      }</p><p class="source-code">      if let image = </p><p class="source-code">      UIGraphicsGetImageFromCurrentImageContext() {</p><p class="source-code">         UIGraphicsEndImageContext() </p><p class="source-code">         DispatchQueue.main.async {</p><p class="source-code">            self.locationMapImageView.image = image</p><p class="source-code">         }</p><p class="source-code">      }</p><p class="source-code">   }</p><p class="source-code">}</p><p>A full<a id="_idIndexMarker986"/> description of this method is beyond<a id="_idIndexMarker987"/> the scope of this book, but here's a simple explanation of what it does. Given a location, it takes a snapshot of the map at that location, adds the custom annotation you used earlier in the <strong class="bold">Map</strong> screen, converts it into an image, and assigns it to the <strong class="source-inline">locationMapImageView</strong> outlet in the <strong class="source-inline">RestaurantDetailViewController</strong> instance.</p></li>
				<li>You have written all the methods that are required for the <strong class="source-inline">RestaurantDetailViewController</strong> class to display the desired <strong class="source-inline">RestaurantItem</strong> instance details in the <strong class="bold">Restaurant Detail</strong> screen. In the <strong class="source-inline">private</strong> extension before the <strong class="source-inline">setupLabels()</strong> method definition, add an <strong class="source-inline">initialize()</strong> method that calls the <strong class="source-inline">setupLabels()</strong> and <strong class="source-inline">createMap()<a id="_idTextAnchor311"/><a id="_idTextAnchor312"/> </strong>methods:<p class="source-code">func initialize() { </p><p class="source-code">   setupLabels() </p><p class="source-code">   createMap()</p><p class="source-code">}</p></li>
				<li>Modify the <strong class="source-inline">viewDidLoad()</strong> method to call the <strong class="source-inline">initialize()</strong> method when the <strong class="source-inline">RestaurantDetailViewController</strong> instance loads its view:<p class="source-code">override func viewDidLoad() { </p><p class="source-code">   super.viewDidLoad() </p><p class="source-code">   <strong class="bold">initialize()</strong></p><p class="source-code">}</p></li>
			</ol>
			<p>Recall that <a id="_idIndexMarker988"/>in <a href="B17469_16_Final_VK_ePub.xhtml#_idTextAnchor223"><em class="italic">Chapter 16</em></a>, <em class="italic">Getting Started with MapKit</em>, you've<a id="_idIndexMarker989"/> already configured the <strong class="source-inline">MapViewController</strong> class to pass a <strong class="source-inline">RestaurantItem</strong> instance to the <strong class="source-inline">RestaurantDetailViewController</strong> instance. Build and run your app and go to the <strong class="bold">Map</strong> screen. Click on one of the restaurants to display a callout bubble. Click the button in the callout bubble, and you should see the restaurant details appear in the <strong class="bold">Restaurant Detail</strong> screen:</p>
			<div>
				<div id="_idContainer432" class="IMG---Figure">
					<img src="image/Figure_18.14_B17469.jpg" alt="Figure 18.14: iOS Simulator showing Restaurant Detail screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.14: iOS Simulator showing Restaurant Detail screen</p>
			<p>If you <a id="_idIndexMarker990"/>scroll down, you will see the map image in the <a id="_idIndexMarker991"/>last cell:</p>
			<div>
				<div id="_idContainer433" class="IMG---Figure">
					<img src="image/Figure_18.15_B17469.jpg" alt="Figure 18.15: iOS Simulator showing map in Restaurant Detail screen &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.15: iOS Simulator showing map in Restaurant Detail screen </p>
			<p>You have <a id="_idIndexMarker992"/>finished modifying the <strong class="source-inline">RestaurantDetailViewController</strong> class, but you still need to pass the selected <strong class="source-inline">RestaurantItem</strong> instance<a id="_idIndexMarker993"/> from the <strong class="source-inline">RestaurantListViewController</strong> instance to the <strong class="source-inline">RestaurantDetailViewController</strong> instance. You'll do this in the next section.</p>
			<h1 id="_idParaDest-265"><a id="_idTextAnchor313"/>Passing data to the RestaurantDetailViewController instance</h1>
			<p>You have <a id="_idIndexMarker994"/>added and connected the <a id="_idIndexMarker995"/>outlets for the <strong class="bold">Restaurant Detail</strong> screen inside the <strong class="source-inline">RestaurantDetailViewController</strong> class. You've also added code to this class to get restaurant data from a <strong class="source-inline">RestaurantItem</strong> instance and use it to populate its outlets. The last thing you need to do is pass the selected <strong class="source-inline">RestaurantItem</strong> instance from the <strong class="source-inline">RestaurantListViewController</strong> instance to the <strong class="source-inline">RestaurantDetailViewController</strong> instance. Follow these steps:</p>
			<ol>
				<li value="1">Click the <strong class="source-inline">RestaurantListViewController</strong> file in the Project navigator.</li>
				<li>Add the following code after <strong class="source-inline">viewDidLoad()</strong>: to call a <strong class="source-inline">showRestaurantDetail(segue:)</strong> method if the segue identifier<a id="_idTextAnchor314"/><a id="_idTextAnchor315"/> is <strong class="source-inline">showDetail</strong>:<p class="source-code">override func prepare(for segue: UIStoryboardSegue, </p><p class="source-code">sender: Any?) {</p><p class="source-code">   if let identifier = segue.identifier {</p><p class="source-code">      switch identifier {</p><p class="source-code">      case Segue.showDetail.rawValue:</p><p class="source-code">         showRestaurantDetail(segue: segue)</p><p class="source-code">      default:</p><p class="source-code">         print("Segue not added")</p><p class="source-code">      }</p><p class="source-code">   }</p><p class="source-code">}</p><p>Recall that you added a segue between the <strong class="bold">Restaurant List View Controller Scene</strong> and the <strong class="bold">Restaurant Detail View Controller Scene</strong> in the storyboard. Before the <strong class="source-inline">RestaurantListViewController</strong> instance transitions to another view controller, the segue identifier is checked. If the segue identifier is <strong class="source-inline">showDetail</strong>, then the <strong class="source-inline">showRestaurantDetail</strong> method is executed. Only the segue between the <strong class="bold">Restaurant List View Controller Scene</strong> and the <strong class="bold">Restaurant Detail View Controller Scene</strong> has the <strong class="source-inline">showDetail</strong> identifier, so the destination view controller must be the <strong class="source-inline">RestaurantDetailViewController</strong> instance.</p></li>
				<li>You'll see an error because the <strong class="source-inline">showRestaurantDetail(segue:)</strong> method <a id="_idIndexMarker996"/>hasn't been <a id="_idIndexMarker997"/>implemented. This method will pass the <strong class="source-inline">RestaurantItem</strong> instance from the <strong class="source-inline">RestaurantListViewController</strong> instance to the <strong class="source-inline">RestaurantDetailViewController</strong> instance. Add it after the opening curly brace of the <strong class="source-inline">private</strong> extension in the <strong class="source-inline">RestaurantListView<a id="_idTextAnchor316"/><a id="_idTextAnchor317"/>Controller</strong> class:<p class="source-code">func showRestaurantDetail(segue: UIStoryboardSegue) {</p><p class="source-code">   if let viewController = segue.destination as? </p><p class="source-code">   RestaurantDetailViewController, let indexPath = </p><p class="source-code">   collectionView.indexPathsForSelectedItems?.first {</p><p class="source-code">      selectedRestaurant = manager.restaurantItem(at:</p><p class="source-code">      indexPath.row)</p><p class="source-code">      viewController.selectedRestaurant = </p><p class="source-code">      selectedRestaurant</p><p class="source-code">   }</p><p class="source-code">}</p><p>This method first checks if the segue destination is an instance of <strong class="source-inline">RestaurantDetailViewController</strong>, and gets the index of the collection view cell that was tapped. Then, <strong class="source-inline">manager</strong> returns the <strong class="source-inline">RestaurantItem</strong> instance stored at that index, which is assigned to <strong class="source-inline">selectedRestaurant</strong>. The <strong class="source-inline">RestaurantDetailViewController</strong> instance's <strong class="source-inline">selectedRestaurant</strong> property is then set to this instance.</p></li>
			</ol>
			<p>Now let's take a look at the <strong class="bold">Restaurant List View Controller Scene</strong> in the <strong class="source-inline">Main</strong> storyboard file. It is<a id="_idIndexMarker998"/> currently connected to <a id="_idIndexMarker999"/>a placeholder <strong class="bold">View Controller Scene</strong>. You'll update the <strong class="source-inline">Main</strong> storyboard file to remove the placeholder and connect the <strong class="bold">Restaurant List View Controller Scene</strong> to the <strong class="bold">Restaurant Detail View Controller Scene</strong> in the <strong class="source-inline">RestaurantDetail</strong> storyboard file. Follow these steps:</p>
			<ol>
				<li value="1">Click the <strong class="source-inline">Main</strong> storyboard file and locate the <strong class="bold">Restaurant List View Controller Scene</strong>. Click <strong class="source-inline">restaurantCell</strong> in the document outline. Then, <em class="italic">Ctrl + Drag</em> from <strong class="source-inline">restaurantCell</strong> to the <strong class="source-inline">RestaurantDetail</strong> storyboard reference (you added this storyboard reference in <a href="B17469_16_Final_VK_ePub.xhtml#_idTextAnchor223"><em class="italic">Chapter 16</em></a><em class="italic">, Getting Started with MapKit</em>) as shown:<div id="_idContainer434" class="IMG---Figure"><img src="image/Figure_18.16_B17469.jpg" alt="Figure 18.16: Editor area showing RestaurantDetail storyboard reference&#13;&#10;"/></div><p class="figure-caption">Figure 18.16: Editor area showing RestaurantDetail storyboard reference</p></li>
				<li>Choose <strong class="bold">Show</strong> from the popup menu that appears:<div id="_idContainer435" class="IMG---Figure"><img src="image/Figure_18.17_B17469.jpg" alt="Figure 18.17: Segue pop-up menu with Show selected&#13;&#10;"/></div><p class="figure-caption">Figure 18.17: Segue pop-up menu with Show selected</p></li>
				<li>Remove the<a id="_idIndexMarker1000"/> placeholder scenes<a id="_idIndexMarker1001"/> from the storyboard by selecting them and pressing <em class="italic">Delete</em> on your keyboard, as they are no longer needed:<div id="_idContainer436" class="IMG---Figure"><img src="image/Figure_18.18_B17469.jpg" alt="Figure 18.18: Editor area showing placeholder scenes to be removed&#13;&#10;"/></div><p class="figure-caption">Figure 18.18: Editor area showing placeholder scenes to be removed</p></li>
				<li>You will<a id="_idIndexMarker1002"/> set the segue<a id="_idIndexMarker1003"/> identifier to <strong class="source-inline">showDetail</strong>. As discussed earlier, this will set the <strong class="source-inline">RestaurantDetailViewController</strong> instance's <strong class="source-inline">selectedRestaurant</strong> property. Select the segue you just added:<div id="_idContainer437" class="IMG---Figure"><img src="image/Figure_18.19_B17469.jpg" alt="Figure 18.19: Segue between Restaurant List View Controller Scene and RestaurantDetail storyboard reference&#13;&#10;"/></div><p class="figure-caption">Figure 18.19: Segue between Restaurant List View Controller Scene and RestaurantDetail storyboard reference</p></li>
				<li>Click the <a id="_idIndexMarker1004"/>Attributes<a id="_idIndexMarker1005"/> inspector button. Under <strong class="bold">Storyboard Segue</strong>, set <strong class="bold">Identifier</strong> to <strong class="source-inline">showDetail</strong>:</li>
			</ol>
			<div>
				<div id="_idContainer438" class="IMG---Figure">
					<img src="image/Figure_18.20_B17469.jpg" alt="Figure 18.20: Attributes inspector setting for showDetail segue&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.20: Attributes inspector setting for showDetail segue</p>
			<p>Build and run <a id="_idIndexMarker1006"/>your project. Select a<a id="_idIndexMarker1007"/> city and a type of cuisine. Click on one of the restaurants in the <strong class="bold">Restaurant List</strong> screen. The details of that restaurant will appear in the <strong class="bold">Restaurant Detail</strong> screen:</p>
			<div>
				<div id="_idContainer439" class="IMG---Figure">
					<img src="image/Figure_18.21_B17469.jpg" alt="Figure 18.21: iOS Simulator showing Restaurant Detail screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 18.21: iOS Simulator showing Restaurant Detail screen</p>
			<p>The <a id="_idIndexMarker1008"/>implementation for the <strong class="bold">Restaurant Detail</strong> screen is <a id="_idIndexMarker1009"/>now complete. When you select a restaurant in the <strong class="bold">Map</strong> or <strong class="bold">Restaurant List</strong> screens, the details of that restaurant will be displayed in the <strong class="bold">Restaurant Detail</strong> screen. Awesome!</p>
			<h1 id="_idParaDest-266"><a id="_idTextAnchor318"/>Summary</h1>
			<p>In this chapter, you connected outlets in the <strong class="source-inline">RestaurantDetailViewController</strong> class to the <strong class="bold">Restaurant Detail</strong> screen. Next, you added methods to <strong class="source-inline">viewDidLoad()</strong> to populate the table view when the <strong class="bold">Restaurant Detail</strong> screen is displayed. Finally, you passed the appropriate <strong class="source-inline">RestaurantItem</strong> instance from the <strong class="source-inline">RestaurantListViewController</strong> and <strong class="source-inline">MapViewController</strong> instances to the <strong class="source-inline">RestaurantDetailViewController</strong> instance, enabling it to display data from that <strong class="source-inline">RestaurantItem</strong> instance on the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<p>By doing this, you have learned how to make table views with static cells display data, as well as how to create a custom map image, which you can now implement in your own apps.</p>
			<p>Congratulations! All the screens in your app now display data. However, if you look at the <strong class="bold">Restaurant Detail</strong> screen, there are no ratings, reviews, or photos for the restaurant, and no way to add them. You will implement this starting with the next chapter, where you'll create a custom control that allows you to add star ratings for a restaurant for the <strong class="bold">Restaurant Detail</strong> and <strong class="bold">Review Form</strong> screens.</p>
		</div>
	</body></html>