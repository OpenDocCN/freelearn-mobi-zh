<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Reaching Our Destination"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Reaching Our Destination</h1></div></div></div><p>This chapter will be pretty light compared to the last few, as this game is ready to be finalized for release by now. We'll be going over some steps of finalization within the project, as well as stuff to do within iTunes Connect before you submit the game to be reviewed by Apple. Specifically, we'll cover the following topics in this relatively short chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Adding a default image</li><li class="listitem">Icons</li><li class="listitem">Analytics</li><li class="listitem">Preparing the App on iTunes Connect</li><li class="listitem">Releasing the game and steps after it</li></ul></div><p>For this chapter, we'll be using the <code class="literal">Chapter 7</code> project, as it has some bug fixes as well as some other polish elements added. It's recommended that you open this project before continuing.</p><div class="note" title="Note"><h3 class="title"><a id="tip60"/>Tip</h3><p>At the time of writing this book, Cocos2d version 3.4 does not support native iPhone 6 or 6 Plus. So unfortunately, the art will look blurry as Apple scales up the iPhone 5 screen to match the iPhone 6 or 6 Plus resolutions. If you're determined to make native resolutions work, you can refer to a thread at <a class="ulink" href="http://forum.cocos2d-swift.org/t/iphone-6-ios-resolutions-and-assets/15062/68">http://forum.cocos2d-swift.org/t/iphone-6-ios-resolutions-and-assets/15062/68</a>. It describes using the iPad Retina version 6 assets when running version 6 Plus, and the iPhone Retina assets when running.</p></div><div class="section" title="Adding a default image"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec51"/>Adding a default image</h1></div></div></div><p>Now, we <a id="id440" class="indexterm"/>only need to create the launch images for every iPad and every pre-6 iPhone. Also, we're going to do a sort of hackish workaround that will make the iPhone 6 or 6 Plus graphics slightly better (though still not native), while at the same time making the iPhone 5 look better and worse at the same time (depending on how you look at it).</p><p>First, in the <code class="literal">Icon</code> folder of the project, delete the existing <code class="literal">Default</code> images, moving them to the trash rather than just removing the references.</p><p>There should be <a id="id441" class="indexterm"/>a folder called <code class="literal">Default Images</code> included in the project files, where you'll have each of the files needed for the project. Drag these files into the Xcode project (making sure you have the <span class="strong"><strong>Copy</strong></span> checkbox checked).</p><p>Because we don't have many devices that need native default images, we're just going to skip asset catalogs for now. If you want to use them, you can, but it's not required (nor is there any real benefit) when you have the default images properly named, as we have here.</p><div class="section" title="Adding the loading screen"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec135"/>Adding the loading screen</h2></div></div></div><p>Although<a id="id442" class="indexterm"/> the default images are the first thing the user will see, we still want a smooth transition from the initial image to our game, instead of it just suddenly changing. So, we're going to create a transition scene just for the purpose of sliding the game view into position.</p><p>First, create a new class—a subclass of <code class="literal">CCScene</code>—and call it <code class="literal">LoadingScene</code>.</p><p>Then, add the <code class="literal">scene</code> method to the <code class="literal">LoadingScene.h</code> file:</p><div class="informalexample"><pre class="programlisting">+(CCScene*)scene;</pre></div><p>Next, replace your <code class="literal">LoadingScene.m</code> file with the following code:</p><div class="informalexample"><pre class="programlisting">#import "LoadingScene.h"
#import "MainScene.h"

@implementation LoadingScene
+(CCScene*)scene
{
  return [[self alloc] init];
}

-(id)init
{
  if ((self=[super init]))
  {
//sets the window size and adds a white background
    CGSize winSize = [[CCDirector sharedDirector] viewSize];
    CCNodeColor *background = [CCNodeColor nodeWithColor:[CCColor whiteColor] width:winSize.width  height:winSize.height*5];
    background.position = ccp(0.5,0.5);
    background.positionType = CCPositionTypeNormalized;
    background.anchorPoint = ccp(0.5,0.5);
    [self addChild:background z:-2];
    
//creates the Cubic! Title in the middle of the screen (where it's located in the Default.png image)
    CCLabelBMFont *lblTitle = [CCLabelBMFont labelWithString:@"Cubic!" fntFile:@"bmTitleFont.fnt"];
    lblTitle.position = ccp(0.5,0.5);
    lblTitle.color = [CCColor colorWithRed:52/255.f green:73/255.f blue:94/255.f];
    lblTitle.positionType = CCPositionTypeNormalized;
    [self addChild:lblTitle];
    
//creates a progress circle that shows the user that stuff is happening (even though everything is technically already loaded at this point)
    CCSprite *circle = [CCSprite spriteWithSpriteFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"imgLoadingCircle.png"]];
    CCProgressNode *loadingTime = [CCProgressNode progressWithSprite:circle];
    loadingTime.type = CCProgressNodeTypeRadial;
    loadingTime.midpoint = ccp(0.5,0.5);
    [loadingTime runAction:[CCActionProgressFromTo actionWithDuration:1 from:0.0f to:100.0f]];
    loadingTime.position = ccp(winSize.width/2, winSize.height * 0.2);
    [self addChild:loadingTime];

    //schedules the transition to the main menu after 2 seconds (1 second for progress circle, and another second of waiting for a smoother transition)
    [self scheduleOnce:@selector(transitionToMainScene) delay:2];
  }
  return self;
}

//method to transition using our rubber band effect created previously
-(void)transitionToMainScene
{
  [MainScene rubberBandToScene:[MainScene scene] fromParent:self withDuration:0.6 withDirection:kMoveDirectionUp];
}

@end</pre></div><p>Understand that<a id="id443" class="indexterm"/> we want to transition to <code class="literal">MainScene</code>, so we have to import it.</p><p>Also notice the <code class="literal">CCProgressNode</code> object. This will be a ring that will simulate loading. Since our game loads relatively fast without the need for a true loading bar or other sort of progress measurement, we don't want our users getting confused when they see the same image for a few seconds on end. So, we add a <code class="literal">CCProgressNode</code> object that lets them know "Hey, something's happening!"</p><p>It's fairly self-explanatory when you look at the code. The midpoint is essentially like the anchor point on other <code class="literal">CCNode</code> objects. If you want a bar instead of a circle, just change the type. Everything else should be the same.</p></div><div class="section" title="Switching to LoadingScene from MainScene"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec136"/>Switching to LoadingScene from MainScene</h2></div></div></div><p>Finally, to<a id="id444" class="indexterm"/> make it all happen, we just need to add the import statement for <code class="literal">LoadingScene.h</code> to the <code class="literal">AppDelegate.m</code> file:</p><div class="informalexample"><pre class="programlisting">#import "LoadingScene.h"</pre></div><p>Then, at the bottom of your <code class="literal">startScene</code> method, look for the following line:</p><div class="informalexample"><pre class="programlisting">return [MainScene scene];</pre></div><p>Replace it with this new line of code that will go into the <code class="literal">LoadingScene</code> object we just created:</p><div class="informalexample"><pre class="programlisting">return [LoadingScene scene];</pre></div><p>If you run the game at this point, you'll see the initial default image load, then after a second or two the progress ring will appear, and finally, the loading screen will go up and off screen, and drag the <code class="literal">MainScene</code> along with it.</p><p>Now that we have handled our initial launch, let's set up the icons.</p></div></div></div>
<div class="section" title="Icons"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec52"/>Icons</h1></div></div></div><p>The default icon<a id="id445" class="indexterm"/> that SpriteBuilder provided us was convenient for testing but it's time we set ourselves apart and create our own icon.</p><div class="note" title="Note"><h3 class="title"><a id="tip61"/>Tip</h3><p>To use the template we'll be talking about in the next section, you'll need Photoshop. If you have a design team, you likely have it somewhere. If you don't have Photoshop, you can get a free trial version from its website.</p></div><div class="section" title="Template"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec137"/>Template</h2></div></div></div><p>There are <a id="id446" class="indexterm"/>about 10 to 15 different app icon sizes, depending on which devices you plan to support and which iOS versions you're supporting. It would be a pain to manually update all of these sizes if you change your icon. Thankfully, it's easier than ever to create the required app icon sizes with a template that was created by Michael Flarup.</p><p>You can<a id="id447" class="indexterm"/> download the template from <a class="ulink" href="http://www.appicontemplate.com">www.appicontemplate.com</a>. Once it is downloaded, you can open it from Photoshop and begin using it. Once you're ready, you just have to run the action included in the download and it will generate the files for you.</p><p>There's also a very good video on how to use the template, so in the spirit of not repeating things twice, the how-to won't be shown here.</p></div><div class="section" title="Adding the icons to the project"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec138"/>Adding the icons to the project</h2></div></div></div><p>First, we <a id="id448" class="indexterm"/>want to get rid of the old icons, as we don't want any interference or accidental appearance on someone's device. So just delete the old icons.</p><p>Once you have your new icons created (or if you wish to use the icons included in this project), simply drag the files into Xcode, making sure that the <span class="strong"><strong>Copy</strong></span> checkbox is checked. This is also shown in the following screenshot:</p><div class="mediaobject"><img src="../Images/image00284.jpeg" alt="Adding the icons to the project"/></div><p style="clear:both; height: 1em;"> </p><p>Right <a id="id449" class="indexterm"/>now, the project isn't going to use the new icons, so we need to assign the icon file to be used for each size with asset catalogs.</p></div><div class="section" title="Asset catalog"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec139"/>Asset catalog</h2></div></div></div><p>We're going<a id="id450" class="indexterm"/> to use an asset catalog for our icons. Ideally, we should use them for our launch images as well, but since we're not supporting any crazy device sizes or orientations, it's just not necessary at the moment.</p><p>With icons, however, it's just a lot easier to create the asset catalog, then drag and drop your icons into the appropriate place based on which iOS versions you wish to support.</p><p>So first, you need to create the asset catalog in Xcode by going to the project's general settings and clicking on the <span class="strong"><strong>Use Asset Catalog</strong></span> button.</p><p>If the asset catalog already exists, simply click on the arrow to the right of the drop-down box to navigate to that asset catalog. This is also shown in the following screenshot for your reference:</p><div class="mediaobject"><img src="../Images/image00285.jpeg" alt="Asset catalog"/></div><p style="clear:both; height: 1em;"> </p><p>Then, with<a id="id451" class="indexterm"/> the catalog created, simply drag the images into the appropriate place based on what dimensions they need to be. The following screenshot is a rough representation of what they should be, but make sure you drag the correct images, or else Xcode will throw a warning that you're giving it an incorrectly sized image. Thankfully, the template we use gives us a good name for our images, so we can quickly see which icon is of what size.</p><div class="mediaobject"><img src="../Images/image00286.jpeg" alt="Asset catalog"/></div><p style="clear:both; height: 1em;"> </p><p>Notice that we aren't supporting <span class="strong"><strong>iOS 6.1 and prior</strong></span> sizes. Although you may think it's just a couple of icon sizes, if you're truly willing to support iOS 6 and older versions, you must run your<a id="id452" class="indexterm"/> app on a device running an older device to make sure that nothing crashes.</p><p>Anyway, once you've added your images to the asset catalog, clean up the project, and rerun it. You'll see the <span class="strong"><strong>Update</strong></span> icon as expected. That's it!</p></div></div>
<div class="section" title="Analytics and user data"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec53"/>Analytics and user data</h1></div></div></div><p>One <a id="id453" class="indexterm"/>final thing to do before we submit our app is to set up some quick analytics <a id="id454" class="indexterm"/>tools to determine the way our users play our game. We're going<a id="id455" class="indexterm"/> to use an API called <span class="strong"><strong>Flurry</strong></span>. If you haven't heard of it before or you have but never used it, it's fine, as the following section will take you through the setup process.</p><p>Flurry is <a id="id456" class="indexterm"/>nice for three main reasons:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Simplicity in setting up and using</li><li class="listitem">Detailed analytics available</li><li class="listitem">It's free! Who can argue with that?</li></ul></div><p>So let's go for it, starting with the signup process.</p><div class="section" title="Signing up for Flurry"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec140"/>Signing up for Flurry</h2></div></div></div><p>Go to <a class="ulink" href="http://www.flurry.com/">http://www.flurry.com/</a>, and in the top-right corner, click on <span class="strong"><strong>Sign Up</strong></span>. Fill in the <a id="id457" class="indexterm"/>information it asks for, and then click on <span class="strong"><strong>Sign Up</strong></span>.</p><p>After that, it'll <a id="id458" class="indexterm"/>ask you which platform you wish to track analytics for. Here, since we're making an app for iPhone and iPad (a universal app for iOS), we'll select iPhone. If the app were only available on iPad, you would have selected the iPad version.</p><p>We then add the name of the app and choose which category the app falls under.</p><p>Once that's ready, click on <span class="strong"><strong>Create App</strong></span> at the bottom, and Flurry will ask you to verify your e-mail. Once you click on the link in your e-mail (or copy the code that they send and paste it in the verification box they provide), you'll be directed to a screen letting you know that the process was a success. Then you should be given an API key.</p><div class="note" title="Note"><h3 class="title"><a id="tip62"/>Tip</h3><p>Remember to either copy this API key somewhere or leave the web page open, as we'll need this later when we actually begin our session tracking.</p></div><p>After the<a id="id459" class="indexterm"/> successful setup, you should see a link to download the SDK. Download the SDK (ZIP file), and wait until it finishes. It may take a minute or so.</p><div class="mediaobject"><img src="../Images/image00287.jpeg" alt="Signing up for Flurry"/></div><p style="clear:both; height: 1em;"> </p><p>Once the SDK is downloaded and unzipped, we're ready to add Flurry to our project.</p></div><div class="section" title="Adding Flurry to your project"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec141"/>Adding Flurry to your project</h2></div></div></div><p>Since <a id="id460" class="indexterm"/>the Flurry API should be included with all the other libraries, in the downloaded SDK, you should see a <code class="literal">Flurry</code> folder. Drag that entire folder into the <code class="literal">libs</code> folder of Xcode (making sure that the copy checkbox is checked).</p><div class="mediaobject"><img src="../Images/image00288.jpeg" alt="Adding Flurry to your project"/></div><p style="clear:both; height: 1em;"> </p><p>Then, we'll <a id="id461" class="indexterm"/>want to make sure that the proper frameworks are included in our project so that Flurry can do its things properly. So, in the <span class="strong"><strong>Build Phases</strong></span> of our project, we're going to add a few frameworks.  Simply click on the <span class="strong"><strong>+</strong></span> button under the <span class="strong"><strong>Link Binary with Libraries</strong></span> section.</p><div class="mediaobject"><img src="../Images/image00289.jpeg" alt="Adding Flurry to your project"/></div><p style="clear:both; height: 1em;"> </p><p>Then search for and add the following frameworks:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">Security.framework</code></li><li class="listitem"><code class="literal">SystemConfiguration.framework</code></li><li class="listitem"><code class="literal">CFNetwork.framework</code></li></ul></div><p>Finally, the <a id="id462" class="indexterm"/>library has been included in our project, and we can import the Flurry header to our <code class="literal">AppDelegate.m</code> file, and start our tracking session in the <code class="literal">application:didFinishLaunchingWithOptions</code> method:</p><div class="informalexample"><pre class="programlisting">#import "Flurry.h"

@implementation AppController

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    [Flurry startSession:@"API_KEY_HERE"];
[Flurry setLogLevel:FlurryLogLevelAll];
...
}</pre></div><p>Note that the <code class="literal">API_KEY_HERE</code> string should be your actual API key from when the app was first created, so feel free to copy that at this point.</p><p>There's also debugging information for you when you're first starting out (or any time, really). Ideally, you should disable this on release, but for now, it's helpful to see what's happening when testing.</p></div><div class="section" title="Logging events"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec142"/>Logging events</h2></div></div></div><p>Events<a id="id463" class="indexterm"/> are the bread and butter of Flurry. They're essentially a limitless way of tracking your own custom events. Instead of keeping predefined functions or events, you have to simply pass the event name (simply a string) that you wish to track, and Flurry handles the rest for you.</p><p>As an example, let's say we want to track how many times our users start the game. Since we often visit the <code class="literal">MainScene</code>, we don't want a false positive being tracked. That being said, let's log the event only when they move a unit (but only on the first move, when <code class="literal">numTurnsSurvived</code> is equal to <code class="literal">1</code>).</p><p>Open <code class="literal">MainScene.m</code>, and in the <code class="literal">moveUnit</code> function, add the following code to the top of the method that will log the <code class="literal">started_game</code> event for the current session:</p><div class="informalexample"><pre class="programlisting">if (numTurnSurvived == 1)
  [Flurry logEvent:@"started_game"];</pre></div><p>Another<a id="id464" class="indexterm"/> example might be when a user finishes the tutorial. So in <code class="literal">MainScene.m</code>, in our <code class="literal">advanceTutorial</code> method, let's add an event for the case of our users finishing the tutorial:</p><div class="informalexample"><pre class="programlisting">-(void)advanceTutorial
{
  ...
  else
  {  
    ...
    
    [Flurry logEvent:@"tutorial_finished"];
  }
}</pre></div><p>And it's that easy to add event tracking! You can have an unlimited amount of differently named events, up to 300 unique events can be tracked per session (so make use of as many as you can that are relevant to your app/game), and there's no limit to how many times a given event can be tracked.</p><div class="note" title="Note"><h3 class="title"><a id="tip63"/>Tip</h3><p>There's also event logging with parameters, such as whether the user is registered or not, what device they're using, whether they're using a specific setting or not, and so on. Any string can be a parameter. You can read more about parameters<a id="id465" class="indexterm"/> within the Flurry API at <a class="ulink" href="https://developer.yahoo.com/flurry/docs/analytics/gettingstarted/events/ios/">https://developer.yahoo.com/flurry/docs/analytics/gettingstarted/events/ios/</a>.</p></div><p>Flurry will automatically submit any session data when you're done using the app. Although that sounds rather ambiguous, it essentially sends data when the <span class="strong"><strong>Home</strong></span> button is pressed.</p><p>That being said, if you're testing it, make sure your events are being logged correctly by Flurry using Xcode, and do not hit the <span class="strong"><strong>Stop</strong></span> button before hitting the <span class="strong"><strong>Home</strong></span> button on your device (or the simulator). The data may never be sent and you might spend hours or even days wondering why nothing seems to be working, when you actually never gave Flurry a chance to send the information.</p><p>Now that we have our events being logged and sent to the Flurry servers, let's actually track and <a id="id466" class="indexterm"/>analyze our data.</p></div><div class="section" title="Tracking and visualizing the data"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec143"/>Tracking and visualizing the data</h2></div></div></div><p>Thankfully, Flurry<a id="id467" class="indexterm"/> doesn't just grab our raw data, but actually creates <a id="id468" class="indexterm"/>useful analytics for us, so we don't have to do any analytics on the data ourselves. If you want to see, for example, how many people start a game every day, or how many people complete a game by surviving for more than 20 turns, you can easily see such data on their website. Here is a screenshot of what Flurry might look like after a few weeks of use:</p><div class="mediaobject"><img src="../Images/image00290.jpeg" alt="Tracking and visualizing the data"/></div><p style="clear:both; height: 1em;"> </p><p>Note that it takes approximately 15 to 45 minutes for an event to appear in your Flurry event dashboard (not the data, but the event name). If, after a few hours, you're still not seeing the event listed in your dashboard, try again, but make sure you properly exit the app this time. This means pressing the <span class="strong"><strong>Home</strong></span> button before stopping the app in Xcode so that Flurry can detect that event and send the data.</p><p>Also, Flurry isn't displayed in real time, so any actual data that gets sent to them is processed, and it may not appear for at least 24 hours. When testing, if you find yourself wondering where the data is, just wait for a day or two. Then it should start showing up. If it doesn't, make sure you're seeing the proper debug log messages in Xcode.</p><div class="note" title="Note"><h3 class="title"><a id="tip64"/>Tip</h3><p>If you ever get lost using Flurry, want further explanation, or just want to know more about the advanced features of Flurry, you can look at their <span class="emphasis"><em>Get Started</em></span> guide on their website at <a class="ulink" href="https://developer.yahoo.com/flurry/#get-started">https://developer.yahoo.com/flurry/#get-started</a>. It's fairly comprehensive.</p></div><p>If you're<a id="id469" class="indexterm"/> interested in alternatives to Flurry, you can look into iOS Analytics <a id="id470" class="indexterm"/>by doing a quick search, as well as by checking out <a class="ulink" href="http://www.apptamin.com/blog/app-analytics-tools/">http://www.apptamin.com/blog/app-analytics-tools/</a>, which shows (and covers in detail) various other analytics tools.</p></div></div>
<div class="section" title="Preparing the app on iTunes Connect"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec54"/>Preparing the app on iTunes Connect</h1></div></div></div><p>Now<a id="id471" class="indexterm"/> that we have everything ready, let's go ahead<a id="id472" class="indexterm"/> and get iTunes Connect (<a class="ulink" href="https://itunesconnect.apple.com">https://itunesconnect.apple.com</a>) ready so that we can submit this game to be reviewed by Apple. This section assumes you already have a developer account and an app in iTunes Connect.</p><div class="note" title="Note"><h3 class="title"><a id="tip65"/>Tip</h3><p>If you don't have a developer account, this is a good time to get it. If you're don't know how to get it, read <a class="link" title="Chapter 1. Refreshing Your Cocos2d Knowledge" href="part0014.xhtml">Chapter 1</a>, <span class="emphasis"><em>Refreshing Our Cocos2d Knowledge</em></span>. If you do have a developer account, but haven't created the App in iTunes Connect yet, go back to the <span class="emphasis"><em>Game Center</em></span> section of <a class="link" title="Chapter 6. Tidying Up and Polishing" href="part0049.xhtml">Chapter 6</a>, <span class="emphasis"><em>Tidying Up and Polishing</em></span>. There, you will see the step-by-step way to create an app in iTunes Connect. Once you've done that, you'll be ready to continue from here.</p></div><p>For the most part, iTunes Connect is fairly self-explanatory. However, we'll quickly see what each section is and what you need to enter.</p><div class="mediaobject"><img src="../Images/image00291.jpeg" alt="Preparing the app on iTunes Connect"/></div><p style="clear:both; height: 1em;"> </p><p>When <a id="id473" class="indexterm"/>you open your app in iTunes Connect, you'll see many sections at the top, as well as a section for the screenshots and the video preview. It's required that you include screenshots for every device you support. Since we're going to support all devices, it's best to add screenshots (and maybe a quick 30-second video) for each device.</p><p>Ideally, you should take your own screenshots for each device, which is why none are included in the project's files (maximum five screenshots per device can be added).</p><div class="mediaobject"><img src="../Images/image00292.jpeg" alt="Preparing the app on iTunes Connect"/></div><p style="clear:both; height: 1em;"> </p><p>Below <a id="id474" class="indexterm"/>the screenshots, you'll see the app's display name in the App Store, a description (4,000-character limit) of the app that will be visible in the App Store, keywords that people can enter in order to find your app/game on the App Store, and a link to your website for users who want to learn more about you.</p><p>The keywords are comma delimited, and have a maximum of 100 characters. So, for example, the following are a few terms that could be used to describe this game. This string is 28 characters long:</p><p>
<code class="literal">cube,square,grid,number,math</code>
</p><p>If you need help determining the length of your keywords, you can just search for a string length counter, and generally, any one will do the job.</p><div class="mediaobject"><img src="../Images/image00293.jpeg" alt="Preparing the app on iTunes Connect"/></div><p style="clear:both; height: 1em;"> </p><p>Next is <a id="id475" class="indexterm"/>the App's icon (this has to be 1024 x 1024, and in PNG or JPG format)—which will be displayed throughout the App Store—the version number, the categories it will appear under, and so on. An example of copyright information could be KeitGames 2015 (just imagine a little copyright symbol next to it when filling this part).</p><p>One thing to note is the <span class="strong"><strong>Ratings</strong></span> section. Here, although it's subtle, you must click on the <span class="strong"><strong>Edit</strong></span> button to go through the process of self-rating your app to determine what minimum age group the app is appropriate for. In our case, it's going to end up being 4+.</p><p>Also, after you submit a build to iTunes, it will go through a processing phase that lasts a few minutes. After that, in the <span class="strong"><strong>Builds</strong></span> section, you can select which build you want to submit for the particular version of the app.</p><div class="mediaobject"><img src="../Images/image00294.jpeg" alt="Preparing the app on iTunes Connect"/></div><p style="clear:both; height: 1em;"> </p><p>Next, we have the Game Center section. This is separate from the <span class="strong"><strong>Game Center</strong></span> tab at the top of the screen because, even though you may have a working leaderboard set up and working <a id="id476" class="indexterm"/>within your test build, unless you enable <span class="strong"><strong>Game Center</strong></span> here and select which leaderboard you want to add, it won't show up on the released version.</p><p>You can also provide a demo account if your app or game requires a login for it to work, as well as submit any notes you may have for the person reviewing your app.</p><p>Finally, If we select <span class="strong"><strong>Automatically release this version</strong></span>, then whenever the app is approved by Apple, it will immediately begin processing for the App Store. It will then show up that day or the next (or whatever date in the future you have set in the <span class="strong"><strong>Pricing</strong></span> section at the top). Suppose you choose <span class="strong"><strong>Manually release this version</strong></span>. Then even if the app is approved by Apple, it will not begin processing (and thus will not be available for download, even after the set release date) until you click on <span class="strong"><strong>Release This Version</strong></span>.</p><p>With all of the relevant information filled out, we can actually go through the process of creating a build and submitting it to Apple.</p></div>
<div class="section" title="Releasing the game and steps after it"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec55"/>Releasing the game and steps after it</h1></div></div></div><p>This is the<a id="id477" class="indexterm"/> part when the excitement really builds, and you say to yourself "It's time."</p><p>But seriously, it's an exciting moment when your game is finally ready for release and you're sending it to be reviewed by Apple with the plan that it gets into the hands of possibly millions of people.</p><p>The first thing to do when releasing a game is to create an archived file of your app that you can upload to the Apple servers. To do this, simply go to <span class="strong"><strong>Product</strong></span> | <span class="strong"><strong>Archive</strong></span> (if it's grayed out, change your device type from one of the simulators to a device, even if you don't have a device plugged in).</p><p>After the archiving is complete, a screen that looks like what is shown in the following screenshot will open (if it doesn't, you can go to <span class="strong"><strong>Window</strong></span> | <span class="strong"><strong>Organizer</strong></span>):</p><div class="mediaobject"><img src="../Images/image00295.jpeg" alt="Releasing the game and steps after it"/></div><p style="clear:both; height: 1em;"> </p><p>From here, click on <span class="strong"><strong>Export</strong></span>. Choose <span class="strong"><strong>Save for iOS App Deployment</strong></span> and click on <span class="strong"><strong>Next</strong></span>.</p><p>Log in if you aren't logged in already, and it will take you to a screen that looks something like this:</p><div class="note" title="Note"><h3 class="title"><a id="tip66"/>Tip</h3><p>If it <a id="id478" class="indexterm"/>says it can't find an app with a matching bundle ID, just click on <span class="strong"><strong>Try Again</strong></span>. It should find it the second time.</p></div><div class="mediaobject"><img src="../Images/image00296.jpeg" alt="Releasing the game and steps after it"/></div><p style="clear:both; height: 1em;"> </p><p>Click on <span class="strong"><strong>Export</strong></span>, and then save it somewhere you can find later (such as the Desktop).</p><p>Now open the <span class="strong"><strong>Application Loader</strong></span> by going to <span class="strong"><strong>Xcode</strong></span> | <span class="strong"><strong>Open Developer Tool</strong></span> | <span class="strong"><strong>Application Loader</strong></span>. Sign in and choose <span class="strong"><strong>Deliver Your App</strong></span>.</p><div class="mediaobject"><img src="../Images/image00297.jpeg" alt="Releasing the game and steps after it"/></div><p style="clear:both; height: 1em;"> </p><p>Now<a id="id479" class="indexterm"/> navigate to wherever you exported your IPA file, and open it. It will read the data, and the screen looks something like this:</p><div class="mediaobject"><img src="../Images/image00298.jpeg" alt="Releasing the game and steps after it"/></div><p style="clear:both; height: 1em;"> </p><p>When<a id="id480" class="indexterm"/> you click on <span class="strong"><strong>Next</strong></span>, it will go through the process of verifying that all your icons are added properly and the default images exist, and anything else ensuring the app matches up with the information you provided.</p><p>If there are any errors, warnings, or issues that come up, chances are high that you're not the only person facing that issue. A quick Google search never hurt anyone.</p><p>Once the verification process is done, it will upload the app to Apple's servers.</p><div class="note" title="Note"><h3 class="title"><a id="tip67"/>Tip</h3><p>Note that this does not mean the app is "submitted" for review. It's just uploaded so that you can select it from iTunes Connect when you're ready. Even if it says something about being e-mailed when it's in review, that's not true (which is odd).</p></div><p>Now head back to iTunes Connect after waiting a few minutes, and you should see a <span class="strong"><strong>+</strong></span> button next to the <span class="strong"><strong>Builds</strong></span> section. When you click on it, you should be able to select the recently uploaded build.</p><div class="mediaobject"><img src="../Images/image00299.jpeg" alt="Releasing the game and steps after it"/></div><p style="clear:both; height: 1em;"> </p><p>Click on <span class="strong"><strong>Save</strong></span> at the top. Then click on <span class="strong"><strong>Submit for Review</strong></span>. Then complete the required questionnaire<a id="id481" class="indexterm"/> about what your app includes (in our case, none of them). Then click on <span class="strong"><strong>Submit</strong></span>.</p><p>We're on our way!</p><div class="note" title="Note"><h3 class="title"><a id="tip68"/>Tip</h3><p>A faster way to validate and submit your apps to the App Store is without using the Application Loader. Instead of clicking on <span class="strong"><strong>Export</strong></span>, you can click on either <span class="strong"><strong>Validate</strong></span> or <span class="strong"><strong>Submit</strong></span>, and the same process will take place.</p></div><div class="section" title="After submission"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec144"/>After submission</h2></div></div></div><p>Now that your app's status is <span class="strong"><strong>Waiting for Review</strong></span>, it's best to make use of your time by either<a id="id482" class="indexterm"/> preparing for an update (because in theory, you could be constantly pushing updates, and as soon as one gets accepted, you push another) or marketing your game to the public.</p><p>Ideally, you've been doing all of this early on: blogging about your progress, posting about it on social media, telling your friends and family about the game you're creating, and so on. But if you haven't, no worries! The next few sections will guide you through this process.</p></div><div class="section" title="Beta testers and the target market"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec145"/>Beta testers and the target market</h2></div></div></div><p>If you<a id="id483" class="indexterm"/> don't have people playing your game and alpha or beta testing it yet, now's probably the best time to do it. You should try to get an array of players with different skill sets to see how different users interact with your game so that you can try to eliminate the confusion with as many people as possible.</p><p>Also, if you're wondering, "What kind of people should I look for to test my game?" you need to consider who your ideal player is. If you're making a kids' game, try to get kids (or maybe even their parents) to play your game. If the genre is tower defense, try to find people who just love tower defense games so that they can give you great feedback.</p><p>If you're interested in<a id="id484" class="indexterm"/> beta testing with people who aren't in your vicinity, consider Apple's TestFlight integration. At first, TestFlight was a standalone product, but now Apple has included it within iTunes Connect (you might have seen it if you went under the <span class="strong"><strong>Prerelease</strong></span> tab). Essentially, you can invite people to use your app/game just by getting their e-mail. You upload a build in the same way you submitted it, except that you have to add the build to the prerelease, and after a review process, Apple allows the testers to download and play the game.</p><p>But having beta testers and figuring out your target audience is only step 1. Step 2 involves getting your game into the hands of many people.</p></div><div class="section" title="App review sites"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec146"/>App review sites</h2></div></div></div><p>One <a id="id485" class="indexterm"/>of the keys to making your game a success is getting it into the hands of other people, especially people who write blogs or articles that are reviews of games other people have made. If a game is amazing, you'll see it all over the place, and maybe even Apple takes notice and features it under the <span class="strong"><strong>Featured</strong></span> section of their App Store.</p><p>If you e-mail any developer (who isn't in a prominent company) and ask them how Apple featured them, the response is generally the same: "We had no idea that it was going to happen. We just asked some websites to review our game, and then all of a sudden, we were featured on the App Store for the week!"</p><p>That being<a id="id486" class="indexterm"/> said, there's a giant list of app review websites at <a class="ulink" href="https://maniacdev.com/2012/05/ios-app-review-sites">https://maniacdev.com/2012/05/ios-app-review-sites</a>, so that you don't have to find them yourself.</p><p>Although the URL says "2012," it has been updated as recently as August 2014, at the time of writing this book. The websites are sorted by Alexa ranking, which places the most viewed site at the top of the list (and the least viewed at the bottom).</p><p>Apple gives you 100 promo codes for every version you submit to the App Store. Use these codes when pitching/submitting your game to these sites.</p><div class="note" title="Note"><h3 class="title"><a id="tip69"/>Tip</h3><p>Note <a id="id487" class="indexterm"/>that it's not likely that your game will make it to a site like <span class="emphasis"><em>Mashable</em></span> or <span class="emphasis"><em>TechCrunch</em></span> right away without already being a big hit, so to make better use of the promo codes, it might be a better option to start lower on the list and work your way up, instead of down.</p></div></div><div class="section" title="Other sources of information"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec147"/>Other sources of information</h2></div></div></div><p>There's a website known as <span class="emphasis"><em>PixelProspector</em></span>. They have a ton of resources, links, guides, and more<a id="id488" class="indexterm"/> when it comes to game development (especially when it comes to indie games, which is most likely what you like if you're reading this book). Even if you're part of a reputed studio, this is still a great source for information (especially their relatively new <span class="strong"><strong>Marketing</strong></span> section). Check it out at <a class="ulink" href="http://www.pixelprospector.com/indie-resources/">http://www.pixelprospector.com/indie-resources/</a>. You'll probably find something useful.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec56"/>Summary</h1></div></div></div><p>In this chapter, you learned how to create a default image for your app, properly set up the icons (along with using the asset catalog), add analytics to your app via Flurry, set up everything on iTunes Connect, release your app, and plan what to do afterwards.</p><p>In the next chapter, we'll cover Apple's newest language, called <span class="strong"><strong>Swift</strong></span>. We'll see a nongame example as well as a small game using Cocos2d's Swift version.</p></div></body></html>