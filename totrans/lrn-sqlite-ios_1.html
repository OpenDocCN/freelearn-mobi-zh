<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Introduction to SQL and SQLite"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Introduction to SQL and SQLite</h1></div></div></div><p>In this chapter, I will introduce you the <span class="strong"><strong>Structured Query Language</strong></span> (<span class="strong"><strong>SQL</strong></span>) <a class="indexterm" id="id0"/>and the mobile database <a class="indexterm" id="id1"/>
<span class="strong"><strong>SQLite</strong></span>. Whether you are an experienced technologist at SQL or a novice, using this book will help you understand this cool subject, which is gaining momentum. SQLite is a database that is used on a mobile smartphone or tablet, which is local to the device. SQLite has been modified by different vendors to harden and secure it for a variety of uses and applications.</p><p>SQLite was released in 2000 and has now grown to be de facto database on a mobile or smartphone. It is an open<a class="indexterm" id="id2"/> source piece of software with a low footprint and overheads, which is packed with a <span class="strong"><strong>RDBMS (relational database management system)</strong></span>.</p><p><span class="strong"><strong>Mr. D. Richard Hipp</strong></span> is the inventor and author of SQLite, which was designed and developed on a battleship while he was with a company called General Dynamics in the US Navy. The programming was built for the <span class="strong"><strong>HP-UX</strong></span> operating system<a class="indexterm" id="id3"/> with <span class="strong"><strong>Informix</strong></span><a class="indexterm" id="id4"/> as the database engine. It took many hours in the data to upgrade or install the database software, and was an over-the-top database for this experienced <a class="indexterm" id="id5"/>
<span class="strong"><strong>DBA</strong></span> (<span class="strong"><strong>database administrator</strong></span>). Mr. Hipp wanted a portable, self-contained, easy-to-use database, which could be mobile, quick to install, and not dependent on the operating system.</p><p>Initially, SQLite 1.0 used <span class="strong"><strong>gdbm</strong></span><a class="indexterm" id="id6"/> as its storage system, but later, it was replaced with its own <span class="strong"><strong>B-tree</strong></span> implementation<a class="indexterm" id="id7"/> and technology for the database. The B-tree implementation was enhanced to support transactions and store rows of the data with key order. From 2001 onwards, open source family extensions for other languages, such as Java, Python, and Perl, were written to support their applications. The database and its popularity within the open source community and others started growing.</p><p>As described in Wikipedia, SQL was as follows:</p><div class="blockquote"><blockquote class="blockquote"><p><a class="indexterm" id="id8"/><span class="emphasis"><em>Originally based upon relational algebra and tuple relational calculus, SQL consists of a data definition and manipulation language. The scope of SQL includes data insert, query, update and delete, schema creation and modification, and data access control. Although SQL is often described as, and to a great extent is, a declarative language (4GL), it also includes procedural elements.</em></span></p></blockquote></div><p>Internationalization<a class="indexterm" id="id9"/> supported UTF-16<a class="indexterm" id="id10"/> and UTF-8<a class="indexterm" id="id11"/> and included text-collating sequences in versions 2 and 3 in 2004. It was funded by <span class="strong"><strong>AOL</strong></span> (<span class="strong"><strong>America Online</strong></span>)<a class="indexterm" id="id12"/> in 2004. It works with a variety of browsers that sometimes have in-built support for this technology. For example, there are many extensions that use Chrome or Firefox that allow you to manage the database.</p><p>There have been many features added to this product. The future with the growth in mobile phones sets this quick and easy relational database system to quantum leap, where this database's use within the mobile and tablet application space will increase.</p><p>SQLite is based on PostgreSQL as a point of reference. SQLite does not enforce any type checking. The schema does not constrain it since the type of value is dynamic, and a trigger will be activated by converting the datatype.</p><div class="section" title="About SQL"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>About SQL</h1></div></div></div><p>In June 1970, a research paper was published by <span class="emphasis"><em>Dr. E.F. Codd</em></span> called <span class="emphasis"><em>A Relational Model of Data for Large Shared Data Banks</em></span>. The <span class="strong"><strong>Association of Computer Machinery</strong></span> (<span class="strong"><strong>ACM</strong></span>)<a class="indexterm" id="id13"/> accepted <a class="indexterm" id="id14"/>Codd's data and technology model, which has become the standard of the <a class="indexterm" id="id15"/>RDBMS today. IBM Corporation had invented the language called <span class="strong"><strong>Structured English Query Language</strong></span> (<span class="strong"><strong>SEQUEL</strong></span>), where the word "English" was dropped to become <a class="indexterm" id="id16"/>
<span class="strong"><strong>SQL</strong></span>.</p><p>SQL has become the standard for the RDMS, which is used by databases such as Oracle, Sybase, and Microsoft's SQL Server.</p><p>Today, there are <span class="strong"><strong>American National Standards Institute</strong></span> (<span class="strong"><strong>ANSI</strong></span>) standards for SQL, and there are many variations of this technology. Among the mentioned manufacturers, there are also others available in the open source world, for example, an SQL query engine, such as <a class="indexterm" id="id17"/>
<span class="strong"><strong>Presto</strong></span>.</p><p>Presto is the distribution engine for SQL under open source, which is made to execute interactive analytic queries. Presto queries are run under databases from a variety of data source sizes—gigabytes to petabytes.</p><p>Companies such as Facebook and Dropbox use the Presto SQL engine for their queries and analytics in data warehouse and related applications.</p><p>SQL <a class="indexterm" id="id18"/>is made up of data manipulation and definition language built with tuple and algebra calculation in a relational format. This language has a variety of statements but most would recognize the <code class="literal">INSERT</code>, <code class="literal">SELECT</code>, <code class="literal">UPDATE</code>, and <code class="literal">DELETE</code> statements. These statements form a part of the database schema management process and aid the data and security accesses. SQL includes procedural elements as a part of its setup.</p></div></div>
<div class="section" title="Where does SQLite stand in today's industry?"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Where does SQLite stand in today's industry?</h1></div></div></div><p>Companies may <a class="indexterm" id="id19"/>use applications, but they are not aware of the SQL engines that drive their data storage and information. Although it had become a standard with the<a class="indexterm" id="id20"/> ANSI in 1986, SQL features and functionalities are not 100% portable among different SQL systems. They also require code changes to be useful. These standards are always up for revision to ensure that ANSI is maintained.</p><p>There are many industrial and commercial databases, such as Oracle, SQL Server, or DB2, but none of them are as flexible, light, or open source as SQLite. Although smartphones are getting more powerful, you cannot compare them to the processing power of a modern desktop or laptop. SQLite, as its names suggests, is an SQL in a light environment, which is also flexible and versatile. So, at present, the best, light, fully functional, and customized database for mobile, is SQLite.</p><p>SQLite cannot be compared to enterprise database engines, such as SQL Server, Oracle, and MySQL. These enterprise database systems provide a centralized and controlled position, whereas SQLite provides local storage on a mobile device. SQLite is effectively based on the economy of size and reliability. It is simple to use, small, robust, and does not compete with these enterprise databases.</p><p>SQLite works well with "Internet of Things" as well, because of the no-need-for-human input or administration feature. So, for applications that deal with drones, medical equipment, robots, and sensors, SQL makes an ideal candidate for usage on a variety of mobile applications.</p></div>
<div class="section" title="iOS with SQLite"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>iOS with SQLite</h1></div></div></div><p>Out of the hundreds of thousands <a class="indexterm" id="id21"/>of apps in all the app stores, it would be difficult to find the one that does not require a database of some sort to store or handle data in a particular way. There are different formats of data and datafeeds, but they all require some sort of temporary or permanent storage. A small amount of data may not be applicable, but a medium or large amount of data will require a storage mechanism, such as a database to assist the app.</p><p>Using a database such as SQLite with iOS will enable developers to use their existing skills to run their DBMS. For SQLite, there is a C-library that is embedded and available to use with iOS with the<a class="indexterm" id="id22"/> <span class="strong"><strong>Xcode</strong></span> IDE.</p><p>Apple fully supports SQLite, which uses an include statement as a part of the library call, but developers can also use <a class="indexterm" id="id23"/>
<span class="strong"><strong>FMDB</strong></span>, which is a <a class="indexterm" id="id24"/>
<span class="strong"><strong>cocoa/objective-C</strong></span> wrapper around SQLite.</p><p>A few advantages of SQLite are that it is fast, lightweight, reliable, uses existing SQL knowledge, is supported by Apple on Mac OS and iOS and<a class="indexterm" id="id25"/> by many developers, as well as being integrated without much outside involvement.</p><p>The SQLite 3 library is under the general tab once the main project name is highlighted on the left-hand side of the page. Then, at the bottom of the page, within <span class="strong"><strong>Linked Frameworks and Libraries</strong></span>, click on the <span class="strong"><strong>+</strong></span> for a modal window to appear. Enter the word <code class="literal">sqlite</code> and select the <span class="strong"><strong>libsqlite3.dylib</strong></span> library, as shown in the following screenshot:</p><div class="mediaobject"><img alt="iOS with SQLite" src="graphics/4725_01_01.jpg"/></div><p>In effect, it is the C++ wrapper, called the <code class="literal">libsqlite3.dylib</code> library, within the framework section that allows the API to work with SQLite commands.</p><p>Before any<a class="indexterm" id="id26"/> SQL processes can take place, the database should be opened and ready for querying, and, upon the success of data retrieval, the constant called <code class="literal">SQLITE_OK</code> should be set to <code class="literal">0</code>.</p><p>Once the C++ wrapper is used and the access to SQLite commands is available, it is an easier process to use SQLite with iOS.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p><span class="strong"><strong>Downloading the example code</strong></span></p><p>You can download the example code files for this book from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p><p>You can download the code files by following these steps:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Log in or register to our website using your e-mail address and password.</li><li class="listitem" style="list-style-type: disc">Hover the mouse pointer on the <span class="strong"><strong>SUPPORT</strong></span> tab at the top.</li><li class="listitem" style="list-style-type: disc">Click on <span class="strong"><strong>Code Downloads &amp; Errata</strong></span>.</li><li class="listitem" style="list-style-type: disc">Enter the name of the book in the <span class="strong"><strong>Search</strong></span> box.</li><li class="listitem" style="list-style-type: disc">Select the book for which you're looking to download the code files.</li><li class="listitem" style="list-style-type: disc">Choose from the drop-down menu where you purchased this book from.</li><li class="listitem" style="list-style-type: disc">Click on <span class="strong"><strong>Code Download</strong></span>.</li></ul></div><p>Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">WinRAR / 7-Zip for Windows</li><li class="listitem" style="list-style-type: disc">Zipeg / iZip / UnRarX for Mac</li><li class="listitem" style="list-style-type: disc">7-Zip / PeaZip for Linux</li></ul></div></div></div></div>
<div class="section" title="Embedded databases"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Embedded databases</h1></div></div></div><p>SQLite has been designed and <a class="indexterm" id="id27"/>developed to work and coexist with other applications and processes in its area. RDBMS is tightly integrated with the native application software that requires storing information but is masked, which is hidden from users, and it requires minimal administration or maintenance.</p><p>SQLite can work with different APIs hidden from users, and it requires minimal administration or maintenance areas.</p><p>The RDMS SQLite will also work with other applications:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">It requires minimal supervision</li><li class="listitem" style="list-style-type: disc">There is no network traffic and access is faster since it is a file-based system</li><li class="listitem" style="list-style-type: disc">There are no network access conflicts or configurations</li><li class="listitem" style="list-style-type: disc">There are no access limitations with privileges or permissions</li><li class="listitem" style="list-style-type: disc">There is much reduced overheads</li></ul></div><p>These make it easier and quicker to deploy your applications to app stores or other locations.</p><p><span class="emphasis"><em>Figure 1</em></span>, seen in this section, shows how different components work seamlessly together in a harmonized way to link up data with the SQLite library and other processes. These show how the Apache and C/C++ processes work together with the SQLite-C library to interface and link with it, so it becomes seamless and integrates with the operating system.</p><p>SQLite has been developed and integrated in such a way that it will interface and gel with a variety of applications and multiple solutions. As a lightweight RDBMS, it can stand on its own due to its versatility and is not cumbersome or too complex to benefit your application. It can be used on many platforms, and comes with a binary compatible format, which is easier to dovetail within your mobile application.</p><p>The different types of IT professionals will be involved with SQLite, since it holds the data, affects performance, and involves database design, user or mobile interface design specialists, analysts, and consultancy types. These professionals can use their existing knowledge of SQL to quickly grasp SQLite. SQLite can act as both data processor for information, or deal with data in the memory, to perform in an excellent manner.</p><p><span class="emphasis"><em>Figure 1</em></span> also outlines <a class="indexterm" id="id28"/>how the different software pieces of a jigsaw can interface properly using the C API interface for SQLite with some other programming language code. For example, C or C++ code can be programmed to communicate with the SQLITE C API, which will then talk to the operating system and communicate with the database engine. Another language, such as PHP, can communicate using its own language data objects, which will, in turn, communicate with the SQLite C API and the database.</p><p>SQLite is a great database to learn, especially for computer scientists who want to use a tool that can open their minds to investigate caching, B-Tree structures and algorithms, database design architecture, and other concepts.</p><p>For more information of how SQLite sits within the other applications on a mobile device, see <span class="emphasis"><em>Figure 1</em></span>:</p><div class="mediaobject"><img alt="Embedded databases" src="graphics/4725_01_02.jpg"/><div class="caption"><p>Figure 1: C API interface to SQLite</p></div></div></div>
<div class="section" title="The architecture of the SQLite database"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>The architecture of the SQLite database</h1></div></div></div><p>As a library within<a class="indexterm" id="id29"/> the<a class="indexterm" id="id30"/> <span class="strong"><strong>OS-Interface</strong></span>, SQLite will have many functions implemented through a program called <code class="literal">tclsqlite.c</code>. Many technologies and reserved words are used in different languages, but here we have used C language. The core functions are to be found in <code class="literal">main.c</code>, <code class="literal">legacy.c</code>, and <code class="literal">vmbeapi.c</code>. There is also a source code file in C for the TCL language, to avoid any confusion; the prefix of <code class="literal">sqlite3</code> is used at the beginning of the SQLite library.</p><p>The <span class="strong"><strong>Tokenizer </strong></span>code base<a class="indexterm" id="id31"/> is found within <code class="literal">tokenize.c</code>. Its task is to look at the strings that are passed to it and partition or separate them into tokens, which are then passed to the parser. The <code class="literal">tokenize.c</code> file is included in the code with an include statement and is located in the <code class="literal">sqlite/src/tokenize.c</code> directory area.</p><p>The <span class="strong"><strong>Parser </strong></span>code base<a class="indexterm" id="id32"/> is found within <code class="literal">parse.y</code>. The <span class="strong"><strong>Lemon LALR(1)</strong></span> parser generator<a class="indexterm" id="id33"/> is the parser for SQLite; it takes the concept of tokens and assigns them a meaning. To keep within the low-sized footprint of RDBMS, only one C file is used for the parse generator.</p><p>The <span class="strong"><strong>Code Generator</strong></span><a class="indexterm" id="id34"/> is then used to create SQL statements from the outputted tokens of the parser. It will produce some virtual machine code that will carry out the work of SQL statements. Several files, such as <code class="literal">attach.c</code>, <code class="literal">build.c</code>, <code class="literal">delete.c</code>, <code class="literal">select.c</code>, and <code class="literal">update.c</code>, will handle the SQL statements and syntax.</p><p><span class="strong"><strong>Virtual machines </strong></span><a class="indexterm" id="id35"/>execute the code that is generated from the Code Generator. It has in-built storage, where each instruction may have up to three additional operands as a part of each code. The source file is called <code class="literal">vdbe.c</code>, which is a part of the SQLite database library. Built in is also a computing engine that has been specially created to integrate with the database system.</p><p>There are two <a class="indexterm" id="id36"/>header files for virtual machines. The <span class="strong"><strong>header files</strong></span> that<a class="indexterm" id="id37"/> interface a link between the SQLite libraries are <code class="literal">vdbe.h</code> and <code class="literal">vdbeaux.c</code>, which have utilities used by other modules. The <code class="literal">vdbeapi.c</code> file also connects to virtual machines with <code class="literal">sqlite3_bind</code> and other related interfaces. C language routines are called from SQL functions to reference them to the header files. For example, functions such as <code class="literal">count()</code> are defined in <code class="literal">func.c</code>, and date functions are located in <code class="literal">date.c</code>.</p><p><span class="strong"><strong>B-tree</strong></span><a class="indexterm" id="id38"/> is a type of table implementation used in SQLite, and the C source file is <code class="literal">btree.c</code>. The <code class="literal">btree.h</code> header file defines the interface of the B-tree system. There is a different B-tree setup for every table and index held within the same file. There is a header portion within <code class="literal">btree.c</code>, which will have details of B-tree in a large comment field.</p><p><span class="strong"><strong>Pager</strong></span> <a class="indexterm" id="id39"/>or <span class="strong"><strong>Page Cache</strong></span><a class="indexterm" id="id40"/> using B-tree will ask for data in a fixed size format. The default size is 1024 bytes, but it can be between 512 and 65536 bytes. Commit and Rollback operations, coupled with the caching, reading, and writing of the data, are handled by <span class="strong"><strong>Page Cache</strong></span> or <span class="strong"><strong>Pager</strong></span>. Data locking mechanisms are also handled by <span class="strong"><strong>Page Cache</strong></span>. The C file called <code class="literal">page.c</code> is implemented to handle requests within the SQLite library and the header file is <code class="literal">pager.h</code>.</p><p>The <span class="strong"><strong>OS Interface</strong></span> C file<a class="indexterm" id="id41"/> is defined in <code class="literal">os.h</code>. It addresses how SQLite can be used on different operating systems, and it becomes transparent and portable to the user, thus becoming a valuable solution for any developer. An abstract layer to handle Win32 and POSIX compliant systems is also kept in place. Different operating systems have their own C file. For example, <code class="literal">os_win.c</code> is for Windows, <code class="literal">os_unix.c</code> is for Unix; both are coupled with their own <code class="literal">os_win.h</code> and <code class="literal">os_unix.h</code> header files.</p><p><code class="literal">Util.c</code> is the C file that<a class="indexterm" id="id42"/> will handle memory allocation and string comparisons. The <code class="literal">Utf.c</code> C file will hold Unicode conversion subroutines.</p><p>For more information on the architecture of SQLite, see <span class="emphasis"><em>Figure 2</em></span>:</p><div class="mediaobject"><img alt="The architecture of the SQLite database" src="graphics/4725_01_03.jpg"/><div class="caption"><p>Figure 2: Architecture diagram of SQLite</p></div></div><p>The <code class="literal">Utf.c</code> C file <a class="indexterm" id="id43"/>will hold the Unicode data, sort it within the SQL engine, and use the engine as a mechanism for computing data. Since the memory of the device is limited and the database size has the same constraints, the developer has to think outside the box to use these techniques.</p><p>These types of memory and resource management formed a part of the approach when the overlay techniques were used in the past and the disk and memory was limited:</p><div class="informalexample"><pre class="programlisting">    SELECT parameter1, STTDEV(parameter2)
      FROM Table1 Group by parameter1
      HAVING parameter1 &gt; MAX(parameter3)</pre></div></div>
<div class="section" title="Features"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Features</h1></div></div></div><p>As part of its standards, SQLite<a class="indexterm" id="id44"/> uses and implements most of the SQL-92 standards, but not all the potential features or parts of functionality are used or realized. For example, SQLite uses and implements most of the SQL-92 standards but not all potent columns. The support for triggers is not 100% as it cannot write output to the views.</p><p>As mentioned previously, the use of a common datatype for a column is different; most relational database systems assign them to individual values. SQLite will convert a string to an integer if the column's preferred type is an integer. It is a good piece of functionality when bound to this type of scripting language, but the technique is not portable to other RDBMS systems. It also has its criticisms for not having a good data integrity mechanism compared to others, in relation to statically typed columns.</p><p>There are some major differences between the two approaches of data: one is <span class="strong"><strong>Core Data</strong></span> and the SQLite way Core Data is similar to having a layer of information between the user interface and the database itself. It does have the advantage of speeding up database interactivity read/write process and saves writing huge queries. While SQLite is a local relational database with its own efficiencies and limitations, it may not suit all applications. Sometimes, due to the speed of a device, Core Data may have the advantage of SQLite directly.</p><p>Briefly, your application will have model layer objects, and these are held and managed in a framework, namely, Core Data. It manages the life cycle of an object within iOS. This is just some background information to show how data can be read from databases and the speed at which this takes place.</p></div>
<div class="section" title="The advantages of using SQLite"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>The advantages of using SQLite</h1></div></div></div><p>A few advantages of using <a class="indexterm" id="id45"/>SQLite are listed here:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">SQLite does have a data constraints feature and can edit or drop tables without loading them into memory.</li><li class="listitem" style="list-style-type: disc">SQLite works on the data stored on the disk and is slower compared to Core Data.</li><li class="listitem" style="list-style-type: disc">Core Data, on the other hand, does not have data constraints, and can be implemented using the app's business logic instead.</li><li class="listitem" style="list-style-type: disc">In order to update or drop a table, the entire table has to be loaded up.</li><li class="listitem" style="list-style-type: disc">Core Data is quick to create records/rows but slower to save the data.</li><li class="listitem" style="list-style-type: disc">Core Data does have another advantage where it operates and works in the memory, and the data has to be loaded from the disk to memory.</li><li class="listitem" style="list-style-type: disc">Core Data works with objects based in the memory, or can be accessed using the standard slower disk method.</li><li class="listitem" style="list-style-type: disc">Core Data will work on non-transactional, single user, or single-threaded methods. SQLite's function is to fetch and store data using its file database system. It operates by storing the data on the disk where the data is incrementally or minimally loaded.</li><li class="listitem" style="list-style-type: disc">Effectively, the data can be transactional, multiuse, and thread-safe. It saves data to the disk and is mostly resilient to crashes. It is slower if you have to create hundreds of thousands of rows, but it does have data constraints, such as unique keys.</li><li class="listitem" style="list-style-type: disc">SQLite has bindings to many languages such as Basic, C, C#, C++, Java, JavaScript, Lua, PHP, Objective-C, Python, Ruby, and TCL. Its popularity with the open source community and usage by customers and developers has enabled its growth to continue.</li><li class="listitem" style="list-style-type: disc">This lightweight <a class="indexterm" id="id46"/>RDMS can be used on Google Chrome, Firefox, Safari, Opera, and Android browsers and has middleware support using <code class="literal">ADO.NET</code>, ODBC, COM (ActiveX), and XULRunner. It also has a support for web application frameworks, such as Django (Python based), Ruby on Rails, and Bugzilla (Mozilla). There are other applications, such as Adobe Photoshop Light and Skype that use SQLite. It is also a part of Windows 8, Symbian OS, Android, and OpenBSD operating systems.</li><li class="listitem" style="list-style-type: disc">Apart from not having the large overheads of other database engines, SQLite has a major enhancement, known as the <code class="literal">EXPLAIN</code> keyword, with its manifest typing.</li><li class="listitem" style="list-style-type: disc">For controlling constraint conflicts, the <code class="literal">REPLACE</code> and <code class="literal">ON CONFLICT</code> statements are used.</li><li class="listitem" style="list-style-type: disc">Within the same query, multiple independent databases can be accessed using the <code class="literal">DETACH</code> and <code class="literal">ATTACH</code> statements.</li><li class="listitem" style="list-style-type: disc">New SQL functions and collating sequences can be created using the predefined APIs, which offer much more flexibility.</li><li class="listitem" style="list-style-type: disc">As there is no configuration required, SQLite just does the job and works.</li><li class="listitem" style="list-style-type: disc">No lists, such as the <code class="literal">REPLACE</code> and <code class="literal">ON CONFLICT</code> procedures, are required.</li><li class="listitem" style="list-style-type: disc">There is no need to initialize, stop, restart, or start server processes, and no administrator is required to create the database with proper access controls or security permits.</li><li class="listitem" style="list-style-type: disc">After any failure, no user actions are required to recover the database, since it is self-repairing.</li><li class="listitem" style="list-style-type: disc">SQLite is more advanced than previously thought. Unlike other RDMS, it does not require a server setup via a server to serve up data or incur network traffic costs. There is no TCP/IP calls, nor frequent communication backward or forward.</li><li class="listitem" style="list-style-type: disc">SQLite is direct; the <a class="indexterm" id="id47"/>operating system process deals with database access to its file and controls database writes and reads with no middle-man process handshaking.</li><li class="listitem" style="list-style-type: disc">By having no server backend, the process of installation, configuration, or administration is reduced significantly, and access to the database is granted to programs that require this type of data operation. This is an advantage in one way, but it is also a disadvantage for security and protection from data-driven misuse, data concurrency, or data row locking mechanisms.</li><li class="listitem" style="list-style-type: disc">It also allows the database to be accessed several times by different applications at the same time.</li><li class="listitem" style="list-style-type: disc">It supports a form of portability for the cross platform database file that can be located with the database file structure. The database file can be updated on one system and copied to another on either 32 bit or 64 bit with different architectures; this does not make a difference to SQLite.</li><li class="listitem" style="list-style-type: disc">The usage of different architectures and the promises of developers to keep the file system stable and compatible with previous, current, and future developments will allow this database to grow and thrive. SQLite databases do not need to upload old data to new, formatted, and upgraded databases; it just works.</li><li class="listitem" style="list-style-type: disc">By having a single disk file for the database, the information can be copied on a USB and shared or just reused on another device very quickly by keeping all the information intact.</li><li class="listitem" style="list-style-type: disc">Another feature of this portable database, SQLite, is its size, which can start on a single 512-byte page and expand to 2,147,483,646 pages at 65,536 bytes per page, or in bytes 140,737,488,224,256, which equates to about 140 terabytes. Most other RDBMS are much larger, but IBM's Cloudscape is small, with a 2 MB jar file, but still larger than SQLite.</li><li class="listitem" style="list-style-type: disc">The Firebird alternative's client (frontend) library is about 350 KB, whereas the Berkeley Oracle database is around 450 KB, without the SQL support, and with one simple key/value pair's option.</li><li class="listitem" style="list-style-type: disc">This advanced portable database system and its source code is in the public domain. However, there are open source license issues and controls for some test code and documentation.</li><li class="listitem" style="list-style-type: disc">This is great news for developers who might want to code up new extensions or database functionality that works with their programs, which could be made into a "product extension" for SQLite.</li><li class="listitem" style="list-style-type: disc">You cannot have this sort of access to SQL source code around since everything has a patent, limited access, or just no access.</li><li class="listitem" style="list-style-type: disc">There are signed affidavits by developers to disown any copyright interest in the SQLite code. SQLite is different because it is just not governed or ruled by copyright law, which monitors the <a class="indexterm" id="id48"/>way a software should really work or be used.</li></ul></div><p>Using the small allocation with variable length records, applications run faster, database access is quicker, manifest typing is used, and the database is small and nimble.</p><p>The ease of using this RDBMS makes it easier for most programmers at an intermediate level to create applications using this technology, with its detailed documentation and examples.</p><p>Other RDBMS are internally complex, with links to data structures and objects. SQLite comprises a virtual machine language that uses the <code class="literal">EXPLAIN</code> reserved word in front of a query.</p><p>The virtual machine has increased and benefitted this database engine by providing an excellent process or controlled environment between the backend (where the results are computed and outputted), and frontend (where the SQL is parsed and executed).</p><p>The SQL implementation language is comparable to other RDBMS, especially with its lightweight base, and it supports recursive triggers and requires the <code class="literal">FOR</code>/<code class="literal">EACH ROW</code> behavior. The <code class="literal">FOR EACH</code> statement is not currently supported, but functionality cannot be ruled out in the future.</p><p>As described so far in this chapter, SQLite is a nimble and easy-to-use database that developers can engage with quickly, use existing skills, and output systems to mobile devices and tablets far easier than ever before. With the help of HTML5 and other JavaScript frameworks, the advancement of SQL and number of SQLite installations will take a quantum leap.</p></div>
<div class="section" title="Working with SQLite"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Working with SQLite</h1></div></div></div><p>The website for <a class="indexterm" id="id49"/>SQLite is available at <a class="ulink" href="http://www.sqlite.org">www.sqlite.org</a>, where you can download all the binaries for the database, <a class="indexterm" id="id50"/>documentation, and source code, which works on operating systems such as Linux, Windows, and MAC OS X.</p><p>The SQLite <span class="strong"><strong>share library</strong></span><a class="indexterm" id="id51"/> or <span class="strong"><strong>DLL</strong></span><a class="indexterm" id="id52"/> is the library to be used for the Windows operating system and can be installed or seen via Visual Studio with the C++ language. So, the developer can write the code using the library that is presently linked in reference via the application. When the execution has taken place, the DLL will load and all the references in the code will link to those in the DLL at the right time.</p><p>The SQLite3 <a class="indexterm" id="id53"/>
<span class="strong"><strong>command-line program</strong></span>—<span class="strong"><strong>CLP</strong></span>—is a self-contained program that has all the components to run at the command line.</p><p>It also comes with an extension for TCL. So within TCL, you can connect and update the SQLite database. SQLite downloads come with the TAR version for Unix systems, and the ZIP version for Windows systems.</p></div>
<div class="section" title="The examples of using SQLite with iOS"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec16"/>The examples of using SQLite with iOS</h1></div></div></div><p>The following is a simple<a class="indexterm" id="id54"/> application on how to use iOS with the SQLite database with Xcode. It outlines the basic steps of creating an application and database, and selecting data.</p><p>To get started, let's start Xcode and create a template using the <span class="strong"><strong>Single View Application</strong></span> choice, as shown in the following screenshot:</p><div class="mediaobject"><img alt="The examples of using SQLite with iOS" src="graphics/4725_01_04.jpg"/></div><p>Click on the <span class="strong"><strong>Next</strong></span> button to<a class="indexterm" id="id55"/> proceed to the next screen in this process. In the product name field, enter <code class="literal">SimpleCalculator</code> for the language, and select <span class="strong"><strong>Swift</strong></span>. For the devices field, select <span class="strong"><strong>iPhone</strong></span>. Then, click on the <span class="strong"><strong>Next</strong></span> button to move onto the next screen, as shown in the following screenshot:</p><div class="mediaobject"><img alt="The examples of using SQLite with iOS" src="graphics/4725_01_05.jpg"/></div><p>In the following screenshot, select the directory where the code will reside. Now, we can view what the Xcode developer tool has created. Then, select a device to display the information; in our case, use the iPhone 6s.</p><p>See the directory for the source code, as shown in the following screenshot:</p><div class="mediaobject"><img alt="The examples of using SQLite with iOS" src="graphics/4725_01_06.jpg"/></div><p>The following is a screenshot showing the <code class="literal">SimpleCalculator</code> application opened in Xcode. Select the <span class="strong"><strong>iPhone 6s</strong></span> option as the device to develop on:</p><div class="mediaobject"><img alt="The examples of using SQLite with iOS" src="graphics/4725_01_07.jpg"/></div><p>Next, click on the <a class="indexterm" id="id56"/>
<span class="strong"><strong>Play</strong></span> button that will compile and build the application as shown here in both images, and a blank screen will appear:</p><div class="mediaobject"><img alt="The examples of using SQLite with iOS" src="graphics/4725_01_08.jpg"/></div><p>The preceding screenshot shows the application to be built, and the following screenshot shows a blank screen after the image is compiled and run.</p><p>This method gets you to the basics of an iOS application with Swift working as a canvas.</p><p>In this brief example, we will use <code class="literal">SQLiteDB.swift</code> and <code class="literal">String-Extras.swift</code> to work with the SQLite database, including the <code class="literal">Bridging-Header.h</code> file. In the <span class="strong"><strong>Build Settings</strong></span> option, view <span class="strong"><strong>Objective-C Bridging Header</strong></span> and double-click on it, and bridge it to <code class="literal">Bridging-Header.h</code>, and you can also drag it to show that it is linked.</p><p>As mentioned previously, add <code class="literal">libsqlite3.0.dylib</code> to the linked frameworks by navigating to <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>Linked Frameworks and Libraries</strong></span>; then, add <code class="literal">Libsqlite3.0.dylib</code>.</p><p>Now, rebuild the project to show that it's working:</p><div class="mediaobject"><img alt="The examples of using SQLite with iOS" src="graphics/4725_01_09.jpg"/></div><p>Click on the <span class="strong"><strong>Simulator</strong></span><a class="indexterm" id="id57"/> button, and then click on <span class="strong"><strong>Quit</strong></span> to stop the current compiled simulator program. The program will compile with no problems. Next, a database instance has to be created as shown in the following code. The <code class="literal">SQLite.DB.query</code> method is used to execute these commands:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">First an instance is required:<div class="informalexample"><pre class="programlisting">let testdb = SQLiteDB.sharedInstance()</pre></div></li><li class="listitem" style="list-style-type: disc">To run this query, the following code is used with the <code class="literal">SQLiteDB.query</code> way:<div class="informalexample"><pre class="programlisting">var theresult = testdb.query("select * from people where county = 'Berks'", parameters: nil)
for row in result
{
    println(row["name"]!.asString())
}</pre></div></li><li class="listitem" style="list-style-type: disc">To delete a record for example, follow the following piece of code:<div class="informalexample"><pre class="programlisting">testdb.execute("delete from people where county = 'Bucks' ", parameters: nil)</pre></div></li></ul></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec17"/>Summary</h1></div></div></div><p>In this chapter, you read the history of SQL, the impact of relational databases, and the use of a mobile SQL database, namely, SQLite. This chapter outlined the history and beginnings of SQLite and how it has grown to be the most used database on mobile devices so far. In the next chapter, you will learn about the components of database concepts and how to design an SQLite database. The next chapter will show you the basic elements of design for an SQLite database.</p></div></body></html>