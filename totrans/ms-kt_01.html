<html><head></head><body><div><div><div><h1 id="_idParaDest-15" class="chapter-number"><a id="_idTextAnchor015"/>1</h1>
			<h1 id="_idParaDest-16"><a id="_idTextAnchor016"/>Get Started with Kotlin Android Development</h1>
			<p>Kotlin is a static programming language that allows you to write concise and typed code. It’s the language preferred for Android development by Google.</p>
			<p>In this chapter, we’ll get to know Kotlin as a programming language. We will cover features that are useful for Android development and their importance for Android developers. Additionally, we’ll cover how to migrate from Java to Kotlin and some useful tips for developers coming from Java backgrounds.</p>
			<p>In this chapter, we’re going to cover the following main topics:</p>
			<ul>
				<li>Introduction to Kotlin</li>
				<li>Kotlin syntax, types, functions, and classes</li>
				<li>Migrating from Java to Kotlin</li>
				<li>Kotlin features for Android developers</li>
			</ul>
			<h1 id="_idParaDest-17"><a id="_idTextAnchor017"/>Technical requirements</h1>
			<p>To follow the instructions in this chapter, you’ll need to have the following ready:</p>
			<ul>
				<li>IntelliJ IDEA Community Edition (<a href="https://www.jetbrains.com/idea/download/">https://www.jetbrains.com/idea/download/</a>)</li>
				<li>OpenJDK 11 or higher (<a href="https://openjdk.java.net/install/">https://openjdk.java.net/install/</a>)</li>
			</ul>
			<p>You can find the code for this chapter at <a href="https://github.com/PacktPublishing/Mastering-Kotlin-for-Android/tree/main/chapterone">https://github.com/PacktPublishing/Mastering-Kotlin-for-Android/tree/main/chapterone</a></p>
			<h1 id="_idParaDest-18"><a id="_idTextAnchor018"/>Introduction to Kotlin</h1>
			<p>Kotlin is a language that runs on the <strong class="bold">Java Virtual Machine</strong> (<strong class="bold">JVM</strong>) developed by JetBrains. It was<a id="_idIndexMarker000"/> developed to <a id="_idIndexMarker001"/>overcome the following challenges that Java had:</p>
			<ul>
				<li><strong class="bold">Verbosity</strong>: Java has a very verbose <a id="_idIndexMarker002"/>syntax and this leads to developers writing a lot of boilerplate code even for trivial tasks.</li>
				<li><strong class="bold">Null pointer exceptions</strong>: By default, Java allows variables to have null values. This normally results in null pointer exceptions, which has been called <strong class="bold">the billion-dollar</strong> <strong class="bold">mistake</strong> in Java <a id="_idIndexMarker003"/>as many applications have been affected by this.</li>
				<li><strong class="bold">Concurency</strong>: Java has threads, but managing concurrency and thread safety can be such a hard task at times. This leads to a lot of performance and memory issues that seriously affect applications that need to do work off the main thread.</li>
				<li><strong class="bold">Slow adoption of features</strong>:  The Java release cycle is slow and it is difficult to use the latest Java version to develop Android apps as there’s a lot to be done to ensure backward compatibility. This means it’s hard for Android developers to easily adopt the new language features and improvements as they’re stuck using older versions.</li>
				<li><strong class="bold">Lack of functional support</strong>: Java is not a functional language, which makes it hard for developers to write functional code in Java. It’s hard to employ features such as high-order functions or treat functions as first-class citizens.</li>
			</ul>
			<p>Over the years, Kotlin has evolved to be multiplatform and server-side and not serviced, and is used in data science as well. Some of the features where Kotlin has an edge over Java are as follows:</p>
			<ul>
				<li><strong class="bold">Conciseness</strong>: The syntax is<a id="_idIndexMarker004"/> concise, which in turn reduces the amount of boilerplate code that you write.</li>
				<li><strong class="bold">Null safety</strong>: Many Java developers are very familiar with the famous <strong class="bold">Null Pointer Exception</strong> that was a <a id="_idIndexMarker005"/>source of many bugs and issues in applications.  Kotlin was designed with null safety in mind. Variables that can have null values are indicated when declaring them, and before using these variables, the Kotlin compiler enforces checks for <a id="_idIndexMarker006"/>nullability, thereby reducing the number of exceptions and crashes.</li>
				<li><strong class="bold">Coroutines support</strong>: Kotlin has built-in support for Kotlin coroutines. Coroutines are lightweight threads that you can use to perform asynchronous operations. It’s easy to understand and use them in your applications.</li>
				<li><code>equals()</code>, <code>hashCode()</code>, and <code>toString()</code> methods, reducing the amount of boilerplate code required.</li>
				<li><strong class="bold">Extension functions</strong>: Kotlin allows developers to add functions to existing classes without inheriting from them, through extension functions. This makes it easier to add functionality to existing classes and reduces the need for boilerplate code.</li>
				<li><strong class="bold">Smart casting</strong>: Kotlin’s smart casting system makes it possible to cast variables without the need for an explicit cast. The compiler automatically detects when a variable can be safely cast and performs the cast automatically.</li>
			</ul>
			<p>JetBrains is also the company behind IntelliJ IDEA. The language support in this <strong class="bold">Integrated Development Environment</strong> (<strong class="bold">IDE</strong>) is also<a id="_idIndexMarker007"/> great.</p>
			<p> Kotlin has evolved over the years to support the following different platforms:</p>
			<ul>
				<li><strong class="bold">Kotlin Multiplatform</strong>: This is<a id="_idIndexMarker008"/> used to develop applications that target different platforms such as Android, iOS, and web applications</li>
				<li><strong class="bold">Kotlin for server side</strong>: This is<a id="_idIndexMarker009"/> used to write backend applications and a number of frameworks to support server-side development</li>
				<li><strong class="bold">Kotlin for Android</strong>: Google<a id="_idIndexMarker010"/> has supported Kotlin as a first-class language for Android develop<a id="_idTextAnchor019"/>ment since 2017</li>
				<li><strong class="bold">Kotlin for JavaScript</strong>: This provides support for writing Kotlin code that is transpiled to compatible JavaScript<a id="_idIndexMarker011"/> libraries</li>
				<li><strong class="bold">Kotlin/Native</strong>: This compiles Kotlin <a id="_idIndexMarker012"/>code to native binaries and runs<a id="_idIndexMarker013"/> without a <strong class="bold">Java Virtual </strong><strong class="bold">Machine</strong> (<strong class="bold">JVM</strong>)</li>
				<li><strong class="bold">Kotlin for data science</strong>: You can <a id="_idIndexMarker014"/>use Kotlin to build and explore data pipelines</li>
			</ul>
			<p>In summary, Kotlin provides a more modern and concise approach to programming than Java while still maintaining interoperability with existing Java libraries and code. In addition, you can write Kotlin code and target different platforms.</p>
			<p>Now that we have got the gist of Kotlin and its various features, let’s move on to the next section where we will understand Kotlin as a programming language and understand Kotlin syntax, types, functions, and classes.</p>
			<h1 id="_idParaDest-19">Kotlin <a id="_idTextAnchor020"/>syntax, types, functions and classes</h1>
			<p>In this section, we’ll be looking at<a id="_idIndexMarker015"/> Kotlin syntax and familiarize ourselves with the language. Kotlin is a strongly typed language. The type of a variable is determined at the time of compilation. Kotlin has a rich type system that has the following types:</p>
			<ul>
				<li><code>String?</code>. Non-nullable types are normal types without any operator at the end – for example, <code>String</code>.</li>
				<li><strong class="bold">Basic types</strong>: These<a id="_idIndexMarker017"/> types are similar to Java. Examples include Int, Long, Boolean, Double, and Char.</li>
				<li><code>class</code> keyword and you can add methods, properties, and constructors.</li>
				<li><strong class="bold">Arrays</strong>: There is support for both <a id="_idIndexMarker019"/>primitive and object arrays. To declare a primitive array, you specify the type and size, as follows:<pre class="source-code">
val shortArray = ShortArray(10)
val recipes = arrayOf("Chicken Soup", "Beef Stew", "Tuna Casserole")</pre><p class="list-inset">Kotlin automatically infers the type when you don’t specify it.</pre></li>				<li><strong class="bold">Collections</strong>: Kotlin has a<a id="_idIndexMarker020"/> rich collection of APIs providing types such as sets, maps, and lists. They’re designed to be concise and expressive, and the language offers a wide range of operations for sorting, filtering, mapping, and many more.</li>
				<li><code>Enum</code> keyword for you to declare enumerations.</li>
				<li><code>(Boolean) -&gt; Unit</code> shorthand notation. This example takes a <code>Boolean</code> argument and returns a <code>Unit</code> value.</li>
			</ul>
			<p>We’ve learned the different types available in Kotlin, and we’ll use this knowledge in the next section to define some of these types.</p>
			<h2 id="_idParaDest-20"><a id="_idTextAnchor021"/>Creating a Kotlin project</h2>
			<p>Follow these steps to create<a id="_idIndexMarker023"/> your first Kotlin project:</p>
			<ol>
				<li>Open IntelliJ IDEA. On the welcome screen, click on <strong class="bold">New Project</strong>. You’ll be presented with a dialog to create your new project as shown in the following figure:</li>
			</ol>
			<div><div><img src="img/B19779_01_01.jpg" alt="Figure 1.1 – New Project dialog" width="780" height="609"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.1 – New Project dialog</p>
			<p class="list-inset">Let’s work through the options in the dialog shown in <em class="italic">Figure 1</em><em class="italic">.1 </em>as follows:</p>
			<ol>
				<li class="upper-roman">You start by giving the project a name. In this case, it’s <code>chapterone</code>.</li>
				<li class="upper-roman">You also specify the location of your project. This is normally where you store your working projects. Change the directory to your preferred one.</li>
				<li class="upper-roman">Next, specify your target language from the options provided. In this case, we opt for <strong class="bold">Kotlin</strong>.</li>
				<li class="upper-roman">In the next step, specify your build system. We specify <strong class="bold">Gradle</strong>.</li>
				<li class="upper-roman">We also <a id="_idIndexMarker024"/>need to specify the Java version that our project is going to use. In this case, it’s Java <strong class="bold">11</strong>.</li>
				<li class="upper-roman">Next, you specify the Gradle DSL to use. For this project, we’ve chosen to use <strong class="bold">Kotlin</strong>.</li>
				<li class="upper-roman">Lastly, you specify the group and artifact IDs that, when combined, form a unique identifier for your project.</li>
			</ol>
			<ol>
				<li value="2">Click on <strong class="bold">Create</strong> to finalize creating your new project. The IDE will create your project, which might take a <a id="_idTextAnchor022"/>few minutes. Once done, you’ll see your project as follows:</li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div><div><img src="img/B19779_01_02.jpg" alt="Figure 1.2 – Project structure" width="911" height="426"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.2 – Project structure</p>
			<p class="list-inset">The IDE creates the project with the project structure seen in <em class="italic">Figure 1</em><em class="italic">.2</em>. We are mostly interested in the <code>src/main/kotlin</code> package, which is where we’ll add our Kotlin files.</p>
			<ol>
				<li value="3">Start by right-clicking the <code>src/main/kotlin</code> package.</li>
				<li>Select <code>Main</code>. The IDE will generate a <code>Main.kt</code> file.</li>
			</ol>
			<p>Now that we’ve created our first Kotlin project and added a Kotlin file, in the next section, we will create functions in this file.</p>
			<h2 id="_idParaDest-21"><a id="_idTextAnchor023"/>Creating functions</h2>
			<p>In Kotlin, a function is a block of code that does a specific task. We use the <code>fun</code> keyword to define functions. Function<a id="_idIndexMarker026"/> names should be in camel case and descriptive to indicate what the function is doing. Functions can take arguments and re<a id="_idTextAnchor024"/>turn values.</p>
			<p>Create the <code>main()</code> function in your <code>Main.kt</code> file as follows:</p>
			<pre class="source-code">
fun main() {
    println("Hello World!")
}</pre>			<p>In the preceding code, we’ve used the <code>fun</code> keyword to define a function with the name <code>main</code>. Inside the function, we have a <code>println</code> statement that prints the message <code>"</code><code>Hello Word!"</code>.</p>
			<p>You can run the function by pressing the green run icon to the right of the function.  You’ll see the console window pop up, displaying the message <code>"</code><code>Hello World!"</code>.</p>
			<p>We’ve learned how to create functions and print output to the console. In the next section, we’ll learn how to create classes in Kotlin.</p>
			<h2 id="_idParaDest-22"><a id="_idTextAnchor025"/>Creating classes</h2>
			<p>To declare a class<a id="_idIndexMarker027"/> in Kotlin, we have the <code>class</code> keyword. We’re going to create a <code>Recipe</code> class as follows:</p>
			<pre class="source-code">
class Recipe {
    private val ingredients = mutableListOf&lt;String&gt;()
    fun addIngredient(name: String) {
        ingredients.add(name)
    }
    fun getIngredients(): List&lt;String&gt; {
        return ingredients
    }
}</pre>			<p>Let’s break down the preceding class:</p>
			<ul>
				<li>We’ve called the class <code>Recipe</code> and it has no constructor.</li>
				<li>Inside the class, we have a member variable, <code>ingredients</code>, which is a <code>MutableList</code> of Strings. It’s mutable to allow us to add more items to the list. Defining variables in a class like this allows us to be able to access the variable anywhere in the<a id="_idIndexMarker028"/> class.</li>
				<li>We have <code>addIngredient(name: String)</code>, which takes in a name as an argument. Inside the function, we add the argument to our ingredients list.</li>
				<li>Lastly, we have the <code>getIngredients()</code> function, which returns an immutable list of strings. It simply returns the value of our ingredients list.</li>
			</ul>
			<p>To be able to use the class, we have to modify our main function as follows:</p>
			<pre class="source-code">
fun main() {
    val recipe = Recipe()
    recipe.addIngredient("Rice")
    recipe.addIngredient("Chicken")
    println(recipe.getIngredients())
}</pre>			<p>The changes can be explained as follows:</p>
			<ul>
				<li>First, we create a new instance of the <code>Recipe</code> class and assign it to the <code>recipe</code> variable</li>
				<li>Then, we call the <code>addIngredient</code> method on the <code>recipe</code> variable and pass in the string <code>Rice</code></li>
				<li>Again, we call the <code>addIngredient</code> method on the <code>recipe</code> variable and pass in the string <code>Chicken</code></li>
				<li>Lastly, we call the <code>getIngredients</code> method on the <code>recipe</code> variable and print the result to the console</li>
			</ul>
			<p>Run the main <a id="_idIndexMarker029"/>function again and your output should be as follows:</p>
			<p class="IMG---Figure"> </p>
			<div><div><img src="img/B19779_01_03.jpg" alt="Figure 1.3 – Recipes" width="692" height="172"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.3 – Recipes</p>
			<p>As you can see from the preceding<a id="_idTextAnchor026"/> screenshot, the output is a list of ingredients that you added! Now you can prepare a nice rice and chicken meal, but in Kotlin!</p>
			<p>Kotlin has tons of features and we’ve barely scratched the surface. You can check out the official Kotlin documentation (<a href="https://kotlinlang.org/docs/home.html">https://kotlinlang.org/docs/home.html</a>) as well to learn more. You’ll also learn <a id="_idIndexMarker030"/>more features as you go deeper into this book.</p>
			<p>We’ve learned how to create classes, define top-level variables, and add functions to our class. This helps us understand how classes in Kotlin work. In the next section, we will learn how to migrate a Java class to Kotlin and some of the tools available to use in the migration.</p>
			<h1 id="_idParaDest-23"><a id="_idTextAnchor027"/>Migrating from Java to Kotlin</h1>
			<p>Are you a Java developer and <a id="_idIndexMarker031"/>have your apps in Java? Are you wondering how<a id="_idIndexMarker032"/> you could get started with Kotlin? Worry not, this is your section. Kotlin offers two ways for you:</p>
			<ul>
				<li><strong class="bold">Java-to-Kotlin migration</strong>: The IDE that we are using, IntelliJ IDEA, has a tool for converting existing Java files to Kotlin.</li>
				<li><strong class="bold">Interoperability</strong>: Kotlin is highly interoperable with Java code, meaning you can have both Java and Kotlin code in the same project. You can continue using your favorite Java libraries<a id="_idIndexMarker033"/> in your Kotlin projects.</li>
			</ul>
			<p>Let’s see how to migrate a<a id="_idIndexMarker034"/> sample Java class to Kotlin using IntelliJ IDEA:</p>
			<ol>
				<li>Inside <code>src/main/kotlin</code>, open the <code>Song</code> class, which has a number of Java functions.</li>
				<li>Right-click the file and you’ll see the <strong class="bold">Convert Java to Kotlin</strong> option at the bottom. Select this and you’ll be presented the following confirmation dialog:</li>
			</ol>
			<p class="IMG---Figure">   </p>
			<div><div><img src="img/B19779_01_04.jpg" alt="Figure 1.4 – Confirmation dialog" width="405" height="132"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 1.4 – Confirmation dialog</p>
			<p>At times after a conversion, you might need to make some corrections and that’s why we have this dialog. Click <strong class="bold">Yes</strong> to proceed and you’ll see your code is now in Kotlin. This is a useful feature that handles a major part of the conversion to Kotlin and you also learn about the syntax.</p>
			<p>Now that we’ve learned how to migrate Java code to Kotlin, in the next section we will cover some of the features of Kotlin that make it useful for Android developers.</p>
			<h1 id="_idParaDest-24"><a id="_idTextAnchor028"/>Kotlin features for Android developers</h1>
			<p>Now that you have had an introduction to Kotlin, let’s look at why Kotlin is a great language specifically for Android development.</p>
			<p>Google announced Kotlin as a <a id="_idIndexMarker035"/>first-class language for writing Android apps back in 2017. Since then, there has been lots of work done to make sure that developers have all they need to develop Android apps in Kotlin. Here are some of the features that developers can benefit from:</p>
			<ul>
				<li><strong class="bold">Improved developer productivity</strong>: Kotlin’s concise and expressive syntax can help developers write code faster and with fewer errors, which can ultimately improve developer productivity.</li>
				<li><strong class="bold">Null safety</strong>: Since Kotlin is written with nullability in mind, it helps us to avoid crashes related to the Null Pointer Exception.</li>
				<li><strong class="bold">IDE support</strong>: IDE support has been continuously improving. Android Studio, which is built on top of IntelliJ IDEA, has been receiving tons of features such as improved autocompletion support to improve the Kotlin experience.</li>
				<li><strong class="bold">Jetpack libraries</strong>: Jetpack libraries are available in Kotlin, and older ones are being rewritten with Kotlin. These are a set of libraries and tools to help Android developers write less code. They address common developer pain points and increase developer efficiency.</li>
				<li><strong class="bold">Jetpack Compose</strong>: Jetpack Compose, a new UI framework, is completely written in Kotlin and takes advantage of features of the Kotlin language. It’s a declarative UI framework that makes it easy for Android developers to build beautiful UIs for their apps.</li>
				<li><strong class="bold">Kotlin Gradle DSL</strong>: You are now able to write your Gradle files in Kotlin.</li>
				<li><code>ViewModel</code> class has <code>viewModelScope</code> that you can use to scope coroutines in the lifecycle of the <code>ViewModel</code>. This aligns with the Structured Concurrency principles for coroutines. This helps cancel all coroutines when they’re no longer needed. Some libraries including Room, Paging 3, and DataStore also support Kotlin coroutines.</li>
				<li><strong class="bold">Support from Google</strong>: Google continues to invest in Kotlin. Currently, there are resources ranging from articles to code labs, documentation, videos, and tutorials from the Android DevRel team at Google to assist you in learning new libraries and architecture for Android Development.</li>
				<li><strong class="bold">Activ<a id="_idTextAnchor029"/>e community and tooling</strong>: Kotlin has a vibrant and active community of developers, which <a id="_idIndexMarker036"/>means that there are plenty of unofficial resources, libraries, and tools available to help with Android development.</li>
			</ul>
			<h1 id="_idParaDest-25"><a id="_idTextAnchor030"/>Summary</h1>
			<p>In this chapter, we learned about the Kotlin programming language and its features. We explored the Kotlin features that are useful for Android development and why it’s important to Android developers. Additionally, we covered how to migrate from Java to Kotlin and some useful tips for developers coming from Java backgrounds.</p>
			<p>In the next chapter, we’ll learn how to create Android apps with Android Studio. We will explore some of the features that Android Studio offers and learn some tips and shortcuts.</p>
		</div>
	</div></div></body></html>