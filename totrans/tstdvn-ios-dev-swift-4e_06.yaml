- en: '*Chapter 4*: The App We Are Going to Build'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*ç¬¬å››ç« *ï¼šæˆ‘ä»¬å°†è¦æ„å»ºçš„åº”ç”¨'
- en: In the previous chapters, you learned how to write unit tests and saw an easy
    example of **test-driven development** (**TDD**). When starting TDD, writing unit
    tests is easy for most people. The hard part is transferring knowledge from writing
    tests to driving development. What can be assumed? What should be done before
    we write the first test? What should be tested to end up with a complete app?
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œå¹¶çœ‹åˆ°äº†**æµ‹è¯•é©±åŠ¨å¼€å‘**ï¼ˆ**TDD**ï¼‰çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚å½“å¼€å§‹TDDæ—¶ï¼Œå¯¹å¤§å¤šæ•°äººæ¥è¯´ç¼–å†™å•å…ƒæµ‹è¯•å¾ˆå®¹æ˜“ã€‚å›°éš¾çš„éƒ¨åˆ†æ˜¯å°†çŸ¥è¯†ä»ç¼–å†™æµ‹è¯•è½¬ç§»åˆ°é©±åŠ¨å¼€å‘ã€‚å¯ä»¥å‡è®¾ä»€ä¹ˆï¼Ÿåœ¨æˆ‘ä»¬ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•ä¹‹å‰åº”è¯¥åšä»€ä¹ˆï¼Ÿæˆ‘ä»¬åº”è¯¥æµ‹è¯•ä»€ä¹ˆæ‰èƒ½æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ï¼Ÿ
- en: As a developer, you are used to thinking in terms of code. When you see a feature
    on the requirement list for an app, your brain already starts to lay out the code
    for this feature. For recurring problems in iOS development (such as building
    table views), you most probably have already developed your own best practices.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºå¼€å‘è€…ï¼Œä½ ä¹ æƒ¯äºä»ä»£ç çš„è§’åº¦æ€è€ƒã€‚å½“ä½ çœ‹åˆ°åº”ç”¨éœ€æ±‚åˆ—è¡¨ä¸Šçš„ä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œä½ çš„å¤§è„‘å·²ç»å¼€å§‹ä¸ºè¿™ä¸ªåŠŸèƒ½è§„åˆ’ä»£ç ã€‚å¯¹äºiOSå¼€å‘ä¸­åå¤å‡ºç°çš„é—®é¢˜ï¼ˆå¦‚æ„å»ºè¡¨æ ¼è§†å›¾ï¼‰ï¼Œä½ å¾ˆå¯èƒ½å·²ç»å¼€å‘äº†è‡ªå·±çš„æœ€ä½³å®è·µã€‚
- en: In TDD, you should not think about the code while working on the test. The tests
    have to describe what the unit under test should do and not how it should do it.
    It should be possible to change the implementation without breaking the tests.
    Thinking like this is the hard part of TDD. You'll need practice before this becomes
    natural.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨TDDä¸­ï¼Œä½ åœ¨ç¼–å†™æµ‹è¯•æ—¶ä¸åº”è€ƒè™‘ä»£ç ã€‚æµ‹è¯•å¿…é¡»æè¿°è¢«æµ‹è¯•å•å…ƒåº”è¯¥åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯å®ƒåº”è¯¥å¦‚ä½•åšã€‚åº”è¯¥èƒ½å¤Ÿåœ¨ä¸ç ´åæµ‹è¯•çš„æƒ…å†µä¸‹æ›´æ”¹å®ç°ã€‚è¿™ç§æ€ç»´æ–¹å¼æ˜¯TDDçš„éš¾ç‚¹ã€‚ä½ éœ€è¦ç»ƒä¹ æ‰èƒ½ä½¿å®ƒå˜å¾—è‡ªç„¶ã€‚
- en: To practice this development approach, we will develop a simple to-do list app
    in the remainder of this book. It is, on purpose, a boring and easy app. We want
    to concentrate on the TDD workflow, not complex implementations. An interesting
    app would distract from what is important in this bookâ€”how to perform TDD.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç»ƒä¹ è¿™ç§å¼€å‘æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åœ¨è¿™æœ¬ä¹¦çš„å‰©ä½™éƒ¨åˆ†å¼€å‘ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹åˆ—è¡¨åº”ç”¨ã€‚æ•…æ„è®©å®ƒå˜å¾—æ— èŠä¸”ç®€å•ã€‚æˆ‘ä»¬æƒ³ä¸“æ³¨äºTDDå·¥ä½œæµç¨‹ï¼Œè€Œä¸æ˜¯å¤æ‚çš„å®ç°ã€‚ä¸€ä¸ªæœ‰è¶£çš„åº”ç”¨ä¼šåˆ†æ•£æœ¬ä¹¦çš„é‡ç‚¹â€”â€”å¦‚ä½•æ‰§è¡ŒTDDã€‚
- en: This chapter introduces the app we are going to build and shows the views that
    the finished app will have.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« ä»‹ç»äº†æˆ‘ä»¬å°†è¦æ„å»ºçš„åº”ç”¨ï¼Œå¹¶å±•ç¤ºäº†å®Œæˆåº”ç”¨å°†æ‹¥æœ‰çš„è§†å›¾ã€‚
- en: 'These are the main topics of this chapter:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æœ¬ç« çš„ä¸»è¦ä¸»é¢˜ï¼š
- en: A list of to-do items
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¾…åŠäº‹é¡¹åˆ—è¡¨
- en: A view for the details of a to-do item
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¾…åŠäº‹é¡¹è¯¦æƒ…è§†å›¾
- en: A view to add to-do items
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ·»åŠ å¾…åŠäº‹é¡¹çš„è§†å›¾
- en: The structure of the app
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åº”ç”¨çš„ç»“æ„
- en: Getting started in Xcode
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨ Xcode ä¸­å¼€å§‹
- en: Technical requirements
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æŠ€æœ¯è¦æ±‚
- en: 'All the code in this chapter is uploaded (in complete form) here:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬ç« ä¸­çš„æ‰€æœ‰ä»£ç éƒ½å·²ä¸Šä¼ ï¼ˆå®Œæ•´å½¢å¼ï¼‰åœ¨æ­¤ï¼š
- en: '[https://github.com/PacktPublishing/Test-Driven-iOS-Development-with-Swift-Fourth-Edition/tree/main/chapter04](https://github.com/PacktPublishing/Test-Driven-iOS-Development-with-Swift-Fourth-Edition/tree/main/chapter04)'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://github.com/PacktPublishing/Test-Driven-iOS-Development-with-Swift-Fourth-Edition/tree/main/chapter04](https://github.com/PacktPublishing/Test-Driven-iOS-Development-with-Swift-Fourth-Edition/tree/main/chapter04)'
- en: A list of to-do items
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¾…åŠäº‹é¡¹åˆ—è¡¨
- en: 'When starting the app (the one we are going to build), the user sees a list
    of to-do items on the screen of their iOS device. The items in the list consist
    of a title, an optional location, and the due date. New items can be added to
    the list by using an add (**+**) button, which is shown in the navigation bar
    of the view. The task list view will look like this:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: å½“å¯åŠ¨åº”ç”¨ï¼ˆæˆ‘ä»¬å°†è¦æ„å»ºçš„åº”ç”¨ï¼‰æ—¶ï¼Œç”¨æˆ·ä¼šåœ¨ä»–ä»¬çš„iOSè®¾å¤‡å±å¹•ä¸Šçœ‹åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚åˆ—è¡¨ä¸­çš„é¡¹ç›®åŒ…æ‹¬æ ‡é¢˜ã€å¯é€‰çš„ä½ç½®å’Œæˆªæ­¢æ—¥æœŸã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨æ·»åŠ ï¼ˆ**+**ï¼‰æŒ‰é’®å°†æ–°é¡¹ç›®æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè¯¥æŒ‰é’®æ˜¾ç¤ºåœ¨è§†å›¾çš„å¯¼èˆªæ ä¸­ã€‚ä»»åŠ¡åˆ—è¡¨è§†å›¾å°†çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '![Figure 4.1 â€“ A list of to-do items'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾ 4.1 â€“ å¾…åŠäº‹é¡¹åˆ—è¡¨'
- en: '](img/Figure_4.01_B18127.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾ 4.01 â€“ å¾…åŠäº‹é¡¹åˆ—è¡¨](img/Figure_4.01_B18127.jpg)'
- en: Figure 4.1 â€“ A list of to-do items
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ 4.1 â€“ å¾…åŠäº‹é¡¹åˆ—è¡¨
- en: 'As a user, I have the following requirements:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æœ‰ä»¥ä¸‹è¦æ±‚ï¼š
- en: I want to see a list of to-do items when I open the app.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³åœ¨æ‰“å¼€åº”ç”¨æ—¶çœ‹åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚
- en: I want to add to-do items to the list.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³å°†å¾…åŠäº‹é¡¹æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚
- en: 'In a to-do list app, the user will obviously need to be able to check off items
    when they are finished. The checked items are shown below the unchecked items,
    and it is possible to uncheck them again. The app uses the **Delete** button in
    the UI of the table view to check and uncheck items. Checked items will be put
    at the end of the list in a section with the **Done** header. The UI for the to-do
    item list will look like this:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¾…åŠäº‹é¡¹åˆ—è¡¨åº”ç”¨ä¸­ï¼Œç”¨æˆ·æ˜¾ç„¶éœ€è¦åœ¨å®Œæˆäº‹é¡¹æ—¶èƒ½å¤Ÿå‹¾é€‰å®ƒä»¬ã€‚å‹¾é€‰çš„äº‹é¡¹ä¼šæ˜¾ç¤ºåœ¨æœªå‹¾é€‰äº‹é¡¹ä¸‹æ–¹ï¼Œå¹¶ä¸”å¯ä»¥å†æ¬¡å–æ¶ˆå‹¾é€‰ã€‚åº”ç”¨ä½¿ç”¨è¡¨æ ¼è§†å›¾çš„ç”¨æˆ·ç•Œé¢ä¸­çš„**åˆ é™¤**æŒ‰é’®æ¥å‹¾é€‰å’Œå–æ¶ˆå‹¾é€‰äº‹é¡¹ã€‚å‹¾é€‰çš„äº‹é¡¹å°†è¢«æ”¾åœ¨åˆ—è¡¨æœ«å°¾çš„**å®Œæˆ**æ ‡é¢˜éƒ¨åˆ†ã€‚å¾…åŠäº‹é¡¹åˆ—è¡¨çš„ç”¨æˆ·ç•Œé¢çœ‹èµ·æ¥å¦‚ä¸‹ï¼š
- en: '![Figure 4.2 â€“ To-do items can be checked as Done'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾4.2 â€“ å¯ä»¥å‹¾é€‰å¾…åŠäº‹é¡¹ä¸ºå®Œæˆ'
- en: '](img/Figure_4.02_B18127.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.02_B18127.jpg)'
- en: Figure 4.2 â€“ To-do items can be checked as Done
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾4.2 â€“ å¯ä»¥å‹¾é€‰å¾…åŠäº‹é¡¹ä¸ºå®Œæˆ
- en: 'As a user, I have the following requirements:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æœ‰ä»¥ä¸‹è¦æ±‚ï¼š
- en: I want to check a to-do item to mark it as finished.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³è¦å‹¾é€‰ä¸€ä¸ªå¾…åŠäº‹é¡¹ä»¥æ ‡è®°å®ƒä¸ºå®Œæˆã€‚
- en: I want to see all the checked items following the unchecked items.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³è¦çœ‹åˆ°æ‰€æœ‰å‹¾é€‰çš„äº‹é¡¹éƒ½è·Ÿåœ¨æœªå‹¾é€‰äº‹é¡¹ä¹‹åã€‚
- en: I want to uncheck a to-do item.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³è¦å–æ¶ˆå‹¾é€‰ä¸€ä¸ªå¾…åŠäº‹é¡¹ã€‚
- en: I want to delete all the to-do items.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³è¦åˆ é™¤æ‰€æœ‰å¾…åŠäº‹é¡¹ã€‚
- en: When the user taps an entry, the details of this entry are shown in the task
    detail view.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæ¡ç›®æ—¶ï¼Œè¯¥æ¡ç›®çš„è¯¦ç»†ä¿¡æ¯å°†åœ¨ä»»åŠ¡è¯¦æƒ…è§†å›¾ä¸­æ˜¾ç¤ºã€‚
- en: A view for the details of a to-do item
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¾…åŠäº‹é¡¹è¯¦æƒ…è§†å›¾
- en: 'The task detail view shows all the information that''s stored for a to-do item.
    The information consists of a title, due date, location (name and address), and
    a description. If an address is given, a map with an address is shown. The detail
    view also allows checking off the item as done. The **Details** view looks like
    this:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ä»»åŠ¡è¯¦æƒ…è§†å›¾æ˜¾ç¤ºäº†å­˜å‚¨åœ¨å¾…åŠäº‹é¡¹ä¸­çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä¿¡æ¯åŒ…æ‹¬æ ‡é¢˜ã€æˆªæ­¢æ—¥æœŸã€ä½ç½®ï¼ˆåç§°å’Œåœ°å€ï¼‰ä»¥åŠæè¿°ã€‚å¦‚æœæä¾›äº†åœ°å€ï¼Œåˆ™ä¼šæ˜¾ç¤ºå¸¦æœ‰åœ°å€çš„åœ°å›¾ã€‚è¯¦æƒ…è§†å›¾è¿˜å…è®¸å‹¾é€‰äº‹é¡¹ä¸ºå®Œæˆã€‚**è¯¦æƒ…**è§†å›¾çœ‹èµ·æ¥å¦‚ä¸‹ï¼š
- en: '![Figure 4.3 â€“ The view for the details of a to-do item'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾4.3 â€“ å¾…åŠäº‹é¡¹è¯¦æƒ…è§†å›¾'
- en: '](img/Figure_4.03_B18127.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.03_B18127.jpg)'
- en: Figure 4.3 â€“ The view for the details of a to-do item
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾4.3 â€“ å¾…åŠäº‹é¡¹è¯¦æƒ…è§†å›¾
- en: 'As a user, I have the following requirements:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æœ‰ä»¥ä¸‹è¦æ±‚ï¼š
- en: I have tapped a to-do item in the list and I want to see its details.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»äº†ä¸€ä¸ªå¾…åŠäº‹é¡¹ï¼Œå¹¶æƒ³è¦çœ‹åˆ°å®ƒçš„è¯¦æƒ…ã€‚
- en: I want to check a to-do item from its details view.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³è¦ä»è¯¦æƒ…è§†å›¾ä¸­å‹¾é€‰å¾…åŠäº‹é¡¹ã€‚
- en: You need to be able to add to-do items to the list. The next section shows what
    this input view will look like.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨éœ€è¦èƒ½å¤Ÿå°†å¾…åŠäº‹é¡¹æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚ä¸‹ä¸€èŠ‚å°†å±•ç¤ºè¿™ä¸ªè¾“å…¥è§†å›¾å°†çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚
- en: A view to add to-do items
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ·»åŠ å¾…åŠäº‹é¡¹çš„è§†å›¾
- en: 'When the user selects the add (**+**) button in the list view, the task input
    view is shown. The user can add information for the task. Only the title is required.
    The **Save** button can only be selected when a title is given. It is not possible
    to add a task that is already on the list. The **Cancel** button dismisses the
    view. The task input view will look like this:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç”¨æˆ·åœ¨åˆ—è¡¨è§†å›¾ä¸­é€‰æ‹©æ·»åŠ ï¼ˆ**+**ï¼‰æŒ‰é’®æ—¶ï¼Œå°†æ˜¾ç¤ºä»»åŠ¡è¾“å…¥è§†å›¾ã€‚ç”¨æˆ·å¯ä»¥ä¸ºä»»åŠ¡æ·»åŠ ä¿¡æ¯ã€‚æ ‡é¢˜æ˜¯å¿…éœ€çš„ã€‚åªæœ‰æä¾›äº†æ ‡é¢˜æ—¶ï¼Œæ‰èƒ½é€‰æ‹©**ä¿å­˜**æŒ‰é’®ã€‚æ— æ³•æ·»åŠ åˆ—è¡¨ä¸­å·²ç»å­˜åœ¨çš„ä»»åŠ¡ã€‚**å–æ¶ˆ**æŒ‰é’®å°†å…³é—­è§†å›¾ã€‚ä»»åŠ¡è¾“å…¥è§†å›¾å°†çœ‹èµ·æ¥å¦‚ä¸‹ï¼š
- en: '![Figure 4.4 â€“ The view to add a to-do item to the list'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾4.4 â€“ æ·»åŠ å¾…åŠäº‹é¡¹åˆ°åˆ—è¡¨çš„è§†å›¾'
- en: '](img/Figure_4.04_B18127.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_4.04_B18127.jpg)'
- en: Figure 4.4 â€“ The view to add a to-do item to the list
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾4.4 â€“ æ·»åŠ å¾…åŠäº‹é¡¹åˆ°åˆ—è¡¨çš„è§†å›¾
- en: 'As a user, I have the following requirements:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æœ‰ä»¥ä¸‹è¦æ±‚ï¼š
- en: Given that I tapped the add (**+**) button in the item list, I want to see a
    form to put in the details (title, optional date, optional location name, optional
    address, and optional description) of a to-do item.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘åœ¨é¡¹ç›®åˆ—è¡¨ä¸­ç‚¹å‡»äº†æ·»åŠ ï¼ˆ**+**ï¼‰æŒ‰é’®ï¼Œæˆ‘æƒ³è¦çœ‹åˆ°ä¸€ä¸ªè¡¨å•æ¥è¾“å…¥å¾…åŠäº‹é¡¹çš„è¯¦æƒ…ï¼ˆæ ‡é¢˜ã€å¯é€‰æ—¥æœŸã€å¯é€‰ä½ç½®åç§°ã€å¯é€‰åœ°å€å’Œå¯é€‰æè¿°ï¼‰ã€‚
- en: I want to add a to-do item to the list of to-do items by tapping on the **Save**
    button.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘æƒ³è¦é€šè¿‡ç‚¹å‡»**ä¿å­˜**æŒ‰é’®å°†å¾…åŠäº‹é¡¹æ·»åŠ åˆ°å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­ã€‚
- en: We will not implement the editing and deletion of tasks, but when you have worked
    through this book completely, it will be easy for you to add this feature yourself
    by writing the tests first.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ä¸ä¼šå®ç°ä»»åŠ¡çš„ç¼–è¾‘å’Œåˆ é™¤åŠŸèƒ½ï¼Œä½†å½“ä½ å®Œå…¨é˜…è¯»å®Œè¿™æœ¬ä¹¦åï¼Œé€šè¿‡å…ˆç¼–å†™æµ‹è¯•ï¼Œä½ å°†å¾ˆå®¹æ˜“è‡ªå·±æ·»åŠ è¿™ä¸ªåŠŸèƒ½ã€‚
- en: Keep in mind that we will not test the look and design of the app. Unit tests
    cannot figure out whether an app looks like it was intended. Unit tests can test
    features, and these are independent of their presentation. In principle, it would
    be possible to write unit tests for the position and color of UI elements, but
    such things are very likely to change a lot in the early stages of development.
    We do not want to have failing tests only because a button has moved 10 points.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·è®°ä½ï¼Œæˆ‘ä»¬ä¸ä¼šæµ‹è¯•åº”ç”¨çš„å¤–è§‚å’Œè®¾è®¡ã€‚å•å…ƒæµ‹è¯•æ— æ³•ç¡®å®šåº”ç”¨æ˜¯å¦çœ‹èµ·æ¥ç¬¦åˆé¢„æœŸã€‚å•å…ƒæµ‹è¯•å¯ä»¥æµ‹è¯•åŠŸèƒ½ï¼Œè€Œè¿™äº›åŠŸèƒ½ä¸å…¶å±•ç¤ºæ˜¯ç‹¬ç«‹çš„ã€‚åŸåˆ™ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºUIå…ƒç´ çš„å®šä½å’Œé¢œè‰²ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œä½†è¿™äº›äº‹æƒ…åœ¨å¼€å‘æ—©æœŸé˜¶æ®µå¾ˆå¯èƒ½ä¼šæœ‰å¾ˆå¤§å˜åŒ–ã€‚æˆ‘ä»¬ä¸å¸Œæœ›ä»…ä»…å› ä¸ºæŒ‰é’®ç§»åŠ¨äº†10ä¸ªç‚¹å°±å‡ºç°å¤±è´¥çš„æµ‹è¯•ã€‚
- en: However, we will test whether the UI elements are present in the view. If your
    user cannot see the information for the tasks or if it is not possible to add
    all the information of a task, then the app does not meet the requirements.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæˆ‘ä»¬å°†æµ‹è¯•è§†å›¾ä¸­çš„UIå…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä½ çš„ç”¨æˆ·çœ‹ä¸åˆ°ä»»åŠ¡çš„ä¿¡æ¯ï¼Œæˆ–è€…æ— æ³•æ·»åŠ ä»»åŠ¡çš„æ‰€æœ‰ä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥åº”ç”¨ä¸ç¬¦åˆè¦æ±‚ã€‚
- en: In the next section, we will discuss the structure of the app we are going to
    build.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºæˆ‘ä»¬å°†è¦æ„å»ºçš„åº”ç”¨çš„ç»“æ„ã€‚
- en: The structure of the app
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åº”ç”¨ç»“æ„
- en: 'Before we start to implement the different views of our to-do app, we need
    to think about the structure of our app. The app is quite simple on purpose to
    help keep the focus on the main topic of this book: building an app using TDD.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬å¼€å§‹å®ç°å¾…åŠåº”ç”¨çš„ä¸åŒè§†å›¾ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åº”ç”¨çš„ç»“æ„ã€‚æ•…æ„ä½¿åº”ç”¨ä¿æŒç®€å•ï¼Œä»¥å¸®åŠ©é›†ä¸­å…³æ³¨æœ¬ä¹¦çš„ä¸»è¦ä¸»é¢˜ï¼šä½¿ç”¨TDDæ„å»ºåº”ç”¨ã€‚
- en: The table view controller, the delegate, and the data source
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è¡¨æ ¼è§†å›¾æ§åˆ¶å™¨ã€ä»£ç†å’Œæ•°æ®æº
- en: In iOS apps, data is often presented using a table view. Table views are highly
    optimized for performance; they are easy to use and implement. We will use a table
    view for the list of to-do items.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨iOSåº”ç”¨ä¸­ï¼Œæ•°æ®é€šå¸¸ä½¿ç”¨è¡¨æ ¼è§†å›¾æ¥å±•ç¤ºã€‚è¡¨æ ¼è§†å›¾åœ¨æ€§èƒ½ä¸Šé«˜åº¦ä¼˜åŒ–ï¼›å®ƒä»¬æ˜“äºä½¿ç”¨å’Œå®ç°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¡¨æ ¼è§†å›¾æ¥å±•ç¤ºå¾…åŠäº‹é¡¹åˆ—è¡¨ã€‚
- en: 'A table view is usually represented by `UITableViewController`, which is also
    the data source and delegate for the table view. This often leads to a massive
    table view controller, because it is doing too much: presenting the view, navigating
    to other view controllers, and managing the presentation of the data in the table
    view.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨æ ¼è§†å›¾é€šå¸¸ç”±`UITableViewController`è¡¨ç¤ºï¼Œå®ƒä¹Ÿæ˜¯è¡¨æ ¼è§†å›¾çš„æ•°æ®æºå’Œä»£ç†ã€‚è¿™é€šå¸¸ä¼šå¯¼è‡´ä¸€ä¸ªåºå¤§çš„è¡¨æ ¼è§†å›¾æ§åˆ¶å™¨ï¼Œå› ä¸ºå®ƒåšäº†å¤ªå¤šäº‹æƒ…ï¼šå±•ç¤ºè§†å›¾ã€å¯¼èˆªåˆ°å…¶ä»–è§†å›¾æ§åˆ¶å™¨ï¼Œä»¥åŠç®¡ç†è¡¨æ ¼è§†å›¾ä¸­æ•°æ®çš„å±•ç¤ºã€‚
- en: To reduce the responsibility of the table view controller a bit, we will use
    the coordinator pattern. This way, a coordinator is responsible for navigating
    between different views of the app. As our app is quite simple, we will only need
    one coordinator for the whole app.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å‡è½»è¡¨æ ¼è§†å›¾æ§åˆ¶å™¨çš„è´£ä»»ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åè°ƒå™¨æ¨¡å¼ã€‚è¿™æ ·ï¼Œåè°ƒå™¨è´Ÿè´£åœ¨åº”ç”¨çš„ä¸åŒè§†å›¾ä¹‹é—´å¯¼èˆªã€‚ç”±äºæˆ‘ä»¬çš„åº”ç”¨ç›¸å½“ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªåè°ƒå™¨æ¥ç®¡ç†æ•´ä¸ªåº”ç”¨ã€‚
- en: 'The communication between the table view controller and the coordinator class
    will be defined using a protocol. Protocols define what the interface of a class
    looks like. This has a great benefit: if we need to replace an implementation
    with a better version (maybe because you have learned how to implement the feature
    in a better way), we only need to develop against the clear **application programming
    interface** (**API**). The inner workings of other classes do not matter.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨æ ¼è§†å›¾æ§åˆ¶å™¨ä¸åè°ƒå™¨ç±»ä¹‹é—´çš„é€šä¿¡å°†é€šè¿‡åè®®æ¥å®šä¹‰ã€‚åè®®å®šä¹‰äº†ä¸€ä¸ªç±»çš„æ¥å£çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚è¿™æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„ï¼šå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨æ›´å¥½çš„ç‰ˆæœ¬æ›¿æ¢å®ç°ï¼ˆå¯èƒ½æ˜¯å› ä¸ºä½ å­¦ä¼šäº†ä»¥æ›´å¥½çš„æ–¹å¼å®ç°åŠŸèƒ½ï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹æ¸…æ™°çš„**åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£**ï¼ˆ**API**ï¼‰è¿›è¡Œå¼€å‘ã€‚å…¶ä»–ç±»çš„å†…éƒ¨å·¥ä½œæ–¹å¼å¹¶ä¸é‡è¦ã€‚
- en: Table view cells
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è¡¨æ ¼è§†å›¾å•å…ƒæ ¼
- en: As you can see in the preceding screenshots, the to-do list items have a title
    and, optionally, they can have a due date and a location name. The table view
    cells should only show the set data. We will accomplish this by implementing our
    own custom table view cell.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰è¿°æˆªå›¾æ‰€ç¤ºï¼Œå¾…åŠäº‹é¡¹åˆ—è¡¨é¡¹æœ‰ä¸€ä¸ªæ ‡é¢˜ï¼Œå¹¶ä¸”å¯é€‰åœ°å¯ä»¥æœ‰ä¸€ä¸ªæˆªæ­¢æ—¥æœŸå’Œä½ç½®åç§°ã€‚è¡¨æ ¼è§†å›¾å•å…ƒæ ¼åº”ä»…æ˜¾ç¤ºè®¾ç½®çš„æ•°æ®ã€‚æˆ‘ä»¬å°†é€šè¿‡å®ç°æˆ‘ä»¬è‡ªå·±çš„è‡ªå®šä¹‰è¡¨æ ¼è§†å›¾å•å…ƒæ ¼æ¥å®Œæˆè¿™ä¸€ç‚¹ã€‚
- en: The model
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¨¡å‹
- en: The model of the app consists of the to-do item, the location, and an item manager,
    which allows the addition and removal of items and is also responsible for managing
    the items. Therefore, the controller will ask the item manager for items to present.
    The item manager will also be responsible for storing the items on disk.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: åº”ç”¨ç¨‹åºçš„æ¨¡å‹ç”±å¾…åŠäº‹é¡¹ã€ä½ç½®å’Œé¡¹ç›®ç®¡ç†è€…ç»„æˆï¼Œå®ƒå…è®¸æ·»åŠ å’Œåˆ é™¤é¡¹ç›®ï¼Œå¹¶è´Ÿè´£ç®¡ç†é¡¹ç›®ã€‚å› æ­¤ï¼Œæ§åˆ¶å™¨å°†å‘é¡¹ç›®ç®¡ç†è€…è¯·æ±‚è¦æ˜¾ç¤ºçš„é¡¹ç›®ã€‚é¡¹ç›®ç®¡ç†è€…è¿˜å°†è´Ÿè´£åœ¨ç£ç›˜ä¸Šå­˜å‚¨é¡¹ç›®ã€‚
- en: Beginners often tend to manage the model objects within the controller. Then,
    the controller has a reference to a collection of items, and the addition and
    removal of items are directly done by the controller. This is not recommended
    because if we decide to change the storage of items (for example, using core data),
    their addition and removal would have to be changed within the controller. It
    is difficult to keep an overview of such a class as it does many different unrelated
    things; for this reason, it can be a source of bugs.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: åˆå­¦è€…å¾€å¾€å€¾å‘äºåœ¨æ§åˆ¶å™¨å†…ç®¡ç†æ¨¡å‹å¯¹è±¡ã€‚ç„¶åï¼Œæ§åˆ¶å™¨æœ‰ä¸€ä¸ªå¯¹é¡¹ç›®é›†åˆçš„å¼•ç”¨ï¼Œé¡¹ç›®çš„æ·»åŠ å’Œåˆ é™¤ç›´æ¥ç”±æ§åˆ¶å™¨å®Œæˆã€‚è¿™ä¸è¢«æ¨èï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬å†³å®šæ›´æ”¹é¡¹ç›®çš„å­˜å‚¨ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨
    Core Dataï¼‰ï¼Œå®ƒä»¬çš„æ·»åŠ å’Œåˆ é™¤å¿…é¡»åœ¨æ§åˆ¶å™¨å†…è¿›è¡Œæ›´æ”¹ã€‚è¿™æ ·çš„ç±»å¾ˆéš¾ä¿æŒæ¦‚è§ˆï¼Œå› ä¸ºå®ƒåšäº†è®¸å¤šä¸åŒä¸”ä¸ç›¸å…³çš„äº‹æƒ…ï¼›å› æ­¤ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªé”™è¯¯æºã€‚
- en: It's much easier to have a clear interface between the controller and the model
    objects because if we need to change how the model objects are managed, the controller
    can stay the same. We could even replace the complete model layer if we just keep
    the interface the same. Later in the book, we will see that this decoupling also
    helps to make testing easier.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ§åˆ¶å™¨å’Œæ¨¡å‹å¯¹è±¡ä¹‹é—´æœ‰ä¸€ä¸ªæ¸…æ™°çš„æ¥å£è¦å®¹æ˜“å¾—å¤šï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬éœ€è¦æ›´æ”¹æ¨¡å‹å¯¹è±¡çš„ç®¡ç†æ–¹å¼ï¼Œæ§åˆ¶å™¨å¯ä»¥ä¿æŒä¸å˜ã€‚å¦‚æœæˆ‘ä»¬åªæ˜¯ä¿æŒæ¥å£ä¸å˜ï¼Œç”šè‡³å¯ä»¥æ›¿æ¢æ•´ä¸ªæ¨¡å‹å±‚ã€‚æœ¬ä¹¦çš„åé¢ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¿™ç§è§£è€¦ä¹Ÿæœ‰åŠ©äºä½¿æµ‹è¯•æ›´å®¹æ˜“ã€‚
- en: Other views
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å…¶ä»–è§†å›¾
- en: 'The app will have two more views: a task detail view and a task input view.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: åº”ç”¨ç¨‹åºå°†æœ‰ä¸¤ä¸ªé¢å¤–çš„è§†å›¾ï¼šä»»åŠ¡è¯¦æƒ…è§†å›¾å’Œä»»åŠ¡è¾“å…¥è§†å›¾ã€‚
- en: When the user taps a to-do item in the list, the details of the item are presented
    in the task detail view controller. From the **Details** screen, the user will
    be able to check an item.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç”¨æˆ·åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»å¾…åŠäº‹é¡¹æ—¶ï¼Œè¯¥äº‹é¡¹çš„è¯¦ç»†ä¿¡æ¯å°†åœ¨ä»»åŠ¡è¯¦æƒ…è§†å›¾æ§åˆ¶å™¨ä¸­æ˜¾ç¤ºã€‚ä»**è¯¦æƒ…**å±å¹•ï¼Œç”¨æˆ·å°†èƒ½å¤Ÿå‹¾é€‰ä¸€ä¸ªäº‹é¡¹ã€‚
- en: New to-do items will be added to the list through an input view. This view will
    be implemented using SwiftUI.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: æ–°çš„å¾…åŠäº‹é¡¹å°†é€šè¿‡è¾“å…¥è§†å›¾æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚æ­¤è§†å›¾å°†ä½¿ç”¨ SwiftUI å®ç°ã€‚
- en: The development strategy
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¼€å‘ç­–ç•¥
- en: In this book, we will build the app from the inside out. We will start with
    the model and then build the controllers and networking. At the end of the book,
    we will put everything together.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘ä»¬å°†ä»å†…åˆ°å¤–æ„å»ºåº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å°†ä»æ¨¡å‹å¼€å§‹ï¼Œç„¶åæ„å»ºæ§åˆ¶å™¨å’Œç½‘ç»œã€‚æœ¬ä¹¦çš„ç»“å°¾ï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰ä¸œè¥¿ç»„åˆåœ¨ä¸€èµ·ã€‚
- en: Usually, you would rather build apps feature-by-feature when doing TDD, but
    by separating based on layers instead of features, it is easier to follow and
    keep an overview of what is happening. When you later need to refresh your memory,
    the relevant information you need is easier to find.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œåœ¨è¿›è¡Œ TDD æ—¶ï¼Œä½ å¯èƒ½ä¼šæŒ‰åŠŸèƒ½ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ„å»ºåº”ç”¨ç¨‹åºï¼Œä½†é€šè¿‡æŒ‰å±‚è€Œä¸æ˜¯æŒ‰åŠŸèƒ½åˆ†ç¦»ï¼Œæ›´å®¹æ˜“è·Ÿè¸ªå’Œäº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚å½“ä½ åæ¥éœ€è¦åˆ·æ–°è®°å¿†æ—¶ï¼Œä½ éœ€è¦çš„ç›¸å…³ä¿¡æ¯æ›´å®¹æ˜“æ‰¾åˆ°ã€‚
- en: In the next section, we are going to set up the app in Xcode and tweak some
    Xcode behaviors.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¾ç½® Xcode ä¸­çš„åº”ç”¨ç¨‹åºå¹¶è°ƒæ•´ä¸€äº› Xcode çš„è¡Œä¸ºã€‚
- en: Getting started in Xcode
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨ Xcode ä¸­å¼€å§‹
- en: 'Now, let''s start our journey by creating a project that we will implement
    using TDD. Proceed as follows:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€ä¸ªé¡¹ç›®å¼€å§‹æˆ‘ä»¬çš„æ—…ç¨‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ TDD æ¥å®ç°å®ƒã€‚æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š
- en: Open Xcode and create a new iOS project using the **App** template.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ‰“å¼€ Xcode å¹¶ä½¿ç”¨**åº”ç”¨ç¨‹åº**æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°çš„ iOS é¡¹ç›®ã€‚
- en: In the `ToDo` as the product name, select the `Storyboard` interface and `Swift`
    as the language, and check the box next to **Include Tests**. Let the **Use Core
    Data** box stay unchecked.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨â€œ`ToDo`â€ä½œä¸ºäº§å“åç§°æ—¶ï¼Œé€‰æ‹©â€œ`Storyboard`â€ç•Œé¢å’Œâ€œ`Swift`â€ä½œä¸ºè¯­è¨€ï¼Œå¹¶å‹¾é€‰**åŒ…å«æµ‹è¯•**æ—è¾¹çš„æ¡†ã€‚è®©**ä½¿ç”¨ Core
    Data**æ¡†ä¿æŒæœªå‹¾é€‰ã€‚
- en: 'Xcode creates a small iOS project with three targets: one for the implementation
    code, one for the unit, and one for the UI tests. The template contains code that
    presents a single view on the screen.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: Xcode åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªç›®æ ‡çš„ iOS é¡¹ç›®ï¼šä¸€ä¸ªç”¨äºå®ç°ä»£ç ï¼Œä¸€ä¸ªç”¨äºå•å…ƒæµ‹è¯•ï¼Œä¸€ä¸ªç”¨äº UI æµ‹è¯•ã€‚æ¨¡æ¿åŒ…å«åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå•ä¸ªè§†å›¾çš„ä»£ç ã€‚
- en: 'To take a look at how the app target and test target fit together, select the
    project in the project navigator and then select the `ToDoTests` target. In the
    **General** tab, you''ll find a setting for the **Host Application** that the
    test target should be able to test. It looks like this:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.5 â€“ General settings for the test target'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_4.05_B18127.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: Figure 4.5 â€“ General settings for the test target
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: Xcode has already set up the test target correctly to allow the testing of the
    implementations that we will write to the app target.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: 'Unfortunately, Xcode also created a test target for UI tests. UI tests are
    too slow for TDD. To keep the feedback from the test running fast, we need to
    disable the UI tests for the main scheme. Click the scheme in the **Build** information
    bar at the top of the Xcode window and select the **Test** stage. Next, uncheck
    the box next to the UI test target. The process is illustrated in the following
    screenshot:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.6 â€“ Disabling the UI tests'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_4.06_B18127.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: Figure 4.6 â€“ Disabling the UI tests
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: Setting up useful Xcode behaviors for testing
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Xcode has a feature called **Behaviors**. With the use of behaviors and tabs,
    Xcode can show useful information depending on its state.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: Open the **Behaviors** window by navigating to **Xcode** | **Behaviors** | **Edit
    Behaviors**. On the left-hand side are the different stages for which you can
    add behaviors (**Build**, **Testing**, **Running**, and so on). These behaviors
    are useful when doing TDD.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: The behaviors shown here are those that I find useful. Play around with the
    settings to find the ones most useful for you. Overall, I recommend using behaviors
    because I think they speed up development.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: Useful build behaviors
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'When the building starts, Xcode compiles the files and links them together.
    To see what is going on, you can activate the **Build** log when the building
    starts. It is recommended that you open the **Build** log in a new tab because
    this allows you to switch back to the code editor when no error occurs during
    the build:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: Select the **Starts** stage and check **Show** for **window tab**.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Put the name `Log` into the **named** field or use an emoji.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check **Show** for **navigator** and **Issues**.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'At the bottom of the window, check **Navigate to** and select **current log**.
    After you have made these changes, the settings window will look like this:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.7 â€“ Behavior to show the build log when building starts'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_4.07_B18127.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: Figure 4.7 â€“ Behavior to show the build log when building starts
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
- en: Build and run to see what the behavior looks like.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Testing behaviors
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'I have a window tab for coding. The name of this tab is ğŸ¤“. Usually, in this
    tab, the test is open on the left-hand side, and in the **Assistant Editor** is
    the code to be tested (or in the case of TDD, the code to be written). It looks
    like this:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.8 â€“ The <?AID d83e?><?AID dd13?> tab'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_4.08_B18127.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: Figure 4.8 â€“ The ğŸ¤“ tab
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: When the test starts, we want to see the code editor again. So, we add a behavior
    to show the ğŸ¤“ tab. In addition to this, we want to see the **Test** navigator
    and debugger with the console view.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æµ‹è¯•å¼€å§‹æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å†æ¬¡çœ‹åˆ°ä»£ç ç¼–è¾‘å™¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ˜¾ç¤ºğŸ¤“æ ‡ç­¾çš„è¡Œä¸ºã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æƒ³çœ‹åˆ°å¸¦æœ‰æ§åˆ¶å°è§†å›¾çš„**æµ‹è¯•**å¯¼èˆªå™¨å’Œè°ƒè¯•å™¨ã€‚
- en: When the test succeeds, Xcode should show a bezel to notify us that all tests
    have passed. Navigate to the **Testing** | **Succeeds** stage and check the **Notify
    using system notification** setting. In addition to this, it should hide the navigator
    and the debugger, because we want to concentrate on refactoring or writing the
    next test.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æµ‹è¯•æˆåŠŸæ—¶ï¼ŒXcodeåº”è¯¥æ˜¾ç¤ºä¸€ä¸ªè¾¹æ¡†æ¥é€šçŸ¥æˆ‘ä»¬æ‰€æœ‰æµ‹è¯•éƒ½å·²é€šè¿‡ã€‚å¯¼èˆªåˆ°**æµ‹è¯•** | **æˆåŠŸ**é˜¶æ®µï¼Œå¹¶æ£€æŸ¥**ä½¿ç”¨ç³»ç»Ÿé€šçŸ¥é€šçŸ¥**è®¾ç½®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜åº”è¯¥éšè—å¯¼èˆªå™¨å’Œè°ƒè¯•å™¨ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³ä¸“æ³¨äºé‡æ„æˆ–ç¼–å†™ä¸‹ä¸€ä¸ªæµ‹è¯•ã€‚
- en: In case the testing fails (which happens a lot in TDD), Xcode should show a
    notification again. I like to hide the debugger because usually, it is not the
    best place to figure out what is going on in the case of a failing test. In most
    cases in TDD, we already know what the problem is.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæµ‹è¯•å¤±è´¥ï¼ˆåœ¨TDDä¸­è¿™ç§æƒ…å†µç»å¸¸å‘ç”Ÿï¼‰ï¼ŒXcodeåº”è¯¥å†æ¬¡æ˜¾ç¤ºé€šçŸ¥ã€‚æˆ‘å–œæ¬¢éšè—è°ƒè¯•å™¨ï¼Œå› ä¸ºé€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒä¸æ˜¯æ‰¾å‡ºå¤±è´¥æµ‹è¯•ä¸­å‘ç”Ÿä»€ä¹ˆæƒ…å†µçš„æœ€ä½³ä½ç½®ã€‚åœ¨å¤§å¤šæ•°TDDçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬
    already know what the problem is.
- en: You can even make your Mac speak announcements. Check **Speak announcements
    using** and select the voice you like but be careful not to annoy your co-workers.
    You might need their help in the future.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ç”šè‡³å¯ä»¥è®©ä½ çš„Macæœ—è¯»å…¬å‘Šã€‚æ£€æŸ¥**ä½¿ç”¨æœ—è¯»å…¬å‘Š**å¹¶é€‰æ‹©ä½ å–œæ¬¢çš„å£°éŸ³ï¼Œä½†è¦æ³¨æ„ä¸è¦æƒ¹æ¼ä½ çš„åŒäº‹ã€‚ä½ å°†æ¥å¯èƒ½éœ€è¦ä»–ä»¬çš„å¸®åŠ©ã€‚
- en: Now, the project and Xcode are set up, and we can start our TDD journey.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œé¡¹ç›®å’ŒXcodeå·²ç»è®¾ç½®å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹æˆ‘ä»¬çš„TDDä¹‹æ—…äº†ã€‚
- en: Summary
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ‘˜è¦
- en: In this chapter, we took a look at the app that we are going to build throughout
    the course of this book. We took a look at how the screens of the app will look
    when we are finished with it. We created a project that we will use later on and
    learned about Xcode behaviors.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬æŸ¥çœ‹äº†ä¸€ä¸‹æˆ‘ä»¬å°†åœ¨æœ¬ä¹¦çš„æ•´ä¸ªè¿‡ç¨‹ä¸­æ„å»ºçš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬æŸ¥çœ‹äº†ä¸€ä¸‹å®Œæˆåº”ç”¨åå±å¹•å°†å¦‚ä½•æ˜¾ç¤ºã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç¨åå°†è¦ä½¿ç”¨çš„é¡¹ç›®ï¼Œå¹¶äº†è§£äº†Xcodeçš„è¡Œä¸ºã€‚
- en: In the next chapter, we will develop the data model of the app using TDD. We
    will use structs for the model wherever we can because models are best represented
    in Swift by value types.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨TDDå¼€å‘åº”ç”¨ç¨‹åºçš„æ•°æ®æ¨¡å‹ã€‚æˆ‘ä»¬å°†åœ¨å¯èƒ½çš„åœ°æ–¹ä½¿ç”¨ç»“æ„ä½“æ¥è¡¨ç¤ºæ¨¡å‹ï¼Œå› ä¸ºæ¨¡å‹åœ¨Swiftä¸­æœ€å¥½ç”¨å€¼ç±»å‹æ¥è¡¨ç¤ºã€‚
- en: Exercises
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»ƒä¹ 
- en: Replicate the mock-up screens using a storyboard in Xcode.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Xcodeä¸­çš„æ•…äº‹æ¿å¤åˆ¶æ¨¡æ‹Ÿå±å¹•ã€‚
- en: Change the behaviors such that you can figure out if a test failed or if all
    tests passed without looking at the screen.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¿®æ”¹è¡Œä¸ºï¼Œä»¥ä¾¿ä½ å¯ä»¥åœ¨ä¸æŸ¥çœ‹å±å¹•çš„æƒ…å†µä¸‹ç¡®å®šæµ‹è¯•æ˜¯å¦å¤±è´¥æˆ–æ‰€æœ‰æµ‹è¯•æ˜¯å¦é€šè¿‡ã€‚
