<html><head></head><body>
		<div><h1 id="_idParaDest-311"><em class="italic"><a id="_idTextAnchor461"/>Chapter 23</em>: Getting Started with SwiftUI</h1>
			<p>In previous chapters, you created the <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>) for the <em class="italic">Let's Eat</em> app using storyboards. The process involved dragging objects representing views to a storyboard, creating outlets in view controller files, and connecting the two together.</p>
			<p>This chapter will focus on <strong class="bold">SwiftUI</strong>, an easy and innovative way to create apps across all Apple platforms. Instead of specifying the user interface using storyboards, SwiftUI uses a declarative Swift syntax, and works with new Xcode design tools to keep your code and design in sync. Features such as Dynamic Type, Dark Mode, localization, and accessibility are automatically supported.</p>
			<p>In this chapter, you will build a simplified version of the <em class="italic">Let's Eat</em> app using SwiftUI. This app will just contain the <code>LetsEat</code> project you have been working on. You will create a new SwiftUI Xcode project instead.</p>
			<p>You'll start by adding and configuring SwiftUI views to create the <code>UIKit</code> and SwiftUI views together by adding and configuring a map view for the <strong class="bold">Restaurant Detail</strong> screen. Finally, you'll create the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<p>By the end of this chapter, you'll have learned how to build a SwiftUI app that reads model objects, presents them in a list, and allows navigation to a second screen containing a map view. You can then implement this for your own projects.</p>
			<p>The following topics will be covered:</p>
			<ul>
				<li>Creating a SwiftUI Xcode project</li>
				<li>Creating the <strong class="bold">Restaurant List</strong> screen</li>
				<li>Adding model objects and configuring navigation</li>
				<li>Using UIKit and SwiftUI views together</li>
				<li>Creating the Restaurant Detail screen</li>
			</ul>
			<h1 id="_idParaDest-312"><a id="_idTextAnchor462"/>Technical requirements</h1>
			<p>You will create a new SwiftUI Xcode project for this chapter.</p>
			<p>The resource files and completed Xcode project for this chapter are in the <code>Chapter23</code> folder of the code bundle for this book, which can be downloaded here: </p>
			<p><a href="https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition">https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition</a></p>
			<p>Check out the following video to see the code in action:</p>
			<p><a href="https://bit.ly/3DnHuIN">https://bit.ly/3DnHuIN</a> </p>
			<p>Let's start by creating a new SwiftUI Xcode project for your SwiftUI app in the next section.</p>
			<h1 id="_idParaDest-313"><a id="_idTextAnchor463"/>Creating a SwiftUI Xcode project</h1>
			<p>A SwiftUI Xcode <a id="_idIndexMarker1302"/>project is created in the same way as a regular Xcode project, but you configure it to use SwiftUI instead of storyboards. As you will see, the user interface is generated entirely in code, and you'll be able to see changes in the user interface immediately as you modify your code.</p>
			<p class="callout-heading">Important Information</p>
			<p class="callout">You can watch a video of Apple's SwiftUI presentation from WWDC 2020 at <a href="https://developer.apple.com/videos/play/wwdc2020/10119">https://developer.apple.com/videos/play/wwdc2020/10119</a>.</p>
			<p class="callout">You can watch a video showing what's new in SwiftUI from WWDC 2021 at <a href="https://developer.apple.com/videos/play/wwdc2021/10018/">https://developer.apple.com/videos/play/wwdc2021/10018/</a>.</p>
			<p class="callout">Apple's official SwiftUI documentation can be found online at <a href="https://developer.apple.com/xcode/swiftui/">https://developer.apple.com/xcode/swiftui/</a>.</p>
			<p>Let's begin by creating a new SwiftUI Xcode project. Follow these steps: </p>
			<ol>
				<li>Create a new Xcode project.</li>
				<li>Click <strong class="bold">iOS</strong>. Select the <strong class="bold">App</strong> template, and then click <strong class="bold">Next</strong>:<div><img src="img/Figure_23.01_B17469.jpg" alt="Figure 23.1: Project template screen with iOS App template selected&#13;&#10;"/></div><p class="figure-caption">Figure 23.1: Project template screen with iOS App template selected</p></li>
				<li>The <code>LetsEatSwiftUI</code></li><li><strong class="bold">Interface:</strong> <strong class="bold">SwiftUI</strong><p>The other settings should already be set. Make sure all the checkboxes are unticked. Click <strong class="bold">Next</strong> when done.</p></li></ul></li>
				<li>Choose a location to save the <code>LetsEatSwiftUI</code> project and click <strong class="bold">Create</strong>.</li>
				<li>Your project appears on the screen, with the <code>ContentView</code> file selected in the Project navigator. You'll see the content of this file on the left side of the Editor area, and a canvas containing a preview on the right side:<div><img src="img/Figure_23.03_B17469.jpg" alt="Figure 23.3: Xcode showing LetsEatSwiftUI project&#13;&#10;"/></div><p class="figure-caption">Figure 23.3: Xcode showing LetsEatSwiftUI project</p></li>
				<li>The <code>ContentView</code> file contains code that will generate the initial view for your app. Click the Scheme menu and choose<strong class="bold"> iPhone SE (2nd generation)</strong> so the view <a id="_idIndexMarker1305"/>will be previewed using an <strong class="bold">iPhone SE (2nd generation)</strong>'s screen:<div><img src="img/Figure_23.04_B17469.jpg" alt="Figure 23.4: Scheme menu with iPhone SE (2nd generation) selected&#13;&#10;"/></div><p class="figure-caption">Figure 23.4: Scheme menu with iPhone SE (2nd generation) selected</p></li>
				<li>Click the <strong class="bold">Resume</strong> button in the canvas to generate the preview:<div><img src="img/Figure_23.05_B17469.jpg" alt="Figure 23.5: Canvas showing Resume button&#13;&#10;"/></div><p class="figure-caption">Figure 23.5: Canvas showing Resume button</p></li>
				<li>Verify that a preview of your app is displayed in the canvas:<div><img src="img/Figure_23.06_B17469.jpg" alt="Figure 23.6: Canvas showing app preview&#13;&#10;"/></div><p class="figure-caption">Figure 23.6: Canvas showing app preview</p><p>If the <a id="_idIndexMarker1306"/>canvas isn't visible, select <strong class="bold">Canvas</strong> from the <strong class="bold">Adjust Editor Options</strong> menu to show it. If you are using a MacBook, you can use the pinch gesture on your trackpad to resize the simulated image. </p></li>
				<li>If you need more room to work, click the Navigator and Editor buttons to hide the Navigator and Editor areas, and drag the border in the Editor area to resize the canvas:</li>
			</ol>
			<div><div><img src="img/Figure_23.07_B17469.jpg" alt="Figure 23.7: Xcode interface showing Navigator button, Editor button, and border&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 23.7: Xcode interface showing Navigator button, Editor button, and border</p>
			<p>Now let's look at the <code>ContentView</code> file. This file contains two structures, <code>ContentView</code> and <code>ContentView_Previews</code>. The <code>ContentView</code> structure describes the view's content and layout, and conforms to the <code>View</code> protocol. The <code>ContentView_Previews</code> structure declares a preview for the <code>ContentView</code> structure. The preview is displayed in the canvas.</p>
			<p>To see this in action, change the <code>Hello, World!</code> text to <code>Lets Eat</code> as shown:</p>
			<pre>struct ContentView: View {
   var body: some View { 
      Text(<strong class="bold">"Lets Eat"</strong>).padding()
   }
}</pre>
			<p>The preview in <a id="_idIndexMarker1307"/>the canvas updates to reflect your changes:</p>
			<div><div><img src="img/Figure_23.08_B17469.jpg" alt="Figure 23.8: Canvas showing app preview with text view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 23.8: Canvas showing app preview with text view</p>
			<p>You have successfully created your first SwiftUI project! Now let's create the <strong class="bold">Restaurant List</strong> screen, starting with a view that will display the data of a particular restaurant.</p>
			<h1 id="_idParaDest-314"><a id="_idTextAnchor464"/>Creating the Restaurant List screen</h1>
			<p>When using <a id="_idIndexMarker1308"/>storyboards, you modify attributes of a view using the Attributes inspector. In SwiftUI, you can modify either your code or the preview in the canvas. As you have seen, changing the code in the <code>ContentView</code> file will immediately update the preview, and modifying the preview will update the code.</p>
			<p>Let's customize the <code>ContentView</code> structure to display the data of a particular restaurant. Follow these steps:</p>
			<ol>
				<li value="1">Click the Library button. Type <code>tex</code> in the filter field, and drag a <code>Lets Eat</code> text:<div><img src="img/Figure_23.09_B17469.jpg" alt="Figure 23.9: Library with Text object to be dragged&#13;&#10;"/></div><p class="figure-caption">Figure 23.9: Library with Text object to be dragged</p></li>
				<li>Xcode has <a id="_idIndexMarker1309"/>automatically added code to the <code>ContentView</code> file for this text view. Verify that your code looks like this:<pre>struct ContentView: View {
   var body: some View { 
      <code>"Lets Eat"</code> string, and both text views are enclosed in a <code>VStack</code> view. A <code>VStack</code> view contains subviews that are arranged vertically, and it is similar to a vertically oriented stack view.</p></li>
				<li>You will use details for The Tap Trailhouse, a restaurant in Boston, as sample data. Modify the text views in the <code>VStack</code> view to show the name and cuisines offered by <a id="_idIndexMarker1310"/>The Tap Trailhouse restaurant:<pre>struct ContentView: View {
   var body: some View { 
      VStack {
         Text("<strong class="bold">The Tap Trailhouse</strong>").padding()
         Text("<strong class="bold">Brewery, Burgers, American</strong>")
      }
   }
}</pre></li>
				<li>Verify that the changes are reflected in the preview:<div><img src="img/Figure_23.10_B17469.jpg" alt="Figure 23.10: App preview showing The Tap Trailhouse name and cuisines&#13;&#10;"/></div><p class="figure-caption">Figure 23.10: App preview showing The Tap Trailhouse name and cuisines</p></li>
				<li>You'll use a SwiftUI image view to display a photo of the restaurant. Modify your code as shown to add an image view to your <code>VStack</code> view:<pre>struct ContentView: View {
   var body: some View { 
      VStack {
         Text("The Tap Trailhouse").padding()
         Text("Brewery, Burgers, American")
         <code>systemName</code>. This parameter allows you to choose one of the images in Apple's <strong class="bold">SF Symbols</strong> library. You'll replace this<a id="_idIndexMarker1311"/> SF Symbols image with a photo later.</p><p class="callout-heading">Important Information</p><p class="callout">You can learn more about the SF Symbols library here: <a href="https://developer.apple.com/sf-symbols/">https://developer.apple.com/sf-symbols/</a>.</p></li>
				<li>Verify that your canvas now displays two text views and one image view as shown:<div><img src="img/Figure_23.11_B17469.jpg" alt="Figure 23.11: App preview showing two text views and one image view&#13;&#10;"/></div><p class="figure-caption">Figure 23.11: App preview showing two text views and one image view</p></li>
				<li>To change the way your text looks, you use <strong class="bold">modifiers</strong> instead of the Attributes inspector. These are methods that change how your objects look or behave. Update your code as shown to set the style and color of your text views:<pre>struct ContentView: View {
   var body: some View { 
      VStack {
         Text("The Tap Trailhouse")
            <strong class="bold">.font(.headline)</strong>
         Text("Brewery, Burgers, American")
<strong class="bold">            .font(.subheadline)</strong>
<strong class="bold">            .foregroundColor(.secondary)</strong>
         Image(systemName: "photo")
      }
   }
}</pre><p>Note the changes<a id="_idIndexMarker1312"/> to the text in the preview.</p></li>
				<li>To make sure your view stays in the middle of the screen, you'll embed it in an <code>HStack</code> view and add <code>Spacer</code> objects to both sides. An <code>HStack</code> view contains subviews that are arranged horizontally, and it is similar to a horizontally oriented stack view. A <code>Spacer</code> object is a flexible space that expands horizontally in an <code>HStack</code> view. <em class="italic">Command + click</em> on your <code>VStack</code> view and choose <strong class="bold">Embed in HStack</strong> from the pop-up menu:<div><img src="img/Figure_23.12_B17469.jpg" alt="Figure 23.12: Editor area showing pop-up menu with Embed in HStack selected&#13;&#10;"/></div><p class="figure-caption">Figure 23.12: Editor area showing pop-up menu with Embed in HStack selected</p></li>
				<li>Verify that<a id="_idIndexMarker1313"/> your code looks like this:<pre>struct ContentView: View {
   var body: some View {
<strong class="bold">      HStack {</strong>
         VStack {
            Text("The Tap Trailhouse")
               .font(.headline)
            Text("Brewery, Burgers, American")
               .font(.subheadline)
               .foregroundColor(.secondary)
            Image(systemName: "photo")
         }
     <strong class="bold"> }</strong>
   }
}</pre></li>
				<li>Add two <code>Spacer</code> objects to the <code>HStack</code> view as shown to center the view horizontally on your screen:<pre>HStack {
   <strong class="bold">Spacer()</strong>
   VStack {
      Text("The Tap Trailhouse")
         .font(.headline)
      Text("Brewery, Burgers, American")
         .font(.subheadline)
         .foregroundColor(.secondary)
      Image(systemName: "photo")
   }
   <strong class="bold">Spacer()</strong>
}</pre></li>
			</ol>
			<p>Your view is now <a id="_idIndexMarker1314"/>complete. You will use this view as a cell in the <strong class="bold">Restaurant List</strong> screen in the next section. </p>
			<h1 id="_idParaDest-315"><a id="_idTextAnchor465"/>Adding model objects and configuring navigation</h1>
			<p>You now have a<a id="_idIndexMarker1315"/> view <a id="_idIndexMarker1316"/>that can be used to display the details of a restaurant. You'll use this view as a cell in a SwiftUI list, which is a container that presents data in a single column. You'll also configure model objects to populate this list. Follow these step:.</p>
			<ol>
				<li value="1"><em class="italic">Command + click</em> on the <code>HStack</code> view and choose <strong class="bold">Embed in List</strong> to display a list containing five cells in the canvas:<div><img src="img/Figure_23.13_B17469.jpg" alt="Figure 23.13: Editor area showing pop-up menu with Embed in List selected&#13;&#10;"/></div><p class="figure-caption">Figure 23.13: Editor area showing pop-up menu with Embed in List selected</p></li>
				<li>Verify<a id="_idIndexMarker1317"/> that your<a id="_idIndexMarker1318"/> code looks like this:<pre>struct ContentView: View {
   var body: some View {
      <code>HStack</code> view is no longer needed. Note that no delegates and data sources are required to display data in the list.</p></li>
				<li>Open the <code>resources</code> folder contained in the <code>Chapter23</code> folder of the code bundle you downloaded from <a href="https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition">https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition</a>. Drag the <code>RestaurantItem.swift</code> file to the Project navigator and click <strong class="bold">Finish</strong> when <a id="_idIndexMarker1319"/>prompted to <a id="_idIndexMarker1320"/>add them to your project.</li>
				<li>Click the <code>RestaurantItem</code> file in the Project navigator and you should see the following code inside it:<pre>import Foundation
import MapKit
struct RestaurantItem: Identifiable {
   var id = UUID()
   var name: String
   var address: String
   var city: String
   var cuisines: [String] = []
   var lat: CLLocationDegrees
   var long: CLLocationDegrees
   var imageURLString: String
   var title: String {
      return name
   }
   var subtitle: String {
      if cuisines.isEmpty { return "" }
      else if cuisines.count == 1 { return 
      cuisines.first! }
      else { return cuisines.joined(
      separator: ", ")}
   }
}
let testData = [
RestaurantItem(name: "The Tap Trailhouse", address: "17 Union St", city: "Boston", cuisines: ["Brewery","Burgers","American"], lat: 42.360847, long: -71.056819, imageURLString: "https://resizer.otstatic.com/v2/profiles/legacy/145237.jpg"),
RestaurantItem(name: "o ya", address: "9 East Street", city: "Boston", cuisines: ["Japanese","Sushi","Int'l"], lat: 42.351353, long: -71.056941, imageURLString: "https://resizer.otstatic.com/v2/profiles/legacy/28066"),
RestaurantItem(name: "Skipjack's Boston", address: "199 Clarendon St.", city: "Boston", cuisines: ["American", "Burgers","Brewery"], lat: 42.349887, long: -71.07484, imageURLString: "https://resizer.otstatic.com/v2/profiles/legacy/11656"),
RestaurantItem(name: "The Elephant Walk", address: "900 Beacon Street", city: "Boston", cuisines: ["Panasian", "Vietnamese","Int'l"], lat: 42.346541, long: -71.105827, imageURLString: "https://resizer.otstatic.com/v2/profiles/legacy/1635"),
RestaurantItem(name: "Metropolis Cafe", address: "584 Tremont Street", city: "Boston", cuisines: ["Mediterranean", "Int'l","Tapas"], lat: 42.3432, long: -71.0727, imageURLString: "https://resizer.otstatic.com/v2/profiles/legacy/2829")
]</pre><p>The <code>RestaurantItem</code> file<a id="_idIndexMarker1321"/> contains <a id="_idIndexMarker1322"/>a structure, <code>RestaurantItem</code>, and an array, <code>testData</code>. </p><p>The <code>RestaurantItem</code> structure is similar to the <code>RestaurantItem</code> class that you used in your <code>LetsEat</code> project. To use this structure in a list, you have to make it conform to the <code>Identifiable</code> protocol. This protocol specifies that a list item must have an <code>id</code> property that can identify a particular item. A <code>UUID</code> instance is assigned to each <code>RestaurantItem</code> instance upon creation to ensure each <code>id</code> is unique.</p><p class="callout-heading">Important Information</p><p class="callout">You can learn more about the <code>Identifiable</code> protocol at this link: <a href="https://developer.apple.com/documentation/swift/identifiable">https://developer.apple.com/documentation/swift/identifiable</a>.</p><p><code>testData</code> is an array containing five <code>RestaurantItem</code> instances representing five restaurants in the Boston area. It fulfills the same function as the JSON files you used in the earlier chapters of this book.</p></li>
				<li>Click the <code>ContentView</code> file in the Project navigator. Add a <code>restaurantItems</code> property to your view to hold data for the list after the opening curly brace of the <code>ContentView</code> structure:<pre>struct ContentView: View {
   <strong class="bold">var restaurantItems: [RestaurantItem] = []</strong>
   var body: some View {</pre></li>
				<li>Modify<a id="_idIndexMarker1323"/> your<a id="_idIndexMarker1324"/> code as shown to populate your list with your test data, and display a restaurant's data in each cell:<pre>struct ContentView: View {
   var restaurantItems: [RestaurantItem] = []
   var body: some View {
      List(<code>ContentView</code> structure stores an array of <code>RestaurantItem</code> instances in the <code>restaurantItems</code> property. This array is passed to the list. For every item in the <code>restaurantItems</code> array, a view is created and assigned with data<a id="_idIndexMarker1325"/> from<a id="_idIndexMarker1326"/> the item's properties. The image for each restaurant is downloaded from the URL stored in the item's <code>imageURLString</code> property, and displayed using the new <code>AsyncImage</code> view introduced in iOS 15. Since there are five items in the array, five views appear in the canvas. </p><p class="callout-heading">Important Information</p><p class="callout">You can learn more about the <code>AsyncImage</code> view at this link:</p><p class="callout"><a href="https://developer.apple.com/documentation/swiftui/asyncimage">https://developer.apple.com/documentation/swiftui/asyncimage</a></p><p>The <code>ContentView_Previews</code> structure passes in the <code>testData</code> array (stored in the <code>RestaurantItem</code> file) to the <code>ContentView</code> structure, which is then used to populate the view.</p></li>
				<li>When you make major changes to your code, the automatic updating of the canvas is paused. Click the <strong class="bold">Resume</strong> button to resume if required. Note that the cell size has changed to suit the restaurant image's size.</li>
			</ol>
			<p>Next, you'll implement navigation so that when a cell is tapped, a second screen is presented that will show details of a particular restaurant. Follow these steps:</p>
			<ol>
				<li value="1">Modify <a id="_idIndexMarker1327"/>your <a id="_idIndexMarker1328"/>code as shown to wrap your list in a <code>UINavigation</code> class that you've used before in your app.</p></li>
				<li>Add a modifier to set the list's <code>title</code> property to show <code>Boston, MA</code> at the top of the screen:<pre>      .mask(RoundedRectangle(cornerRadius: 9))
   }
   Spacer()
}<strong class="bold">.navigationTitle("Boston, MA")</strong>    </pre></li>
				<li>Wrap<a id="_idIndexMarker1329"/> the <a id="_idIndexMarker1330"/>cell in a <code>destination</code> property, which specifies the view to be presented when a cell is tapped. Currently the specified view is a text view showing the name of the restaurant.</p><p>The <code>.fixedSize()</code> modifier is used to ensure the text is not truncated.</p></li>
				<li>Note that the<a id="_idIndexMarker1331"/> list in<a id="_idIndexMarker1332"/> the canvas has automatically displayed disclosure arrows:<div><img src="img/Figure_23.14_B17469.jpg" alt="Figure 23.14: App preview showing disclosure arrow&#13;&#10;"/></div><p class="figure-caption">Figure 23.14: App preview showing disclosure arrow</p></li>
				<li>To see this <a id="_idIndexMarker1333"/>working <a id="_idIndexMarker1334"/>as it should in an app, click the <strong class="bold">Live Preview</strong> button in the canvas:<div><img src="img/Figure_23.15_B17469.jpg" alt="Figure 23.15: Canvas showing Live Preview button&#13;&#10;"/></div><p class="figure-caption">Figure 23.15: Canvas showing Live Preview button</p></li>
				<li>Click any cell in the preview to display text containing the name of the tapped restaurant:<div><img src="img/Figure_23.16_B17469.jpg" alt="Figure 23.16: App preview showing a selected cell&#13;&#10;"/></div><p class="figure-caption">Figure 23.16: App preview showing a selected cell</p><p>This is a great <a id="_idIndexMarker1335"/>way of <a id="_idIndexMarker1336"/>ensuring your list works as expected.</p></li>
				<li>The view code is starting to look cluttered, so you'll extract the cell into its own separate view. <em class="italic">Command + click</em> the <code>NavigationLink</code> view and choose <strong class="bold">Extract Subview</strong>:<div><img src="img/Figure_23.17_B17469.jpg" alt="Figure 23.17: Editor area showing pop-up menu with Extract Subview selected&#13;&#10;"/></div><p class="figure-caption">Figure 23.17: Editor area showing pop-up menu with Extract Subview selected</p></li>
				<li>All the view <a id="_idIndexMarker1337"/>code for the <a id="_idIndexMarker1338"/>cell has been moved into a separate view named <code>ExtractedView</code>:<div><img src="img/Figure_23.18_B17469.jpg" alt="Figure 23.18: Editor area showing name of extracted view highlighted&#13;&#10;"/></div><p class="figure-caption">Figure 23.18: Editor area showing name of extracted view highlighted</p></li>
				<li>Change the name of the method call and the extracted view to <code>RestaurantCell</code>. Your code should look like this:<pre>   var body: some View {
      NavigationView { 
         List(restaurantItems) { restaurantItem in
            <strong class="bold">RestaurantCell()</strong>
         }.navigationTitle("Boston, MA")
      }
   }
}
struct ContentView_Previews: PreviewProvider {
   static var previews: some View {
      ContentView(restaurantItems: testData)
   }
}
struct <strong class="bold">RestaurantCell</strong>: View {
   var body: some View {
      NavigationLink(destination:</pre><p>Don't worry <a id="_idIndexMarker1339"/>about <a id="_idIndexMarker1340"/>the error, you'll fix it in the next step.</p></li>
				<li>Add a property to the <code>RestaurantCell</code> view to hold a <code>RestaurantItem </code>instance: <pre>struct RestaurantCell: View {
   <strong class="bold">var restaurantItem: RestaurantItem</strong></pre></li>
				<li>Add code to the <code>ContentView</code> structure to pass the <code>RestaurantItem</code> instance to the <code>RestaurantCell</code> view as shown:<pre>struct ContentView: View {
   var restaurantItems: [RestaurantItem] = []
   var body: some View {
      NavigationView {
         List(restaurantItems) { restaurantItem in 
            <strong class="bold">RestaurantCell(restaurantItem: </strong>
<strong class="bold">            restaurantItem)</strong>
         }.navigationTitle("Boston, MA"
      }
   }
}</pre></li>
				<li>Verify that the preview still works the way it did before.</li>
			</ol>
			<p>You've completed the implementation of the <code>UIKit</code> and <a id="_idIndexMarker1342"/>SwiftUI views together to create a map view that you'll use in the <strong class="bold">Restaurant Detail</strong> screen.</p>
			<h1 id="_idParaDest-316"><a id="_idTextAnchor466"/>Using UIKit and SwiftUI Views together</h1>
			<p>At this point, you<a id="_idIndexMarker1343"/> have created the <strong class="bold">Restaurant List</strong> screen, and tapping each cell in this screen displays the restaurant's name on a second screen. You'll modify your app to display a <strong class="bold">Restaurant Detail</strong> screen when a cell on the <strong class="bold">Restaurant List</strong> screen is tapped, but before that, you'll create a SwiftUI view that displays a map. </p>
			<p>When using storyboards, all you needed to do was to drag in a map view from the Library to a view in the storyboard. SwiftUI does not have a native map view but you can use the same map view that you used in the storyboard to render the map. In fact, you can use any view subclass in SwiftUI by wrapping them in a SwiftUI view that conforms to the <code>UIViewRepresentable</code> protocol. Let's create a custom view that can present a map view now. Follow these steps:</p>
			<ol>
				<li value="1">Choose <strong class="bold">File</strong> | <strong class="bold">New</strong> | <strong class="bold">File</strong> to open the template selector.</li>
				<li><strong class="bold">iOS</strong> should already be selected. In the <strong class="bold">User Interface</strong> section, click <strong class="bold">SwiftUI View</strong> and click <strong class="bold">Next</strong>:<div><img src="img/Figure_23.19_B17469.jpg" alt="Figure 23.19: File template screen with SwiftUI View selected&#13;&#10;"/></div><p class="figure-caption">Figure 23.19: File template screen with SwiftUI View selected</p></li>
				<li>Name the <a id="_idIndexMarker1344"/>new file <code>MapView</code> and click <code>MapView</code> file will appear in the Project navigator.</li>
				<li>In the <code>MapView</code> file, import <code>MapKit</code>, and make the <code>MapView</code> structure conform to the <code>UIViewRepresentable</code> protocol as shown. Don't worry about the error that appears, you'll fix that in the next few steps:<pre>import SwiftUI
<code>UIViewRepresentable</code> protocol is a wrapper that allows you to use any <code>UIKit</code> view in your SwiftUI view hierarchy.</p><p class="callout-heading">Important Information</p><p class="callout">To learn more about the <code>UIViewRepresentable</code> protocol, visit this link: <a href="https://developer.apple.com/documentation/swiftui/uiviewrepresentable">https://developer.apple.com/documentation/swiftui/uiviewrepresentable</a>.</p></li>
				<li>You need two methods to conform to the <code>UIViewRepresentable</code> protocol: a <code>makeUIView(context:)</code> method that creates an <code>MKMapView</code> and an <code>updateUIView(_:context:)</code> method that configures it and responds to any <a id="_idIndexMarker1345"/>changes. Modify your code as shown to replace the <code>body</code> property with a <code>makeUIView(context:)</code> method that creates and returns an empty <code>MKMapView</code> instance:<pre>struct MapView: UIViewRepresentable {
<strong class="bold">   func makeUIView(context: Context) -&gt; MKMapView { </strong>
<strong class="bold">      MKMapView(frame: .zero)</strong>
<strong class="bold">   }</strong>
}</pre></li>
				<li>Modify your code as shown to add an <code>updateUIView(_:context:)</code> method just after the <code>makeUIView(context:)</code> method. This sets the map view's region to center the map on The Tap Trailhouse's location:<pre>func updateUIView(_ uiView: MKMapView, context: 
Context) {
   let coordinate = CLLocationCoordinate2D
   (latitude: 42.360847, longitude: -71.056819)
   let span = MKCoordinateSpan(latitudeDelta: 
   0.001, longitudeDelta: 0.001)
   let region = MKCoordinateRegion(center: 
   coordinate, span: span)
   uiView.setRegion(region, animated: true)
}</pre><p>Note that this is the same method you used to make a region for the <strong class="bold">Map</strong> screen in the <em class="italic">Let's Eat</em> app.</p></li>
				<li>The error is now gone, and a blank map view appears in the canvas. This is because the preview is in static mode and only renders SwiftUI views. You'll need to turn on live preview to see the map. Click the <strong class="bold">Live Preview</strong> button and you should<a id="_idIndexMarker1346"/> see a map of Boston centered on The Tap Trailhouse's location in a moment:<div><img src="img/Figure_23.20_B17469.jpg" alt="Figure 23.20: App preview showing map&#13;&#10;"/></div><p class="figure-caption">Figure 23.20: App preview showing map</p><p>If it doesn't work, check your internet connection, and click the <strong class="bold">Try Again</strong> or <strong class="bold">Resume</strong> buttons above your preview.</p></li>
				<li>The latitude and longitude values are currently hardcoded. Declare two properties to hold the latitude and longitude values as shown after the <code>MapView</code> structure declaration:<pre>struct MapView: UIViewRepresentable {
<strong class="bold">   var lat: CLLocationDegrees</strong>
<strong class="bold">   var long: CLLocationDegrees</strong></pre></li>
				<li>Modify <a id="_idIndexMarker1347"/>the <code>updateUI(_:context:)</code> method to use these properties instead of the hardcoded values:<pre>func updateUIView(_ view: MKMapView, context: Context) {
   let coordinate = CLLocationCoordinate2D( 
   latitude: <strong class="bold">lat</strong>, longitude: <strong class="bold">long</strong>)</pre></li>
				<li>Update the <code>MapView_Previews</code> structure to pass in sample latitude and longitude values as shown. This will generate the same map you saw earlier in the preview:<pre>struct MapView_Previews: PreviewProvider {
   static var previews: some View {
      MapView(<strong class="bold">lat: 42.360847, long: -71.056819</strong>)
   }
}</pre></li>
				<li>In the canvas, check to see that the map is still displayed (You may need to click <strong class="bold">Resume</strong>).</li>
			</ol>
			<p>You've created a SwiftUI map view that shows the restaurant's location. Now, let's see how to make the <a id="_idIndexMarker1348"/>complete <strong class="bold">Restaurant Detail</strong> screen in the next section.</p>
			<h1 id="_idParaDest-317"><a id="_idTextAnchor467"/>Completing the Restaurant Detail screen</h1>
			<p>You now have <a id="_idIndexMarker1349"/>a SwiftUI map view displaying a map. Now, you'll create a new SwiftUI view to represent the <strong class="bold">Restaurant Detail</strong> screen and add the map view to it. Follow these steps:</p>
			<ol>
				<li value="1">Choose <strong class="bold">File</strong> | <strong class="bold">New</strong> | <strong class="bold">File</strong> to open the template selector.</li>
				<li><strong class="bold">iOS</strong> should already be selected. In the <strong class="bold">User Interface</strong> section, click <strong class="bold">SwiftUI View</strong> and click <strong class="bold">Next</strong>.</li>
				<li>Name the new file <code>RestaurantDetail</code> and click <code>RestaurantDetail</code> file appears in the Project navigator.</li>
				<li>Declare and define the <code>RestaurantDetail</code> and <code>RestaurantDetail_Previews</code> structures as shown:<pre>import SwiftUI
struct RestaurantDetail: View {  
   <code>RestaurantDetail</code> structure<a id="_idIndexMarker1350"/> contains a <code>Vstack</code> view enclosing a map view and a second <code>Vstack</code> view. The map view displays a map showing the restaurant's location. The second <code>Vstack</code> view encloses four text views. These display the restaurant's name, cuisines, address, and city. A <code>Spacer</code> object pushes the first <code>Vstack</code> view to the top of the screen. A <code>RestaurantItem</code> instance is assigned to the <code>selectedRestaurant</code> property, and data from this instance is used to populate the <code>RestaurantDetail</code> structure's views.</p><p>To create the preview in the canvas, the <code>RestaurantDetail_Previews</code> structure passes in the first <code>RestaurantItem</code> instance in the <code>testData</code> array. Note that the <code>RestaurantDetail</code> instance is enclosed in a <code>NavigationView</code> instance to make the navigation bar appear in the preview.</p></li>
				<li>The preview displays a map view above the restaurant text views, but does not render the map. As before, click the <strong class="bold">Live Preview</strong> button.</li>
				<li>The canvas <a id="_idIndexMarker1351"/>now displays the <strong class="bold">Restaurant Detail</strong> screen with a rendered map:<div><img src="img/Figure_23.21_B17469.jpg" alt="Figure 23.21: App preview showing Restaurant Detail screen&#13;&#10;"/></div><p class="figure-caption">Figure 23.21: App preview showing Restaurant Detail screen</p><p>You've completed the implementation of the <strong class="bold">Restaurant Detail</strong> screen using SwiftUI. Now you'll modify the list in the <strong class="bold">Restaurant List</strong> screen so that the <strong class="bold">Restaurant Detail </strong>screen will be displayed when a cell is tapped.</p></li>
				<li>Click the <code>ContentView</code> file in the Project navigator and modify the <code>RestaurantCell</code> structure's code to use the <code>RestaurantDetail</code> structure<a id="_idIndexMarker1352"/> as the destination when a cell is tapped:<pre>var body: some View {
    NavigationLink(destination: 
    <strong class="bold">RestaurantDetail(selectedRestaurant: </strong>
<strong class="bold">    restaurantItem ))</strong>{
        Spacer()</pre></li>
				<li>Click the <strong class="bold">Live Preview</strong> button in the canvas. Tap a row in the <strong class="bold">Restaurant List</strong> screen. You'll see the <strong class="bold">Restaurant Detail</strong> screen for that restaurant appear:</li>
			</ol>
			<div><div><img src="img/Figure_23.22_B17469.jpg" alt="Figure 23.22: App preview showing Restaurant Detail screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 23.22: App preview showing Restaurant Detail screen</p>
			<p>As you can<a id="_idIndexMarker1353"/> see, the app preview works fine in the canvas. If you want to run in the simulator, you'll need to make one small change in the <code>ContentView</code> structure. Click the <code>ContentView</code> file in the Project navigator and assign the <code>testdata</code> array to the <code>restaurantItems</code> property as shown:</p>
			<pre>struct ContentView: View {
   var restaurantItems: [RestaurantItem] = <strong class="bold">testData</strong>
   var body: some View {</pre>
			<p>Build and run your app, and it will appear in the simulator:</p>
			<div><div><img src="img/Figure_23.23_B17469.jpg" alt="Figure 23.23: iOS Simulator showing Restaurant List screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 23.23: iOS Simulator showing Restaurant List screen</p>
			<p>You have <a id="_idIndexMarker1354"/>completed building a simple SwiftUI app! Awesome!</p>
			<h1 id="_idParaDest-318"><a id="_idTextAnchor468"/>Summary</h1>
			<p>In this brief introduction to SwiftUI, you've seen how to build a simplified version of the <em class="italic">Let's Eat</em> app using SwiftUI. </p>
			<p>You started by adding and configuring SwiftUI views to create the <code>UIKit</code> and SwiftUI views together by adding and configuring a map view for the <strong class="bold">Restaurant Detail</strong> screen. Finally, you created the <strong class="bold">Restaurant Detail</strong> screen and added the map view you created earlier to it.</p>
			<p>You now know how to use SwiftUI to create an app that reads model objects, presents them in a list, and allows navigation to a second screen containing a map view. You can then implement this for your own projects.</p>
			<p>In the next chapter, you will learn about <strong class="bold">Swift concurrency</strong>, a new way to handle asynchronous operations in Swift.</p>
		</div>
	</body></html>