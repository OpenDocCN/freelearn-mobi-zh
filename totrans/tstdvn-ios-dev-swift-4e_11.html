<html><head></head><body>
		<div><h1 id="_idParaDest-120"><em class="italic"><a id="_idTextAnchor317"/>Chapter 8</em>: Building a Simple Detail View</h1>
			<p>Often in iOS development, table views or collection views just give a brief summary of the presented items. To figure out all the details of the shown items, the user has to select an item so that they can be redirected to the details. In the details view, the user can often interact with the shown item.</p>
			<p>For example, in a mail app, the summary only shows the sender, the subject, and the first few lines of the mail. To read the complete mail and to answer it, the user has to open it in the details view.</p>
			<p>In this chapter, we will build the details view for our to-do items. The chapter is structured as follows:</p>
			<ul>
				<li>Adding labels, a button, and a map</li>
				<li>Filling in the data</li>
				<li>Checking the to-do item</li>
			</ul>
			<p>We start by adding the user interface elements to the view.</p>
			<h1 id="_idParaDest-121"><a id="_idTextAnchor318"/>Technical requirements</h1>
			<p>The source code for this chapter is available here: </p>
			<p><a href="https://github.com/PacktPublishing/Test-Driven-iOS-Development-with-Swift-Fourth-Edition/tree/main/chapter08">https://github.com/PacktPublishing/Test-Driven-iOS-Development-with-Swift-Fourth-Edition/tree/main/chapter08</a></p>
			<h1 id="_idParaDest-122"><a id="_idTextAnchor319"/>Adding labels, a button, and a map</h1>
			<p>We have done<a id="_idIndexMarker264"/> this so often<a id="_idIndexMarker265"/> already that<a id="_idIndexMarker266"/> you might guess<a id="_idIndexMarker267"/> what we have<a id="_idIndexMarker268"/> to do first. That's right, we<a id="_idIndexMarker269"/> need a test case class for our tests. Select the <code>ToDoItemDetailsViewControllerTests</code>. Make sure that it is added to the unit test target:</p>
			<div><div><img src="img/Figure_8.01_B16497.jpg" alt="Figure 8.1 – The test case needs to be added to the unit test target&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.1 – The test case needs to be added to the unit test target</p>
			<p>Remove<a id="_idIndexMarker270"/> the two template<a id="_idIndexMarker271"/> tests in the created<a id="_idIndexMarker272"/> test case class<a id="_idIndexMarker273"/> and add <code>@testable import ToDo</code> below<a id="_idIndexMarker274"/> the existing import<a id="_idIndexMarker275"/> statement:</p>
			<pre>// ToDoItemDetailsViewControllerTests.swift
import XCTest
@testable import ToDo 
class ToDoItemDetailsViewControllerTests: XCTestCase { 
  override func setUpWithError() throws {
  } 
  override func tearDownWithError() throws {
  }
}</pre>
			<p>The details view needs some labels to show the information of the to-do item. Let's start with the label<a id="_idIndexMarker276"/> for the title. Follow<a id="_idIndexMarker277"/> these steps:</p>
			<ol>
				<li>Add the<a id="_idIndexMarker278"/> following<a id="_idIndexMarker279"/> property for the<a id="_idIndexMarker280"/> system under<a id="_idIndexMarker281"/> test:<pre>// ToDoItemDetailsViewControllerTests.swift
var sut: ToDoItemDetailsViewController!</pre></li>
			</ol>
			<p>Xcode complains that it <strong class="bold">Cannot find type 'ToDoItemDetailsViewController' in scope</strong>.</p>
			<ol>
				<li value="2">Select the <code>ToDoItemDetailsViewController</code>. Make it a subclass of <strong class="bold">UIViewController</strong>:</li>
			</ol>
			<div><div><img src="img/Figure_8.02_B16497.jpg" alt="Figure 8.2 – Options for the view controller class&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.2 – Options for the view controller class</p>
			<ol>
				<li value="3">Remove the template code inside the created class. Go back to <code>ToDoItemDetailsViewControllerTests</code>. Xcode should remove the error after a few seconds. If it doesn't, select the <strong class="bold">Product</strong> | <strong class="bold">Build</strong> menu item to compile the project.</li>
				<li>Now we have<a id="_idIndexMarker282"/> two choices. One, we could build the user<a id="_idIndexMarker283"/> interface in code as we did for the table view cells<a id="_idIndexMarker284"/> in the previous chapter. Two, we could use<a id="_idIndexMarker285"/> a storyboard<a id="_idIndexMarker286"/> for the user interface. To give<a id="_idIndexMarker287"/> you a broader picture in this book, we will use the storyboard for the user interface in this chapter.</li>
			</ol>
			<p>Replace the <code>setUpWithError()</code> and the <code>tearDownWithError()</code> methods with the following implementation:</p>
			<pre>// ToDoItemDetailsViewControllerTests.swift
override func setUpWithError() throws {
  let storyboard = UIStoryboard(name: "Main", bundle:
    nil)
  sut = (storyboard.instantiateViewController(
    withIdentifier: "ToDoItemDetailsViewController")
    as! ToDoItemDetailsViewController)
  sut.loadViewIfNeeded()
}
override func tearDownWithError() throws {
  sut = nil
}</pre>
			<p>The parentheses around <code>(storyboard.instantiateViewController(withIdentifier: "ToDoItemDetailsViewController") as! ToDoItemDetailsViewController)</code> are needed to silence a warning produced by Xcode. Try and see what Xcode tells you do when you omit them.</p>
			<ol>
				<li value="5">With the setup<a id="_idIndexMarker288"/> and the teardown<a id="_idIndexMarker289"/> methods in<a id="_idIndexMarker290"/> place, we can<a id="_idIndexMarker291"/> write the first test<a id="_idIndexMarker292"/> of that test case<a id="_idIndexMarker293"/> class:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_view_shouldHaveTitleLabel() throws {
  let subview = try XCTUnwrap(sut.titleLabel)
}</pre></li>
			</ol>
			<p>This test is not finished yet but we have to pause here because the <code>titleLabel</code> property is missing.</p>
			<ol>
				<li value="6">Add the property to <code>ToDoItemDetailsViewController</code>:<pre>// ToDoItemDetailsViewController.swift
class ToDoItemDetailsViewController: UIViewController { 
  @IBOutlet var titleLabel: UILabel!
}</pre></li>
				<li>Now we can finish the test method:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_view_shouldHaveTitleLabel() throws {
  let subview = try XCTUnwrap(sut.titleLabel)
  XCTAssertTrue(subview.isDescendant(of: sut.view))
}</pre></li>
				<li>Run all tests to confirm that this new test fails. This test fails in <code>setUpWithError()</code>. Click the red diamond in the failure message to see what the problem is:</li>
			</ol>
			<div><div><img src="img/Figure_8.03_B16497.jpg" alt="Figure 8.3 – The storyboard doesn't have a view controller with the identifier 'ToDoItemDetailsViewController'&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.3 – The storyboard doesn't have a view controller with the identifier 'ToDoItemDetailsViewController'</p>
			<p>Looking at the problem<a id="_idIndexMarker294"/> shown in <em class="italic">Figure 8.3</em>, we need<a id="_idIndexMarker295"/> to add a new<a id="_idIndexMarker296"/> scene for that view <a id="_idIndexMarker297"/>controller<a id="_idIndexMarker298"/> to the<a id="_idIndexMarker299"/> storyboard.</p>
			<ol>
				<li value="9">Open the <code>Main.storyboard</code> file in the Interface Builder in Xcode and click the plus (<strong class="bold">+</strong>) button in the toolbar:</li>
			</ol>
			<div><div><img src="img/Figure_8.04_B16497.jpg" alt="Figure 8.4 – Open the library&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.4 – Open the library</p>
			<ol>
				<li value="10">Search for <code>view controller</code> and<a id="_idIndexMarker300"/> drag a <strong class="bold">View Controller</strong> object<a id="_idIndexMarker301"/> onto the<a id="_idIndexMarker302"/> storyboard. Open<a id="_idIndexMarker303"/> the <strong class="bold">Identity</strong> inspector<a id="_idIndexMarker304"/> by selecting the <strong class="bold">View</strong> | <strong class="bold">Inspectors</strong> | <strong class="bold">Identity</strong> menu<a id="_idIndexMarker305"/> item. Change <strong class="bold">Class</strong> and <strong class="bold">Storyboard ID</strong> to <strong class="bold">ToDoItemDetailsViewController</strong>:</li>
			</ol>
			<div><div><img src="img/Figure_8.05_B16497.jpg" alt="Figure 8.5 – Changing the class and the storyboard ID of the scene&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.5 – Changing the class and the storyboard ID of the scene</p>
			<p>Run the tests<a id="_idIndexMarker306"/> again. The new<a id="_idIndexMarker307"/> test<a id="_idIndexMarker308"/> still fails<a id="_idIndexMarker309"/> because<a id="_idIndexMarker310"/> the <code>titleLabel</code> property<a id="_idIndexMarker311"/> is <code>nil</code>.</p>
			<ol>
				<li value="11">We need to add a label to the storyboard scene and connect it with <code>IBOutlet</code>. Open the library by selecting the <code>ToDoItemDetailsViewController</code>:</li>
			</ol>
			<div><div><img src="img/Figure_8.06_B16497.jpg" alt="Figure 8.6 – The added label on the To Do Item Details View Controller scene&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.6 – The added label on the To Do Item Details View Controller scene</p>
			<ol>
				<li value="12">Open the <code>ToDoItemsDetailsViewController</code> in the <strong class="bold">Assistant</strong> editor. If it<a id="_idIndexMarker315"/> opens another<a id="_idIndexMarker316"/> file, close Xcode and<a id="_idIndexMarker317"/> restart it.</li>
			</ol>
			<p>Hold down the <em class="italic">Ctrl</em> key and drag a connection from the label in the storyboard to the <code>IBOutlet</code> property in the code:</p>
			<div><div><img src="img/Figure_8.07_B16497.jpg" alt="Figure 8.7 – Connect the label in the scene with the IBOutlet property&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.7 – Connect the label in the scene with the IBOutlet property</p>
			<p>Run the tests again. All tests pass.</p>
			<p>As we have hardly written any code, there is nothing to refactor.</p>
			<p>In the same way, you can add<a id="_idIndexMarker318"/> the labels for the date, the location, and the description<a id="_idIndexMarker319"/> of the to-do item. We won't show<a id="_idIndexMarker320"/> this here because it works exactly the same as adding the label<a id="_idIndexMarker321"/> for the title. Follow the steps again<a id="_idIndexMarker322"/> with a different<a id="_idIndexMarker323"/> name for the property. To get you started, here are the three tests for these three new labels:</p>
			<pre>// ToDoItemDetailsViewControllerTests.swift
func test_view_shouldHaveDateLabel() throws {
  let subview = try XCTUnwrap(sut.dateLabel)
  XCTAssertTrue(subview.isDescendant(of: sut.view))
}
func test_view_shouldHaveLocationLabel() throws {
  let subview = try XCTUnwrap(sut.locationLabel)
  XCTAssertTrue(subview.isDescendant(of: sut.view))
}
func test_view_shouldHaveDescriptionLabel() throws {
  let subview = try XCTUnwrap(sut.descriptionLabel)
  XCTAssertTrue(subview.isDescendant(of: sut.view))
}</pre>
			<p>Add these tests one by one and make them pass. But make sure to only have one failing test at any time.</p>
			<p>Next, we need a map view to show the location of the to-do item if the location is set. Follow these steps to add it to the view:</p>
			<ol>
				<li value="1">Add the following test to <code>ToDoItemDetailsViewControllerTests</code>:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_view_shouldHaveMapView() throws {
  let subview = try XCTUnwrap(sut.mapView)
  XCTAssertTrue(subview.isDescendant(of: sut.view))
}</pre></li>
			</ol>
			<p>Run the test to confirm that this new test fails.</p>
			<ol>
				<li value="2">Add<a id="_idIndexMarker324"/> the <code>MapKit</code> import<a id="_idIndexMarker325"/> to <code>ToDoItemDetailsViewController</code> and<a id="_idIndexMarker326"/> add an outlet<a id="_idIndexMarker327"/> for the <code>mapView</code> view:<pre>// ToDoItemDetailsViewController.swift
import UIKit
import MapKit
 
class ToDoItemDetailsViewController: UIViewController {
  @IBOutlet var titleLabel: UILabel!
  @IBOutlet var dateLabel: UILabel!
  @IBOutlet var locationLabel: UILabel!
  @IBOutlet var descriptionLabel: UILabel!
  @IBOutlet var mapView: MKMapView!
}</pre></li>
			</ol>
			<p>Run the test<a id="_idIndexMarker328"/> again. It still fails, but<a id="_idIndexMarker329"/> this time because the <code>mapView</code> property is <code>nil</code>.</p>
			<ol>
				<li value="3">Open <code>Main.storyboard</code> and drag a <code>IBOutlet</code> property of the map view.</li>
			</ol>
			<p>Run the tests to confirm that all tests now pass.</p>
			<p>The last UI element we<a id="_idIndexMarker330"/> have to add to the<a id="_idIndexMarker331"/> view is the button to mark an item as <strong class="bold">Done</strong>. This works the same<a id="_idIndexMarker332"/> way as adding the labels previously. So again, this is left<a id="_idIndexMarker333"/> as an exercise for you. Here<a id="_idIndexMarker334"/> is the test<a id="_idIndexMarker335"/> to get you started:</p>
			<pre>// ToDoItemDetailsViewControllerTests.swift
func test_view_shouldHaveDoneButton() throws {
  let subview = try XCTUnwrap(sut.doneButton)
  XCTAssertTrue(subview.isDescendant(of: sut.view))
}</pre>
			<p>Make this test pass by adding a <code>UIButton</code> instance to the view controller.</p>
			<p>Before we move on, you should take some time to make this user interface better. Move the elements and add layout constraints so that the user interface is more pleasing to the eye. When you've finished, your result could look similar to the following figure:</p>
			<div><div><img src="img/Figure_8.08_B16497.jpg" alt="Figure 8.8 – The user interface for the details view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.8 – The user interface for the details view</p>
			<p>Now that we have<a id="_idIndexMarker336"/> the user interface<a id="_idIndexMarker337"/> for the details view, we can present the data of the to-do item when<a id="_idIndexMarker338"/> the details are pushed<a id="_idIndexMarker339"/> onto the screen. This<a id="_idIndexMarker340"/> is what we will implement<a id="_idIndexMarker341"/> in the following section.</p>
			<h1 id="_idParaDest-123"><a id="_idTextAnchor320"/>Filling in the data</h1>
			<p>Follow these steps<a id="_idIndexMarker342"/> to update the user interface<a id="_idIndexMarker343"/> with the data from the to-do item:</p>
			<ol>
				<li value="1">We start with a new test. Add the following test method to <code>ToDoItemDetailsViewControllerTests</code>:<pre>// TodoItemDetailsViewControllerTests.swift
func test_settingToDoItem_shouldUpdateTitleLabel() {
  let title = "dummy title"
  let toDoItem = ToDoItem(title: title)
  sut.toDoItem = toDoItem
}</pre></li>
			</ol>
			<p>At this point, we get an error from Xcode that <strong class="bold">Value of type 'ToDoItemDetailsViewController' has no member 'toDoItem'</strong>.</p>
			<ol>
				<li value="2">Go to <code>ToDoItemDetailsViewController</code> and add the <code>toDoItem</code> property:<pre>// ToDoItemDetailsViewController.swift
class ToDoItemDetailsViewController: UIViewController {
  @IBOutlet var titleLabel: UILabel!
  @IBOutlet var dateLabel: UILabel!
  @IBOutlet var locationLabel: UILabel!
  @IBOutlet var descriptionLabel: UILabel!
  @IBOutlet var mapView: MKMapView!
  @IBOutlet var doneButton: UIButton!
  var toDoItem: ToDoItem?
}</pre></li>
				<li>Now we can finish writing<a id="_idIndexMarker344"/> the test by adding<a id="_idIndexMarker345"/> the <code>Assert</code> call:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_settingToDoItem_shouldUpdateTitleLabel() {
  let title = "dummy title"
  let toDoItem = ToDoItem(title: title) 
  sut.toDoItem = toDoItem  
  XCTAssertEqual(sut.titleLabel.text, title)
}</pre></li>
			</ol>
			<p>Run the tests to confirm that this new test fails.</p>
			<ol>
				<li value="4">Go back to the implementation code and replace the property declaration with the following:<pre>// ToDoItemDetailsViewController.swift
var toDoItem: ToDoItem? {
  didSet {
    titleLabel.text = toDoItem?.title
  }
}</pre></li>
			</ol>
			<p>Run the tests again to confirm that all tests now pass.</p>
			<p>The tests and the implementation for the other labels work in a similar way, and are left for you to do as an exercise. To get you started, here are the tests:</p>
			<pre>// ToDoItemDetailsViewControllerTests.swift
func test_settingToDoItem_shouldUpdateDateLabel() {
  let date = Date()
  let toDoItem = ToDoItem(
    title: "dummy title",
    timestamp: date.timeIntervalSince1970)
 
  sut.toDoItem = toDoItem
 
  XCTAssertEqual(sut.dateLabel.text,
                 sut.dateFormatter.string(from: date))
}
func test_settingToDoItem_shouldUpdateDescriptionLabel() {
  let description = "dummy discription"
  let toDoItem = ToDoItem(
    title: "dummy title",
    itemDescription: description)
 
  sut.toDoItem = toDoItem
 
  XCTAssertEqual(sut.descriptionLabel.text, description)
}
func test_settingToDoItem_shouldUpdateLocationLabel() {
  let location = "dummy location"
  let toDoItem = ToDoItem(
    title: "dummy title",
    location: Location(name: location))
 
  sut.toDoItem = toDoItem
 
  XCTAssertEqual(sut.locationLabel.text, location)
}</pre>
			<p>Make these tests pass one by one. Make sure that you never have more than one failing test.</p>
			<p>The map view should<a id="_idIndexMarker346"/> show a map of the location<a id="_idIndexMarker347"/> of the to-do item when the to-do item contains a location with a coordinate. Follow these steps to add that feature:</p>
			<ol>
				<li value="1">Add the following test to <code>ToDoItemDetailsViewControllerTests</code>:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_settingToDoItem_shouldUpdateMapView() {
  let latitude = 51.225556
  let longitude = 6.782778
  let toDoItem = ToDoItem(
    title: "dummy title",
    location: Location(
      name: "dummy location",
      coordinate: Coordinate(latitude: latitude,
        longitude: longitude)))
 
  sut.toDoItem = toDoItem
 
  let center = sut.mapView.centerCoordinate
  XCTAssertEqual(center.latitude,
    latitude,
    accuracy: 0.000_01)
  XCTAssertEqual(center.longitude,
    longitude,
    accuracy: 0.000_01)
}</pre></li>
			</ol>
			<p>With this test, we test if the center coordinate of the map view is set to the coordinate of the location of the to-do item.</p>
			<p>Run all tests<a id="_idIndexMarker348"/> to confirm<a id="_idIndexMarker349"/> that this new test fails.</p>
			<ol>
				<li value="2">To make this test pass, add the following code to the <code>didSet</code> handler of the <code>toDoItem</code> property in <code>ToDoItemDetailsViewController</code>:<pre>// ToDoItemDetailsViewController.swift
if let coordinate = toDoItem?.location?.coordinate {
  mapView.setCenter(
    CLLocationCoordinate2D(
      latitude: coordinate.latitude,
      longitude: coordinate.longitude),
    animated: false)
}</pre></li>
			</ol>
			<p>Run the tests again to confirm that all tests now pass.</p>
			<p>When the presented to-do item is already done, the <strong class="bold">Done</strong> button should be disabled. Follow these steps to implement this feature:</p>
			<ol>
				<li value="1">Add the following test to <code>ToDoItemDetailsViewControllerTests</code>:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_settingToDoItem_shouldUpdateButtonState() {
  var toDoItem = ToDoItem(title: "dummy title")
  toDoItem.done = true
 
  sut.toDoItem = toDoItem
 
  XCTAssertFalse(sut.doneButton.isEnabled)
}</pre></li>
			</ol>
			<p>Run the tests to confirm that this new test fails.</p>
			<ol>
				<li value="2">To make this new test<a id="_idIndexMarker350"/> pass, add the following code<a id="_idIndexMarker351"/> to the <code>didSet</code> handler of the <code>toDoItem</code> property:<pre>// ToDoItemDetailsViewController.swift
doneButton.isEnabled = false</pre></li>
			</ol>
			<p>This code makes the test pass. Try it by running all tests. But this line of code is clearly wrong because it disables the <strong class="bold">Done</strong> button for all to-do items, even for those that are not done yet. To fix this bug, we need another test.</p>
			<ol>
				<li value="3">Add the following test to <code>ToDoItemDetailsViewControllerTests</code>:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_settingToDoItem_whenItemNotDone_
 shouldUpdateButtonState() {
  let toDoItem = ToDoItem(title: "dummy title")
 
  sut.toDoItem = toDoItem
 
  XCTAssertTrue(sut.doneButton.isEnabled)
}</pre></li>
			</ol>
			<p>Run the tests. This new test fails.</p>
			<ol>
				<li value="4">To make it pass, replace the <code>doneButton.isEnabled = false</code> line with the following code:<pre>// ToDoItemDetailsViewController.swift
doneButton.isEnabled = (toDoItem?.done == false)</pre></li>
			</ol>
			<p>Run all tests again to confirm that this code fixes the bug.</p>
			<p>Great! We are finished with updating the user interface with the information from the to-do item. In the following section, we will implement the functionality of the <strong class="bold">Done</strong> button.</p>
			<h1 id="_idParaDest-124"><a id="_idTextAnchor321"/>Checking the to-do item</h1>
			<p>When the user <a id="_idIndexMarker352"/>of the app taps the <strong class="bold">Done</strong> button, our app has to tell the to-do item store to change the item's status to <strong class="bold">Done</strong>. Follow these steps to implement that feature:</p>
			<ol>
				<li value="1">Add the following test method to <code>ToDoItemDetailsViewControllerTests</code>:<pre>// ToDoItemDetailsViewControllerTest.swift
func test_sendingButtonAction_shouldCheckItem() {
  let toDoItem = ToDoItem(title: "dummy title")
  sut.toDoItem = toDoItem
  let storeMock = ToDoItemStoreProtocolMock()
  sut.toDoItemStore = storeMock
}</pre></li>
			</ol>
			<p><code>ToDoItemDetailsViewController</code> doesn't have a property for <code>toDoItemStore</code>. This means we have<a id="_idIndexMarker353"/> to pause writing this test and add this property first.</p>
			<ol>
				<li value="2">Go to <code>ToDoItemDetailsViewController</code> and add the <code>toDoItemStore</code> property:<pre>// ToDoItemDetailsViewController.swift
var toDoItemStore: ToDoItemStoreProtocol?</pre></li>
				<li>Now we can finish the test:<pre>// ToDoItemDetailsViewControllerTests.swift
func test_sendingButtonAction_shouldCheckItem() {
  let toDoItem = ToDoItem(title: "dummy title")
  sut.toDoItem = toDoItem
  let storeMock = ToDoItemStoreProtocolMock()
  sut.toDoItemStore = storeMock
 
  sut.doneButton.sendActions(for: .touchUpInside)
 
  XCTAssertEqual(storeMock.checkLastCallArgument,
    toDoItem)
}</pre></li>
			</ol>
			<p>With the <code>sut.doneButton.sendActions(for: .touchUpInside)</code> call, we send the <code>.touchUpInside</code> action to the target of the <code>toDoItemStore</code> was called with the <code>toDoItem</code> variable of the system under test.</p>
			<ol>
				<li value="4">To add an action to the <code>Main.storyboard</code> file and the <code>ToDoItemDetailsViewController.swift</code> file side by side. Hold down the <em class="italic">Ctrl</em> key and drag a connection from the <strong class="bold">Done</strong> button<a id="_idIndexMarker354"/> into the code:</li>
			</ol>
			<div><div><img src="img/Figure_8.09_B18127.jpg" alt="Figure 8.9 – Drag a connection from the Done button to the code&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.9 – Drag a connection from the Done button to the code</p>
			<ol>
				<li value="5">Change <code>checkItem</code> in the <strong class="bold">Name</strong> field, and change <strong class="bold">Type</strong> to <strong class="bold">UIButton</strong>. Then click <strong class="bold">Connect</strong>:</li>
			</ol>
			<div><div><img src="img/Figure_8.10_B16497.jpg" alt="Figure 8.10 – Options for the button action&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.10 – Options for the button action</p>
			<ol>
				<li value="6">Next, change the action code to the following:<pre>// ToDoItemDetailsViewController.swift
@IBAction func checkItem(_ sender: UIButton) {
  if let toDoItem = toDoItem {
    toDoItemStore?.check(toDoItem)
  }
}</pre></li>
			</ol>
			<p>Run all tests to confirm that this makes all tests pass again.</p>
			<p>When the item is checked as <strong class="bold">Done</strong>, the <strong class="bold">Done</strong> button should be disabled to show the user that this task<a id="_idIndexMarker355"/> is finished. You will implement this feature in the exercises for this chapter.</p>
			<h1 id="_idParaDest-125"><a id="_idTextAnchor322"/>Summary</h1>
			<p>In this chapter, we built a simple detail view controller following test-driven development. We learned how to test a view controller that is set up using a storyboard. And finally, we figured out what we have to do to test the action of a button. </p>
			<p>The skills you gained in this chapter will help you in writing tests for all kinds of user interfaces, even those that are more complicated. You are now able to test the presence and the interaction of user interface elements with the rest of the code.</p>
			<p>In the next chapter, we will write tests for a view that is created using SwiftUI. For that task, we will have to add a third-party library from GitHub to our test target.</p>
			<h1 id="_idParaDest-126"><a id="_idTextAnchor323"/>Exercises</h1>
			<ol>
				<li value="1">When the user selects the <strong class="bold">Done</strong> button to show the task as finished, the <strong class="bold">Done</strong> button should be disabled to show the user that this action was successful. Implement this feature.</li>
				<li>Change the code so that the map view is hidden when no coordinate is set in the to-do item.</li>
			</ol>
		</div>
	</body></html>