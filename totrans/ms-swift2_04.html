<html><head></head><body><div class="chapter" title="Chapter&#xA0;4.&#xA0;Control Flow and Functions"><div class="titlepage"><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Control Flow and Functions</h1></div></div></div><p>While I was learning BASIC programming on my Vic-20, every month I would read several of the early computer magazines such as <span class="emphasis"><em>Byte Magazine</em></span>. I remember one particular review that I read; it was for a game called <span class="emphasis"><em>Zork</em></span>. While <span class="emphasis"><em>Zork</em></span> was not a game that was available for my Vic-20, the concept of the game fascinated me because I was really into Sci-Fi and fantasy. I remember thinking how cool it would be to write a game like that, so I decided to figure out how to do it. One of the biggest concepts that I had to grasp at that time was controlling the flow of the application depending on the user's actions.</p><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">What are conditional statements and how to use them</li><li class="listitem" style="list-style-type: disc">What are loops and how to use them</li><li class="listitem" style="list-style-type: disc">What are control transfer statements and how to use them</li><li class="listitem" style="list-style-type: disc">How to create and use functions in Swift</li></ul></div><div class="section" title="What we have learned so far"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec24"/>What we have learned so far</h1></div></div></div><p>Up to this point, we have been laying the foundation for writing applications with Swift. While it is possible to write a very basic application with what we have learned so far, it would be really difficult to write a useful application using only what we covered in the first three chapters.</p><p>Starting with this chapter, we will begin to move away from the foundations of the Swift language, and begin to learn the building blocks of application development with Swift. In this chapter, we will go over control flow and functions. To become a master of the Swift programming language, it is important that you fully understand and comprehend the concepts discussed in this chapter and in <a class="link" href="ch05.html" title="Chapter 5. Classes and Structures">Chapter 5</a>, <span class="emphasis"><em>Classes and Structures</em></span>.</p><p>Before we cover control flow and functions, let's take a look at how curly brackets and parentheses are used in Swift.</p><div class="section" title="Curly brackets"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec72"/>Curly brackets</h2></div></div></div><p>In Swift, unlike <a class="indexterm" id="id198"/>other C-like languages, curly brackets are required for conditional statements and loops. In other C-like languages, if there is only one statement to execute for a conditional statement or a loop, the curly brackets around that line are optional. This has lead to numerous errors and bugs, such as Apple's <code class="literal">goto fail</code> bug; therefore, when Apple was designing Swift, they decided to use curly brackets, even when there is only one line of code to execute. Let's look at some code that illustrates this. This first example is not valid in Swift because it is missing the curly brackets; however, it will be valid in most other languages:</p><div class="informalexample"><pre class="programlisting">if (x &gt; y)
  x=0</pre></div><p>In Swift, you are required to have the curly brackets, as illustrated in the following example:</p><div class="informalexample"><pre class="programlisting">if (x &gt; y) {
  x=0
}</pre></div></div><div class="section" title="Parentheses"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec73"/>Parentheses</h2></div></div></div><p>Unlike other C-like <a class="indexterm" id="id199"/>languages, the parentheses around conditional expressions in Swift are optional. In the preceding example, we put parentheses around the conditional expression, but they are not required. The following example would be valid in Swift, but not valid in most C-like languages:</p><div class="informalexample"><pre class="programlisting">if x &gt; y {
  x=0
}</pre></div></div></div></div>
<div class="section" title="Control flow"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec25"/>Control flow</h1></div></div></div><p>Control flow, also<a class="indexterm" id="id200"/> known as flow of control, refers to the order in which statements, instructions, or functions are executed within an application. Swift supports all of the familiar control flow statements that are in C-like languages. These include loops (including <code class="literal">for</code> and <code class="literal">while</code>), conditional statements (including <code class="literal">if</code> and <code class="literal">switch</code>) and the transfer of the control statements (including <code class="literal">break</code> and <code class="literal">continue</code>). In addition to the standard C control flow statements, Swift has also added additional statements, such as the <code class="literal">for-in</code> loop, and enhanced some of the existing statements, such as the <code class="literal">switch</code> statement.</p><p>Let's begin by looking at conditional statements in Swift.</p><div class="section" title="Conditional statements"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec74"/>Conditional statements</h2></div></div></div><p>A <a class="indexterm" id="id201"/>conditional statement <a class="indexterm" id="id202"/>will check a condition and execute a block of code only if the condition is true. Swift provides both the <code class="literal">if</code> and <code class="literal">if-else</code> conditional statements. Let's take a look at how to use these conditional statements to execute blocks of code if a specified condition is true.</p><div class="section" title="The if statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec08"/>The if statement</h3></div></div></div><p>The <code class="literal">if</code> statement <a class="indexterm" id="id203"/>will check the conditional statement and if it is true, it will execute the block of code. The <code class="literal">if</code> statement takes the following format:</p><div class="informalexample"><pre class="programlisting">if condition {
   block of code
}</pre></div><p>Now, let's look at how to use the <code class="literal">if</code> statement:</p><div class="informalexample"><pre class="programlisting">let teamOneScore = 7
let teamTwoScore = 6
if teamOneScore &gt; teamTwoScore {
    print("Team One Won")
}</pre></div><p>In the preceding example, we begin by setting the <code class="literal">teamOneScore</code> and <code class="literal">teamTwoScore</code> constants. We then use the <code class="literal">if</code> statement to check whether the value of <code class="literal">teamOneScore</code> is greater than the value of <code class="literal">teamTwoScore</code>. If the value is greater, we print <code class="literal">Team One Won</code> to the console. If we run this code, we will indeed see that <code class="literal">Team One Won</code> is printed to the console, but if the value of <code class="literal">teamTwoScore</code> was greater than the value of <code class="literal">teamOneScore</code>, nothing would be printed to the console. That would not be the best way to write an application because we would want the user to know which team actually won. The <code class="literal">if-else</code> statement can help us with this problem.</p></div><div class="section" title="Conditional code execution with the if-else statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec09"/>Conditional code execution with the if-else statement</h3></div></div></div><p>The <code class="literal">if-else</code> statement <a class="indexterm" id="id204"/>will check the conditional statement and if it is true, it will execute a block of code. If the conditional statement is not true, it will execute a separate block of code. The <code class="literal">if-else</code> statement follows this format:</p><div class="informalexample"><pre class="programlisting">if condition {
    block of code if true
} else {
    block of code if not true
}</pre></div><p>Let's modify the preceding example to use the <code class="literal">if-else</code> statement to tell the user which team won:</p><div class="informalexample"><pre class="programlisting">var teamOneScore = 7
var teamTwoScore = 6
if teamOneScore &gt; teamTwoScore {
    print("Team One Won")
} else {
    print("Team Two Won")
}</pre></div><p>This new <a class="indexterm" id="id205"/>version will print out <code class="literal">Team One Won</code>, if the value of <code class="literal">teamOneScore</code> is greater than the value of <code class="literal">teamTwoScore</code>; otherwise, it will print out the message, <code class="literal">Team Two Won</code>. What do you think the code will do if the value of <code class="literal">teamOneScore</code> was equal to the value of <code class="literal">teamTwoScore</code>? In the real world, we will have a tie, but in the preceding code, we will print out <code class="literal">Team Two Won</code>; this would not be fair to team one. In cases like this, we can use multiple <code class="literal">else if</code> statements and a plain <code class="literal">else</code> statement, as shown in the following example:</p><div class="informalexample"><pre class="programlisting">var teamOneScore = 7
var teamTwoScore = 6
if teamOneScore &gt; teamTwoScore {
    print("Team One Won")
} else if teamTwoScore &gt; teamOneScore {
    print("Team Two Won")
} else {
    print("We have a tie")
}</pre></div><p>In the preceding code, if the value of <code class="literal">teamOneScore</code> is greater than the value of <code class="literal">teamTwoScore</code>, we print <code class="literal">Team One Won</code> to the console. We then have another <code class="literal">if</code> statement that checks to see whether the value of <code class="literal">teamTwoScore</code> is greater than the value of <code class="literal">teamOneScore</code>, but this <code class="literal">if</code> statement follows an <code class="literal">else</code> statement, which means the <code class="literal">if</code> statement is checked only if the previous conditional statement is false. Finally, if both the <code class="literal">if</code> statements were false, then we assume that the values are equal and print <code class="literal">We have a tie</code> to the console.</p><p>A conditional statement checks the condition once, and if the condition is met, it executes the block of code. What if we wanted to continuously execute the block of code until a condition is met? For this, we would use one of the looping statements that are in Swift. Let's take a look at looping statements in Swift.</p></div></div><div class="section" title="The for loops"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec75"/>The for loops</h2></div></div></div><p>The<a class="indexterm" id="id206"/> for loop <a class="indexterm" id="id207"/>variants are probably the most widely used looping statements. Swift offers the standard C-based for loop and also an extra <code class="literal">for-in</code> loop. The standard C-based <code class="literal">for</code> loop executes a block of code until a condition is met, usually by incrementing or decrementing a counter. The <code class="literal">for-in</code> statement will execute a block of code for each item in a range, collection, or sequence. We usually use one of the for loop variants when we need to iterate over a collection, or have a set number of times we want to execute a block of code.</p><div class="section" title="Using the for loop variant"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec10"/>Using the for loop variant</h3></div></div></div><p>Let's begin by <a class="indexterm" id="id208"/>looking at the standard C-based <code class="literal">for</code> loop and how we would use it. The format for the <code class="literal">for</code> statement looks similar to this:</p><div class="informalexample"><pre class="programlisting">for initialization; condition; update-rule {
   block of code
}</pre></div><p>As shown in the preceding format, the <code class="literal">for</code> loop has three sections:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Initialization</code>: This is where we initialize any variables needed; this can contain multiple initializations, separated by commas, if needed</li><li class="listitem" style="list-style-type: disc"><code class="literal">Condition</code>: This is the condition to check; when the condition is false, the loop will exit</li><li class="listitem" style="list-style-type: disc"><code class="literal">Update-rule</code>: This is what needs to be updated at the end of each loop</li></ul></div><p>It is important to understand the order in which the sections are called. When the execution of the code encounters a <code class="literal">for</code> loop, the initialization section of the <code class="literal">for</code> loop is called to initialize the variables. Next, the condition section is executed to verify whether the block of code should be executed, and, if so, it will execute the block of code. Finally, the update-rule is called to perform any updates before looping back and starting over.</p><p>The following example shows how to use the <code class="literal">for</code> loop to go through a range of numbers:</p><div class="informalexample"><pre class="programlisting">for var index = 1; index &lt;= 4; index++ {
    print(index)
}</pre></div><p>In the preceding example, the <code class="literal">index</code> variable is initialized to the number <code class="literal">1</code>. At the beginning of each loop, we check whether the <code class="literal">index</code> variable is equal to or less than number <code class="literal">4</code>. If the <code class="literal">index</code> variable is equal to or less than number <code class="literal">4</code>, the inner block of code is executed, and this prints the value of the <code class="literal">index</code> variable to the console. Finally, we increment the <code class="literal">index</code> variable before looping back and starting over. Once the index variable is greater than <code class="literal">4</code>, the <code class="literal">for</code> loop exits. If we run the preceding example, the numbers <code class="literal">1</code> through <code class="literal">4</code> will indeed be printed to the console.</p><p>One of the most common uses of a <code class="literal">for</code> loop is to iterate through a collection and perform a block of code for each item in that collection. Let's look at how to loop through an array, followed by an example of how to loop through a dictionary:</p><div class="informalexample"><pre class="programlisting">var countries = ["USA","UK", "IN"]
for var index = 0; index &lt; countries.count; index++ {
    print(countries[index])
}</pre></div><p>In the preceding <a class="indexterm" id="id209"/>example, we begin by initializing the <code class="literal">countries</code> array with the abbreviations of three countries. In the <code class="literal">for</code> loop, we initialize the <code class="literal">index</code> variable to <code class="literal">0</code> (the first index of the array), and in the condition statement of the <code class="literal">for</code> loop, we check whether the index variable is less than the number of elements in the <code class="literal">countries</code> array. Each time we loop, we retrieve and print the value from the <code class="literal">countries</code> array at the index specified by the <code class="literal">index</code> variable.</p><p>One of the biggest mistakes that new programmers make when they use a <code class="literal">for</code> loop to iterate through an array is to use the less than or equal to (<code class="literal">&lt;=</code>) operator rather than the less than (<code class="literal">&lt;</code>) operator. Using a less than or equal to (<code class="literal">&lt;=</code>) operator would cause one too many iterations through the loop and generate an <code class="literal">Index out of Bounds</code> exception when the code is run. In the preceding example, a less than or equal to operator will generate a count from 0 to 3 inclusively because there are three elements in the array; however, the elements in the array have indexes from 0 to 2 (0, 1, and 2). So, when we try to retrieve the value at index <code class="literal">3</code>, the <code class="literal">Index out of Bounds</code> exception will be thrown. It is recommended to use a <code class="literal">for-in</code> loop to iterate through an array rather than a standard <code class="literal">for</code> loop. We will look at the <code class="literal">for-in</code> loop a little later in this chapter.</p><p>Let's look at how we would iterate through a dictionary with a standard C-based <code class="literal">for</code> loop:</p><div class="informalexample"><pre class="programlisting">var dic = ["USA": "United States", "UK": "United Kingdom", "IN":"India"]

var keys  = Array(dic.keys)
for var index = 0; index &lt; keys.count; index++ {
  print(dic[keys[index]])
}</pre></div><p>In the preceding example, we begin by creating a dictionary object that contains country names as the values with their abbreviations as the keys. We then use the <code class="literal">keys</code> property of the dictionary to get an array of keys. In the <code class="literal">for</code> loop, we initialize the <code class="literal">index</code> variable to <code class="literal">0</code>, verify whether the <code class="literal">index</code> variable is less than the number of elements in the countries array, and increment the <code class="literal">index</code> variable at the end of each loop. Each time we loop, we print the country's name to the console.</p><p>Now, let's look at how to use the <code class="literal">for-in</code> statement and how it can help prevent common mistakes that occur when we use the standard <code class="literal">for</code> statement.</p></div><div class="section" title="Using the for-in loop variant"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec11"/>Using the for-in loop variant</h3></div></div></div><p>In the standard <code class="literal">for</code> loop, we <a class="indexterm" id="id210"/>provide an index and then loop until a condition is met. While this approach is very good, when we want to loop through a range of numbers, it can cause bugs, as mentioned earlier, if our conditional statements are not correct. The <code class="literal">for-in</code> loop is designed to prevent these types of exceptions.</p><p>The <code class="literal">for-in</code> loop iterates over a collection of items or a range of numbers and executes a block of code for each item in the collection or range. The format for the <code class="literal">for-in</code> statement looks similar to this:</p><div class="informalexample"><pre class="programlisting">for variable in Collection/Range {
  block of code
}</pre></div><p>As we can see in the preceding code, the <code class="literal">for-in</code> loop has two sections:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Variable</code>: This variable will change each time the <code class="literal">for-in</code> loop executes and hold the current item from the collection or range</li><li class="listitem" style="list-style-type: disc"><code class="literal">Collection/Range</code>: This is the collection or range to iterate through</li></ul></div><p>Let's take a look at how to use the <code class="literal">for-in</code> loop to iterate through a range of numbers:</p><div class="informalexample"><pre class="programlisting">for index in 1...5 {
    print(index)
}</pre></div><p>In the preceding example, we iterate over a range of numbers from <code class="literal">1</code> to <code class="literal">5</code> and print each of the numbers to the console. This particular <code class="literal">for-in</code> statement uses the closed range operator (<code class="literal">…</code>) to give the <code class="literal">for-in</code> loop a range to go through. Swift also provides a second range operation called the half-open range operator (<code class="literal">..&lt;</code>). The half-open range operator iterates through the range of numbers, but does not include the last number. Let's look at how to use the half-range operator:</p><div class="informalexample"><pre class="programlisting">for index in 1..&lt;5 {
  print(index)
}</pre></div><p>In the closed range operator example (<code class="literal">…</code>), we will see the numbers <code class="literal">1</code> though <code class="literal">5</code> printed to the console. In the half-range operator example, the last number (<code class="literal">5</code>) will be excluded; therefore, we will see the numbers <code class="literal">1</code> though <code class="literal">4</code> printed to the console.</p><p>Now, let's look at how to iterate over an array with the <code class="literal">for-in</code> loop:</p><div class="informalexample"><pre class="programlisting">var countries = ["USA","UK", "IN"]
for item in countries {
    print(item)
}</pre></div><p>In the preceding example, we iterate through the <code class="literal">countries</code> array and print each element of the <code class="literal">counties</code> array to the<a class="indexterm" id="id211"/> console. As we can see, iterating through an array with the <code class="literal">for-in</code> loop is safer, cleaner, and a lot easier than using the standard C-based <code class="literal">for</code> loop. Using the <code class="literal">for-in</code> loop prevents us from making common mistakes, such as using the <code class="literal">&lt;=</code> (less than or equal too) operator rather than the <code class="literal">&lt;</code> (less than) operator in our conditional statement.</p><p>Let's look at how to iterate over a dictionary with the <code class="literal">for-in</code> loop:</p><div class="informalexample"><pre class="programlisting">var dic = ["USA": "United States", "UK": "United Kingdom", "IN":"India"]

for (abbr, name) in dic {
  print("\(abbr) --  \(name)")
}</pre></div><p>In the preceding example, we used the <code class="literal">for-in</code> loop to iterate through each key-value pair of a dictionary. In this example, each item in the dictionary is returned as a (key,value) tuple. We can decompose (key,value) tuple members as named constants within the body of the <code class="literal">for-in</code> loop. One thing to note is that since a dictionary does not guarantee the order that items are stored in, the order that they are iterated over may not be the same as the order they were inserted in.</p><p>Now, let's look at another type of loop, the <code class="literal">while</code> loop.</p></div></div><div class="section" title="The while loop"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec76"/>The while loop</h2></div></div></div><p>The <code class="literal">while</code> loop <a class="indexterm" id="id212"/>executes a block of code until a condition is met. Swift provides two forms of <code class="literal">while</code> loops; these are the <code class="literal">while</code> and <code class="literal">repeat-while</code> loops. In Swift 2.0, Apple replaced the <code class="literal">do-while</code> loop with the <code class="literal">repeat-while</code> loop.  The <code class="literal">repeat-while</code> loop functions exactly as what the <code class="literal">do-while</code> loop did. Apple now uses the <code class="literal">do</code> statement for error handling.</p><p>We use the<a class="indexterm" id="id213"/> <code class="literal">while</code> loops when the number of iterations to perform is not known and is usually dependent on some business logic. A <code class="literal">while</code> loop is used when you want to run a loop zero or more times, while a <code class="literal">repeat-while</code> loop is used when you want to run the loop one or more times.</p><div class="section" title="Using the while loop"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec12"/>Using the while loop</h3></div></div></div><p>The <code class="literal">while</code> loop <a class="indexterm" id="id214"/>starts by evaluating a conditional statement and then repeatedly executes a block of code if the conditional statement is true. The format for the <code class="literal">while</code> statement is as follows:</p><div class="informalexample"><pre class="programlisting">while condition {
  block of code
}</pre></div><p>Let's look at how to use a <code class="literal">while</code> loop. In the following example, the <code class="literal">while</code> loop will continue to loop if a randomly-generated number is less than <code class="literal">4</code>. In this example, we are using the <code class="literal">arc4random()</code> function to generate a random number between <code class="literal">0</code> and <code class="literal">4</code>:</p><div class="informalexample"><pre class="programlisting">var ran = 0
while ran &lt; 4 {
    ran = Int(arc4random() % 5)
}</pre></div><p>In the <a class="indexterm" id="id215"/>preceding example, we begin by initializing the <code class="literal">ran</code> variable to <code class="literal">0</code>. The <code class="literal">while</code> loop then checks the <code class="literal">ran</code> variable, and if its value is less than <code class="literal">4</code>, a new random number, between <code class="literal">0</code> and <code class="literal">4</code>, is generated. The <code class="literal">while</code> loop will continue to loop while the randomly-generated number is less than <code class="literal">4</code>. Once the randomly-generated number is equal to or greater than <code class="literal">4</code>, the <code class="literal">while</code> loop will exit.</p><p>In the preceding example, the <code class="literal">while</code> loop checks the conditional statement prior to generating a new random number. What if we did not want to check the conditional statement prior to generating a random number? We could generate a random number when we first initialize the <code class="literal">ran</code> variable, but that would mean we would need to duplicate the code that generates the random numbers, and duplicating code is never an ideal solution. It would be preferable to use the <code class="literal">repeat-while</code> loop for such instances.</p></div><div class="section" title="Using the repeat-while loop"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec13"/>Using the repeat-while loop</h3></div></div></div><p>The<a class="indexterm" id="id216"/> difference between the <code class="literal">while</code> and <code class="literal">repeat-while</code> loops is that the <code class="literal">while</code> loops check the conditional statement prior to executing the block of code the first time; therefore, all the variables in the conditional statements need to be initialized prior to executing the <code class="literal">while</code> loop. The <code class="literal">repeat-while</code> loop will run through the loop block prior to checking the <code class="literal">conditional</code> statement for the first time; this means that we can initialize the variables in the conditional block of code. Use of the <code class="literal">repeat-while</code> loop is preferred when the conditional statement is dependent on the code in the loop block. The <code class="literal">repeat-while</code> loop takes the following format:</p><div class="informalexample"><pre class="programlisting">repeat {
   block of code
} while condition</pre></div><p>Let's take a look at this specific example by creating a <code class="literal">repeat-while</code> loop where we initialize the variable we are checking, in the conditional <code class="literal">while</code> statement, within the loop block:</p><div class="informalexample"><pre class="programlisting">var ran: Int
repeat {
    ran = Int(arc4random() % 5)
} while ran &lt; 4</pre></div><p>In the preceding example, we define the <code class="literal">ran</code> variable as an <code class="literal">Int</code>, but we do not initialize it until we enter the loop block and generate a random number. If we try to do this with the <code class="literal">while</code> loop (leaving the <code class="literal">ran</code> variable uninitialized), we will receive a <code class="literal">Variable used before being initialized</code> exception.</p></div></div><div class="section" title="The switch statement"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec77"/>The switch statement</h2></div></div></div><p>The <code class="literal">switch</code> statement<a class="indexterm" id="id217"/> takes a value and then compares it to the <a class="indexterm" id="id218"/>several possible matches, and executes the appropriate block of code based on the first successful match. The <code class="literal">switch</code> statement is an alternative to using the <code class="literal">if-else</code> statement when there could be several possible matches. The <code class="literal">switch</code> statement takes the following format:</p><div class="informalexample"><pre class="programlisting">switch value {
  case match1 :
    block of code
  case match2 :
    block of code
  …… as many cases as needed
  default :
    block of code
}</pre></div><p>Unlike the <a class="indexterm" id="id219"/>
<code class="literal">switch</code> statements in most other languages, in Swift, it does not fall through to the next <code class="literal">case</code> statement; therefore, we do not need to use a <code class="literal">break</code> statement to prevent the fall through. This is another safety feature that is built into Swift since one of the most common programming mistakes, with the <code class="literal">switch</code> statement, made by beginner programmers is to forget the <code class="literal">break</code> statement at the end of the <code class="literal">case</code> statement. Let's look at how to use the <code class="literal">switch</code> statement:</p><div class="informalexample"><pre class="programlisting">var speed = 300000000
switch speed {
case 300000000:
    print("Speed of light")
case 340:
    print("Speed of sound")
default:
    print("Unknown speed")
}</pre></div><p>In the preceding example, the <code class="literal">switch</code> statement takes the value of the <code class="literal">speed</code> variable and compares it to the two <code class="literal">case</code> statements, and if the value of speed matches either case, it will print out what the speed is. If the <code class="literal">switch</code> statement does not find a match, it will print out the <code class="literal">Unknown speed</code> message.</p><p>Every <code class="literal">switch</code> statement must have a match for all the possible values. This means that unless we are matching against an enum, each <code class="literal">switch</code> statement must have a <code class="literal">default</code> case. Let's look at a case where we do not have a <code class="literal">default</code> case:</p><div class="informalexample"><pre class="programlisting">var num = 5
switch num {
case 1 :
    print("number is one")
case 2 :
    print("Number is two")
case 3 :
    print("Number is three")
}</pre></div><p>If we put <a class="indexterm" id="id220"/>the preceding code into a Playground and attempt to compile the code, we will receive a <code class="literal">switch must be exhaustive, consider adding a default clause</code> error. This is a compile time error; therefore, we will not be notified until we attempt to compile the code.</p><p>It is possible to include multiple items in a single case. To set multiple items within a single case, we would need to separate the items with a comma. Let's look at how we would use the <code class="literal">switch</code> statement to tell us if a character was a vowel or a consonant:</p><div class="informalexample"><pre class="programlisting">var char : Character = "e"
switch char {
case "a", "e", "i", "o", "u":
    print("letter is a vowel")
case "b", "c", "d", "f", "g", "h", "j", "k", "l", "m",
"n", "p", "q", "r", "s", "t", "v", "w", "x", "y", "z":
    print("letter is a consonant")
default:
    print("unknown letter")
}</pre></div><p>We can see in the preceding example that each case has its multiple items. Commas separate these items and the <code class="literal">switch</code> statement will attempt to match the <code class="literal">char</code> variable to each item listed in the <code class="literal">case</code> statement.</p><p>It is also possible to check the value of a <code class="literal">switch</code> statement to see whether it is included in a range. To do this, we would use a range operator in the <code class="literal">case</code> statement, as shown in the following example:</p><div class="informalexample"><pre class="programlisting">var grade = 93
switch grade {
case 90...100:
    print("Grade is an A")
case 80...89:
    print("Grade is a B")
case 70...79:
    print("Grade is an C")
case 60...69:
    print("Grade is a D")
case 0...59:
    print("Grade is a F")
default:
    print("Unknown Grade")
}</pre></div><p>In the preceding <a class="indexterm" id="id221"/>example, the <code class="literal">switch</code> statement takes the <code class="literal">grade</code> variable and compares it with the <code class="literal">grade</code> ranges in each <code class="literal">case</code> statement, and prints out the appropriate grade.</p><p>In Swift, any <code class="literal">case</code> statement can contain an optional guard condition that can provide an additional condition to validate. The guard condition is defined with the <code class="literal">where</code> keyword. Let's say, in our preceding example, we had students who were receiving special assistance in the class and we wanted to define a grade of <code class="literal">D</code> for them in the range of <code class="literal">55</code> to <code class="literal">69</code>. The following example shows how to do this:</p><div class="informalexample"><pre class="programlisting">var studentId = 4
var grade = 57
switch grade {
case 90...100:
    print("Grade is an A")
case 80...89:
    print("Grade is a B")
case 70...79:
    print("Grade is an C")
case 55...69 where studentId == 4:
    print("Grade is a D for student 4")
case 60...69:
    print("Grade is a D")
case 0...59:
    print("Grade is a F")
default:
    print("Unknown Grade")
}</pre></div><p>One thing to keep in mind with the guard expression is that Swift will attempt to match the value starting with the first case statement and working its way down checking each case statement in order. This means that if we put the <code class="literal">case</code> statement with the guard expression after the Grade F <code class="literal">case</code> statement, then the <code class="literal">case</code> statement with the guard expression would never be reached. The following example illustrates this:</p><div class="informalexample"><pre class="programlisting">var studentId = 4
var grade = 57
switch grade {
case 90...100:
    print("Grade is an A")
case 80...89:
    print("Grade is a B")
case 70...79:
    print("Grade is an C")
case 60...69:
    print("Grade is a D")
case 0...59:
    print("Grade is a F")
//The following case statement would never be reached because the
//grades would always match one of the previous two
case 55...69 where studentId == 4:
    print("Grade is a D for student 4")
default:
    print("Unknown Grade")
}</pre></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>A good rule of thumb is that if you are using guard expressions, always put the <code class="literal">case</code> statements with the guard condition before any similar <code class="literal">case</code> statements without guard expressions.</p></div></div><p>
<code class="literal">Switch</code> statements <a class="indexterm" id="id222"/>are also extremely useful for evaluating enumerations. Since an enumeration has a finite number of values, if we provide a <code class="literal">case</code> statement for all the values in the enumeration, we do not need to provide a default case. The following example shows how we can use a <code class="literal">switch</code> statement to evaluate an enumeration:</p><div class="informalexample"><pre class="programlisting"> Product {
    case Book(String, Double, Int)
    case Puzzle(String, Double)
}

var order = Product.Book("Mastering Swift 2", 49.99, 2015)

switch order {
case .Book(let name, let price, let year):
    print("You ordered the book \(name) for \(price)")
case .Puzzle(let name, let price):
    print("You ordered the Puzzle \(name) for \(price)")
}</pre></div><p>In this example, we begin by defining an enumeration named <code class="literal">Product</code> with two values each with the associated values. We then create an <code class="literal">order</code> variable of the product type and use the <code class="literal">switch</code> statement to evaluate it. Notice that we did not put a default case at the end of the <code class="literal">switch</code> statement. If we add additional values to the product enumeration at a later time, we would need to either put a default case at the end of the <code class="literal">switch</code> statement or add additional <code class="literal">case</code> statements to handle the additional values.</p></div><div class="section" title="Using case and where statements with conditional statements"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec78"/>Using case and where statements with conditional statements</h2></div></div></div><p>As we saw in<a class="indexterm" id="id223"/> the last section, the <code class="literal">case</code> and <code class="literal">where</code> statements within a <code class="literal">switch</code> statement can be very powerful. Starting with Swift 2, we are able to use these statements with other conditional statements such as the <code class="literal">if</code>, <code class="literal">for</code>, and <code class="literal">while</code> statements. Using the <code class="literal">case</code> and <code class="literal">where</code> statements within our conditional statements can make our code much smaller and easier to read. Let's look at some examples starting off with using the <code class="literal">where</code> statement to filter the results in a <code class="literal">for-in</code> loop.</p><div class="section" title="Filtering with the where statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec14"/>Filtering with the where statement</h3></div></div></div><p>In this section, we will <a class="indexterm" id="id224"/>see how we can use the <code class="literal">where</code> statement to filter the results of a <code class="literal">for-in</code> loop. For the example, we will take an array of integers and print out only the even numbers; however, before we look at how we would filter the results with the <code class="literal">where</code> statement, let's look at how we would do this without the <code class="literal">where</code> statement:</p><div class="informalexample"><pre class="programlisting">for number in 1…30 {
    if number % 2 == 0 {
        print(number)
    }
}</pre></div><p>In this example, we use a <code class="literal">for-in</code> loop to cycle through the numbers <code class="literal">1</code> to <code class="literal">30</code>. Within the <code class="literal">for-in</code> loop, we use an <code class="literal">if</code> conditional statement to filter out the odd numbers. In this simple example, the code is fairly easy to read, but let's see how we can use the <code class="literal">where</code> statement to use less lines of code and make it easier to read:</p><div class="informalexample"><pre class="programlisting">for number in 1...30 where number % 2 == 0 {
    print(number)
}</pre></div><p>We still have the same <code class="literal">for-in</code> loop as the previous example; however, now we put the <code class="literal">where</code> statement at the end, which, in this particular example, we only loop through the even numbers. Using the <code class="literal">where</code> statement shortens our example by two lines and also makes it easier to read because the filter statement is on the same line as the <code class="literal">for-in</code> loop rather than being embedded in the loop itself.</p><p>Now let's look at how we could filter with the <code class="literal">for-case</code> statement.</p></div><div class="section" title="Filtering with the for-case statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec15"/>Filtering with the for-case statement</h3></div></div></div><p>In this next example, we<a class="indexterm" id="id225"/> will use the <code class="literal">for-case</code> statement to filter through an array of tuples and print out only the results that match our criteria. The <code class="literal">for-case</code> example is very similar to using the <code class="literal">where</code> statement that we saw earlier where it is designed to eliminate the need for an <code class="literal">if</code> statement within a loop to filter the results. In this example, we will use the <code class="literal">for-case</code> statement to filter through a list of World Series winners and print out the year(s) a particular team won the World Series:</p><div class="informalexample"><pre class="programlisting">var worldSeriesWinners = [
    ("Red Sox", 2004),
    ("White Sox", 2005),
    ("Cardinals", 2006),
    ("Red Sox", 2007),
    ("Phillies", 2008),
    ("Yankees", 2009),
    ("Giants", 2010),
    ("Cardinals", 2011),
    ("Giants", 2012),
    ("Red Sox", 2013),
    ("Giants", 2014)
]

for case let ("Red Sox", year) in worldSeriesWinners {
    print(year)
}</pre></div><p>In this example, we create an array of tuples named <code class="literal">worldSeriesWinners</code>, where each tuple in the array contains the name of the team and the year that they won the World Series. We then use the <code class="literal">for-case</code> statement to filter through the array and only print out the years that the Red Sox won the World Series. The filtering is done within the <code class="literal">case</code> statement where the <code class="literal">("Red Sox", year)</code> says that we want all the results that have the String, <code class="literal">"Red Sox"</code>, in the first item of the tuple and the value of the second item into the <code class="literal">year</code> constant. The <code class="literal">for</code> loop then loops through the results of the <code class="literal">case</code> statement, and we print out the value of the <code class="literal">year</code> constant.</p><p>The <code class="literal">for-case</code> statement also makes it very easy to filter out the nil values in an array of optionals. Let's take a look at an example of this:</p><div class="informalexample"><pre class="programlisting">let myNumbers: [Int?] = [1, 2, nil, 4, 5, nil, 6]

for case let .Some(num) in myNumbers {
    print(num)
}</pre></div><p>In this example, we create an array of optionals named <code class="literal">myNumbers</code> that may contain an integer value or may contain nil. As we will see in <a class="link" href="ch10.html" title="Chapter 10. Using Optional Types">Chapter 10</a>, <span class="emphasis"><em>Using Optional Types</em></span>, an optional is defined as an enum internally, as shown in the following code:</p><div class="informalexample"><pre class="programlisting">enum Optional&lt;T&gt; {
     case None,
     case Some(T)
}</pre></div><p>If an optional<a class="indexterm" id="id226"/> is set to nil, it will have a value of <code class="literal">None</code>, but if it is not nil, then it will have a value of <code class="literal">Some</code> with an associate type of the actual value. In our example, when we filter for <code class="literal">.Some(num)</code> , we are looking for any optional that has the value of <code class="literal">.Some (non-nil value)</code>. As shorthand for <code class="literal">.Some()</code>, we could use the <code class="literal">?</code> (question mark) symbol, as we will see in the following example.</p><p>We can also combine <code class="literal">for-case</code> with a <code class="literal">where</code> statement to do additional filtering, as shown in the following example:</p><div class="informalexample"><pre class="programlisting">let myNumbers: [Int?] = [1, 2, nil, 4, 5, nil, 6]

for case let num? in myNumbers where num &gt; 3 {
    print(num)
}</pre></div><p>This example is the same as the previous example except that we added the additional filtering with the <code class="literal">where</code> statement. In the previous example, we looped through all of the non-nil values, but in this example, we loop through the non-nil values that are greater than 3. Let's see how we do this same filtering without the <code class="literal">case</code> or <code class="literal">where</code> statements:</p><div class="informalexample"><pre class="programlisting">for num in myNumbers {
    if let num = num {
        if num &gt; 3 {
            print(num)
        }
    }
}</pre></div><p>As we can see, using the <code class="literal">for-case</code> and <code class="literal">where</code> statements can greatly reduce the number of lines needed. It also makes our code much easier to read because all of the filtering statements are on the same line.</p><p>Let's look at one more filtering example. This time, we will look at the <code class="literal">if-case</code> statement.</p></div><div class="section" title="Using the if-case statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec16"/>Using the if-case statement</h3></div></div></div><p>Using the <code class="literal">if-case</code> statement<a class="indexterm" id="id227"/> is very similar to using the <code class="literal">switch</code> statement. The majority of time the <code class="literal">switch</code> statement is preferred, but there are instances where the <code class="literal">if-case</code> statement is better. One of these times is when we are only looking for one or two possible matches, and we do not want to handle all of the possible matches. Let's look at an example of this:</p><div class="informalexample"><pre class="programlisting">enum Identifier {
    case Name(String)
    case Number(Int)
    case NoIdentifier
}

var playerIdentifier = Identifier.Number(42)

if case let .Number(num) = playerIdentifier {
    print("Player's number is \(num)")
}</pre></div><p>In this example, we create an enumeration named <code class="literal">Identifier</code> that contains three possible values: <code class="literal">Name</code>, <code class="literal">Number</code>, and <code class="literal">NoIdentifier</code>. We create an instance of the <code class="literal">Identifier</code> enumeration named <code class="literal">playerIdentifier</code> with a value of <code class="literal">Number</code> and an associated value of <code class="literal">42</code>. We then use the <code class="literal">if-case</code> statement to see if the <code class="literal">playerIdentifier</code> has a value of <code class="literal">Number</code>, and if so, we print a message to the console.</p><p>Just like the <code class="literal">for-case</code> statement, we are able to do additional filtering with the <code class="literal">where</code> statement. The following example uses the same <code class="literal">Identifier</code> enumeration as we used in the previous example:</p><div class="informalexample"><pre class="programlisting">var playerIdentifier = Identifier.Number(42)

if case let .Number(num) = playerIdentifier where num == 2 {
    print("Player is either Xander Bogarts or Derek Jeter")
}</pre></div><p>In this example, we still use the <code class="literal">if-case</code> statement to see if the <code class="literal">playerIdentifier</code> has a value of <code class="literal">Number</code>, but we added the <code class="literal">where</code> statement to see if the associate value is equal to <code class="literal">42</code>, and if so, we identify the player as either <code class="literal">Xander Bogarts or Derek Jeter</code>.</p><p>As we saw in our examples, using the <code class="literal">case</code> and <code class="literal">where</code> statements with our conditional statements can reduce the number of lines needed to do certain types of filtering. It can also make our code easier to read. Now let's take a look at control transfer statements.</p></div></div><div class="section" title="Control transfer statements"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec79"/>Control transfer statements</h2></div></div></div><p>Control transfer <a class="indexterm" id="id228"/>statements<a class="indexterm" id="id229"/> are used to transfer control to another part of the code. Swift offers five control transfer statements; these are <code class="literal">continue</code>, <code class="literal">break</code>, <code class="literal">fallthrough</code>, <code class="literal">guard</code>, <code class="literal">throws</code>, and <code class="literal">return</code>. We will look at the <code class="literal">return</code> statement in the <span class="emphasis"><em>Functions</em></span> section later in this chapter and will discuss the <code class="literal">throws</code> statement in <a class="link" href="ch07.html" title="Chapter 7. Writing Safer Code with Availability and Error Handling">Chapter 7</a>, <span class="emphasis"><em>Writing Safer Code with Availability and Error Handling</em></span>.</p><div class="section" title="The continue statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec17"/>The continue statement</h3></div></div></div><p>The <code class="literal">continue</code> statement tells <a class="indexterm" id="id230"/>a loop to stop executing the code block and go to the next iteration of the loop. The following example shows how to use a <code class="literal">continue</code> statement to print out only the odd numbers in a range:</p><div class="informalexample"><pre class="programlisting">for i in 1...10 {
    if i % 2 == 0 {
        continue
    }
    print("\(i) is odd")
}</pre></div><p>In the preceding example, we loop through a range of <code class="literal">1</code> through <code class="literal">10</code>. For each iteration of the <code class="literal">for-in</code> loop, we use the remainder (<code class="literal">%</code>) operator to see whether the number is odd or even. If the number is even, the <code class="literal">continue</code> statement tells the loop to immediately go to the next iteration of the loop. If the number is odd, we print out the number is odd and then move ahead. The output of the preceding code is as follows:</p><div class="informalexample"><pre class="programlisting">1 is odd
3 is odd
5 is odd
7 is odd
9 is odd</pre></div><p>Now, let's look at the <code class="literal">break</code> statement.</p></div><div class="section" title="The break statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec18"/>The break statement</h3></div></div></div><p>The <code class="literal">break</code> statement <a class="indexterm" id="id231"/>immediately ends the execution of a code block within the control flow. The following example shows how to break out of a <code class="literal">for</code> loop when we encounter the first even number:</p><div class="informalexample"><pre class="programlisting">for i in 1...10 {
    if i % 2 == 0 {
        break
    }
    print("\(i) is odd")
}</pre></div><p>In the preceding example, we loop through the range of <code class="literal">1</code> through <code class="literal">10</code>. For each iteration of the <code class="literal">for</code> loop, we use the remainder (<code class="literal">%</code>) operator to see whether the number is odd or even. If the <a class="indexterm" id="id232"/>number is even, we use the <code class="literal">break</code> statement to immediately exit the loop. If the number is odd, we print out that the number is odd and then go to the next iteration of the loop. The preceding code has the following output:</p><div class="informalexample"><pre class="programlisting">1 is odd</pre></div></div><div class="section" title="The fallthrough statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec19"/>The fallthrough statement</h3></div></div></div><p>In Swift, the <code class="literal">switch</code> statements<a class="indexterm" id="id233"/> do not fall through like other languages; however, we can use the <code class="literal">fallthrough</code> statement to force them to fall through. The <code class="literal">fallthrough</code> statement can be very dangerous because once a match is found, the next case defaults to true and that code block is executed. The following example illustrates this:</p><div class="informalexample"><pre class="programlisting">var name = "Jon"
var sport = "Baseball"
switch sport {
case "Baseball":
    print("\(name) plays Baseball")
    fallthrough
case "Basketball":
    print("\(name) plays Basketball")
    fallthrough
default:
    print("Unknown sport")
}</pre></div><p>In the preceding example, since the first case, <code class="literal">Baseball</code>, matches the code and the remaining code blocks also execute, the output looks similar to this:</p><div class="informalexample"><pre class="programlisting">Jon plays Baseball
Jon plays Basketball
Unknown sport</pre></div></div><div class="section" title="The guard statement"><div class="titlepage"><div><div><h3 class="title"><a id="ch04lvl3sec20"/>The guard statement</h3></div></div></div><p>In Swift and <a class="indexterm" id="id234"/>most modern languages, our conditional statements tend to focus on testing if a condition is true. As an example, the following code tests to see whether the variable <code class="literal">x</code> is greater than <code class="literal">10</code>, and if so, we preform some function; otherwise, we handle the error condition:</p><div class="informalexample"><pre class="programlisting">var x = 9
if x &gt; 10 {
  // Functional code here
} else {
   // Do error condition
}</pre></div><p>This type<a class="indexterm" id="id235"/> of code leads us to having our functional code embedded within our checks and with the error conditions tucked away at the end of our functions, but what if that is not what we really want. Sometimes, it may be nice to take care of our error conditions at the beginning of the function. I know, in our simple example, we could easily check if <code class="literal">x</code> is less than or equal to <code class="literal">10</code>, and if so, we perform the error condition, but not all the conditional statements are that easy to rewrite, especially the items such as optional binding.</p><p>With Swift 2, Apple introduced the new <code class="literal">guard</code> statement. The <code class="literal">guard</code> statement focuses on performing a function if a condition is false; this allows us to trap errors and perform the error conditions early in our functions. We could rewrite our previous example using the <code class="literal">guard</code> statement like this:</p><div class="informalexample"><pre class="programlisting">var x = 9
guard x &gt; 10 else {
  // Do error condition
  return
}
// Functional code here</pre></div><p>In this new example, we check to see whether the variable <code class="literal">x</code> is greater than <code class="literal">10</code>, and if not, we perform our error condition. If the variable <code class="literal">x</code> is greater than <code class="literal">10</code>, our code continues. We notice that we have a <code class="literal">return</code> statement embedded within the error condition code. The code within the <code class="literal">guard</code> statement must contain a transfer of control statement; this is what prevents the rest of the code from executing. If we forget the transfer of <code class="literal">control</code> statement, Swift will show a compile time error.</p><p>Let's look at some more examples of the <code class="literal">guard</code> statement. The following example shows how we would use the <code class="literal">guard</code> statement to verify that an optional contains a valid value:</p><div class="informalexample"><pre class="programlisting">func guardFunction(str: String?) {
    guard let goodStr = str else {
        print("Input was nil")
        return
    }
    print("Input was \(goodStr)")
}</pre></div><p>In this example, we create a function named <code class="literal">guardFunction()</code> that accepts an optional that contains a string or nil value. We then use the <code class="literal">guard</code> statement with optional binding to verify that the string optional does not contain a nil. If it does contain nil, then that code within the <code class="literal">guard</code> statement is executed and the <code class="literal">return</code> statement is used to exit the function. The really nice thing about using the guard statement with optional binding is the new variable is in scope for the rest of the function rather than just within the scope of the optional binding statement.</p><p>Now that we <a class="indexterm" id="id236"/>have seen how the control flow statements work in Swift, let's give an introduction to functions and classes in Swift.</p></div></div></div>
<div class="section" title="Functions"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec26"/>Functions</h1></div></div></div><p>In Swift, a function<a class="indexterm" id="id237"/> is a self-contained block of code that performs a specific task. Functions are generally used to logically break our code into reusable named blocks. We use the function's name to call the function.</p><p>When we define a function, we can also optionally define one or more parameters (also known as arguments). Parameters are named values that are passed into the function by the code that calls it. These parameters are generally used within the function to perform the task of the function. We can also define default values for the parameters to simplify how the function is called.</p><p>Every Swift function has a type associated with it. This type is referred to as the return type and it defines the type of data returned from the function to the code that called it. If a value is not returned from a function, the return type is <code class="literal">Void</code>.</p><p>Let's look at how to define functions in Swift.</p><div class="section" title="Using a single parameter function"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec80"/>Using a single parameter function</h2></div></div></div><p>The syntax used to <a class="indexterm" id="id238"/>define a function in Swift is very flexible. This flexibility makes it easy for us to define simple C style functions or more complex Objective-C style functions, with local and external parameter names. Let's look at some examples of how to define functions. The following example accepts one parameter and does not return any value back to the code that called it (return type—<code class="literal">void</code>):</p><div class="informalexample"><pre class="programlisting">func sayHello(name: String) -&gt; Void {
let retString = "Hello " + name
   print( retString)
}</pre></div><p>In the preceding example, we defined a function named <code class="literal">sayHello</code> that accepts one variable that is named <code class="literal">name</code>. Inside the function, we print out a <code class="literal">Hello</code> greeting to the name of the person. Once the code within the function gets executed, the function exits and the control is returned back to the code that called it. Rather than printing out the greeting, if we want to return the greeting back to the code that called it, we can add a return type, as follows:</p><div class="informalexample"><pre class="programlisting">func sayHello2(name: String) -&gt;String {
    let retString = "Hello " + name
    return retString
}</pre></div><p>The <code class="literal">-&gt;</code> string <a class="indexterm" id="id239"/>defines that the return type associated with the function is a string. This means that the function must return a <code class="literal">string</code> variable back to the code that calls it. Inside the function, we build a <code class="literal">string</code> constant with the greeting message and then use the <code class="literal">return</code> keyword to return the <code class="literal">string</code> constant.</p><p>Calling a Swift function is very similar to how we call functions or methods in other languages such as C or Java. The following example shows how to call the <code class="literal">sayHello()</code> function that prints the greeting message to the screen from within the function:</p><div class="informalexample"><pre class="programlisting">sayHello("Jon")</pre></div><p>Now, let's look at how to call the <code class="literal">sayHello2()</code> function that returns a value back to the code that called it:</p><div class="informalexample"><pre class="programlisting">var message = sayHello2("Jon")
print(message)</pre></div><p>In the preceding example, we call the <code class="literal">sayHello2()</code> function and put the value returned in the <code class="literal">message</code> variable. If a function defines a return type, such as the <code class="literal">sayHello2()</code> function does, it must return a value of that type to the code that called it. Therefore, every possible conditional path within the function must end by returning a value of the specified type. This does not mean that the code that called the function has to retrieve the returned value. As an example, both lines in the following examples are valid:</p><div class="informalexample"><pre class="programlisting">sayHello2("Jon")
var message = sayHello2("Jon")</pre></div><p>If you do not specify a variable for the return value to go into, the value is dropped.</p></div><div class="section" title="Using a multiparameter function"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec81"/>Using a multiparameter function</h2></div></div></div><p>We are not <a class="indexterm" id="id240"/>limited to just one parameter with our functions, we can also define multiple parameters. To create a multiparameter function, we list the parameters in the parentheses and separate the parameter definitions with commas. Let's look at how to define multiple parameters in a function:</p><div class="informalexample"><pre class="programlisting">func sayHello(name: String, greeting: String) {
    print("\(greeting) \(name)")
}</pre></div><p>In the preceding example, the function accepts two arguments: <code class="literal">name</code> and <code class="literal">greeting</code>. We then print a <code class="literal">greeting</code> to the console using both the parameters.</p><p>Calling a multiparameter function is a little different from calling a single parameter function. When calling a multiparameter function, we separate the parameters with commas. We <a class="indexterm" id="id241"/>also need to include the parameter name for all the parameters except for the first one. The following example shows how to call a multiparameter function:</p><div class="informalexample"><pre class="programlisting">sayHello("Jon", greeting:"Bonjour")</pre></div><p>We do not need to supply an argument for each parameter of the function if we define default values. Let's look at how to configure default values for our parameters.</p></div><div class="section" title="Defining a parameter's default values"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec82"/>Defining a parameter's default values</h2></div></div></div><p>We can define <a class="indexterm" id="id242"/>default values for parameters by using the equal to operator (<code class="literal">=</code>) within the function definition when we declare the variables. The following example shows how to declare a function with parameter default values:</p><div class="informalexample"><pre class="programlisting">func sayHello(name: String, greeting: String = "Bonjour") {
    print("\(greeting) \(name)")
}</pre></div><p>In the function declaration, we define one parameter without a default value (<code class="literal">name: String</code>) and one parameter with a default value (<code class="literal">greeting: String = "Bonjour"</code>). When a parameter has a default value declared, we are able to call the function with or without setting a value for that parameter. The following example shows how to call the <code class="literal">sayHello()</code> function without setting the <code class="literal">greeting</code> parameter, and also how to call it with setting the <code class="literal">greeting</code> parameter:</p><div class="informalexample"><pre class="programlisting">sayHello("Jon")
sayHello("Jon", greeting: "Hello")</pre></div><p>In the <code class="literal">sayHello("Jon")</code> line, the <code class="literal">sayHello()</code> function will print out the message <code class="literal">Bonjour Jon</code> since it uses the default value for the <code class="literal">greeting</code> parameter. In the <code class="literal">sayHello("Jon", greeting: "Hello")</code> line, the <code class="literal">sayHello()</code> function will print out the message <code class="literal">Hello Jon</code> since we override the default value for the <code class="literal">greeting</code> parameter.</p><p>We can declare multiple parameters with default values and override only the ones we want by using the parameter names. The following example shows how we would do this by overriding one of the default values when we call it:</p><div class="informalexample"><pre class="programlisting">func sayHello4(name: String, name2: String = "Kim", greeting: String = "Bonjour") {
    println("\(greeting) \(name) and \(name2)")
}

sayHello("Jon", greeting: "Hello")</pre></div><p>In the preceding example, we declare one parameter without a default value (<code class="literal">name: String</code>) and two parameters with default values (<code class="literal">name2: String = "Kim", greeting: String = "Bonjour"</code>). We then call the function leaving the <code class="literal">name2</code> parameter<a class="indexterm" id="id243"/> with its default value, but override the default value of the <code class="literal">greeting</code> parameter.</p><p>The preceding example would print out the message, <code class="literal">Hello Jon and Kim</code>.</p></div><div class="section" title="Returning multiple values from a function"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec83"/>Returning multiple values from a function</h2></div></div></div><p>There are a couple of <a class="indexterm" id="id244"/>ways to return multiple values from a Swift function. One of the most common ways is to put the values into a collection type (array or dictionary) and return the collection. The following example shows how to return a collection type from a Swift function:</p><div class="informalexample"><pre class="programlisting">func getNames() -&gt; [String] {
    var retArray = ["Jon", "Kim", "Kailey", "Kara"]
    return retArray
}

var names = getNames()</pre></div><p>In the preceding example, we declare the <code class="literal">getNames()</code> function with no parameters and a return type of <code class="literal">[String]</code>. The return type of <code class="literal">[String]</code> specifies the return type to be an array of string types.</p><p>One of the drawbacks of returning a collection type is that the values of the collection must be of the same type, or we must declare our collection type to be of the <code class="literal">AnyObject</code> type. In the preceding example, our array could only return string types. If we needed to return numbers with our strings, we could return an array of <code class="literal">AnyObjects</code> and then use typecasting to specify the object type. However, this would not be a very good design for our application since it would be very prone to errors. A better way to return values of different types would be to use a tuple type.</p><p>When we return a tuple from a function, it is recommended that we use a named tuple to allow us to use the dot syntax to access the returned values. The following example shows how to return a named tuple from a function and access the values from the named tuple that is returned:</p><div class="informalexample"><pre class="programlisting">func getTeam() -&gt; (team:String, wins:Int, percent:Double) {
    let retTuple = ("Red Sox", 99, 0.611)
 return retTuple
}

var t = getTeam()
print("\(t.team) had \(t.wins) wins")</pre></div><p>In the preceding example, we define the <code class="literal">getTeam()</code> function that returns a named tuple that contains three values—<code class="literal">String</code>, <code class="literal">Int</code>, and <code class="literal">Double</code>. Within the function, we create the tuple that we are going to return. Notice that we do not need to define the tuple that we are going to return as a named tuple as long as the value types within the tuple match the value types in the<a class="indexterm" id="id245"/> function definition. We can then call the function, as we would any other function, and use the dot syntax to access the values of the tuple that is returned. In the preceding example, the code would print out the following line:</p><div class="informalexample"><pre class="programlisting">Red Sox had 99 wins</pre></div></div><div class="section" title="Returning optional values"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec84"/>Returning optional values</h2></div></div></div><p>In the previous sections, we <a class="indexterm" id="id246"/>returned non-nil values from our function; however, that is not always what we need our code to do. What happens if we need to return a nil value from a function? The following code would throw an <code class="literal">expression does not conform to type 'NilLiteralConvertible'</code> exception:</p><div class="informalexample"><pre class="programlisting">func getName() -&gt;String {
    return nil
}</pre></div><p>The reason this code throws an exception is we define the return type as a <code class="literal">string</code> value; however, we are attempting to return <code class="literal">nil</code>. If there is a reason to return <code class="literal">nil</code>, we need to define the return type as an optional type to let the code calling it know that the value may be <code class="literal">nil</code>. To define the return type as an optional type, we use the question mark(<code class="literal">?</code>) the same way that we did when we defined a variable as an optional type. The following example shows how to define an optional return type:</p><div class="informalexample"><pre class="programlisting">func getName() -&gt;String? {
    return nil
}</pre></div><p>The preceding code would not throw an exception.</p><p>We can also set a tuple as an optional type or any value within a tuple as an optional type. The following example shows how we would return a tuple as an optional type:</p><div class="informalexample"><pre class="programlisting">func getTeam2(id: Int) -&gt; (team:String, wins:Int, percent:Double)? {
    if id == 1 {
        return ("Red Sox", 99, 0.611)
    }
    return nil
}</pre></div><p>In the following example, we could return a tuple as defined within our function definition or a <code class="literal">nil</code>; either <a class="indexterm" id="id247"/>option is valid. If we needed an individual value within our tuple to be <code class="literal">nil</code>, we would need to add an optional type within our tuple. The following example shows how to return a <code class="literal">nil</code> within our tuple:</p><div class="informalexample"><pre class="programlisting">func getTeam() -&gt; (team:String, wins:Int, percent:Double?) {
    let retTuple: (String, Int, Double?) = ("Red Sox", 99, nil)
    return retTuple
}</pre></div><p>In the preceding example, we can set the <code class="literal">percent</code> value to either a <code class="literal">Double</code> value or <code class="literal">nil</code>.</p></div><div class="section" title="Adding external parameter names"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec85"/>Adding external parameter names</h2></div></div></div><p>In the preceding<a class="indexterm" id="id248"/> examples in this section, the parameters were defined similar to how we would define the parameters in C code, where we define the parameter names and value types. When we call the function, we also call the function similar to how we would call functions in C code, where we use the function name and specify the values we are passing to the function within parenthesis. In Swift, we are not limited to this syntax; we can also use external parameter names.</p><p>External parameter names are used when we call a function to indicate the purpose of each parameter. If we want to use external parameter names with our functions, we would need to define an external parameter name for each parameter in addition to its local parameter name. The external parameter name is added before the local parameter name in the function definition. The external and local parameter names are separated by a space.</p><p>Let's look at how to use external parameter names. But before we do so, let's review how we have previously defined functions. In the next two examples, we will define a function without external parameter names and then we will redefine that function with external parameter names:</p><div class="informalexample"><pre class="programlisting">func winPercentage(team: String, wins: Int, loses: Int) -&gt; Double {
    return Double(wins) / Double(wins + loses)
}</pre></div><p>In the preceding example, we define the <code class="literal">winPercentage()</code> function that accepts three parameters. These parameters are <code class="literal">team</code>, <code class="literal">wins</code>, and <code class="literal">loses</code>. The <code class="literal">team</code> parameter is a <code class="literal">String</code> type and the <code class="literal">wins</code> and <code class="literal">loses</code> parameters are <code class="literal">Int</code> types. The following line of code shows how to call the <code class="literal">winPercentage()</code> function:</p><div class="informalexample"><pre class="programlisting">var per = winPercentage("Red Sox", wins: 99, loses: 63)</pre></div><p>Now, let's define the same function with external parameter names:</p><div class="informalexample"><pre class="programlisting">func winPercentage(BaseballTeam team: String, withWins wins: Int, andLoses losses: Int) -&gt; Double {
  return Double(wins) / Double(wins + losses)
}</pre></div><p>In the <a class="indexterm" id="id249"/>preceding example, we redefine the <code class="literal">winPercentage</code> function with external parameter names. In this redefinition, we have the same three parameters: <code class="literal">team</code>, <code class="literal">wins</code>, and <code class="literal">losses</code>. The difference is how we define the parameters. When using external parameters, we define each parameter with both an external parameter name and a local parameter name separated by a space. In the preceding example, the first parameter has an external parameter name of <code class="literal">BaseballTeam</code>, an internal parameter name of <code class="literal">team</code>, and a type of <code class="literal">String</code>.</p><p>When we call a function with external parameter names, we need to include the external parameter names in the function call. The following code shows how to call the function in the preceding example:</p><div class="informalexample"><pre class="programlisting">var per = winPercentage(BaseballTeam:"Red Sox", withWins:99, andLoses:63)</pre></div><p>While using external parameter names requires more typing, it does make your code easier to read. In the preceding example, it is easy to see that the function is looking for the name of a baseball team, the second parameter is the number of wins, and the last parameter is the number of losses.</p></div><div class="section" title="Using variadic parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec86"/>Using variadic parameters</h2></div></div></div><p>A variadic parameter is <a class="indexterm" id="id250"/>one that accepts zero or more values of a specified type. Within the functions definition, we define a variadic parameter by appending three periods(<code class="literal">...</code>) to the parameter's type name. The values of a variadic parameter are made available to the function as an array of the specified type. The following example shows how we would use a variadic parameter with a function:</p><div class="informalexample"><pre class="programlisting">func sayHello(greeting: String, names: String...) {
  for name in names {
    print("\(greeting) \(name)")
  }
}</pre></div><p>In the preceding example, the <code class="literal">sayHello()</code> function takes two parameters. The first parameter is a String type, which is the greeting to use. The second parameter is a variadic parameter of the String type, which are the names to send the greeting to. Within the function, a variadic parameter is an array that contains the type specified; therefore, in our example, the <code class="literal">names</code> parameter is an array of <code class="literal">String</code> values. In this example, we use a <code class="literal">for-in</code> loop to access the values within the <code class="literal">names</code> parameter.</p><p>The following line of code shows how to call the <code class="literal">sayHello()</code> function with a variadic parameter:</p><div class="informalexample"><pre class="programlisting">sayHello("Hello", names: "Jon", "Kim")</pre></div><p>The <a class="indexterm" id="id251"/>preceding line of code will print two greetings: <code class="literal">Hello Jon</code> and <code class="literal">Hello Kim</code>.</p></div><div class="section" title="Parameters as variables"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec87"/>Parameters as variables</h2></div></div></div><p>Parameters are <a class="indexterm" id="id252"/>constants by default, which means they cannot be changed within the function. Let's look at the following example:</p><div class="informalexample"><pre class="programlisting">func sayHello(greeting: String, name: String, count: Int) {
  while count &gt; 0 {
    print("\(greeting) \(name)")
    count--
  }
}</pre></div><p>If we try to run this example, we will get an exception because we will have attempted to change the value of the <code class="literal">count</code> parameter with the decrement operator (<code class="literal">--</code>). If we need to change the value of a parameter within our function, we need to specify that the parameter is a variable by using the <code class="literal">var</code> keyword in the function definition.</p><p>The following example shows how to declare the <code class="literal">count</code> parameter as a variable (rather than a constant) so that we can change the value within the function:</p><div class="informalexample"><pre class="programlisting">func sayHello(greeting: String, name: String, var count: Int) {
  while (count &gt; 0) {
    println("\(greeting) \(name)")
    count--
  }
}</pre></div><p>You can see how we added the <code class="literal">var</code> keyword prior to the <code class="literal">count</code> parameter name in the preceding example. This specifies whether the parameter is a variable and not a constant; therefore, we can change the value of the <code class="literal">count</code> parameter in the function.</p></div><div class="section" title="Using inout parameters"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec88"/>Using inout parameters</h2></div></div></div><p>Variable parameters, as <a class="indexterm" id="id253"/>we just described, can only change the value of the parameter within the function; therefore, any changes are lost after the function ends. If we want the changes to a parameter to persist once the function ends, we need to define the parameter as an <code class="literal">inout</code> parameter. Any changes made to an <code class="literal">inout</code> parameter are passed back to the variable that was used in the function call.</p><p>Two items to keep in mind when we use <code class="literal">inout</code> parameters are that these parameters cannot have default values and they cannot be a variadic parameter.</p><p>Let's look at how to use the <code class="literal">inout</code> parameters to swap the values of two variables:</p><div class="informalexample"><pre class="programlisting">func swap(inout first: String, inout second: String) {
  let tmp = first
  first = second
  second = tmp
}</pre></div><p>This function<a class="indexterm" id="id254"/> will accept two parameters and swap the values of the variables that are used in the function call. When we make the function call, we put an ampersand (<code class="literal">&amp;</code>) in front of the variable name indicating that the function can modify its value. The following example shows how to call the reverse function:</p><div class="informalexample"><pre class="programlisting">var one = "One"
var two = "Two"
swap(&amp;one,&amp;two)
print("one: \(one) two: \(two)")</pre></div><p>In the preceding example, we set variable <code class="literal">one</code> to the value <code class="literal">One</code> and variable <code class="literal">two</code> to the value <code class="literal">Two</code>. We then call the reverse function with the <code class="literal">one</code> and <code class="literal">two</code> variables. Once the swap function returns, the variable named <code class="literal">one</code> will contain the value <code class="literal">Two</code>, while the variable named <code class="literal">two</code> will contain the value <code class="literal">One</code>.</p></div><div class="section" title="Nesting functions"><div class="titlepage"><div><div><h2 class="title"><a id="ch04lvl2sec89"/>Nesting functions</h2></div></div></div><p>All the functions<a class="indexterm" id="id255"/> that we have shown so far are examples of global functions. Global functions are the ones that are defined at a global scope within the class or file that they are in. Swift also allows us to nest one function within another. Nested functions can only be called within the enclosed function; however, the enclosed function can return a nested function that allows it to be used outside the scope of the enclosed function. We will cover returning a function in <a class="link" href="ch12.html" title="Chapter 12. Working with Closures">Chapter 12</a>, <span class="emphasis"><em>Working with Closures</em></span>, later in this book.</p><p>Let's look at how to nest functions by creating a simple sort function that will take an array of integers and sort it:</p><div class="informalexample"><pre class="programlisting">func sort(inout numbers: [Int]) {
  //This is the nested function
  func reverse(inout first: Int, inout second: Int) {
    let tmp = first
    first = second
    second = tmp
  }
  //Nested function ends.

    var count = numbers.count

    while count &gt; 0 {
      for var i = 1; i &lt; count; i++ {
        if numbers[i] &lt; numbers[i-1] {
          reverse(&amp;numbers[i], second: &amp;numbers[i-1])
        }
      }
    count--
    }
}</pre></div><p>In the <a class="indexterm" id="id256"/>preceding code, we begin by creating a global function named <code class="literal">sort</code> that accepts an <code class="literal">inout</code> parameter, that is, an array of <code class="literal">Ints</code>. Within the <code class="literal">sort</code> function, the first thing we do is define the nested function that is named <code class="literal">reverse</code>. A function needs to be defined in the code prior to calling it, so it is good practice to put all the nested functions at the start of the global function so that we know they are defined prior to calling them. The <code class="literal">reverse</code> function simply swaps the two values that are passed in.</p><p>Within the body of the <code class="literal">sort</code> function, we implement the logic for the simple sort. Within that logic, we compare two numbers in the array, and if the numbers need to be reversed, we call the nested <code class="literal">reverse</code> function to swap the two numbers. This example shows how we can effectively use a nested function to organize our code to make it easy to maintain and read. Let's look at how to call the global sort function:</p><div class="informalexample"><pre class="programlisting">var nums: [Int] = [6,2,5,3,1]

sort(&amp;nums)

for value in nums {
    print("--\(value)")
}</pre></div><p>The preceding code creates an array of five integers and then passes the array to the <code class="literal">sort</code> function. When the <code class="literal">sort</code> function returns the <code class="literal">nums</code> array, it contains a sorted array.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>Nested functions, when used properly, can be very useful. However, it is really easy to overuse them. Before creating a nested function, you might want to ask yourself why you want to use a nested function and what problem are you solving by using a nested function.</p></div></div></div></div>
<div class="section" title="Putting it all together"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec27"/>Putting it all together</h1></div></div></div><p>To reinforce what we<a class="indexterm" id="id257"/> learned in this chapter, let's look at one more example. For this example, we will create a function that will test to see if a string value contains a valid IPv4 address or not. An IPv4 address is the address assigned to a computer that uses the Internet Protocol to communicate. An IP address consists of four numeric values, ranging from 0-255, separated by a dot (period). An example of a valid IP address is 10.0.1.250:</p><div class="informalexample"><pre class="programlisting">func isValidIP(ipAddr: String?) -&gt; Bool {

    guard let ipAddr = ipAddr else {
        return false
    }

let octets = ipAddr.characters.split { $0 == "."}.map{String($0)}
    
    guard octets.count == 4 else {
        return false
    }

    
    func validOctet(octet: String) -&gt; Bool {
        guard let num = Int(String(octet))
            where num &gt;= 0 &amp;&amp; num &lt; 256 else {
                return false
        }
        return true
    }
    
    for octet in octets {
        guard validOctet(octet) else {
            return false
        }
    }
    
    return true

}</pre></div><p>Since the parameter for the <code class="literal">isValidIp()</code> function is an optional type, the first thing we do is verify that the <code class="literal">ipAddr</code> parameter is not nil. To do this, we used a <code class="literal">guard</code> statement with optional binding and if the optional binding fails, we return a Boolean <code class="literal">false</code> value because nil is not a valid IP address.</p><p>If the <code class="literal">ipAddr</code> parameter contains a non-nil value, we then split the string into an array of strings, at the dots. Since an IP address is suppose to contain four numbers separated by a dot, we use<a class="indexterm" id="id258"/> the <code class="literal">guard</code> statement to check whether the array contains four elements. If it does not, we return <code class="literal">false</code> because we know that the <code class="literal">ipAddr</code> parameter did not contain a valid IP address.</p><p>Next, we create a nested function named <code class="literal">validOctet()</code> that has one String parameter named <code class="literal">octet</code>. This nested function will verify that the <code class="literal">octet</code> parameter contains a numeric value between 0 and 255, and if so, it will return a Boolean <code class="literal">true</code> value, otherwise, it will return a <code class="literal">false</code> Boolean value.</p><p>Finally, we loop through a values in the array that we created by splitting the original <code class="literal">ipAddr</code> parameter at the dots and pass the values to the <code class="literal">validOctet()</code> nested function.  If all the four values get verified by the <code class="literal">validOctet()</code> function, we have a valid IP address and we return a Boolean <code class="literal">true</code> value; however, if any of the values fail the <code class="literal">validOctet()</code> function, we return a Boolean <code class="literal">false</code> value.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch04lvl1sec28"/>Summary</h1></div></div></div><p>In this chapter, we covered control flow and functions in Swift. It is essential to understand the concepts in this chapter before going on. Every application that we write, beyond the simple Hello World applications, will rely very heavily on the control flow statements and functions.</p><p>The control flow statements are used to make decisions within our application, and the functions will be used to group our code into the sections that are reusable and organized.</p></div></body></html>