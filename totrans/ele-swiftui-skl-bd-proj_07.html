<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-107"><a id="_idTextAnchor378"/>7</h1>
<h1 id="_idParaDest-108"><a id="_idTextAnchor379"/>Mac Project – App Store Body</h1>
<p>In this chapter, we will work on implementing the main body for the App Store project. In the previous chapter, we looked at the design of the App Store and more specifically the SideBar design. Then, we broke the SideBar down into all the necessary components required for our application requirements. We then implemented all the components using SwiftUI. At the end of the previous chapter, we only had a SideBar with some optional event tracking, but no content in the main body. The main section will be scrollable and showcase apps using icons and banners. Now we will analyze the main body, break it down into all the components it comprises, and implement all the components to provide an app store-like feel.</p>
<p>This chapter will be split into the following sections:</p>
<ul>
<li>Main body overview</li>
<li>Implementing the main body</li>
<li>Extra Tasks</li>
</ul>
<p>By the end of this chapter, you will have created an app store template with a scrollable view to showcase applications. This will serve as a solid foundation for further expanding the app store application or pivoting the project to something totally different while using the core structure we have implemented. As we reach the end of the chapter, I will give exercises to implement more advanced functionality in the app store. This will transition nicely into our fourth and final project, the Apple Watch Fitness Companion App.</p>
<h1 id="_idParaDest-109"><a id="_idTextAnchor380"/>Technical Requirements</h1>
<p>This chapter requires you to download Xcode version 14 or above from Apple’s App Store.</p>
<p>To install Xcode, just search for Xcode in the App Store, select, and download the latest version. Open Xcode and follow any additional installation instructions. Once Xcode has opened and launched, you’re ready to go.</p>
<p>Version 14 of Xcode has the following features/requirements:</p>
<ul>
<li>Includes SDKs for iOS 16, iPadOS 16, macOS 12.3, tvOS 16, and watchOS 9</li>
<li>Supports on-device debugging in iOS 11 or later, tvOS 11 or later, and watchOS 4 or later</li>
<li>Requires a Mac running macOS Monterey 12.5 or later</li>
</ul>
<p>For further information regarding the technical details, please refer to <a href="B18783_01.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>.</p>
<p>The code files for this chapter can be found here:</p>
<p><a href="https://github.com/PacktPublishing/Elevate-SwiftUI-Skills-by-Building-Projects">https://github.com/PacktPublishing/Elevate-SwiftUI-Skills-by-Building-Projects</a></p>
<p><a id="_idTextAnchor381"/>In the next section, we will provide clarity on the specifications of our application’s design and look at mockups of what the app will look like.<a id="_idTextAnchor382"/></p>
<h1 id="_idParaDest-110"><a id="_idTextAnchor383"/>Main body overview</h1>
<p>In this<a id="_idIndexMarker300"/> section, we will take another look at the wireframes from <a href="B18783_06.xhtml#_idTextAnchor354"><em class="italic">Chapter 6</em></a> and break them down into their individual components. The wireframe images for the app store and the main body have been provided in this section. These images depict the layout and design of the app store and the main body.</p>
<div><div><img alt="Figure 7.1 – App Store view" src="img/Figure_7.01_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.1 – App Store view</p>
<div><div><img alt="Figure 7.2 – App Store main body" src="img/Figure_7.02_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.2 – App Store main body</p>
<p>Before we code our application, we will break down the main body into the elements that comprise it. As a<a id="_idIndexMarker301"/> little task, see whether you can figure out what these are, but don’t worry if you don’t know the exact UI component names. We will look at the components in the following section.</p>
<h1 id="_idParaDest-111"><a id="_idTextAnchor384"/>Image components</h1>
<p>An <a id="_idIndexMarker302"/>Image component is one of the core components offered by SwiftUI. It allows you to display an image, which can be used to provide a visual representation or to aid a body of text. We will use it in two main ways, firstly to showcase a particular app using a Highlight banner, and secondly to show a list/grid of applications. The following figures show the application icon and application highlight banner:</p>
<div><div><img alt="Figure 7.3 – App icon" src="img/Figure_7.03_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.3 – App icon</p>
<div><div><img alt="Figure 7.4 – Banner" src="img/Figure_7.04_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.4 – Banner</p>
<h1 id="_idParaDest-112">T<a id="_idTextAnchor385"/>ext component</h1>
<p>The<a id="_idIndexMarker303"/> Text component is one of the simplest components offered by SwiftUI. It allows you to display a string of characters/numbers, which is very useful for headings and providing information. We will use it for the following:</p>
<ul>
<li>App title</li>
<li>Section description</li>
</ul>
<p>In the upcoming section, we will proceed to develop the main body of our application using the SwiftUI components <a id="_idIndexMarker304"/>that we previously discussed. This implementation will be carried out with utmost precision and attention to detai<a id="_idTextAnchor386"/>l.</p>
<h1 id="_idParaDest-113"><a id="_idTextAnchor387"/>Implementing the main body</h1>
<p>In this <a id="_idIndexMarker305"/>section, we will complete the third project in this book by implementing the main body of our application. Our first step will be to<a id="_idIndexMarker306"/> code the Highlight banner, followed by the app icon<a id="_idTextAnchor388"/>s.</p>
<h2 id="_idParaDest-114"><a id="_idTextAnchor389"/>Coding the highlight banner</h2>
<p>Firstly, we will <a id="_idIndexMarker307"/>add the code for a Highlight banner. The banner is simply going to be an image that spans the width of the body; we will give it some spacing for aesthetic purposes. It is common to add multiple banners throughout the page to highlight different applications and have carousel banners, which provide the ability to showcase multiple banners in a single section through a transition such as sliding. We will implement a single banner; however, adding more is simple. Follow these steps:</p>
<ol>
<li>Let’s start by adding a banner image. My image is <strong class="bold">728x90</strong> pixels. Feel free to modify this to suit your needs. Select <strong class="bold">Assets</strong> from the <strong class="bold">Project Navigator</strong>:</li>
</ol>
<div><div><img alt="Figure 7.5 – Assets location in Project Navigator" src="img/Figure_7.05_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.5 – Assets location in Project Navigator</p>
<ol>
<li value="2">Now, the <strong class="bold">Assets</strong> view will appear. Importing an image into <strong class="bold">Assets</strong> can be done<a id="_idIndexMarker308"/> in one of two ways<ol><li>Dragging and dropping the files into the <strong class="bold">Assets</strong> section:</li></ol></li>
</ol>
<div><div><img alt="Figure 7.6 – Dragging and dropping asset﻿" src="img/Figure_7.06_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.6 – Dragging and dropping asset</p>
<ol>
<li value="2">Right-clicking the <strong class="bold">Assets</strong> section and selecting <strong class="bold">Import…</strong>:</li>
</ol>
<div><div><img alt="Figure 7.7 – Import… button" src="img/Figure_7.07_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.7 – Import… button</p>
<p>Once the<a id="_idIndexMarker309"/> asset(s) have been imported, the <strong class="bold">Assets</strong> view will look as follows:</p>
<div><div><img alt="Figure 7.8 – Asset(s) imported" src="img/Figure_7.08_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.8 – Asset(s) imported</p>
<p class="callout-heading">Note</p>
<p class="callout">I am using the banner for my developer-centric podcast FireDEV. Feel free to use it and tune in to my <a id="_idIndexMarker310"/>podcast <a id="_idIndexMarker311"/>every Thursday at the following<a id="_idIndexMarker312"/> links:</p>
<ul>
<li class="callout"><strong class="bold">Spotify</strong>: <a href="https://open.spotify.com/show/387RiHksQE33KYHTitFXhg">https://open.spotify.com/show/387RiHksQE33KYHTitFXhg</a></li>
<li class="callout"><strong class="bold">Apple </strong><strong class="bold">Podcasts</strong>: <a href="https://podcasts.apple.com/us/podcast/firedev-fireside-chat-with-industry-professionals/id1602599831">https://podcasts.apple.com/us/podcast/firedev-fireside-chat-with-industry-professionals/id1602599831</a></li>
<li class="callout"><strong class="bold">Google </strong><strong class="bold">Podcasts</strong>: <a href="https://podcasts.google.com/feed/aHR0cHM6Ly9hbmNob3IuZm0vcy83Yjg2YTNiNC9wb2RjYXN0L3Jzcw">https://podcasts.google.com/feed/aHR0cHM6Ly9hbmNob3IuZm0vcy83Yjg2YTNiNC9wb2RjYXN0L3Jzcw</a></li>
</ul>
<ol>
<li value="3">We will <a id="_idIndexMarker313"/>add an <code>Image</code> component after the <code>List</code> code:<pre class="source-code">
}.searchable( text: $searchText )    .onSubmit( of: .search )    {        print( searchText )    }Image( "FireDEV Banner" )</pre></li> </ol>
<p>This will result in the following:</p>
<div><div><img alt="Figure 7.9 – Banner added" src="img/Figure_7.09_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.9 – Banner added</p>
<ol>
<li value="4">If you try <a id="_idIndexMarker314"/>and resize the window, there are restrictions. We need to make the banner resizable and maintain its original aspect ratio. Update the image code as follows:<pre class="source-code">
Image( "FireDEV Banner" )    .resizable( )    .padding( .horizontal )    .scaledToFit( )</pre></li> </ol>
<p>We made the image resizable, which allows it to change size based on the size of the window. This is very useful as the user will run the App Store on different screen sizes and may not always have it fullscreen. We then added horizontal padding to make sure it doesn’t touch the left or right edges. This can be omitted if you like, or you can specify a set amount of padding. Finally, we set it to <code>scaledToFit</code>, which maintains the original aspect ratio. Distortion is never a good idea. All of this results in the following:</p>
<div><div><img alt="Figure 7.10 – Banner updated" src="img/Figure_7.10_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.10 – Banner updated</p>
<ol>
<li value="5">As of now, the<a id="_idIndexMarker315"/> banner is always in the center. We want it at the top of the view. To achieve this result, we will enclose the image code we added previously within a <code>ScrollView</code> with an alignment of <code>topLeading</code>. Update the code like so:<pre class="source-code">
ScrollView{    Color.clear    Image( "FireDEV Banner" )        .resizable( )        .padding( .horizontal )        .scaledToFit( )}</pre></li> </ol>
<p>We also add a <code>Color.clear</code> instruction to make sure there is no background color, all of which results in the following awesome banner:</p>
<div><div><img alt="Figure 7.11 – Banner positioned at the top" src="img/Figure_7.11_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.11 – Banner positioned at the top</p>
<p>The highlight banner<a id="_idIndexMarker316"/> has been finished, which can be converted into a carousel. Moving forward, the app groups will be coded to showcase a list of application i<a id="_idTextAnchor390"/>cons.</p>
<h1 id="_idParaDest-115"><a id="_idTextAnchor391"/>Coding the app groups</h1>
<p>We will now<a id="_idIndexMarker317"/> implement the code to display app groups. These will contain an image representing the application icon and a label that represents the application name. Feel free to add more components to each group and arrange them as you see fit. I have added an app icon to the assets. I followed the previous steps to add images. Feel free to refer to those steps:</p>
<ol>
<li>First, add the following code before the body:<pre class="source-code">
private let adaptiveColumns =[    GridItem( .adaptive( minimum: 300 ) )]</pre></li> </ol>
<p>This will be used in our grid and ensures the items have a minimum size of 300. This is extremely useful as we don’t want them to become so small the user cannot see them.</p>
<ol>
<li value="2">Add <a id="_idIndexMarker318"/>the following code beneath the banner code we added in the previous section:<pre class="source-code">
LazyVGrid( columns: adaptiveColumns, spacing: 20 ){    ForEach ( 0..&lt;20 )    { index in        VStack( alignment: .leading )        {            Image( "FireDEV Logo" )            Label( "FireDEV", systemImage: "" )        }    }}</pre></li> </ol>
<p>Let’s break down the code before we run the application.</p>
<ul>
<li>We create a <code>LazyVGrid</code> using <code>adaptiveColumns</code> and with <code>spacing</code> set to <code>20</code>. Feel free to change the spacing of the column sizing as you see fit.</li>
<li>Next, we use a <code>ForEach</code> loop that runs 20 times. Feel free to substitute the code with an array of items as done in the previous project.</li>
<li>Then, we <a id="_idIndexMarker319"/>create a <code>Label</code> component beneath the image. The label will be used as the name of the application.</li>
<li>Finally, we create an <code>Image</code> component and a <code>Label</code> component, and we omit the <code>systemImage</code> parameter as it is not required by us. However, you must put something, hence the empty quotation marks.</li>
</ul>
<p>Running the<a id="_idIndexMarker320"/> application will result in the following:</p>
<div><div><img alt="Figure 7.12 – App groups" src="img/Figure_7.12_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.12 – App groups</p>
<ol>
<li value="3">We are almost done with this application. The application name is a little on the small side. Let’s make it bigger, and update <code>Label</code> as follows:<pre class="source-code">
Label( "FireDEV", systemImage: "" )    .font( .system( size: 36 ) )</pre></li> </ol>
<p>Finally, running this will result in the following figure:</p>
<div><div><img alt="Figure 7.13 – Label font size increase" src="img/Figure_7.13_B18783.jpg"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 7.13 – Label font size increase</p>
<p>As a recap, here<a id="_idIndexMarker321"/> is the whole code for <code>MainView</code>:</p>
<pre class="source-code">
////  ContentView.swift
//  App Store
//
//  Created by Frahaan on 21/02/2023.
//
import SwiftUI
struct MainView: View
{
    @State private var searchText = ""
    private let adaptiveColumns =
    [
        GridItem( .adaptive( minimum: 300 ) )
    ]
    var body: some View
    {
        NavigationView
        {
            List
            {
                Label( "Discover", systemImage: "star" )
                .onTapGesture
                {
                    print( "Discover" )
                }
                Label( "Arcade", systemImage: "gamecontroller" )
                Label( "Create", systemImage: "paintbrush" )
                Label( "Categories", systemImage: "square.grid.3x3.square" )
                Label( "Favorites", systemImage: "heart" )
                Label( "Updates", systemImage: "square.and.arrow.down" )
            }.searchable( text: $searchText )
                .onSubmit( of: .search )
                {
                    print( searchText )
                }
            ScrollView
            {
                Color.clear
                Image( "FireDEV Banner" )
                    .resizable( )
                    .padding( .horizontal )
                    .scaledToFit( )
                LazyVGrid( columns: adaptiveColumns, spacing: 20 )
                {
                    ForEach ( 0..&lt;20 )
                    { index in
                        VStack( alignment: .leading )
                        {
                            Image( "FireDEV Logo" )
                            Label( "FireDEV", systemImage: "" )
                                .font( .system( size: 36 ) )
                        }
                    }
                }
            }
        }
    }
}
struct MainView_Previews: PreviewProvider
{
    static var previews: some View
    {
        MainView( )
    }
}</pre>
<p>The code is also available in the GitHub repository of the book.</p>
<p>In this section, we<a id="_idIndexMarker322"/> implemented the main body for our App Store application, thus finishing our third project. There were two main sections – first, we implemented a Highlight Banner, which can be used multiple times throughout the view to showcase different applications. Then, we implemented a grid of app groups. Although the app information was hardcoded, it can be abstracted into an array, which can store more information for each application. In the next section, we will summarize thi<a id="_idTextAnchor392"/>s chapter.</p>
<h1 id="_idParaDest-116"><a id="_idTextAnchor393"/>Extra Tasks</h1>
<p>Now that the <a id="_idIndexMarker323"/>application is complete, here is a list of extra tasks for you to complete to enhance your application:</p>
<ul>
<li>An app page, to which the user navigates when they click an app icon</li>
<li>Multiple highlight banners</li>
<li>Updating the banner to be a carousel</li>
<li>Different pages for the section in the sidebar</li>
<li>Pulling data from an array or external source such as a database for the ap<a id="_idTextAnchor394"/>p metadata</li>
</ul>
<p>In the next section, we will summarize what we have covered in this chapter, but first, we will look over the code to help with the extra tasks for th<a id="_idTextAnchor395"/><a id="_idTextAnchor396"/>is project.</p>
<h2 id="_idParaDest-117"><a id="_idTextAnchor397"/>Search Functionality</h2>
<p>To add<a id="_idIndexMarker324"/> search functionality to the app, you can use the <code>.searchable</code> modifier provided by SwiftUI. Here’s the modified code with search functionality added:</p>
<pre class="source-code">
////  ContentView.swift
//  App Store
//
//  Created by Frahaan on 21/02/2023.
//
import SwiftUI
struct MainView: View {
    @State private var searchText = ""
    private let adaptiveColumns = [
        GridItem(.adaptive(minimum: 300))
    ]
    var body: some View {
        NavigationView {
            List {
                Label("Discover", systemImage: "star")
                    .onTapGesture {
                        print("Discover")
                    }
                Label("Arcade", systemImage: "gamecontroller")
                Label("Create", systemImage: "paintbrush")
                Label("Categories", systemImage: "square.grid.3x3.square")
                Label("Favorites", systemImage: "heart")
                Label("Updates", systemImage: "square.and.arrow.down")
            }
            .searchable(text: $searchText) // Add searchable modifier
            .onSubmit(of: .search) {
                print(searchText)
            }
            ScrollView {
                Color.clear
                Image("FireDEV Banner")
                    .resizable()
                    .padding(.horizontal)
                    .scaledToFit()
                LazyVGrid(columns: adaptiveColumns, spacing: 20) {
                    ForEach(0..&lt;20) { index in
                        VStack(alignment: .leading) {
                            Image("FireDEV Logo")
                            Label("FireDEV", systemImage: "")
                                .font(.system(size: 36))
                        }
                    }
                }
            }
        }
    }
}
struct MainView_Previews: PreviewProvider {
    static var previews: some View {
        MainView()
    }
}</pre>
<p>In this<a id="_idIndexMarker325"/> modified code, I added the <code>.searchable(text: $searchText)</code> modifier to the <code>List</code> view, which enables search functionality. The <code>searchText</code> variable is used as the binding for the search text input.</p>
<p>I also added an <code>.onSubmit(of: .search)</code> modifier to the <code>List</code> view to handle the search submission. In this example, it prints the search text to the console, but you can customize the action based on your requirements.</p>
<p>With these modifications, users will be able to enter search queries and filter the items in the list based on the e<a id="_idTextAnchor398"/>ntered text.</p>
<h2 id="_idParaDest-118"><a id="_idTextAnchor399"/>App Page</h2>
<p>To provide <a id="_idIndexMarker326"/>an enhanced page with more information when the user clicks on an app, you can create a new view that displays detailed information about the selected app. Here’s an example of how you can modify the code to achieve this:</p>
<pre class="source-code">
import SwiftUIstruct AppDetailsView: View {
    let appName: String
    var body: some View {
        VStack {
            Text(appName)
                .font(.largeTitle)
                .padding()
            // Add more detailed information about the app here
            Spacer()
        }
        .navigationBarTitle(appName)
    }
}
struct MainView: View {
    @State private var searchText = ""
    @State private var selectedApp: String? = nil
    private let adaptiveColumns = [
        GridItem(.adaptive(minimum: 300))
    ]
    var body: some View {
        NavigationView {
            List {
                Label("Discover", systemImage: "star")
                    .onTapGesture {
                        print("Discover")
                    }
                Label("Arcade", systemImage: "gamecontroller")
                    .onTapGesture {
                        selectedApp = "Arcade"
                    }
                Label("Create", systemImage: "paintbrush")
                    .onTapGesture {
                        selectedApp = "Create"
                    }
                Label("Categories", systemImage: "square.grid.3x3.square")
                    .onTapGesture {
                        selectedApp = "Categories"
                    }
                Label("Favorites", systemImage: "heart")
                    .onTapGesture {
                        selectedApp = "Favorites"
                    }
                Label("Updates", systemImage: "square.and.arrow.down")
                    .onTapGesture {
                        selectedApp = "Updates"
                    }
            }
            .searchable(text: $searchText)
            .onSubmit(of: .search) {
                print(searchText)
            }
            ScrollView {
                Color.clear
                Image("FireDEV Banner")
                    .resizable()
                    .padding(.horizontal)
                    .scaledToFit()
                LazyVGrid(columns: adaptiveColumns, spacing: 20) {
                    ForEach(0..&lt;20) { index in
                        VStack(alignment: .leading) {
                            Image("FireDEV Logo")
                            Label("FireDEV", systemImage: "")
                                .font(.system(size: 36))
                                .onTapGesture {
                                    selectedApp = "FireDEV"
                                }
                        }
                    }
                }
            }
        }
        .sheet(item: $selectedApp) { app in
            AppDetailsView(appName: app)
        }
    }
}
struct MainView_Previews: PreviewProvider {
    static var previews: some View {
        MainView()
    }
}</pre>
<p>In this<a id="_idIndexMarker327"/> modified code, I added a new <code>AppDetailsView</code>, which takes the selected app name as a parameter and displays more detailed information about the app. You can customize the content of this view based on your requirements.</p>
<p>I also added a new <code>@State</code> variable called <code>selectedApp</code> to track the selected app name. When a user taps on an app in the list or label, the corresponding app name is assigned to <code>selectedApp</code>, and <code>AppDetailsView</code> is presented as a sheet using <code>.sheet(item: $selectedApp)</code>. When the user dismisses the sheet, <code>selectedApp</code> is set back to <code>nil</code>.</p>
<p>In <code>AppDetailsView</code>, I simply display the app name for demonstration purposes. You can add more information and customize the layout as per your app’s requirements.</p>
<p>With these modifications, when a user taps on an app, a new sheet will appear showing the enhanced page with more information about the<a id="_idTextAnchor400"/> selected app.</p>
<h1 id="_idParaDest-119"><a id="_idTextAnchor401"/>Summary</h1>
<p>In this chapter, we successfully implemented the main body for the app store application. We started by analyzing the wireframes and breaking down each element into SwiftUI components. We then meticulously implemented the SwiftUI components to match the design from the wireframe. We implemented a scrollable stack with a highlight banner and app icons. We also looked at a few extra task implementations at the end of the chapter.</p>
<p>In the next chapter, we will begin working on our fourth and final application, which is the fitness companion app for Apple Watch. Our focus will be on analyzing the design and breaking it down to gain a better understanding of how we can implement this application on our next platform.</p>
</div>
</body></html>