<html><head></head><body><div class="chapter" title="Chapter&#xA0;10.&#xA0;Optimizing, Testing, and Shipping your Games"><div class="titlepage"><div><div><h1 class="title"><a id="ch10"/>Chapter 10. Optimizing, Testing, and Shipping your Games</h1></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>Developing a game to the point of completion is a great accomplishment. It's one step closer to sharing it with the rest of the world so other people can play your new app. The benefit of creating your game with Corona SDK is that you have the option to build for iOS and/or Android. You want to ensure your application is ready for submission so it can be distributed in the mobile platform you're developing in. We'll go over the process of what it takes to prepare your game for its release state.</p></blockquote></div><p>In this chapter, we will learn the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Improve performance of your application</li><li class="listitem" style="list-style-type: disc">Set up a distribution provisioning profile for the App Store</li><li class="listitem" style="list-style-type: disc">Manage application information in iTunes Connect</li><li class="listitem" style="list-style-type: disc">Learn how to submit an application to application loader</li><li class="listitem" style="list-style-type: disc">Sign applications for Android</li><li class="listitem" style="list-style-type: disc">Learn how to submit an application to the Google Play Store</li></ul></div><div class="section" title="Understanding memory efficiency"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec01"/>Understanding memory efficiency</h1></div></div></div><p>As you develop your application, you should always consider how your design choices affect the performance of your application. Device memory still has its constraints even though there are improvements in computing power and memory. Performance and optimization within the device will not only achieve faster response times, but also help minimize memory usage and maximize battery life.<a id="id660" class="indexterm"/>
</p><p>Memory is an important resource on mobile devices. When too much memory is being consumed, devices may force quit your application when you least expect it. Here are some things to be aware of while developing:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Eliminate memory leaks:</strong></span> Allowing leaks to exist means extra used memory in your application that takes up valuable space. Even though Lua does automatic memory management, memory leaks can still occur in your code. For example, when you introduce global variables into your application, it is your job to tell Lua when they are not needed anymore so memory can be freed. This is done through using <code class="literal">nil</code> in your code <code class="literal">(myVariable = nil)</code>.<a id="id661" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Display images should be made as small as possible:</strong></span> You may want to have many display images in your scene, but it may take up too much texture memory. Sprite sheets can take a toll on taking up a lot of memory in your apps. They should also be created at the smallest size as conveniently possible and have the appropriate amount of frames that demonstrate the animation clearly. For all items that you have displayed, plan out which elements are constantly in your background and foreground. If there is a way to combine several images together if they don't move, do so. It'll save some memory when adding multiple display images.<a id="id662" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Do not load all your resources all at once:</strong></span> Avoid loading resource files until they are actually needed. This will help save memory and keep your application from crashing while trying to load too many things at once.<a id="id663" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Remove objects from the display hierarchy:</strong></span> When a display object is created, it is implicitly added to a display hierarchy. When you no longer need a display object, you should remove it from the display hierarchy, especially when the objects contain images. This can be done by using <code class="literal">display.remove( myImage ); myImage = nil</code>.<a id="id664" class="indexterm"/><p>For example:
</p><div class="informalexample"><pre class="programlisting">local box = display.newRect( 0, 50, 100, 100)
box:setFillColor( 255, 255, 255, 255 )
box.alpha = 1
local function removeBox()
if box.alpha == 1 then
print("box removed")
display.remove( box )
box = nil
end
end
timer.performWithDelay( 1000, removeBox, 1 ) -- Runs timer to 1000 milliseconds before calling the block within removeBox()
</pre></div></li><li class="listitem" style="list-style-type: disc">Sound files should be made as small as possible: use a free program like Audacity or your preferred audio software to compress music or sound effects and build for the device. It is best to compare untouched audio with compressed audio to hear the difference in quality. This will help you determine a good median between sound quality and file size.<a id="id665" class="indexterm"/></li></ul></div><div class="section" title="Graphics"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec01"/>Graphics</h2></div></div></div><p>Display images have a way of taking up a lot of texture memory if you're not paying attention to the size and amount of images being used all at once.<a id="id666" class="indexterm"/>
</p><div class="section" title="Group objects"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl3sec01"/>Group objects</h3></div></div></div><p>If a property of several objects is set to the same value, it's preferable to add the objects to a group and then modify the property of the group. It'll make it much easier for you to code and it optimizes your animation.<a id="id667" class="indexterm"/>
</p></div><div class="section" title="Turn off animations when they're not being used"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl3sec02"/>Turn off animations when they're not being used</h3></div></div></div><p>It's easy to forget to stop animations from running in the background when they're not needed or when you simply have them invisible.<a id="id668" class="indexterm"/>
</p><p>When you include a listener such as<code class="literal">"enterFrame"</code> and the objects registered under the listener have been set to <code class="literal">.isVisible = false</code>, it'll continue to run in the background even though it is not seen onscreen. Make sure that listeners are removed when they are not needed.</p></div><div class="section" title="Optimizing image sizes"><div class="titlepage"><div><div><h3 class="title"><a id="ch10lvl3sec03"/>Optimizing image sizes</h3></div></div></div><p>When you have large file sizes, especially full-screen images, the responsiveness of your application will slow down because of the time it takes to load and plus it uses up a lot of memory. When using large images, try compressing the file size as much as you can with an image-editing tool such as Photoshop or Pngcrush for example. It'll help reduce the file size and save you the pain on application lag. Compressing large image sizes will benefit you in the long run.<a id="id669" class="indexterm"/>
</p></div></div></div></div>
<div class="section" title="Distributing iOS applications"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec02"/>Distributing iOS applications</h1></div></div></div><p>Once your game is finally debugged and completed, what's next? Assuming you're already registered in the iOS Developer Program, there are some guidelines that have to be followed before an application can be submitted to the App Store.</p><div class="section" title="Prepping your app icons"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec02"/>Prepping your app icons</h2></div></div></div><p>There are various image sizes and naming conventions required for your app icon depending on which iOS devices your application is developed for. You can find the latest information in the<span class="strong"><strong> Application Icons</strong></span> section of the iOS Human Interface Guidelines on the Apple Developer website:<a class="ulink" href="http://https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf"> https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf</a>.<a id="id670" class="indexterm"/>
</p><p>The following are the app icon requirements, which also need to be in <code class="literal">.png</code> format:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">iTunesArtwork</code>—512x512 px image. The .png extension needs to be removed for this image.<a id="id671" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon.png</code>—57x57 px image. Used for the App Store and home screen on iPhone 3G/iPod Touch.<a id="id672" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon@2x.png</code>—114x114 px image. Used for the iPhone 4/4S home screen.<a id="id673" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-72.png</code>—72x72 px image. Used for the iPad home screen.<a id="id674" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-72@2x.png</code>—144x144 px image. Used for the iPad (high resolution) home screen.<a id="id675" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-Small.png</code>—29x29 px image. Used for Spotlight and Settings.<a id="id676" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-Small@2x.png</code>—58x58 px image. Used for iPhone 4/4S Spotlight and Settings.</li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-Small-50.png</code>—50x50 px image. Used for iPad Spotlight and Settings.</li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-Small-50@2x.png</code>—100x100 px image. Used for iPad (high resolution) Spotlight and Settings.<a id="id677" class="indexterm"/></li></ul></div><p>In your <code class="literal">build.settings</code> file, you will need to include the icon references for all the devices you are building for in your application. The following is an example of how to set up your file if creating universal builds:</p><div class="informalexample"><pre class="programlisting">settings =
{
orientation =
{
default = "landscapeRight",
},
iphone =
{
plist =
{
CFBundleIconFile = "Icon.png",
CFBundleIconFiles = {
"Icon.png",
"Icon@2x.png",
"Icon-72.png",
"Icon-72@2x.png",
"Icon-Small.png",
"Icon-Small@2x.png",
"Icon-Small-50.png",
"Icon-Small-50@2x.png",
},
},
},
}
</pre></div><p>You do not need to include the iTunesArtwork image in the plist, but make sure that it's inserted to your build project folder.<a id="id678" class="indexterm"/>
</p></div></div>
<div class="section" title="Time for action&#x2014;setting up your distribution certificate and provisioning profile for the App Store"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec03"/>Time for action—setting up your distribution certificate and provisioning profile for the App Store</h1></div></div></div><p>We have focused on creating development certificates and provisioning profiles to test and debug our apps on a device. Now we have to create a distribution version of them in order to submit an iOS application. Please be aware that Apple can change the design of their website at any time. So don't get frustrated if the steps and screenshots do not match up.<a id="id679" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Log in to your Apple Developer account and go to the iOS Provisioning Portal. Select App IDs. Create a new App ID that pertains to your application so you can identify it. If you have an existing App ID that you have been using during development, you can disregard this step. You can use an existing Bundle Seed ID if you choose to, otherwise select<span class="strong"><strong> Generate New</strong></span> if this is your first in the bundle or if you simply want to create a new standalone application.<p>In the <span class="strong"><strong>Bundle Identifier (App ID Suffix)</strong></span> field, specify a unique identifier for your app. It is recommended that you use the reverse-domain style string, that is, <code class="literal">com.domainname.appname</code>. You will need to replace <span class="strong"><strong>domainname</strong></span> with your own domain name and <span class="strong"><strong>appname</strong></span> with your own application name.
</p><div class="mediaobject"><img src="graphics/1888_10_01.jpg" alt="Time for action—setting up your distribution certificate and provisioning profile for the App Store"/></div></li><li class="listitem">Navigate to the Provisioning section of the<span class="strong"><strong> Provisioning Portal</strong></span> and select the<span class="strong"><strong> Distribution</strong></span> tab. Select the<span class="strong"><strong> App Store</strong></span> radio button next to<span class="strong"><strong> Distribution Method</strong></span>. Create a<span class="strong"><strong> Distribution Provisioning Profile Name</strong></span>. Check to make sure that your iOS<span class="strong"><strong> Distribution Certificate</strong></span> is displayed. Lastly, select the<span class="strong"><strong> App ID</strong></span> you plan to use to create your<span class="strong"><strong> Distribution Provisioning Profile</strong></span>. Click on the<span class="strong"><strong> Submit</strong></span> button.<a id="id680" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_02.jpg" alt="Time for action—setting up your distribution certificate and provisioning profile for the App Store"/></div></li><li class="listitem">Refresh your browser and download your new<span class="strong"><strong> Distribution Provisioning Profile</strong></span>.<a id="id681" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_03.jpg" alt="Time for action—setting up your distribution certificate and provisioning profile for the App Store"/></div></li><li class="listitem">Launch Xcode if it's not already open and press<span class="emphasis"><em> Shift + Command + 2</em></span> on the keyboard to open<span class="strong"><strong> Organizer</strong></span>. Under<span class="strong"><strong> Library</strong></span>, select the<span class="strong"><strong> Provisioning Profiles</strong></span> section. Drag your downloaded <code class="literal">.mobileprovision</code> file to the<span class="strong"><strong> Organizer</strong></span> window. This will automatically copy your <code class="literal">.mobileprovision</code> file to the proper directory or double-click on the file to add it.<div class="mediaobject"><img src="graphics/1888_10_04.jpg" alt="Time for action—setting up your distribution certificate and provisioning profile for the App Store"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec03"/>What just happened?</h2></div></div></div><p>The<span class="strong"><strong> App ID</strong></span> you use is imperative to identify your app that will be submitted. It is best to have a unique reverse domain style string. As for your<span class="strong"><strong> Bundle Identifier (App ID Prefix)</strong></span>, you can generate a new one as well or use an existing one. If you are implementing Game Center or In App Purchase in your application, do not substitute a wild-card character (asterisk *). The<span class="strong"><strong> Bundle ID</strong></span> needs to be completely unique.<a id="id682" class="indexterm"/>
</p><p>In order to distribute for the App Store, you need to create an App Store Distribution Provisioning Profile. Any other profile, whether development or ad-hoc will not be accepted. The process is similar to making a Development Provisioning Profile.</p><p>You can find more information on Distribution Provisioning Profiles on the Apple Developer site at:<a class="ulink" href="http://https://developer.apple.com/ios/manage/distribution/index.action"> https://developer.apple.com/ios/manage/distribution/index.action</a> (You will be asked to log in to your Apple Developer account if you haven't done so already). And Anscamobile's site at:<a class="ulink" href="http://developer.anscamobile.com/content/building-devices-iphoneipad"> http://developer.anscamobile.com/content/building-devices-iphoneipad</a>.</p></div></div>
<div class="section" title="iTunes Connect"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec04"/>iTunes Connect</h1></div></div></div><p>iTunes Connect is a suite of web-based tools that allows you to submit and manage your applications for distribution on the App Store. In iTunes Connect, you will be able to check the status of your contracts, set up your tax and banking information, obtain sales and finance reports, request promotional codes, manage users, applications, metadata, and your In-App Purchase catalog.<a id="id683" class="indexterm"/>
</p><div class="section" title="Contracts, tax, and banking"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec04"/>Contracts, tax, and banking</h2></div></div></div><p>If you plan on selling your app, you need to have a paid commercial agreement in place so that it can be posted to the App Store. You will have to request a contract pertaining to iOS Paid Applications. All this is done through iTunes Connect under the<span class="strong"><strong> Contracts, Tax</strong></span>, and<span class="strong"><strong> Banking</strong></span> link.</p><p>When requesting contracts, be advised of potential issues that can occur, such as delays when Apple processes your information for the first time and/or changing your current contact information in iTunes Connect (that is, change of address if you have moved to a different location). It is your responsibility to consistently contact Apple for support to make sure the information is always up to date in your contracts.<a id="id684" class="indexterm"/>
</p></div></div>
<div class="section" title="Time for action&#x2014;managing your application in iTunes Connect"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec05"/>Time for action—managing your application in iTunes Connect</h1></div></div></div><p>We are going to go over how to set up your application information in iTunes Connect. Any other information pertaining to user accounts, contracts, and banking that you would like to set up can be found at the following URL:<a class="ulink" href="http://https://developer.apple.com/appstore/resources/submission/"> https://developer.apple.com/appstore/resources/submission/</a>.<a id="id685" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Log in to iTunes Connect at:<a class="ulink" href="http://itunesconnect.apple.com/"> http://itunesconnect.apple.com/</a>. Your login information is the same as your iOS Developer account. Once logged in, select<span class="strong"><strong> Manage Your Applications</strong></span>. Click on the Add<span class="strong"><strong> New App</strong></span> button. The<span class="strong"><strong> App Name</strong></span> is the name of your application. The<span class="strong"><strong> SKU Number</strong></span> is a unique alphanumeric identifier for the app. Your<span class="strong"><strong> Bundle ID</strong></span> is the one you created in the iOS Provisioning Portal. Fill in the information and click<span class="strong"><strong> Continue</strong></span>.<div class="mediaobject"><img src="graphics/1888_10_05.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li><li class="listitem">The next step is selecting the date you want your application to be live in the App Store and the<span class="strong"><strong> Price Tier</strong></span> you want to charge. There is an optional checkbox for<span class="strong"><strong> Discount for Educational Institutions</strong></span>. This is only if you want your app to be discounted for educational institutions that want to purchase multiple copies at the same time. Click<span class="strong"><strong> Continue</strong></span> when done.<a id="id686" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_06.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li><li class="listitem">Next fill in the<span class="strong"><strong> Metadata</strong></span> section about your application. This includes the version number, description of your game, categories, and keywords pertaining to your app, copyright, contact information, and support URL.<div class="mediaobject"><img src="graphics/1888_10_07.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li><li class="listitem">The<span class="strong"><strong> Rating</strong></span> section is based on the content of your application. For each description, choose the level of frequency that best describes your app. There are certain content types that will result in automatic rejection such as realistic violence portrayed in your app or personal attacks to a target individual or group are a few examples. You can learn more about the<span class="strong"><strong> App Store Review Guidelines</strong></span> at the following URL:<a class="ulink" href="http://https://developer.apple.com/appstore/resources/approval/guidelines.html"> https://developer.apple.com/appstore/resources/approval/guidelines.html</a>.<a id="id687" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_08.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li><li class="listitem">As discussed earlier in the<span class="strong"><strong> Uploads</strong></span> section, you will need a large version of your app icon, iPhone/iPod Touch screenshots and iPad screenshots (if your app runs on iPad) of the content in your application.<a id="id688" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_09.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li><li class="listitem">You will be greeted with a page summary of your application information. Check to make sure everything is displayed correctly and then click<span class="strong"><strong> Done</strong></span>.<a id="id689" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_10.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li><li class="listitem">You will be sent back to your version details page. Notice a button that says<span class="strong"><strong> Ready to Upload Binary</strong></span>. Click on the button and you will be required to answer a couple of questions about<span class="strong"><strong> Export Compliance</strong></span>. Once completed, you will have the permission to upload your binary through<span class="strong"><strong> Application Loader</strong></span>.<a id="id690" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_11.jpg" alt="Time for action—managing your application in iTunes Connect"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec05"/>What just happened?</h2></div></div></div><p>iTunes Connect is where you'll be managing your application from here on out when distributing to the App Store. Every single piece of information you want to display about your app is done in iTunes Connect.<a id="id691" class="indexterm"/>
</p><p>Once you're in the section pertaining to<span class="strong"><strong> App Information</strong></span>, make sure your<span class="strong"><strong> SKU Number</strong></span> is unique and that it relates to your app so you can identify it later down the line. Also, make sure the<span class="strong"><strong> Bundle ID</strong></span> you designated for your app is the correct one.</p><p>The app availability in the<span class="strong"><strong> Rights and Pricing</strong></span> section controls when you want your app to go live once it's approved. It's good to set it at a date a couple of weeks in the future from when you submit it. It can take a couple of days to a couple of weeks for the review process to go from<span class="strong"><strong> Under Review</strong></span> to<span class="strong"><strong> Ready for Sale</strong></span> as long as there are no problems with the submission. The price tier is where you set the price for your app or it can be set to<span class="strong"><strong> Free</strong></span>. You can click on<span class="strong"><strong> View Pricing Matrix</strong></span> to determine the price thet you're aiming to sell your app for.</p><p>Filling out the information in the<span class="strong"><strong> Metadata</strong></span> section is what the customer will see in the App Store. The<span class="strong"><strong> Rating</strong></span> section pertains to Apple Content Descriptions. Make sure the level of frequency is checked off as close as possible to the content of your application.</p><p>The<span class="strong"><strong> Uploads</strong></span> section is where your include your 512 x 512 px app icon and screenshots that best suit your app visually. Make sure you provide the correct image sizes. Once you have transitioned back to the<span class="strong"><strong> Application Information</strong></span> screen, you'll notice the status says<span class="strong"><strong> Prepare for Upload</strong></span>. When you click on the<span class="strong"><strong> Ready to Upload Binary</strong></span> button on the Version Details page, you will answer questions about Export Compliance. Soon after, the status will change to<span class="strong"><strong> Waiting for Upload</strong></span>.<a id="id692" class="indexterm"/>
</p><p>More information relating to iTunes Connect can be found at the following URL:<a class="ulink" href="http://https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf"> https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf</a>.</p></div></div>
<div class="section" title="Building an iOS application for distribution in Corona"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec06"/>Building an iOS application for distribution in Corona</h1></div></div></div><p>We have come to the homestretch on getting your iOS application submitted to the App Store. Assuming you have already tested your application and debugged with your development provisioning profile, you're ready to create a distribution build that will create a binary ZIP file of your app.<a id="id693" class="indexterm"/>
</p></div>
<div class="section" title="Time for action&#x2014;building your application and uploading to Application Loader"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec07"/>Time for action—building your application and uploading to Application Loader</h1></div></div></div><p>Time to create the final game build for iOS distribution and upload it to the Application Loader for review under Apple's board.<a id="id694" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Launch the Corona simulator, navigate to application project folder, and run it. Go to the Corona simulator menu bar and select<span class="strong"><strong> File | Build | iOS</strong></span>. Fill in all your application details. Make sure that your<span class="strong"><strong> Application Name</strong></span> and<span class="strong"><strong> Version</strong></span> match what is displayed in your iTunes Connect account. Choose<span class="strong"><strong> Device</strong></span> to build an app bundle. Next, select the target device (iPhone or iPad) your app is created for from the<span class="strong"><strong> Supported Devices</strong></span> drop-down menu.<p>Under the <span class="strong"><strong>Code Signing Identity</strong></span> drop-down menu, choose the <span class="strong"><strong>Distribution Provisioning Profile</strong></span> you created in the iOS Provisioning Portal. In the <span class="strong"><strong>Save to folder</strong></span> section, click <span class="strong"><strong>Browse</strong></span> and choose where you would like your application to be saved. Click on the <span class="strong"><strong>Build</strong></span> button when done.
</p><div class="mediaobject"><img src="graphics/1888_10_12.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">When the build has been compiled, you will be greeted with a display that your application is ready for distribution. Select the<span class="strong"><strong> Upload to App Store</strong></span> button.<a id="id695" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_13.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">When the<span class="strong"><strong> Welcome to Application Loader</strong></span> window pops up, log in with your iTunes Connect information. You will then be brought to another window with the option to<span class="strong"><strong> Deliver Your App</strong></span> or<span class="strong"><strong> Create New Package</strong></span>. Choose<span class="strong"><strong> Deliver Your App</strong></span>. The next window displays a drop-down menu; choose the name of the application you will be submitting and then click on the<span class="strong"><strong> Next</strong></span> button.<a id="id696" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_14.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">The available application information found in iTunes Connect is displayed. Verify that it is correct and then click on the<span class="strong"><strong> Choose</strong></span> button.<a id="id697" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_15.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">Click the ellipsis (...) button to replace the current file before submitting and then select the<span class="strong"><strong> Send</strong></span> button.<a id="id698" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_16.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">The Application Loader will begin submitting your application binary file to the App Store.<a id="id699" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_17.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">You will get a confirmation that your binary was delivered to the App Store if it uploaded successfully. You can check on the status of your application in iTunes Connect when it goes to review, ready for sale, live, and so on. An e-mail will be sent to you upon every status change of your application. That's it! That's how you submit an app to the App Store!<a id="id700" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_18.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li><li class="listitem">When your application has been reviewed and approved in the App Store, you can go into iTunes Connect and adjust the availability date if it is approved before your proposed launch date. Your app will be live in the App Store instantly.<a id="id701" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_19.jpg" alt="Time for action—building your application and uploading to Application Loader"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec06"/>What just happened?</h2></div></div></div><p>It's important that when you build your app that under<span class="strong"><strong> Code Signing Identity</strong></span>, you select your Distribution Provisioning Profile that was created for your distribution build. Upon the compilation of your build, you can launch the Application Loader. Make sure that you have Xcode installed. Application Loader will launch readily after you select the<span class="strong"><strong> Upload to App Store</strong></span> button.<a id="id702" class="indexterm"/>
</p><p>While you're in Application Loader, the name of your app will be displayed in the drop down once you have completed loading the binary information to iTunes Connect. When you deliver your app, select the zipped up binary from the location you saved your file at.</p><p>As soon as the file is uploaded, a confirmation window will appear and an e-mail will be sent to the Apple ID assigned to your Apple account. Your binary will be shown with a status as<span class="strong"><strong> Waiting for Review</strong></span> in iTunes Connect.</p><p>After all those steps, you officially know how to submit an iOS application to the App Store. Hooray!</p></div><div class="section" title="Have a go hero—making a universal iOS build"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec07"/>Have a go hero—making a universal iOS build</h2></div></div></div><p>If you developed an application for iPhone only, try implementing it as an iPad version as well so it can become a universal build. Take the lessons you learned from the previous chapters using your <code class="literal">build.settings</code> and <code class="literal">config.lua</code> to resize your application. Also, don't forget about what is required of your app icon as well. It's like hitting two birds with one stone!</p></div></div>
<div class="section" title="The Google Play Store"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec08"/>The Google Play Store</h1></div></div></div><p>The Google Play Store is a publishing platform that helps you publicize, sell, and distribute your Android applications to users around the world.<a id="id703" class="indexterm"/>
</p><p>To register as an Google Play developer and get started with publishing, visit the Google Play Android Developer Console site publisher site. You can sign up for an account at the following URL:<a class="ulink" href="http://https://play.google.com/apps/publish/"> https://play.google.com/apps/publish/</a>.</p><div class="section" title="Creating launcher icons"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec08"/>Creating launcher icons</h2></div></div></div><p>A launcher icon is a graphic that represents your application. Launcher icons are used by applications and appear on the user's home screen. Launcher icons can also be used to represent shortcuts into your application. These are similar to the icons created for iOS applications. The following are the launcher icon requirements, which also need to be in 32-bit <code class="literal">.png</code> format:<a id="id704" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-ldpi.png</code>—36x36 px image. Needs to be at 120 dpi. Used for low-density screen.</li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-mdpi.png</code>—48x48 px image. Needs to be at 160 dpi. Used for medium-density screen.</li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-hdpi.png</code>—72x72 px image. Needs to be at 240 dpi. Used for high-density screen.</li><li class="listitem" style="list-style-type: disc"><code class="literal">Icon-xhdpi.png</code>—96x96 px image. Needs to be at 320 dpi. Used for extra-high density screen.</li></ul></div><p>Launcher icons need to be placed in your project folder at the time you build your application. The Google Play Store also requires you to have a 512 x 512 px version of your icon, which will be uploaded in the developer console at upload time of your build. For more information about launcher icons, visit:<a class="ulink" href="http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html"> http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html</a>.</p></div></div>
<div class="section" title="Time for action&#x2014;signing your app for the Google Play Store"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec09"/>Time for action—signing your app for the Google Play Store</h1></div></div></div><p>The Android system requires that all installed applications be digitally signed with a certificate whose private key is held by the application's developer. The Android system uses the certificate as a means of identifying the author of an application and establishing a relationship of trust between applications. The certificate is not used to control which applications the user can install. The certificate does not need to be signed by a certificate authority; it can be self-signed. Certificates can be signed on either Mac or Windows systems.<a id="id705" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">On the Mac, go to<span class="strong"><strong> Applications | Utilities | Terminal</strong></span>. On Windows, go to<span class="strong"><strong> Start Menu | All Programs | Accessories | Command Prompt</strong></span>. Using the Keytool command, add in the following lines and press<span class="emphasis"><em> Enter:</em></span><div class="informalexample"><pre class="programlisting"><span class="strong"><strong>keytool -genkey -v -keystore my-release-key.keystore -alias aliasname -keyalg RSA -validity 999999
</strong></span>
</pre></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip09"/>Tip</h3><p>Replace <code class="literal">my-release-key</code> with the name of your application. Also, if you add any extra numbers past 999999 (that is, extra 9s) the application will appear broken.</p></div><div class="mediaobject"><img src="graphics/1888_10_20.jpg" alt="Time for action—signing your app for the Google Play Store"/></div></li><li class="listitem">You will be asked to enter a keystore password. From here you will create a unique password that you as the developer must come up with. You will be asked to re-enter it once you've added it. The remaining other questions that will be asked pertains to your developer/company information, location, and so on. Fill it all in. Once you have completed the required information, you have generated a key to sign your Android build. For more information pertaining to app signing, visit:<a class="ulink" href="http://developer.android.com/guide/publishing/app-signing.html"> http://developer.android.com/guide/publishing/app-signing.html</a>.</li><li class="listitem">Launch the Corona simulator, navigate to the application project folder, and run it. Go to the Corona simulator menu bar and select<span class="strong"><strong> File | Build | Android</strong></span>. Fill in the information for<span class="strong"><strong> Application Name</strong></span> and<span class="strong"><strong> Version</strong></span> pertaining to your app. Specify a<span class="strong"><strong> Package</strong></span> name using the Java scheme. Under<span class="strong"><strong> Keystore</strong></span>, select the<span class="strong"><strong> Browse</strong></span> button to locate your signed private key and then from the pull-down, select your generated key for your release build. You will be prompted to enter your keystore password you used to sign your application in the Keytool command. Under<span class="strong"><strong> Key Alias</strong></span>, choose<span class="strong"><strong> aliasname</strong></span> from the pull-down and enter your password when prompted. Select the<span class="strong"><strong> Browse</strong></span> button to choose a location for your app build. Choose the<span class="strong"><strong> Build</strong></span> button when finished.<a id="id706" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_21.jpg" alt="Time for action—signing your app for the Google Play Store"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec09"/>What just happened?</h2></div></div></div><p>The Keytool generates the keystore as a file called <code class="literal">my-release-key.keystore</code>. The keystore and key are protected by the passwords you entered. The keystore contains a single key, valid for 999999 days. The alias is a name that you will use later, to refer to this keystore when signing your application.<a id="id707" class="indexterm"/>
</p><p>Your keystore password is something you will create and must remember when you build your app in Corona. There will be an option if you want to use a different password for the aliasname. You can press<span class="emphasis"><em> Enter</em></span> to use the same one while you're in the Terminal or Command Prompt.</p><p>When you create your build in Corona, make sure your version number is an integer with no special characters. Also, you will have to make sure your <code class="literal">build.settings</code> includes the <code class="literal">versionCode</code> as well. This will be the same number as your version number. Refer to<a class="link" href="ch09.html" title="Chapter 9. Handling Multiple Devices and Networking your Apps"> Chapter 9</a>, <span class="emphasis"><em>Handling Multiple Devices and Networking your Apps for more information</em></span>.</p><p>The Java scheme in your build is the reverse of your domain name with the name of your product/company appended, and the name of your app. For example, <code class="literal">com.mycompany.games.mygame</code>.</p><p>When you have your app built using your private key and you have selected an alias name, the <code class="literal">.apk</code> file will be created and ready to publish on the Google Play Store.</p></div></div>
<div class="section" title="Time for action&#x2014;submitting an app to the Google Play Store"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec10"/>Time for action—submitting an app to the Google Play Store</h1></div></div></div><p>We'll be using the Developer Console. This is where your developer profile will be created to publish to the Google Play Store.<a id="id708" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Once you're logged in to the Developer Console, click on the button that says<span class="strong"><strong> Upload Application</strong></span>. You will be greeted with a pop-up window that will allow you to upload your build. Click on the<span class="strong"><strong> Choose File</strong></span> button and locate the <code class="literal">.apk</code> file of your application. Select the<span class="strong"><strong> Upload</strong></span> button. When your <code class="literal">.apk</code> file is uploaded, click on the<span class="strong"><strong> Save</strong></span> button. Lastly, click on the<span class="strong"><strong> Close</strong></span> button.<div class="mediaobject"><img src="graphics/1888_10_22.jpg" alt="Time for action—submitting an app to the Google Play Store"/></div></li><li class="listitem">Select the<span class="strong"><strong> APK files</strong></span> tab and press the<span class="strong"><strong> Activate</strong></span> link on the right side of the screen to activate the <code class="literal">.apk</code> file.<div class="mediaobject"><img src="graphics/1888_10_23.jpg" alt="Time for action—submitting an app to the Google Play Store"/></div></li><li class="listitem">Now, select the<span class="strong"><strong> Product details</strong></span> tab. In the<span class="strong"><strong> Upload assets</strong></span> section, you will require a couple of screenshots from your application and a 512 x 512 px version of your app icon. There are optional graphics and videos you can include as well if you desire. Scroll down the page to the<span class="strong"><strong> Listing details</strong></span> section. Fill out the information with the details of your app, including the application<span class="strong"><strong> Title, Description, Application Type</strong></span>, and<span class="strong"><strong> Category</strong></span>. The next section entails the<span class="strong"><strong> Publishing options</strong></span>. Check off the information that pertains to your app. The pricing is defaulted at<span class="strong"><strong> Free</strong></span>. If you want to make a paid version, you must set up a merchant account with Google Checkout. The next section is<span class="strong"><strong> Contact information</strong></span>. Fill out the necessary information. The last section is<span class="strong"><strong> Consent</strong></span>. Carefully acknowledge the requirements for publishing to the Google Play Store and check off the boxes.<a id="id709" class="indexterm"/><div class="mediaobject"><img src="graphics/1888_10_24.jpg" alt="Time for action—submitting an app to the Google Play Store"/></div></li><li class="listitem">Once you have filled in the details in the<span class="strong"><strong> Product details</strong></span> tab, click on the<span class="strong"><strong> Save</strong></span> button so all your APK information is saved in the Developer Console.<a id="id710" class="indexterm"/></li><li class="listitem">Finally, click on the<span class="strong"><strong> Publish</strong></span> button. You will be brought to the main screen of the Developer Console and your application status will display<span class="strong"><strong> Published</strong></span>. Congratulations, you have published your app to the Google Play Store!<div class="mediaobject"><img src="graphics/1888_10_25.jpg" alt="Time for action—submitting an app to the Google Play Store"/></div></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec10"/>What just happened?</h2></div></div></div><p>The Developer Console page displays a simple step-by-step process on how to publish your <code class="literal">.apk</code> file. While in the<span class="strong"><strong> APK files</strong></span> tab, selecting the<span class="strong"><strong> Activate</strong></span> link will allow the console to check which devices the build is compatible with.<a id="id711" class="indexterm"/>
</p><p>The assets required to publish an app show the acceptable resolution and image types next to each section. It is optional to include a promotional graphic, feature graphic, and promotional video, but it would be in your best interest to add enough substance to your app page. This will make it appealing to potential customers.</p><p>After all the information related to your app is completed, make sure to save your progress. Once you click on the<span class="strong"><strong> Publish</strong></span> button, you're done! You should be able to see your app in the Google Play Store within the hour you published it.</p></div><div class="section" title="Have a go hero—adding more promos"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec11"/>Have a go hero—adding more promos</h2></div></div></div><p>The Google Play Store gives you many options on how to promote your application. Additional assets can be included from the Developer Console. Try the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add a promotional graphic.</li><li class="listitem" style="list-style-type: disc">Add a feature graphic.</li><li class="listitem" style="list-style-type: disc">Create a promotional video of your app. A website like YouTube is a good way to share a trailer of your game.</li></ul></div></div><div class="section" title="Pop quiz—publishing applications"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec12"/>Pop quiz—publishing applications</h2></div></div></div><div class="orderedlist"><ol class="orderedlist"><li class="listitem">When creating an iOS Distribution Provisioning file, what distribution method do you need to use?<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">a. Development</li><li class="listitem" style="list-style-type: none">b. App Store</li><li class="listitem" style="list-style-type: none">c. Ad-hoc</li><li class="listitem" style="list-style-type: none">d. None of the above</li></ul></div></li><li class="listitem">Where do you refer to for the status of submitted iOS applications?<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">a. iTunes Connect</li><li class="listitem" style="list-style-type: none">b. iOS Provisioning Portal</li><li class="listitem" style="list-style-type: none">c. Application Loader</li><li class="listitem" style="list-style-type: none">d. None of the above</li></ul></div></li><li class="listitem">What is required to build an app for the Google Play Store?<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">a. Create a private key under Keytool command</li><li class="listitem" style="list-style-type: none">b. Sign your application with a debug key</li><li class="listitem" style="list-style-type: none">c. Sign your application with your private key</li><li class="listitem" style="list-style-type: none">d. a and c</li></ul></div></li></ol></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec11"/>Summary</h1></div></div></div><p>We have accomplished a huge milestone with this chapter. Not only do we know how to submit to one major app market, but two! Publishing your applications to the App Store and Google Play Store is not a scary place after all.</p><p>We have covered the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The importance of memory efficiency</li><li class="listitem" style="list-style-type: disc">Creating Provision Profiles for Distribution to the App Store</li><li class="listitem" style="list-style-type: disc">Managing iTunes Connect</li><li class="listitem" style="list-style-type: disc">Submitting a binary to the Application Loader</li><li class="listitem" style="list-style-type: disc">Signing a release build for Android applications</li><li class="listitem" style="list-style-type: disc">Submitting <code class="literal">.apk</code> files to the Google Play Store</li></ul></div><p>In the next and final chapter, we will discuss everything about applying in-app purchases to your applications. We'll dive into Corona's store module and learn how to make purchases, transactions, and more! You don't want to miss this exciting chapter.</p></div></body></html>