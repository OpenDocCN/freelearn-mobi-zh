<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch13"/>Chapter 13. Connectivity, Persistence, and URI Schemes</h1></div></div></div><p>In this chapter, we will cover:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Monitoring Internet connectivity</li><li class="listitem" style="list-style-type: disc">Specifying a persistent Wi-Fi connection</li><li class="listitem" style="list-style-type: disc">Referencing an app's common directories</li><li class="listitem" style="list-style-type: disc">Writing files</li><li class="listitem" style="list-style-type: disc">Reading files</li><li class="listitem" style="list-style-type: disc">Launching system applications</li><li class="listitem" style="list-style-type: disc">Launching the App Store</li><li class="listitem" style="list-style-type: disc">Launching the Maps application</li><li class="listitem" style="list-style-type: disc">Declaring device capabilities</li></ul></div><div><div><div><div><h1 class="title"><a id="ch13lvl1sec01"/>Introduction</h1></div></div></div><p>Significant ground has been covered during the course of the book but a few topics that we have touched upon deserve a little more attention. In this chapter, we will tie up those loose ends by exploring some additional uses for the application descriptor file, spending time understanding how to access the device's file system, and seeing how to open native iOS apps from Flash.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec02"/>Monitoring Internet connectivity</h1></div></div></div><p>It is a common occurrence for mobile applications to connect to the Internet at some point or another. For many, it will be for simple tasks, such as submitting a user's score or posting to a social network site. More sophisticated apps may attempt, for example, to aggregate data from various sources or even stream video from a Flash Media Server.</p><p>It is good practice to check that the device has an active Internet connection before trying to send or receive data. If an active connection cannot be found, then the app can adjust accordingly. For example, a game may hide its online leaderboards and remove any facilities for uploading scores.<a id="id1062" class="indexterm"/>
</p><p>This recipe will show you how to use AIR's<code class="literal"> URLMonitor</code> class to check for the availability of an URL before calling it.<a id="id1063" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec01"/>Getting ready</h2></div></div></div><p>An FLA has been provided as a starting point.</p><p>From the book's accompanying code bundle, open<code class="literal"> chapter13\recipe1\recipe.fla</code> into Flash Professional.</p><p>A dynamic text field named<code class="literal"> output</code> covers the stage. We will write some ActionScript to check for Internet connectivity and display the results within the text field.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec02"/>How to do it...</h2></div></div></div><p>The<code class="literal"> URLMonitor</code> class belongs to the<code class="literal"> air.net</code> package and is not defined in the AIR runtime. Instead the class is included in the<code class="literal"> aircore.swc</code> file, which must be statically linked to your FLA before it can be used.<a id="id1064" class="indexterm"/>
</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec01"/>Linking the SWC file</h3></div></div></div><p>Let us link<code class="literal"> aircore.swc</code> to the FLA before going on to write this recipe's ActionScript.</p><div><ol class="orderedlist"><li class="listitem">Select<strong> File</strong> |<strong> ActionScript Settings</strong> from Flash Professional's drop-down menu. This will open the ActionScript 3.0 Settings panel where you can add the SWC.<a id="id1065" class="indexterm"/></li><li class="listitem">Select the<strong> Library path</strong> tab. Click on the<strong> Add New Path</strong> icon, which is represented by a<strong> +</strong> symbol.</li><li class="listitem">Now click on the<strong> Browse to SWC file</strong> icon and select<code class="literal"> aircore.swc</code> from your Flash installation folder. Its location depends on your version of Flash Professional. For CS5, browse to:<code class="literal"> Adobe Flash CS5\AIK2.5\frameworks\libs\air\aircore.swc</code>. If you are using CS5.5, it is at:<code class="literal"> Adobe Flash CS5.5\AIR2.6\frameworks\libs\air\aircore.swc.</code><a id="id1066" class="indexterm"/><div><h3 class="title"><a id="note50"/>Note</h3><p>On Microsoft Windows, your installation of Flash Professional can be found at<code class="literal"> C:\Program Files (x86)\Adobe</code>. On 32-bit versions of Windows, the path will be<code class="literal"> C:\Program Files\Adobe</code>.</p><p>If you are using Mac OS X, then your Flash installation can be found at:<code class="literal"> Macintosh HD/Applications</code>.</p></div><div><img src="img/1383_14_01.jpg" alt="Linking the SWC file"/></div></li><li class="listitem">The SWC will be added to a list of libraries that will be used when publishing your app. Expand the SWC file's entry by clicking the icon to the left of its path, and ensure that its<strong> Link Type</strong> option is set to<strong> Merged into code</strong>.<a id="id1067" class="indexterm"/></li><li class="listitem">Click on<strong> OK</strong> to close the panel.</li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec02"/>Checking connectivity</h3></div></div></div><p>With<code class="literal"> aircore.swc</code> linked to your FLA, you can now use the API provided by the<code class="literal"> URLMonitor</code> class. Okay, now let us write some ActionScript.<a id="id1068" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Create a document class and name it<code class="literal"> Main</code>.</li><li class="listitem">Add the following three import statements, and a<code class="literal"> URLMonitor</code> member variable:<a id="id1069" class="indexterm"/><div><pre class="programlisting">package {
<strong>
import air.net.URLMonitor;
</strong>
import flash.display.MovieClip;
<strong>
import flash.events.StatusEvent;
import flash.net.URLRequest;
</strong>
public class Main extends MovieClip {
<strong>private var monitor:URLMonitor;
</strong>
public function Main() {
// constructor code
}
}
}
</pre></div></li><li class="listitem">Create a<code class="literal"> URLMonitor</code> instance that checks for the availability of a specific HTTP request, and listen for it dispatching<code class="literal"> StatusEvent.STATUS:</code><div><pre class="programlisting">public function Main() {
<strong>
var request:URLRequest = new URLRequest(
"http://www.yeahbutisitflash.com");
monitor = new URLMonitor(request);
monitor.addEventListener(StatusEvent.STATUS, statusUpdated);
monitor.start();
</strong>
}
</pre></div></li><li class="listitem">Write a handler for the<code class="literal"> URLMonitor</code> object's<code class="literal"> STATUS</code> event:<a id="id1070" class="indexterm"/><div><pre class="programlisting">private function statusUpdated(e:StatusEvent):void {
if(monitor.available)
{
output.text = "Internet connection available.";
}
else
{
output.text = "Internet connection unavailable.";
}
}
</pre></div></li><li class="listitem">Save the class as<code class="literal"> Main.as</code> and move back to your FLA.</li><li class="listitem">Publish the FLA and test the app on your device. The following text should be output to the screen:<p><strong>Internet connection available.
</strong>
</p></li><li class="listitem">Try changing your document class to monitor a URL that doesn't exist. Republish and test your app. This time you will receive the following message:<p><strong>Internet connection unavailable.
</strong>
<a id="id1071" class="indexterm"/>
</p></li></ol></div></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec03"/>How it works...</h2></div></div></div><p>The<code class="literal"> URLMonitor</code> class monitors and detects changes in HTTP or HTTPS connectivity for a specified URL.</p><p>Its constructor accepts a<code class="literal"> URLRequest</code> as a parameter, which contains the URL to probe. After creating the<code class="literal"> URLMonitor</code> object, call its<code class="literal"> start()</code> method to begin monitoring.<a id="id1072" class="indexterm"/>
</p><p>When the URL's availability is determined, the<code class="literal"> URLMonitor</code> object dispatches<code class="literal"> StatusEvent.STATUS</code>. You can query the<code class="literal"> StatusEvent</code> object's<code class="literal"> available</code> property to determine whether or not a connection to the URL can be made.</p><p>Monitoring continues until the<code class="literal"> URLMonitor.stop()</code> method is called. It is also possible to determine if monitoring is currently taking place by checking the<code class="literal"> URLMonitor.running</code> property.<a id="id1073" class="indexterm"/>
</p><p>For more information, perform a search for<code class="literal"> air.net.URLMonitor</code> within Adobe Community Help.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec04"/>There's more...</h2></div></div></div><p>Here is some additional detail.</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec03"/>Monitoring sockets</h3></div></div></div><p>The<code class="literal"> air.net.SocketMonitor</code> class is similar to<code class="literal"> URLMonitor</code> but detects connectivity changes for a host at a specified port. This is useful for applications, such as multiplayer games, where a socket server connection is required.<a id="id1074" class="indexterm"/>
</p><p>The<code class="literal"> SocketMonitor</code> class' constructor expects the name of the host and its port to monitor:</p><div><pre class="programlisting">monitor = new SocketMonitor("www.example.com", 6667);
</pre></div><p>Once instantiated, the<code class="literal"> SocketMonitor</code> object is used in an identical manner to<code class="literal"> URLMonitor</code>.</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec04"/>Polling interval</h3></div></div></div><p>Both<code class="literal"> URLMonitor</code> and<code class="literal"> SocketMonitor</code> provide a<code class="literal"> pollInterval</code> property that can be used to specify an interval, measured in milliseconds, for periodically polling the server.<a id="id1075" class="indexterm"/>
</p><p>By default, its value is<code class="literal"> 0</code>, meaning the server is polled immediately after<code class="literal"> start()</code> is called, and thereafter only when the network status changes.</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec05"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Specifying a persistent Wi-Fi connection</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec03"/>Specifying a persistent Wi-Fi connection</h1></div></div></div><p>While many applications periodically connect to the Internet, there are some, such as chat clients and multiuser games that require a constant connection. These types of applications can be rendered useless if a persistent connection isn't available. By editing its application descriptor file, it is possible to stipulate that your app requires a persistent connection to a Wi-Fi network.<a id="id1076" class="indexterm"/>
</p><p>Let us see how to do this.</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec06"/>Getting ready</h2></div></div></div><p>From the book's accompanying code bundle, open<code class="literal"> chapter13\recipe2\recipe.fla</code> into Flash Professional and work from there. Its document class contains the code from the previous recipe,<em> Monitoring Internet connectivity</em>. Don't worry if you haven't attempted this recipe, as an understanding of it isn't required.<a id="id1077" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec07"/>How to do it...</h2></div></div></div><p>You can edit your application descriptor file from an external text editor or from Flash Professional. We will use Flash Professional.</p><div><ol class="orderedlist"><li class="listitem">Open the application descriptor file by selecting<strong> File</strong> |<strong> Open</strong> <em> (Ctrl + O</em> |<em> Cmd</em> +<em> O)</em> from Flash Professional's drop-down menu. From the file browser, select<code class="literal"> recipe-app.xml</code>.</li><li class="listitem">Scroll down the file until you find the following XML fragment:<div><pre class="programlisting">&lt;iPhone&gt;
&lt;InfoAdditions&gt;
&lt;![CDATA[&lt;key&gt;UIDeviceFamily&lt;/key&gt;
&lt;array&gt;&lt;string&gt;1&lt;/string&gt;&lt;/array&gt;]]&gt;
&lt;/InfoAdditions&gt;
</pre></div></li><li class="listitem">Within the<code class="literal"> CDATA</code> node, add the following key-value pair to the XML:<div><pre class="programlisting">&lt;iPhone&gt;
&lt;InfoAdditions&gt;
&lt;![CDATA[&lt;key&gt;UIDeviceFamily&lt;/key&gt;
&lt;array&gt;&lt;string&gt;1&lt;/string&gt;&lt;/array&gt;
<strong>&lt;key&gt;UIRequiresPersistentWiFi&lt;/key&gt;&lt;true/&gt;]]&gt;
</strong>
&lt;/InfoAdditions&gt;
</pre></div></li><li class="listitem">Save the file.</li><li class="listitem">Now publish the FLA, and install the resultant<code class="literal"> .ipa</code> to your device.<a id="id1078" class="indexterm"/></li><li class="listitem">Before launching the app, stop your device from automatically connecting to your Wi-Fi network. From your device's Settings, select<strong> Wi-Fi</strong> then tap on the icon to the far-right of your network's name. Doing so will take you to the settings page for that network. From here, press the<strong> Forget this Network</strong> button followed by<strong> Forget</strong>.<div><img src="img/1383_14_02.jpg" alt="How to do it..."/></div></li><li class="listitem">Now move back to the device's home screen and launch your app. iOS will notice that the app requires a persistent Wi-Fi connection and will display a native dialog box asking you to<strong> Select a Wireless Network</strong>. Select your network from the list and enter its password when prompted.<a id="id1079" class="indexterm"/><p>Initially your app will report the following:
</p><p><strong>Internet connection unavailable.
</strong>
</p><p>But after a brief moment, it will detect your network connection and will update its status to the following:
<a id="id1080" class="indexterm"/>
</p><p><strong>Internet connection available.
</strong>
</p></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec08"/>How it works...</h2></div></div></div><p>Your FLA's application descriptor is an XML file that contains a list of iOS specific settings. Within the<code class="literal">&lt;iPhone&gt;</code> node is the<code class="literal">&lt;infoAdditions&gt;</code> node where you can set custom key-value pairs that can't be set within Flash. These are used to describe an app or used directly by it when launched.<a id="id1081" class="indexterm"/>
</p><p>For this recipe, we used the following key-value pair to alert the user when a persistent Wi-Fi connection could not be found:</p><div><pre class="programlisting">&lt;key&gt;UIRequiresPersistentWiFi&lt;/key&gt;&lt;true/&gt;
</pre></div><p>When launched, the app detects the presence of this key and, therefore, checks to see if the device is connected to an active Wi-Fi network. If not, it will perform a search and display a network selection dialog containing a list of active Wi-Fi hot spots for the user to select from. Alternatively, if the device is in Airplane mode, then a dialog box is displayed informing the user of that fact.</p><p>Wi-Fi hardware can consume significant power. To preserve battery, iOS automatically switches off its Wi-Fi hardware after 30 minutes. If your app uses the<code class="literal"> UIRequiresPersistentWiFi</code> key, then the Wi-Fi hardware will stay enabled for as long as the app remains active. If the device's screen locks, then the app is considered inactive and the Wi-Fi connection may be lost.</p><p>You can switch the<code class="literal"> UIRequiresPersistentWiFi</code> key off by setting its value to<code class="literal">&lt;false/&gt;</code>. Alternatively, remove the entire entry from the application descriptor file.<a id="id1082" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec09"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Editing the application descriptor file, <a class="link" href="ch03.html" title="Chapter 3. Writing your First App">Chapter 3</a></em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec04"/>Referencing an app's common directories</h1></div></div></div><p>An iOS app resides within its own directory and has access to common sub-directories that are contained within it.<a id="id1083" class="indexterm"/>
</p><p>This recipe will show you how to reference each of these directories.</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec10"/>Getting ready</h2></div></div></div><p>We will use<code class="literal"> chapter13\recipe3\recipe.fla</code> from the book's accompanying code bundle as a starting point. Open it into Flash Professional.</p><p>A dynamic text field named<code class="literal"> output</code> can be found on the stage. We will use this text field to display the native file path of each of the app's common directories.<a id="id1084" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec11"/>How to do it...</h2></div></div></div><p>Perform the following steps:</p><div><ol class="orderedlist"><li class="listitem">Create a new document class and name it<code class="literal"> Main</code>.</li><li class="listitem">Import the<code class="literal"> File</code> class:<div><pre class="programlisting">import flash.display.MovieClip;
<strong>import flash.filesystem.File;
</strong>
</pre></div></li><li class="listitem">Within the constructor, write each directory's native path to the<code class="literal"> output</code> text field:<div><pre class="programlisting">public function Main(){
<strong>output.text = "Application Directory:\n" + File.applicationDirectory.nativePath + "\n\nApplication Storage Directory:\n" + File.applicationStorageDirectory.nativePath + "\n\nDocuments Directory:\n" + File.documentsDirectory.nativePath + "\n\nUser Directory:\n" + File.userDirectory.nativePath;
</strong>
}
</pre></div></li><li class="listitem">Save the class and when prompted, name the file<code class="literal"> Main.as</code>.</li><li class="listitem">Finally, publish the FLA and test it on your device. The paths for all four directories will be shown on screen.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec12"/>How it works...</h2></div></div></div><p>The directory that an app is stored within is known as<strong> Application Home</strong> and has a path similar to:<code class="literal"> /var/mobile/Applications/97C9F144-E97A-40BB-A4CD-82FF31CA2A3C</code>. The string at the end of the path is an ID that uniquely identifies the application and is used to name the home directory during installation.<a id="id1085" class="indexterm"/>
</p><p>The<code class="literal"> flash.filesystem.File</code> class makes several constants available that can be used to reference Application Home and its various sub-directories. These constants let you access the directories in a platform-independent manner, eliminating the need to remember lengthy native paths. They are:<a id="id1086" class="indexterm"/>
</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">File.userDirectory:</code> The Application Home directory<a id="id1087" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">File.applicationDirectory:</code> A read-only directory that contains the application binary and any files bundled with it, such as the default launch screen<a id="id1088" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">File.applicationStorageDirectory:</code> Any local shared object data is stored here<a id="id1089" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">File.documentsDirectory:</code> Any application-specific data can be written to and retrieved from this directory<a id="id1090" class="indexterm"/></li></ul></div><p>Of the four,<code class="literal"> applicationDirectory</code> and<code class="literal"> documentsDirectory</code> are perhaps the two that are used most often. Although you can't write to the Application directory, you can read from it and even copy files from it to other locations.<a id="id1091" class="indexterm"/>
</p><p>The Documents directory is useful for state management, allowing data files required by the application to be stored. These files can be anything, from simple preference files to images created by the user. This directory's contents are backed-up by iTunes.</p><p>If you wish to temporarily store files, then a<code class="literal"> tmp</code> sub-directory is provided within Application Home. To reference folders that aren't provided as constants, use the<code class="literal"> File</code> class'<code class="literal"> resolvePath()</code> method to modify an existing<code class="literal"> File</code> object. For example:<a id="id1092" class="indexterm"/>
</p><div><pre class="programlisting">var tmpDir:File = File.userDirectory.resolvePath("tmp");
</pre></div><p>A<code class="literal"> nativePath</code> property is also provided, allowing you to retrieve a directory's native path from a<code class="literal"> File</code> object reference:<a id="id1093" class="indexterm"/>
</p><div><pre class="programlisting">var nativePath:String = File.applicationDirectory.nativePath;
</pre></div><p>This is useful when using an API that expects a native path rather than a<code class="literal"> File</code> object.</p><p>For more information, perform a search for<code class="literal"> flash.filesystem.File</code> within Adobe Community Help.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec13"/>There's more...</h2></div></div></div><p>Here are some more options when working with the<code class="literal"> File</code> class and directories.</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec05"/>Creating directories</h3></div></div></div><p>As well as referencing existing directories, the<code class="literal"> File</code> class lets you create them using its<code class="literal"> createDirectory()</code> method. The following two lines of code create a directory named<code class="literal"> images</code> within the app's Documents directory:<a id="id1094" class="indexterm"/>
</p><div><pre class="programlisting">var dir:File = File.documentsDirectory.resolvePath("images");
dir.createDirectory();
</pre></div><p>You can also delete a directory using either<code class="literal"> deleteDirectory()</code> or<code class="literal"> deleteDirectoryAsync()</code>. Listen for<code class="literal"> Event.COMPLETE</code> when deleting a directory asynchronously.<a id="id1095" class="indexterm"/>
</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec14"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Writing files</em></li><li class="listitem" style="list-style-type: disc"><em>Reading files</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec05"/>Writing files</h1></div></div></div><p>AIR provides a file system API that can be used to write files of any type to the device.</p><p>Let us see how to write a text file containing simple preferences data that might, for example, be used by a game.<a id="id1096" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec15"/>Getting ready</h2></div></div></div><p>An FLA has been provided as a starting point for this recipe.</p><p>From the book's accompanying support files, open<code class="literal"> chapter13\recipe4\recipe.fla</code> into Flash Professional.</p><p>Sitting on the stage is a dynamic text field named<code class="literal"> output</code>. We will write some preferences data to the device and use the text field to indicate when the data has been written.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec16"/>How to do it...</h2></div></div></div><p>The<code class="literal"> flash.filesystem</code> package contains classes that provide file system access. Let us make use of some of those classes to write to the device.<a id="id1097" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Create a document class and name it<code class="literal"> Main</code>.</li><li class="listitem">Import the following classes:<div><pre class="programlisting">import flash.display.MovieClip;
import flash.events.Event;
<strong>
import flash.events.IOErrorEvent;
import flash.filesystem.File;
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;
</strong>
</pre></div></li><li class="listitem">Add a<code class="literal"> File</code> and<code class="literal"> FileStream</code> member variable:<div><pre class="programlisting">private var file:File;
private var stream:FileStream;
</pre></div></li><li class="listitem">Create a method that writes the preferences data to the device, and call it from the constructor:<a id="id1098" class="indexterm"/><div><pre class="programlisting">public function Main() {
savePreferences();
}
private function savePreferences():void {
file = File.documentsDirectory.resolvePath("prefs.txt");
stream = new FileStream();
stream.addEventListener(IOErrorEvent.IO_ERROR, ioError);
stream.addEventListener(Event.CLOSE, fileSaved);
stream.openAsync(file, FileMode.WRITE);
stream.writeUTFBytes(
"music_vol=0.5&amp;sound_vol=0.7&amp;difficulty=easy");
stream.close();
}
</pre></div></li><li class="listitem">Add a handler that gets called if an error occurs when writing the preferences data:<div><pre class="programlisting">private function ioError(e:IOErrorEvent):void {
output.appendText(e.errorID + ": " + e.text);
}
</pre></div></li><li class="listitem">Add a second handler that gets called once the file has been successfully written to the device's file system:<div><pre class="programlisting">private function fileSaved(e:Event):void {
output.appendText("File Saved\n");
}
</pre></div></li><li class="listitem">Save the class file and when prompted name it<code class="literal"> Main.as</code>.</li><li class="listitem">Publish the FLA and test it on your device. The preferences file will be written and the following text will be shown on screen:<p><strong>File Saved
</strong>
</p></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec17"/>How it works...</h2></div></div></div><p>This recipe took advantage of the<code class="literal"> flash.filesystem.File</code> and<code class="literal"> flash.filesystem.FileStream</code> classes to write data to the device's file system. The data was represented by a series of name-value pairs that were written to the app's Documents directory as a text file.</p><p>When writing to a file, a reference representing it must first be obtained using the<code class="literal"> File</code> class—this is true even for files that have yet to be created. As well as representing files, the<code class="literal"> File</code> class can also be used to represent directories. A directory reference can also be refined by using<code class="literal"> File.resolvePath()</code> to target a file or sub-folder relative to it.<a id="id1099" class="indexterm"/>
</p><p>The following line of code shows a<code class="literal"> File</code> object being created for the preferences file:</p><div><pre class="programlisting">file = File.documentsDirectory.resolvePath("prefs.txt");
</pre></div><p>The next step is to instantiate a<code class="literal"> FileStream</code> object and use the<code class="literal"> openAsync()</code> method to initialize it for writing:</p><div><pre class="programlisting">stream = new FileStream();
stream.openAsync(file, FileMode.WRITE);
</pre></div><p>As you can see above, the<code class="literal"> File</code> object is passed to<code class="literal"> openAsync()</code>. As a second argument, the<code class="literal"> FileMode.WRITE</code> constant is also passed, and indicates that data is to be written to the file. If the specified file doesn't exist, then<code class="literal"> openAsync()</code> will create it. If it already exists, then its contents will be wiped.<a id="id1100" class="indexterm"/>
</p><p>The<code class="literal"> FileStream</code> class dispatches various events when writing data. It dispatches<code class="literal"> IOErrorEvent.IO_ERROR</code> if it can't create or find the file, and<code class="literal"> Event.CLOSE</code> once it has finished writing data to it. Listeners for both events should be added:<a id="id1101" class="indexterm"/>
</p><div><pre class="programlisting">stream = new FileStream();
<strong>stream.addEventListener(IOErrorEvent.IO_ERROR, ioError);
stream.addEventListener(Event.CLOSE, fileSaved);
</strong>
stream.openAsync(file, FileMode.WRITE);
</pre></div><p>With the file opened for writing,<code class="literal"> writeUTFBytes()</code> is called to actually write text to the file:</p><div><pre class="programlisting">stream.writeUTFBytes(
"music_vol=0.5&amp;sound_vol=0.7&amp;difficulty=easy");
</pre></div><p>The final step is to close the<code class="literal"> FileStream</code> object, preventing any more data from being written:</p><div><pre class="programlisting">stream.close();
</pre></div><p>It is important to understand that the file is not guaranteed to have been fully written by the time you call the<code class="literal"> close()</code> method. When writing a significant amount of data to the device, it may take some time. If this is the case, then the<code class="literal"> FileStream</code> object will delay closing the file until after all the data is written. Once it is finished, the<code class="literal"> FileStream</code> object will dispatch<code class="literal"> Event.CLOSE</code>.<a id="id1102" class="indexterm"/>
</p><p>While you can write files anywhere within the Application Home directory, due to sandbox restrictions, you can't write outside of it.</p><p>You can obtain more information regarding the<code class="literal"> flash.filesystem.FileStream, flash.filesystem.File</code>, and<code class="literal"> flash.filesystem.FileMode</code> classes from Adobe Community Help.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec18"/>There's more...</h2></div></div></div><p>Here is some more detail that should come in handy when writing to the device's local file system.<a id="id1103" class="indexterm"/>
</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec06"/>Working with data formats</h3></div></div></div><p>The<code class="literal"> FileStream</code> class provides many methods for writing data. Your choice of method depends on the data format you wish to use.<a id="id1104" class="indexterm"/>
</p><p>For example, when working with text, you have the<code class="literal"> writeUTF(), writeUTFBytes()</code>, and<code class="literal"> writeMultiByte()</code> methods available. If you opt to work with byte arrays, then there are<code class="literal"> writeByte()</code> and<code class="literal"> writeBytes()</code> methods. You can even write primitives using<code class="literal"> writeBoolean(), writeDouble(), writeFloat(), writeInt()</code>, and<code class="literal"> writeShort()</code>.</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec07"/>Writing synchronously</h3></div></div></div><p>This recipe used<code class="literal"> openAsync()</code>, meaning data could be written to the device asynchronously. Asynchronous operations take place in the background, allowing the execution of your ActionScript to continue rather than being blocked until the operation completes.<a id="id1105" class="indexterm"/>
</p><p>As an alternative to<code class="literal"> openAsync()</code>, the<code class="literal"> FileStream</code> class also provides<code class="literal"> open()</code>, which allows data to be handled synchronously. Although execution will be blocked until the operation is complete, working synchronously is more straight forward as you aren't required to register for events. In the following code snippet, you can see an alternative version of<code class="literal"> savePreferences()</code> method, which writes data synchronously:<a id="id1106" class="indexterm"/>
</p><div><pre class="programlisting">private function savePreferences():void {
file = File.documentsDirectory.resolvePath("prefs.txt");
stream = new FileStream();
stream.open(file, FileMode.WRITE);
stream.writeUTFBytes(
"music_vol=0.5&amp;sound_vol=0.7&amp;difficulty=easy");
stream.close();
output.appendText("File Saved\n");
}
</pre></div><div><h3 class="title"><a id="note51"/>Note</h3><p>Examples throughout this book that write to the device's file system, do so synchronously to help maintain focus on the task at hand.</p></div></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec08"/>Monitoring progress</h3></div></div></div><p>When asynchronously writing to a file, the<code class="literal"> FileStream</code> object will periodically dispatch<code class="literal"> OutputProgressEvent.OUTPUT_PROGRESS</code>. From this event object, you can monitor the progress of the write operation by checking its<code class="literal"> bytesPending</code> and<code class="literal"> bytesTotal</code> properties. The<code class="literal"> bytesPending</code> property specifies the number of bytes that have still to be written, while<code class="literal"> bytesTotal</code> represents the number of bytes that have been written so far.<a id="id1107" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec09"/>Persistence</h3></div></div></div><p>Writing to the file system allows you to save your application's state to the device. When the app is re-launched, it can use this saved data to start from where it previously left off.<a id="id1108" class="indexterm"/>
</p><p>As an alternative to AIR's file system API you can also use Flash's<code class="literal"> SharedObject</code> class to manage state. In addition, small amounts of private data can be stored using the<code class="literal"> EncryptedLocalStore</code> class introduced to iOS in AIR 3.0. Detail regarding encrypted local storage can be found within Adobe Community Help.<a id="id1109" class="indexterm"/>
</p><p>Another option is to store your data within a local SQLite database and use ActionScript to access it. Apple itself uses SQLite databases on iOS devices to store information, such as contacts.</p><p>Relational database theory and the SQLite API are outside the scope of this book. However, you can find more information on the subject from Adobe Community Help or by visiting the SQLite website at:<a class="ulink" href="http://sqlite.org"> sqlite.org</a>.</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec19"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Saving application state, <a class="link" href="ch04.html" title="Chapter 4. Porting Flash Projects to iOS">Chapter 4</a></em></li><li class="listitem" style="list-style-type: disc"><em>Referencing an app's common directories</em></li><li class="listitem" style="list-style-type: disc"><em>Reading files</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec06"/>Reading files</h1></div></div></div><p>AIR provides a file system API that can be used to read files of any type from the device.</p><p>In this recipe, we will see how to load a file previously written to the device.<a id="id1110" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec20"/>Getting ready</h2></div></div></div><p>If you haven't already done so, complete the<em> Writing files</em> recipe before proceeding.</p><p>You can continue to work with the code you wrote during that recipe. Alternatively, from the book's accompanying code bundle, open<code class="literal"> chapter13\recipe5\recipe.fla</code> into Flash Professional and work from there.<a id="id1111" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec21"/>How to do it...</h2></div></div></div><p>Let us update the FLA's document class to load and display the preferences that were written to the device.<a id="id1112" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Open the document class.</li><li class="listitem">Add a method that will load the preferences data:<div><pre class="programlisting">private function loadPreferences():void {
file = File.documentsDirectory.resolvePath("prefs.txt");
stream = new FileStream();
stream.addEventListener(IOErrorEvent.IO_ERROR, ioError);
stream.addEventListener(Event.COMPLETE, fileLoaded);
stream.openAsync(file, FileMode.READ);
}
</pre></div></li><li class="listitem">Alter the class'<code class="literal"> fileSaved()</code> handler, making it call the preceding method:<div><pre class="programlisting">private function fileSaved(e:Event):void {
output.appendText("File Saved\n");
<strong>loadPreferences();
</strong>
}
</pre></div></li><li class="listitem">A<code class="literal"> COMPLETE</code> event will be dispatched when the file has been loaded. Add a handler for it that parses and displays the file's preferences data:<div><pre class="programlisting">private function fileLoaded(e:Event):void {
var prefs:String = stream.readUTFBytes(stream.bytesAvailable);
stream.close();
var vars:URLVariables = new URLVariables(prefs);
output.appendText(
"File Loaded\n" +
"music volume: " + vars.music_vol + "\n" + "sound volume: " + vars.sound_vol + "\n" + "difficulty: " + vars.difficulty + "\n"
);
}
</pre></div></li><li class="listitem">The<code class="literal"> fileLoaded()</code> handler makes use of Flash's<code class="literal"> URLVariables</code> class to decode the preferences data. Add<code class="literal"> URLVariables</code> to the document class' list of import statements:<div><pre class="programlisting">import flash.net.URLVariables;
</pre></div></li><li class="listitem">Save<code class="literal"> Main.as</code>.</li><li class="listitem">Publish the FLA and test it on your device.</li></ol></div><p>The app will first write the preferences data to the file system before loading it back and displaying the preferences on screen.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec22"/>How it works...</h2></div></div></div><p>The steps required for reading data from the device's file system are almost identical to writing data.<a id="id1113" class="indexterm"/>
</p><p>First a<code class="literal"> File</code> object is created that references the target file:</p><div><pre class="programlisting">file = File.documentsDirectory.resolvePath("prefs.txt");
</pre></div><p>Then a<code class="literal"> FileStream</code> object is instantiated and initialized using the<code class="literal"> openAsync()</code> method. When a file is being read rather than written,<code class="literal"> FileMode.READ</code> is passed as the method's second argument:<a id="id1114" class="indexterm"/>
</p><div><pre class="programlisting">stream = new FileStream();
stream.openAsync(file, FileMode.READ);
</pre></div><p>And while<code class="literal"> FileSystem.close()</code> is called immediately after<code class="literal"> openAsync()</code> when writing a file, when reading, it shouldn't be called until the file's entire data has been obtained. This can be determined by listening for the<code class="literal"> FileStream</code> object dispatching<code class="literal"> Event.COMPLETE</code>.</p><p>To actually obtain the data, one of the<code class="literal"> FileSystem</code> class' read methods is required. For this recipe,<code class="literal"> readUTFBytes()</code> was used and the number of bytes to read from the file's buffer was passed to it:</p><div><pre class="programlisting">var prefs:String = stream.readUTFBytes(stream.bytesAvailable);
stream.close();
</pre></div><p>The<code class="literal"> FileStream</code> class' read-only<code class="literal"> bytesAvailable</code> property was used when calling<code class="literal"> readUTFBytes()</code>. This property states the size of the file once it is completely loaded. Also, notice that the file stream is closed after its data is read as there is no longer a need for it.<a id="id1115" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec23"/>There's more...</h2></div></div></div><p>You will find AIR's file system API invaluable for many of your iOS projects. Before we leave the subject, here are some final pieces of information to take with you.</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec10"/>Working with data formats</h3></div></div></div><p>The<code class="literal"> FileStream</code> class provides many methods for reading data from a file. Your choice of method depends on the format of the data you are reading.<a id="id1116" class="indexterm"/>
</p><p>For example, when working with text, the<code class="literal"> readUTF(), readUTFBytes(),</code> and<code class="literal"> readMultiBytes()</code> methods are available. If the file contains a byte array, then you can use the<code class="literal"> readByte()</code> and<code class="literal"> readBytes()</code> methods. Primitive types can be obtained using<code class="literal"> readBoolean(), readDouble(), readFloat(), readInt()</code>, and<code class="literal"> readShort().</code>
<a id="id1117" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec11"/>Reading synchronously</h3></div></div></div><p>As with the previous recipe,<code class="literal"> openAsync()</code> was used, meaning the file was handled asynchronously. The following code uses the<code class="literal"> open()</code> method instead to synchronously read this recipe's preferences file:<a id="id1118" class="indexterm"/>
</p><div><pre class="programlisting">private function loadPreferences():void {
file = File.documentsDirectory.resolvePath("prefs.txt");
stream = new FileStream();
stream.open(file, FileMode.READ);
var prefs:String = stream.readUTFBytes(stream.bytesAvailable);
stream.close();
}
</pre></div><div><h3 class="title"><a id="note52"/>Note</h3><p>Examples throughout this book that read from the device's file system, do so synchronously to help maintain focus on the task at hand.</p></div></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec12"/>Monitoring progress</h3></div></div></div><p>When asynchronously reading from a file, the<code class="literal"> FileStream</code> object will periodically dispatch<code class="literal"> ProgressEvent.PROGRESS</code>. From this event object, you can monitor the reading progress by checking its<code class="literal"> bytesLoaded</code> and<code class="literal"> bytesTotal</code> properties. The<code class="literal"> bytesLoaded</code> property specifies the number of bytes that have been loaded, while<code class="literal"> bytesTotal</code> represents the number of bytes that will be loaded if the file successfully loads.<a id="id1119" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec13"/>Deleting files</h3></div></div></div><p>You can delete a file using the<code class="literal"> File</code> class'<code class="literal"> deleteFile()</code> or<code class="literal"> deleteFileAsync()</code> method. Listen for<code class="literal"> Event.COMPLETE</code> when deleting asynchronously.<a id="id1120" class="indexterm"/>
</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec14"/>Other file modes</h3></div></div></div><p>Two other file modes are available:<code class="literal"> FileMode.APPEND</code> and<code class="literal"> FileMode.UPDATE</code>.<a id="id1121" class="indexterm"/>
</p><p>The Append mode always writes to the end of the file, meaning that an existing file's data will be added to rather than destroyed.</p><p>Update mode lets you both read from and write to a file using a single file stream. To successfully manage this, the<code class="literal"> FileStream</code> class provides the<code class="literal"> position</code> property, which can be used to determine and set the current position within the file. The<code class="literal"> position</code> property is incremented every time a byte is written or read. It is also possible to move to any point within a file by setting this property. When this is done, the next read or write operation will take place from that position.<a id="id1122" class="indexterm"/>
</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec24"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Referencing an app's common directories</em></li><li class="listitem" style="list-style-type: disc"><em>Writing files</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec07"/>Launching system applications</h1></div></div></div><p>On occasions you may want your app to provide functionality that is already available from iOS's system applications. To guarantee a consistent and familiar experience, it is possible to launch certain system apps rather than performing the task internally within your own. To enable this, iOS supports various URI schemes which can be used to launch a specific application.<a id="id1123" class="indexterm"/>
</p><p>In this recipe, you will learn how to use the<code class="literal"> mailto</code> URI scheme to open and send e-mail from the Mail application.</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec25"/>Getting ready</h2></div></div></div><p>From the book's accompanying code bundle, load<code class="literal"> chapter13\recipe6\recipe.fla</code> into Flash Professional and use it as a starting point.</p><p>Sitting on its stage is a button with an instance name of<code class="literal"> mailBtn</code>. When pressed, it will launch the device's Mail application and pre-populate an e-mail for the user to send.</p><p>Let us write the ActionScript required to make this happen.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec26"/>How to do it...</h2></div></div></div><p>We will make use of both Flash's<code class="literal"> navigateToURL()</code> function and<code class="literal"> URLRequest</code> class to launch the Mail application.<a id="id1124" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Create a document class and name it<code class="literal"> Main</code>.</li><li class="listitem">Import the following:<div><pre class="programlisting">import flash.display.MovieClip;
<strong>
import flash.events.MouseEvent;
import flash.net.navigateToURL;
import flash.net.URLRequest;
</strong>
</pre></div></li><li class="listitem">Within the constructor, listen for the button being pressed:<div><pre class="programlisting">public function Main() {
<strong>mailBtn.addEventListener(MouseEvent.MOUSE_UP, sendMail);
</strong>
}
</pre></div></li><li class="listitem">Create a method that will launch the Mail application and compose an e-mail. Within it, initialize strings that represent the recipient's e-mail address, the subject heading, and the e-mail's body:<a id="id1125" class="indexterm"/><div><pre class="programlisting">private function sendMail(e:MouseEvent):void {
var address:String = "someone@somewhere.com";
var subject:String = "Flash iOS Apps Cookbook";
var body:String = "Sent from the Mail application.";
}
</pre></div></li><li class="listitem">In this code, replace someone <code class="literal">@somewhere.com</code> with the e-mail address you wish to target. For testing purposes, use your own.</li><li class="listitem">Staying within the<code class="literal"> sendMail()</code> method, construct a URL that uses the<code class="literal"> mailto</code> URI scheme:<a id="id1126" class="indexterm"/><div><pre class="programlisting">private function sendMail(e:MouseEvent):void {
var address:String = "someone@somewhere.com";
var subject:String = "Flash iOS Apps Cookbook";
<strong>var body:String = "Sent from the Mail application.";
var url:String = "mailto:" + address + "?subject=" + subject + "&amp;body=" + body;
var request:URLRequest = new URLRequest(url);
</strong>
}
</pre></div></li><li class="listitem">Finally, launch the Mail application by passing the URL to Flash's<code class="literal"> navigateToURL()</code> function:<a id="id1127" class="indexterm"/><div><pre class="programlisting">private function sendMail(e:MouseEvent):void {
var address:String = "someone@somewhere.com";
var subject:String = "Flash iOS Apps Cookbook";
var body:String = "Sent from the Mail application.";
var url:String = "mailto:" + address + "?subject=" + subject + "&amp;body=" + body;
var request:URLRequest = new URLRequest(url);
<strong>navigateToURL(request);
</strong>
}
</pre></div></li><li class="listitem">Save the class file and when prompted name it<code class="literal"> Main.as</code>.</li><li class="listitem">Publish the FLA and test the app on your device. Tapping the button will open the Mail application, complete with a pre-populated e-mail.</li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec27"/>How it works...</h2></div></div></div><p>The<code class="literal"> mailto</code> URI is used to launch the Mail application and compose an e-mail. The URI must be constructed and formatted correctly for the Mail application to understand it. Once constructed, pass the request to Flash's<code class="literal"> navigateToURL()</code> package-level function to actually launch the app.<a id="id1128" class="indexterm"/>
</p><p>As a minimum, the recipient's e-mail address must be specified within the<code class="literal"> mailto</code> URI:</p><div><pre class="programlisting">mailto:someone@somewhere.com
</pre></div><p>You can also pre-fill fields within the e-mail by adding query string parameters to the URI. For example, the following pre-populates the e-mail's subject and body fields:</p><div><pre class="programlisting">mailto:someone@somewhere.com?subject=Test&amp;body=This is a test
</pre></div><p>The supported query string parameters are as follows:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">subject:</code> The e-mail's Subject field<a id="id1129" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">body:</code> The e-mail's body<a id="id1130" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">to:</code> Allows the addition of more than one recipient within the To field<a id="id1131" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">cc:</code> Allows recipients to be added to the carbon copy field<a id="id1132" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><code class="literal">bcc:</code> Allows recipients to be added to the blind carbon copy field<a id="id1133" class="indexterm"/></li></ul></div><p>When adding multiple recipients to a field, use a comma to separate each address.</p><p>The e-mail's body can be specified as plain text or HTML. Here is an example using HTML:</p><div><pre class="programlisting">mailto:someone@somewhere.com?body=&lt;a href='http://www.yeahbutisitflash.com'&gt;Yeah But Is It Flash?&lt;/a&gt;
</pre></div><p>The<code class="literal"> mailto</code> specification prohibits the selection of an e-mail account within the URI. When multiple accounts are associated with a device, the default account is always used. Attachments are also unsupported.</p><p>Launching a system application forces the current app into the background on iOS 4 or above. On pre-iOS 4 devices, the current app is closed completely. It is, therefore, advisable to store your app's state before opening a system application. When the user is finished using the system application, it will be their responsibility to re-launch your app from the device's home screen or from the fast app switcher.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec28"/>There's more...</h2></div></div></div><p>We have covered the<code class="literal"> mailto</code> URI scheme, now let us look at a few other applications that can be opened by<code class="literal"> navigateToURL()</code>.</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec15"/>Dialing a phone number</h3></div></div></div><p>The<code class="literal"> tel</code> URI scheme can be used to launch the iPhone's telephony application and dial a specified number. As the following example shows, the formatting of the<code class="literal"> tel</code> URI is simple:<a id="id1134" class="indexterm"/>
</p><div><pre class="programlisting">tel:1-408-555-5555
</pre></div><p>Most valid phone numbers are accepted, but to prevent malicious behavior, URIs containing the<code class="literal"> *</code> or<code class="literal"> #</code> characters aren't. When using the<code class="literal"> tel</code> URI scheme, a phone number must always be specified within the URI.</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec16"/>Sending SMS messages</h3></div></div></div><p>The iPhone's Messages application can be opened using the<code class="literal"> sms</code> URI scheme. An optional phone number can be included, indicating that a new SMS message is to be created:<a id="id1135" class="indexterm"/>
</p><div><pre class="programlisting">sms:1-408-555-1212
</pre></div><p>If the phone number is omitted, then the Messages application will open but won't create a message for the user to send.</p><p>It is not possible to pre-fill the message with text or specify more than one recipient.</p></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec17"/>Playing a YouTube video</h3></div></div></div><p>The<code class="literal"> navigateToURL()</code> function can be used to launch the native YouTube application. There is no specific URI scheme for this; instead a URL targeting the YouTube server is used.<a id="id1136" class="indexterm"/>
</p><p>Simply construct a URL containing the ID of a video you would like to play. The URL should take the following format:<code class="literal"> http://www.youtube.com/watch?v=ID</code>. You can obtain a video's ID by visiting the YouTube website and extracting it from the browser's address bar.</p><p>Here is an example URL that can be passed to<code class="literal"> navigateToURL():</code>
</p><div><pre class="programlisting">http://www.youtube.com/watch?v=awNMSiGzuRk
</pre></div></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec18"/>URI schemes within HTML</h3></div></div></div><p>URI schemes can also be embedded as links within HTML pages. This allows the user to launch system applications from within a<code class="literal"> StageWebView</code> object. For example, the following HTML link will initiate a phone call:<a id="id1137" class="indexterm"/>
</p><div><pre class="programlisting">&lt;a href="tel:1-408-555-5555"&gt;Call us now!&lt;/a&gt;
</pre></div><p>For more information regarding the<code class="literal"> StageWebView</code> class, refer to<a class="link" href="ch11.html" title="Chapter 11. Rendering Web Pages"> Chapter 11</a>.</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec29"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Exiting gracefully from an app, <a class="link" href="ch03.html" title="Chapter 3. Writing your First App">Chapter 3</a></em></li><li class="listitem" style="list-style-type: disc"><em>Opening a web page within Safari, <a class="link" href="ch11.html" title="Chapter 11. Rendering Web Pages">Chapter 11</a></em></li><li class="listitem" style="list-style-type: disc"><em>Launching the App Store</em></li><li class="listitem" style="list-style-type: disc"><em>Launching the Maps application</em><a id="id1138" class="indexterm"/></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec08"/>Launching the App Store</h1></div></div></div><p>Publishers often promote their back catalogue within their latest releases, providing direct links to each of their products within the App Store. This not only makes the purchase process incredibly easy for the user, but also encourages impulse buying.<a id="id1139" class="indexterm"/>
</p><p>The App Store can be launched directly from your AIR for iOS app by passing a specific iTunes URL to Flash's<code class="literal"> navigateToURL()</code> function. Let us see how to do this.<a id="id1140" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec30"/>Getting ready</h2></div></div></div><p>An FLA has been provided as a starting point for this recipe.</p><p>From the book's accompanying code bundle, open<code class="literal"> chapter13\recipe7\recipe.fla</code> into Flash Professional. Sitting on its stage is a button named<code class="literal"> storeBtn</code>.</p><p>Let us write some ActionScript to launch the App Store when this button is pressed.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec31"/>How to do it...</h2></div></div></div><p>We will open the App Store page for WeeWorld's WeeMee Avatar Creator app. First we will obtain a URL to the app's page, then we will write the actual code to link to it from our app.<a id="id1141" class="indexterm"/>
</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec19"/>Obtaining the app's URL</h3></div></div></div><p>The URL format is complicated to construct. To simplify the process, Apple has created the online Link Maker tool.<a id="id1142" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Visit its web page at<a class="ulink" href="http://itunes.apple.com/linkmaker"> http://itunes.apple.com/linkmaker</a>.<div><img src="img/1383_14_03.jpg" alt="Obtaining the app's URL"/></div></li><li class="listitem">Define a search by filling in the page's fields. Enter<strong> WeeMee Avatar Creator</strong> into the<strong> Search</strong> field, set the country to<strong> USA</strong>, and select<strong> iOS Apps</strong> from the<strong> Media Type</strong> drop-down menu.<a id="id1143" class="indexterm"/></li><li class="listitem">Click on the<strong> Search</strong> button on the right-hand side of the page to initiate a search. A list of matches will be generated and shown at the bottom of the page.</li><li class="listitem">Look for<strong> WeeMee Avatar Creator</strong> listed within the<strong> iPhone Apps</strong> section and click on<strong> iPhone App Link</strong> on the right-hand side of its entry. A dialog box will appear containing details for the app.</li><li class="listitem">Copy the<strong> Direct Link</strong> URL from the dialog box.</li></ol></div></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec20"/>Linking to the app from ActionScript</h3></div></div></div><p>Now let us write the ActionScript required to launch the App Store page.<a id="id1144" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Within Flash Professional, create a new document class and name it<code class="literal"> Main</code>.</li><li class="listitem">Add the required import statements and listen for<code class="literal"> storeBtn</code> being pressed:<div><pre class="programlisting">package {
import flash.display.MovieClip;
<strong>
import flash.events.MouseEvent;
import flash.net.navigateToURL;
import flash.net.URLRequest;
</strong>
public class Main extends MovieClip {
public function Main() {
storeBtn.addEventListener(MouseEvent.MOUSE_UP, openAppStore);
}
}
}
</pre></div></li><li class="listitem">Add an event handler for the button, and within it open the App Store using the URL obtained from the Link Maker tool:<div><pre class="programlisting">private function openAppStore(e:MouseEvent):void {
var url:String = "http://itunes.apple.com/us/app/weemee-avatar-creator/id352506978?mt=8&amp;uo=4";
var request:URLRequest = new URLRequest(url);
navigateToURL(request);
}
</pre></div></li><li class="listitem">Now save the document class' file, and when prompted name it<code class="literal"> Main.as</code>.</li><li class="listitem">Publish and test the app on your device. Tap the button to open the WeeMee Avatar Creator's entry within the App Store application.<a id="id1145" class="indexterm"/></li></ol></div></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec32"/>How it works...</h2></div></div></div><p>Passing an app's valid iTunes URL to Flash's<code class="literal"> navigateToURL()</code> package-level function will open the App Store application for that app. The URL for a particular app can be retrieved from Apple's Link Maker online tool.<a id="id1146" class="indexterm"/>
</p><p>It is not just the App Store that can be opened from within your app. The Link Maker can create links to content on the iTunes Store and the iBookstore too. Simply perform a search for the content in question then obtain its URL.</p><p>The various stores can also be launched from an HTML link within a<code class="literal"> StageWebView</code> object. The Link Maker provides the required HTML within the same dialog box as the<strong> Direct Link</strong> URL. You can copy it from the<strong> HTML With Link</strong> text box.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec33"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Rendering a web page within an app, <a class="link" href="ch11.html" title="Chapter 11. Rendering Web Pages">Chapter 11</a></em></li><li class="listitem" style="list-style-type: disc"><em>Launching system applications</em></li><li class="listitem" style="list-style-type: disc"><em>Launching the Maps application</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec09"/>Launching the Maps application</h1></div></div></div><p>Being location aware, mapping is an integral part of iOS. The native Maps application lets you find where you currently are, search for nearby points of interest, and obtain turn-by-turn directions. Many developers take advantage of Maps by opening it directly from their own app, providing the user with a consistent experience.<a id="id1147" class="indexterm"/>
</p><p>Let us see how to do this.</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec34"/>Getting ready</h2></div></div></div><p>From the book's accompanying code bundle, open<code class="literal"> chapter13\recipe8\recipe.fla</code> into Flash Professional.<a id="id1148" class="indexterm"/>
</p><p>Sitting on its stage is a button with an instance name of<code class="literal"> mapBtn</code>. We will add code to show the location of Adobe's headquarters when this button is pressed.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec35"/>How to do it...</h2></div></div></div><p>We will use Flash's<code class="literal"> URLRequest</code> class and<code class="literal"> navigateToURL()</code> function to open the Maps application.<a id="id1149" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Create a document class and name it<code class="literal"> Main</code>.</li><li class="listitem">Import the classes required for this recipe and listen for the button being pressed:<div><pre class="programlisting">package {
import flash.display.MovieClip;
<strong>
import flash.events.MouseEvent;
import flash.net.navigateToURL;
import flash.net.URLRequest;
</strong>
public class Main extends MovieClip {
public function Main() {
<strong>mapBtn.addEventListener(MouseEvent.MOUSE_UP, openMaps);
</strong>
}
}
}
</pre></div></li><li class="listitem">Finally, add an event handler for the button and within it open the Maps application at Adobe's headquarters:<div><pre class="programlisting">private function openMaps(e:MouseEvent):void {
var addr:String = "Adobe Systems Inc, 345 Park Avenue, " +
"San Jose, CA";
var url:String = "http://maps.google.com/maps?q=" + addr;
var request:URLRequest = new URLRequest(url);
navigateToURL(request);
}
</pre></div></li><li class="listitem">Save the class and when prompted name its file<code class="literal"> Main.as</code>.</li><li class="listitem">Publish and test the app on your device. Tap the button. The native Maps application will open and the location of Adobe's headquarters will be shown.<a id="id1150" class="indexterm"/></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec36"/>How it works...</h2></div></div></div><p>If your app contains address or location information, you can forward that information to the Maps application. To do this, construct a URL and pass it to Flash's<code class="literal"> navigateToURL()</code> package-level function. The URL should target the Google Maps server and contain one or more Google Maps parameters.<a id="id1151" class="indexterm"/>
</p><p>For this recipe, the Google Maps query parameter was used to map the location of Adobe's headquarters:</p><div><pre class="programlisting">http://maps.google.com/maps?q=Adobe Systems Inc, 345 Park Avenue, San Jose, CA
</pre></div><p>The Maps application supports many of the Google Maps parameters but not all of them. Here is a list of those that are supported:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Parameter</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">q</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The query parameter. Its value is treated as if it had been typed into the query box on the Google Maps web page.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">near</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Can be used as the location part of a query.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">ll</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The latitude and longitude for the map's center point.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">sll</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The latitude and longitude from where a business search should take place.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">spn</code>
</p>
</td><td style="text-align: left" valign="top">
<p>An approximate latitude and longitude span. The zoom level will be adjusted to fit.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">sspn</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A screen span. The zoom level will be adjusted to fit.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">t</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The type of map to display. Can select m for maps, k for satellite, or h for hybrid.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">z</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The map's zoom level ranging from 1 to 20.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">saddr</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The source address to use when generating directions.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">daddr</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The destination address to use when generating directions.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">latlng</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A custom ID format used by Google to identify businesses.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">cid</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Another custom ID format used by Google to identify businesses.</p>
</td></tr></tbody></table></div><p>Launching the Maps application forces the current app into the background on iOS 4 or above. On pre-iOS 4 devices, the current app is closed completely. It is, therefore, advisable to store your app's state before opening Maps. When the user is finished with the Maps application, it will be their responsibility to re-launch your app from the device's home screen or from the fast app switcher.<a id="id1152" class="indexterm"/>
</p><p>Visit<a class="ulink" href="http://mapki.com/wiki/Google_Map_Parameters"> http://mapki.com/wiki/Google_Map_Parameters</a> for a comprehensive description of each of the Google Maps parameters.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec37"/>There's more...</h2></div></div></div><p>Here are some other common uses for the Maps application.</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec21"/>Generating directions</h3></div></div></div><p>You can instruct the Maps application to generate directions between two addresses. The following ActionScript snippet uses Google Maps'<code class="literal"> saddr</code> and<code class="literal"> daddr</code> parameters to produce driving directions between Adobe's and Apple's headquarters:<a id="id1153" class="indexterm"/>
</p><div><pre class="programlisting">var saddr:String = "Adobe Systems, 345 Park Avenue, San Jose";
var daddr:String = "Apple, 1 Infinite Loop, Cupertino";
var url:String = "http://maps.google.com/maps?" + "saddr=" + saddr + "&amp;daddr=" + daddr;
var request:URLRequest = new URLRequest(url);
navigateToURL(request);
</pre></div></div><div><div><div><div><h3 class="title"><a id="ch13lvl3sec22"/>Mapping your current location</h3></div></div></div><p>You can also show the user their current location. This can be done by determining their approximate location using AIR's<code class="literal"> Geolocation</code> class and passing that information to the Maps application.<a id="id1154" class="indexterm"/>
</p><p>The following ActionScript obtains the latitude and longitude from a<code class="literal"> GeolocationEvent</code> object, and constructs a Google Maps URL:</p><div><pre class="programlisting">private function geoUpdated(e:GeolocationEvent):void {
var lat:Number = e.latitude;
var lon:Number = e.longitude;
var url:String = "http://maps.google.com/maps?" + "ll=" + lat + "," + lon;
var request:URLRequest = new URLRequest(url);
navigateToURL(request);
}
</pre></div><p>The<code class="literal"> ll</code> property is used when specifying a location's latitude and longitude. Both values are separated by a comma.</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec38"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Determining your current location, <a class="link" href="ch09.html" title="Chapter 9. Geolocation and Accelerometer APIs">Chapter 9</a></em></li><li class="listitem" style="list-style-type: disc"><em>Launching system applications</em></li><li class="listitem" style="list-style-type: disc"><em>Launching the App Store</em></li></ul></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch13lvl1sec10"/>Declaring device capabilities</h1></div></div></div><p>The hardware and software capabilities of devices vary across the iOS family. For example, some feature a built-in camera, whereas others do not. It is important that your app can only be downloaded and installed on devices that are compatible with it. To enable this, the required capabilities can be explicitly set for your app.</p><p>You can't specify these capabilities directly from Flash Professional. Instead, you need to edit your FLA's application descriptor file. Let us see how to do this for an app that requires the presence of the native Messages application and an on-board GPS receiver.<a id="id1155" class="indexterm"/>
</p><div><div><div><div><h2 class="title"><a id="ch13lvl2sec39"/>Getting ready</h2></div></div></div><p>From the book's accompanying code bundle, open<code class="literal"> chapter13\recipe9\recipe.fla</code> and work from there. The FLA's stage is empty but its AIR for iOS settings have already been applied letting you easily publish once you are ready.<a id="id1156" class="indexterm"/>
</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec40"/>How to do it...</h2></div></div></div><p>Let us edit your application descriptor file from within Flash Professional.<a id="id1157" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">From Flash Professional, select<strong> File</strong> |<strong> Open</strong> and select<code class="literal"> recipe-app.xml</code>.</li><li class="listitem">Scroll down the file until you find the following XML fragment:<div><pre class="programlisting">&lt;iPhone&gt;
&lt;InfoAdditions&gt;
&lt;![CDATA[&lt;key&gt;UIDeviceFamily&lt;/key&gt;
&lt;array&gt;&lt;string&gt;1&lt;/string&gt;&lt;/array&gt;]]&gt;
&lt;/InfoAdditions&gt;
</pre></div></li><li class="listitem">Within the<code class="literal"> CDATA</code> node, add the following key-value pair to the XML:<div><pre class="programlisting">&lt;iPhone&gt;
&lt;InfoAdditions&gt;
&lt;![CDATA[&lt;key&gt;UIDeviceFamily&lt;/key&gt;
&lt;array&gt;&lt;string&gt;1&lt;/string&gt;&lt;/array&gt;
<strong>
&lt;key&gt;UIRequiredDeviceCapabilities&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;sms&lt;/string&gt;
&lt;string&gt;gps&lt;/string&gt;
&lt;/array&gt;]]&gt;
</strong>
&lt;/InfoAdditions&gt;
</pre></div></li><li class="listitem">Save the file.</li><li class="listitem">Publish the FLA. If you have an iOS device that lacks either the native Messages application or GPS, then try installing the<code class="literal"> .ipa</code> file. You will receive an error message similar to the following one:<p><strong>The app "c13 r9" was not installed because it is not compatible with this device.
</strong>
</p></li></ol></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec41"/>How it works...</h2></div></div></div><p>Your FLA's application descriptor is an XML file that contains a list of iOS specific settings. Within the<code class="literal">&lt;iPhone&gt;</code> node is the<code class="literal">&lt;infoAdditions&gt;</code> node where you can set custom key-value pairs that can't be set within Flash. These are used to describe an app or used directly by it when launched.</p><p>The<code class="literal"> UIRequiredDeviceCapabilities</code> key is used to specify the capabilities required by your app. If the device lacks the capabilities, then the app won't be installed.<a id="id1158" class="indexterm"/>
</p><p>Each capability should be listed within an<code class="literal">&lt;array&gt;</code> node:</p><div><pre class="programlisting">&lt;key&gt;UIRequiredDeviceCapabilities&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;sms&lt;/string&gt;
&lt;string&gt;gps&lt;/string&gt;
&lt;/array&gt;
</pre></div><p>This example XML snippet shows the<code class="literal"> sms</code> and<code class="literal"> gps</code> capabilities being listed. The<code class="literal"> sms</code> capability stipulates that your app requires the presence of the Messages application, while<code class="literal"> gps</code> states that the device should include GPS hardware.<a id="id1159" class="indexterm"/>
</p><p>The following capabilities can be specified with the<code class="literal"> UIRequiredDeviceCapabilities</code> key:</p><div><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Capability</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">telephony</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The app requires the presence of the Phone application.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">wifi</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Networking features of the device will be accessed by the app.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">sms</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The app requires the presence of the Messages application.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">still-camera</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A camera is required to capture photos.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">auto-focus-camera</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A camera with auto-focus is required to capture photos.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">front-facing-camera</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The app requires a forward-facing camera.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">camera-flash</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A camera flash is required for taking photos or shooting video.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">video-camera</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A camera with video capabilities is required on the device.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">accelerometer</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Access to an accelerometer is required.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">location-services</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The app will attempt to retrieve the device's current location.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">gps</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The device should include GPS hardware for location tracking.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">microphone</code>
</p>
</td><td style="text-align: left" valign="top">
<p>A built-in microphone is required by the app.</p>
</td></tr></tbody></table></div><p>The capabilities listed within the application descriptor file are also used by the App Store to prevent users from downloading apps that they can't run.</p><p>Try to keep an eye on the official Apple documents as the list of device capabilities grows with each new release of iOS:<a class="ulink" href="http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html"> http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html</a>.</p><p>Of course, whether you can take advantage of any new capabilities will also depend on future releases of AIR or any native extensions you decide to use.</p></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec42"/>There's more...</h2></div></div></div><p>A final word regarding device capabilities.</p><div><div><div><div><h3 class="title"><a id="ch13lvl3sec23"/>Dropped support for ARMv6 devices</h3></div></div></div><p>Apps published using AIR 2.6 and above do not support older ARMv6 iOS devices. AIR automatically includes the<code class="literal"> armv7</code> and<code class="literal"> opengles-2</code> capabilities in the application descriptor file in order to prevent owners of older iOS devices from downloading and installing these apps.<a id="id1160" class="indexterm"/>
</p><p>You do not need to explicitly add these two capabilities to the application descriptor file.</p></div></div><div><div><div><div><h2 class="title"><a id="ch13lvl2sec43"/>See also</h2></div></div></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><em>Editing the application descriptor file, <a class="link" href="ch03.html" title="Chapter 3. Writing your First App">Chapter 3</a></em></li></ul></div></div></div></body></html>