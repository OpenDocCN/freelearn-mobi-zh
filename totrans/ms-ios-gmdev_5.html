<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Bug Squashing &#x2013; Testing and Debugging"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Bug Squashing – Testing and Debugging</h1></div></div></div><p>I'm still trying to catch my breath from the last chapter! Boy, did we ever do a lot of work! Now it's time to slow it down a little bit. After all that coding, we are going to discuss testing and debugging. Debugging is a critical step in the entire development process, as the appearance of bugs can ruin the experience of your app. You spend countless hours on it, and, if there are bugs, people will think it's unprofessional. That's certainly not ideal. Let's see what we will discuss in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Testing our code on the simulator</li><li class="listitem" style="list-style-type: disc">Testing our project on various devices</li><li class="listitem" style="list-style-type: disc">Setting up TestFlight for beta testers</li><li class="listitem" style="list-style-type: disc">Squishing those bugs</li></ul></div><p>We will slow things down for this chapter and will resume the coding soon! So, let's sit back and treat this chapter as a breather. But don't think it will be a cake walk! No no! While this isn't exactly as action-packed as our last chapter, as I mentioned, this topic is super-critical in all projects, so it's super-important we pay attention to it.</p><p>Boom!</p><p>On to it!</p><div class="section" title="Testing our project"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec23"/>Testing our project</h1></div></div></div><p>No doubt you've been <a id="id191" class="indexterm"/>messing around with the iOS simulator (a feature that, to be honest, is very helpful, and that I found easier to access than the Android SDK emulator), which is awesome, but there is actually quite a lot that you can do with it without having to actually install anything on a physical device.</p><p>Let's open up our device simulator. To do this, inside Xcode, click on <span class="strong"><strong>Xcode</strong></span> on the bar at the top, then click on <span class="strong"><strong>Open Developer Tool</strong></span>, and finally click on <span class="strong"><strong>iOS Simulator</strong></span>.</p><p>You will now be greeted with a pixel-for-pixel simulation of any iOS device of your choice:</p><div class="mediaobject"><img src="graphics/B03553_05_01.jpg" alt="Testing our project"/></div><p>As I mentioned <a id="id192" class="indexterm"/>earlier, I like to use the iPhone 4S simulator because it's small enough to fit on my screen, but you do have your pick of the litter. Is your simulator set to a device that you don't want? Want to change it to something else such as the glittery iPhone 6+? No problem!</p><p>Simply click on <span class="strong"><strong>Hardware</strong></span> on the top bar. Then, under <span class="strong"><strong>Device</strong></span>, you can select any awesome Apple mobile device you like! When you select a new device, you will need to allow some time for the new device to boot.</p><p>Let's explore!</p><p>If you click on <span class="strong"><strong>File</strong></span>, you can snap a screenshot or at least see what key combination you can press to create a screenshot of the device screen (this is great for uploading to Facebook or iTunes).</p><p>When you click on <span class="strong"><strong>Edit</strong></span>, you can copy the text, copy the screen, paste, start dictation, and see the emojis.</p><p>Back to <span class="strong"><strong>Hardware</strong></span>, again you can select your device, you can rotate the device left or right, trigger a shake device gesture, trigger the home and lock buttons, or force a reboot.</p><p>You can also simulate a memory warning, trigger an in-call status bar, and select your keyboard settings as well as an external device.</p><p>Under the <span class="strong"><strong>Debug</strong></span> setting, you can choose to slow down animations, such as UI animations for opening and closing and so on.</p><p>You can also do some funky color stuff with the screen!</p><p>What?</p><p>Yes! You can color <a id="id193" class="indexterm"/>blended layers, copied images, misaligned images, and offscreen rendered items. In other words, you can highlight them to make them look as seen in the following screenshot. Kinda funky, right?</p><p>Now, why would one use this feature? Simple; sometimes sprites can get lost when debugging and you would like to keep track of them. Using this feature, you can easily track their movement. If you have a lot of sprites flying around your screen, this is a great feature to utilize. As seen in the following image, all images and sprites are tracked and clearly outlined:</p><div class="mediaobject"><img src="graphics/B03553_05_02.jpg" alt="Testing our project"/></div><p>Moving on, you <a id="id194" class="indexterm"/>can also open the system log, which is fantastic for debugging. You can also trigger an iCloud sync, and set the device mock location.</p><p>You can explore the device a little, but you will notice some settings and apps are missing. For example, you won't be able to select a background for the device, make calls, or send messages. You have a phone for that kind of stuff!</p><p>Moving on, we will build and run our project (again, by clicking on the <span class="strong"><strong>Play</strong></span> button in <span class="strong"><strong>Xcode</strong></span>). We should still have the SpriteKit frame rate label, but that's not exactly as in-depth as we would like.</p><p>To get some more <a id="id195" class="indexterm"/>technical statistics, click on back to go to <span class="strong"><strong>Xcode</strong></span> and then on <span class="strong"><strong>Debug</strong></span> on the bar at the top. Hover over <span class="strong"><strong>Attach to Process</strong></span> to find the name of the project that we are working on. It will show up under <span class="strong"><strong>Likely Targets</strong></span>. When you click on your project, Xcode will display some technical information, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/B03553_05_03.jpg" alt="Testing our project"/></div><p>Among other details, Xcode will tell you what the <span class="strong"><strong>Process Identifier</strong></span> (<span class="strong"><strong>PID</strong></span>)<a id="id196" class="indexterm"/> of our app is as well as the <span class="strong"><strong>CPU</strong></span>, <span class="strong"><strong>Memory</strong></span>, <span class="strong"><strong>Disk</strong></span>, and <span class="strong"><strong>Network</strong></span> usage, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/B03553_05_04.jpg" alt="Testing our project"/></div><p>Yes, that stuff is <a id="id197" class="indexterm"/>pretty great, but again, still not quite as in-depth as a developer would like to see. Want to get some really cool in-depth instrumentation?</p><p>Back in Xcode, on the bar at the top click on <span class="strong"><strong>Xcode</strong></span>, scroll down to <span class="strong"><strong>Open Developer Tool</strong></span>, and select <span class="strong"><strong>Instruments</strong></span>.</p><p>Now this is where we can get crazy and do some awesome in-depth testing:</p><div class="mediaobject"><img src="graphics/B03553_05_05.jpg" alt="Testing our project"/></div><p>Just look at all those <a id="id198" class="indexterm"/>awesome choices! Let's go through all the options you have here to help you debug:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Activity Monitor</strong></span>: <a id="id199" class="indexterm"/>Similar to the performance figures we have seen before, we do have more insight into what's going on within out app, as well as being able to record what's going on, and go back through our log to see at what points our performance drops.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Allocations</strong></span>: This<a id="id200" class="indexterm"/> section tracks the app's virtual memory and breaks it down into class names as well.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Automation</strong></span>: This <a id="id201" class="indexterm"/>executes a simple script that will simulate interaction with the user interface and, of course, record it all.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Cocoa Layout</strong></span>: This <a id="id202" class="indexterm"/>section monitors the <code class="literal">NSLayoutConstraints</code> that is created when laying out your UI via the Storyboard editor in Xcode to see where things get out of place.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Core Animation</strong></span>: This <a id="id203" class="indexterm"/>measures the app's graphical performance and CPU usage.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Core Data</strong></span>: This measures the<a id="id204" class="indexterm"/> Core Data system activity. In other words, the disk or memory usage.</li></ul></div><p>Moving past on to some more important ones:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Energy Diagnostics</strong></span>: This is<a id="id205" class="indexterm"/> an excellent tool to monitor battery usage</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Leaks</strong></span>: This measures <a id="id206" class="indexterm"/>memory usage and checks for any leaking memory</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>OpenGL ES Analysis</strong></span>: This <a id="id207" class="indexterm"/>measures and analyzes the rendering of our project and detects<a id="id208" class="indexterm"/> <span class="strong"><strong>OGLES</strong></span> (as I like to call it) correctness as well as performance issues</li></ul></div><p>Pretty cool, eh? In the next chapter, we will explore more of this when we discuss making our game more efficient.</p><p>Now that you have the simulator all figured out and we've looked at some of the awesome tools that Apple provides, let's move on to installing our app onto an actual device, which is actually incredibly easy.</p><p>All you have to do is connect your device to your development computer using the lightning cable or the 30-pin connector (if you have an older device) via USB.</p><p>In Xcode, in the same place where you would select the iOS simulator that you want to use, click on the Scheme toolbar, and select your device from the menu.</p><p>Xcode will <a id="id209" class="indexterm"/>automatically register the device for you to use as a development device. As opposed to how things used to be when you would have to manually add the device's UUID number via <a class="ulink" href="http://developer.apple.com">developer.apple.com</a>, Apple has really streamlined this process.</p><p>Your device could possibly be disabled in the scheme editor, which would mean it isn't an eligible device. For example, say you have the beta version of iOS 9 that was just released at the time of writing this book. If you had that installed, then an older version of Xcode installed, your device would not be eligible. You would have to install the latest version of Xcode.</p><p>Now, simply clicking on the <span class="strong"><strong>Run</strong></span> button will let Xcode install your app on the device. It's that simple!</p><p>You may have Xcode asking whether or not you want to allow codesign in the key in your keychain. Click on <span class="strong"><strong>always allow</strong></span>. You don't want that to pop up every time you click on the <span class="strong"><strong>Run</strong></span> button. By clicking on <span class="strong"><strong>always allow</strong></span>, Xcode will have the permission to automatically run the project on your device without having to ask.</p><p>In the same way that we connected the debuggers and logs to our iOS simulator, you can link them to the project running on your device.</p><p>In fact, you may very well get different read-outs due to the fact that you are running on a simulator. The device could potentially run it much better or worse depending on the device and the number of flappy clones you have installed, the number of messages you have stored, the amount of storage you have remaining, and so on. It's usually a good idea (if possible) to have a device dedicated to development with nothing but your projects installed on it. That way, you know your app will perform 100% each time.</p><p>Now that we have things figured out on how to link debugging to our project and we know how to install our apps on our device, it's time to talk about getting beta testers to help you out.</p></div></div>
<div class="section" title="Setting up TestFlight users"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec24"/>Setting up TestFlight users</h1></div></div></div><p>Why should I set up <a id="id210" class="indexterm"/>TestFlight users, you ask? Simply put, you can test your code for hours on end, and still not be able to find certain bugs. Trust me, I've done it before, only to find out after thousands of people have installed the app that there is a game destroying bug that could have been found if I let someone else play the game in a back-busting style.</p><p>Beta testers, or TestFlight users can be your friends who want to help you test your game, or even people in a focus group who will test your game and give you honest feedback. Let's discuss how to set up Test Flight users.<a id="id211" class="indexterm"/>
</p><div class="section" title="What's a TestFlight user?"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec20"/>What's a TestFlight user?</h2></div></div></div><p>You can define <a id="id212" class="indexterm"/>a TestFlight user as a beta tester. When you are ready for users to begin testing, you can set up TestFlight users that will receive a notification on their device when you have pushed a new version to test. From there, they can log any issues they see, so you will know if anything needs fixing.</p><p>We will start off by logging in to <a class="ulink" href="http://itunesconnect.apple.com">itunesconnect.apple.com</a> with your developer Apple ID, and then you will see the following page:</p><div class="mediaobject"><img src="graphics/B03553_05_06.jpg" alt="What's a TestFlight user?"/></div><p>From the main screen, simply click on the <span class="strong"><strong>Users and Rolls</strong></span> button. You will see a <span class="strong"><strong>TestFlight Beta Testers</strong></span> button on the top bar on the next page. Click on it to begin adding testers!</p><p>You will now be at the TestFlight Beta tester page. From here, you can see your internal testers (which will include you, as well as anyone else in your team) as well as your external testers.</p><p>To add people to test for you, click on the <span class="strong"><strong>External</strong></span> button. On the next page, you will see the text, <span class="strong"><strong>External Tester</strong></span>, next to which there should be a blue plus button, as you can see in the following <a id="id213" class="indexterm"/>screenshot:</p><div class="mediaobject"><img src="graphics/B03553_05_07.jpg" alt="What's a TestFlight user?"/></div></div><div class="section" title="Internal testers"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec21"/>Internal testers</h2></div></div></div><p>Get feedback quickly by sharing <a id="id214" class="indexterm"/>your beta builds with up to 25 members of your team who have been assigned the Technical or Admin role in iTunes Connect. Each member can test on up to 10 devices.</p></div><div class="section" title="External testers"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec22"/>External testers</h2></div></div></div><p>Once you're ready, you can invite up to<a id="id215" class="indexterm"/> 1,000 users who are not part of your development organization to beta-test an app that you intend for public release on the App Store. Apps made available to external testers require a <span class="strong"><strong>Beta App Review</strong></span> <a id="id216" class="indexterm"/>and must comply with the full <span class="strong"><strong>App Store Review Guidelines</strong></span>
<a id="id217" class="indexterm"/> before testing can begin. A review is required for new versions of your app that contain significant changes. Up to 10 apps can be tested at a time, internally or externally.</p><p>You will then be able to add as many beta testers as required. Besides entering their e-mail address, and optionally their first and last name, you can add these people to a group, which can help keep multiple testers organized, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/B03553_05_08.jpg" alt="External testers"/></div><p>The user will then get an e-mail requesting them to set up an account. From there, they can set up TestFlight on their device. We are now going to discuss how a TestFlight user can get started testing your awesome creation.</p></div><div class="section" title="Using TestFlight as a beta tester"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec23"/>Using TestFlight as a beta tester</h2></div></div></div><div class="section" title="Installation"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec18"/>Installation</h3></div></div></div><p>You can use <a id="id218" class="indexterm"/>TestFlight<a id="id219" class="indexterm"/> on up to 10 devices and test multiple apps for multiple developers; there is no limit to the number of apps that you can test.</p><p>TestFlight (as seen by the following icon image), can only be used to <a id="id220" class="indexterm"/>test iOS apps on iPhone, iPad, and iPod touch running <a id="id221" class="indexterm"/>iOS 8 or later—not Mac apps.</p><div class="mediaobject"><img src="graphics/B03553_05_09.jpg" alt="Installation"/></div></div><div class="section" title="Testing"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec19"/>Testing</h3></div></div></div><p>Once a <a id="id222" class="indexterm"/>tester accepts the invitation, they will be able to download a test version of the app.</p><p>If they already have the live app installed on their device, the beta version of the app will replace the live version.</p><p>When they've downloaded the beta app, they will see an orange dot next to its name that identifies it as a beta.</p><p>The TestFlight app will notify the tester each time a new build is available and provide instructions on what parts of the app they should keep an eye on.</p><p>Testers can easily offer feedback by tapping the <span class="strong"><strong>Provide Feedback</strong></span> button in the <span class="strong"><strong>App Details</strong></span> view in TestFlight. An e-mail automatically opens with app and device details, to which the tester can add additional details and screenshots.</p><p>Apps in beta do expire. The beta period lasts for 30 days, starting from the day it's released to testers. In TestFlight, the number of days remaining appears under the <span class="strong"><strong>Open</strong></span> button for each app.</p><p>If a beta app has <a id="id223" class="indexterm"/>
<span class="strong"><strong>In-App Purchases</strong></span>, you do not have to purchase them, as In-App Purchases made <a id="id224" class="indexterm"/>with beta builds are free.</p></div><div class="section" title="Opting out of testing"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec20"/>Opting out of testing</h3></div></div></div><p>If the tester doesn't accept your e-mail invitation, the beta app will not be installed and they will not be listed as a tester.</p><a id="id225" class="indexterm"/><p>Also, a tester can unsubscribe from testing by using the link at the bottom of the invitation e-mail to notify you (the developer) that they would like to be removed from TestFlight.</p><p>If a tester accepts the invitation but they don't want to test the app, they can delete themselves as a tester in the <span class="strong"><strong>App Details</strong></span> page in TestFlight. Because, you know, people are selfish.</p><p>So really, Apple has created an awesome system to allow easy, quick testing of your app.</p><p>Keep in mind that, each time you want to test a new version of your app, you need to upload the new version as well as submit the new version for review (as weird as that is, I know). It does seem redundant, but hey, it's Apple, and they know what they're doing.</p><p>Now, let's talk about crushing bugs!</p></div></div></div>
<div class="section" title="Squashing those bugs!"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec25"/>Squashing those bugs!</h1></div></div></div><p>This is a tedious thing to do. To be honest, debugging will take you many hours of figuring things out, especially when you're just starting out and don't know the code all that well. Trust me, it will take some time, but don't worry; it's worth the effort.</p><p>Let's take the app we've<a id="id226" class="indexterm"/> created, I sent it to a friend to test, and here is a snippet of the device log he lovingly sent to me:</p><div class="informalexample"><pre class="programlisting">Size (256.000000, 256.000000)
2015-06-11 21:24:04.357 Adesa[11289:1870205] Layer background has zPosition -60.000000
2015-06-11 21:24:04.363 Adesa[11289:1870205] Layer walls has zPosition -40.000000
2015-06-11 21:24:04.364 Adesa[11289:1870205] Layer hazards has zPosition -20.000000
2015-06-11 21:24:06.725 Adesa[11289:1870205] PEW
2015-06-11 21:24:21.971 Adesa[11289:1870205] PEW
2015-06-11 21:24:22.158 Adesa[11289:1870205] PEW
2015-06-11 21:24:22.391 Adesa[11289:1870205] PEW
2015-06-11 21:24:22.511 Adesa[11289:1870205] PEW
2015-06-11 21:24:22.911 Adesa[11289:1870205] PEW
2015-06-11 21:24:23.110 Adesa[11289:1870205] PEW
2015-06-11 21:24:23.976 Adesa[11289:1870205] PEW
2015-06-11 21:24:24.145 Adesa[11289:1870205] PEW
2015-06-11 21:24:24.344 Adesa[11289:1870205] PEW
2015-06-11 21:24:37.587 Adesa[11289:1870205] PEW
2015-06-11 21:24:46.171 Adesa[11289:1870205] PEW
2015-06-11 21:24:46.304 Adesa[11289:1870205] PEW
2015-06-11 21:24:46.470 Adesa[11289:1870205] PEW
2015-06-11 21:24:46.671 Adesa[11289:1870205] PEW
2015-06-11 21:24:46.821 Adesa[11289:1870205] PEW
2015-06-11 21:25:04.079 Adesa[11289:1870205] PEW
2015-06-11 21:25:04.310 Adesa[11289:1870205] PEW
2015-06-11 21:25:05.054 Adesa[11289:1870205] PEW
2015-06-11 21:25:05.222 Adesa[11289:1870205] PEW
2015-06-11 21:25:05.422 Adesa[11289:1870205] PEW
2015-06-11 21:25:05.974 Adesa[11289:1870205] unexpected nil window in _UIApplicationHandleEventFromQueueEvent, _windowServerHitTestWindow: &lt;UIClassicWindow: 0x7fa9ebb01370; frame = (0 0; 320 568); userInteractionEnabled = NO; gestureRecognizers = &lt;NSArray: 0x7fa9e9708080&gt;; layer = &lt;UIWindowLayer: 0x7fa9e9505e70&gt;&gt;
2015-06-11 21:25:22.856 Adesa[11289:1870205] PEW
2015-06-11 21:25:23.073 Adesa[11289:1870205] PEW
2015-06-11 21:25:23.223 Adesa[11289:1870205] PEW
Message from debugger: Terminated due to signal 15</pre></div><p>He noted no issues when testing. All he noticed was the device (an iPhone 5S) seemed to slow down when he first started the game, and his phone showed the rain and the flames all at once. This is something we will consider in the next chapter.</p><p>Here are some other<a id="id227" class="indexterm"/> things to remember when debugging. As we discussed earlier, after you click on the <span class="strong"><strong>Run</strong></span> button in the workspace toolbar and your app builds successfully, Xcode runs your app and starts a debugging session. You can debug your app directly within the source editor with graphical tools, such as data tips and Quick Look, for the value of variables.</p><p>The debug area and the debug navigator let you inspect the current state of your running application and control its execution.</p><p>Creating a quality app (like, come on, you already have and will create many more awesome quality apps... but moving on...) requires that you minimize the app's impact on the user's device. Use the debug gauges (that we talked about earlier) in the debug navigator to gain insight into your app's resource consumption, and when you spot a problem, use instruments to measure and analyze your app's performance. Again, we are going to discuss this a little further in the next chapter.</p><p>If you are developing an iOS app, use iOS Simulator to find major problems during design and early testing.</p><p>You can configure <a id="id228" class="indexterm"/>Xcode to help you focus on debugging tasks. For example, when your code hits a breakpoint, you can make Xcode automatically play an alert sound and create a window tab named <span class="strong"><strong>Debug</strong></span>, where Xcode displays the debug area, the debug navigator, and your code at the breakpoint.</p><p>Xcode lets you step through your code line by line to view your program's state at a particular stage of execution, which is a fantastically awesome feature that can really help you pick out problem code.</p><p>You can also use the debug area to control the execution of your code, view program variables and registers, view its console output, and interact with the debugger. In addition to this, you can also use the debug area to navigate to the OpenGL calls that render a frame and to view the rendering-state information at a particular call. The following image breaks down the user interface, and what everything does. Don't worry, I'll explain everything following the image:</p><div class="mediaobject"><img src="graphics/B03553_05_10.jpg" alt="Squashing those bugs!"/></div><p>You can suspend the execution of your app by clicking on the pause button (which toggles between "to pause" and "to continue") in the debug area toolbar.</p><p>To set a breakpoint, open a source code file and click on the <span class="strong"><strong>gutter</strong></span> next to the line where you want the execution to pause. A blue arrow in the <span class="strong"><strong>gutter</strong></span> (again) indicates the breakpoint.</p><p>When your app is paused, the line of code that is currently being executed will be highlighted in green.</p><p>You can step through the execution of your code using the <span class="strong"><strong>Step Over</strong></span>, <span class="strong"><strong>Step Into</strong></span>, and <span class="strong"><strong>Step Out</strong></span> buttons located in the bar at the top of the <span class="strong"><strong>Debug</strong></span> area. Clicking on <span class="strong"><strong>Step Over</strong></span> will execute the current line of code, including any methods.</p><p>If the current line of code calls a method, step into starts execution at the current line, and then stops when it reaches the first line of the called method. The <span class="strong"><strong>Step Out</strong></span> button executes the rest of the current method or function.</p><p>When the execution pauses, the debug navigator opens to display a stack trace (a report of the active stack frames at a certain point in time during the app's execution). Select an item in the debug navigator to view information about the item in the editor area and the debug area. As you continue to debug, expand or collapse threads to show or hide stack frames.</p><p>Hover over any<a id="id229" class="indexterm"/> variable in the source code editor to see a data tip displaying the value for the variable. Click on the inspector icon next to the variable to print the Objective-C description of the object to the debug area console and to display that description in an additional popup.</p><p>Click on the <span class="strong"><strong>Quick Look</strong></span> icon to see a graphical display of the variable's contents. You can implement a custom Quick Look display for your own objects.</p><p>When you build and run an OpenGL ES application on a connected device, the debug area toolbar includes a <span class="strong"><strong>Frame Capture</strong></span> button. Click on this button to capture a frame. You can use OpenGL ES frame capture to do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Inspect the OpenGL ES state information</li><li class="listitem" style="list-style-type: disc">Introspect OpenGL ES objects such as view textures and shaders</li><li class="listitem" style="list-style-type: disc">Step through the state calls (current debug state information) that precede each draw call and watch the changes with each call</li><li class="listitem" style="list-style-type: disc">Step through draw calls (current state of rendering of the app) to see exactly how the image is constructed</li><li class="listitem" style="list-style-type: disc">See which objects are used by each draw call by checking in the assistant editor</li><li class="listitem" style="list-style-type: disc">Edit shaders (how an image is rendered, such as color information, bloom, lens flares, and the like of special effects) to see the effect upon your application</li></ul></div><p>The debug navigator on the left shows parts of the rendering tree, and the main debug view shows the color and depth sources for the rendered frame as well as other image sources.</p><p>Click on the <a id="id230" class="indexterm"/>
<span class="strong"><strong>Debug View Hierarchy</strong></span> button in the bar at the top of the debug area to inspect a 3D rendering of the view hierarchy of your paused app. You can do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Rotate the rendering by clicking and dragging in the canvas. What's the canvas? That is where you see the app rendered in Xcode.</li><li class="listitem" style="list-style-type: disc">Increase or decrease the spacing between the view layers using the slider on the lower left.</li><li class="listitem" style="list-style-type: disc">Change the range of visible views using the double ended slider on the lower right. Move the left handle to change the bottom-most visible view. Move the right handle to change the top-most visible view to get the desired view. After all, there's a lot more going on in the scene that certain views won't show!</li><li class="listitem" style="list-style-type: disc">Reveal any clipped content of the selected view by clicking on the <span class="strong"><strong>Show clipped content</strong></span> button.</li><li class="listitem" style="list-style-type: disc">You can also reveal any clipped content of the selected view by clicking on the <span class="strong"><strong>Show Clipped Content</strong></span> button. You can do this if your view is clipped due to smaller screen sizes.</li><li class="listitem" style="list-style-type: disc">Increase and decrease the magnification using the <span class="strong"><strong>Zoom In (+)</strong></span> and <span class="strong"><strong>Zoom Out (-)</strong></span> buttons.</li></ul></div><p>The iOS Simulator helps you find major problems in your app during design and early testing as we've discussed throughout this book, as it is exactly that, a simulator. Not everyone can afford every new Apple device!</p><p>As I sit in front of my 27" iMac, 13" MacBook Pro, texting from my 5S, charging my iPad, currently thinking about buying the Apple watch and wearing my Apple Store shirt.... hmm... it's no wonder I have no money.</p><p>Moving on!</p><p>In every simulated environment in the iOS Simulator, the home screen provides access to apps—such as Safari, Contacts, Maps, and Passbook—that are included with iOS on the device.</p><p>You can perform an initial testing of your app's interaction with these apps in iOS Simulator. For example, just like we did, if you are testing a game, use iOS Simulator to test that the game uses Game Center correctly.</p><p>The <span class="strong"><strong>Accessibility Inspector</strong></span> in iOS Simulator helps you test the usability of your app regardless of a person's limitations or disabilities.</p><p>The Accessibility Inspector displays information about each accessible element in your app and enables you to simulate VoiceOver interaction with those elements. To start the Accessibility Inspector, click on the <span class="strong"><strong>Home</strong></span> button on iOS Simulator. Click on <span class="strong"><strong>Settings</strong></span> and go to <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>Accessibility</strong></span>. Slide the <span class="strong"><strong>AccessibilityInspector</strong></span> switch to <span class="strong"><strong>On</strong></span>.</p><p>You can test your app's localizations in iOS Simulator by changing the language. In <span class="strong"><strong>Settings</strong></span>, navigate to <span class="strong"><strong>General</strong></span> | <span class="strong"><strong>International</strong></span> | <span class="strong"><strong>Language</strong></span>.</p><p>Now, these are obviously some pretty over-and-beyond steps you can take. I don't think every game will need accessibility (or that every developer will include it in their app), but these are good things to keep in mind if you are developing an app that will be seen worldwide and you want everyone to be able to use it.</p><p>Although you<a id="id231" class="indexterm"/> can test your app's basic behavior in iOS Simulator, the simulator is limited as a test platform for multiple reasons. Why's this? Take the following into consideration:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The iOS Simulator is an app running on a Mac and it has access to the computer's memory, which is much greater than the memory found on a device.</li><li class="listitem" style="list-style-type: disc">The iOS Simulator runs on the Mac CPU rather than the processor of an iOS device.</li><li class="listitem" style="list-style-type: disc">iOS Simulator doesn't run all threads that run on devices.</li><li class="listitem" style="list-style-type: disc">iOS Simulator can't simulate hardware features, such as the accelerometer, gyroscope, camera, or proximity sensor. <span class="emphasis"><em>So don't throw your computer to simulate accelerometer controls!</em></span> Please don't... don't ask... I promise I didn't do that.</li></ul></div><p>While developing your app, ensure that you run and test it on all of the iOS devices and iOS versions that you intend to support. It's only common sense to do so, as you can adjust performance for each device.</p><p>I know it's a lot to keep in mind and probably a lot you won't consider every time you are testing your app or even building a new app. It is good information to keep in the back of your mind in case something ever comes up in your own development.</p><p>We did discuss some performance issues, such as the fact that rendering a lot of particles on an iPhone 4S cripples the performance and almost causes the device to completely crash out. That's what we will discuss in the next chapter—how to manage performance and keep battery drainage to a minimum!</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec26"/>Summary</h1></div></div></div><p>Let's see what we talked about in this chapter. Well, what didn't we talk about?! We discussed all things debugging. We started off talking about installing and testing our app on the iOS simulator. Being as limited as it is, we then moved on to testing on a physical device because hey, it's pretty tough to click on two areas at once as you are trying to test a platformer like the one we've created.</p><p>We then discussed setting up TestFlight so that we can get beta testers to help us out in finding some ravenous bugs hidden deep within the confides of our code. Again, a seven-year-old child bashing the screen is bound to find a bug a helluva lot quicker than a 20+ device-respecting developer.</p><p>We then discussed the fun of debugging and all the great tips and tricks for debugging. We also covered some things to keep in mind and various ways to test our code line by line as well as slowing animations down so we can see things as they happen.</p><p>It's been a lot of reading for this chapter, and we will get further into it in the next one.</p><p>Don't worry; we're only two chapters away from the best part: Monetization. Also, we are going to return to creating the game. I didn't forget that!</p><p>I'll see you in the next chapter!</p></div></body></html>