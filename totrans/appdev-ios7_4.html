<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch04"/>Chapter 4. Building Our Application for iOS 7</h1></div></div></div><p>We'll start the chapter by covering some of the new design principles present in iOS 7. This includes changes to the navigation and status bars, to the new UIKit, and changes to the application icon. Next, we will create our required files and organize them for easier navigation. Lastly, we will add some new view controllers to our storyboard and point them to our newly created files. On completing this chapter, we will have a complete skeleton of our application that is ready for functionality. Let's get started!</p><div><div><div><div><h1 class="title"><a id="ch04lvl1sec35"/>Designing for iOS 7</h1></div></div></div><p>With the release of iOS 7, developers<a id="id73" class="indexterm"/> and designers will need to adjust their approach to suit the new "flat" design. Although it is not a requirement to follow this design pattern, almost all UI elements in the SDK have been completely revamped to support it.</p><p>It is important to consider these changes when designing your iOS 7 application in order to keep a balanced layout. Some factors include new typography and updated UIKit dimensions. In this chapter, we will put together the skeleton of our application, but first we will discuss two important changes to iOS 7 that will directly affect how you build your future applications.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec09"/>The navigation bar and status bar</h2></div></div></div><p>Probably, the most apparent <a id="id74" class="indexterm"/>change to iOS 7 is the new navigation bar<a id="id75" class="indexterm"/> and status bar<a id="id76" class="indexterm"/>. Both of these items have been around since the<a id="id77" class="indexterm"/> launch of iOS. Prior to iOS 7, the 20-pixel status bar was simply a solid background view that would cover the top 20 pixels of the main application window.</p><p>Additionally, when using a navigation controller, the navigation bar itself would also act in the same manner, covering the next 44 pixels (for a total of 64 pixels) of the view. Because of this, an item positioned with a <em>y=0</em> value would be positioned directly below the navigation or status bar.</p><p>With the release of iOS 7, this has been removed entirely. The status bar itself now contains a clear background allowing any UI elements or views to be positioned behind it. Run our application and notice<a id="id78" class="indexterm"/> how our menu background image extends to the top of the<a id="id79" class="indexterm"/> device's screen, directly behind the status bar as shown in the following screenshot:</p><div><img src="img/0319OT_04_01.jpg" alt="The navigation bar and status bar"/></div><p>It is very common for most applications to have the status bar background match the navigation bar<a id="id80" class="indexterm"/> background. In iOS 7, setting the navigation bar color will<a id="id81" class="indexterm"/> automatically set the status bar background to match. The following screenshot is an example from our completed application:</p><div><img src="img/0319OT_04_02.jpg" alt="The navigation bar and status bar"/></div><p>Another result of this change is that programmatically positioning your views on the <em>y</em> axis requires you to consider the heights of the status bar and the navigation bar. A view positioned at <em>x=0</em> and <em>y=0</em> will appear on the top-left corner of the screen, behind the navigation and status bar.</p><p>It is important to understand that this change specifically applies to code that is executed at runtime. When using storyboards, this new positioning does not apply. Xcode will automatically adjust views in <a id="id82" class="indexterm"/>storyboards in relation to the navigation and status bars. Each view will retain its initial <em>y</em> position regardless of any adjustments made.</p><p>Lastly, Apple has added<a id="id83" class="indexterm"/> a new translucent property to the navigation bar.<a id="id84" class="indexterm"/> Open the contacts application on any device running iOS 7 and scroll through your contacts. You will notice that as each item passes<a id="id85" class="indexterm"/> behind the navigation bar, it can be seen through the bar as it moves off the screen. This effect is used throughout iOS 7 and its newly designed applications, and Apple has also made it available to be used by developers. By default, this property will be set to <code class="literal">YES</code>, but can be disabled at any time if you wish.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec10"/>The new UIKit</h2></div></div></div><p>iOS 7's new flat design has<a id="id86" class="indexterm"/> changed many of the dimensions of common UIKit elements. Some of these include segmented controls,<a id="id87" class="indexterm"/> search display controllers, and alert views. Most of these changes result in a smaller frame than found on previous versions of iOS, but also include updated typography and user interaction. The newly designed search bar is as shown in the following screenshot:</p><div><img src="img/0319OT_04_03.jpg" alt="The new UIKit"/></div><p>The segmented controls are as shown in the following screenshot:</p><div><img src="img/0319ot_04_07.jpg" alt="The new UIKit"/></div><p>The new<a id="id88" class="indexterm"/> alert view for <a id="id89" class="indexterm"/>a notification is as shown in the following screenshot:</p><div><img src="img/0319OT_04_08.jpg" alt="The new UIKit"/></div><p>The new alert view for deletion is as shown in the following screenshot:</p><div><img src="img/0319OT_04_09.jpg" alt="The new UIKit"/></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec11"/>Updated app icons</h2></div></div></div><p>Apple has made a subtle change to the standard iOS application icon size with the release of iOS 7. Previously, icons featured an even corner radius that was easy to replicate on your own. Apple has provided a new shape known as a <strong>superellipse</strong><a id="id90" class="indexterm"/> with a more stretched corner radius. <a id="id91" class="indexterm"/>Additionally, the shine (gloss effect) has been removed from application icons. As always, Xcode 5 will automatically clip your app icon images to the proper shape; however, if you wish to add your own stroke or shadows, you will need to use an unofficial template.</p><p>Additionally, Apple has introduced what they call a <strong>golden ratio grid system</strong><a id="id92" class="indexterm"/> that you will see in the following screenshot. Apple recommends using this grid when designing your icons and laying out individual elements. This is considered more of a guideline than a rule, so feel free to work outside of such a grid system if it better suits your application icon.</p><div><img src="img/0319OT_04_04.jpg" alt="Updated app icons"/></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec36"/>Putting together the pieces</h1></div></div></div><p>Now that we have covered some of the basic design aspects of iOS 7, it's time to start building our application skeleton. Before we write any code, let's create the essential project files, construct our views in our storyboard, and create/connect outlets for each view controller. We will be able to navigate through our application; however, it just won't do anything yet.</p><div><div><div><div><h2 class="title"><a id="ch04lvl2sec12"/>Project organization</h2></div></div></div><p>One of the first steps in my<a id="id93" class="indexterm"/> development process is organizing my project in Xcode 5. Doing so makes it easier to navigate your project and find the files you need. Let's go ahead and organize our app.</p><p>Open our <strong>Food and Me</strong> project and take a look at the navigator on the left. We have a couple of files in no particular order, and we will also be creating more files shortly. We are going to divide our main project files into the following three separate categories:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">App Delegate</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">View Controllers</code></li><li class="listitem" style="list-style-type: disc"><code class="literal">Custom Classes</code></li></ul></div><p>On the navigator pane, right-click on the top-level folder (<code class="literal">Food and Me</code>, our application name) and click on <strong>New Group</strong>. A new group will appear in our main <code class="literal">Food and Me</code> group; let's name it <code class="literal">App Delegate</code>. Repeat this process two more times, naming the new groups <code class="literal">View Controllers</code> and <code class="literal">Custom Classes</code>, respectively.</p><p>Select both <code class="literal">AppDelegate.h</code> and <code class="literal">AppDelegate.m</code> (using the <em>command</em> key) and drag these files into the <code class="literal">App Delegate</code> group we just created. Do the same for <code class="literal">MenuViewController.h</code> and <code class="literal">MenuViewController.m</code> and drag these files into the <code class="literal">View Controllers</code> group. These groups can also be rearranged, so feel free to move them around based on preference.</p><p>The following screenshot gives a peek into the final results found in the <code class="literal">Food and Me</code> project:</p><div><img src="img/0319OT_04_05.jpg" alt="Project organization"/></div></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec13"/>Creating the files</h2></div></div></div><p>Now that our project is a<a id="id94" class="indexterm"/> little more organized, it's time to create our remaining project files. <a id="id95" class="indexterm"/>Our application will require a view controller for our menu, the addition of new foods, views of our current foods, and then a detailed view of each food item. We have already set up our menu, so let's create the remaining files.</p><p>Right-click on our <code class="literal">View Controllers</code> group and click on <strong>New File</strong> (you can also achieve this by navigating to <strong>File</strong> | <strong>New</strong> | <strong>File</strong> in the menu bar). Make sure that <strong>Cocoa Touch</strong> is selected in the left-hand side menu bar, select <strong>Objective-C class</strong> from the options, and then click on <strong>Next</strong>. Name this file <code class="literal">AddNewViewController</code> and make sure it is a subclass of <code class="literal">UIViewController</code>. Click on <strong>Next</strong> and then on <strong>Create</strong>. Our new file will be created and added to our <code class="literal">View Controllers</code> group.</p><p>Repeat this process two more times.<a id="id96" class="indexterm"/> The first file will be named <code class="literal">MyFoodsViewController</code> and will be a subclass of <code class="literal">UITableViewController</code>. Name<a id="id97" class="indexterm"/> the second file <code class="literal">FoodDetailViewController</code> and set it as a subclass of <code class="literal">UIViewController</code>. We now have most of our required files for our application. In a later chapter, we will be creating one last project file in our <code class="literal">Custom Classes</code> group.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec14"/>Setting up the storyboard</h2></div></div></div><p>Now that we have our files, <a id="id98" class="indexterm"/>we need to create some views in our storyboard and hook them up to our classes we just created. Open <code class="literal">Main.storyboard</code> and you should see our navigation controller and its root view controller (the menu view controller). <a id="id99" class="indexterm"/>Let's add the remaining controllers to our storyboard now.</p><p>Open the <strong>Utilities</strong> pane on the right-hand side (if not already open) and click on the <strong>Object Library</strong>. Our <code class="literal">AddNewViewController</code> and <code class="literal">FoodDetailViewController</code> files are both subclasses of <code class="literal">UIViewController</code>, so drag two view controller objects onto the storyboard. Our <code class="literal">MyFoodsViewController</code> is a subclass of <code class="literal">UITableViewController</code>, so let's drag a <code class="literal">UITableViewController</code> object onto the storyboard as well.</p><p>Select one of the <code class="literal">UIViewControllers</code> and open the identity inspector. In the custom class section at the top, set this <code class="literal">View Controllers</code> class to <code class="literal">AddNewViewController</code>. Now select the remaining <code class="literal">UIViewController</code> and set its class to <code class="literal">FoodDetailViewController</code>. Lastly, select our <code class="literal">UITableViewController</code> and set its class to <code class="literal">MyFoodsViewController</code>. Our storyboard now has all of the objects needed for our application.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec15"/>AddNewViewController</h2></div></div></div><p>Now that we have created our files<a id="id100" class="indexterm"/> and added the proper controllers to our storyboard, let's go ahead and add the required objects to each controller. We will<a id="id101" class="indexterm"/> start with the <code class="literal">AddNewViewController</code> object. Select it, and then navigate to <strong>Object Library</strong> in the <strong>Utilities</strong> pane.</p><p>Our application will give users the ability to track what they eat. Each food item will consist of an image, name/title, and the date it was created. We will need to provide an image view to store the final image, a placeholder image view, and a <code class="literal">UITextField</code> object to input the name of the food item.</p><p>Drag a <code class="literal">UITextField</code> object and two <code class="literal">UIImageView</code> objects onto the <code class="literal">AddNewViewController</code> view. These will allow our user to interact with the view and create food items for our app. In this chapter, we are simply adding all the elements to our project, so do not worry about the size or positions of these objects.</p><p>Select the <code class="literal">AddNewViewController</code> object itself and then click on the assistant editor button (the middle button in the top-right corner that resembles a tuxedo). Switch to <code class="literal">AddNewViewController.h</code> if it is not already displayed. In order to access these objects in our code, we will create outlets<a id="id102" class="indexterm"/> for each item in our code. While<a id="id103" class="indexterm"/> holding down the <em>control</em> key on your keyboard, click-and-drag from the <code class="literal">UITextField</code> to the header file and let go. Name this outlet <code class="literal">nameTextField</code> and click on <strong>Connect</strong>. Repeat this for both <code class="literal">UIImageView</code>s. Name the first image view <code class="literal">placeholderImageView</code> and the second <code class="literal">finalImageView</code>. We now have all required objects and connections for <code class="literal">AddNewViewController</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec16"/>FoodDetailViewController</h2></div></div></div><p>When a user selects one<a id="id104" class="indexterm"/> of their previously added food items, we want to display a detailed view that includes a fullscreen background image, an image of the food, the name of the food, and then finally the date it was saved. Select the <code class="literal">FoodDetailViewController</code> class<a id="id105" class="indexterm"/> in the storyboard, and navigate back to the <strong>Utilities</strong> pane and the <strong>Object Library</strong>.</p><p>Drag two <code class="literal">UIImageView</code>s and two <code class="literal">UILabel</code>s onto the food detail view. Once again, ignore the size and positioning of each item. We will also add outlets for each object to our code, so go ahead and open the assistant editor and switch to the <code class="literal">FoodDetailViewController.h</code> file. Control drag from the first image view to the space between <code class="literal">@interface</code> and <code class="literal">@end</code> in the <code class="literal">.h</code> file, and name the outlet <code class="literal">backgroundImageView</code>. Perform the same steps for the second image view and name it <code class="literal">foodImageView</code>.</p><p>Our labels will be used to display the name and date related to the food item. Control drag from the first label and name this outlet <code class="literal">foodNameLabel</code>. The second <code class="literal">UILabel</code> should be named <code class="literal">foodDateLabel</code>. We now have all the views required for our <code class="literal">FoodDetailViewController</code> class.</p></div><div><div><div><div><h2 class="title"><a id="ch04lvl2sec17"/>MyFoodsViewController</h2></div></div></div><p>When we <a id="id106" class="indexterm"/>dragged the <code class="literal">UITableViewController</code> object to the<a id="id107" class="indexterm"/> storyboard, Xcode 5 automatically added a <code class="literal">UITableView</code> object, with a plane prototype cell, to the controller. <strong>Food and Me</strong> will be using a custom <code class="literal">UITableViewCell</code> subclass to create and lay out our table view cells. This will be covered in a later chapter, so for the time being we will make one simple change to the <code class="literal">MyFoodsViewController</code> class. Select the prototype cell and a small white box will appear at the<a id="id108" class="indexterm"/> bottom of the cell's frame. Click-and-drag down this box to resize the cell. Set its height to 100 pixels,<a id="id109" class="indexterm"/> as shown in the following screenshot:</p><div><img src="img/0319OT_04_06.jpg" alt="MyFoodsViewController"/></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch04lvl1sec37"/>Summary</h1></div></div></div><p>In this chapter, we learned some of the newer design principles associated with iOS 7. Additionally, we organized our project, created all of our required files, and started our views in storyboard. We are ready to start writing some code and adding functionality to our application.</p><p>In the next chapter, we will finish building the <code class="literal">AddNewViewController</code> class and add the functionality to save our users' data for later viewing.</p></div></body></html>