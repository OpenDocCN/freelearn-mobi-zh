<html><head></head><body>
<div id="_idContainer060">
<h1 class="chapter-number" id="_idParaDest-109"><a id="_idTextAnchor190"/><span class="koboSpan" id="kobo.1.1">4</span></h1>
<h1 id="_idParaDest-110"><a id="_idTextAnchor191"/><span class="koboSpan" id="kobo.2.1">Navigation in Modern Android Development</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In Android development, navigation is the interaction that allows your Android application users to navigate to, from, and back out from the different screens within your app, an action that is very vital in the </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">mobile ecosystem.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">Jetpack navigation has simplified navigation between screens, and in this chapter, we will learn how to implement navigation with a simple view click, from the bottom navigation bar, which is most commonly used, by navigating with arguments, </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">and more.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">In this chapter, we’ll cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">following recipes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.9.1">Implementing a bottom navigation bar using </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">navigation destinations</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Navigating to a new screen </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">in Compose</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Navigating </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">with arguments</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Creating deep links </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">for destinations</span></span></li>
<li><span class="koboSpan" id="kobo.17.1">Writing tests </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">for navigation</span></span></li>
</ul>
<h1 id="_idParaDest-111"><a id="_idTextAnchor192"/><span class="koboSpan" id="kobo.19.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.20.1">The complete source code for this chapter can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">at </span></span><a href="https://github.com/PacktPublishing/Modern-Android-13-Development-Cookbook/tree/main/chapter_four"><span class="No-Break"><span class="koboSpan" id="kobo.22.1">https://github.com/PacktPublishing/Modern-Android-13-Development-Cookbook/tree/main/chapter_four</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.23.1">.</span></span></p>
<h1 id="_idParaDest-112"><a id="_idTextAnchor193"/><span class="koboSpan" id="kobo.24.1">Implementing a bottom navigation bar using navigation destinations</span></h1>
<p><span class="koboSpan" id="kobo.25.1">In Android development, having a bottom navigation bar is very common; it helps inform your </span><a id="_idIndexMarker275"/><span class="koboSpan" id="kobo.26.1">users that </span><a id="_idIndexMarker276"/><span class="koboSpan" id="kobo.27.1">there are different sections in your application. </span><span class="koboSpan" id="kobo.27.2">In addition, other apps opt to include a navigation drawer activity, which holds a profile and additional information about </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">the application.</span></span></p>
<p><span class="koboSpan" id="kobo.29.1">An excellent example of an app that utilizes both – a navigation drawer and bottom navigation – is Twitter. </span><span class="koboSpan" id="kobo.29.2">It is also important to mention that some companies prefer to have a top navigation bar as a preference. </span><span class="koboSpan" id="kobo.29.3">In addition, others such as Google Play Store have both bottom and </span><span class="No-Break"><span class="koboSpan" id="kobo.30.1">drawer navigation</span><a id="_idTextAnchor194"/><span class="koboSpan" id="kobo.31.1">.</span></span></p>
<h2 id="_idParaDest-113"><a id="_idTextAnchor195"/><span class="koboSpan" id="kobo.32.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.33.1">Create a new Android project with your preferred editor or Android Studio, or you can use any project from </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">previous recipes.</span></span><a id="_idTextAnchor196"/></p>
<h2 id="_idParaDest-114"><a id="_idTextAnchor197"/><span class="koboSpan" id="kobo.35.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.36.1">In this recipe, we are going to create a new project and call </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">BottomNavigationBarSample</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.39.1">:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.40.1">After creating our new empty </span><strong class="source-inline"><span class="koboSpan" id="kobo.41.1">Activity BottomNavigationBarSample</span></strong><span class="koboSpan" id="kobo.42.1"> project, we will start by adding the required navigation dependency in </span><strong class="source-inline"><span class="koboSpan" id="kobo.43.1">build.gradle</span></strong><span class="koboSpan" id="kobo.44.1">, and then sync </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">the project:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.46.1">
implementation 'android.navigation:navigation-compose:2.5.2'</span></pre></li>
<li><span class="koboSpan" id="kobo.47.1">As noticed in a previous new project, when you create a new project, there is code that comes with it, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.48.1">Greeting()</span></strong><span class="koboSpan" id="kobo.49.1"> function; you can go ahead and delete </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">that code.</span></span></li>
<li><span class="koboSpan" id="kobo.51.1">After deleting that code, let us go ahead and create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">sealed</span></strong><span class="koboSpan" id="kobo.53.1"> class in the main package directory and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.54.1">Destination.kt</span></strong><span class="koboSpan" id="kobo.55.1">, where we will define our </span><strong class="source-inline"><span class="koboSpan" id="kobo.56.1">route</span></strong><span class="koboSpan" id="kobo.57.1"> string, </span><strong class="source-inline"><span class="koboSpan" id="kobo.58.1">icon:</span></strong> <strong class="source-inline"><span class="koboSpan" id="kobo.59.1">Int</span></strong><span class="koboSpan" id="kobo.60.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">title: String</span></strong><span class="koboSpan" id="kobo.62.1"> for our bottom </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">navigation items:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.64.1">
sealed class Destination(val route: String, val icon: Int, val title: String) {...}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.65.1">Strictly speaking, we might not need the </span><strong class="source-inline"><span class="koboSpan" id="kobo.66.1">sealed</span></strong><span class="koboSpan" id="kobo.67.1"> class, but it is a nicer way to implement navigation. </span><span class="koboSpan" id="kobo.67.2">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">sealed</span></strong><span class="koboSpan" id="kobo.69.1"> class in Kotlin represents a restricted class hierarchy that provides more control over inheritance. </span><span class="koboSpan" id="kobo.69.2">Alternatively, you can think of it as a class that, in its value, can have one of the types from a limited set, but it cannot have any </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">other types.</span></span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.71.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">sealed</span></strong><span class="koboSpan" id="kobo.73.1"> class, now let’s go ahead and create our destinations. </span><span class="koboSpan" id="kobo.73.2">For our </span><a id="_idIndexMarker277"/><span class="koboSpan" id="kobo.74.1">sample, we </span><a id="_idIndexMarker278"/><span class="koboSpan" id="kobo.75.1">will assume we are creating a budgeting app. </span><span class="koboSpan" id="kobo.75.2">Hence, the destinations we can have are </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">Transactions</span></strong><span class="koboSpan" id="kobo.77.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">Budgets</span></strong><span class="koboSpan" id="kobo.79.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">Tasks</span></strong><span class="koboSpan" id="kobo.81.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">Settings</span></strong><span class="koboSpan" id="kobo.83.1">. </span><span class="koboSpan" id="kobo.83.2">See the next step on how to get the icons; in addition, you will need to import them. </span><span class="koboSpan" id="kobo.83.3">For good practice, you can extract the </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">String</span></strong><span class="koboSpan" id="kobo.85.1"> resource and save it in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">String</span></strong><span class="koboSpan" id="kobo.87.1"> XML file. </span><span class="koboSpan" id="kobo.87.2">You can try this as a </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">small exercise:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.89.1">
sealed class Destination(val route: String, val icon: Int, val title: String) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.90.1">
    object Transaction : Destination(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.91.1">
        route = "transactions", icon =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.92.1">
            R.drawable.ic_baseline_wallet,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.93.1">
            title = "Transactions"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.94.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.95.1">
    object Budgets : Destination(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.96.1">
        route = "budget", icon =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.97.1">
            R.drawable.ic_baseline_budget,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.98.1">
            title = "Budget"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.99.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.100.1">
    object Tasks : Destination(route = "tasks", icon =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.101.1">
        R.drawable.ic_add_task, title = "Tasks")</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.102.1">
    object Settings : Destination(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.103.1">
        route = "settings", icon =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.104.1">
            R.drawable.ic_settings,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.105.1">
            title = "Settings"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.106.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.107.1">
    companion object {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.108.1">
        val toList = listOf(Transaction, Budgets,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.109.1">
        Tasks, Settings)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.110.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.111.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.112.1">For the icons, you </span><a id="_idIndexMarker279"/><span class="koboSpan" id="kobo.113.1">can access them easily </span><a id="_idIndexMarker280"/><span class="koboSpan" id="kobo.114.1">but clicking on the resource folder (</span><strong class="source-inline"><span class="koboSpan" id="kobo.115.1">res</span></strong><span class="koboSpan" id="kobo.116.1">), then navigating to </span><strong class="bold"><span class="koboSpan" id="kobo.117.1">Vector Assets</span></strong><span class="koboSpan" id="kobo.118.1"> | </span><strong class="bold"><span class="koboSpan" id="kobo.119.1">Clip Art</span></strong><span class="koboSpan" id="kobo.120.1">, which will launch and bring up free icons that you can use, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.121.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.122.1">.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer054">
<span class="koboSpan" id="kobo.124.1"><img alt="Figure 4.1 – How to access Vector Asset" src="image/Figure_4.1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.125.1">Figure 4.1 – How to access Vector Asset</span></p>
<ol>
<li value="6"><span class="koboSpan" id="kobo.126.1">You can </span><a id="_idIndexMarker281"/><span class="koboSpan" id="kobo.127.1">also upload an SVG file and access it through </span><strong class="bold"><span class="koboSpan" id="kobo.128.1">Asset Studio</span></strong><span class="koboSpan" id="kobo.129.1">. </span><span class="koboSpan" id="kobo.129.2">For more </span><a id="_idIndexMarker282"/><span class="koboSpan" id="kobo.130.1">icons, you can check out this </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">link: </span></span><a href="https://fonts.google.com/icons"><span class="No-Break"><span class="koboSpan" id="kobo.132.1">https://fonts.google.com/icons</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.133.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer055">
<span class="koboSpan" id="kobo.134.1"><img alt="Figure 4.2 – Asset Studio" src="image/Figure_4.2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.135.1">Figure 4.2 – Asset Studio</span></p>
<ol>
<li value="7"><span class="koboSpan" id="kobo.136.1">Now, for the destinations we just added, let’s go ahead and add dummy text to verify that, indeed, when we navigate, we are on the right screen. </span><span class="koboSpan" id="kobo.136.2">Create a new file and </span><a id="_idIndexMarker283"/><span class="koboSpan" id="kobo.137.1">name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.138.1">AppContent.kt</span></strong><span class="koboSpan" id="kobo.139.1">. </span><span class="koboSpan" id="kobo.139.2">Inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.140.1">AppContent</span></strong><span class="koboSpan" id="kobo.141.1">, we will add our </span><strong class="source-inline"><span class="koboSpan" id="kobo.142.1">Transaction</span></strong><span class="koboSpan" id="kobo.143.1"> function, which </span><a id="_idIndexMarker284"/><span class="koboSpan" id="kobo.144.1">will be our home screen, where new users enter the app the first time; then later, they can navigate to </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">other screens:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.146.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.147.1">
fun Transaction(){</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.148.1">
    Column(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.149.1">
        modifier = Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.150.1">
            .fillMaxSize()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.151.1">
            .wrapContentSize(Alignment.Center)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.152.1">
    ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.153.1">
    ...</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.154.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.155.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.156.1">Go ahead and add the remaining three screens, </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">Task</span></strong><span class="koboSpan" id="kobo.158.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">Budget</span></strong><span class="koboSpan" id="kobo.160.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">Settings</span></strong><span class="koboSpan" id="kobo.162.1">, using the same </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">composable pattern.</span></span></li>
<li><span class="koboSpan" id="kobo.164.1">We </span><a id="_idIndexMarker285"/><span class="koboSpan" id="kobo.165.1">now need to create a bottom navigation bar composable and tell the </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">Composable</span></strong><span class="koboSpan" id="kobo.167.1"> function </span><a id="_idIndexMarker286"/><span class="koboSpan" id="kobo.168.1">how to react when clicked, and also restore the state when re-selecting a previously </span><span class="No-Break"><span class="koboSpan" id="kobo.169.1">selected item:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.170.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.171.1">
fun BottomNavigationBar(navController: NavController, appItems: List&lt;Destination&gt;) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.172.1">
    BottomNavigation(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.173.1">
        backgroundColor = colorResource(id =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.174.1">
            R.color.purple_700),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.175.1">
            contentColor = Color.White</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.176.1">
    ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.177.1">
    ...</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.178.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.179.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.180.1">Now, let’s go to </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">MainActivity</span></strong><span class="koboSpan" id="kobo.182.1"> and create </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">NavHost</span></strong><span class="koboSpan" id="kobo.184.1"> and a few composable functions, </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">AppScreen()</span></strong><span class="koboSpan" id="kobo.186.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">AppNavigation()</span></strong><span class="koboSpan" id="kobo.188.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">BottomNavigationBar()</span></strong><span class="koboSpan" id="kobo.190.1">. </span><span class="koboSpan" id="kobo.190.2">Each nav controller must be associated with a single nav host composable because it connects the controller with a nav graph that helps specify the </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">composable directions:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.192.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.193.1">
fun AppNavigation(navController: NavHostController) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.194.1">
    NavHost(navController, startDestination =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.195.1">
    Destination.Transaction.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.196.1">
        composable(Destination.Transaction.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.197.1">
            Transaction()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.198.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.199.1">
        composable(Destination.Budgets.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.200.1">
            Budget()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.201.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.202.1">
        composable(Destination.Tasks.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.203.1">
            Tasks()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.204.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.205.1">
        composable(Destination.Settings.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.206.1">
            Settings()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.207.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.208.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.209.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.210.1">Finally, let’s go </span><a id="_idIndexMarker287"/><span class="koboSpan" id="kobo.211.1">ahead and glue everything together by creating another composable </span><a id="_idIndexMarker288"/><span class="koboSpan" id="kobo.212.1">function and calling it </span><strong class="source-inline"><span class="koboSpan" id="kobo.213.1">AppScreen()</span></strong><span class="koboSpan" id="kobo.214.1">. </span><span class="koboSpan" id="kobo.214.2">We will call this function inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">setContent</span></strong><span class="koboSpan" id="kobo.216.1"> in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">onCreate()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.218.1"> function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.219.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.220.1">
fun AppScreen() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.221.1">
    val navController = rememberNavController()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.222.1">
    Scaffold(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.223.1">
        bottomBar = {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.224.1">
            BottomNavigationBar(navController =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.225.1">
            navController, appItems =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.226.1">
            Destination.toList) },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.227.1">
        content = { padding -&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.228.1">
            Box(modifier = Modifier.padding(padding))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.229.1">
            {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.230.1">
                AppNavigation(navController =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.231.1">
                    navController)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.232.1">
            }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.233.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.234.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.235.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.236.1">Then, call this </span><a id="_idIndexMarker289"/><span class="koboSpan" id="kobo.237.1">created function inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">setContent{}</span></strong><span class="koboSpan" id="kobo.239.1">; the import should be </span><strong class="source-inline"><span class="koboSpan" id="kobo.240.1">import androidx.activity.compose.setContent</span></strong><span class="koboSpan" id="kobo.241.1">, based on the fact that </span><a id="_idIndexMarker290"/><span class="koboSpan" id="kobo.242.1">sometimes it might happen that you import the wrong one. </span><span class="koboSpan" id="kobo.242.2">Run the application. </span><span class="koboSpan" id="kobo.242.3">You will notice a screen with four tabs, and when you select a tab, the selected one gets highlighted, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.243.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.244.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer056">
<span class="koboSpan" id="kobo.246.1"><img alt="Figure 4.3 – The bottom na﻿vigation bar" src="image/Figure_4.3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.247.1">Figure 4.3 – The bottom na</span><a id="_idTextAnchor198"/><span class="koboSpan" id="kobo.248.1">vigation bar</span></p>
<h2 id="_idParaDest-115"><a id="_idTextAnchor199"/><span class="koboSpan" id="kobo.249.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.250.1">In Compose, navigation has a crucial term called </span><strong class="bold"><span class="koboSpan" id="kobo.251.1">route</span></strong><span class="koboSpan" id="kobo.252.1">. </span><span class="koboSpan" id="kobo.252.2">The key is the string that defines the pathway to your </span><a id="_idIndexMarker291"/><span class="koboSpan" id="kobo.253.1">composable. </span><span class="koboSpan" id="kobo.253.2">The key basically is the source of truth – or think of it as a deep link that takes you to a specific destination, and each destination should have a </span><span class="No-Break"><span class="koboSpan" id="kobo.254.1">unique route.</span></span></p>
<p><span class="koboSpan" id="kobo.255.1">Furthermore, each </span><a id="_idIndexMarker292"/><span class="koboSpan" id="kobo.256.1">destination should consist of a unique key route. </span><span class="koboSpan" id="kobo.256.2">In our example, we added </span><a id="_idIndexMarker293"/><span class="koboSpan" id="kobo.257.1">icons and a title. </span><span class="koboSpan" id="kobo.257.2">The icons, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.258.1">Figure 4</span></em></span><em class="italic"><span class="koboSpan" id="kobo.259.1">.3</span></em><span class="koboSpan" id="kobo.260.1">, show what the bottom navigation entails, and the title describes the specific screen we are browsing at that exact time. </span><span class="koboSpan" id="kobo.260.2">In addition, these are optional and only needed for </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">some routes.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">NavController()</span></strong><span class="koboSpan" id="kobo.263.1"> is the main API for our navigation component, and it keeps track of every back stack entry for the composables that make up the screens in our application and the state of each screen. </span><span class="koboSpan" id="kobo.263.2">We created this using </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">rememberNavController</span></strong><span class="koboSpan" id="kobo.265.1">: as we mentioned in the previous chapter, </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">remember</span></strong><span class="koboSpan" id="kobo.267.1">, as the name suggests, remembers the value; in this instance, we are </span><span class="No-Break"><span class="koboSpan" id="kobo.268.1">remembering </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">NavController</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.271.1">
val navController = rememberNavController()</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">NavHost()</span></strong><span class="koboSpan" id="kobo.273.1">, on the other hand, requires the </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">NavController()</span></strong><span class="koboSpan" id="kobo.275.1"> previously created through </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">rememberNavController()</span></strong><span class="koboSpan" id="kobo.277.1"> and the destination route of the entry point of our graph. </span><span class="koboSpan" id="kobo.277.2">In addition, </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">rememberNavController()</span></strong><span class="koboSpan" id="kobo.279.1"> returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.280.1">NavHostController</span></strong><span class="koboSpan" id="kobo.281.1">, which is a subclass of </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">NavController()</span></strong><span class="koboSpan" id="kobo.283.1"> that offers some additional APIs that </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">NavHost</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.285.1"> requires.</span></span></p>
<p><span class="koboSpan" id="kobo.286.1">This is very </span><a id="_idIndexMarker294"/><span class="koboSpan" id="kobo.287.1">similar to how </span><a id="_idIndexMarker295"/><span class="koboSpan" id="kobo.288.1">Android developers build navigation before composing fragments. </span><span class="koboSpan" id="kobo.288.2">The steps include creating a bottom navigation menu with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">menu</span></strong><span class="koboSpan" id="kobo.290.1"> items, as shown in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">code block:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.292.1">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;menu &gt;
    &lt;item
        android:id="@+id/transaction_home"
        android:icon="@drawable/card"
        android:title="@string/transactions"/&gt;
    &lt;item
         android:id="@+id/budget_home"
         android:icon="@drawable/ic_shopping_basket_black_
             24dp"
         android:title="@string/budgets"
    /&gt;
...
</span><span class="koboSpan" id="kobo.292.2">&lt;/menu&gt;</span></pre>
<p><span class="koboSpan" id="kobo.293.1">Then, we </span><a id="_idIndexMarker296"/><span class="koboSpan" id="kobo.294.1">create another </span><a id="_idIndexMarker297"/><span class="koboSpan" id="kobo.295.1">resource in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">navigation</span></strong><span class="koboSpan" id="kobo.297.1"> package that points to the </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">screens (fragments):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.299.1">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;navigation 
    app:startDestination="@+id/transaction_home"&gt;
    &lt;fragment
        android:id="@+id/transaction_home"
        android:name="com.fragments.TransactionsFragment"
        android:label="@string/title_transcation"
        tools:layout="@layout/fragment_transactions" &gt;
        &lt;action
            android:id="@+id/action_transaction_home_to_
                budget_home"
            app:destination="@id/budget_home" /&gt;
    &lt;/fragment&gt;
    &lt;fragment
        android:id="@+id/budget_home"
        android:name="com.fragments.BudgetsFragment"
        android:label="@string/title_budget"
        tools:layout="@layout/fragment_budget" &gt;
        &lt;action
            android:id="@+id/action_budget_home_to_tasks_
                home"
            app:destination="@id/tasks_home" /&gt;
    &lt;/frag</span><a id="_idTextAnchor200"/><span class="koboSpan" id="kobo.300.1">ment&gt;
&lt;/navigation&gt;</span></pre>
<h1 id="_idParaDest-116"><a id="_idTextAnchor201"/><span class="koboSpan" id="kobo.301.1">Navigating to a new screen in Compose</span></h1>
<p><span class="koboSpan" id="kobo.302.1">We will build a register screen prompt on our login page for registering first-time users of our application. </span><span class="koboSpan" id="kobo.302.2">This is </span><a id="_idIndexMarker298"/><span class="koboSpan" id="kobo.303.1">a standard pattern because we need </span><a id="_idIndexMarker299"/><span class="koboSpan" id="kobo.304.1">to save the user’s credentials so that the next time they log in to our application, we just log them in witho</span><a id="_idTextAnchor202"/><span class="koboSpan" id="kobo.305.1">ut </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">registering again.</span></span></p>
<h2 id="_idParaDest-117"><a id="_idTextAnchor203"/><span class="koboSpan" id="kobo.307.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.308.1">You should have completed the previous recipe, </span><em class="italic"><span class="koboSpan" id="kobo.309.1">Implementing a bottom navigation bar using navigation destinations</span></em><span class="koboSpan" id="kobo.310.1">, before getting s</span><a id="_idTextAnchor204"/><span class="koboSpan" id="kobo.311.1">tarted with </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">this one.</span></span></p>
<h2 id="_idParaDest-118"><a id="_idTextAnchor205"/><span class="koboSpan" id="kobo.313.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.314.1">In this recipe, we will need to use our </span><strong class="source-inline"><span class="koboSpan" id="kobo.315.1">SampleLogin</span></strong><span class="koboSpan" id="kobo.316.1"> project and add a new screen that users can navigate to if it is their first time using the application. </span><span class="koboSpan" id="kobo.316.2">This is a typical use case in </span><span class="No-Break"><span class="koboSpan" id="kobo.317.1">many applications:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.318.1">Open your </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">SampleLogin</span></strong><span class="koboSpan" id="kobo.320.1"> project, create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">sealed</span></strong><span class="koboSpan" id="kobo.322.1"> class, and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">Destination</span></strong><span class="koboSpan" id="kobo.324.1">. </span><span class="koboSpan" id="kobo.324.2">To also ensure we maintain great packaging, add this class to </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">util</span></strong><span class="koboSpan" id="kobo.326.1">. </span><span class="koboSpan" id="kobo.326.2">Also, just like the bottom bar, we will have a route, but this time, we do not need any icons </span><span class="No-Break"><span class="koboSpan" id="kobo.327.1">or titles:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.328.1">
sealed class Destination (val route: String){</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.329.1">
    object Main: Destination("main_route")</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.330.1">
    object LoginScreen: Destination("login_screen")</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.331.1">
    object RegisterScreen:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.332.1">
        Destination("register_screen")</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.333.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.334.1">After creating the destinations, we now need to go ahead and add clickable text in </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">LoginContent</span></strong><span class="koboSpan" id="kobo.336.1"> to ask users whether it is their first time using the application. </span><span class="koboSpan" id="kobo.336.2">They </span><a id="_idIndexMarker300"/><span class="koboSpan" id="kobo.337.1">should click </span><strong class="bold"><span class="koboSpan" id="kobo.338.1">Register</span></strong><span class="koboSpan" id="kobo.339.1">. </span><span class="koboSpan" id="kobo.339.2">Then, we can </span><a id="_idIndexMarker301"/><span class="koboSpan" id="kobo.340.1">navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">RegisterContent</span></strong><span class="koboSpan" id="kobo.342.1">. </span><span class="koboSpan" id="kobo.342.2">You can open the project by checking out the </span><em class="italic"><span class="koboSpan" id="kobo.343.1">Technical requirements</span></em><span class="koboSpan" id="kobo.344.1"> section if you need to refer to </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">any step:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.346.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.347.1">
fun LoginContent(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.348.1">
    ...</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.349.1">
    onRegister: () -&gt; Unit</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.350.1">
) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.351.1">
ClickableText(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.352.1">
    modifier = Modifier.padding(top = 12.dp),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.353.1">
    text = AnnotatedString(stringResource(id =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.354.1">
        R.string.register)),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.355.1">
    onClick = { onRegister.invoke() },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.356.1">
    style = TextStyle(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.357.1">
       colorResource(id = R.color.purple_700),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.358.1">
       fontSize = 16.sp</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.359.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.360.1">
)</span></pre></li>
<li><span class="koboSpan" id="kobo.361.1">Now, when you click on </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">ClickableText</span></strong><span class="koboSpan" id="kobo.363.1">, our clickable text is text that you can click, and it will help users navigate to the registration screen via </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">First-time user? </span><span class="koboSpan" id="kobo.364.2">Sign UP</span></strong><span class="koboSpan" id="kobo.365.1">. </span><span class="koboSpan" id="kobo.365.2">Once you click on this, it should navigate to a different screen where users can now sign up, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.366.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.367.1">.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer057">
<span class="koboSpan" id="kobo.369.1"><img alt="Figure 4.4 – A new Register screen" src="image/Figure_4.4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.370.1">Figure 4.4 – A new Register screen</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.371.1">For the </span><strong class="bold"><span class="koboSpan" id="kobo.372.1">Register</span></strong><span class="koboSpan" id="kobo.373.1"> screen, you can get the entire code in the </span><em class="italic"><span class="koboSpan" id="kobo.374.1">Technical requirements</span></em><span class="koboSpan" id="kobo.375.1"> section. </span><span class="koboSpan" id="kobo.375.2">We </span><a id="_idIndexMarker302"/><span class="koboSpan" id="kobo.376.1">will reuse the user input fields </span><a id="_idIndexMarker303"/><span class="koboSpan" id="kobo.377.1">that we created and just change </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">the text:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.379.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.380.1">
fun PasswordInputField(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.381.1">
    text: String</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.382.1">
) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.383.1">
    OutlinedTextField(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.384.1">
        label = { Text(text = text) },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.385.1">
...</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.386.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.387.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">MainActivity</span></strong><span class="koboSpan" id="kobo.389.1">, we </span><a id="_idIndexMarker304"/><span class="koboSpan" id="kobo.390.1">will have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.391.1">Navigation()</span></strong><span class="koboSpan" id="kobo.392.1"> function, </span><a id="_idIndexMarker305"/><span class="No-Break"><span class="koboSpan" id="kobo.393.1">as follows:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.394.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.395.1">
fun Navigation(navController: NavHostController) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.396.1">
    NavHost(navController, startDestination =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.397.1">
    Destination.LoginScreen.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.398.1">
        composable(Destination.LoginScreen.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.399.1">
            LoginContentScreen(loginViewModel =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.400.1">
                hiltViewModel(),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.401.1">
            onRegisterNavigateTo = {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.402.1">
                navController.navigate(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.403.1">
                    Destination.RegisterScreen.route)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.404.1">
            })</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.405.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.406.1">
        composable(Destination.RegisterScreen.route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.407.1">
            RegisterContentScreen(registerViewModel =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.408.1">
                hiltViewModel())</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.409.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.410.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.411.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.412.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">PasswordInputField</span></strong><span class="koboSpan" id="kobo.414.1">, we will name each input appropriately </span><span class="No-Break"><span class="koboSpan" id="kobo.415.1">for reusability:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.416.1">
PasswordInputField(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.417.1">
    text = stringResource(id = R.string.password),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.418.1">
    authState = uiState,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.419.1">
    onValueChanged = onPasswordUpdated,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.420.1">
    passwordToggleVisibility =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.421.1">
        passwordToggleVisibility)</span></pre></li>
<li><span class="koboSpan" id="kobo.422.1">Moreover, you </span><a id="_idIndexMarker306"/><span class="koboSpan" id="kobo.423.1">can also navigate to the previous </span><strong class="bold"><span class="koboSpan" id="kobo.424.1">Sign in</span></strong><span class="koboSpan" id="kobo.425.1"> screen </span><a id="_idIndexMarker307"/><span class="koboSpan" id="kobo.426.1">by clicking on the hardware </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.427.1">Back</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.428.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.429.1">Finally, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">setContent</span></strong><span class="koboSpan" id="kobo.431.1">, we will need to update the code to accommodate the </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">new navigation:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.433.1">
@AndroidEntryPoint</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.434.1">
class MainActivity : ComponentActivity() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.435.1">
    override fun onCreate(savedInstanceState: Bundle?)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.436.1">
    {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.437.1">
        super.onCreate(savedInstanceState)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.438.1">
        setContent {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.439.1">
            SampleLoginTheme {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.440.1">
                // A surface container using the</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.441.1">
                   'background' color from the theme</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.442.1">
                Surface(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.443.1">
                    modifier = Modifier.fillMaxSize(),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.444.1">
                    color =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.445.1">
                       MaterialTheme.colors.background</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.446.1">
                ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.447.1">
                    val navController =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.448.1">
                        rememberNavController()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.449.1">
                    Navigation(navController =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.450.1">
                        navController)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.451.1">
                }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.452.1">
            }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.453.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.454.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.455.1">
}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.456.1">Run the code and click on the </span><strong class="bold"><span class="koboSpan" id="kobo.457.1">Sign up</span></strong><span class="koboSpan" id="kobo.458.1"> text, and you should n</span><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.459.1">ow be taken to a </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">new screen.</span></span></p>
<h2 id="_idParaDest-119"><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.461.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.462.1">You will notice that we have just created a different destination entry point, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">ClickableText</span></strong><span class="koboSpan" id="kobo.464.1"> is used to navigate to the newly created screen. </span><span class="koboSpan" id="kobo.464.2">Furthermore, in order to navigate to a composable destination in the nav graph, you must use </span><strong class="source-inline"><span class="koboSpan" id="kobo.465.1">navController.navigate(Destination.RegisterScreen.route)</span></strong><span class="koboSpan" id="kobo.466.1">, and as mentioned earlier, the string represents the </span><span class="No-Break"><span class="koboSpan" id="kobo.467.1">destination route.</span></span></p>
<p><span class="koboSpan" id="kobo.468.1">In addition, </span><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">navigate()</span></strong><span class="koboSpan" id="kobo.470.1"> adds our destination to the back stack by default, but if we need to </span><a id="_idIndexMarker308"/><span class="koboSpan" id="kobo.471.1">modify the behavior, we can easily do that by </span><a id="_idIndexMarker309"/><span class="koboSpan" id="kobo.472.1">adding additional nav options to our </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.473.1">navigate()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.474.1"> call.</span></span></p>
<p><span class="koboSpan" id="kobo.475.1">Suppose you want to work with animations when navigating. </span><span class="koboSpan" id="kobo.475.2">In that case, you can easily do that by </span><a id="_idIndexMarker310"/><span class="koboSpan" id="kobo.476.1">using the Accompanist library – </span><a href="https://github.com/google/accompanist"><span class="koboSpan" id="kobo.477.1">https://github.com/google/accompanist</span></a><span class="koboSpan" id="kobo.478.1"> –which offers a group of libraries that aim to supplement Jetpack Compose with features that are required mainly by developers and are not </span><span class="No-Break"><span class="koboSpan" id="kobo.479.1">available yet.</span></span></p>
<p><span class="koboSpan" id="kobo.480.1">You can utilize </span><strong class="source-inline"><span class="koboSpan" id="kobo.481.1">enterTransition</span></strong><span class="koboSpan" id="kobo.482.1">, which explicitly specifies the animation that runs when you navigate to a particular destination, whereas </span><strong class="source-inline"><span class="koboSpan" id="kobo.483.1">exitTransition</span></strong><span class="koboSpan" id="kobo.484.1"> does </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">the opposite:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.486.1">
AnimatedNavHost(
    modifier = Modifier
        .padding(padding),
    navController = navController,
    startDestination = Destination.LoginScreen.route,
    route = Destination.LoginScreen.route,
    enterTransition = { fadeIn(animationSpec = tween(2000)) },
    exitTransition = { fadeOut(animationSpec = tween(200))
    }
)</span></pre>
<p><span class="koboSpan" id="kobo.487.1">You can also </span><a id="_idIndexMarker311"/><span class="koboSpan" id="kobo.488.1">use </span><strong class="source-inline"><span class="koboSpan" id="kobo.489.1">popEnterTransition</span></strong><span class="koboSpan" id="kobo.490.1">, which </span><a id="_idIndexMarker312"/><span class="koboSpan" id="kobo.491.1">specifies the animation that runs when the destination re-enters the screen after going through </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">popBackStack()</span></strong><span class="koboSpan" id="kobo.493.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">popExitTranstion</span></strong><span class="koboSpan" id="kobo.495.1">, which does </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">the opposite.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.497.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.498.1">It is crucial to note a good practice that becomes relevant for hoisting the state is when you expose events from your composable functions to callers in your application that know how to handle that logic properly. </span><span class="koboSpan" id="kobo.498.2">In addition, under-the-hood </span><a id="_idTextAnchor208"/><span class="koboSpan" id="kobo.499.1">navigatio</span><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.500.1">n is </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">all state-managed.</span></span></p>
<h2 id="_idParaDest-120"><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.502.1">See also</span></h2>
<p><span class="koboSpan" id="kobo.503.1">For more </span><a id="_idIndexMarker313"/><span class="koboSpan" id="kobo.504.1">about </span><strong class="source-inline"><span class="koboSpan" id="kobo.505.1">AnimatedNavHost</span></strong><span class="koboSpan" id="kobo.506.1">, you can find details </span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">here: </span></span><a href="https://google.github.io/accompanist/navigation-animation/"><span class="No-Break"><span class="koboSpan" id="kobo.508.1">https://google.github.io/</span><span id="_idTextAnchor211"/><span class="koboSpan" id="kobo.509.1">accompanist/navigation-animation/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.510.1">.</span></span></p>
<h1 id="_idParaDest-121"><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.511.1">Navigating with arguments</span></h1>
<p><span class="koboSpan" id="kobo.512.1">Passing data </span><a id="_idIndexMarker314"/><span class="koboSpan" id="kobo.513.1">between destinations is very vital in Android development. </span><span class="koboSpan" id="kobo.513.2">The new Jetpack navigation allows developers to attach data to a navigation operation by defining an argument for a destination. </span><span class="koboSpan" id="kobo.513.3">Readers will learn how to pass data between destinations </span><span class="No-Break"><span class="koboSpan" id="kobo.514.1">using arguments.</span></span></p>
<p><span class="koboSpan" id="kobo.515.1">A good use case is, say, you load an API with data and want to show more description on the data you just displayed; you can navigate with u</span><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.516.1">nique arguments to the </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">next screen.</span></span></p>
<h2 id="_idParaDest-122"><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.518.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.519.1">We will explore the most common interview project requirement, which is to fetch data from an API and display one screen and add an additional screen for </span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">extra points.</span></span></p>
<p><span class="koboSpan" id="kobo.521.1">Let’s assume the API is the GitHub API, and you want to display all organizations. </span><span class="koboSpan" id="kobo.521.2">Then, you want to navigate to another screen and see the numbe</span><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.522.1">r of repositories each </span><span class="No-Break"><span class="koboSpan" id="kobo.523.1">company has.</span></span></p>
<h2 id="_idParaDest-123"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.524.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.525.1">For this recipe, we will look at an example of navigating with arguments as a concept since there is little more to do other than create the basic arguments to pass to utilize an already-built project – </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">SampleLogin</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.528.1">Let’s go ahead and create </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">SearchScreen</span></strong><span class="koboSpan" id="kobo.530.1">, and this screen will have just a search function, </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">EditText</span></strong><span class="koboSpan" id="kobo.532.1">, and a column to display the data returned from </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">an API:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.534.1">
SearchScreen(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.535.1">
    viewModel = hiltViewModel(),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.536.1">
    navigateToRepositoryScreen = { orgName -&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.537.1">
        navController.navigate(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.538.1">
            Destination.BrowseRepositoryScreen.route +</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.539.1">
            "/" + orgName</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.540.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.541.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.542.1">
)</span></pre></li>
<li><span class="koboSpan" id="kobo.543.1">And now, when setting up navigation to </span><strong class="source-inline"><span class="koboSpan" id="kobo.544.1">BrowseRepository</span></strong><span class="koboSpan" id="kobo.545.1">, you will need to add the </span><a id="_idIndexMarker315"/><span class="koboSpan" id="kobo.546.1">following code. </span><span class="koboSpan" id="kobo.546.2">This piece of code is for passing a mandatory data parameter from one screen to another, but adding the example of passing an optional argument; a default value will help </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">the user:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.548.1">
composable(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.549.1">
    route = Destination.BrowseRepositoryScreen.route +</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.550.1">
            "/{org_name}",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.551.1">
    arguments = listOf(navArgument("org_name") { type</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.552.1">
        = NavType.StringType }),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.553.1">
    enterTransition = { scaleIn(tween(700)) },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.554.1">
    exitTransition = { scaleOut(tween(700)) },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.555.1">
) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.556.1">
    BrowseRepositoryScreen(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.557.1">
        viewModel = hiltViewModel(),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.558.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.559.1">
}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.560.1">We also use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">enter</span></strong><span class="koboSpan" id="kobo.562.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">exit</span></strong><span class="koboSpan" id="kobo.564.1"> transition for animations. </span><span class="koboSpan" id="kobo.564.2">In this recipe, we have just touched on the concept of navigating with arguments, wh</span><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.565.1">ich can be applied to </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">many projects.</span></span></p>
<h2 id="_idParaDest-124"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.567.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.568.1">When you want to pass an argument to the destination, which is something that might be required, you need </span><a id="_idIndexMarker316"/><span class="koboSpan" id="kobo.569.1">to explicitly attach it to the route when initiating the </span><strong class="source-inline"><span class="koboSpan" id="kobo.570.1">navigate</span></strong><span class="koboSpan" id="kobo.571.1"> function call, as you can see in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.573.1">
navController.navigate(Destination.BrowseScreen.route + "/" + orgName)</span></pre>
<p><span class="koboSpan" id="kobo.574.1">We added an argument placeholder to our route, similar to how we added arguments to a deep link when using the base </span><span class="No-Break"><span class="koboSpan" id="kobo.575.1">navigation library.</span></span></p>
<p><span class="koboSpan" id="kobo.576.1">There is also a list of what the navigation library supports; if you have a different use case, you can look into this </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">document: </span></span><a href="https://developer.android.com/guide/navigation/navigation-pass-data#supported_argument_types"><span class="No-Break"><span class="koboSpan" id="kobo.578.1">https://developer.android.com/guide/navigation/navigation-pass-data#supported_argument_types</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.579.1">.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer058">
<span class="koboSpan" id="kobo.580.1"><img alt="Figure 4.5 – Navigation support argument t﻿ype (credit: developers.android.com)" src="image/Figure_4.5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.581.1">Figure 4.5 – Navigation support argument t</span><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.582.1">ype (credit: developers.android.com)</span></p>
<h2 id="_idParaDest-125"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.583.1">There’s more…</span></h2>
<p><span class="koboSpan" id="kobo.584.1">There is more to learn about navigation and, for a more thorough way to look into how you can navigate with arguments, retrieve complex data when navigating, and add additional </span><a id="_idIndexMarker317"/><span class="koboSpan" id="kobo.585.1">arguments in depth, you can read more </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">here: </span></span><a href="https://developer.android.com/jetpack/compose/navigation"><span class="No-Break"><span class="koboSpan" id="kobo.587.1">https://developer.an</span><span id="_idTextAnchor221"/><span class="koboSpan" id="kobo.588.1">droid.com/jetpack/compose/navigation</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.589.1">.</span></span></p>
<h1 id="_idParaDest-126"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.590.1">Creating deep links for destinations</span></h1>
<p><span class="koboSpan" id="kobo.591.1">In Modern Android </span><a id="_idIndexMarker318"/><span class="koboSpan" id="kobo.592.1">Development, deep links are very vital. </span><span class="koboSpan" id="kobo.592.2">A link that helps you navigate directly to a specific destination within an app is called a </span><strong class="bold"><span class="koboSpan" id="kobo.593.1">deep link</span></strong><span class="koboSpan" id="kobo.594.1">. </span><span class="koboSpan" id="kobo.594.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.595.1">Navigation</span></strong><span class="koboSpan" id="kobo.596.1"> component lets you create two types of deep links: </span><strong class="bold"><span class="koboSpan" id="kobo.597.1">explicit</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.598.1">and </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.599.1">implicit</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.601.1">Compose navigation </span><a id="_idIndexMarker319"/><span class="koboSpan" id="kobo.602.1">supports implicit deep links, which can be part of your Composable functions. </span><span class="koboSpan" id="kobo.602.2">It is also fair </span><a id="_idIndexMarker320"/><span class="koboSpan" id="kobo.603.1">to mention there is no huge difference between how y</span><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.604.1">ou would handle these using </span><span class="No-Break"><span class="koboSpan" id="kobo.605.1">XML layouts.</span></span></p>
<h2 id="_idParaDest-127"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.606.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.607.1">Since we don’t have a deep link use case in our application, in this recipe, we will look into how we can utilize the knowledge by learni</span><a id="_idTextAnchor225"/><span class="koboSpan" id="kobo.608.1">ng how to implement implicit </span><span class="No-Break"><span class="koboSpan" id="kobo.609.1">deep links.</span></span></p>
<h2 id="_idParaDest-128"><a id="_idTextAnchor226"/><span class="koboSpan" id="kobo.610.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.611.1">You can </span><a id="_idIndexMarker321"/><span class="koboSpan" id="kobo.612.1">match deep links using a </span><strong class="bold"><span class="koboSpan" id="kobo.613.1">Uniform Resource Locator</span></strong><span class="koboSpan" id="kobo.614.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.615.1">URI</span></strong><span class="koboSpan" id="kobo.616.1">), intent actions, or </span><strong class="bold"><span class="koboSpan" id="kobo.617.1">Multipurpose Internet Mail Extensions</span></strong><span class="koboSpan" id="kobo.618.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.619.1">MIME</span></strong><span class="koboSpan" id="kobo.620.1">) types. </span><span class="koboSpan" id="kobo.620.2">Furthermore, you can easily specify multiple types that match for </span><a id="_idIndexMarker322"/><span class="koboSpan" id="kobo.621.1">a deep link single but remember that the URI argument comparison is always prioritized, followed by the intent action, then the </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">MIME type.</span></span></p>
<p><span class="koboSpan" id="kobo.623.1">Compose has made it easier for developers to work with deep links. </span><span class="koboSpan" id="kobo.623.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.624.1">composable</span></strong><span class="koboSpan" id="kobo.625.1"> function accepts a parameter list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.626.1">NavDeepLinks</span></strong><span class="koboSpan" id="kobo.627.1">, which can be easily created using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.628.1">navDeepLink</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.629.1"> method:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.630.1">We will start by making the deep link externally available by adding the appropriate intent filter to our </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">AndroidManifest.xml</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.632.1"> file:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.633.1">
&lt;activity&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.634.1">
    &lt;intent-filter&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.635.1">
      ...</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.636.1">
      &lt;data android:scheme="https"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.637.1">
      android:host="www.yourcompanieslink.com" /&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.638.1">
    &lt;/intent-filter&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.639.1">
&lt;/activity&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.640.1">Now in our </span><strong class="source-inline"><span class="koboSpan" id="kobo.641.1">composable</span></strong><span class="koboSpan" id="kobo.642.1"> function, we can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.643.1">deepLinks</span></strong><span class="koboSpan" id="kobo.644.1"> parameter, specify the list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">navDeepLink</span></strong><span class="koboSpan" id="kobo.646.1">, and then pass the </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">URI pattern:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.648.1">
val uri = "www.yourcompanieslink.com"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.649.1">
composable(deepLinks = listOf(navDeepLink { uriPattern = "$uri/{id}" }))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.650.1">
{...}</span></pre></li>
<li><span class="koboSpan" id="kobo.651.1">Please note that navigation will automatically deep-link into that composable when another application triggers the </span><span class="No-Break"><span class="koboSpan" id="kobo.652.1">deep link.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.653.1">Many </span><a id="_idIndexMarker323"/><span class="koboSpan" id="kobo.654.1">applications still use </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">launchMode</span></strong><span class="koboSpan" id="kobo.656.1"> when navigating. </span><span class="koboSpan" id="kobo.656.2">This is when using the Navigation Jetpack component, as seen in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">code snippet:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.658.1">
override fun onNewIntent(intent: Intent) {
    super.onNewIntent(intent)
    navigationController.handleDeepLink(intent)
}</span></pre>
<ol>
<li value="4"><span class="koboSpan" id="kobo.659.1">Finally, you can also utilize </span><strong class="source-inline"><span class="koboSpan" id="kobo.660.1">deepLinkPendingIntent</span></strong><span class="koboSpan" id="kobo.661.1"> like any other </span><strong class="source-inline"><span class="koboSpan" id="kobo.662.1">PendingIntent</span></strong><span class="koboSpan" id="kobo.663.1"> to start your Android application at the deep </span><span class="No-Break"><span class="koboSpan" id="kobo.664.1">link destination.</span></span></li>
</ol>
<p class="callout-heading"><span class="koboSpan" id="kobo.665.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.666.1">When triggering an implicit deep link, the back stack state depends on when the implicit intent was launched with </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">Intent.FLAG_ACTIVITY_NEW_TASK</span></strong><span class="koboSpan" id="kobo.668.1">. </span><span class="koboSpan" id="kobo.668.2">Furthermore, if the flag is set, the back stack task is cleared and then replac</span><a id="_idTextAnchor227"/><span class="koboSpan" id="kobo.669.1">ed with the intended deep </span><span class="No-Break"><span class="koboSpan" id="kobo.670.1">link destination.</span></span></p>
<h2 id="_idParaDest-129"><a id="_idTextAnchor228"/><span class="koboSpan" id="kobo.671.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.672.1">In Android development, a deep link refers to a specific destination for the application. </span><span class="koboSpan" id="kobo.672.2">For instance, when you invoke the deep link, the link opens up your application’s corresponding destination when a user clicks on the </span><span class="No-Break"><span class="koboSpan" id="kobo.673.1">specified link.</span></span></p>
<p><span class="koboSpan" id="kobo.674.1">This refers to </span><a id="_idIndexMarker324"/><span class="koboSpan" id="kobo.675.1">where the link is meant to lead once clicked. </span><span class="koboSpan" id="kobo.675.2">The explicit deep link is a single instance that uses </span><strong class="source-inline"><span class="koboSpan" id="kobo.676.1">PendingIntent</span></strong><span class="koboSpan" id="kobo.677.1"> to take users to a specific location within your application. </span><span class="koboSpan" id="kobo.677.2">A good use case</span><a id="_idTextAnchor229"/><span class="koboSpan" id="kobo.678.1"> is when using notifications or </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">app widgets.</span></span></p>
<h2 id="_idParaDest-130"><a id="_idTextAnchor230"/><span class="koboSpan" id="kobo.680.1">There’s more…</span></h2>
<p><span class="koboSpan" id="kobo.681.1">There is more to learn about deep links; for instance, how to create an explicit deep link. </span><span class="koboSpan" id="kobo.681.2">You can learn more about deep links </span><span class="No-Break"><span class="koboSpan" id="kobo.682.1">here: </span></span><a href="https://developer.android.com/training/app-links/deep-linking"><span class="No-Break"><span class="koboSpan" id="kobo.683.1">https://developer.android.com/training/app-links/deep-linking</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.684.1">.</span></span></p>
<h1 id="_idParaDest-131"><a id="_idTextAnchor231"/><span class="koboSpan" id="kobo.685.1">Writing tests for navigation</span></h1>
<p><span class="koboSpan" id="kobo.686.1">Now that we </span><a id="_idIndexMarker325"/><span class="koboSpan" id="kobo.687.1">have created a new screen for our </span><strong class="source-inline"><span class="koboSpan" id="kobo.688.1">SampleLogin</span></strong><span class="koboSpan" id="kobo.689.1"> project, we </span><a id="_idIndexMarker326"/><span class="koboSpan" id="kobo.690.1">need to fix the broken test and add new tests for the UI package. </span><span class="koboSpan" id="kobo.690.2">If you can recall, in </span><a href="B18827_03.xhtml#_idTextAnchor137"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.691.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.692.1">, </span><em class="italic"><span class="koboSpan" id="kobo.693.1">Handling the UI State in Jetpack Compose and Using Hilt</span></em><span class="koboSpan" id="kobo.694.1">, we did unit tests and not UI tests. </span><span class="koboSpan" id="kobo.694.2">This means after adding all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.695.1">ViewModel</span></strong><span class="koboSpan" id="kobo.696.1"> instances, our UI tests are now broken. </span><span class="koboSpan" id="kobo.696.2">In this recipe, we will fi</span><a id="_idTextAnchor232"/><span class="koboSpan" id="kobo.697.1">x the failing tests and add a </span><span class="No-Break"><span class="koboSpan" id="kobo.698.1">navigation test.</span></span></p>
<h2 id="_idParaDest-132"><a id="_idTextAnchor233"/><span class="koboSpan" id="kobo.699.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.700.1">In this recipe, you do not need to create any new project;</span><a id="_idTextAnchor234"/><span class="koboSpan" id="kobo.701.1"> use the already-created </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">project, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.703.1">SampleLogin</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">.</span></span></p>
<h2 id="_idParaDest-133"><a id="_idTextAnchor235"/><span class="koboSpan" id="kobo.705.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.706.1">You can apply these concepts to test the bottom navigation bar we created. </span><span class="koboSpan" id="kobo.706.2">Hence, we will not be writing tests for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.707.1">BottomNavigationBarSample</span></strong><span class="koboSpan" id="kobo.708.1"> project. </span><span class="koboSpan" id="kobo.708.2">Open </span><strong class="source-inline"><span class="koboSpan" id="kobo.709.1">SampleLogin</span></strong><span class="koboSpan" id="kobo.710.1"> and navigate to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.711.1">androidTest</span></strong><span class="koboSpan" id="kobo.712.1"> package. </span><span class="koboSpan" id="kobo.712.2">We will add tests here for the new </span><strong class="source-inline"><span class="koboSpan" id="kobo.713.1">RegisterScreen()</span></strong><span class="koboSpan" id="kobo.714.1"> a Composable function, and also fix the </span><span class="No-Break"><span class="koboSpan" id="kobo.715.1">broken tests:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.716.1">Let’s open </span><a id="_idIndexMarker327"/><span class="koboSpan" id="kobo.717.1">the </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">LoginContentTest</span></strong><span class="koboSpan" id="kobo.719.1"> class. </span><span class="koboSpan" id="kobo.719.2">Now, let’s </span><a id="_idIndexMarker328"/><span class="koboSpan" id="kobo.720.1">move the </span><strong class="source-inline"><span class="koboSpan" id="kobo.721.1">LoginContent</span></strong><span class="koboSpan" id="kobo.722.1"> class to a helper class that we will create to help us with testing the </span><span class="No-Break"><span class="koboSpan" id="kobo.723.1">UI logic:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.724.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.725.1">
fun contentLoginForTest(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.726.1">
    uiState: AuthenticationState =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.727.1">
    AuthenticationState(),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.728.1">
    onUsernameUpdated : (String) -&gt; Unit = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.729.1">
    onPasswordUpdated :(String) -&gt; Unit = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.730.1">
    onLogin : () -&gt; Unit = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.731.1">
    passwordToggleVisibility: (Boolean) -&gt; Unit = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.732.1">
    onRegisterNavigateTo: () -&gt; Unit = {}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.733.1">
) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.734.1">
    LoginContent(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.735.1">
        uiState = uiState,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.736.1">
        onUsernameUpdated = onUsernameUpdated,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.737.1">
        onPasswordUpdated = onPasswordUpdated,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.738.1">
        onLogin = onLogin,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.739.1">
        passwordToggleVisibility =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.740.1">
            passwordToggleVisibility,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.741.1">
        onRegister = onRegisterNavigateTo</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.742.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.743.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.744.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.745.1">LoginContentTest</span></strong><span class="koboSpan" id="kobo.746.1"> class, now, we will replace </span><strong class="source-inline"><span class="koboSpan" id="kobo.747.1">LoginContent</span></strong><span class="koboSpan" id="kobo.748.1"> with the newly created </span><strong class="source-inline"><span class="koboSpan" id="kobo.749.1">contentLoginForTest()</span></strong><span class="koboSpan" id="kobo.750.1"> function inside the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.751.1">initCompose</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.752.1"> function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.753.1">
private fun initCompose() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.754.1">
    composeRuleTest.activity.setContent {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.755.1">
        SampleLoginTheme {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.756.1">
            contentLoginForTest()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.757.1">
            launchRegisterScreenWithNavGraph()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.758.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.759.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.760.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.761.1">Now that </span><a id="_idIndexMarker329"/><span class="koboSpan" id="kobo.762.1">we have fixed the tests, we can now add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.763.1">test</span></strong><span class="koboSpan" id="kobo.764.1"> tag </span><a id="_idIndexMarker330"/><span class="koboSpan" id="kobo.765.1">for our newly created </span><span class="No-Break"><span class="koboSpan" id="kobo.766.1">clickable, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.767.1">TextView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.768.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.769.1">
const val REGISTER_USER = "register_user"</span></pre></li>
<li><span class="koboSpan" id="kobo.770.1">Once that is done, we now need to create </span><strong class="source-inline"><span class="koboSpan" id="kobo.771.1">lateint var NavHostController</span></strong><span class="koboSpan" id="kobo.772.1">, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.773.1">launchRegisterScreenWithNavGraph</span></strong><span class="koboSpan" id="kobo.774.1"> function to help us set up </span><span class="No-Break"><span class="koboSpan" id="kobo.775.1">the navigation:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.776.1">
private fun launchRegisterScreenWithNavGraph() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.777.1">
    composeRuleTest.activity.setContent {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.778.1">
        SampleLoginTheme {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.779.1">
            navController = rememberNavController()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.780.1">
            NavHost(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.781.1">
                navController = navController,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.782.1">
                startDestination =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.783.1">
                    Destination.LoginScreen.route</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.784.1">
            ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.785.1">
                composable(Destination.LoginScreen</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.786.1">
                .route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.787.1">
                LoginContentScreen(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.788.1">
                onRegisterNavigateTo = {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.789.1">
                    navController.navigate(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.790.1">
                        Destination.RegisterScreen</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.791.1">
                        .route)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.792.1">
                }, loginViewModel = hiltViewModel())</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.793.1">
                }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.794.1">
                composable(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.795.1">
                    Destination.RegisterScreen</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.796.1">
                    .route) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.797.1">
                        RegisterContentScreen(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.798.1">
                            hiltViewModel())</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.799.1">
                    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.800.1">
            }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.801.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.802.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.803.1">
}</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.804.1">You can call the </span><a id="_idIndexMarker331"/><span class="koboSpan" id="kobo.805.1">created function inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.806.1">initCompose</span></strong><span class="koboSpan" id="kobo.807.1"> function </span><a id="_idIndexMarker332"/><span class="koboSpan" id="kobo.808.1">or in the new test function that we </span><span class="No-Break"><span class="koboSpan" id="kobo.809.1">will create.</span></span></p>
<ol>
<li value="5"><span class="koboSpan" id="kobo.810.1">Now, let’s create a test function and name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">assertRegisterClickableButtonNavigatesToRegisterScreen()</span></strong><span class="koboSpan" id="kobo.812.1">. </span><span class="koboSpan" id="kobo.812.2">In this test case, we will set our route and then use </span><strong class="source-inline"><span class="koboSpan" id="kobo.813.1">assert</span></strong><span class="koboSpan" id="kobo.814.1"> when the correct </span><strong class="source-inline"><span class="koboSpan" id="kobo.815.1">TextView</span></strong><span class="koboSpan" id="kobo.816.1"> is clicked; we will navigate to the </span><span class="No-Break"><span class="koboSpan" id="kobo.817.1">correct destination:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.818.1">
@Test</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.819.1">
fun assertRegisterClickableButtonNavigatesToRegisterScreen() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.820.1">
    initCompose()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.821.1">
    composeRuleTest.onNodeWithTag(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.822.1">
        TestTags.LoginContent.REGISTER_USER)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.823.1">
            .performClick(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.824.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.825.1">
    val route =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.826.1">
        navController.currentDestination?.route</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.827.1">
    assert(route.equals(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.828.1">
        Destination.RegisterScreen.route))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.829.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.830.1">Finally, run </span><a id="_idIndexMarker333"/><span class="koboSpan" id="kobo.831.1">the test, and the UI test should pass,</span><a id="_idTextAnchor236"/><span class="koboSpan" id="kobo.832.1"> as </span><a id="_idIndexMarker334"/><span class="koboSpan" id="kobo.833.1">seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.834.1">Figure 4</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.835.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">:</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer059">
<span class="koboSpan" id="kobo.837.1"><img alt="Figure 4.6 – Tests passing" src="image/Figure_4.6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.838.1">Figure 4.6 – Tests passing</span></p>
<h2 id="_idParaDest-134"><a id="_idTextAnchor237"/><span class="koboSpan" id="kobo.839.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.840.1">We created the </span><strong class="source-inline"><span class="koboSpan" id="kobo.841.1">contentLoginForTest</span></strong><span class="koboSpan" id="kobo.842.1"> that can help us verify our navigation. </span><span class="koboSpan" id="kobo.842.2">That is, when a user </span><a id="_idIndexMarker335"/><span class="koboSpan" id="kobo.843.1">enters a valid username and password, they can </span><a id="_idIndexMarker336"/><span class="koboSpan" id="kobo.844.1">navigate to a home screen. </span><span class="koboSpan" id="kobo.844.2">Furthermore, we created </span><strong class="source-inline"><span class="koboSpan" id="kobo.845.1">launchRegisterScreenWithNavGraph()</span></strong><span class="koboSpan" id="kobo.846.1">, a helper function that creates the testing graph for our navigation </span><span class="No-Break"><span class="koboSpan" id="kobo.847.1">test case.</span></span></p>
<p><span class="koboSpan" id="kobo.848.1">If you are using </span><strong class="source-inline"><span class="koboSpan" id="kobo.849.1">FragmentScenario</span></strong><span class="koboSpan" id="kobo.850.1">, there are great tips for testing your navigation that you </span><a id="_idIndexMarker337"/><span class="koboSpan" id="kobo.851.1">can see </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">here: </span></span><a href="https://developer.android.com/guide/navigation/navigation-testing"><span class="No-Break"><span class="koboSpan" id="kobo.853.1">https://developer.android.com/guide/navigation/navigation-testing</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.854.1">.</span></span></p>
</div>
</body></html>