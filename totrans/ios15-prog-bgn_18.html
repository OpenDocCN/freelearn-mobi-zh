<html><head></head><body>
		<div><h1 id="_idParaDest-208"><em class="italic"><a id="_idTextAnchor213"/>Chapter 15</em>: Getting Started with Table Views</h1>
			<p>In the previous chapter, you configured the <code>ExploreViewController</code> class, the view controller for the <code>ExploreData.plist</code> in a collection view.</p>
			<p>In this chapter, you'll start by learning about table views and table view controllers. You'll implement a table view programmatically (which means implementing it using code instead of storyboards) using a playground, to understand how table views work. Next, you'll create a table view controller for the <code>.plist</code> file from scratch to hold a list of locations, create a data manager class to read data from the <code>.plist</code> file, and configure the table view controller to get data from the data manager and provide it to the table view. The <strong class="bold">Locations</strong> screen will then display a list of restaurant locations.</p>
			<p>By the end of this chapter, you'll have learned how to create <code>.plist</code> files, and how to implement table view controllers. This will enable you to implement <code>.plist</code> files and table views that use <code>.plist</code> files for a data source in your own apps.</p>
			<p>The following topics will be covered in this chapter:</p>
			<ul>
				<li>Understanding table views</li>
				<li>Creating the <code>LocationViewController</code> class</li>
				<li>Adding location data for the table view</li>
				<li>Creating the <code>LocationDataManager</code> class</li>
			</ul>
			<h1 id="_idParaDest-209"><a id="_idTextAnchor214"/>Technical requirements</h1>
			<p>You will start by working in a playground, then you will continue working on the <code>LetsEat</code> project that you modified in the previous chapter.</p>
			<p>The playground and completed Xcode project for this chapter are in the <code>Chapter15</code> folder of the code bundle for this book, which can be downloaded here: </p>
			<p><a href="https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition">https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition</a></p>
			<p>Check out the following video to see the code in action:</p>
			<p><a href="https://bit.ly/3obiApY">https://bit.ly/3obiApY</a></p>
			<p>Let's begin by learning more about how a table view works by implementing a view controller that manages a table view in a playground. Create a new playground and name it <code>TableViewBasics</code>. You can type in and run all the code shown in the upcoming sections as you go along.</p>
			<h1 id="_idParaDest-210"><a id="_idTextAnchor215"/>Understanding table views</h1>
			<p>The <em class="italic">Let's Eat</em> app<a id="_idIndexMarker707"/> uses a table view in the <strong class="bold">Locations</strong> screen to display a list of restaurant locations. A table view presents table view cells using rows arranged in a single column.</p>
			<p class="callout-heading">Important Information</p>
			<p class="callout">To learn more about table views, visit <a href="https://developer.apple.com/documentation/uikit/uitableview">https://developer.apple.com/documentation/uikit/uitableview</a>.</p>
			<p>The data displayed by a table view is normally provided by a view controller. A view controller providing data for a table view must conform to the <code>UITableViewDataSource</code> protocol. This protocol declares a list of methods that tells the table view how many cells to display and what to display in each cell.</p>
			<p class="callout-heading">Important Information</p>
			<p class="callout">To learn more about the <code>UITableViewDataSource</code> protocol, visit <a href="https://developer.apple.com/documentation/uikit/uitableviewdatasource">https://developer.apple.com/documentation/uikit/uitableviewdatasource</a>.</p>
			<p>To provide user interaction, a view controller for a table view must also conform to the <code>UITableViewDelegate</code> protocol, which declares a list of methods which are triggered when a user interacts with the table view.</p>
			<p class="callout-heading">Important Information</p>
			<p class="callout">To learn more about the <code>UITableViewDelegate</code> protocol, visit <a href="https://developer.apple.com/documentation/uikit/uitableviewdelegate">https://developer.apple.com/documentation/uikit/uitableviewdelegate</a>.</p>
			<p>To learn how table views work, you'll implement a view controller subclass that controls a table view in your <code>TableViewBasics</code> playground. Since there is no storyboard in the playground, you can't add the UI elements using the library, as you did in the previous chapters. Instead, you will do everything programmatically. Follow these steps:</p>
			<ol>
				<li>Open your <code>TableViewBasics</code> playground that you have created at the beginning <a id="_idIndexMarker708"/>of this chapter. At the very top of the playground, remove the <code>var</code> statement and add an <code>import PlaygroundSupport</code> statement.<p>Your playground should now contain the following:</p><pre>import UIKit
<code>import</code> statement imports the API for creating iOS apps. The second allows the playground to display a live view, which you will use to display the table view.</p></li>
				<li>Add the following code after the <code>import</code> statements to declare the <code>TableViewExampleController</code> class:<pre>class TableViewExampleController: UIViewController {
}</pre><p>This class is a subclass of <code>UIViewController</code>, a class that Apple provides to manage views on the screen.</p></li>
				<li>Add the following code inside the curly braces to declare a table view property and an array property to the <code>TableViewExampleController</code> class:<pre>class TableViewExampleController: UIViewController {
<code>tableView</code> property is an optional property that will be assigned a <code>UITableView</code> instance. The <code>names</code> array is the model object that will be used to provide data to the table view. </p><p>A table view<a id="_idIndexMarker709"/> displays a single column of rows on the screen, and each row contains a table view cell instance. Similar to collection views, table views need to know how many rows to display and what to put in each row. To provide this information to the table view, you will make the <code>TableViewExampleController</code> class conform to the <code>UITableViewDataSourceProtocol</code>.</p><p>This protocol has two required methods:</p><ul><li><code>tableview(_:numberOfRowsInSection:)</code> is called by the table view to determine how many table view cells to display. </li><li><code>tableView(_:cellForRowAt:)</code> is called by the table view to determine what to display in each table view cell.</li></ul></li>
			</ol>
			<p>Let's add some code to make the <code>TableViewExampleController</code> class conform to the <code>UITableViewDataSource</code> protocol. Follow these steps:</p>
			<ol>
				<li value="1">To make the <code>TableViewExampleController</code> class adopt the <code>UITableViewDataSource</code> protocol, type a comma after the superclass name and then type <code>UITableViewDataSource</code>. Your code should look like this:<pre>class TableViewExampleController: UIViewController<strong class="bold">, UITableViewDataSource</strong> {</pre></li>
				<li>An error will appear because you haven't implemented the two required methods. Click the error icon:<div><img src="img/Figure_15.01_B17469.jpg" alt="Figure 15.1: Editor area showing error icon&#13;&#10;"/></div><p class="figure-caption">Figure 15.1: Editor area showing error icon</p></li>
				<li>The error<a id="_idIndexMarker710"/> message that appears states that the required methods for the <code>UITableViewDataSource</code> protocol are missing. Click the <strong class="bold">Fix</strong> button to add the required method stubs to the class:<div><img src="img/Figure_15.02_B17469.jpg" alt="Figure 15.2: Error explanation and Fix button&#13;&#10;"/></div><p class="figure-caption">Figure 15.2: Error explanation and Fix button</p></li>
				<li>Verify that your code looks like this:<pre>class TableViewExampleController: UIViewController,
UITableViewDataSource {
<strong class="bold">   func tableView(_ tableView: UITableView,</strong>
<strong class="bold">   numberOfRowsInSection section: Int) -&gt; Int {</strong>
<strong class="bold">      code</strong>
<strong class="bold">   }</strong>
<strong class="bold">   func tableView(_ tableView: UITableView,</strong>
<strong class="bold">   cellForRowAt indexPath: IndexPath) -&gt;</strong>
<strong class="bold">   UITableViewCell {</strong>
<strong class="bold">      code</strong>
<strong class="bold">   }</strong>
   var tableView: UITableView?
   var names: [String] = ["Divij","Aamir","Shubham"]
}</pre></li>
				<li>In a class<a id="_idIndexMarker711"/> definition, convention dictates that properties are declared at the top before any method declarations. Rearrange the code so that the property declarations are at the top, as follows:<pre>class TableViewExampleController: UIViewController,
UITableViewDataSource {
<strong class="bold">   var tableView: UITableView?</strong>
<strong class="bold">   var names: [String] = ["Divij","Aamir","Shubham"]</strong>
   func tableView(_ tableView: UITableView, 
   numberOfRowsInSection section: Int) -&gt; Int {</pre></li>
				<li>To make the table view display a row for each element inside the <code>names</code> array, click the word <code>code</code> inside the <code>tableView(_:numberOfRowsInSection:)</code> method definition and type in <code>names.count</code>. The completed method should look like this:<pre>func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
   <code>names.count</code> returns the number of elements inside the <code>names</code> array. Since there are three names in it, this will make the table view display three rows.</p></li>
				<li>To make the table view display names in each cell, click the word <code>code</code> inside the <code>tableView(_:cellForRowAt:)</code> method<a id="_idIndexMarker712"/> definition and type the following:<pre>func tableView(_ tableView: UITableView, cellForRowAt 
indexPath: IndexPath) -&gt; UITableViewCell {
<code>cell</code>. Imagine you have 1,000 items to display in a table view. You don't need 1,000 rows containing 1,000 table view cells—you only need just enough to fill the screen. Table view cells that scroll off the top of the screen can be reused to display items that appear at the bottom of the screen. To make sure you are using the right type of cell, you set the reuse identifier to <code>Cell</code>. This reuse identifier will be registered with the table view later.</p><pre>let name = names[indexPath.row]</pre><p>The <code>indexPath</code> value locates the row in the table view. The first row has an <code>indexPath</code> containing section <code>0</code> and row <code>0</code>. <code>indexPath.row</code> returns <code>0</code> for the first row, so <code>name</code> is assigned the first element in the <code>names</code> array.</p><pre>cell.textLabel?.text = name</pre><p>This assigns <code>name</code> to the <code>text</code> property of the table view cell's <code>textLabel</code>.</p><pre>return cell</pre><p>This returns the table view cell, which is then displayed on the screen.</p><p>This method is executed for each row in the table view.</p></li>
				<li>Verify that<a id="_idIndexMarker713"/> your <code>TableViewExampleController</code> class looks like this:<pre>class TableViewExampleController: UIViewController, 
UITableViewDataSource {
   var tableView: UITableView?
   var names: [String] = ["Divij","Aamir","Shubham"]
   func tableView(_ tableView: UITableView, 
   numberOfRowsInSection section: Int) -&gt; Int {
      names.count
   }
   func tableView(_ tableView: UITableView,
   cellForRowAt indexPath: IndexPath) -&gt;
   UITableViewCell {
      let cell = tableView.dequeueReusableCell(
      withIdentifier: "Cell", for:indexPath) 
      let name = names[indexPath.row]
      cell.textLabel?.text = name 
      return cell
   }
}</pre></li>
			</ol>
			<p>You have completed the implementation of the <code>TableViewExampleController</code> class. Now you will write a method, <code>createTableView()</code>, to create an instance of it. Type in the following code after the property declarations to declare and define the <code>createTableView()</code> method:</p>
			<pre>func createTableView() {
   self.tableView = UITableView(frame: CGRect(x: 0, y: 0,
   width: self.view.frame.width, 
   height: self.view.frame.height)) 
   self.tableView?.dataSource = self 
   self.tableView?.backgroundColor = .white 
   self.tableView?.register(UITableViewCell.self,
   forCellReuseIdentifier: "Cell")
   self.view.addSubview(self.tableView!)
}</pre>
			<p>Let's break <a id="_idIndexMarker714"/>this down:</p>
			<pre>self.tableView = UITableView(frame: CGRect(x: 0, y: 0, width: self.view.frame.width, height: self.view.frame.height))</pre>
			<p>This creates a new instance of <code>UITableView</code> that is exactly the same size as its enclosing view, and assigns it to <code>tableView</code>.</p>
			<pre>self.tableView?.dataSource = self</pre>
			<p>This tells the table view that its data source is an instance of <code>TableViewExampleController</code>. </p>
			<pre>self.tableView?.backgroundColor = .white</pre>
			<p>This sets the table view's background color to white.</p>
			<pre>self.tableView?.register(UITableViewCell.self, forCellReuseIdentifier: "Cell")</pre>
			<p>This sets the reuse identifier for the table view cells to <code>"Cell"</code>. This reuse identifier will be used in the <code>tableView(_:cellForRowAt:)</code> method to identify the cells that can be reused.</p>
			<pre>self.view.addSubview(self.tableView!)</pre>
			<p>This adds the table view as a subview to the view of the <code>TableViewExampleController</code> instance.</p>
			<p>Now you have to call this method. The <code>UIViewController</code> class has a method, <code>viewDidLoad()</code>, that is called when its view is loaded. This method is inherited by the <code>TableViewExampleController</code> class, and you'll override it to call <code>createTableView()</code>. Follow these steps:</p>
			<ol>
				<li value="1">Type in the<a id="_idIndexMarker715"/> following code, before the <code>createTableView()</code> method:<pre>override func viewDidLoad() { 
   super.viewDidLoad() 
   self.view.bounds = CGRect(x: 0, y: 0, 
   width: 375, height: 667)
   createTableView()
}</pre><p>This sets the size of the live view, creates a table view and adds it as a subview to the view of the <code>TableViewExampleController</code> instance. The data source methods are then used to determine how many table view cells to display, as well as what to put in each table view cell. <code>tableView(_:numberOfRowsInSection:)</code> returns <code>3</code>, so three rows are displayed. <code>tableView(_:cellForRowAt:)</code> sets the text of each cell to the corresponding name in the <code>names</code> array.</p></li>
				<li> Verify that your<a id="_idIndexMarker716"/> completed code looks like this:<pre>import UIKit
import PlaygroundSupport
class TableViewExampleController: UIViewController, 
UITableViewDataSource {
   var tableView: UITableView?
   var names: [String] = ["Divij","Aamir","Shubham"]
   override func viewDidLoad() { 
      super.viewDidLoad() 
      self.view.bounds = CGRect(x: 0, y: 0, 
      width: 375, height: 667)
      createTableView()
   }
   func createTableView() {
      self.tableView = UITableView(frame: CGRect(x: 0,
      y: 0, width: self.view.frame.width, height: 
      self.view.frame.height)) 
      self.tableView?.dataSource = self 
      self.tableView?.backgroundColor = .white
      self.tableView?.register(UITableViewCell.self, 
      forCellReuseIdentifier: "Cell")
      self.view.addSubview(self.tableView!)
   }
   func tableView(_ tableView: UITableView, 
   numberOfRowsInSection section: Int) -&gt; Int {
      names.count
   }
   func tableView(_ tableView: UITableView,
   cellForRowAt indexPath: IndexPath) -&gt;
   UITableViewCell {
      let cell = tableView.dequeueReusableCell(
      withIdentifier: "Cell", for:indexPath)
      let name = names[indexPath.row]
      cell.textLabel?.text = name 
      return cell
   }
}</pre></li>
				<li>Type the following<a id="_idIndexMarker717"/> after all the other code in the playground:<pre>PlaygroundPage.current.liveView = TableViewExampleController()</pre><p>This command creates an instance of <code>TableViewExampleController</code> and displays its view in the playground's live view.</p></li>
				<li>Run the playground. If you don't see the table view, click the Adjust Editor Options button:<div><img src="img/Figure_15.03_B17469.jpg" alt="Figure 15.3: Adjust Editor Options button&#13;&#10;"/></div><p class="figure-caption">Figure 15.3: Adjust Editor Options button</p></li>
				<li>Make<a id="_idIndexMarker718"/> sure <strong class="bold">Live View</strong> is selected from the pop-up menu:<div><img src="img/Figure_15.04_B17469.jpg" alt="Figure 15.4: Adjust Editor Options menu with Live View selected&#13;&#10;"/></div><p class="figure-caption">Figure 15.4: Adjust Editor Options menu with Live View selected</p></li>
				<li>You will see the <a id="_idIndexMarker719"/>table view displaying a table with three rows containing names, as shown:</li>
			</ol>
			<div><div><img src="img/Figure_15.05_B17469.jpg" alt="Figure 15.5: Playground Live View showing table view with names&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.5: Playground Live View showing table view with names</p>
			<p>Great! Now that you know how table views work, let's complete the implementation for the <strong class="bold">Locations</strong> screen. You'll start by creating a view controller for this screen in the next section, so that<a id="_idIndexMarker720"/> it can manage what the table view will display.</p>
			<h1 id="_idParaDest-211"><a id="_idTextAnchor216"/>Creating the LocationViewController class</h1>
			<p>As shown in the <a id="_idIndexMarker721"/>app tour in <a href="B17469_09_Final_VK_ePub.xhtml#_idTextAnchor133"><em class="italic">Chapter 9</em></a>, <em class="italic">Setting Up the User Interface</em>, the <code>locationCell</code>. Referring to the <strong class="bold">Model-View-Controller</strong> (<strong class="bold">MVC</strong>) design pattern, you<a id="_idIndexMarker722"/> have completed the required views, but you haven't completed the controller or the model yet.</p>
			<p>At the moment, when you click the <strong class="bold">LOCATION</strong> button in the <strong class="bold">Explore</strong> screen, an empty table view is displayed:</p>
			<div><div><img src="img/Figure_15.06_B17469.jpg" alt="Figure 15.6: iOS Simulator showing Locations screen from your app&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.6: iOS Simulator showing Locations screen from your app</p>
			<p>You will create <a id="_idIndexMarker723"/>the <code>LocationViewController</code> class as the view controller for the <strong class="bold">Locations</strong> screen, add an outlet for the table view to it, and configure it as the table view's data source and delegate. Follow these steps:</p>
			<ol>
				<li value="1">Open your <code>LetsEat</code> project from the previous chapter. Create a new folder, <code>Location</code>, inside your project by right-clicking the <code>LetsEat</code> folder and choosing <code>View</code> and <code>Model</code>, inside the <code>Location</code> folder. When you're done, you will see the following folder structure:<div><img src="img/Figure_15.07_B17469.jpg" alt="Figure 15.7: Project navigator showing Location folder and subfolders&#13;&#10;"/></div><p class="figure-caption">Figure 15.7: Project navigator showing Location folder and subfolders</p></li>
				<li>Right-click <a id="_idIndexMarker724"/>on the <code>Location</code> folder and select <strong class="bold">New File</strong>.</li>
				<li><strong class="bold">iOS</strong> should already be selected. Choose <strong class="bold">Cocoa Touch Class</strong> and click <strong class="bold">Next</strong>.</li>
				<li>Configure the class with the following details:<p><code>LocationViewController</code></p><p><code>UIViewController </code></p><p><code>Unchecked</code> </p><p><code>Swift</code></p><p>Click <strong class="bold">Next</strong>.</p></li>
				<li>Click <code>LocationViewController</code> file appears in the Project navigator.</li>
			</ol>
			<p>The <code>LocationViewController</code> file has been created, with the <code>LocationViewController</code> class declaration inside it. Now you'll set the identity of the view controller scene that's presented when you tap the <strong class="bold">LOCATION</strong> button to this class. Follow these steps:</p>
			<ol>
				<li value="1">Open the <code>Main</code> storyboard file in the Project navigator.</li>
				<li>Choose the <a id="_idIndexMarker725"/>view controller scene that's presented when you click on the <code>LocationViewController</code>. Note the name of the scene will change to <strong class="bold">Location View Controller Scene</strong>:</li>
			</ol>
			<div><div><img src="img/Figure_15.08_B17469.jpg" alt="Figure 15.8: Identity inspector settings for Location View Controller Scene&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.8: Identity inspector settings for Location View Controller Scene</p>
			<p>Cool! In the next section, let's connect the table view to an outlet in the <code>LocationViewController</code> class. By doing this, the <code>LocationViewController</code> instance <a id="_idIndexMarker726"/>for the <strong class="bold">Locations</strong> screen will be able to manage the table view.</p>
			<h2 id="_idParaDest-212"><a id="_idTextAnchor217"/>Connecting the table view to the LocationViewController class</h2>
			<p>Currently, the <code>LocationViewController</code> instance <a id="_idIndexMarker727"/>for <a id="_idIndexMarker728"/>the <code>LocationViewController</code> class and assign the table view to it. Follow these steps:</p>
			<ol>
				<li value="1">Click the Navigator and Inspector buttons to hide the Navigator and Inspector areas, if necessary.</li>
				<li>Click the Adjust Editor Options button and choose <strong class="bold">Assistant</strong> from the menu.</li>
				<li>In the <code>Main</code> storyboard file, click the table view in the document outline. The assistant editor should be set to <strong class="bold">Automatic &gt; LocationViewController.swift</strong> as shown:<p class="figure-caption"> </p><div><img src="img/Figure_15.09_B17469.jpg" alt="Figure 15.9: Assistant editor bar showing LocationViewController.swift&#13;&#10;"/></div><p class="figure-caption">Figure 15.9: Assistant editor bar showing LocationViewController.swift</p></li>
				<li><em class="italic">Ctrl + Drag</em> from <code>viewDidLoad()</code>:<p class="figure-caption"> </p><div><img src="img/Figure_15.10_B17469.jpg" alt="Figure 15.10: Editor area showing LocationViewController file contents&#13;&#10;"/></div><p class="figure-caption">Figure 15.10: Editor area showing LocationViewController file contents</p></li>
				<li>In the pop-up menu, enter <code>tableView</code> in the <strong class="bold">Name</strong> field and click <strong class="bold">Connect</strong>:<div><img src="img/Figure_15.11_B17469.jpg" alt="Figure 15.11: Pop-up dialog box for tableView outlet creation&#13;&#10;"/></div><p class="figure-caption">Figure 15.11: Pop-up dialog box for tableView outlet creation</p></li>
				<li>Verify <a id="_idIndexMarker731"/>the <code>tableView</code> outlet<a id="_idIndexMarker732"/> has been added to the <code>LocationViewController</code> class and connected to the table view in the storyboard:<div><img src="img/Figure_15.12_B17469.jpg" alt="Figure 15.12: Editor area showing LocationViewController file contents&#13;&#10;"/></div><p class="figure-caption">Figure 15.12: Editor area showing LocationViewController file contents</p></li>
				<li> Click the <strong class="bold">x</strong> button to close the assistant editor:</li>
			</ol>
			<div><div><img src="img/Figure_15.13_B17469.jpg" alt="Figure 15.13: Assistant editor close button&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.13: Assistant editor close button</p>
			<p>You've connected the table view to an outlet in the <code>LocationViewController</code> class. In order for a table view to display data and respond to user interaction, the <code>LocationViewController</code> class has to conform to the <code>UITableViewDataSource</code> and <code>UITableViewDelegate</code> protocols and implement <a id="_idIndexMarker733"/>the <a id="_idIndexMarker734"/>required methods. You will do that in the next section.</p>
			<h2 id="_idParaDest-213"><a id="_idTextAnchor218"/>Adding the data source and delegate methods</h2>
			<p>A view<a id="_idIndexMarker735"/> controller for a table view has to<a id="_idIndexMarker736"/> adopt the <code>UITableViewDataSource</code> and <code>UITableViewDelegate</code> protocols, as well as implement the required methods to allow data display and user interaction. In this section, you'll connect <code>LocationViewController</code> to the table view's <code>dataSource</code> and <code>delegate</code> outlets and implement the required data source methods. You will implement delegate methods in <a href="B17469_17_Final_VK_ePub.xhtml#_idTextAnchor248"><em class="italic">Chapter 17</em></a><em class="italic">, Getting Started with JSON Files</em>. Follow these steps:</p>
			<ol>
				<li value="1">Click the Navigator and Inspector buttons to show the Navigator and Inspector areas, if necessary. </li>
				<li>In the <code>Main</code> storyboard file, make sure you have the table view selected in the document outline. Click the Connections inspector button. Click and drag from the <code>dataSource</code> and <code>delegate</code> outlets to the <code>LocationViewController</code> icon in the document outline:<div><img src="img/Figure_15.14_B17469.jpg" alt="Figure 15.14: Connections Inspector showing outlets for the LocationViewController class&#13;&#10;"/></div><p class="figure-caption">Figure 15.14: Connections Inspector showing outlets for the LocationViewController class</p><p>This<a id="_idIndexMarker737"/> connects<a id="_idIndexMarker738"/> the table view to outlets to the <code>LocationViewController</code> class.</p></li>
				<li>Verify the <code>dataSource</code> and <code>delegate</code> properties of the table view have been connected to outlets in the <code>LocationViewController</code> class:</li>
			</ol>
			<div><div><img src="img/Figure_15.15_B17469.jpg" alt="Figure 15.15: Connections Inspector with datasource and delegate outlets set&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.15: Connections Inspector with datasource and delegate outlets set</p>
			<p>Next, you will make <code>LocationViewController</code> conform to the <code>UITableViewDataSource</code> protocol and implement the required methods for this protocol. Follow these steps:</p>
			<ol>
				<li value="1">Click the <code>LocationViewController</code> file in the Project navigator and remove all the commented code in the <code>LocationViewController</code> class definition so that only the following is left:<pre>class LocationViewController: UIViewController {
   @IBOutlet weak var tableView: UITableView!
   override func viewDidLoad(){
      super.viewDidLoad()
   }
}</pre></li>
				<li>To<a id="_idIndexMarker739"/> make <code>LocationViewController</code> adopt<a id="_idIndexMarker740"/> the <code>UITableViewDataSource</code> protocol, type a comma after the superclass name, <code>UIViewController</code>, and type in <code>UITableViewDataSource</code>. When you are done, your code should look like this:<pre>class LocationViewController: UIViewController<strong class="bold">, </strong>
<strong class="bold">UITableViewDataSource</strong> {</pre></li>
				<li>An error will appear because you haven't implemented the two required methods yet. Click the error icon to see the error message:<div><img src="img/Figure_15.16_B17469.jpg" alt="Figure 15.16: Editor area showing error icon&#13;&#10;"/></div><p class="figure-caption">Figure 15.16: Editor area showing error icon</p></li>
				<li>Click the <strong class="bold">Fix</strong> button to add the required method stubs to the class:<div><img src="img/Figure_15.17_B17469.jpg" alt="Figure 15.17: Error explanation and Fix button&#13;&#10;"/></div><p class="figure-caption">Figure 15.17: Error explanation and Fix button</p></li>
				<li>Rearrange the <a id="_idIndexMarker741"/>code <a id="_idIndexMarker742"/>so that the property declarations and the <code>viewDidLoad()</code> method are at the top. This follows general iOS development coding conventions and it makes your code easier to maintain. When you're done, verify that your code looks as follows:<pre>class LocationViewController: UIViewController, 
UITableViewDataSource {
   @IBOutlet var tableView: UITableView!
   override func viewDidLoad() {
      super.viewDidLoad()
   }
   func tableView(_ tableView: UITableView,
   numberOfRowsInSection section: Int) -&gt; Int {
      code
   }
   func tableView(_ tableView: UITableView,
   cellForRowAt indexPath: IndexPath) -&gt;
   UITableViewCell {
      code
   }
}</pre></li>
				<li>Inside the first required method, click the word <code>code</code> and type <code>10</code>. This will make the table view display 10 rows. The complete method should look like this:<pre>func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
   <strong class="bold">10</strong>
}</pre></li>
				<li>Inside<a id="_idIndexMarker743"/> the <a id="_idIndexMarker744"/>second required method, click the word <code>code</code> and type the following to make the table view display the string <code>"A Cell"</code> in each row:<pre>func tableView(_ tableView: UITableView, cellForRowAt 
indexPath: IndexPath) -&gt; UITableViewCell {
<code>locationCell</code> identifier and assigns it to <code>cell</code>. You set this identifier in the <code>Main</code> storyboard file in <a href="B17469_12_Final_VK_ePub.xhtml#_idTextAnchor182"><em class="italic">Chapter 12</em></a>, <em class="italic">Modifying and Configuring Cells</em>.</p><pre>cell.textLabel?.text = "A Cell"</pre><p>This assigns a string, <code>"A Cell"</code> to the <code>text</code> property of the table view cell's <code>textLabel</code>.</p><pre>return cell</pre><p>This returns <a id="_idIndexMarker745"/>the <a id="_idIndexMarker746"/>cell, which is then displayed on the screen. This process is repeated for the number of cells that are given in the first method, which, in this case, is 10.</p></li>
			</ol>
			<p>Build and run your project. Click the <code>A Cell</code> as shown:</p>
			<div><div><img src="img/Figure_15.18_B17469.jpg" alt="Figure 15.18: iOS Simulator showing table view cells&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.18: iOS Simulator showing table view cells</p>
			<p>You have completed the implementation of the <code>LocationsViewController</code> class, and your<a id="_idIndexMarker747"/> table <a id="_idIndexMarker748"/>view is now displaying table view cells. Great! Now that your table view's view controller has been set up, let's create some model objects in the next section so that you can provide data for it.</p>
			<h1 id="_idParaDest-214"><a id="_idTextAnchor219"/>Adding location data for the table view</h1>
			<p>At this point, you <a id="_idIndexMarker749"/>have created and configured the <code>LocationViewController</code> class. An instance of this class will act as the data source for the table view in the <code>.plist</code> file that contains location data, but instead of using an existing <code>.plist</code> file, you'll create one from scratch and add location data to it. Follow these steps:</p>
			<ol>
				<li value="1">Right-click the <code>Model</code> folder in the <code>Location</code> folder and choose <strong class="bold">New File</strong>.</li>
				<li><code>proper</code> into the filter field; <strong class="bold">Property List </strong>will appear in the window. Choose <strong class="bold">Property List</strong> and click <strong class="bold">Next</strong>.</li>
				<li>Name the file <code>Locations</code>, and click <strong class="bold">Create</strong>.</li>
			</ol>
			<p>The <code>Locations.plist</code> file has been added to the project. In the previous chapter, you've seen how <code>ExploreData.plist</code> stores data as an array of dictionaries. You will configure <code>Locations.plist</code> so that it stores data for the <strong class="bold">Locations</strong> screen in the same format, and then add all the restaurant locations to it. Follow these steps:</p>
			<ol>
				<li value="1">Click on <code>Locations.plist</code> and change it to <strong class="bold">Array</strong>. Note that the disclosure triangle on the left should be pointing down. Click the <strong class="bold">+</strong> button:<div><img src="img/Figure_15.19_B17469.jpg" alt="Figure 15.19: Editor area showing Locations.plist contents&#13;&#10;"/></div><p class="figure-caption">Figure 15.19: Editor area showing Locations.plist contents</p></li>
				<li>A new item, <strong class="bold">Item 0</strong>, will be added to the array. Change the type to <strong class="bold">Dictionary</strong>. Click the disclosure triangle to make it point down. Click the <strong class="bold">+</strong> button:<div><img src="img/Figure_15.20_B17469.jpg" alt="Figure 15.20: Locations.plist with Item 0 added&#13;&#10;"/></div><p class="figure-caption">Figure 15.20: Locations.plist with Item 0 added</p></li>
				<li>A new <a id="_idIndexMarker750"/>item, <strong class="bold">New Item</strong>, will be added to the <strong class="bold">Item 0</strong> dictionary. Click the <strong class="bold">+</strong> button:<div><img src="img/Figure_15.21_B17469.jpg" alt="Figure 15.21: Locations.plist with New item added&#13;&#10;"/></div><p class="figure-caption">Figure 15.21: Locations.plist with New item added</p></li>
				<li>A second item will be added to the <code>city</code> and the value to <code>Aspen</code>. For the second item, change the key to <code>state</code> and the value to <code>CO</code>:<div><img src="img/Figure_15.22_B17469.jpg" alt="Figure 15.22: Locations.plist with city and state added to Item 0&#13;&#10;"/></div><p class="figure-caption">Figure 15.22: Locations.plist with city and state added to Item 0</p></li>
				<li>Click the disclosure triangle next to the <strong class="bold">Item 0</strong> dictionary to collapse it:<div><img src="img/Figure_15.23_B17469.jpg" alt="Figure 15.23: Locations.plist with Item 0 collapsed&#13;&#10;"/></div><p class="figure-caption">Figure 15.23: Locations.plist with Item 0 collapsed</p></li>
				<li>Select <strong class="bold">Item 0</strong> and<a id="_idIndexMarker751"/> press <em class="italic">Command + C</em> on the keyboard to copy it and <em class="italic">Command + V</em> to paste. You will see a new item, <strong class="bold">Item 1</strong>:<div><img src="img/Figure_15.24_B17469.jpg" alt="Figure 15.24: Locations.plist with Item 0 copied and pasted&#13;&#10;"/></div><p class="figure-caption">Figure 15.24: Locations.plist with Item 0 copied and pasted</p></li>
				<li>Click the disclosure triangle next to the <code>Boston</code> and the state to <code>MA</code>:<div><img src="img/Figure_15.25_B17469.jpg" alt="Figure 15.25: Locations.plist with Item 1 configured&#13;&#10;"/></div><p class="figure-caption">Figure 15.25: Locations.plist with Item 1 configured</p></li>
				<li>Continue<a id="_idIndexMarker752"/> with the same process by adding the following cities and states:</li>
			</ol>
			<div><div><img src="img/Figure_15.26_B17469.jpg" alt=""/>
				</div>
			</div>
			<p>The completed <code>.plist</code> file should look like this:</p>
			<div><div><img src="img/Figure_15.27_B17469.jpg" alt="Figure 15.26: Locations.plist completed&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.26: Locations.plist completed</p>
			<p>The <code>Locations.plist</code> file is complete. In the next section, you will create a data manager class, similar to the one you made in the previous chapter, that will read the <code>Locations.plist</code> file and <a id="_idIndexMarker753"/>provide it to the <code>LocationViewController</code> instance for the <strong class="bold">Locations</strong> screen.</p>
			<h1 id="_idParaDest-215"><a id="_idTextAnchor220"/>Creating the LocationDataManager class</h1>
			<p>As what you've<a id="_idIndexMarker754"/> done in the previous chapter, you'll create a data manager class to load the location data from <code>Locations.plist</code> and provide it to the <code>LocationsViewController</code> instance for the <strong class="bold">Locations</strong> screen. The data will then be used to populate the table view in the <strong class="bold">Locations</strong> screen. Follow these steps:</p>
			<ol>
				<li value="1">Right-click the <code>Model</code> folder in the <code>Location</code> folder and select <strong class="bold">New File</strong>.</li>
				<li><strong class="bold">iOS</strong> should already be selected. Choose <strong class="bold">Swift File</strong> and click <strong class="bold">Next</strong>.</li>
				<li>Name this file <code>LocationDataManager</code> and click <code>Create</code>.</li>
				<li>Click on the <code>LocationDataManager</code> file in the Project navigator and after the <code>import</code> statement, type in the following to declare the <code>LocationDataManager</code> class:<pre>class LocationDataManager {
}</pre></li>
				<li>Inside the curly braces, add an array property, <code>locations</code>, to hold the list of locations:<pre>private var locations: [String] = []</pre><p>The <code>private</code> keyword means that the <code>locations</code> property may only be accessed by <a id="_idIndexMarker755"/>methods in this class.</p></li>
				<li>Add the following methods after the property declaration:<pre>private func loadData() -&gt; [[String: String]] {
   let decoder = PropertyListDecoder()
   if let path = Bundle.main.path(forResource:
   "Locations", ofTypes: "plist"),
   let locationsData = Filemanager.default.contents(
   atPath: path),
   let locations = try? decoder.decode([[String:
   String]].self, from: locationsData) {
      return locations
   }
   return [[:]]
}
func fetch() {
   for location in loadData() {
      if let city = location["city"], let
      state = location["state"] {
         locations.append("\(city), \(state)")
      }
   }
}
func numberOfLocationItems() -&gt; Int {
   locations.count
}
func locationItem(at index: Int) -&gt; String {
   locations[index]
}</pre><p>These methods<a id="_idIndexMarker756"/> are similar to those in <code>ExploreDataManager</code>. Let's break it down:</p><pre>loadData() </pre><p>Loads the contents of <code>Locations.plist</code> and returns an array of dictionaries. Each dictionary stores the city and state of a location.</p><pre>fetch() </pre><p>Takes the array provided by <code>loadData()</code>, concatenates the <code>city</code> and <code>state</code> for each element, and appends the resulting string to the <code>locations</code> array.</p><pre>numberOfLocationItems() </pre><p>Returns the number of elements in the <code>locations</code> array.</p><pre>locationItem(at:) </pre><p>Returns a string stored in the <code>locations</code> array at a given array index.</p></li>
			</ol>
			<p>Now that <a id="_idIndexMarker757"/>the <code>LocationDataManager</code> class is complete, let's configure the <code>LocationViewController</code> class so that it can get data from the <code>LocationDataManager</code> instance and provide it to the table view. You will do this in the next section.</p>
			<h2 id="_idParaDest-216"><a id="_idTextAnchor221"/>Displaying data in a table view</h2>
			<p>Currently, the <code>"A Cell"</code>. You will update the <code>LocationViewController</code> class to use the <code>LocationDataManager</code> instance as a data source. Follow these steps:</p>
			<ol>
				<li value="1">Click the <code>LocationViewController</code> file in the Project navigator. In the <code>LocationViewController</code> class definition before the <code>viewDidLoad()</code> method, create an instance of <code>LocationDataManager</code> and assign it to a property, <code>manager</code>, by typing the following:<pre>let manager = LocationDataManager()</pre></li>
				<li>Inside the <code>viewDidLoad()</code> method, fetch the data for the table view by calling <code>manager.fetch()</code>: <pre>override func viewDidLoad() { 
   super.viewDidLoad() 
  <strong class="bold"> manager.fetch()</strong>
}</pre></li>
				<li>Modify <code>tableView(_:numberOfRowsInSection:)</code> so it can get the number of rows to display in the table view from <code>manager</code>:<pre>func tableView(_ tableView: UITableView,
numberOfRowsInSection section: Int) -&gt; Int {
  <strong class="bold"> manager.numberOfLocationItems()</strong>
}</pre></li>
				<li>Modify <code>tableView(_:cellForRowAt:)</code> as shown to make the table view display a string containing the city and state in every table view cell:<pre>func tableView(_ tableView: UITableView, cellForRowAt
indexPath: IndexPath) -&gt; UITableViewCell {
   let cell = tableView.dequeueReusableCell(
   withIdentifier: "locationCell", for: indexPath)
   cell.textLabel?.text =
   <code>text</code> property of the table view cell's <code>textLabel</code> to the corresponding<a id="_idIndexMarker760"/> element<a id="_idIndexMarker761"/> in<a id="_idIndexMarker762"/> the <code>locations</code> array. The <code>indexPath</code> returns the section and row number of a particular row in a table view. For example, the first row has an <code>indexPath</code> containing section <code>0</code> and row <code>0</code>. <code>indexPath.row</code> returns <code>0</code> for the first row, so <code>manager</code> returns the string stored at index <code>0</code> in the <code>locations</code> array. This string is then assigned to the <code>text</code> property of the first table view cell's <code>textLabel</code>.</p></li>
			</ol>
			<p>Build and run your app. You should see the locations from <code>ExploreData.plist</code> displayed in the table view: </p>
			<div><div><img src="img/Figure_15.28_B17469.jpg" alt="Figure 15.27: iOS Simulator showing completed Locations screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 15.27: iOS Simulator showing completed Locations screen</p>
			<p>You've <a id="_idIndexMarker763"/>completed the implementation<a id="_idIndexMarker764"/> of the<strong class="bold"> Locations</strong> screen. Good job!</p>
			<h1 id="_idParaDest-217"><a id="_idTextAnchor222"/>Summary</h1>
			<p>In this chapter, you learned about table views and table view controllers, and you implemented a view controller for a table view in a playground. Next, you implemented the <code>LocationViewController</code> class, a table view controller for the <code>.plist</code> file from scratch called <code>Locations.plist</code> to hold a list of locations. You created a data manager class, <code>LocationDataManager</code>, to read data from the <code>.plist</code> file. Finally, you configured the <code>LocationViewController</code> class to get data from the <code>LocationDataManager</code> instance and provide it to the table view so that the <strong class="bold">Locations</strong> screen displays a list of restaurant locations. </p>
			<p>This will enable you to create <code>.plist</code> files from scratch to store data, and to implement table views that use <code>.plist</code> files as a data source for your own apps. Awesome!</p>
			<p>In the next chapter, you will add a map view to the <strong class="bold">Map</strong> screen and configure it to display restaurant locations. You'll also set up custom annotations for the <strong class="bold">Map</strong> screen and set up the <strong class="bold">Restaurant Detail</strong> screen, which will be displayed when a button in the annotation callout is tapped.</p>
		</div>
	</body></html>