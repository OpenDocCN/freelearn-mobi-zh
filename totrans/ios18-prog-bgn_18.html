<html><head></head><body><div><div><div><h1 class="chapterNumber">15</h1>
    <h1 id="_idParaDest-206" class="chapterTitle">Getting Data into Table Views</h1>
    <p class="normal">In the previous chapter, you learned<a id="_idIndexMarker628"/> about the <strong class="keyWord">Model-View-Controller </strong>(<strong class="keyWord">MVC</strong>) design pattern and table views. You also reviewed the table view in the Journal List screen. At this point, the Journal List screen displays cells that do not contain any data. As shown in the app tour in <em class="chapterRef">Chapter 10</em>, <em class="italic">Setting Up the User Interface</em>, it should display a list of journal entries.</p>
    <p class="normal">In this chapter, you’re going to implement the model objects for the Journal List screen to make it display a list of journal entries. You’ll start by learning about the model objects that you will use. Then, you’ll create a Swift class that can store journal entry instances. After that, you’ll create a static method that can return sample journal entry instances. This array will then be used as the data source for the table view on the Journal List screen.</p>
    <p class="normal">By the end of this chapter, you’ll have learned how to create model objects, how to create sample data, and how to configure view controllers to populate table views.</p>
    <p class="normal">The following topics will be covered in this chapter:</p>
    <ul>
      <li class="bulletList">Understanding model objects</li>
      <li class="bulletList">Creating a class to represent a journal entry</li>
      <li class="bulletList">Creating sample data</li>
      <li class="bulletList">Displaying data in a collection view</li>
    </ul>
    <h1 id="_idParaDest-207" class="heading-1">Technical requirements</h1>
    <p class="normal">You will continue working on the <code class="inlineCode">JRNL</code> project that you modified in <em class="chapterRef">Chapter 13</em>, <em class="italic">Modifying App Screens</em>. The resource files and completed Xcode project for this chapter are in the <code class="inlineCode">Chapter15</code> folder of the code bundle for this book, which can be downloaded here:</p>
    <p class="normal"><a href="https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition%0D">https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition</a></p>
    <p class="normal">Check out the following video to see the code in action:</p>
    <p class="normal"><a href="https://youtu.be/TmQOr3Qy954%0D">https://youtu.be/TmQOr3Qy954</a></p>
    <p class="normal">Let’s start by examining the model objects required to store journal entry data in the next section.</p>
    <h1 id="_idParaDest-208" class="heading-1">Understanding model objects</h1>
    <p class="normal">As you learned in <em class="chapterRef">Chapter 14</em>, <em class="italic">Getting Started with MVC and Table Views</em>, a common design pattern<a id="_idIndexMarker629"/> for iOS apps is Model-View-Controller, or MVC. To recap, MVC divides an app into three different parts:</p>
    <ul>
      <li class="bulletList"><strong class="keyWord">Model</strong>: This handles data storage, representation, and data processing tasks.</li>
      <li class="bulletList"><strong class="keyWord">View</strong>: This is anything that is on the screen that the user can interact with.</li>
      <li class="bulletList"><strong class="keyWord">Controller</strong>: This manages the flow of information between the model and the view.</li>
    </ul>
    <p class="normal">Let’s revisit the design of the Journal List screen that you saw during the app tour, which looks like this:</p>
    <figure class="mediaobject"><img src="img/B31371_15_01.png" alt="" width="459" height="825"/></figure>
    <p class="packt_figref">Figure 15.1: Simulator showing the Journal List screen from the app tour</p>
    <p class="normal">Build and run your<a id="_idIndexMarker630"/> app, and the Journal List screen will look like this:</p>
    <figure class="mediaobject"><img src="img/B31371_15_02.png" alt="" width="459" height="825"/></figure>
    <p class="packt_figref">Figure 15.2: Simulator showing the Journal List screen from your app</p>
    <p class="normal">As you can see, all the<a id="_idIndexMarker631"/> cells currently display placeholders. Based on the MVC design pattern, you have partly completed the implementation of the views required (the table view) and the controller (the <code class="inlineCode">JournalListViewController</code> class). You will need to create a custom <code class="inlineCode">UITableViewCell</code> instance to manage what your table view cell will display, and you need to add model objects that will provide the journal entry data.</p>
    <p class="normal">Each journal entry will store the following:</p>
    <ul>
      <li class="bulletList">The date the entry was made</li>
      <li class="bulletList">A rating value</li>
      <li class="bulletList">Title text</li>
      <li class="bulletList">Body text</li>
      <li class="bulletList">An optional photo</li>
      <li class="bulletList">An optional geographical location</li>
    </ul>
    <p class="normal">In <em class="chapterRef">Chapter 14</em>, <em class="italic">Getting Started with MVC and Table Views</em>, you used an array of <code class="inlineCode">String</code> arrays to represent journal entries. However, a <code class="inlineCode">String</code> array can only store strings, and you must be able to store data types other than <code class="inlineCode">String</code>. To resolve this, you will create a class named <code class="inlineCode">JournalEntry</code> to store all the data required by a journal entry. Next, you will create a static method that returns sample data stored in <code class="inlineCode">JournalEntry</code> instances. After that, you will create a custom <code class="inlineCode">UITableView</code> class to manage the data displayed by the table view cells. Finally, you <a id="_idIndexMarker632"/>will modify the <code class="inlineCode">JournalListViewController</code> class so that it can provide data for the table view to display.</p>
    <h1 id="_idParaDest-209" class="heading-1">Creating a class to represent a journal entry</h1>
    <p class="normal">To create a model <a id="_idIndexMarker633"/>object that can represent a journal entry in your app, you will add a new file to your project, <code class="inlineCode">JournalEntry.swift</code>, and declare a <code class="inlineCode">JournalEntry</code> class that has the required properties for a journal entry. Before you do so, you’ll configure your project to use Swift 6 and change the main project folder to a group. Follow these steps:</p>
    <ol>
      <li class="numberedList" value="1">In the Project navigator, click the<strong class="screenText"> JRNL</strong> icon. Click the <strong class="screenText">JRNL</strong> target and click <strong class="screenText">Build Settings</strong>. Scroll down to <strong class="screenText">Swift Compiler – Language</strong> and set <strong class="screenText">Swift Language Version</strong> to <strong class="screenText">Swift 6</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_03.png" alt="" width="812" height="516"/></figure>
    <p class="packt_figref">Figure 15.3: Editor area showing Build Settings with Swift 6 set</p>
    <ol>
      <li class="numberedList" value="2">Right-click on<a id="_idIndexMarker634"/> the blue <strong class="screenText">JRNL</strong> project folder under the <strong class="screenText">JRNL</strong> icon and choose <strong class="screenText">Convert to Group</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_04.png" alt="" width="473" height="824"/></figure>
    <p class="packt_figref">Figure 15.4: Pop-up menu with Convert to Group selected</p>
    <p class="normal-one">The folder color <a id="_idIndexMarker635"/>will change from blue to dark gray. Making the folder a group will allow you to rearrange the order of the files in it.</p>
    <div><p class="normal">To learn more about the differences between folders and groups in Xcode, visit: <a href="https://developer.apple.com/documentation/xcode/managing-files-and-folders-in-your-xcode-project">https://developer.apple.com/documentation/xcode/managing-files-and-folders-in-your-xcode-project</a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="3">Reorder the files in the group until they look like the screenshot below:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_05.png" alt="" width="458" height="413"/></figure>
    <p class="packt_figref">Figure 15.5: Project navigator showing reordered files</p>
    <ol>
      <li class="numberedList" value="4">Right-click on<a id="_idIndexMarker636"/> the <strong class="screenText">JournalListViewController</strong> file in the Project navigator and select <strong class="screenText">New Group from Selection</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_06.png" alt="" width="484" height="568"/></figure>
    <p class="packt_figref">Figure 15.6: Pop-up menu with New Group from Selection selected</p>
    <p class="normal-one">This will create <a id="_idIndexMarker637"/>a new group containing the <code class="inlineCode">JournalListViewController</code> file.</p>
    <ol>
      <li class="numberedList" value="5">Replace the placeholder text for the group name with <code class="inlineCode">Journal List Screen</code> and press <em class="keystroke">Return</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_07.png" alt="" width="437" height="284"/></figure>
    <p class="packt_figref">Figure 15.7: Project navigator showing the Journal List Screen group</p>
    <ol>
      <li class="numberedList" value="6">You will now create<a id="_idIndexMarker638"/> groups for the model and view objects used in the Journal List screen. Right-click the <strong class="screenText">Journal List Screen</strong> group and choose <strong class="screenText">New Group</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_08.png" alt="" width="553" height="531"/></figure>
    <p class="packt_figref">Figure 15.8: Pop-up menu with New Group selected</p>
    <ol>
      <li class="numberedList" value="7">Replace the <a id="_idIndexMarker639"/>placeholder text with <code class="inlineCode">Model</code> and press <em class="keystroke">Return</em>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_09.png" alt="" width="489" height="317"/></figure>
    <p class="packt_figref">Figure 15.9: Project navigator showing the Model group</p>
    <ol>
      <li class="numberedList" value="8">Create another folder by repeating <em class="italic">Step 3</em> and replacing the placeholder text with <code class="inlineCode">View</code>. The Project <a id="_idIndexMarker640"/>navigator should look like the following screenshot:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_10.png" alt="" width="436" height="328"/></figure>
    <p class="packt_figref">Figure 15.10: Project navigator showing the View and Model groups</p>
    <ol>
      <li class="numberedList" value="9">You’ll now create a file that will contain the implementation of the <code class="inlineCode">JournalEntry</code> class. Right-click the <strong class="screenText">Model</strong> folder and choose <strong class="screenText">New File from Template...</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_11.png" alt="" width="579" height="421"/></figure>
    <p class="packt_figref">Figure 15.11: Pop-up menu with New File from Template… selected</p>
    <ol>
      <li class="numberedList" value="10"><strong class="screenText">iOS</strong> should already <a id="_idIndexMarker641"/>be selected. Choose <strong class="screenText">Swift File</strong> and click <strong class="screenText">Next</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_12.png" alt="" width="812" height="581"/></figure>
    <p class="packt_figref">Figure 15.12: Choose a template for your new file: screen with Swift File selected</p>
    <ol>
      <li class="numberedList" value="11">Name the file <code class="inlineCode">JournalEntry</code> and then click<strong class="screenText"> Create</strong>. The file will appear in the Project <a id="_idIndexMarker642"/>navigator and its contents will appear in the <strong class="screenText">Editor</strong> area:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_13.png" alt="" width="812" height="277"/></figure>
    <p class="packt_figref">Figure 15.13: Editor area showing the contents of the JournalEntry file</p>
    <p class="normal-one">The only line in this file is an <code class="inlineCode">import</code> statement.</p>
    <div><p class="normal">The <code class="inlineCode">import</code> statement allows you to import other code libraries into your project, giving you the ability to use classes, properties, and methods from them. Foundation is one of Apple’s core frameworks, and you can learn more about it here: <a href="https://developer.apple.com/documentation/foundation">https://developer.apple.com/documentation/foundation</a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="12">Modify the <code class="inlineCode">import</code> statement to import <code class="inlineCode">UIKit</code>:
        <pre class="programlisting code-one"><code class="hljs-code">import <strong class="hljs-slc">UIKit</strong>
</code></pre>
        <div><p class="normal"><code class="inlineCode">UIKit</code> provides the infrastructure required for iOS apps. You can read more about it here: <a href="https://developer.apple.com/documentation/uikit">https://developer.apple.com/documentation/uikit</a>.</p>
        </div>
      </li>
    </ol>
    <ol>
      <li class="numberedList" value="13">Add the <a id="_idIndexMarker643"/>following code after the <code class="inlineCode">import</code> statement to declare a class named <code class="inlineCode">JournalEntry</code>:
        <pre class="programlisting code-one"><code class="hljs-code">class JournalEntry {
}
</code></pre>
      </li>
      <li class="numberedList">Add the following code after the opening curly brace of the <code class="inlineCode">JournalEntry</code> class to add the desired properties for this class:
        <pre class="programlisting code-one"><code class="hljs-code">class JournalEntry {
<strong class="hljs-slc">  </strong><strong class="hljs-comment-slc">// MARK: - Properties</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">date</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">Date</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">rating</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">Int</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">title</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">String</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">body</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">String</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">photo</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">UIImage</strong><strong class="hljs-slc">?</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">latitude</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">Double</strong><strong class="hljs-slc">?</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">longitude</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">Double</strong><strong class="hljs-slc">?</strong>
}
</code></pre>
      </li>
    </ol>
    <p class="normal-one">Let’s break this down:</p>
    <ul>
      <li class="bulletList level-2">The <code class="inlineCode">date</code> property is of type <code class="inlineCode">Date</code> and will store the date the journal entry was made.</li>
      <li class="bulletList level-2">The <code class="inlineCode">rating</code> property is of type <code class="inlineCode">Int</code> and will store the number of stars for the journal entry.</li>
      <li class="bulletList level-2">The <code class="inlineCode">title</code> property is of type <code class="inlineCode">String</code> and will store the title text of the journal entry.</li>
      <li class="bulletList level-2">The <code class="inlineCode">body</code> property is of type <code class="inlineCode">String</code> and will store the body text of the journal entry.</li>
      <li class="bulletList level-2">The <code class="inlineCode">photo</code> property is of type <code class="inlineCode">UIImage?</code> and will store a photo. This is an optional property because not all journal entries require a photo.</li>
      <li class="bulletList level-2">The <code class="inlineCode">lat</code> and <code class="inlineCode">long</code> properties are of type <code class="inlineCode">Double?</code> and will store the location where the journal entry was made. These are optional properties because not all journal entries require a location.</li>
    </ul>
    <p class="normal-one">An error will appear because your class does not have an initializer.</p>
    <ol>
      <li class="numberedList" value="15">Add the<a id="_idIndexMarker644"/> following code to implement an initializer after the <code class="inlineCode">longitude</code> property:
        <pre class="programlisting code-one"><code class="hljs-code">// MARK: - Initialization
init?(rating: Int, title: String, body: String, photo: UIImage? = nil, latitude: Double? = nil, longitude: Double? = nil) {
  if title.isEmpty || body.isEmpty || rating &lt; 0 ||   rating &gt; 5 {
    return nil
  }
  self.date = Date()
  self.rating = rating
  self.title = title
  self.body = body
  self.photo = photo
  self.latitude = latitude
  self.longitude = longitude
}
</code></pre>
        <div><p class="normal">Classes are covered in <em class="chapterRef">Chapter 7</em>, <em class="italic">Classes, Structures, and Enumerations</em>.</p>
        </div>
      </li>
    </ol>
    <p class="normal-one">Let’s break this down:</p>
    <pre class="programlisting code-one"><code class="hljs-code">init?(rating: Int, title: String, body: String, photo: UIImage? = nil, latitude: Double? = nil, longitude: Double? = nil) {
</code></pre>
    <p class="normal-one">The initializer for the <code class="inlineCode">JournalEntry</code> class has arguments for an <code class="inlineCode">Int</code> value, two <code class="inlineCode">String</code> values, an optional <code class="inlineCode">UIImage</code> value, and two optional <code class="inlineCode">Double</code> values. The default value for all the optional values is <code class="inlineCode">nil</code>. The question mark after the <code class="inlineCode">init </code>keyword means that <a id="_idIndexMarker645"/>this is a <strong class="keyWord">failable initializer</strong>; it will not create a <code class="inlineCode">JournalEntry</code> instance if certain conditions are not met.</p>
    <pre class="programlisting code-one"><code class="hljs-code">if title.isEmpty || body.isEmpty || rating &lt; 0 || rating &gt; 5 {
  return nil
}
</code></pre>
    <p class="normal-one">The initializer will fail to create a <code class="inlineCode">JournalEntry</code> instance if any or all of the following conditions<a id="_idIndexMarker646"/> return <code class="inlineCode">true</code>; <code class="inlineCode">title</code> is empty, <code class="inlineCode">body</code> is empty, <code class="inlineCode">rating</code> is less than <code class="inlineCode">0</code>, and <code class="inlineCode">rating</code> is greater than <code class="inlineCode">5</code>.</p>
    <pre class="programlisting code-one"><code class="hljs-code">self.date = Date()
</code></pre>
    <p class="normal-one">The current date is assigned to the <code class="inlineCode">date</code> property when the <code class="inlineCode">JournalEntry</code> instance is created.</p>
    <pre class="programlisting code-one"><code class="hljs-code">self.rating = rating
self.Title = entryTitle
self.Body = entryBody
self.photo = photo
self.latitude = latitude
self.longitude = longitude
</code></pre>
    <p class="normal-one">This assigns the argument values to the corresponding properties of the <code class="inlineCode">JournalEntry</code> instance. Note the use of <code class="inlineCode">self</code> to differentiate properties from arguments having the same name.</p>
    <ol>
      <li class="numberedList" value="16">The <code class="inlineCode">MARK: -</code> statements make it easy to navigate through your code. Click the last part of the path that is visible under the toolbar, and you will see both <strong class="screenText">Properties</strong> and <strong class="screenText">Initialization</strong> sections displayed in a menu. This enables you to easily go to these sections:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_14.png" alt="" width="812" height="516"/></figure>
    <p class="packt_figref">Figure 15.14: Menu showing the Properties and Initialization sections</p>
    <p class="normal">At this point, you <a id="_idIndexMarker647"/>have a class, <code class="inlineCode">JournalEntry</code>, that can store all the details of a single journal entry. In the next section, you’ll create a static method that returns sample <code class="inlineCode">JournalEntry</code> instances.</p>
    <h1 id="_idParaDest-210" class="heading-1">Creating sample data</h1>
    <p class="normal">As you saw in <em class="chapterRef">Chapter 14</em>,<em class="italic"> Getting Started with MVC and Table Views</em>, you can use an array as the <a id="_idIndexMarker648"/>data source for a table view. You will now create an extension containing a static method that will return an array containing three sample journal entries.</p>
    <p class="normal">Click the <code class="inlineCode">JournalEntry</code> file in the Project navigator, and type in the following after all other code in the file:</p>
    <pre class="programlisting code"><code class="hljs-code">// MARK: - Sample data
extension JournalEntry {
  static func createSampleJournalEntryData() -&gt; [JournalEntry] {
    let photo1 = UIImage(systemName: "sun.max")
    let photo2 = UIImage(systemName: "cloud")
    let photo3 = UIImage(systemName: "cloud.sun")
    guard let journalEntry1 =  JournalEntry(rating: 5,     title: "Good", body: "Today is a good day",     photo: photo1) else {
      fatalError("Unable to instantiate journalEntry1")
    }
    guard let journalEntry2 = JournalEntry(rating: 0,     title: "Bad", body: "Today is a bad day", 
    photo: photo2) else {
      fatalError("Unable to instantiate journalEntry2")
    }
    guard let journalEntry3 = JournalEntry(rating: 3,     title: "Ok", body: "Today is an Ok day",     photo: photo3) else {
      fatalError("Unable to instantiate journalEntry3")
    }
    return [journalEntry1, journalEntry2, journalEntry3]
  }
}
</code></pre>
    <p class="normal">This extension contains a <code class="inlineCode">createSampleJournalEntryData()</code> method that creates three <code class="inlineCode">UIImage</code> instances using the symbols from Apple’s <code class="inlineCode">SFSymbols</code> library, creates three <code class="inlineCode">JournalEntry</code> instances, adds them to an array, and returns the array. The <code class="inlineCode">static</code> keyword means that it is a method on the <code class="inlineCode">JournalEntry</code> type instead of a <code class="inlineCode">JournalEntry</code> instance method.</p>
    <div><p class="normal"> To learn more about type and instance methods, see this link: <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/methods/">https://docs.swift.org/swift-book/documentation/the-swift-programming-language/methods/</a></p>
    </div>
    <p class="normal">You have now completed the implementation of the <code class="inlineCode">JournalEntry</code> class. You have also added a static <a id="_idIndexMarker649"/>method that will generate three sample journal entries. In the next section, you’ll modify the <code class="inlineCode">JournalListViewController</code> class to use the array returned by this method to populate the table view.</p>
    <h1 id="_idParaDest-211" class="heading-1">Displaying data in a table view</h1>
    <p class="normal">In <em class="chapterRef">Chapter 14</em>, <em class="italic">Getting Started with MVC and Table Views</em>, you <a id="_idIndexMarker650"/>used a table view cell configuration to set the data to be displayed by the table view cells. You will not be able to do the same here because you are using a custom table view cell that you implemented in <em class="chapterRef">Chapter 13</em>, <em class="italic">Modifying App Screens</em>.</p>
    <p class="normal">So far in this chapter, you’ve implemented a static method that returns an array containing three <code class="inlineCode">JournalEntry</code> instances. You will now modify the <code class="inlineCode">JournalListViewController</code> class to use that array as the data source for the table view on the Journal List screen. To do so, you will do the following:</p>
    <ul>
      <li class="bulletList">Create a custom <code class="inlineCode">UITableViewCell</code> instance and assign it as the identity for the <code class="inlineCode">journalCell</code> table view cells.</li>
      <li class="bulletList">Modify the <code class="inlineCode">JournalListViewController</code> class to get sample data from the <code class="inlineCode">createSampleJourneyEntryData</code> static method and assign it to a <code class="inlineCode">journalEntries</code> array.</li>
      <li class="bulletList">Modify the data source methods in the <code class="inlineCode">JournalListViewController</code> class to populate the table view cells using data from the <code class="inlineCode">journalEntries</code> array.</li>
    </ul>
    <p class="normal">You’ll begin by <a id="_idIndexMarker651"/>creating a custom <code class="inlineCode">UITableViewCell</code> instance in the next section.</p>
    <h2 id="_idParaDest-212" class="heading-2">Creating a custom UITableViewCell subclass</h2>
    <p class="normal">At present, the<a id="_idIndexMarker652"/> table view on the<a id="_idIndexMarker653"/> Journal List screen displays 10 table view cells that do not contain any data. You need a way to set the values for the image view and the labels in the table view cells, so you will create a new <code class="inlineCode">UITableViewCell</code> subclass, <code class="inlineCode">JournalEntryTableViewCell</code>, for this purpose. You will assign this class as the identity of the table view cells in the Journal List screen. Follow these steps:</p>
    <ol>
      <li class="numberedList" value="1">In the Project navigator, right-click on the <strong class="screenText">View</strong> folder and select <strong class="screenText">New File from Template...</strong>.</li>
      <li class="numberedList"><strong class="screenText">iOS</strong> should already be selected. Choose <strong class="screenText">Cocoa Touch Class</strong>, then click <strong class="screenText">Next</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_15.png" alt="" width="812" height="573"/></figure>
    <p class="packt_figref">Figure 15.15: Choose a template for your new file screen</p>
    <div><p class="normal">Using the <strong class="screenText">Cocoa Touch Class</strong> template will allow you to set the superclass and automatically insert boilerplate code for the class that you will create.</p>
    </div>
    <ol>
      <li class="numberedList" value="3">The <strong class="screenText">Choose options for your new file</strong> screen <a id="_idIndexMarker654"/>will <a id="_idIndexMarker655"/>appear:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_16.png" alt="" width="812" height="406"/></figure>
    <p class="packt_figref">Figure 15.16: Choose options for your new file screen</p>
    <p class="normal-one">Configure<a id="_idIndexMarker656"/> the class<a id="_idIndexMarker657"/> as follows:</p>
    <ul>
      <li class="bulletList level-2"><strong class="screenText">Class</strong>: <code class="inlineCode">JournalListTableViewCell</code></li>
      <li class="bulletList level-2"><strong class="screenText">Subclass</strong>: <code class="inlineCode">UITableViewCell</code></li>
      <li class="bulletList level-2"><strong class="screenText">Also create XIB</strong>: Unchecked</li>
      <li class="bulletList level-2"><strong class="screenText">Language</strong>: <code class="inlineCode">Swift</code></li>
    </ul>
    <p class="normal-one">Click <strong class="screenText">Next</strong> when you’re done.</p>
    <ol>
      <li class="numberedList" value="4">Click <strong class="screenText">Create</strong>, and a new file, <code class="inlineCode">JournalListTableViewCell</code>, will be added to the <strong class="screenText">View</strong> group in your project. Inside it you will see the following code:
        <pre class="programlisting code-one"><code class="hljs-code">import UIKit
class JournalListTableViewCell: UITableViewCell {
  override func awakeFromNib() {
    super.awakeFromNib()
    // Initialization code
  }
  override func setSelected(_ selected: Bool,   animated: Bool) {
    super.setSelected(selected, animated: animated)
    // Configure the view for the selected state
  }
}
</code></pre>
      </li>
      <li class="numberedList">Remove all the code from the <code class="inlineCode">JournalListTableViewCell</code> class declaration as shown below:
        <pre class="programlisting code-one"><code class="hljs-code">class JournalListTableViewCell: UITableViewCell {
}
</code></pre>
      </li>
      <li class="numberedList">To create three <a id="_idIndexMarker658"/>properties <a id="_idIndexMarker659"/>corresponding to the subviews of the <code class="inlineCode">journalCell</code> table view cell, type in the following code between the curly braces of the <code class="inlineCode">JournalEntry</code> class declaration:
        <pre class="programlisting code-one"><code class="hljs-code">// MARK: - Properties 
@IBOutlet var photoImageView: UIImageView!
@IBOutlet var dateLabel: UILabel!
@IBOutlet var titleLabel: UILabel!
</code></pre>
      </li>
      <li class="numberedList">The implementation of the <code class="inlineCode">JournalListTableViewCell</code> class is complete. You’ll now assign this class as the identity of the <code class="inlineCode">journalCell</code> table view cell. Click the <strong class="screenText">Main</strong> storyboard file in the Project navigator and click <strong class="screenText">journalCell</strong> under the <strong class="screenText">Journal Scene</strong> in the document outline:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_17.png" alt="" width="812" height="362"/></figure>
    <p class="packt_figref">Figure 15.17: Document outline showing journalCell selected</p>
    <ol>
      <li class="numberedList" value="8">Click the Identity inspector button. In the <strong class="screenText">Custom Class</strong> section, set <strong class="screenText">Class</strong> to <code class="inlineCode">JournalListTableViewCell</code>. This sets a <code class="inlineCode">JournalListTableViewCell</code> instance as the<a id="_idIndexMarker660"/> custom<a id="_idIndexMarker661"/> table view subclass for <code class="inlineCode">journalCell</code>. Press <em class="keystroke">Return</em> when this is done:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_18.png" alt="" width="388" height="230"/></figure>
    <p class="packt_figref">Figure 15.18: Identity inspector showing Class settings for journalCell</p>
    <p class="normal">You’ve just declared and defined the <code class="inlineCode">JournalListTableViewCell</code> class and assigned it as the custom table view cell subclass for the <code class="inlineCode">journalCell</code> table view cell. In the next section, you’ll<a id="_idIndexMarker662"/> connect this class <a id="_idIndexMarker663"/>to the image view and the labels in the <code class="inlineCode">journalCell</code> table view cell, so you can control what they display.</p>
    <h2 id="_idParaDest-213" class="heading-2">Connecting the outlets in journalCell</h2>
    <p class="normal">To manage what is <a id="_idIndexMarker664"/>being displayed by the<a id="_idIndexMarker665"/> table view cells in the Journal List screen, you’ll use the Connections inspector to connect the image view and labels in the <code class="inlineCode">journalCell</code> table view cell to outlets in the <code class="inlineCode">JournalListTableViewCell</code> class. Follow these steps:</p>
    <ol>
      <li class="numberedList" value="1">With <strong class="screenText">journalCell</strong> selected in the document outline, click the Connections inspector to display its outlets.</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_19.png" alt="" width="812" height="291"/></figure>
    <p class="packt_figref">Figure 15.19: Connections inspector showing outlets for journalCell</p>
    <ol>
      <li class="numberedList" value="2">Drag from the <strong class="screenText">photoImageView</strong> outlet to the image view in the table view cell:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_20.png" alt="" width="812" height="365"/></figure>
    <p class="packt_figref">Figure 15.20: Connections inspector showing photoImageView outlet</p>
    <ol>
      <li class="numberedList" value="3">Drag from<a id="_idIndexMarker666"/> the <strong class="screenText">dateLabel</strong> outlet to<a id="_idIndexMarker667"/> the top label in the table view cell.</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_21.png" alt="" width="812" height="371"/></figure>
    <p class="packt_figref">Figure 15.21: Connections inspector showing dateLabel outlet</p>
    <ol>
      <li class="numberedList" value="4">Drag from the <strong class="screenText">titleLabel</strong> outlet to the bottom label in the table view cell:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_22.png" alt="" width="812" height="369"/></figure>
    <p class="packt_figref">Figure 15.22: Connections inspector showing titleLabel outlet</p>
    <div><p class="normal">Remember that if you make a mistake, you can click the <strong class="screenText">x</strong> to break the connection and drag from the outlet to the UI element once more.</p>
    </div>
    <p class="normal">The <code class="inlineCode">journalCell</code> table view cell in the <code class="inlineCode">Main</code> storyboard file has now been set up with a custom table view subclass, <code class="inlineCode">JournalListTableViewCell</code>. The outlets for the table view cell’s image view and labels have also been created and assigned. Now you will be able to set the <code class="inlineCode">photoImageView</code>, <code class="inlineCode">dateLabel</code>, and <code class="inlineCode">titleLabel</code> outlets to display a photo, a date, and a title in each cell when the app is run.</p>
    <p class="normal">In the next section, you’ll <a id="_idIndexMarker668"/>update the table view<a id="_idIndexMarker669"/> data source methods in the <code class="inlineCode">JournalListViewController</code> class to provide the number of table view cells to be displayed in the table view, as well as to provide the journal entry photo, date, and title for each cell.</p>
    <h2 id="_idParaDest-214" class="heading-2">Updating the data source methods in JournalListViewController</h2>
    <p class="normal">The data source <a id="_idIndexMarker670"/>methods in <a id="_idIndexMarker671"/>the <code class="inlineCode">JournalListViewController</code> class are currently set to display 10 table view cells, with each cell containing an image view displaying a smiley face and two labels. You’ll update them to get the number of cells to display, and the data to put in each cell, from the <code class="inlineCode">SampleJournalEntryData</code> instance. Follow these steps:</p>
    <ol>
      <li class="numberedList" value="1">Click the <strong class="screenText">JournalListViewController</strong> file in the Project navigator.</li>
      <li class="numberedList">Rearrange the code in the <code class="inlineCode">JournalListViewController</code> class so that the <code class="inlineCode">tableView</code> outlet and the <code class="inlineCode">viewDidLoad()</code> method are located before the table view delegate methods:
        <pre class="programlisting code-one"><code class="hljs-code">class JournalListViewController: UIViewController, UITableViewDataSource, UITableViewDelegate { 
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">@IBOutlet</strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc">var</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">tableView</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">UITableView</strong><strong class="hljs-slc">!</strong>
<strong class="hljs-slc">  </strong><strong class="hljs-keyword-slc">override</strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc">func</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">viewDidLoad</strong><strong class="hljs-slc">() {</strong>
<strong class="hljs-slc">    </strong><strong class="hljs-keyword-slc">super</strong><strong class="hljs-slc">.</strong><strong class="hljs-con-attribute-slc">viewDidLoad</strong><strong class="hljs-slc">()</strong>
<strong class="hljs-slc">  }</strong>
  func tableView(_ tableView: UITableView,   
  numberOfRowsInSection section: Int) -&gt; Int {
</code></pre>
      </li>
      <li class="numberedList">Add a <code class="inlineCode">MARK</code> statement before the property declarations as follows:
        <pre class="programlisting code-one"><code class="hljs-code"><strong class="hljs-comment-slc">// MARK: - Properties</strong>
@IBOutlet var tableView: UITableView!
</code></pre>
      </li>
      <li class="numberedList">Add a <code class="inlineCode">MARK</code> statement before the <code class="inlineCode">viewDidLoad()</code> method as follows:
        <pre class="programlisting code-one"><code class="hljs-code"><strong class="hljs-comment-slc">// MARK: - View controller lifecycle</strong>
@override func viewDidLoad() {
</code></pre>
      </li>
      <li class="numberedList">Add a <code class="inlineCode">MARK</code> statement<a id="_idIndexMarker672"/> before <a id="_idIndexMarker673"/>the table view data source methods as follows:
        <pre class="programlisting code-one"><code class="hljs-code"><strong class="hljs-comment-slc">// MARK: - UITableViewDataSource</strong>
func tableView(_ tableView: UITableView, numberOfRowsInSection section:
</code></pre>
      </li>
      <li class="numberedList">Add a <code class="inlineCode">MARK</code> statement before <code class="inlineCode">UnwindNewEntryCancel(segue:)</code> as follows:
        <pre class="programlisting code-one"><code class="hljs-code"><strong class="hljs-comment-slc">// MARK: - Methods</strong>
@IBAction func unwindNewEntryCancel(segue: UIStoryboardSegue) {
</code></pre>
      </li>
      <li class="numberedList">Verify that the code in <code class="inlineCode">JournalListViewController</code> appears as follows:
        <pre class="programlisting code-one"><code class="hljs-code">class JournalListViewController: UIViewController, UITableViewDataSource, UITableViewDelegate {
  // MARK: - Properties
  @IBOutlet var tableView: UITableView!
  // MARK: - View controller lifecycle
  override func viewDidLoad() {
    super.viewDidLoad()
  }
  // MARK: - UITableViewDataSource
  func tableView(_ tableView: UITableView, 
  numberOfRowsInSection section: Int) -&gt; Int {
    10
  }
  func tableView(_ tableView: UITableView, cellForRowAt 
  indexPath: IndexPath) -&gt; UITableViewCell {
    tableView.dequeueReusableCell(withIdentifier: 
    "journalCell", for: indexPath)
  }
  // MARK: - Methods
  @IBAction func unwindNewEntryCancel(segue: 
  UIStoryboardSegue) {
  }
}
</code></pre>
      </li>
      <li class="numberedList">Type the following<a id="_idIndexMarker674"/> code <a id="_idIndexMarker675"/>after the <code class="inlineCode">tableView</code> outlet declaration to create a <code class="inlineCode">journalEntries</code> property, which will contain an array of <code class="inlineCode">JournalEntry</code> instances:
        <pre class="programlisting code-one"><code class="hljs-code">@IBOutlet var tableView: UITableView!
<strong class="hljs-keyword-slc">private</strong><strong class="hljs-slc"> </strong><strong class="hljs-keyword-slc">var</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">journalEntries</strong><strong class="hljs-slc">: [</strong><strong class="hljs-con-class-slc">JournalEntry</strong><strong class="hljs-slc">] </strong><strong class="hljs-operator-slc">=</strong><strong class="hljs-slc"> []</strong>
</code></pre>
      </li>
    </ol>
    <p class="normal-one">The <code class="inlineCode">private</code> keyword restricts the use of the <code class="inlineCode">journalEntries</code> array to the <code class="inlineCode">JournalListViewController</code> class.</p>
    <div><p class="normal">You can learn more about Access Control in Swift at this link: <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/accesscontrol/">https://docs.swift.org/swift-book/documentation/the-swift-programming-language/accesscontrol/</a>.</p>
    </div>
    <ol>
      <li class="numberedList" value="9">Modify the <code class="inlineCode">viewDidLoad()</code> method as shown to populate the <code class="inlineCode">journalEntries</code> array when the app is launched:
        <pre class="programlisting code-one"><code class="hljs-code">override func viewDidLoad() {
  super.viewDidLoad()
<strong class="hljs-slc">  journalEntries =</strong><strong class="hljs-slc">  </strong><strong class="hljs-con-class-slc">JournalEntry</strong><strong class="hljs-slc">.</strong><strong class="hljs-variable-slc">createSampleJournalEntryData</strong><strong class="hljs-slc">()</strong>

}
</code></pre>
      </li>
    </ol>
    <p class="normal-one">The <code class="inlineCode">createSampleJournalEntryData()</code> method will create three <code class="inlineCode">JournalEntry</code> instances and assign them to the <code class="inlineCode">journalEntries</code> array.</p>
    <ol>
      <li class="numberedList" value="10">Update <code class="inlineCode">tableView(_:numberOfRowsInSection:)</code> as shown here. This will make the table view display a <code class="inlineCode">journalCell</code> for each element in the <code class="inlineCode">journalEntries</code> array:
        <pre class="programlisting code-one"><code class="hljs-code">func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
  <strong class="hljs-slc">journalEntries.</strong><strong class="hljs-con-attribute-slc">count</strong>
}
</code></pre>
      </li>
      <li class="numberedList">Update <code class="inlineCode">tableView(_:cellForRowAt:)</code> as shown to set the image view and labels for each <a id="_idIndexMarker676"/>cell using<a id="_idIndexMarker677"/> data from the corresponding element in the <code class="inlineCode">journalEntries</code> array:
        <pre class="programlisting code-one"><code class="hljs-code">func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
  let journalCell =  tableView.dequeueReusableCell(withIdentifier:  "journalCell", for: indexPath) as!  JournalListTableViewCell
  let journalEntry = journalEntries[indexPath.row]
  journalCell.photoImageView.image = journalEntry.photo
  journalCell.dateLabel.text = journalEntry.date.formatted(
    .dateTime.month().day().year()
  )
  journalCell.titleLabel.text = journalEntry.title
  return journalCell
}
</code></pre>
      </li>
    </ol>
    <p class="normal-one">Let’s break this down:</p>
    <pre class="programlisting code-one"><code class="hljs-code">let journalCell = tableView.dequeueReusableCell(withIdentifier: "journalCell", for: indexPath) as! JournalListTableViewCell
</code></pre>
    <p class="normal-one">This statement specifies the cell that is dequeued is cast as an instance of <code class="inlineCode">JournalListTableViewCell</code>.</p>
    <div><p class="normal">You can learn more about the <code class="inlineCode">as!</code> operator at this link: <a href="https://developer.apple.com/swift/blog/?id=23">https://developer.apple.com/swift/blog/?id=23</a>.</p>
    </div>
    <pre class="programlisting code-one"><code class="hljs-code">let journalEntry = journalEntries[indexPath.row]
</code></pre>
    <p class="normal-one">This statement gets the <code class="inlineCode">JournalEntry</code> instance that corresponds to the current cell in the table view. In other words, the first table view cell in the table view corresponds to the first <code class="inlineCode">JournalEntry</code> instance in the <code class="inlineCode">journalEntries</code> array, the second table view cell corresponds to the second <code class="inlineCode">JournalEntry</code> instance, and so on.</p>
    <pre class="programlisting code-one"><code class="hljs-code">journalCell.photoImageView.image = journalEntry.photo
</code></pre>
    <p class="normal-one">This statement gets the photo from the <code class="inlineCode">JournalEntry</code> instance and assigns it to the image of the <code class="inlineCode">journalCell</code> instance’s <code class="inlineCode">photoImageView</code> property.</p>
    <pre class="programlisting code-one"><code class="hljs-code">journalCell.dateLabel.text = journalEntry.date.formatted(
  .dateTime.month().day().year()
)
</code></pre>
    <p class="normal-one">This statement <a id="_idIndexMarker678"/>gets<a id="_idIndexMarker679"/> the date from the <code class="inlineCode">JournalEntry</code> instance, formats it into a string, and assigns it to the text for the <code class="inlineCode">journalCell</code> instance’s <code class="inlineCode">dateLabel</code> property.</p>
    <pre class="programlisting code-one"><code class="hljs-code">journalCell.titleLabel.text = journalEntry.title
</code></pre>
    <p class="normal-one">This statement gets the string stored in <code class="inlineCode">title</code> from the <code class="inlineCode">JournalEntry</code> instance and assigns it to the text for the <code class="inlineCode">journalCell</code> instance’s <code class="inlineCode">titleLabel</code> property.</p>
    <pre class="programlisting code-one"><code class="hljs-code">return journalCell
</code></pre>
    <p class="normal-one">This statement returns the populated <code class="inlineCode">journalCell</code> instance for display in the table view.</p>
    <ol>
      <li class="numberedList" value="12">Build and run the app. You’ll see the table view in the Journal List screen display text and images for each <code class="inlineCode">JournalEntry</code> instance in the <code class="inlineCode">journalEntries</code> array:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_15_23.png" alt="" width="407" height="368"/></figure>
    <p class="packt_figref">Figure 15.23: Simulator showing the Journal List screen</p>
    <p class="normal">Tapping on a row displays the Journal Entry Detail screen, but this screen does not display any data from the selected journal entry yet. You will address this in the next chapter.</p>
    <p class="normal">Congratulations! At<a id="_idIndexMarker680"/> this <a id="_idIndexMarker681"/>point, the Journal List screen displays text and images from the <code class="inlineCode">journalEntries</code> array. But you can’t add or remove journal entries from the <code class="inlineCode">journalEntries</code> array yet. You will learn how to do this in the next chapter.</p>
    <h1 id="_idParaDest-215" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, you implemented the model objects for the Journal List screen to make it display a list of journal entries. You learned about the model objects that you will use, created a Swift class that can be used to store journal entry instances, and created a static method returning sample journal entries. You then created a custom instance of <code class="inlineCode">UITableViewCell</code> for your table view and used the method returning sample journal entries to populate an array. This array is then used as the data source for the table view in the Journal List screen.</p>
    <p class="normal">You now know how to create model objects, how to create sample data, and how to configure view controllers to populate table views using that sample data. This will be useful should you wish to create your own apps that use table views.</p>
    <p class="normal">In the next chapter, you’ll learn how to add and remove journal entries from the Journal List screen. You’ll also learn how to pass data between view controllers.</p>
    <h1 id="_idParaDest-216" class="heading-1">Join us on Discord!</h1>
    <p class="normal">Read this book alongside other users, experts, and the author himself. Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. Scan the QR code or visit the link to join the community.</p>
    <p class="normal"><a href="https://packt.link/ios-Swift%0D">https://packt.link/ios-Swift</a></p>
    <p class="normal"><a href="https://packt.link/ios-Swift%0D"><img src="img/QR_Code2370024260177612484.png" alt="" width="177" height="177"/></a></p>
  </div>
</div></div></body></html>