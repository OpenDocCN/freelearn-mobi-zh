<html><head></head><body>
		<div id="_idContainer311">
			<h1 id="_idParaDest-124" class="chapter-number"><a id="_idTextAnchor339"/>11</h1>
			<h1 id="_idParaDest-125"><a id="_idTextAnchor340"/>Remote Config</h1>
			<p>Getting a new build of your game exported can take quite a bit of time. It takes time to actually make the changes in the Unity Editor, and then you have to export the game and upload a new version on each of the app stores you are targeting. Then, you have to spend time waiting for them to approve the app and for everyone to actually <span class="No-Break">download it.</span><a id="_idTextAnchor341"/></p>
			<p>One of the things I talk to my students about is creating projects that can be easily changed without having to open the Unity Editor. This can be done using data-driven development practices – such as building levels or encounters using text files, AssetBundles, or Unity’s <strong class="bold">Remote Config</strong> (previously <strong class="bold">Remote Settings</strong>) menu – allowing us to instantly modify variables in copies of the game that are <span class="No-Break">already out.</span></p>
			<p>In this chapter, we’re going to see just how easy it is to set up Unity’s Remote Config system, and how we can utilize it for a simple example, by changing the difficulty of our game by changing the speed at which the <span class="No-Break">player moves.</span></p>
			<p>The chapter itself is a simple step-by-step process from beginning to end. Here is an outline of <span class="No-Break">our tasks:</span></p>
			<ul>
				<li>Remote <span class="No-Break">Config setup</span></li>
				<li>Integrating Game Overrides <span class="No-Break">into gameplay</span></li>
			</ul>
			<h1 id="_idParaDest-126"><a id="_idTextAnchor342"/>Technical requirements</h1>
			<p>This book utilizes Unity 2022.1.0b16 and Unity Hub 3.3.1, but the steps should work with minimal changes in future versions of the editor. If you would like to download the exact version used in this book, you can visit Unity’s download archive at <a href="https://unity3d.com/get-unity/download/archive">https://unity3d.com/get-unity/download/archive</a>. You can also find the system requirements for Unity at <a href="https://docs.unity3d.com/2022.1/Documentation/Manual/system-requirements.html">https://docs.unity3d.com/2022.1/Documentation/Manual/system-requirements.html</a> in the <strong class="bold">Unity Editor system requirements</strong> section. To deploy your project, you will need an Android or <span class="No-Break">iOS device.</span></p>
			<p>You can find the code files present in this chapter on GitHub <span class="No-Break">at </span><a href="https://github.com/PacktPublishing/Unity-2022-Mobile-Game-Development-3rd-Edition/tree/main/Chapter11"><span class="No-Break">https://github.com/PacktPublishing/Unity-2022-Mobile-Game-Development-3rd-Edition/tree/main/Chapter11</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-127"><a id="_idTextAnchor343"/>Remote Config setup</h1>
			<p>In order for us to use <a id="_idIndexMarker647"/>Remote Config, the first thing we’re going to need to do is add the Remote Config package to our project. So, let’s take a look at how we can do that using the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>From the Unity Editor, open the <strong class="bold">Services</strong> window of the Package Manager (shown in the top-right part of the next screenshot) by either clicking on the cloud button at the top left of the screen or going to <strong class="bold">Window</strong> | <strong class="bold">General</strong> | <span class="No-Break"><strong class="bold">Services</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div id="_idContainer298" class="IMG---Figure">
					<img src="image/B18868_11_01.jpg" alt="Figure 11.1: The location of the Services button"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.1: The location of the Services button</p>
			<p>If all goes well, you should see something like the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer299" class="IMG---Figure">
					<img src="image/B18868_11_02.jpg" alt="Figure 11.2: Package Manager | Services"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.2: Package Manager | Services</p>
			<ol>
				<li value="2">From there, scroll <a id="_idIndexMarker648"/>down and click on the <strong class="bold">Remote Config</strong> package, and then click on the <strong class="bold">Install</strong> button at the bottom right. If all went well, you should see something like the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer300" class="IMG---Figure">
					<img src="image/B18868_11_03.jpg" alt="Figure 11.3: The Remote Config packages installed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.3: The Remote Config packages installed</p>
			<ol>
				<li value="3">Close out of the <a id="_idIndexMarker649"/>Package Manager and open the <strong class="bold">Remote Config</strong> window by going to <strong class="bold">Window</strong> | <strong class="bold">Remote Config</strong>. This will open a separate window that I will then drag and drop next to the Console for ease of use. If all goes well, your editor should look similar to <span class="No-Break">the following:</span></li>
			</ol>
			<div>
				<div id="_idContainer301" class="IMG---Figure">
					<img src="image/B18868_11_04.jpg" alt="Figure 11.4: The Remote Config window added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.4: The Remote Config window added</p>
			<p>And with that, the <a id="_idIndexMarker650"/>Remote Config package is <span class="No-Break">installed correctly!</span></p>
			<p>Just like how in the previous chapter we needed to create a connection between Unity Gaming Services and our <a id="_idIndexMarker651"/>project in order to use Unity Analytics, we will also need to do the same thing to tweak Remote <span class="No-Break">Config values.</span></p>
			<h2 id="_idParaDest-128"><a id="_idTextAnchor344"/>Creating key-value pairs</h2>
			<p>The first thing we will <a id="_idIndexMarker652"/>need to do is <a id="_idIndexMarker653"/>create the variables that we would like <span class="No-Break">to change:</span></p>
			<ol>
				<li>From the Unity Editor, if the <strong class="bold">Remote Config</strong> window is open, click on the <strong class="bold">View in </strong><span class="No-Break"><strong class="bold">Dashboard</strong></span><span class="No-Break"> option.</span></li>
			</ol>
			<div>
				<div id="_idContainer302" class="IMG---Figure">
					<img src="image/B18868_11_05.jpg" alt="Figure 11.5: The Remote Config page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.5: The Remote Config page</p>
			<p>Alternatively, for <a id="_idIndexMarker654"/>those on the Unity dashboard website, you can click on <strong class="bold">LiveOps</strong>. Once there, on the left-hand side, open up the <strong class="bold">Remote Config</strong> section, and then click on the <strong class="bold">Config</strong> tab located <span class="No-Break">under it.</span></p>
			<p>This section is the location where we can set and modify the values. Just like working with dictionaries, the settings are key-value pairs, and while there is currently only one configuration now, <strong class="source-inline">production</strong>, it is possible to create many other environments. Generally, there are two configurations that can be used – <strong class="bold">Release</strong> or <strong class="bold">Development</strong>. The <strong class="bold">Release</strong> configuration is used by computers and devices running regular builds of your game. <strong class="bold">Development</strong> is the mode used by playing the game in the Unity Editor, as well as any builds created with the <strong class="bold">Development Build</strong> property set to <strong class="source-inline">True</strong> from the <strong class="bold">Build </strong><span class="No-Break"><strong class="bold">Settings</strong></span><span class="No-Break"> window.</span></p>
			<ol>
				<li value="2">Click on the <strong class="bold">Add key</strong> button in the top-right corner of the table. Under the <strong class="bold">Enter a name</strong> property, type <strong class="source-inline">RollSpeed</strong>. Under the <strong class="bold">Choose a type</strong> dropdown, select <strong class="bold">Float</strong>. Lastly, put <strong class="bold">5</strong> in <a id="_idIndexMarker655"/>the <strong class="bold">Float Value</strong> field. Finally, click on the <span class="No-Break"><strong class="bold">Add</strong></span><span class="No-Break"> button:</span></li>
			</ol>
			<div>
				<div id="_idContainer303" class="IMG---Figure">
					<img src="image/B18868_11_06.jpg" alt="Figure 11.6: Adding a key"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.6: Adding a key</p>
			<p>Then, let’s do the same thing for the <strong class="source-inline">DodgeSpeed</strong> variable with a value <span class="No-Break">of </span><span class="No-Break"><strong class="bold">5</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer304" class="IMG---Figure">
					<img src="image/B18868_11_07.jpg" alt="Figure 11.7: The DodgeSpeed and RollSpeed keys added"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.7: The DodgeSpeed and RollSpeed keys added</p>
			<ol>
				<li value="3">It’s important<a id="_idIndexMarker656"/> to note <a id="_idIndexMarker657"/>that this doesn’t actually make a change. In fact, you’ll see a note above the values saying that there are unpublished changes. Note how there is a big blue button that says <strong class="bold">Publish</strong>. Click on that to deploy the changes. It’ll present a window asking whether you want to confirm <span class="No-Break">the changes:</span></li>
			</ol>
			<div>
				<div id="_idContainer305" class="IMG---Figure">
					<img src="image/B18868_11_08.jpg" alt="Figure 11.8: Confirming our change﻿."/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.8: Confirming our change.</p>
			<ol>
				<li value="4">Now that we have some values to grab, let’s take a look at how we can actually do that. Head back into the <span class="No-Break">Unity Editor.</span></li>
				<li>In the <strong class="bold">Remote Config</strong> window, click on the <strong class="bold">Pull</strong> button. If all went well, you should see the values added to <span class="No-Break">our project:</span></li>
			</ol>
			<div>
				<div id="_idContainer306" class="IMG---Figure">
					<img src="image/B18868_11_09.jpg" alt="Figure 11.9: The values added to our Remote Config after a pull"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.9: The values added to our Remote Config after a pull</p>
			<p>It’s a good habit to <a id="_idIndexMarker658"/>pull every time that you are about to make changes to your remote configs from your project, ensuring that y<a id="_idIndexMarker659"/>ou always have the latest version of your properties possible. And with that, we’ve now seen how we can create different key-value pairs to add to <span class="No-Break">our project.</span></p>
			<h1 id="_idParaDest-129"><a id="_idTextAnchor345"/>Integrating Game Overrides into gameplay</h1>
			<p>Now that we can see how<a id="_idIndexMarker660"/> to get those values and how the<a id="_idIndexMarker661"/> system works, let’s see how we can actually integrate it with our project and have it <span class="No-Break">affect gameplay:</span></p>
			<ol>
				<li>Open up the gameplay scene if it isn’t open already, and create a new GameObject by going to <strong class="bold">GameObject</strong> | <strong class="bold">Create Empty</strong>. Name the new object <strong class="source-inline">Remote Config Manager</strong> and reset <span class="No-Break">its position.</span></li>
				<li>Then, from the <strong class="bold">Project</strong> window, go to the <strong class="source-inline">Assets\Scripts</strong> folder and create a new C# script <span class="No-Break">called </span><span class="No-Break"><strong class="source-inline">RemoteConfigManager</strong></span><span class="No-Break">.</span></li>
				<li>Attach the newly created <strong class="source-inline">RemoteConfigManager</strong> component to the <strong class="source-inline">RemoteConfigManager</strong> object we created in <em class="italic">step 1</em>. If all went well, your project should look similar to the <span class="No-Break">following screenshot.</span></li>
			</ol>
			<div>
				<div id="_idContainer307" class="IMG---Figure">
					<img src="image/B18868_11_10.jpg" alt="Figure 11.10: Adding RemoteConfigManager"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.10: Adding RemoteConfigManager</p>
			<ol>
				<li value="4">Back in<a id="_idIndexMarker662"/> the <strong class="bold">Project</strong> window, double-click on the <strong class="source-inline">RemoteConfigManager</strong> script to open it with the script editor of your choice and replace its script with <span class="No-Break">the following:</span><pre class="source-code">
using UnityEngine;
using Unity.RemoteConfig; /* ConfigManager */
public class RemoteConfigManager : MonoBehaviour
{
    public PlayerBehaviour playerBehaviour;
    public struct userAttributes { }
    public struct appAttributes { }
    private void Awake()
    {
        ConfigManager.FetchCompleted +=
            ApplyRemoteSettings;
        ConfigManager.FetchConfigs&lt;userAttributes,
            appAttributes&gt;(new userAttributes(),
                new appAttributes());
    }
    private void ApplyRemoteSettings(ConfigResponse
        configResponse)
    {
        /* Check if new settings have been loaded */
        if (configResponse.requestOrigin ==
            ConfigOrigin.Remote)
        {
            /* There are, so values should be updated
            */
           playerBehaviour.UpdateRemoteConfigValues();
        }
    }
}</pre></li>
			</ol>
			<p>In the <strong class="source-inline">Awake</strong> function, we <a id="_idIndexMarker663"/>utilize<a id="_idIndexMarker664"/> the <strong class="source-inline">ConfigManager.FetchConfigs</strong> method in order to get the app configuration settings from the remote server. Upon completing the fetch operation successfully, the <strong class="source-inline">ConfigManager.FetchCompleted</strong> event is triggered. In this case, we added an <strong class="source-inline">ApplyRemoteSettings</strong> function, which should also be called when that event triggers, which we <span class="No-Break">then implement.</span></p>
			<p>That method takes in a <strong class="source-inline">ConfigResponse</strong> struct that represents the response of a <strong class="source-inline">RemoteConfig</strong> fetch. Of note is the <strong class="source-inline">requestOrigin</strong> property, which is an enum representing the origin point of the last retrieved configuration settings. It can be one of <span class="No-Break">three options:</span></p>
			<ul>
				<li><strong class="source-inline">Cached</strong>: The config settings loaded in our current session are cached from a previous session, so no new configuration settings <span class="No-Break">are loaded</span></li>
				<li><strong class="source-inline">Default</strong>: There are no configuration settings that are loaded in the <span class="No-Break">current session</span></li>
				<li><strong class="source-inline">Remote</strong>: There are new configuration settings that were loaded from the remote server in the <span class="No-Break">current session</span></li>
			</ul>
			<p>In our case, we only need to do something if the value is <strong class="source-inline">Remote</strong>. If this is the case, that means that there are new settings that have been loaded, which means that we need to update the values that are <span class="No-Break">currently loaded.</span></p>
			<ol>
				<li value="5">Then, we need to go to the <strong class="source-inline">PlayerBehaviour</strong> script and add the following to the top section with the rest of the <span class="No-Break"><strong class="source-inline">using</strong></span><span class="No-Break"> statements:</span><pre class="source-code">
  using Unity.RemoteConfig; /* ConfigManager */</pre></li>
				<li>Afterward, we need<a id="_idIndexMarker665"/> to add the <strong class="source-inline">UpdateRemoteConfigValues</strong> function to the <strong class="source-inline">PlayerBehaviour</strong> class because it currently doesn’t exist; otherwise, we will get a <span class="No-Break">compiler error:</span><pre class="source-code">
/// &lt;summary&gt;
/// Will update each value for this component we are using with /// Remote Config
/// &lt;/summary&gt;
public void UpdateRemoteConfigValues()
{
    /* Get the value from the cloud and set the value
       to use */
    float newRollSpeed =
        ConfigManager.appConfig.GetFloat("RollSpeed");
    Debug.Log("Update RollSpeed to: " + newRollSpeed);
    rollSpeed = newRollSpeed;
    /* Get the value from the cloud and set the value
       to use */
    float newDodgeSpeed =
       ConfigManager.appConfig.GetFloat("DodgeSpeed");
    Debug.Log("Update DodgeSpeed to: " +
        newRollSpeed);
    dodgeSpeed = newDodgeSpeed;
}</pre></li>
			</ol>
			<p>In this case, we are using the <strong class="source-inline">appConfig</strong> property of <strong class="source-inline">ConfigManager</strong>, which is the <strong class="source-inline">RuntimeConfig</strong> object, allowing us to access the current values as they are currently set from the cloud for our environment(s). Then, we set the current values of our <strong class="source-inline">rollSpeed</strong> and <strong class="source-inline">dodgeSpeed</strong> variables to the values that<a id="_idIndexMarker666"/> we <a id="_idIndexMarker667"/>retrieved from <span class="No-Break">the cloud.</span></p>
			<p>For more information on the <strong class="source-inline">ConfigManager</strong> class, check out the <span class="No-Break">following: </span><a href="https://docs.unity3d.com/Packages/com.unity.remote-config@0.3/api/Unity.RemoteConfig.ConfigManager.html"><span class="No-Break">https://docs.unity3d.com/Packages/com.unity.remote-config@0.3/api/Unity.RemoteConfig.ConfigManager.htm</span></a></p>
			<ol>
				<li value="7">Save both scripts and return to the Unity Editor. Then, go to the <strong class="bold">Hierarchy</strong> window, select <strong class="bold">Remote Config Manager</strong>, and from the <strong class="bold">Inspector</strong> window, assign the <strong class="bold">Player Behaviour</strong> value to the <span class="No-Break"><strong class="bold">Player</strong></span><span class="No-Break"> object.</span></li>
			</ol>
			<div>
				<div id="_idContainer308" class="IMG---Figure">
					<img src="image/B18868_11_11.jpg" alt="Figure 11.11: Adding Player Behaviour"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.11: Adding Player Behaviour</p>
			<ol>
				<li value="8">Upon playing the<a id="_idIndexMarker668"/> game, you <a id="_idIndexMarker669"/>should be able to see in the <strong class="bold">Console</strong> window our <strong class="source-inline">Debug.Log</strong> statement being called, telling us that the value is being updated to whatever we placed in <span class="No-Break"><strong class="bold">Remote Config</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer309" class="IMG---Figure">
					<img src="image/B18868_11_12.jpg" alt="Figure 11.12: Values are updating correctly"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.12: Values are updating correctly</p>
			<ol>
				<li value="9">Since the <strong class="source-inline">dodgeSpeed</strong> and <strong class="source-inline">rollSpeed</strong> variables are now being set via the <strong class="source-inline">UpdateRemoteConfigValues</strong> function, we can now hide them from the <strong class="bold">Inspector</strong> window. Replace their declarations in the <strong class="source-inline">PlayerBehaviour</strong> script so that the class looks <span class="No-Break">as follows:</span><pre class="source-code">
/// &lt;summary&gt;
/// How fast the ball moves left/right
/// &lt;/summary&gt;
[HideInInspector]
public float dodgeSpeed = 5;
/// &lt;summary&gt;
/// How fast the ball moves forwards automatically
/// &lt;/summary&gt;
[HideInInspector]
public float rollSpeed = 5;</pre></li>
			</ol>
			<p>Here, we’ve<a id="_idIndexMarker670"/> modified the two properties, adding the <strong class="source-inline">[HideInInspector]</strong> tag, which will hide the item in the <strong class="bold">Inspector</strong> window. We’ve <a id="_idIndexMarker671"/>also changed the variables to use XML comments instead of tooltips, since they are no longer being displayed in the <span class="No-Break"><strong class="bold">Inspector</strong></span><span class="No-Break"> window.</span></p>
			<ol>
				<li value="10">Save the script and select the <strong class="bold">Player</strong> object. From there, go to the <strong class="bold">Inspector</strong> window and note that the properties are no longer visible in the <span class="No-Break"><strong class="bold">PlayerBehaviour</strong></span><span class="No-Break"> component:</span></li>
			</ol>
			<div>
				<div id="_idContainer310" class="IMG---Figure">
					<img src="image/B18868_11_13.jpg" alt="Figure 11.13: Values are hidden in the Inspector window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 11.13: Values are hidden in the Inspector window</p>
			<p>Now, the values <a id="_idIndexMarker672"/>will be set through the <strong class="bold">Remote Config</strong> component, and users won’t be confused about why their values<a id="_idIndexMarker673"/> are being replaced by what’s in <span class="No-Break"><strong class="bold">Player Behaviour</strong></span><span class="No-Break">.</span></p>
			<p>Being able to tweak these values while the game is live can be incredibly useful and allows you to share changes to the game without requiring your users to download a <span class="No-Break">new version!</span></p>
			<h1 id="_idParaDest-130"><a id="_idTextAnchor346"/>Summary</h1>
			<p>In this chapter, we learned how we can use <strong class="bold">Remote Config</strong> to make adjustments to our games on <span class="No-Break">the fly.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">There’s a lot more that you can do with Remote Settings. You can learn more about <strong class="bold">Remote Config</strong> and how to use it to work with non-default parameters <span class="No-Break">at </span><a href="https://docs.unity3d.com/Manual/UnityAnalyticsRemoteSettingsComponent.html"><span class="No-Break">https://docs.unity3d.com/Manual/UnityAnalyticsRemoteSettingsComponent.html</span></a><span class="No-Break">.</span></p>
			<p>With this, we have all of the implementation details of our game complete, but our game right now is pretty bare. In the next chapter, we will look into ways to make our game more polished, using features such as particle systems and <span class="No-Break">screen shake.</span></p>
		</div>
	</body></html>