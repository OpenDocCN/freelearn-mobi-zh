<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-49"><a id="_idTextAnchor055" class="calibre3 pcalibre pcalibre1"/>4</h1>
<h1 id="_idParaDest-50" class="calibre6"><a id="_idTextAnchor056" class="calibre3 pcalibre pcalibre1"/>Design with Material Design 3</h1>
<p class="calibre4">Material Design is a design system developed by Google. It helps us create beautiful UIs. It provides a set of guidelines and components for us to use as we’re developing our Android apps.</p>
<p class="calibre4">In this chapter, we’ll introduce ourselves to <strong class="bold">Material 3</strong>. We will also cover the features that Material 3 offers. Lastly, we will learn how to use Material 3 in our Android apps and some of the components in Material 3.</p>
<p class="calibre4">In this chapter, we’re going to cover the following main topics:</p>
<ul class="calibre16">
<li class="calibre15">Material Design 3 and its features</li>
<li class="calibre15">Using Material Design 3 in our apps</li>
<li class="calibre15">Building for large screens and foldables</li>
<li class="calibre15">Making our app accessible</li>
</ul>
<h1 id="_idParaDest-51" class="calibre6"><a id="_idTextAnchor057" class="calibre3 pcalibre pcalibre1"/>Technical requirements</h1>
<p class="calibre4">To follow the instructions in this chapter, you will need to have Android Studio Hedgehog or later (<a href="https://developer.android.com/studio" class="calibre3 pcalibre pcalibre1">https://developer.android.com/studio</a>) downloaded.</p>
<p class="calibre4">You can find the code for this chapter at <a href="https://github.com/PacktPublishing/Mastering-Kotlin-for-Android/tree/main/chapterfour" class="calibre3 pcalibre pcalibre1">https://github.com/PacktPublishing/Mastering-Kotlin-for-Android/tree/main/chapterfour</a>.</p>
<h1 id="_idParaDest-52" class="calibre6"><a id="_idTextAnchor058" class="calibre3 pcalibre pcalibre1"/>Material Design 3 and its features</h1>
<p class="calibre4">The release of <strong class="bold">Material Design 3</strong> (<strong class="bold">Material 3</strong>) came with lots of new features to help us build UIs for our apps. Here are some of the<a id="_idIndexMarker163" class="calibre3 pcalibre pcalibre1"/> features of Material Design 3:</p>
<ul class="calibre16">
<li class="calibre15"><strong class="bold">Dynamic color</strong>: This is a color system that sets the color of our apps to the color of the user’s wallpaper. The System UI also adapts to this color. This enables users to have that personalized feel for their apps. Please note that dynamic color only works for Android 12 and above devices.</li>
<li class="calibre15"><strong class="bold">More components</strong>: Material 3 has a new set of improved components that are available for use. Some components have new UIs and others have been added to the APIs.</li>
<li class="calibre15"><strong class="bold">Simplified typography</strong>: Material 3 has a much more simplified naming and grouping for typography. We have the following types: <strong class="bold">display</strong>, <strong class="bold">headline</strong>, <strong class="bold">title</strong>, <strong class="bold">body</strong>, and <strong class="bold">label</strong>, with each supporting <em class="italic">small</em>, <em class="italic">medium</em>, and <em class="italic">large</em> sizes. This makes it easier for us to define styles all across our apps.</li>
<li class="calibre15"><strong class="bold">Improved color scheme</strong>: The color scheme has undergone a lot of improvements with the addition of more color schemes to fine-grain color customization. It’s also way easier for us to support both dark and light color schemes in our apps. In addition to that, they created a new tool, Material Theme Builder (<a href="https://m3.material.io/theme-builder" class="calibre3 pcalibre pcalibre1">https://m3.material.io/theme-builder</a>), which allows us to generate and export dark and <a id="_idIndexMarker164" class="calibre3 pcalibre pcalibre1"/>light theme colors for our apps.</li>
<li class="calibre15"><strong class="bold">Simplified shapes</strong>: Similar to typography, shapes have also been simplified to the following: <strong class="bold">Extra Small</strong>, <strong class="bold">Small</strong>, <strong class="bold">Medium</strong>, <strong class="bold">Large</strong>, and <strong class="bold">Extra Large</strong>. All these shapes come with default values, which we can always override to use our own.</li>
</ul>
<p class="calibre4">The good news for us is that from Android Studio Hedgehog onward, we have project templates that come set up with Material 3, which makes things easier for us. Even the project we created in <a href="B19779_02.xhtml#_idTextAnchor031" class="calibre3 pcalibre pcalibre1"><em class="italic">Chapter 2</em></a> comes with Material 3 set up already.</p>
<p class="calibre4">Material 3 APIs and their predecessors offer a wide range of components for us to use in our apps. In the next<a id="_idIndexMarker165" class="calibre3 pcalibre pcalibre1"/> subsection, we will be looking at some of the common ones.</p>
<h2 id="_idParaDest-53" class="calibre7"><a id="_idTextAnchor059" class="calibre3 pcalibre pcalibre1"/>Material components</h2>
<p class="calibre4">The Material library<a id="_idIndexMarker166" class="calibre3 pcalibre pcalibre1"/> comes with prebuilt components that we can use to build common UI components. Let us look at some of the commonly used components and some of the updates they had in Material 3.</p>
<h3 class="calibre9">Top app bars</h3>
<p class="calibre4">This is a <a id="_idIndexMarker167" class="calibre3 pcalibre pcalibre1"/>component displayed at the top of the screen. It has a title and can also have some actions that are related to the screen the user is on. Some of the common actions are the settings icon normally at the top right of the screen. In Material 3, we have four types of top app bars: <strong class="bold">center-aligned</strong>, <strong class="bold">small</strong>, <strong class="bold">medium</strong>, and <strong class="bold">large</strong>, as shown in the following figures.</p>
<div><div><img alt="Figure 4.1 – Small top app bar" src="img/B19779_04_01.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.1 – Small top app bar</p>
<div><div><img alt="Figure 4.2 – Center-aligned top app bar" src="img/B19779_04_02.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.2 – Center-aligned top app bar</p>
<div><div><img alt="Figure 4.3 – Medium top app bar" src="img/B19779_04_03.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.3 – Medium top app bar</p>
<div><div><img alt="Figure 4.4 – Large top app bar" src="img/B19779_04_04.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.4 – Large top app bar</p>
<p class="calibre4">As seen in <em class="italic">Figures 4.1</em> to <em class="italic">4.4</em>, all the<a id="_idIndexMarker168" class="calibre3 pcalibre pcalibre1"/> top bars have the same width and only differ in height and positioning of the title text.</p>
<p class="calibre4">Let us look at the sample code for one of these top app bars:</p>
<pre class="source-code">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PacktCenterAlignedTopBar() {
    CenterAlignedTopAppBar(
        title = {
            Text(text = "Packt Publishing")
        }
    )
}</pre> <p class="calibre4">Here, we have our custom composable and, inside it, we are using the <code>CenterAlignedTopBar</code> composable from Material 3 and passing in <code>Text</code> to the <code>title</code> composable. The other three (<code>LargeTopAppBar</code>, <code>MediumTopAppBar</code>, and <code>TopAppBar</code>) are similar; the only difference is the composable that you will use. Notice that we have the <code>@OptIn</code> annotation as these components are still experimental.</p>
<p class="calibre4">Next, let us look at the <code>FloatingActionButton</code> component.</p>
<h3 class="calibre9">FloatingActionButton</h3>
<p class="calibre4">Most apps use the component to represent a call to action that is frequently used in the app. For example, create a new chat in a chat app. It is normally positioned at the bottom right of the screen or <a id="_idIndexMarker169" class="calibre3 pcalibre pcalibre1"/>elsewhere, depending on your use case. This is how we create the component:</p>
<pre class="source-code">
FloatingActionButton(
    onClick = { /*TODO*/ },
    content = {
        Icon(
            imageVector = Icons.Default.Add ,
            contentDescription = "New Chat"
        )
    }
)</pre> <p class="calibre4">We use the <code>FloatingActionButton</code> component from the Material 3 library. We have the <code>onclick</code> argument on the composable and, inside the <code>content</code> lambda, we pass in an <code>Icon</code> composable that has an <em class="italic">add</em> icon. The preview should be the following:</p>
<div><div><img alt="Figure 4.5 – FloatingActionButton" src="img/B19779_04_05.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.5 – FloatingActionButton</p>
<p class="calibre4">The <code>FloatingActionButton</code> component has these sizes: large, normal, and small, and you can use whichever fits<a id="_idIndexMarker170" class="calibre3 pcalibre pcalibre1"/> your purpose.</p>
<p class="calibre4">We have another type of <code>FloatingActionButton</code> component known as <code>ExtendedFloatingActionButton</code>, which looks like this:</p>
<div><div><img alt="Figure 4.6 – ExtendedFloatingActionButton" src="img/B19779_04_06.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.6 – ExtendedFloatingActionButton</p>
<p class="calibre4">As seen in the preceding figure, an <code>ExtendedFloatingActionButton</code> component allows us to add more items to our FAB. They are wider than the normal <code>FloatActionButton</code> components. In this case, we have a <code>Text</code> composable with the text <strong class="bold">New Chat</strong> in addition to the icon. You can use it with or without the icon. The implementation for this is as follows:</p>
<pre class="source-code">
ExtendedFloatingActionButton(
    onClick = { /*TODO*/ },
    content = {
        Icon(
            imageVector = Icons.Default.Add ,
            contentDescription = "New Chat"
        )
        Text(
            modifier = Modifier.padding(10.dp),
            text = "New Chat"
        )
    }
)</pre> <p class="calibre4">Here, we used the <code>ExtendedFloatingActionButton</code> component and still passed in the same parameters as before. The only difference is that inside the content, we pass in a text since the <code>content</code> lambda exposes <code>RowScope</code>, which means children composables will be<a id="_idIndexMarker171" class="calibre3 pcalibre pcalibre1"/> arranged in a row.</p>
<p class="calibre4">Next, let us look at the bottom app bar components.</p>
<h3 class="calibre9">Bottom app bars</h3>
<p class="calibre4">The bottom app bar components <a id="_idIndexMarker172" class="calibre3 pcalibre pcalibre1"/>display navigation items at the bottom of the screen. They are normally useful for apps that have three to five primary destinations.</p>
<p class="calibre4">Let us look at the code for a bottom app bar:</p>
<pre class="source-code">
BottomAppBar(
    actions = {
        Icon(imageVector = Icons.Rounded.Home, contentDescription = "Home Screen")
        Icon(imageVector = Icons.Rounded.ShoppingCart, contentDescription = "Cart Screen")
        Icon(imageVector = Icons.Rounded.AccountCircle, contentDescription = "Account Screen")
    }
)</pre> <p class="calibre4">We use the <code>BottomAppBar</code> component and, inside the <code>actions</code> lambda, we pass in three <code>Icon</code> composables to represent the items we are supposed to show. This is how the preview of the composable <a id="_idIndexMarker173" class="calibre3 pcalibre pcalibre1"/>will look:</p>
<div><div><img alt="Figure 4.7 – BottomAppBar" src="img/B19779_04_07.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.7 – BottomAppBar</p>
<p class="calibre4">In <em class="italic">Figure 4</em><em class="italic">,7</em>, we can see we have three icons arranged horizontally.</p>
<p class="calibre4">Additionally, in <code>BottomAppBar</code>, we can also provision a <code>FloatingActionButton</code> component. We are going to use the <code>FloatingActionButton</code> component that we used early on. The updated component code is as follows:</p>
<pre class="source-code">
BottomAppBar(
    actions = {
        Icon(imageVector = Icons.Rounded.Home, contentDescription = "Home Screen")
        Icon(imageVector = Icons.Rounded.ShoppingCart, contentDescription = "Cart Screen")
        Icon(imageVector = Icons.Rounded.AccountCircle, contentDescription = "Account Screen")
    },
    floatingActionButton = {
        PacktFloatingActionButton()
    }
)</pre> <p class="calibre4">In the preceding code, we have used the <code>floatingActionButton</code> parameter and passed in <code>PacktFloatingActionButton()</code> that we created earlier. The updated preview will be as follows:</p>
<div><div><img alt="Figure 4.8 – BottomAppBar with FloatingActionButton" src="img/B19779_04_08.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.8 – BottomAppBar with FloatingActionButton</p>
<p class="calibre4">As seen in the preceding figure, our <code>BottomAppBar</code> now has a nice <code>FloatingActionButton</code> to<a id="_idIndexMarker174" class="calibre3 pcalibre pcalibre1"/> its right. The FAB is automatically positioned for you to the right.</p>
<p class="calibre4">We have looked at the different components in isolation, but what happens when we want to place them on one screen together? Next, we are going to look at <code>Scaffold</code>, which is meant for this.</p>
<h3 class="calibre9">Scaffold</h3>
<p class="calibre4">This is a layout provided by Material Design that helps place all components on your screen in their desired <a id="_idIndexMarker175" class="calibre3 pcalibre pcalibre1"/>positions with ease.</p>
<p class="calibre4">Let us look at a sample of <code>Scaffold</code> that has a top app bar, a floating action button, text center-aligned on the screen, and a bottom navigation bar:</p>
<pre class="source-code">
Scaffold(
    topBar = {
        PacktSmallTopAppBar()
    },
    bottomBar = {
        PacktBottomNavigationBar()
    },
    floatingActionButton = {
        PacktFloatingActionButton()
    },
    content = { paddingValues -&gt;
      Column(
          modifier = Modifier
              .fillMaxSize()
              .padding(paddingValues)
              .background(Color.Gray.copy(alpha = 0.1f)),
          verticalArrangement = Arrangement.Center,
          horizontalAlignment = Alignment.CenterHorizontally
      ) {
          Text(
              modifier = Modifier.padding(10.dp),
              text = "Mastering Kotlin for Android Development - Chapter 4",
              textAlign = TextAlign.Center
          )
        }
    }
)</pre> <p class="calibre4">A lot is happening here, so let<a id="_idIndexMarker176" class="calibre3 pcalibre pcalibre1"/> us break it down:</p>
<ul class="calibre16">
<li class="calibre15">The <strong class="source-inline1">Scaffold</strong> composable is used to create a layout that implements the Material Design guidelines. It is a container that contains the top bar, bottom bar, floating action button, and the content.</li>
<li class="calibre15">The <strong class="source-inline1">topBar</strong> parameter is used to specify the top bar. In this case, we are using the <strong class="source-inline1">PacktSmallTopAppBar</strong> composable that we created earlier.</li>
<li class="calibre15">The <strong class="source-inline1">bottomBar</strong> parameter is used to specify the bottom bar. In this case, we are using the <strong class="source-inline1">PacktBottomNavigationBar</strong> composable.</li>
<li class="calibre15">The <strong class="source-inline1">floatingActionButton</strong> parameter is used to specify the floating action button. In this case, we are using the <strong class="source-inline1">PacktFloatingActionButton</strong> composable.</li>
<li class="calibre15">The <strong class="source-inline1">content</strong> parameter is used to specify the content of the screen. In this case, we are using a <strong class="source-inline1">Column</strong> composable that contains a <strong class="source-inline1">Text</strong> composable. The text is centered in the column<a id="_idIndexMarker177" class="calibre3 pcalibre pcalibre1"/> using the <strong class="source-inline1">verticalArrangement</strong> and <strong class="source-inline1">horizontalAlignment</strong> parameters. Notice that inside <strong class="source-inline1">Column</strong>, we are using the <strong class="source-inline1">paddingValues</strong> parameter to add padding to the column. This is because the <strong class="source-inline1">Scaffold</strong> composable passes the <strong class="source-inline1">padding</strong> values to the <strong class="source-inline1">content</strong> parameter.</li>
</ul>
<p class="calibre4">With our <code>Scaffold</code> composable ready, let us see how its preview looks:</p>
<div><div><img alt="Figure 4.9 – Scaffold" src="img/B19779_04_09.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.9 – Scaffold</p>
<p class="calibre4">In <em class="italic">Figure 4</em><em class="italic">.9</em>, we can see that the <code>Scaffold</code> composable has added the top bar, bottom bar, and the floating action button to the screen. The components are also placed in the correct positions <a id="_idIndexMarker178" class="calibre3 pcalibre pcalibre1"/>as per the Material Design guidelines.</p>
<p class="calibre4">We have learned about a bunch of components so far; Material 3 still offers more components out of the box for us. We will be using some of these components in the upcoming chapters of this book. To view the full list of all the components, go to the Material 3<a id="_idIndexMarker179" class="calibre3 pcalibre pcalibre1"/> Components website (https://m3.material.io/components) to see them and their guidelines.</p>
<p class="calibre4">Now that we understand Material 3 and its features, let us look at how to add it to our apps.</p>
<h1 id="_idParaDest-54" class="calibre6"><a id="_idTextAnchor060" class="calibre3 pcalibre pcalibre1"/>Using Material Design in our apps</h1>
<p class="calibre4">To take advantage of the <a id="_idIndexMarker180" class="calibre3 pcalibre pcalibre1"/>Material 3 features that we looked at in the previous section, we need to add it to our app. Luckily, with Android Studio Hedgehog, we have Material 3 templates. Even the sample apps we have been using already use Material 3. So cool, right? Let us quickly scan the dependencies to understand what is happening:</p>
<pre class="source-code">
implementation 'androidx.core:core-ktx:1.10.1'
implementation platform('org.jetbrains.kotlin:kotlin-bom:1.8.0')
implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.6.1'
implementation 'androidx.activity:activity-compose:1.7.2'
implementation platform('androidx.compose:compose-bom:2022.10.00')
implementation 'androidx.compose.ui:ui'
implementation 'androidx.compose.ui:ui-graphics'
implementation 'androidx.compose.ui:ui-tooling-preview'
implementation 'androidx.compose.material3:material3'
testImplementation 'junit:junit:4.13.2'
androidTestImplementation 'androidx.test.ext:junit:1.1.5'
androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
androidTestImplementation platform('androidx.compose:compose-bom:2022.10.00')
androidTestImplementation 'androidx.compose.ui:ui-test-junit4'
debugImplementation 'androidx.compose.ui:ui-tooling'
debugImplementation 'androidx.compose.ui:ui-test-manifest'</pre> <p class="calibre4">This dependencies block sets up several for us, including the <code>compose</code> dependencies. The most important one is the <code>androidx.compose.material3:material3</code> dependency. This is the dependency that contains <a id="_idIndexMarker181" class="calibre3 pcalibre pcalibre1"/>the Material 3 components. We are using the Compose <strong class="bold">Bill of Materials</strong> (<strong class="bold">BOM</strong>) to manage our dependencies. This means that we do not have to specify the version of each dependency. Instead, we specify the version of the BOM, and it will <a id="_idIndexMarker182" class="calibre3 pcalibre pcalibre1"/>manage the versions of the dependencies for us. This is the recommended way of managing dependencies in Compose. That is why we have not specified the version of each dependency.</p>
<p class="calibre4">With that, our project is ready to take advantage of the Material 3 features. In the next subsection, we will be adding more color schemes to the app.</p>
<h2 id="_idParaDest-55" class="calibre7"><a id="_idTextAnchor061" class="calibre3 pcalibre pcalibre1"/>Adding Material Design 3 color schemes</h2>
<p class="calibre4">As mentioned earlier, Material 3<a id="_idIndexMarker183" class="calibre3 pcalibre pcalibre1"/> comes with a lot of fine-grained color schemes and introduces <strong class="bold">dynamic color</strong>. However, they<a id="_idIndexMarker184" class="calibre3 pcalibre pcalibre1"/> are not set up with the templates that Android Studio generates. We will be setting them up in the next few steps.</p>
<p class="calibre4">Head over to the <code>ui/theme</code> package and open the <code>Color.kt</code> file, which has the following code:</p>
<pre class="source-code">
val Purple80 = Color(0xFFD0BCFF)
val PurpleGrey80 = Color(0xFFCCC2DC)
val Pink80 = Color(0xFFEFB8C8)
val Purple40 = Color(0xFF6650a4)
val PurpleGrey40 = Color(0xFF625b71)
val Pink40 = Color(0xFF7D5260)</pre> <p class="calibre4">So far, this file only has a few colors defined. These colors do not cover all the color tokens provided by Material 3. We will add more colors as we need them in the app.</p>
<p class="calibre4">We will be using the <strong class="bold">Material Theme Builder</strong> tool to generate these colors. Let us open our browser and<a id="_idIndexMarker185" class="calibre3 pcalibre pcalibre1"/> go to the Material Theme Builder tool (<a href="https://m3.material.io/theme-builder" class="calibre3 pcalibre pcalibre1">https://m3.material.io/theme-builder</a>). We will be presented with the following screen:</p>
<div><div><img alt="Figure 4.10 – Material Theme Builder tool" src="img/B19779_04_10.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.10 – Material Theme Builder tool</p>
<p class="calibre4">This tool helps us visualize the color schemes for our apps and shows how different components will be themed. It<a id="_idIndexMarker186" class="calibre3 pcalibre pcalibre1"/> makes it easier for us to customize and produce a consistent color scheme for our app. It has two tabs: <strong class="bold">Dynamic</strong> and <strong class="bold">Custom</strong>. In the <strong class="bold">Dynamic</strong> tab, we can select one of the preloaded colors or wallpapers to see how the color changes. One useful feature is that we can also add your own wallpaper and generate the colors based on the wallpaper.</p>
<p class="calibre4">In the <strong class="bold">Custom</strong> tab, we can select a color and the tool generates all the complementary colors for us based on the color we select, ensuring a harmonious color palette:</p>
<div><div><img alt="Figure 4.11 – Material Theme Builder tool custom color" src="img/B19779_04_11.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.11 – Material Theme Builder tool custom color</p>
<p class="calibre4">On the left, we have the <strong class="bold">Core colors</strong> section<a id="_idIndexMarker187" class="calibre3 pcalibre pcalibre1"/> where we can select either <strong class="bold">Primary</strong>, <strong class="bold">Secondary</strong>, <strong class="bold">Tertiary</strong>, or <strong class="bold">Neutral</strong> colors for our app.</p>
<p class="calibre4">We are going to select the <strong class="bold">Primary</strong> color option, which opens a <strong class="bold">Color </strong><strong class="bold">Picker</strong> dialog:</p>
<div><div><img alt="Figure 4.12 – Color Picker" src="img/B19779_04_12.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.12 – Color Picker</p>
<p class="calibre4">As we are changing the primary color, we will be able to see the visual preview change to match the color we have. Now <a id="_idIndexMarker188" class="calibre3 pcalibre pcalibre1"/>we have our primary color ready, we are going to export the files so that we can use them in our project:</p>
<div><div><img alt="Figure 4.13 – Export option" src="img/B19779_04_13.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.13 – Export option</p>
<p class="calibre4">As seen in <em class="italic">Figure 4</em><em class="italic">.13</em>, the visual preview has changed to the color we chose. Click on the <code>ui</code> folder that has a <code>theme</code> folder inside containing <code>Color.kt</code> and <code>Theme.kt</code> files.</p>
<p class="calibre4">Let us open the <code>Color.kt</code> file, which contains the following code:</p>
<pre class="source-code">
val md_theme_light_primary = Color(0xFF006C49)
val md_theme_light_onPrimary = Color(0xFFFFFFFF)
val md_theme_light_primaryContainer = Color(0xFF7AFAC0)
val md_theme_light_onPrimaryContainer = Color(0xFF002113)
val md_theme_light_secondary = Color(0xFF4D6357)
val md_theme_light_onSecondary = Color(0xFFFFFFFF)
val md_theme_light_secondaryContainer = Color(0xFFD0E8D8)
val md_theme_light_onSecondaryContainer = Color(0xFF0A1F16)
val md_theme_light_tertiary = Color(0xFF3D6473)
val md_theme_light_onTertiary = Color(0xFFFFFFFF)
val md_theme_light_tertiaryContainer = Color(0xFFC0E9FB)
val md_theme_light_onTertiaryContainer = Color(0xFF001F29)
val md_theme_light_error = Color(0xFFBA1A1A)
val md_theme_light_errorContainer = Color(0xFFFFDAD6)
val md_theme_light_onError = Color(0xFFFFFFFF)
val md_theme_light_onErrorContainer = Color(0xFF410002)
val md_theme_light_background = Color(0xFFFBFDF9)
val md_theme_light_onBackground = Color(0xFF191C1A)
val md_theme_light_surface = Color(0xFFFBFDF9)
val md_theme_light_onSurface = Color(0xFF191C1A)
val md_theme_light_surfaceVariant = Color(0xFFDCE5DD)
val md_theme_light_onSurfaceVariant = Color(0xFF404943)
val md_theme_light_outline = Color(0xFF707973)
val md_theme_light_inverseOnSurface = Color(0xFFEFF1ED)
val md_theme_light_inverseSurface = Color(0xFF2E312F)
val md_theme_light_inversePrimary = Color(0xFF5CDDA5)
val md_theme_light_shadow = Color(0xFF000000)
val md_theme_light_surfaceTint = Color(0xFF006C49)
val md_theme_light_outlineVariant = Color(0xFFC0C9C1)
val md_theme_light_scrim = Color(0xFF000000)
val md_theme_dark_primary = Color(0xFF5CDDA5)
val md_theme_dark_onPrimary = Color(0xFF003824)
val md_theme_dark_primaryContainer = Color(0xFF005236)
val md_theme_dark_onPrimaryContainer = Color(0xFF7AFAC0)
val md_theme_dark_secondary = Color(0xFFB4CCBD)
val md_theme_dark_onSecondary = Color(0xFF20352A)
val md_theme_dark_secondaryContainer = Color(0xFF364B40)
val md_theme_dark_onSecondaryContainer = Color(0xFFD0E8D8)
val md_theme_dark_tertiary = Color(0xFFA5CDDE)
val md_theme_dark_onTertiary = Color(0xFF063543)
val md_theme_dark_tertiaryContainer = Color(0xFF244C5A)
val md_theme_dark_onTertiaryContainer = Color(0xFFC0E9FB)
val md_theme_dark_error = Color(0xFFFFB4AB)
val md_theme_dark_errorContainer = Color(0xFF93000A)
val md_theme_dark_onError = Color(0xFF690005)
val md_theme_dark_onErrorContainer = Color(0xFFFFDAD6)
val md_theme_dark_background = Color(0xFF191C1A)
val md_theme_dark_onBackground = Color(0xFFE1E3DF)
val md_theme_dark_surface = Color(0xFF191C1A)
val md_theme_dark_onSurface = Color(0xFFE1E3DF)
val md_theme_dark_surfaceVariant = Color(0xFF404943)
val md_theme_dark_onSurfaceVariant = Color(0xFFC0C9C1)
val md_theme_dark_outline = Color(0xFF8A938C)
val md_theme_dark_inverseOnSurface = Color(0xFF191C1A)
val md_theme_dark_inverseSurface = Color(0xFFE1E3DF)
val md_theme_dark_inversePrimary = Color(0xFF006C49)
val md_theme_dark_shadow = Color(0xFF000000)
val md_theme_dark_surfaceTint = Color(0xFF5CDDA5)
val md_theme_dark_outlineVariant = Color(0xFF404943)
val md_theme_dark_scrim = Color(0xFF000000)</pre> <p class="calibre4">As you can now see, we have more color additions. Let us copy these colors to the <code>Color.kt</code> file in our project. Next, let us open the <code>Theme.kt</code> from the unzipped folder.</p>
<p class="calibre4">We will notice it is similar to the <code>Theme.kt</code> file but it defines all the Material 3 color schemes. Copy the contents of this file and paste them into the <code>Theme.kt</code> file in our project. We are going to make minor <a id="_idIndexMarker190" class="calibre3 pcalibre pcalibre1"/>edits to the code to make sure we maintain the <code>ChapterFourTheme</code> name and dynamic color logic that was in our theme. Next, we need to change the <code>DarkColorScheme</code> variable values to the following:</p>
<pre class="source-code">
private val DarkColorScheme = darkColorScheme(
    primary = md_theme_light_primary,
    onPrimary = md_theme_light_onPrimary,
    primaryContainer = md_theme_light_primaryContainer,
    onPrimaryContainer = md_theme_light_onPrimaryContainer,
    secondary = md_theme_light_secondary,
    onSecondary = md_theme_light_onSecondary,
    secondaryContainer = md_theme_light_secondaryContainer,
    onSecondaryContainer = md_theme_light_onSecondaryContainer,
    tertiary = md_theme_light_tertiary,
    onTertiary = md_theme_light_onTertiary,
    tertiaryContainer = md_theme_light_tertiaryContainer,
    onTertiaryContainer = md_theme_light_onTertiaryContainer,
    error = md_theme_light_error,
    errorContainer = md_theme_light_errorContainer,
    onError = md_theme_light_onError,
    onErrorContainer = md_theme_light_onErrorContainer,
    background = md_theme_light_background,
    onBackground = md_theme_light_onBackground,
    surface = md_theme_light_surface,
    onSurface = md_theme_light_onSurface,
    surfaceVariant = md_theme_light_surfaceVariant,
    onSurfaceVariant = md_theme_light_onSurfaceVariant,
    outline = md_theme_light_outline,
    inverseOnSurface = md_theme_light_inverseOnSurface,
    inverseSurface = md_theme_light_inverseSurface,
    inversePrimary = md_theme_light_inversePrimary,
    surfaceTint = md_theme_light_surfaceTint,
    outlineVariant = md_theme_light_outlineVariant,
    scrim = md_theme_light_scrim,
)</pre> <p class="calibre4">In the preceding code, we are using the <code>DarkColorScheme</code> function to create a dark color scheme. We are passing the colors that we generated using the Material Theme Builder tool. We will use this <a id="_idIndexMarker191" class="calibre3 pcalibre pcalibre1"/>color scheme to create a dark theme. The dark color scheme variable is defined in a similar manner, and we can copy the values from the <code>Theme.kt</code> file from the tool and add it there too. Let us now look at our theme composable in wholesome:</p>
<pre class="source-code">
@Composable
fun ChapterFourTheme(
    darkTheme: Boolean = isSystemInDarkTheme(),
    dynamicColor: Boolean = true,
    content: @Composable () -&gt; Unit
) {
    val colorScheme = when {
        dynamicColor &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S -&gt; {
            val context = LocalContext.current
            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)
        }
        darkTheme -&gt; DarkColorScheme
        else -&gt; LightColorScheme
    }
    val view = LocalView.current
    if (!view.isInEditMode) {
        SideEffect {
            val window = (view.context as Activity).window
            window.statusBarColor = colorScheme.primary.toArgb()
            WindowCompat.getInsetsController(window, view).isAppearanceLightStatusBars = darkTheme
        }
    }
    MaterialTheme(
        colorScheme = colorScheme,
        typography = Typography,
        content = content
    )
}</pre> <p class="calibre4">Let us break down the <a id="_idIndexMarker192" class="calibre3 pcalibre pcalibre1"/>preceding code:</p>
<ul class="calibre16">
<li class="calibre15">The <strong class="source-inline1">ChapterFourTheme</strong> composable is used to create a theme for our app. It takes three parameters:<ul class="calibre17"><li class="calibre15">The <strong class="source-inline1">darkTheme</strong> parameter is used to specify whether the theme is dark or light. By default, we are using the system theme.</li><li class="calibre15">The <strong class="source-inline1">dynamicColor</strong> parameter is used to specify whether the theme should use dynamic colors. By default, we are using dynamic colors.</li><li class="calibre15">The <strong class="source-inline1">content</strong> parameter is used to specify the content of the theme. In this case, we are using the <strong class="source-inline1">MaterialTheme</strong> composable to create a theme for our app.</li></ul></li>
<li class="calibre15">The <strong class="source-inline1">colorScheme</strong> variable is used to specify the color scheme to use. We are using a <strong class="source-inline1">when</strong> expression to determine the color scheme to use. If the <strong class="source-inline1">dynamicColor</strong> parameter is <strong class="source-inline1">true</strong> and the device is running Android 12 or higher, we are using the <strong class="source-inline1">dynamicDarkColorScheme</strong> or <strong class="source-inline1">dynamicLightColorScheme</strong> function to create a dynamic color scheme. When not using dynamic colors, we fall back to the normal themes. If the <strong class="source-inline1">darkTheme</strong> parameter is <strong class="source-inline1">true</strong>, we are using the <strong class="source-inline1">DarkColorScheme</strong> variable to create a dark color scheme. Otherwise, we are using the <strong class="source-inline1">LightColorScheme</strong> variable to create a light color scheme.</li>
<li class="calibre15">The <strong class="source-inline1">view</strong> variable is used to get the view that is using the theme.</li>
<li class="calibre15">The <strong class="source-inline1">SideEffect</strong> composable is used to execute a side effect. In this case, we are using it to set the status bar color and the status bar icons’ color. We are using the <strong class="source-inline1">WindowCompat</strong> class to get <strong class="source-inline1">InsetsController</strong> and set the status bar color and the status bar icons’ color. We are using the <strong class="source-inline1">colorScheme.primary</strong> color to set the status bar color. We are using the <strong class="source-inline1">darkTheme</strong> parameter to determine whether the status bar icons’ color should be light or dark.</li>
<li class="calibre15">The <strong class="source-inline1">MaterialTheme</strong> composable is used to create a theme for our app. We are using the <strong class="source-inline1">colorScheme</strong> parameter to specify the color scheme to use. We are using the <strong class="source-inline1">typography</strong> variable to specify the typography to use.</li>
</ul>
<p class="calibre4">To be able to see the changes<a id="_idIndexMarker193" class="calibre3 pcalibre pcalibre1"/> we have made, we need to call <code>PacktScaffold</code>, which we created earlier inside the <code>MainActivity.kt</code> file in the <code>ChapterFourTheme</code> block:</p>
<pre class="source-code">
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            ChapterFourTheme {
                PacktScaffold()
            }
        }
    }
}</pre> <p class="calibre4">Let us build and run the app. We should be able to see the following:</p>
<div><div><img alt="Figure 4.14 – Chapter 4 app" src="img/B19779_04_14.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.14 – Chapter 4 app</p>
<p class="calibre4">Like me, you might be wondering why<a id="_idIndexMarker194" class="calibre3 pcalibre pcalibre1"/> the app does not have the greenish color we set on the Material Theme Builder tool. Remember the dynamic color logic in our <code>ChapterFourTheme</code> composable? It is responsible for the brownish color we see. Look at my wallpaper settings:</p>
<div><div><img alt="Figure 4.15 – Wallpaper settings" src="img/B19779_04_15.jpg" class="calibre5"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 4.15 – Wallpaper settings</p>
<p class="calibre4">As seen in <em class="italic">Figure 4</em><em class="italic">.15</em>, my wallpaper has a brown color set. This means our dynamic color logic is working, and our app can adapt well to my wallpaper settings!</p>
<p class="calibre4">We have seen how to use the <a id="_idIndexMarker195" class="calibre3 pcalibre pcalibre1"/>Material 3 features in our app. In the next section, we will see how we can design UIs that work for large screens and foldables in Jetpack Compose.</p>
<h1 id="_idParaDest-56" class="calibre6"><a id="_idTextAnchor062" class="calibre3 pcalibre pcalibre1"/>Designing UIs for large screens and foldables</h1>
<p class="calibre4">In recent years and with the release of Material 3, there has been an increased focus on tablets and foldable devices. As such, we, as developers, must make our apps work well on these devices. In this<a id="_idIndexMarker196" class="calibre3 pcalibre pcalibre1"/> section, we will look at how we can make our apps work well on large screens and foldables. We need to ensure our apps adapt to the different screen sizes. Making our apps responsive provides a good user experience.</p>
<p class="calibre4">Material 3 offers <strong class="bold">canonical layouts</strong> to serve as<a id="_idIndexMarker197" class="calibre3 pcalibre pcalibre1"/> guidelines for creating UIs for large screens and foldables. These layouts are as follows:</p>
<ul class="calibre16">
<li class="calibre15"><strong class="bold">List-detail view</strong>: Here, we place a list of items on the left and, on the right, we show the details of a single item.</li>
<li class="calibre15"><strong class="bold">Feed</strong>: Here, we arrange content elements such as cards in a customizable grid, which provides a good view of a large amount of content.</li>
<li class="calibre15"><strong class="bold">Supporting pane</strong>: Here, we organize app content into primary and secondary display areas. The primary area shows the main content while the secondary area shows the supporting content. The primary area occupies most of the screen while the secondary area occupies a smaller portion.</li>
</ul>
<p class="calibre4">For us to show the different layouts, we must know the screen size of the device the user is using. Luckily for us, Jetpack Compose provides us with a way to get the screen size. We have the Material 3 <strong class="bold">WindowSizeClass</strong> to help us determine which layout to show in our app.</p>
<p class="calibre4">We are going to learn how to use <code>WindowSizeClass</code> next.</p>
<h2 id="_idParaDest-57" class="calibre7"><a id="_idTextAnchor063" class="calibre3 pcalibre pcalibre1"/>Using WindowSizeClass</h2>
<p class="calibre4">For us to use <code>WindowSizeClass</code>, we <a id="_idIndexMarker198" class="calibre3 pcalibre pcalibre1"/>must add the following dependency to our app:</p>
<pre class="source-code">
implementation 'androidx.compose.material3:material3-window-size-class'</pre> <p class="calibre4">This is the Material 3 dependency that adds <code>WindowSizeClass</code> to our project. Notice we are not providing a version for this dependency. This is because we are using the Compose BOM to manage our dependencies. The BOM will manage the version of this dependency for us.</p>
<p class="calibre4"><code>WindowSizeClass</code> classifies the available screen width into three categories:</p>
<ul class="calibre16">
<li class="calibre15"><strong class="source-inline1">Compact</strong>: This is for devices whose width is less than 600 dp. Commonly, these are devices in portrait mode.</li>
<li class="calibre15"><strong class="source-inline1">Medium</strong>: This is for devices whose width is between 600 dp and 840 dp. Devices such as tablets and foldables in portrait mode fall into this category.</li>
<li class="calibre15"><strong class="source-inline1">Expanded</strong>: This is for devices whose width is greater than 840 dp. Devices such as tablets and foldables in<a id="_idIndexMarker199" class="calibre3 pcalibre pcalibre1"/> landscape mode, phones in landscape mode, and desktops fall into this category.</li>
</ul>
<p class="calibre4"><code>WindowSizeClass</code> uses <code>widthSizeClass</code> to get the width of the screen. In addition to <code>widthSizeClass</code>, it also has <code>heightSizeClass</code> to help us determine the height of the screen.</p>
<p class="calibre4">Let us look at <code>widthSizeClass</code> in action:</p>
<pre class="source-code">
when(calculateWindowSizeClass(activity = this).widthSizeClass) {
    WindowWidthSizeClass.Compact -&gt; {
        CharactersScreen(
            navigationOptions = NavigationOptions.BottomNavigation,
            showDetails = false
        )
    }
    WindowWidthSizeClass.Medium -&gt; {
        CharactersScreen(
            navigationOptions = NavigationOptions.NavigationRail,
            showDetails = true
        )
    }
    WindowWidthSizeClass.Expanded -&gt; {
        CharactersScreen(
            navigationOptions = NavigationOptions.NavigationDrawer,
            showDetails = true
        )
    }
    else -&gt; {
        CharactersScreen(
            navigationOptions = NavigationOptions.BottomNavigation,
            showDetails = false
        )
    }
}</pre> <p class="calibre4">Here is an explanation of what the preceding code is doing:</p>
<ul class="calibre16">
<li class="calibre15">The <strong class="source-inline1">calculateWindowSizeClass</strong> function is used to calculate <strong class="source-inline1">WindowSizeClass</strong>. We are passing the activity as the parameter. The function is from the <strong class="source-inline1">WindowSizeClass</strong> APIs. It has the <strong class="source-inline1">widthSizeClass</strong> and <strong class="source-inline1">heightSizeClass</strong> properties, which<a id="_idIndexMarker200" class="calibre3 pcalibre pcalibre1"/> we can use to get the width and height of the screen, respectively.</li>
<li class="calibre15">We use <strong class="source-inline1">widthSizeClass</strong> to customize our display options:<ul class="calibre17"><li class="calibre15">For the <strong class="source-inline1">WindowWidthSizeClass.Compact</strong> case, we are using <strong class="source-inline1">BottomNavigation</strong> for navigation, and the UI should only show the list of characters</li><li class="calibre15">For the <strong class="source-inline1">WindowWidthSizeClass.Medium</strong> case, we are using <strong class="source-inline1">NavigationRail</strong> for navigation, and the UI should show the list of characters and the details of the selected character</li><li class="calibre15">For the <strong class="source-inline1">WindowWidthSizeClass.Expanded</strong> case, we are using <strong class="source-inline1">NavigationDrawer</strong> for navigation. and the UI should show the list of characters and the details of the selected character</li><li class="calibre15">We have a default case where we are using <strong class="source-inline1">BottomNavigation</strong> for navigation, and the UI<a id="_idIndexMarker201" class="calibre3 pcalibre pcalibre1"/> should only show the list of characters</li></ul></li>
</ul>
<p class="calibre4">At a glance, you can see how we take advantage of <code>WindowSizeClass</code> to customize our UI and navigation type based on the screen size. This is an immensely powerful feature that we can use to make our apps responsive. This makes sure we take advantage of the screen size and provide a good user experience.</p>
<p class="calibre4">The example shown in this section was a simple one. In <a href="B19779_07.xhtml#_idTextAnchor092" class="calibre3 pcalibre pcalibre1"><em class="italic">Chapter 7</em></a> of this book, we will have a more detailed example where we will use <code>WindowSizeClass</code> to customize our UI based on the screen size.</p>
<p class="calibre4">Now that we know how to design and build apps for large screens and foldables, let us look at yet another important topic in this chapter, which is accessibility.</p>
<h1 id="_idParaDest-58" class="calibre6"><a id="_idTextAnchor064" class="calibre3 pcalibre pcalibre1"/>Making our app accessible</h1>
<p class="calibre4">Making the apps that we develop accessible is extremely important. It ensures that our apps can be used by everyone. In this section, we will look at how we can make our apps accessible. Jetpack Compose <a id="_idIndexMarker202" class="calibre3 pcalibre pcalibre1"/>uses <strong class="bold">semantics</strong> to make our apps accessible. Semantics are used to describe the UI elements in our apps. They are used by accessibility services to make our apps accessible. Semantics are<a id="_idIndexMarker203" class="calibre3 pcalibre pcalibre1"/> also used by automated testing tools to test our apps. Some of the best practices for making our apps accessible are as follows:</p>
<ul class="calibre16">
<li class="calibre15">We should always ensure that all clickable or touchable elements or those that require user interaction are large enough to be easily tapped or clicked. Most Material components out of the box have a default size that is large enough to be easily tapped or clicked. If we must size by ourselves, we should ensure that the size is at least 48 dp by 48 dp.</li>
<li class="calibre15">We should add content descriptions to our composables. Components such as <strong class="source-inline1">Icon</strong> and <strong class="source-inline1">Image</strong> provide this argument to describe visual elements to accessibility services. We <a id="_idIndexMarker204" class="calibre3 pcalibre pcalibre1"/>should always provide a content description for these components. The following is an example:<pre class="source-code">
Icon(
    modifier = Modifier.size(48.dp),
    painter = painterResource(id = R.drawable.ic_launcher_foreground),
    contentDescription = "Icon"
)</pre><p class="calibre4">You can see in the preceding code that we are using the <code>contentDescription</code> parameter to provide a description for <code>Icon</code>. This is a good practice that we should always follow.</p></li> <li class="calibre15">We should label our clickable elements. We can pass a clickable label to the clickable modifiers. This enables us to add descriptions to our clickable elements. The following is an example:<pre class="source-code">
Text(
    modifier = Modifier
        .clickable(
            onClick = { /*TODO*/ },
            onClickLabel = "Click Me"
        )
        .padding(10.dp),
    text = "Click Me"
)</pre><p class="calibre4">In the preceding example, we are using the <code>onClickLabel</code> parameter to add a description to the <code>Text</code> composable. This is a good practice that we should always follow.</p></li> <li class="calibre15">By using semantics, we can also describe headers. Headers are used to describe the content that follows <a id="_idIndexMarker205" class="calibre3 pcalibre pcalibre1"/>them. We can use semantics to add a header to our composables. The following is an example:<pre class="source-code">
Text(
    modifier = Modifier
        .semantics { heading() }
        .padding(10.dp),
    text = "Heading One"
)</pre></li> <li class="calibre15">We can additionally provide information about the state of our composables. For example, we can provide information about the state of a button. We can use semantics to provide this information. The following is an example:<pre class="source-code">
Button(
    modifier = Modifier
        .semantics { stateDescription = "Disabled" }
        .padding(10.dp),
    onClick = { /*TODO*/ },
    enabled = false
) {
    Text(text = "Disabled Button")
}</pre><p class="calibre4">This helps us inform our users about the state of our composables.</p></li> <li class="calibre15">For some groups of components, we can also use the <strong class="source-inline1">mergeDescendants</strong> parameter to merge<a id="_idIndexMarker206" class="calibre3 pcalibre pcalibre1"/> the semantics of the children composables. The following is an example:<pre class="source-code">
Column(
    modifier = Modifier
        .padding(10.dp)
        .semantics(mergeDescendants = true) { }
) {
    Text(text = "Heading One")
    Text(text = "Heading Two")
    Text(text = "Heading Three")
}</pre><p class="calibre4">Merging descendants is useful when we want to provide a description for a group of composables. In the preceding example, we are using the <code>mergeDescendants</code> parameter to merge the semantics of the <code>Text</code> composables. However, we should be careful when using this parameter. We should only use it when we want to provide a description for a group of composables. If we use it for a large group of composables, it can lead to performance issues and can also be confusing for the users.</p></li> </ul>
<p class="calibre4">To learn more about accessibility in Jetpack Compose, visit the official documentation (<a href="https://developer.android.com/jetpack/compose/accessibility" class="calibre3 pcalibre pcalibre1">https://developer.android.com/jetpack/compose/accessibility</a>).</p>
<h1 id="_idParaDest-59" class="calibre6"><a id="_idTextAnchor065" class="calibre3 pcalibre pcalibre1"/>Summary</h1>
<p class="calibre4">In this chapter, we introduced Material 3. We also covered the features that Material 3 offers. We saw how to use Material 3 in our apps. Additionally, we covered how to design and develop our apps for large screens and, finally, we saw how to make our Jetpack Compose UIs accessible.</p>
<p class="calibre4">In the next chapter, we will continue building upon the skills that we’ve gained from the previous chapters. We will be looking at how to architect our app and the different architectures available. We will learn how to use Jetpack libraries in our apps and how to tackle dependency injection.</p>
</div>
</body></html>