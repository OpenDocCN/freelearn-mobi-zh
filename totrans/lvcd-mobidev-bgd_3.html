<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Building User Interfaces" id="aid-147LC1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Building User Interfaces</h1></div></div></div><p>
<span class="emphasis"><em>So many different screens!</em></span>
</p><p>
<span class="emphasis"><em>When making utility or game applications for desktop computers, you can often get away with having a particular sized window for which you can make custom graphics that exactly fit. With mobile devices, you have to cope with a wide range of screen sizes and aspect ratios and also have to interface elements that look correct for the operating system on the user's device.</em></span>
</p><p>LiveCode is capable of publishing on Mac, Windows, and Linux and goes some way toward solving the difficulty of making interface elements look right for each platform. The <span class="strong"><strong>View</strong></span> menu has a <span class="strong"><strong>Look and Feel</strong></span> menu item where you can choose between <span class="strong"><strong>Native Theme</strong></span>, <span class="strong"><strong>Mac OS Classic</strong></span>, <span class="strong"><strong>Windows 95</strong></span>, and <span class="strong"><strong>Motif</strong></span>. The same isn't true for mobile operating systems as all controls look like Motif. You still have two choices though: you can create graphics that look like they belong in your target OS, or you can call native routines in order to let the system itself present the appropriate controls.</p><p>In this chapter, we will:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Set up a <span class="emphasis"><em>test bed</em></span> mobile application</li><li class="listitem">Open an e-mail and browser windows</li><li class="listitem">Show a date picker control</li><li class="listitem">Load pictures from the library and camera</li><li class="listitem">Make an iOS styled button</li><li class="listitem">Manually lay out an interface</li><li class="listitem">Use code to lay out an interface</li><li class="listitem">Look at a powerful mobile interface control's add-on</li></ul></div><div class="section" title="Setting up a test bed mobile app"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec32"/>Setting up a test bed mobile app</h1></div></div></div><p>As a proving <a id="id177" class="indexterm"/>ground for the things we're going to try, we'll set up a single mobile app that has multiple screens, one for each of the things we want to test.</p><p>What should we call the test bed app? We could call it almost anything, but we'll let the iPhone make the decision for us. On the iPhone and iPod touch, there is only a small amount of space under the home screen icons for the name to appear. iOS will take your nice long app name and show a shortened version of the name, using ellipses to concatenate the ends of the name together. My super duper app will appear as My sup…app, not quite as informative! The number of letters that can appear without the text being truncated will vary depending on the width of the letters used, but typically, it has a limit of 11 letters. So, we will call the test bed app LC Test Bed, which is exactly 11 letters!</p></div></div>
<div class="section" title="Time for action &#x2013; making the test bed stack" id="aid-1565U1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec33"/>Time for action – making the test bed stack</h1></div></div></div><p>Before we create the <a id="id178" class="indexterm"/>iOS and Android apps, we should get what we want ready, as a LiveCode stack and fully test it on our desktop computers. The following steps are going to assume that you know how to do what is asked in LiveCode, without precise instructions.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open LiveCode, create a new <span class="strong"><strong>Mainstack</strong></span>, and save it as <code class="literal">LCTestBed</code>.</li><li class="listitem">Set the screen size to 320 x 480. This is just to make sure that things appear on the smallest of screens. The things we will make, will appear at the upper-left corner area of the larger screens.</li><li class="listitem">We are going to make a button for each card in the stack; let's start by making a card named <span class="strong"><strong>Menu</strong></span>.</li><li class="listitem">Add buttons for <span class="strong"><strong>Email</strong></span>, <span class="strong"><strong>Browser</strong></span>, <span class="strong"><strong>DatePicker</strong></span>, and <span class="strong"><strong>Picture</strong></span>. Make sure that the buttons are big enough to touch on your devices. You should have something like what is shown here:<div class="mediaobject"><img src="../Images/image00255.jpeg" alt="Time for action – making the test bed stack"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Create four new cards and name each one so that they match the button names.</li><li class="listitem">Back at the first <a id="id179" class="indexterm"/>card, set the script of each button to go to the matching cards with this script:<div class="informalexample"><pre class="programlisting">on mouseUp
go card the short name of me
end mouseUp</pre></div></li><li class="listitem">On each card, create a button to return to the Menu card. Name the button <code class="literal">Menu</code>. Set its script to the same as the other buttons.</li><li class="listitem">Select the Run (browse) tool and try clicking on the buttons to jump to the four cards and back to the menu.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec50"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>Well, nothing too exciting! However, you should now have five cards and the ability to go in and out of the Menu card. We're going to add scripts to each card to help illustrate its various features. The most efficient approach will be to add all the scripts and related buttons and fields and then to test the final test bed app in one go. However, where's the fun in that! Instead, we'll go one feature at a time…</p></div><div class="section" title="Invoking the desktop e-mail application"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec51"/>Invoking the desktop e-mail application</h2></div></div></div><p>There are many <a id="id180" class="indexterm"/>cases where you may <a id="id181" class="indexterm"/>want to hear from the users of your applications. Perhaps, you want them to e-mail suggested improvements or to ask you questions. You could easily launch their e-mail program and leave the user to figure out what to write. Alternately, you could set the <span class="strong"><strong>To</strong></span> address, <span class="strong"><strong>Subject</strong></span>, and even some of the <span class="strong"><strong>Body</strong></span> of the message. At the very least, it would make your life easier because you could filter incoming e-mails based on something that you placed in the Subject field.</p></div></div>
<div class="section" title="Time for action &#x2013; calling the native e-mail application" id="aid-164MG1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec34"/>Time for action – calling the native e-mail application</h1></div></div></div><p>In the following <a id="id182" class="indexterm"/>steps we'll make some fields <a id="id183" class="indexterm"/>and a button to try sending an e-mail feature:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to the <span class="strong"><strong>Email</strong></span> card and create four fields. Name them <span class="strong"><strong>To</strong></span>, <span class="strong"><strong>CC</strong></span>, <span class="strong"><strong>Subject</strong></span>, and <span class="strong"><strong>Body</strong></span>.</li><li class="listitem">Make a button named <span class="strong"><strong>Test</strong></span>.</li><li class="listitem">In the <span class="strong"><strong>Test</strong></span> button, add this script:<div class="informalexample"><pre class="programlisting">on mouseUp
  put field "To" into toText
  put field "CC" into ccText
  put field "Subject" into subjectText
  put field "Body" into bodyText
  revMail toText,ccText,subjectText,bodyText
end mouseUp</pre></div></li><li class="listitem">Select the <span class="strong"><strong>Run</strong></span> tool and type in example information in each of the fields.</li><li class="listitem">After setting up the <span class="strong"><strong>Standalone Application Settings…</strong></span> and selecting the <span class="strong"><strong>Test Target</strong></span>, click on the <span class="strong"><strong>Test</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec52"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>One neat thing about the LiveCode syntax is that the code for mobile also works for desktop applications and vice versa. All being well, when you click on the Test button, you will find yourself in your default e-mail application ready to send the message that you had entered in the LiveCode stack fields.</p></div><div class="section" title="Installing the e-mail test on devices"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec53"/>Installing the e-mail test on devices</h2></div></div></div><p>It's no great <a id="id184" class="indexterm"/>surprise that the desktop test <a id="id185" class="indexterm"/>worked. The ability to open other applications is the basic feature of LiveCode. Still, it's neat to send over some initial <a id="id186" class="indexterm"/>text for the new <a id="id187" class="indexterm"/>message to take on. Next, we should check whether this works on devices too.</p></div></div>
<div class="section" title="Time for action &#x2013; trying the test bed stack on devices"><div class="titlepage" id="aid-173722"><div><div><h1 class="title"><a id="ch03lvl1sec35"/>Time for action – trying the test bed stack on devices</h1></div></div></div><p>Connect your <a id="id188" class="indexterm"/>Android and/or iOS device to your computer using USB. These instructions are almost the same as in the previous chapter, when we tested a "Hello World" stack. After this point, any directions will be briefer and based on the assumption that you know the steps needed to test an app on your device. <a class="link" title="Chapter 7. Deploying to Your Device" href="part0093.xhtml#aid-2OM4A2">Chapter 7</a>, <span class="emphasis"><em>Deploying to Your Device</em></span>, describes all the options in the <span class="strong"><strong>Standalone Applications Settings</strong></span> dialog. For the moment, we're only going to fill in a few details, so here, we will just view a portion of the dialog, starting with the Android settings:</p><div class="mediaobject"><img src="../Images/image00256.jpeg" alt="Time for action – trying the test bed stack on devices"/></div><p style="clear:both; height: 1em;"> </p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Make sure that <span class="strong"><strong>Android</strong></span> is checked in the <span class="strong"><strong>Standalone Application Settings</strong></span> dialog.</li><li class="listitem">In the <span class="strong"><strong>Identifier</strong></span> field, type in an identifier that will be unique; <code class="literal">com.yourname.lctestbed</code> would do.</li><li class="listitem">Get your device to its home screen past the initial lock screen if there is one.</li><li class="listitem">In LiveCode, choose <span class="strong"><strong>Development/Test Target</strong></span> and select your Android device. It will be named as <span class="strong"><strong>Android</strong></span> followed by a long number.</li><li class="listitem">Choose the <span class="strong"><strong>Development/Test</strong></span> option.</li><li class="listitem">After compilation, the stack should run on your Android device and you should be able to touch the <span class="strong"><strong>Email</strong></span> button and perform a test message that will use the Android e-mail application.</li></ol><div style="height:10px; width: 1px"/></div><p>On iOS, if you haven't <a id="id189" class="indexterm"/>already done so, read <a class="link" title="Chapter 7. Deploying to Your Device" href="part0093.xhtml#aid-2OM4A2">Chapter 7</a>, <span class="emphasis"><em>Deploying to Your Device</em></span>, on how to deploy to your device. At least read the parts that show you how to install your iOS developer certificates and provisioning files. As with Android, we're only going to alter a couple of items in the Standalone Application Settings. The following is the screenshot of the dialog that we'll be altering:</p><div class="mediaobject"><img src="../Images/image00257.jpeg" alt="Time for action – trying the test bed stack on devices"/></div><p style="clear:both; height: 1em;"> </p><p>Perform the following steps for an iOS device:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Change the <span class="strong"><strong>Standalone Application Settings</strong></span> to <span class="strong"><strong>iOS</strong></span>.</li><li class="listitem">Under <span class="strong"><strong>Basic Application Settings</strong></span> of the iOS settings is a <span class="strong"><strong>Profile</strong></span> drop-down menu of the provisioning files that you have installed. Choose the one that is configured for the device you are going to test the app on.</li><li class="listitem">In the <span class="strong"><strong>Internal App ID</strong></span> field, type in a unique ID. As with Android, <code class="literal">com.yourname.lctestbed</code> would do. <code class="literal">yourname</code> would of course be your name or your company name.</li><li class="listitem">If you are testing on iPad, select the <span class="strong"><strong>iPod, iPhone and iPad</strong></span> option from the <span class="strong"><strong>Supported Devices</strong></span> drop-down menu.</li><li class="listitem">Close the dialog and choose <span class="strong"><strong>Save as Standalone Application…</strong></span> from the <span class="strong"><strong>File</strong></span> menu.</li><li class="listitem">When the saving is done, you may see a warning message telling you about missing splash screens and icons. It won't matter for now.</li><li class="listitem">In <span class="strong"><strong>Finder</strong></span>, locate the folder that was just created and open it to reveal the app file itself.</li><li class="listitem">Open <span class="strong"><strong>Xcode</strong></span> and choose <span class="strong"><strong>Devices</strong></span> from the <span class="strong"><strong>Window</strong></span> menu.</li><li class="listitem">You should see your device listed. Select it and if you see a button labeled <span class="strong"><strong>Use for Development</strong></span>, click on that button.</li><li class="listitem">Drag the app file <a id="id190" class="indexterm"/>straight from the <span class="strong"><strong>Finder</strong></span> window to your device in the <span class="strong"><strong>Organizer</strong></span> window.</li><li class="listitem">The small colored circle next to the device will turn orange for a moment and then back to green.</li><li class="listitem">You can now open the app and try the <span class="strong"><strong>Email</strong></span> button and test message, which will use the standard iOS Mail application.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec54"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We went through the steps needed to install the test bed app on both Android and iOS devices. We also had to change a couple of things in the standalone application settings. As you saw, there are quite a lot of settings in there. You can look forward to learning about them all in <a class="link" title="Chapter 7. Deploying to Your Device" href="part0093.xhtml#aid-2OM4A2">Chapter 7</a>, <span class="emphasis"><em>Deploying to Your Device</em></span>!</p></div><div class="section" title="Opening a web page"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec55"/>Opening a web page</h2></div></div></div><p>Another <a id="id191" class="indexterm"/>requirement in your applications is being able to present <a id="id192" class="indexterm"/>additional online information. You want the user to click on a link, or touch as the case may be, so that he/she is taken to a page that lists all the other applications that the user can buy from you!</p></div></div>
<div class="section" title="Time for action &#x2013; calling the native browser application" id="aid-181NK1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec36"/>Time for action – calling the native browser application</h1></div></div></div><p>This next <a id="id193" class="indexterm"/>test will go faster, or at least, the instructions will be briefer, as we will condense some of the steps in more concise directions, as given here:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Copy the <span class="strong"><strong>Test</strong></span> button on the <span class="strong"><strong>Email</strong></span> card and paste it on the <span class="strong"><strong>Browser</strong></span> card, just to save you some time making the button look nice.</li><li class="listitem">Edit the <span class="strong"><strong>Test</strong></span> button script and change it to this:<div class="informalexample"><pre class="programlisting">on mouseUp
  launch url "http://www.runrev.com/"
end mouseUp</pre></div></li><li class="listitem">Choose the <span class="strong"><strong>Run</strong></span> tool and click on the <span class="strong"><strong>Test</strong></span> button. You will see the RunRev home page in your default browser.</li></ol><div style="height:10px; width: 1px"/></div><p>The steps for trying the app on devices is exactly the same as with the steps to test the e-mail feature. For Android:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select Android in the <span class="strong"><strong>Standalone Application Settings</strong></span>.</li><li class="listitem">Select your Android device as the test target from the <span class="strong"><strong>Development</strong></span> menu (most likely, it will still be selected from before).</li><li class="listitem">Select <span class="strong"><strong>Test</strong></span> from the <span class="strong"><strong>Development</strong></span> menu.</li><li class="listitem">The previous test of the app will be overwritten and the new version will be launched automatically.</li><li class="listitem">Try clicking on the <span class="strong"><strong>Browser</strong></span> button and the <span class="strong"><strong>Test</strong></span> button that you just created on the Browser card. The <a class="ulink" href="http://runrev.com/">http://runrev.com/</a> page should be opened if you click on them.</li></ol><div style="height:10px; width: 1px"/></div><p>For iOS:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select iOS in the standalone application settings.</li><li class="listitem">Redo <span class="strong"><strong>Save as Standalone Application</strong></span> and then drag the app file on your device in the <span class="strong"><strong>Organizer</strong></span> window of Xcode, as you did the first time.</li><li class="listitem">Try the <span class="strong"><strong>Browser</strong></span> and <span class="strong"><strong>Test</strong></span> buttons; you should see that the RunRev home page has opened inside Safari.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec56"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>As with the Email test, adding the standard code to open a web page works for Android and iOS just as it does for a desktop computer.</p><p>If you are testing on both Android and iOS, you will notice that the behavior is different when you return after looking at a web page. With Android, you can press the back arrow button and still be on the Browser card of your stack. With iOS, the stack is restarted when you return. We will examine a solution later, where we write data to an external file, so that <a id="id194" class="indexterm"/>when the app is reopened, we can return the user before leaving the app.</p></div></div>
<div class="section" title="The mobile-only date picker" id="aid-190861"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec37"/>The mobile-only date picker</h1></div></div></div><p>The next couple of examples we will try are the ones that only work on mobile devices and not on desktop computers.</p></div>
<div class="section" title="Time for action &#x2013; displaying a date picker" id="aid-19UOO1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec38"/>Time for action – displaying a date picker</h1></div></div></div><p>Many applications <a id="id195" class="indexterm"/>require the user to choose a date for an event, and with mobile devices, there is a particular look to the date picker that you are shown. Using LiveCode let's us display such a control:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Copy the <span class="strong"><strong>Test</strong></span> <a id="id196" class="indexterm"/>button from the Browser card and paste it on the DatePicker card.</li><li class="listitem">Edit the script to make it like this:<div class="informalexample"><pre class="programlisting">on mouseUp
iphonePickDate "date"
end mouseUp</pre></div></li><li class="listitem">Select the <span class="strong"><strong>Run</strong></span> tool and try the <span class="strong"><strong>Test</strong></span> button. You'll see an error because this is a mobile-only feature.</li><li class="listitem">For a change, select <span class="strong"><strong>iPhone</strong></span> or <span class="strong"><strong>iPad Simulator</strong></span> from the <span class="strong"><strong>Development/Test Target</strong></span> menu and then choose <span class="strong"><strong>Test</strong></span> from the <span class="strong"><strong>Development</strong></span> menu.</li><li class="listitem">You will see your stack open in the iOS simulator and you can try the <span class="strong"><strong>DatePicker</strong></span> and <span class="strong"><strong>Test</strong></span> buttons to then see the iOS date picker displayed.</li><li class="listitem">Perform the same old Save As and install using the Organizer window steps to try the date picker on your iOS device.</li><li class="listitem">Touch the <span class="strong"><strong>DatePicker</strong></span> button on the menu card and the <span class="strong"><strong>Test</strong></span> button on the Datepicker card. An iOS native date picker should appear.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec57"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>Hopefully, you're getting better and are able to build and install mobile apps faster by now! In addition to testing again on a device, we also tried out the simulator. Generally speaking, it is faster to use the iOS simulator whenever you can, and only test on a device when you're checking things such as multi-touch, accelerometer, and camera support.</p></div></div>
<div class="section" title="Time for action &#x2013; loading pictures for a mobile device" id="aid-1AT9A1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec39"/>Time for action – loading pictures for a mobile device</h1></div></div></div><p>Maybe one day it will be <a id="id197" class="indexterm"/>possible for us to bring in images from the user's <a id="id198" class="indexterm"/>desktop computer photo application or from their web camera, but for now, these features only work on mobile devices.</p><p>LiveCode can call upon the native photo library and camera apps. We will test both of these on Android and iOS, but of course, only if your device has some saved images and a camera. For Kindle Fire, which doesn't have a camera, make sure that you save some pictures in the Gallery app, so that we can at least try loading those. Follow these steps to load pictures for a mobile device:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Copy the <span class="strong"><strong>Test</strong></span> button from the <code class="literal">DatePicker</code> card and paste it twice on the Pictures card. Change the name of the buttons to Test Camera and Test Library.</li><li class="listitem">Edit the script of the test camera button to be:<div class="informalexample"><pre class="programlisting">on mouseUp
mobilePickPhoto "camera"
end mouseUp</pre></div></li><li class="listitem">Edit the script of the test library button to be:<div class="informalexample"><pre class="programlisting">on mouseUp
mobilePickPhoto "library"
end mouseUp</pre></div></li><li class="listitem">As we test the loading of pictures, the image that is loaded will lie on top of the test buttons, stopping us from returning to the menu card. To solve this issue, add this to the card script:<div class="informalexample"><pre class="programlisting">on mouseUp
if word 1 of the target is "image" then delete the target
end mouseUp</pre></div></li><li class="listitem">Go in the <span class="strong"><strong>Standalone Application Settings</strong></span> and select <span class="strong"><strong>Android</strong></span>.</li><li class="listitem">We have to ask the <a id="id199" class="indexterm"/>Android OS permission to use <a id="id200" class="indexterm"/>the camera and store the image, so check the boxes for <span class="strong"><strong>Camera</strong></span> and <span class="strong"><strong>Write External Storage</strong></span>:<div class="mediaobject"><img src="../Images/image00258.jpeg" alt="Time for action – loading pictures for a mobile device"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Repeat the steps for testing on your Android device, or installing on your iOS device.</li><li class="listitem">Once the app is running on your device, touch <span class="strong"><strong>Pictures</strong></span> on the first screen and then <span class="strong"><strong>Test Library</strong></span>. You should see typical OS-specific options to choose a picture from your library or gallery.</li><li class="listitem">The picture you have selected is loaded on the card window and will fill most of the screen, obscuring our test and menu buttons. The card script we entered gives you the ability to touch the image in order to delete it so that you can then try another test.</li><li class="listitem">Try the <span class="strong"><strong>Test Camera</strong></span> <a id="id201" class="indexterm"/>button. You will see the OS-specific camera application and when you have taken a picture and touched the <a id="id202" class="indexterm"/><span class="strong"><strong>Use</strong></span> or <span class="strong"><strong>Ok</strong></span> button in the camera application, the image will be placed on the Pictures card.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec58"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>These simple scripts illustrate how LiveCode is able to call the OS-specific applications to do what would otherwise take a lot of coding. What's more, as later iOS and Android OS versions are released, the same simple scripts activate the more advanced features that Apple and Google will have implemented.</p></div><div class="section" title="Pop quiz – getting the big picture"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec59"/>Pop quiz – getting the big picture</h2></div></div></div><p>Q1. We take so much for granted when it comes to improvements in technology. You might feel hard done by if your phone's camera is a measly 2 megapixels, but think back to how things were long ago and how big a picture you were used to seeing. In terms of the number of pixels, how many original Macintosh screens can fit in the area shown by a single 8 megapixel photo?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">4</li><li class="listitem">15</li><li class="listitem">24</li><li class="listitem">45</li></ol><div style="height:10px; width: 1px"/></div><p>Answer: 45!</p><p>The original Mac had a screen that was 512 x 342 pixels. This will fit more than 45 times in the area of an 8 megapixel photo.</p></div></div>
<div class="section" title="Making OS-styled buttons" id="aid-1BRPS1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec40"/>Making OS-styled buttons</h1></div></div></div><p>It's nice that LiveCode <a id="id203" class="indexterm"/>can call upon an OS's native controls, but this raises a problem because the standard Motif-styled buttons will look ugly when used with the OS buttons. We can fix this either using built-in features of LiveCode or with the use of an add-on product.</p><div class="section" title="Using bitmaps"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec60"/>Using bitmaps</h2></div></div></div><p>As we saw in <a class="link" title="Chapter 1. LiveCode Fundamentals" href="part0016.xhtml#aid-F8901">Chapter 1</a>, <span class="emphasis"><em>LiveCode Fundamentals</em></span>, you can use different bitmaps for the button's states. You could get <a id="id204" class="indexterm"/>such images by taking screenshots of the buttons on your mobile device, at least with the iOS and Android OS v4 and later versions, or you can save a lot of time by downloading files that others have made available. Some of these files are only licensed for use in prototypes; here, we'll take a look at one of the files that is also licensed to be used in commercial products.</p></div></div>
<div class="section" title="Time for action &#x2013; using Photoshop to prepare button states"><div class="titlepage" id="aid-1CQAE2"><div><div><h1 class="title"><a id="ch03lvl1sec41"/>Time for action – using Photoshop to prepare button states</h1></div></div></div><p>The file we are <a id="id205" class="indexterm"/>going to use has Photoshop filter effects that other programs cannot handle, so unfortunately, you will <a id="id206" class="indexterm"/>need Photoshop to follow all of these steps or at least have a friend who has Photoshop! Pixelmator and GraphicConverter on Mac OS X can also extract graphics from the file, possibly, by just copying an area of the screen.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Read the following article:<p>
<a class="ulink" href="http://spin.atomicobject.com/2011/03/07/photoshop-template-for-ios-buttons/">http://spin.atomicobject.com/2011/03/07/photoshop-template-for-ios-buttons/</a>
</p></li><li class="listitem">The article points to some other sources of information; for now though, download the following file:<p>
<a class="ulink" href="http://spin.atomicobject.com/assets/2011/3/7/iOS_Buttons.psd">http://spin.atomicobject.com/assets/2011/3/7/iOS_Buttons.psd</a>
</p></li><li class="listitem">Open the file in Photoshop (it may open automatically).</li><li class="listitem">In the Layers palette, hide the layers named Background and Tool Bar – Retina.</li><li class="listitem">Expand the layer named <span class="strong"><strong>Bar Button – Retina</strong></span>, and hide the <span class="strong"><strong>Button Label</strong></span> layer.</li><li class="listitem">Use the Marquee tool to select an area around the upper-right-hand side button. It should all look like this:<div class="mediaobject"><img src="../Images/image00259.jpeg" alt="Time for action – using Photoshop to prepare button states"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Choose <span class="strong"><strong>Copy Merged</strong></span> from the <span class="strong"><strong>Edit</strong></span> menu.</li><li class="listitem">Select <span class="strong"><strong>New</strong></span> from the <span class="strong"><strong>File</strong></span> menu and make sure that the <span class="strong"><strong>Background Contents</strong></span> property is set to <span class="strong"><strong>Transparent</strong></span> and accept the size you are given.</li><li class="listitem">Paste the content, it will be an exact fit, and you will see the idle state for that button.</li><li class="listitem">Choose <span class="strong"><strong>Save for Web &amp; Devices…</strong></span> from the <span class="strong"><strong>File</strong></span> menu.</li><li class="listitem">In the save dialog, select <span class="strong"><strong>24 bit PNG</strong></span> and make sure that the <span class="strong"><strong>Transparency</strong></span> box is <a id="id207" class="indexterm"/>checked. Save the PNG with a suitable name, say <code class="literal">bluebuttonup.png</code>.</li><li class="listitem">Return to the <a id="id208" class="indexterm"/>main document and turn on the Visible = Active layer.</li><li class="listitem">Do another <span class="strong"><strong>Copy Merged</strong></span> | <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Paste</strong></span> | <span class="strong"><strong>Save for Web &amp; Devices…</strong></span>.</li><li class="listitem">Save the PNG as <code class="literal">bluebuttondown.png</code>.</li><li class="listitem">Go back to LiveCode.</li><li class="listitem">Reopen the test bed stack.</li><li class="listitem">Use <span class="strong"><strong>File</strong></span>, <span class="strong"><strong>Import As Control</strong></span>, and <span class="strong"><strong>Image File…</strong></span> to bring the two PNGs in the stack.</li><li class="listitem">You can place the two images anywhere. Uncheck <span class="strong"><strong>Visible</strong></span> in <span class="strong"><strong>Basic Properties</strong></span> for each image.</li><li class="listitem">Add a new button to the first card and give it the name Location.</li><li class="listitem">Set the button script to:<div class="informalexample"><pre class="programlisting">on mouseUp
  iphoneStartTrackingLocation
  put iphoneCurrentLocation() into theLocation
  answer theLocation["latitude"]
end mouseUp</pre></div></li><li class="listitem">Select the Location button and in <span class="strong"><strong>Basic Properties</strong></span> of the <span class="strong"><strong>Inspector</strong></span> palette, turn off <span class="strong"><strong>Show name</strong></span> and <span class="strong"><strong>Opaque</strong></span>.</li><li class="listitem">In <span class="strong"><strong>Icons &amp; Border</strong></span>, turn off <span class="strong"><strong>Three D</strong></span>, <span class="strong"><strong>Border</strong></span> and <span class="strong"><strong>Hilite border</strong></span>.</li><li class="listitem">Click on the magic wand button next to the <span class="strong"><strong>Icon</strong></span> entry in the <span class="strong"><strong>Inspector</strong></span> palette.</li><li class="listitem">From the <span class="strong"><strong>Image library</strong></span> drop-down menu, select <span class="strong"><strong>This Stack</strong></span>.</li><li class="listitem">Click on the lighter one of the two blue images.</li><li class="listitem">Click on the magic wand button next to the <span class="strong"><strong>Hilite icon</strong></span> entry and then click on the darker of the two images.</li><li class="listitem">Resize the button just big enough to show the blue image without it being cropped.</li><li class="listitem">Place a Label field on top of the button.</li><li class="listitem">In <span class="strong"><strong>Basic Properties</strong></span>, check the <span class="strong"><strong>Disabled</strong></span> box. This is to make sure that the field doesn't trap the click you are going to perform. We want the button to get that click.</li><li class="listitem">In <a id="id209" class="indexterm"/><span class="strong"><strong>Contents</strong></span>, enter <code class="literal">Location</code>.</li><li class="listitem">Under <span class="strong"><strong>Text </strong></span><a id="id210" class="indexterm"/><span class="strong"><strong>Formatting</strong></span>, set the field to use <span class="strong"><strong>Helvetica Neue, 18 point, Bold, and center aligned</strong></span>.</li><li class="listitem">Under Colors &amp; Palettes, set the text color white.</li><li class="listitem">Align the field and the button so that the two are centered on each other.</li><li class="listitem">If you now test using the iOS Simulator and click on the Location button, you will just see a zero, but trying on a device should display your latitude when you touch the button (you will have to give permission to the app to know your location the first time you press the button.)</li></ol><div style="height:10px; width: 1px"/></div><div class="note" title="Note"><h3 class="title"><a id="note06"/>Note</h3><p>Note that the <a id="id211" class="indexterm"/>example is in the iOS 6 format. iOS 8 <a id="id212" class="indexterm"/>can be found at:</p><p>
<a class="ulink" href="http://www.teehanlax.com/tools/iphone/">http://www.teehanlax.com/tools/iphone/</a>
</p></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec61"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>Although the button we made, may not be of the perfect size or even have the correct look for a standalone iOS button, we did go through all of the steps that you would need to make button state images. Placing a LiveCode field over the image buttons doesn't necessarily give it the best appearance. In reality, you would take more time in Photoshop to make a button of the right width for the label you're using and might also have to add the text to the image itself. It would look better and would not need a field to show the button's name in LiveCode.</p><p>LiveCode is able to use code to create the images we need, by setting the points of a graphic and its <code class="literal">fillGradient</code>. However, once you have the component parts needed to simulate a button or <a id="id213" class="indexterm"/>other kind of control, it would still take a lot more scripting to manage these elements.</p><p>There is an easy way out, although, it will cost you $50!</p></div><div class="section" title="Pop quiz – the cost of things these days"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec62"/>Pop quiz – the cost of things these days</h2></div></div></div><p>Q1. With the increase in your expectations about the size of a digital photo, you also expect to get a lot more for your money these days. While you weigh up the advantages of spending $50, how much better value do you think a computer's memory is now, compared to 25 years ago?</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">10 times better</li><li class="listitem">Half as good</li><li class="listitem">100 times better</li><li class="listitem">20,000 times better!</li></ol><div style="height:10px; width: 1px"/></div><p>Answer: 4</p><p>Yes indeed. 25 years ago, Apple was selling a 4 MB add-on kit for Macintosh II for about $1,500. They now sell a 64 GB add-on for Mac Pro for $1,200.</p></div></div>
<div class="section" title="MobGUI to the rescue!" id="aid-1DOR01"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec42"/>MobGUI to the rescue!</h1></div></div></div><p>RunRev is based in <a id="id214" class="indexterm"/>Edinburgh, Scotland, and they're a talented bunch! However, they're not the only talented Scottish folk, there's John Craig as well. He has <a id="id215" class="indexterm"/>developed a powerful add-on to LiveCode that includes an increasingly long list of iOS- and Android-OS-like controls. If you were to buy his product, you would have to pay $50 for which you get the current version plus any updates that are released in the 12 months following your purchase date. While we take a look at it here, we can also use a trial version of the product.</p></div>
<div class="section" title="Time for action &#x2013; getting started with MobGUI" id="aid-1ENBI1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec43"/>Time for action – getting started with MobGUI</h1></div></div></div><p>As with the other <a id="id216" class="indexterm"/>add-ons to LiveCode, MobGUI needs to be installed in the LiveCode plugins folder. On Windows, this will be at <code class="literal">My Documents/My LiveCode/Plugins</code>. On Mac, it will be at <code class="literal">~/Documents/My LiveCode/Plugins</code>. This default location can be changed under the <span class="strong"><strong>LC Preferences</strong></span> menu and <span class="strong"><strong>Files &amp; Memory</strong></span>. The following steps will guide you through getting started with MobGUI:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download the <a id="id217" class="indexterm"/>latest version of MobGUI from <a class="ulink" href="http://mobgui.com/download.php">http://mobgui.com/download.php</a>.</li><li class="listitem">The <code class="literal">.zip</code> file will expand to become a LiveCode stack named <span class="strong"><strong>MobGUI_V1-28.livecode</strong></span> for the current version. Hopefully, there will be a newer version when you download this.</li><li class="listitem">Drag the stack into the plugins folder and reopen LiveCode.</li><li class="listitem">Make a new Mainstack.</li><li class="listitem">From the <span class="strong"><strong>Development</strong></span> menu, choose <span class="strong"><strong>Plugins/revMobGUI</strong></span>. This window will appear when you do so:<div class="mediaobject"><img src="../Images/image00260.jpeg" alt="Time for action – getting started with MobGUI"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">The MobGUI window is much like a combination of the LiveCode Tool palette and Inspector palette.</li><li class="listitem">Try dragging different items on the card and look at the options for each item.</li><li class="listitem">The left-hand side list is scrollable and shows additional controls.</li><li class="listitem">Once the controls are placed on the card, they can be manipulated like the normal LiveCode controls.</li><li class="listitem">The selection field at <a id="id218" class="indexterm"/>the top right-hand side allows different themes to be selected. Select the <span class="strong"><strong>android</strong></span> theme and click on <span class="strong"><strong>Apply</strong></span>. Note that the controls you dragged out change. At the time of writing this book, the <span class="strong"><strong>android</strong></span> theme represents the older pre-Lollipop themes.</li><li class="listitem">After you have manipulated a stack, you can export the current theme for later use. You need to save the newly created stack named the <span class="strong"><strong>MobGUI Theme</strong></span> stack. When opened later, this stack will have an <span class="strong"><strong>Import</strong></span> button.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec63"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>One remarkable thing about LiveCode is that the many windows and palettes that you use in the program are all just stacks, and we've started to make use of a rather specialized stack that is going to save us a lot of time and will give us a nice interface like the OS-specific interface.</p></div><div class="section" title="A test bed app, the MobGUI way"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec64"/>A test bed app, the MobGUI way</h2></div></div></div><p>We're going to make much the same test bed app, but this time, we'll try to give a more iOS-like look to the app.</p></div></div>
<div class="section" title="Time for action &#x2013; using MobGUI to make a test bed app"><div class="titlepage" id="aid-1FLS42"><div><div><h1 class="title"><a id="ch03lvl1sec44"/>Time for action – using MobGUI to make a test bed app</h1></div></div></div><p>As you work in <a id="id219" class="indexterm"/>LiveCode starting new stacks, closing others, and opening previously saved stacks, these actions can still occupy memory. Sometimes, you <a id="id220" class="indexterm"/>can get in a confused state where you're making a new Untitled stack only to find out there's still an Untitled stack on the go, which you're asked about if you want to purge. So, why not treat yourself to a quit and start a fresh launch of LiveCode! The following steps will help you achieve that:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Mainstack. Set the name to <code class="literal">MGTestBed</code> and save it somewhere you can easily find it. Perhaps, in the folder with the <code class="literal">LCTestBed</code> stack, which was feeling lonely!</li><li class="listitem">Open the MobGUI window by selecting <span class="strong"><strong>Development/Plugins/revMobGUI</strong></span>.</li><li class="listitem">In the MobGUI window's page of controls, select the <span class="strong"><strong>Slider resizes</strong></span> box and move the slider to select a size of <span class="strong"><strong>320x480</strong></span>. This is the size of the original iPhone. Note the other sizes available. The card can also be resized with the LiveCode Inspector.<div class="mediaobject"><img src="../Images/image00261.jpeg" alt="Time for action – using MobGUI to make a test bed app"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Select the <span class="strong"><strong>MobGUI context menu in IDE</strong></span> option in the MobGUI window. This will enable you to edit the MobGUI control behaviors later.</li><li class="listitem">Using the <span class="strong"><strong>Card Inspector</strong></span>, set the name of this first card to Email.</li><li class="listitem">Drag a <span class="strong"><strong>TabBar</strong></span> on the card window. Click on <span class="strong"><strong>Snap to bottom</strong></span> of the card window. It will also resize the width of the card.</li><li class="listitem"> In the <a id="id221" class="indexterm"/>MobGUI window, drag a button in the card window on top of the TabBar. Duplicate the button <a id="id222" class="indexterm"/>3 times by holding the <span class="emphasis"><em>Alt</em></span>/<span class="emphasis"><em>option</em></span> key and dragging it. Align the four buttons and distribute them across the card using LiveCode's <span class="strong"><strong>Align Tools</strong></span> in the <span class="strong"><strong>Inspector</strong></span> palette.</li><li class="listitem">Select each button and set their names and labels to <code class="literal">Email</code>, <code class="literal">Browser</code>, <code class="literal">DatePicker</code>, and <code class="literal">Picture</code>. Then, resize the buttons so that they fit their name text appropriately.</li><li class="listitem">Select the <span class="strong"><strong>Email</strong></span> button and choose <span class="strong"><strong>Object Script</strong></span> from the <span class="strong"><strong>Object</strong></span> menu or right-click on the button and choose the <span class="strong"><strong>Edit Script</strong></span> option. The script will already look like the following screenshot:<div class="mediaobject"><img src="../Images/image00262.jpeg" alt="Time for action – using MobGUI to make a test bed app"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Add the <a id="id223" class="indexterm"/>following <code class="literal">mouseUp</code> handler to the script<div class="informalexample"><pre class="programlisting">on mouseUp
  go card the short name of me
end mouseUp</pre></div></li><li class="listitem">You can copy <a id="id224" class="indexterm"/>the mouseUp script of the first button and paste the script in the other three buttons. Note that there is a <span class="strong"><strong>preOpenControl</strong></span> handler created by MobGUI following the mouseUp script in each of these buttons. Do not change that!</li><li class="listitem">We'll need these elements on all of the four cards we're going to make, so choose the <span class="strong"><strong>Select All</strong></span> option and then choose <span class="strong"><strong>Group Selected</strong></span> from the <span class="strong"><strong>Object</strong></span> menu.</li><li class="listitem">Make sure that the group is selected and in the regular LiveCode Inspector palette, check the <span class="strong"><strong>Behave like a background</strong></span> box.</li><li class="listitem">Make three more cards and name them <code class="literal">Browser</code>, <code class="literal">DatePicker</code>, and <code class="literal">Picture</code>.</li><li class="listitem">From the LiveCode palette, drag a Label control on the card window for each of the four cards and set the name to match the card's name.</li><li class="listitem">In <span class="strong"><strong>Standalone Application Settings</strong></span>, choose either iOS or Android, depending on the device you want to test on.</li><li class="listitem">Set the <span class="strong"><strong>Internal App ID</strong></span> or <span class="strong"><strong>Identifier</strong></span> to <code class="literal">com.yourname.MGTestBed</code>.</li><li class="listitem">If you're performing the same in iOS, make sure that you choose a profile from the Profile drop-down menu.</li><li class="listitem">You can <a id="id225" class="indexterm"/>now do a test from the <a id="id226" class="indexterm"/><span class="strong"><strong>Development</strong></span> menu, but first you have to choose either <span class="strong"><strong>iPhone Simulator</strong></span> or your connected Android device.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec65"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>It seemed like quite a few steps, but it doesn't take much time. We already have the navigation between the four cards and an authentic iOS-like interface.</p><p>Let's get some of the test features going, but in a more native, integrated way than before.</p></div><div class="section" title="MobGUI native controls"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec66"/>MobGUI native controls</h2></div></div></div><p>One powerful <a id="id227" class="indexterm"/>feature of MobGUI is that it can use ordinary LiveCode controls as placeholders for what will become native controls when you run the app on a device. This isn't something that you can't do for yourself with code, but being able to move placeholder controls around, until you like the layout, would save a lot of time.</p></div></div>
<div class="section" title="Time for action &#x2013; using native controls from MobGUI"><div class="titlepage" id="aid-1GKCM2"><div><div><h1 class="title"><a id="ch03lvl1sec45"/>Time for action – using native controls from MobGUI</h1></div></div></div><p>MobGUI allows you <a id="id228" class="indexterm"/>to switch between the native control theme for iOS and Android or to redefine your own themes.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Right-click on the little image of the iPhone in the MobGUI window and make sure that you're on the Native iOS controls set.</li><li class="listitem">Go to the Email card and drag 3 <span class="strong"><strong>Input</strong></span> text controls from the MobGUI window and one <span class="strong"><strong>Multiline</strong></span> text control.</li><li class="listitem">Name the <span class="strong"><strong>Input</strong></span> controls as <code class="literal">To</code>, <code class="literal">CC</code>, and <code class="literal">Subject</code> and the <span class="strong"><strong>Multiline</strong></span> text control as <code class="literal">Body</code>. You can also add some regular LiveCode Label fields alongside the input fields as an indicator of what to enter. Size the Body field big enough to enter a few lines of text. Also, add some background color to the fields or the card so that the fields are seen properly.</li><li class="listitem">As you make each field, note that you can set the keyboard type as well. Set it to Email for the To and CC fields.</li><li class="listitem">From the iOS Controls 1 set, drag two buttons on the card window. Name one <code class="literal">Done</code> and the <a id="id229" class="indexterm"/>other <code class="literal">Send</code>. You should have a screenshot like this after this step:<div class="mediaobject"><img src="../Images/image00263.jpeg" alt="Time for action – using native controls from MobGUI"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">When we test the app and touch one of the fields, the keyboard overlay appears. We'll use the Done button as a way to hide the keyboard. Add a focus line to the <code class="literal">mouseUp</code> handler of the Done button script:<div class="informalexample"><pre class="programlisting">on mouseUp
  focus on nothing
end mouseUp</pre></div></li><li class="listitem">MobGUI can retrieve <a id="id230" class="indexterm"/>properties from these native fields using the <code class="literal">mgText</code> property. Change the Send button's <code class="literal">mouseUp</code> handler to use this property for each field and also, to call the <code class="literal">revMail</code> function:<div class="informalexample"><pre class="programlisting">on mouseUp
  put the mgText of group "To"" into totext
  put the mgText of group "CC"" into cctext
  put the mgText of group "Subject"" into subjecttext
  put the mgText of group "Body"" into bodytext
  revMail totext,cctext,subjecttext,bodytext
end mouseUp</pre></div></li><li class="listitem">Go to the Browser card.</li><li class="listitem">From the MobGUI window, drag a <span class="strong"><strong>Input</strong></span> control to the card window and name it <code class="literal">URL</code>.</li><li class="listitem">Drag a <span class="strong"><strong>Browser</strong></span> control to the card window and name it <code class="literal">Page</code>.</li><li class="listitem">Adjust the sizes so that the text field fills the width of the card and the browser control fills the area between the text field and the tab bar at the bottom.</li><li class="listitem">Select the <span class="strong"><strong>Browser</strong></span> control and in the MobGUI window, enter a value for <span class="strong"><strong>URL</strong></span> or use the default one already there. This will make the browser control load this URL as its first page.</li><li class="listitem">Edit the script of the URL text field and add this handler, which looks for a Return key to go to the URL:<div class="informalexample"><pre class="programlisting">on inputReturnKey
  mobileControlSet "Page",", "url", the mgText of me
end inputReturnKey</pre></div></li><li class="listitem">Try another test and go to the Email and Browser cards to see them in action.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec67"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>We recreated the first two tests from our earlier test bed app, only now, it looks a lot nicer! Also, we made use of MobGUI's ability to get and set data in native iOS controls, in this case, using the <code class="literal">mgText</code> property and <code class="literal">mobileControlSet</code>.</p><p>Note that all MobGUI controls show up as <span class="strong"><strong>groups</strong></span> in the LiveCode Inspector and as <span class="strong"><strong>Custom controls</strong></span> in the Project Browser. These groups are made of customized LiveCode controls such as buttons, fields, and so on. MobGUI also adds a MobGUI card to the end of your stack. This card includes invisible buttons that have behaviors defined. Behaviors are methods to create <a id="id231" class="indexterm"/>common functionality between objects without duplicating the scripts. You can view these behavior scripts by clicking on the script button on the right-hand side of the Project Browser, when you display the MobGUI card. Unless you have a specific need to change these, just leave them alone.</p></div><div class="section" title="Have a go hero – other tests and pretty icons"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec68"/>Have a go hero – other tests and pretty icons</h2></div></div></div><p>Go ahead and add the other two tests to the stack in the same manner as we did in the <span class="emphasis"><em>Time for action</em></span> sections earlier in this chapter. For the <code class="literal">DatePicker</code> example, you could examine the <span class="strong"><strong>Dictionary</strong></span> definition for <code class="literal">iPhonePickDate</code> to see examples of how to use the picked date data in the same manner as the previous sections for example, adjustments for different screen sizes.</p><p>So far, we have tested the size using the Portrait orientation with just an iPhone. You may want to use the same stack for iPhone and iPad or perhaps, iPad and an Android tablet, which have quite different aspect ratios.</p><p>Even if you just stick with the iPhone, you would still want to take care of Portrait and Landscape. We therefore, have to find ways to arrange the many controls on the card, so that they look their best on each screen size and orientation.</p><p>There are several ways to achieve this. First, we'll look at how to use a resize handler.</p></div><div class="section" title="Laying out using a resize handler"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec69"/>Laying out using a resize handler</h2></div></div></div><p>When a stack's <a id="id232" class="indexterm"/>window size changes, LiveCode sends a <code class="literal">resizeStack</code> <a id="id233" class="indexterm"/>message that we can trap in order to rearrange controls for the new width and height.</p></div></div>
<div class="section" title="Time for action &#x2013; a simple code layout example" id="aid-1HIT81"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec46"/>Time for action – a simple code layout example</h1></div></div></div><p>It could get <a id="id234" class="indexterm"/>quite complicated if you did lay out all of the card's controls with code, so we're only going to construct a simple case to show the technique. You can enhance this later for more complex cases.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create a new Mainstack.</li><li class="listitem">Add four buttons across the width of the card.</li><li class="listitem">Put this handler in the card script:<div class="informalexample"><pre class="programlisting">on resizeStack newWidth,newHeight
put the width of button 1 into buttonWidth
put (newWidth - 4 * buttonWidth)/5 into gap
put the top of button 1 into buttonTop
repeat with a = 1 to 4
    set the top of button a to buttonTop
    set the left of button a to gap + (a-1) * (gap+buttonWidth)
  end repeat
  pass resizeStack
end resizeStack</pre></div></li><li class="listitem">Resize the card window. The buttons should spread out evenly across the card.</li><li class="listitem">Go to <span class="strong"><strong>Standalone Application Settings</strong></span> and select the iOS option.</li><li class="listitem">Make sure that the supported devices include iPad.</li><li class="listitem">Set the orientation options to include all the four orientations.</li><li class="listitem">From the <a id="id235" class="indexterm"/><span class="strong"><strong>Development</strong></span> menu, set the <span class="strong"><strong>Test Target</strong></span> as the <span class="strong"><strong>iPad Simulator</strong></span> and perform a Test.</li><li class="listitem">In the simulator, choose either <span class="strong"><strong>Rotate Left</strong></span> or <span class="strong"><strong>Rotate Right</strong></span> from the <span class="strong"><strong>Hardware</strong></span> menu.</li><li class="listitem">The buttons should spread themselves out across the screen in both the portrait and landscape orientation.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec70"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>In addition to making a simple example of how the <code class="literal">resizeStack</code> handler can be handled, we also saw that the changes in orientation also send the <code class="literal">resizeStack</code> message.</p></div><div class="section" title="Laying out using the LiveCode Geometry Manager"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec71"/>Laying out using the LiveCode Geometry Manager</h2></div></div></div><p>While a control <a id="id236" class="indexterm"/>is selected on the card, the Inspector <a id="id237" class="indexterm"/>palette has an entry named Geometry. It's a somewhat strange interface! Let's take a look:</p><div class="mediaobject"><img src="../Images/image00264.jpeg" alt="Laying out using the LiveCode Geometry Manager"/></div><p style="clear:both; height: 1em;"> </p><p>These faint horizontal and vertical bars are used to select whether you want the control to be scaled or positioned by a fixed amount or relative amount. That is, if a button is 100 pixels from the right of the card window and if you select the position a fixed amount away, then as you resize the card window, the button will remain 100 pixels away from the right edge of the window. If, on the other hand, you use the relative setting and the button is 80 percent across the card window, it will still be 80 percent across the window after you have resized it.</p><p>The first click <a id="id238" class="indexterm"/>on one of these bars will make it <a id="id239" class="indexterm"/>turn solid red in color and this indicates that it's a fixed amount away from the edge of the card. If you click on it again, it takes the shape of a red waveform, indicating that it's going to be relative.</p><p>In the screenshot, you can see that the selected button is set to a fixed amount from the bottom of the card and a relative amount from the right of the card. The image also shows the scaling settings for the control.</p><p>Note that an <a id="id240" class="indexterm"/>object can also be positioned relative <a id="id241" class="indexterm"/>to other objects. Refer to the <span class="strong"><strong>Right object</strong></span> and <span class="strong"><strong>Bottom object</strong></span> pop-up selectors in the preceding screenshot.</p></div></div>
<div class="section" title="Time for action &#x2013; using the Geometry Manager to position buttons" id="aid-1IHDQ1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec47"/>Time for action – using the Geometry Manager to position buttons</h1></div></div></div><p>We'll add some <a id="id242" class="indexterm"/>buttons to the stack that we are currently working on:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Take the <a id="id243" class="indexterm"/>first four buttons and duplicate them to get another set of four buttons below the previous ones.</li><li class="listitem">Select the first of the new buttons and in the <span class="strong"><strong>Geometry</strong></span> section of the Inspector palette, click once on the vertical bar and twice on the horizontal bar; you will end up with the state shown in the previous screenshot.</li><li class="listitem">Do the same for the other three buttons.</li><li class="listitem">Try resizing the card window.</li></ol><div style="height:10px; width: 1px"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec72"/>
<span class="emphasis"><em>What just happened?</em></span>
</h2></div></div></div><p>That was quite a quick test, and if all went well, you will see that resizing the card window includes positioning the first four buttons using the <code class="literal">resizeStack</code> handler that we added, and it's positioning of the second set of four buttons using the Geometry Manager. With the settings we used, the results should be much the same, except that the second set of four buttons will remain a fixed distance away from the bottom of the card window.</p><p>There is a lot of power in the Geometry Manager and you should take a look at the other abilities it has at the reference link shown at the end of this chapter. However, it is not the best way to deal with mobile screen sizes.</p></div></div>
<div class="section" title="Resolution independence"><div class="titlepage" id="aid-1JFUC2"><div><div><h1 class="title"><a id="ch03lvl1sec48"/>Resolution independence</h1></div></div></div><p>LiveCode 6.5, and beyond…</p><p>One of the features <a id="id244" class="indexterm"/>listed in <a class="link" title="Chapter 1. LiveCode Fundamentals" href="part0016.xhtml#aid-F8901">Chapter 1</a>, <span class="emphasis"><em>LiveCode Fundamentals</em></span>, has already been developed and is present in LiveCode 6.5. The new feature is Resolution Independence.</p><p>Now, after seeing the two complex ways of adjusting the screen size, you may be able to forget all of it. In LiveCode 6.5, a new feature called Resolution Independence was introduced, and the correct use of this feature will make many of the layout difficulties go away.</p><p>There are two approaches in place to help you deal with different device sizes and aspect ratios: the Multiple Density <a id="id245" class="indexterm"/>Support and the Full Screen Scaling Mode. Some of the concepts are a little tricky, but a few screenshots will hopefully make them clear!</p><div class="section" title="Multiple density support"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec73"/>Multiple density support</h2></div></div></div><p>So far in this <a id="id246" class="indexterm"/>chapter, we overlooked the issue of the <span class="strong"><strong>DPI</strong></span> (<span class="strong"><strong>dots per inch</strong></span>) of devices. For Android devices, there are hundreds of different resolutions and DPI values. With iOS, there are only a few variations of DPI and resolution. The simplest these problem cases to examine, is where you want the same app to look like and work in the same manner as iPhone 3GS and iPhone 4 Retina or later versions of iPhones. Both have the same size screen, but iPhone 4's retina display has <a id="id247" class="indexterm"/>twice the DPI. This URL shows you the difference between all the current iPhones: <a class="ulink" href="http://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions">http://www.paintcodeapp.com/news/ultimate-guide-to-iphone-resolutions</a>.</p><p>With the MobGUI and Geometry Manager solution, you are effectively storing layout values or instructions behind the scenes that are ready to adapt to the user's device screen size. The Multiple Density Support in LiveCode 6.5 is an easier way to solve this issue.</p><div class="section" title="Pixels and points"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec04"/>Pixels and points</h3></div></div></div><p>A pixel is <a id="id248" class="indexterm"/>an illuminated dot in an image or of a screen, whereas a point is a unit of measurement in print, generally, 1/72nd of an inch. If a screen has exactly 72 DPI, the two would be the same, and in the earlier days of Macintosh computers, this was pretty much the case. More modern Macs and PCs and most mobile devices are a lot more detailed than 72 DPI. With <a id="id249" class="indexterm"/>LiveCode 6.5, and its later versions, you can now make a stack that works in points, that will then fill the device screen by taking the image of each card and by applying a scaling factor to it.</p><p>While doing such scaling, something must be assumed to be of natural size. For iOS, LiveCode uses non-Retina screens as a scale factor of 1X and Retina screens are a scale factor of 2X. iPhone 5 and 6 introduced more sizes. A scale factor of 3X is required for iPhone 6 Plus. With Android, things are more complicated as it has at least seven levels of scaling factor.</p><p>In fact, really, there are an infinite number of scaling factors going on behind the scenes. However, you generally don't have to worry about them because LiveCode automatically gives you the <a id="id250" class="indexterm"/>ability to show <a id="id251" class="indexterm"/>different versions of an image depending on the DPI of the device in question.</p></div><div class="section" title="Image naming convention"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec05"/>Image naming convention</h3></div></div></div><p>LiveCode <a id="id252" class="indexterm"/>will look at the file names of the included images (that have been added in the <span class="strong"><strong>Copy Files</strong></span> part of the <span class="strong"><strong>Standalone Application Settings</strong></span> dialog) and will load in the appropriately named version of the image. In the example shown here, two images have been added, <code class="literal">icon.png</code> and <code class="literal">icon@2x.png</code>. To make it easier to spot which one you are seeing, 512 and 1024 have been added to what would otherwise be two resolutions of the same icon:</p><div class="mediaobject"><img src="../Images/image00265.jpeg" alt="Image naming convention"/></div><p style="clear:both; height: 1em;"> </p><p>This image is slightly magnified here to help you see that the 512 version of the image is lower resolution than the 1024 version.</p><p>The names used for iOS are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">imagename.ext</code> (for example, <code class="literal">flowers.png</code>)</li><li class="listitem"><code class="literal">imagename@2x.ext</code> (for example, <code class="literal">flowers@2x.png</code>)</li><li class="listitem"><code class="literal">imagename@3x.ext</code> (for example, <code class="literal">flowers@3x.png</code>) for iPhone 6 Plus</li></ul></div><p>The first one is considered as the 1X scaled version and the <code class="literal">@2x</code> name is considered as the 2X scaled version and the same goes for the <code class="literal">@3x</code> version.</p><div class="note" title="Note"><h3 class="title"><a id="note07"/>Note</h3><p>Note that you also need to specify the appropriate <span class="strong"><strong>Splash Screen</strong></span> files in the LiveCode <span class="strong"><strong>Standalone Application Settings</strong></span>. Otherwise, the iPhone will use lower resolution images. This can be verified by examining the <code class="literal">screenRect</code> of the device. Even <a id="id253" class="indexterm"/>though iPhone 6 Plus has a physical resolution of 1080 x 1920, use the 3x image sizes of 1242 x 2208. The phone automatically downsizes the image. 2x images will be displayed fine on iPhone 6.</p></div><p>The names and scaling factors used for Android are more varied:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="literal">imagename@ultra-low.ext - 0.25X</code></li><li class="listitem"><code class="literal">imagename extra-low.ext - 0.5X</code></li><li class="listitem"><code class="literal">imagename low.ext - 0.75</code></li><li class="listitem"><code class="literal">imagename medium.ext - 1X</code></li><li class="listitem"><code class="literal">imagename high.ext - 1.5X</code></li><li class="listitem"><code class="literal">imagename@extra-high.ext - 2x</code></li><li class="listitem"><code class="literal">imagename@ultra-high.ext - 4x</code></li></ul></div><p>In actual practice, you may find that you only need two or three versions of an image to make an image look good enough on a wide range of DPI devices.</p></div></div><div class="section" title="The full-screen scaling mode"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec74"/>The full-screen scaling mode</h2></div></div></div><p>Prior to <a id="id254" class="indexterm"/>LiveCode 6.5 and its <a id="id255" class="indexterm"/>multiple density support, you had to do all the hard work by yourself! At least now you can design for just iPhone or iPad and have Retina versions of these devices looked after by LiveCode. With Android though, you still need to have a variety of layouts or alternately, have code that would position the interface elements based on the aspect ratio and pixel dimensions of the device.</p><p>With the density support, you only have to take care of the aspect ratio, but there are still a lot of these to be taken care of. For utility-like applications, you will most likely have to go to this trouble, so that users get the expected experience. However, there are many types of applications that are more graphical and that can take advantage of the full screen scaling modes: <code class="literal">empty</code>, <code class="literal">exactFit</code>, <code class="literal">showAll</code>, <code class="literal">noBorder</code>, and <code class="literal">noScale</code>. Let's take a look at what these are…</p><div class="section" title="Syntax"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec06"/>Syntax</h3></div></div></div><p>The general <a id="id256" class="indexterm"/>syntax, by the way, is to type this in your stack script:</p><div class="informalexample"><pre class="programlisting">on preopenstack
  set the fullscreenmode of the current stack to "showAll"
end preopenstack</pre></div><p>The quotes are required for the four active modes. The empty mode does not need quotes.</p></div><div class="section" title="The empty mode"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec07"/>The empty mode</h3></div></div></div><p>If <span class="strong"><strong>fullscreenmode</strong></span> is <a id="id257" class="indexterm"/>
<span class="strong"><strong>empty</strong></span>, the card area is changed to match the device screen. That is, the top left card is in the top-left corner of the device screen and the card width and height match the actual pixel width and height of the device. Well, except if you have taken advantage of the multiple density support discussed earlier! Essentially, empty is the existing behavior in the earlier versions of LiveCode.</p></div><div class="section" title="The showAll mode"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec08"/>The showAll mode</h3></div></div></div><p>This mode arrived <a id="id258" class="indexterm"/>slightly later than the other modes and is present in LiveCode 6.6 and its later versions. With <span class="strong"><strong>showAll</strong></span>, as the <code class="literal">fullscreenmode</code>, the card's contents will be scaled, so that all of it is within the device's screen. For devices that have a different aspect ratio than your card, elements that were outside of the card area are revealed. Suppose you create a graphical book app where you want the full height of the card to exactly fill the height of the device screen, but you don't want black bars down the sides on a wider device, then you could extend the background pattern beyond the left- and right-hand side of the card area. On a narrower device, such as iPad, you would see the 4:3 area of the card. On a wider device, say iPhone 5, the extra background would be revealed. The following illustration shows which area of the background image will be seen on different devices:</p><div class="mediaobject"><img src="../Images/image00266.jpeg" alt="The showAll mode"/></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="The letterbox mode"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec09"/>The letterbox mode</h3></div></div></div><p>The <span class="strong"><strong>letterbox</strong></span> <a id="id259" class="indexterm"/>mode is identical to <span class="strong"><strong>showAll</strong></span> except that the areas beyond the card area are hidden and leave you with the typical movie letterbox effect, hence the name!</p></div><div class="section" title="The noBorder mode"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec10"/>The noBorder mode</h3></div></div></div><p>The <span class="strong"><strong>noBorder</strong></span> <a id="id260" class="indexterm"/>mode is very useful, but takes some time to get used to. Let's say you are making a graphical adventure game, along the lines of Myst, and you want to use the same graphics for all devices. You could create a scene that has an aspect ratio of 14:9 and make sure that the important content is not too close to the edges. When the scene is viewed in the <code class="literal">noBorder</code> mode on an iPad, you would see the full height of the scene and most of the width. When viewed on iPhone 5, you would see the full width of the scene and most of the height. As the name suggests, the card area would be scaled, so that there are no borders, as there would be in the letterbox mode. The following illustration shows which areas of an original 14:9 photograph would be visible for a 4:3 iPad and a 16:9 iPhone:</p><div class="mediaobject"><img src="../Images/image00267.jpeg" alt="The noBorder mode"/></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="The exactFit mode"><div class="titlepage"><div><div><h3 class="title"><a id="ch03lvl3sec11"/>The exactFit mode</h3></div></div></div><p>As the name <a id="id261" class="indexterm"/>implies, <span class="strong"><strong>exactFit</strong></span> would take the card's content and squish it to fill the device's screen. It's hard to think of a use case for this mode, but perhaps, if you perform some sort of artistic visualizer, the squishing wouldn't matter much!</p><div class="note" title="Note"><h3 class="title"><a id="note08"/>Note</h3><p>As mentioned <a id="id262" class="indexterm"/>previously, the Geometry Manager has a lot of powerful features. If your interest is also in desktop applications, take a look at the lesson at:</p><p>
<a class="ulink" href="http://lessons.runrev.com/s/lessons/m/4067/l/19026-Geometry-Manager">http://lessons.runrev.com/s/lessons/m/4067/l/19026-Geometry-Manager</a>
</p></div></div></div></div>
<div class="section" title="Summary" id="aid-1KEEU1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec49"/>Summary</h1></div></div></div><p>The trick with easy-to-use tools, such as LiveCode, is to create mobile apps that users think were created with the hard-to-use native tools, such as Xcode. You can achieve this because of LiveCode's ability to call upon native features and because you can make interfaces that look appropriate.</p><p>In this chapter, we covered several ways to achieve this goal by calling native OS features using simple LiveCode commands. We prepared images to be used for button states and made buttons that look OS-specific by adding these images. We also created controls that look like iOS native controls with MobGUI and laid out the interface with code, with the Geometry Manager.</p><p>So far, these have all been small test stacks to get us warmed up! Next, we're going to look at the general application structure to make a fully fleshed out utility application.</p></div></body></html>