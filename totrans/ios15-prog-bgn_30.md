# *第26章*: 测试并提交您的应用至App Store

恭喜！您已经到达了本书的最后一章！

在本书的整个过程中，您已经学习了Swift编程语言以及如何使用Xcode构建整个应用。然而，您之前只是在iOS模拟器或使用免费Apple开发者账户的设备上运行您的应用。

在本章中，您将首先学习如何获取付费Apple开发者账户。接下来，您将了解证书、标识符、测试设备注册和配置文件。之后，您将学习如何创建App Store列表并提交您的应用至App Store。最后，您将学习如何使用内部和外部测试员对您的应用进行测试。

到本章结束时，您将学会如何构建和提交应用到App Store，以及如何对您的应用进行内部和外部测试。

以下主题将涵盖：

+   获取Apple开发者账户

+   探索您的Apple开发者账户

+   提交您的应用至App Store

+   进行内部和外部测试

# 技术要求

您需要一个Apple ID和一个付费Apple开发者账户来完成本章。

本章没有项目文件，因为它旨在说明如何提交应用，而不是针对任何特定应用。

重要信息

要查看App Store的最新更新，请访问[https://developer.apple.com/app-store/whats-new/](https://developer.apple.com/app-store/whats-new/)。

苹果公司推出了一个名为**Xcode Cloud**的新连续集成和交付服务，内置于Xcode 13中。要了解更多信息，请访问此链接：[https://developer.apple.com/xcode-cloud/](https://developer.apple.com/xcode-cloud/)。

要了解如何提交您的应用的更多信息，请访问[https://developer.apple.com/app-store/submissions/](https://developer.apple.com/app-store/submissions/)。

让我们从下一节学习如何获取付费Apple开发者账户开始，这是提交至App Store所必需的。

# 获取Apple开发者账户

如您在前面章节所见，您只需要一个免费Apple ID即可在设备上测试您的应用。但应用将只工作几天，您将无法添加如使用Apple ID登录或上传您的应用到App Store等高级功能。为此，您需要一个付费Apple开发者账户。按照以下步骤购买个人/个体工商户Apple开发者账户：

1.  前往[https://developer.apple.com/programs/](https://developer.apple.com/programs/)并点击**注册**按钮。

1.  滚动到屏幕底部并点击**开始注册**。

1.  当提示时，输入您的Apple ID和密码。

1.  在**信任此浏览器？**屏幕上，点击**现在不**。

1.  点击**在网页上继续注册 >**。

1.  在**确认您的个人信息**屏幕上，输入您的个人信息，完成后点击**继续**。

1.  在**选择你的实体类型**屏幕上，选择**个人/个体经营者**。点击**继续**。

1.  在**审查和接受**屏幕上，勾选页面底部的复选框并点击**继续**。

1.  在**完成购买**屏幕上，点击**购买**。

1.  按照屏幕上的指示完成购买。一旦你购买了账户，请访问[https://developer.apple.com/account/](https://developer.apple.com/account/)并使用你购买开发者账户时使用的相同Apple ID登录。你应该会看到以下类似的内容：

![图26.1：登录付费Apple开发者账户的Apple开发者网站

![图片](img/Figure_26.01_B17469.jpg)

图26.1：登录付费Apple开发者账户的Apple开发者网站

现在你已经拥有了付费的Apple开发者账户，接下来我们将学习如何在下一节中配置应用所需的各项设置。

# 探索你的Apple开发者账户

你的Apple开发者账户包含了开发并提交应用所需的一切。你可以查看你的会员状态，添加和组织你的开发团队成员，访问开发者文档，下载测试软件等。尽管所有这些功能都不在本书的范围之内，但本节将仅涵盖你需要做的以将你的应用提交到App Store。

首先，你将获得Apple开发者证书，这些证书将安装在你的Mac上。这些证书将用于对应用进行数字签名。接下来，你需要注册你的应用App ID以及你将测试应用的设备。之后，你将能够生成配置文件，允许你的应用在测试设备上运行，并允许你提交应用到App Store。下一节我们将学习**证书签名请求**，这是获取你将在Mac上安装的Apple开发者证书所必需的。

## 生成证书签名请求

在你编写将提交到App Store的应用之前，你需要在运行Xcode的Mac上安装一个开发者证书。证书标识了应用的作者。要获取此证书，你需要创建一个**证书签名请求**（**CSR**）。以下是创建CSR的步骤：

1.  在你的Mac上打开**实用工具**文件夹并启动**钥匙串访问**。

1.  从**钥匙串访问**菜单中选择**证书助手** | **从证书颁发机构请求证书...**：![图26.2：钥匙串访问应用

    ![图片](img/Figure_26.02_B17469.jpg)

    图26.2：钥匙串访问应用

1.  在**用户电子邮件地址**字段中，输入你用于注册Apple开发者账户的Apple ID电子邮件地址。在**通用名称**字段中，输入你的名字。在**请求是：**下选择**保存到磁盘**并点击**继续**：![图26.3：证书助手屏幕

    ![图片](img/Figure_26.03_B17469.jpg)

    图26.3：证书助手屏幕

1.  将CSR保存到你的硬盘上。

1.  点击 **完成**。

现在您已经有了 CSR，让我们看看您将如何使用它来获取 **开发证书**（用于在您的测试设备上测试）和 **分发证书**（用于 App Store 提交）在下一节中。

## 创建开发和分发证书

一旦您有了证书签名请求，您就可以用它来创建开发和分发证书。开发证书用于您想在测试设备上测试您的应用程序时，分发证书用于您想将应用程序上传到 App Store 时。以下是创建开发和分发证书的步骤：

1.  登录您的 Apple 开发者账户，并点击 **Certificates, IDs & Profiles**：![图 26.4：已登录付费 Apple 开发者账户的 Apple 开发者网站

    ![图片](img/Figure_26.04_B17469.jpg)

    图 26.4：已登录付费 Apple 开发者账户的 Apple 开发者网站

1.  您将看到 **证书** 屏幕。点击 **+** 按钮：![图 26.5：显示 + 按钮的证书屏幕

    ![图片](img/Figure_26.05_B17469.jpg)

    图 26.5：显示 + 按钮的证书屏幕

1.  点击 **Apple Development** 单选按钮，然后点击 **继续**：![图 26.6：显示 Apple Development 单选按钮的创建新证书屏幕

    ![图片](img/Figure_26.06_B17469.jpg)

    图 26.6：显示 Apple Development 单选按钮的创建新证书屏幕

1.  点击 **选择文件**：![图 26.7：上传证书签名请求屏幕

    ![图片](img/Figure_26.07_B17469.jpg)

    图 26.7：上传证书签名请求屏幕

1.  在 **上传证书签名请求** 下的 **选择文件** 中选择，选择您之前保存到硬盘上的 CSR 文件，然后点击 **选择**。

1.  点击 **继续**：![图 26.8：已上传证书的上传证书签名请求屏幕

    ![图片](img/Figure_26.08_B17469.jpg)

    图 26.8：已上传证书的上传证书签名请求屏幕

1.  您的证书将自动生成。点击 **下载** 以将生成的证书下载到您的 Mac 上：![图 26.9：下载您的证书屏幕

    ![图片](img/Figure_26.09_B17469.jpg)

    图 26.9：下载您的证书屏幕

1.  双击下载的证书以将其安装到您的 Mac 上。

1.  再次重复 *步骤 3-8*，但这次，在 *步骤 3* 中选择 **Apple Distribution**：

![图 26.10：显示 Apple Distribution 单选按钮的创建新证书屏幕

![图片](img/Figure_26.10_B17469.jpg)

图 26.10：显示 Apple Distribution 单选按钮的创建新证书屏幕

太好了！您现在拥有了开发和分发证书。下一步是为您的应用程序注册 **App ID** 以在 App Store 中识别它。您将在下一节中学习如何操作。

## 注册 App ID

当您在 [*第 1 章*](B17469_01_Final_VK_ePub.xhtml#_idTextAnchor016) *熟悉 Xcode* 中创建项目时，您为它创建了一个包标识符（也称为 App ID）。App ID 用于在 App Store 中识别您的应用。在将应用上传到 App Store 之前，您需要在您的开发者账户中注册此 App ID。以下是注册 App ID 的方法：

1.  登录您的 Apple 开发者账户，并点击 **证书、标识符和配置文件**。

1.  点击 **标识符**。

1.  点击 **+** 按钮 ![图片](img/Figure_26.11_B17469.jpg)

    图 26.11：标识符屏幕

1.  点击 **App ID** 并点击 **继续**：![图 26.12：注册新标识符屏幕](img/Figure_26.12_B17469.jpg)

    ![图片](img/Figure_26.12_B17469.jpg)

    图 26.12：注册新标识符屏幕

1.  点击 **App** 并点击 **继续**：![图 26.13：标识符类型屏幕](img/Figure_26.13_B17469.jpg)

    ![图片](img/Figure_26.13_B17469.jpg)

    图 26.13：标识符类型屏幕

1.  `Let's Eat Packt Publishing App ID`。勾选 **显式** 按钮，并在字段中输入您的应用的 **包标识符**。确保此值与您创建项目时使用的包标识符相同。完成后，点击 **继续** 按钮：![图 26.14：描述和包标识符屏幕](img/Figure_26.14_B17469.jpg)

    ![图片](img/Figure_26.14_B17469.jpg)

    图 26.14：描述和包标识符屏幕

1.  点击 **注册**。

![图 26.15：注册屏幕](img/Figure_26.15_B17469.jpg)

![图片](img/Figure_26.15_B17469.jpg)

图 26.15：注册屏幕

您的 App ID 现已注册。太酷了！接下来，您将在下一节中注册将在其上测试应用的设备。

## 注册您的设备

要在您的个人设备上运行应用进行测试，您需要在您的开发者账户中注册它们。以下是注册设备的方法：

1.  登录您的 Apple 开发者账户，并点击 **证书、标识符和配置文件**。

1.  点击 **设备**。

1.  点击 **+** 按钮 ![图 26.16：设备注册屏幕](img/Figure_26.16_B17469.jpg)

    ![图片](img/Figure_26.16_B17469.jpg)

    图 26.16：设备注册屏幕

1.  **注册新设备** 屏幕出现：![图 26.17：注册新设备屏幕](img/Figure_26.17_B17469.jpg)

    ![图片](img/Figure_26.17_B17469.jpg)

    图 26.17：注册新设备屏幕

    您需要 **设备名称** 和 **设备 ID** 来注册您的设备。

1.  将您的设备连接到您的 Mac。启动 Xcode，从 **窗口** 菜单中选择 **设备和模拟器**。在左侧窗格中选择设备并复制 **标识符** 值：![图 26.18：设备和模拟器窗口](img/Figure_26.18_B17469.jpg)

    ![图片](img/Figure_26.18_B17469.jpg)

    图 26.18：设备和模拟器窗口

1.  在 **设备名称** 字段中为设备输入一个名称，并将标识符值粘贴到 **设备 ID (UDID)** 字段中。点击 **继续**。

![图 26.19：注册新设备屏幕](img/Figure_26.19_B17469.jpg)

![图片](img/Figure_26.19_B17469.jpg)

图 26.19：注册新设备屏幕

您已成功注册测试设备。太好了！下一步是创建**配置文件**。需要一个**iOS应用开发配置文件**，以便您的应用能够在测试设备上运行，并且需要一个**iOS应用商店分发配置文件**，用于上传到应用商店的应用。您将在下一节中创建开发和分发配置文件。

## 创建配置文件

您需要创建两个配置文件。iOS应用开发配置文件是应用在测试设备上运行所必需的。iOS应用商店分发配置文件用于将您的应用提交到应用商店。以下是创建开发配置文件的步骤：

1.  登录您的Apple开发者账户，并点击**证书、标识和配置文件**。

1.  点击**配置文件**。

1.  点击**+**按钮：![图26.20：配置文件屏幕

    ](img/Figure_26.20_B17469.jpg)

    图26.20：配置文件屏幕

1.  点击**iOS应用开发**并点击**继续**：![图26.21：注册新的配置文件屏幕

    ](img/Figure_26.21_B17469.jpg)

    图26.21：注册新的配置文件屏幕

1.  选择您要测试的应用的**App ID**并点击**继续**：![图26.22：选择App ID屏幕

    ](img/Figure_26.22_B17469.jpg)

    图26.22：选择App ID屏幕

1.  选择一个**开发**证书并点击**继续**：![图26.23：选择开发证书屏幕

    ](img/Figure_26.23_B17469.jpg)

    图26.23：选择开发证书屏幕

1.  选择您将测试此应用的全部设备并点击**继续**：![图26.24：选择设备屏幕

    ](img/Figure_26.24_B17469.jpg)

    图26.24：选择设备屏幕

1.  为配置文件输入一个名称并点击**生成**：![图26.25：生成开发配置文件屏幕

    ](img/Figure_26.25_B17469.jpg)

    图26.25：生成开发配置文件屏幕

1.  点击**下载**按钮下载配置文件。

1.  双击配置文件进行安装。

接下来，您将创建一个分发配置文件：

1.  点击**所有配置文件**链接返回上一页：![图26.26：所有配置文件链接

    ](img/Figure_26.26_B17469.jpg)

    图26.26：所有配置文件链接

1.  点击**+**按钮：![图26.27：配置文件屏幕

    ](img/Figure_26.27_B17469.jpg)

    图26.27：配置文件屏幕

1.  点击**应用商店**并点击**继续**：![图26.28：注册新的配置文件屏幕

    ](img/Figure_26.28_B17469.jpg)

    图26.28：注册新的配置文件屏幕

1.  选择您要发布到应用商店的应用的**App ID**并点击**继续**：![图26.29：选择App ID屏幕

    ](img/Figure_26.29_B17469.jpg)

    图26.29：选择App ID屏幕

1.  选择一个**分发**证书并点击**继续**：![图26.30：选择分发证书屏幕

    ](img/Figure_26.30_B17469.jpg)

    图26.30：选择分发证书屏幕

1.  为配置文件输入一个名称并点击**生成**：![图 26.31：生成分发配置文件屏幕

    ](img/Figure_26.31_B17469.jpg)

    图 26.31：生成分发配置文件屏幕

1.  点击**下载**按钮下载配置文件。

1.  双击配置文件以安装它。

您已经完成了提交应用到 App Store 所需的所有步骤。让我们在下一节中了解更多关于提交过程的信息，我们将以 *ShareOrder* 应用为例。

# 将您的应用提交到 App Store

您现在可以提交您的应用到 App Store！在本节中，我们将使用 *ShareOrder* 应用作为示例。让我们回顾一下到目前为止您所做的工作。您已创建了开发和分发证书，注册了 App ID 和测试设备，并生成了开发和分发配置文件。

要在您的测试设备上测试您的应用，您将使用开发证书、App ID、注册的测试设备和开发配置文件。要提交您的应用到 App Store，您将使用分发证书、App ID 和分发配置文件。您将配置 Xcode 以自动为您管理这些操作。

在您提交应用之前，您必须创建应用图标并获取应用的截图。然后您可以创建 App Store 列表，生成要上传的存档构建，并完成 App Store Connect 信息。苹果公司将对您的应用进行审查，如果一切顺利，它将出现在 App Store 上。

在下一节中，我们将看看如何为您的应用创建图标，这些图标将在应用安装到设备屏幕上时显示。

## 为您的应用创建图标

在您上传应用到 App Store 之前，您必须为它创建一个图标集。以下是创建应用图标集的方法：

1.  为您的应用创建一个 1,024 x 1,024 像素的图标。

1.  使用如 [https://appicon.co](https://appicon.co) 这样的网站生成所有不同的图标大小并下载图标集。

1.  在项目导航器中点击 `Assets.xcassets` 并用你下载的图片集替换 `AppIcon`：

![图 26.32：显示 AppIcon 图片集的 Assets.xcassets 文件

](img/Figure_26.32_B17469.jpg)

图 26.32：显示 AppIcon 图片集的 Assets.xcassets 文件

当您在模拟器或设备上运行您的应用并退出应用时，您应该能在主屏幕上看到应用的图标。真 neat！

让我们看看如何创建截图。您需要它们来提交 App Store，以便客户可以看到您的应用的外观。您将在下一节中这样做。

## 为您的应用创建截图

您需要应用的截图，这些截图将用于您的 App Store 列表。要创建它们，请在模拟器中运行您的应用并点击截图按钮。它将被保存在桌面上：

![图 26.33：模拟器显示截图按钮

](img/Figure_26.33_B17469.jpg)

图 26.33：模拟器显示截图按钮

使用**iPhone 13 Pro Max**、**iPhone 8 Plus**、**iPad Pro (12.9英寸)（第二代）**和**iPad Pro (12.9英寸)（第五代）**模拟器，并为每个模拟器获取一些截图，展示您应用的所有不同功能。您必须使用所有这些模拟器的原因是您将需要不同屏幕尺寸上运行的应用截图，这将在下一节中更详细地讨论，您将在那里学习如何创建App Store列表。App Store列表包含将在App Store中显示的所有关于您应用的信息，因此客户可以在下载或购买您的应用之前做出明智的决定。

## 创建App Store列表

现在您已经有了您应用的图标和截图，您将创建App Store列表。这允许客户在下载之前查看有关您应用的信息。按照以下步骤操作：

1.  前往[http://appstoreconnect.apple.com](http://appstoreconnect.apple.com)并选择**My Apps**：![图26.34：App Store Connect网站

    ](img/Figure_26.34_B17469.jpg)

    图26.34：App Store Connect网站

1.  点击屏幕左上角的**+**按钮，选择**New App**：![图26.35：新建应用按钮和菜单

    ](img/Figure_26.35_B17469.jpg)

    图26.35：新建应用按钮和菜单

1.  将显示一个包含字段列表的**New App**屏幕：

![图26.36：应用详情屏幕

](img/Figure_26.36_B17469.jpg)

图26.36：应用详情屏幕

输入您的应用详情：

**Platforms**：您的应用支持的所有平台（iOS、macOS和/或tvOS）。

**Name**：您的应用名称。

**Primary Language**：您的应用使用的语言。

**BundleID**：您之前创建的bundleID。

**SKU**：您用于引用应用的任何参考数字或字符串。

**用户访问**：管理您的开发者账户团队中谁可以在App Store Connect中查看此应用。如果您是团队中唯一的成员，只需将其设置为**Full Access**。

完成后点击**Create**。

应用现在将列在您的账户中，但您仍然需要上传应用及其所有相关信息。要上传应用，您需要创建一个存档构建，您将在下一节中学习如何进行。

## 创建存档构建

您将创建一个存档构建，该构建将提交给Apple以放置在App Store上。这还将用于您的内部和外部测试。创建存档构建的步骤如下：

1.  打开Xcode，在项目导航器中选择项目名称，并选择`1.0`和`1`：![图26.37：显示General面板的编辑区域

    ](img/Figure_26.37_B17469.jpg)

    图26.37：显示General面板的编辑区域

1.  选择**Signing & Capabilities**面板。确保**Automatically manage signing**已勾选。这将允许Xcode创建证书、应用ID和配置文件，并注册连接到您的Mac的设备。在**Team**菜单中选择您的付费开发者账户：![图26.38：显示Signing & Capabilities面板的编辑区域

    ![图26.38：B17469.jpg](img/Figure_26.38_B17469.jpg)

    图26.38：显示签名与能力面板的编辑区域

1.  将构建目标选择为**任何iOS设备**：![图26.39：已选择任何iOS设备的方案菜单

    ![图26.39：B17469.jpg](img/Figure_26.39_B17469.jpg)

    图26.39：已选择任何iOS设备的方案菜单

1.  如果您的应用未使用加密，通过添加`ITSAppUsesNonExemptEncryption`到`Info.plist`文件，将其类型设置为`Boolean`，并将值设置为`NO`来更新您的`Info.plist`文件：![图26.40：已选择Info.plist的项目导航器

    ![图26.40：B17469.jpg](img/Figure_26.40_B17469.jpg)

    图26.40：已选择Info.plist的项目导航器

1.  从**产品**菜单中选择**存档**：![图26.41：已选择存档的产品菜单

    ![图26.41：B17469.jpg](img/Figure_26.41_B17469.jpg)

    图26.41：已选择存档的产品菜单

1.  **Organizer**窗口出现，并已选择**存档**标签。您的应用将显示在此屏幕上。选择它并点击**分发应用**按钮：![图26.42：已选择分发应用的Organizer窗口

    ![图26.42：B17469.jpg](img/Figure_26.42_B17469.jpg)

    图26.42：已选择分发应用的Organizer窗口

1.  选择**App Store Connect**并点击**下一步**：![图26.43：分发方法选择屏幕

    ![图26.43：B17469.jpg](img/Figure_26.43_B17469.jpg)

    图26.43：分发方法选择屏幕

1.  选择**上传**并点击**下一步**：![图26.44：目的地选择屏幕

    ![图26.44：B17469.jpg](img/Figure_26.44_B17469.jpg)

    图26.44：目的地选择屏幕

1.  保持默认设置并点击**下一步**：![图26.45：分发选项选择屏幕

    ![图26.45：B17469.jpg](img/Figure_26.45_B17469.jpg)

    图26.45：分发选项选择屏幕

1.  选择**自动管理签名**并点击**下一步**：![图26.46：签名屏幕

    ![图26.46：B17469.jpg](img/Figure_26.46_B17469.jpg)

    图26.46：签名屏幕

1.  如果提示输入密码，请输入Mac账户密码并点击**始终允许**。

1.  点击**上传**：![图26.47：内容审查屏幕

    ![图26.47：B17469.jpg](img/Figure_26.47_B17469.jpg)

    图26.47：内容审查屏幕

1.  等待上传完成。

1.  点击**完成**：

![图26.48：存档上传完成屏幕

![图26.48：B17469.jpg](img/Figure_26.48_B17469.jpg)

图26.48：存档上传完成屏幕

到此为止，将通过App Store分发的应用的构建已上传。在下一节中，您将学习如何上传截图并完成将在App Store与应用一起显示的应用信息。

## 在App Store Connect中完成信息

您的应用已上传，但您仍需要在App Store Connect中完成有关您应用的详细信息。以下是步骤：

1.  访问[http://appstoreconnect.apple.com](http://appstoreconnect.apple.com)并选择**我的应用**。

1.  选择您刚刚创建的应用程序：![图26.49：已选择您的应用的Apps屏幕

    ![图26.49：B17469.jpg](img/Figure_26.49_B17469.jpg)

    图26.49：已选择您的应用的Apps屏幕

1.  在屏幕左侧选择**应用信息**，并确保所有信息都是正确的：![图26.50：应用信息屏幕

    ](img/Figure_26.50_B17469.jpg)

    图26.50：应用信息屏幕

1.  对于**定价和可用性**和**应用隐私**部分也做同样的操作：![图26.51：应用定价和可用性屏幕

    ](img/Figure_26.51_B17469.jpg)

    图26.51：应用定价和可用性屏幕

1.  在屏幕左侧选择**准备提交**。在**应用预览和截图**部分，拖入你之前拍摄的截图。在**iPhone 13 Pro Max 显示**部分使用iPhone 13 Pro Max的截图，在**iPhone 8 Plus 显示**部分使用iPhone 8 Plus的截图，并在相应的部分使用iPad的截图：![图26.52：准备提交屏幕显示应用预览和截图部分

    ](img/Figure_26.52_B17469.jpg)

    图26.52：准备提交屏幕显示应用预览和截图部分

1.  滚动并填写**促销文本**、**描述**、**关键词**、**支持URL**和**营销URL**字段：![图26.53：版本信息部分

    ](img/Figure_26.53_B17469.jpg)

    图26.53：版本信息部分

1.  滚动到**构建**部分，你会看到你之前上传的存档构建。如果你看不到它，点击**+**按钮，选择一个构建，然后点击**完成**：![图26.54：构建选择屏幕

    ](img/Figure_26.54_B17469.jpg)

    图26.54：构建选择屏幕

1.  确认你的构建在**构建**部分：![图26.55：构建部分

    ](img/Figure_26.55_B17469.jpg)

    图26.55：构建部分

1.  滚动到**通用应用信息**部分并填写所有必填信息：![图26.56：显示编辑按钮的通用应用信息部分

    ](img/Figure_26.56_B17469.jpg)

    图26.56：显示编辑按钮的通用应用信息部分

1.  滚动到**应用审查信息**部分。如果你想向应用审查员提供任何额外信息，请将其放在此处：![图26.57：应用审查信息部分

    ](img/Figure_26.57_B17469.jpg)

    图26.57：应用审查信息部分

1.  滚动到**版本发布**部分并保持默认设置：![图26.58：版本发布部分

    ](img/Figure_26.58_B17469.jpg)

    图26.58：版本发布部分

1.  滚动到屏幕顶部并点击**提交审查**按钮：![图26.59：提交审查按钮

    ](img/Figure_26.59_B17469.jpg)

    图26.59：提交审查按钮

1.  确认应用状态已更改为**等待审查**：

![图26.60：显示等待审查的应用状态

](img/Figure_26.60_B17469.jpg)

图26.60：显示等待审查的应用状态

您需要等待苹果审查应用，如果您的应用被批准或拒绝，您将收到一封电子邮件。如果您的应用被拒绝，将有一个链接带您到苹果解决方案中心页面，其中描述了您的应用被拒绝的原因。修复问题后，您可以更新存档并重新提交。

您现在知道如何将您的应用提交到App Store了！太棒了！

在下一节中，您将学习如何对您的应用进行内部和外部测试，这对于确保应用高质量且无错误至关重要。

# 测试您的应用

苹果有一个名为**TestFlight**的设施，允许您在将应用发布到App Store之前将其分发给测试者。您需要下载TestFlight应用，可在[https://developer.apple.com/testflight/](https://developer.apple.com/testflight/)找到，以测试您的应用。您的测试者可以是您的内部团队成员（内部测试者）或公众（外部测试者）。让我们在下一节中首先看看如何允许内部团队成员测试您的应用。

## 在内部测试您的应用

当应用处于开发早期阶段时，内部测试是很好的。它仅涉及您的内部团队成员。苹果不会审查内部测试者的应用。您可以发送构建给最多100名测试者进行内部测试。按照以下步骤操作。

1.  前往[http://appstoreconnect.apple.com](http://appstoreconnect.apple.com)并选择**我的应用**。

1.  选择您想要测试的应用。

1.  点击**TestFlight**标签：![图26.61：TestFlight标签

    ](img/Figure_26.61_B17469.jpg)

    图26.61：TestFlight标签

1.  点击**内部测试**旁边的**+**按钮以创建一个新的内部测试组：![图26.62：显示+按钮的TestFlight屏幕

    ](img/Figure_26.62_B17469.jpg)

    图26.62：显示+按钮的TestFlight屏幕

1.  将会出现**创建新内部组**对话框。为您的内部测试组命名并点击**创建**：![图26.63：创建新内部组对话框

    ](img/Figure_26.63_B17469.jpg)

    图26.63：创建新内部组对话框

1.  在您的测试组创建后，点击**+**按钮将用户添加到您的组：![图26.64：显示+按钮的测试组屏幕

    ](img/Figure_26.64_B17469.jpg)

    图26.64：显示+按钮的测试组屏幕

1.  选择所有您想要发送测试构建的用户，然后点击**添加**。他们将受邀测试所有可用的构建：![图26.65：添加测试者屏幕

    ](img/Figure_26.65_B17469.jpg)

    图26.65：添加测试者屏幕

1.  验证测试者是否已添加：

![图26.66：显示测试者部分的TestFlight屏幕

](img/Figure_26.66_B17469.jpg)

图26.66：显示测试者部分的TestFlight屏幕

内部测试将仅涉及您的团队成员。如果您想与大量测试者进行测试，您需要进行外部测试，这将在下一节中描述。

## 在外部测试您的应用

当应用处于开发最后阶段时，外部测试是好的。你可以选择任何人为外部测试者，并且你可以将构建发送给最多10,000名测试者。苹果可能会审查外部测试者的应用。以下是步骤：

1.  前往[http://appstoreconnect.apple.com](http://appstoreconnect.apple.com)并选择**我的应用**。

1.  选择你想要测试的应用。

1.  点击**TestFlight**标签页：

1.  点击**外部测试**旁边的**+**按钮：![图26.67：显示+按钮的TestFlight屏幕

    ](img/Figure_26.67_B17469.jpg)

    图26.67：显示+按钮的TestFlight屏幕

1.  输入测试组的名称并点击**创建**：![图26.68：创建新组屏幕

    ](img/Figure_26.68_B17469.jpg)

    图26.68：创建新组屏幕

1.  点击**测试者**旁边的**+**按钮并选择**添加新测试者**：![图26.69：添加新测试者按钮和菜单

    ](img/Figure_26.69_B17469.jpg)

    图26.69：添加新测试者按钮和菜单

1.  输入测试者的姓名和电子邮件地址，苹果将在构建准备好测试时自动通知他们：![图26.70：添加新测试者到组屏幕

    ](img/Figure_26.70_B17469.jpg)

    图26.70：添加新测试者到组屏幕

1.  在**构建**部分，点击**+**：![图26.71：构建部分

    ](img/Figure_26.71_B17469.jpg)

    图26.71：构建部分

1.  选择你的一个构建并点击**下一步**：![图26.72：选择构建屏幕

    ](img/Figure_26.72_B17469.jpg)

    图26.72：选择构建屏幕

1.  输入**测试信息**并点击**下一步**：![图26.73：测试信息屏幕

    ](img/Figure_26.73_B17469.jpg)

    图26.73：测试信息屏幕

1.  输入**要测试的内容**并点击**提交审查**：

![图26.74：要测试的内容

](img/Figure_26.74_B17469.jpg)

图26.74：要测试的内容屏幕

就像向App Store提交应用一样，你需要等待苹果审查应用，如果你的应用被拒绝，苹果的解决方案中心页面将会有关于为什么你的应用被拒绝的详细信息。然后你可以修复问题并重新提交。

太好了！你现在知道如何内部和外部测试你的应用，并且你已经到达了这本书的结尾！

# 摘要

你现在已经完成了构建应用并将其提交到App Store的整个过程。恭喜！

您首先学习了如何获取Apple开发者账户。接下来，您学习了如何生成证书签名请求来创建允许您在自用设备上测试应用并将其发布到App Store的证书。您学习了如何创建一个捆绑标识符来在App Store上唯一标识您的应用，并注册您的测试设备。之后，您学习了如何创建开发和生产配置文件，以便应用能在您的测试设备上运行并上传到App Store。接下来，您学习了如何创建App Store列表并提交您的发布构建到App Store。最后，您学习了如何使用内部和外部测试员对您的应用进行测试。

您现在知道如何构建和提交应用到App Store，并对您的应用进行内部和外部测试。

一旦应用提交了审查，您能做的就是等待苹果审查您的应用。如果应用被拒绝，请不要担心——这发生在所有开发者身上。通过“问题解决中心”与苹果合作解决问题，并做好研究，了解什么是对苹果可接受的，什么是不可以接受的。

在您的应用上架App Store之后，请随时通过Twitter联系我（`@shah_apple`）和Craig Clayton（`@thedevme`），让我们知道您的进展——我们非常想看看您所构建的内容。
