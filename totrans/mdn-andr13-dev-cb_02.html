<html><head></head><body>
<div id="_idContainer037">
<h1 class="chapter-number" id="_idParaDest-50"><a id="_idTextAnchor082"/><span class="koboSpan" id="kobo.1.1">2</span></h1>
<h1 id="_idParaDest-51"><a id="_idTextAnchor083"/><span class="koboSpan" id="kobo.2.1">Creating Screens Using a Declarative UI and Exploring Compose Principles</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Mobile applications </span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.4.1">require a </span><strong class="bold"><span class="koboSpan" id="kobo.5.1">User Interface</span></strong><span class="koboSpan" id="kobo.6.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.7.1">UI</span></strong><span class="koboSpan" id="kobo.8.1">) for user interactions. </span><span class="koboSpan" id="kobo.8.2">For instance, the old way of creating the UI was imperative in Android. </span><span class="koboSpan" id="kobo.8.3">This meant having </span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.9.1">a separate prototype of the application’s UI using unique </span><strong class="bold"><span class="koboSpan" id="kobo.10.1">Extensible Markup Language</span></strong><span class="koboSpan" id="kobo.11.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.12.1">XML</span></strong><span class="koboSpan" id="kobo.13.1">) layouts and not the same language used to build </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">your logic.</span></span></p>
<p><span class="koboSpan" id="kobo.15.1">However, with Modern Android Development, there is a push to stop using imperative programming and start using a declarative way of making the UI, which means developers design the UI based on the data received. </span><span class="koboSpan" id="kobo.15.2">This design paradigm uses one programming language to create an entire application. </span></p>
<p><span class="koboSpan" id="kobo.16.1">It is fair to acknowledge it may seem difficult for new developers to decide what to learn when building a UI: the old way of creating views or opting for the new Jetpack Compose. </span><span class="koboSpan" id="kobo.16.2">However, suppose you’ve built an Android application before the Jetpack </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">Compose era.</span></span></p>
<p><span class="koboSpan" id="kobo.18.1">In such a case, you may already know using XML is a bit tedious, especially if your code base is complex. </span><span class="koboSpan" id="kobo.18.2">However, utilizing Jetpack Compose as your first choice makes work easier. </span><span class="koboSpan" id="kobo.18.3">In addition, it simplifies UI development by ensuring developers use less code, as they take advantage of the intuitive Kotlin APIs. </span><span class="koboSpan" id="kobo.18.4">Hence, there is a logical push by new developers when creating views to use Jetpack Compose instead </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">of XML.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">However, knowing both can be beneficial since many applications still use XML layouts, and you might have to maintain the view but build new ones using Jetpack Compose. </span><span class="koboSpan" id="kobo.20.2">In this chapter, we will look at Jetpack Compose basics by trying to implement small examples using columns, rows, boxes, lazy columns, </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">and more.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1">In this chapter, we’ll be covering the </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">following recipes:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.24.1">Implementing Android views in </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">Jetpack Compos</span><a id="_idTextAnchor084"/><span class="koboSpan" id="kobo.26.1">e</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Implementing a scrollable list in </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">Jetpack Compos</span><a id="_idTextAnchor085"/><span class="koboSpan" id="kobo.29.1">e</span></span></li>
<li><span class="koboSpan" id="kobo.30.1">Implementing your first tab layout with a view pager using </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">Jetpack Compose</span></span></li>
<li><span class="koboSpan" id="kobo.32.1">Implementing animations </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">in Compose</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">Implementing accessibility in </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">Jetpack Compose</span></span></li>
<li><span class="koboSpan" id="kobo.36.1">Implementing declarative graphics using </span><span class="No-Break"><span class="koboSpan" id="kobo.37.1">Jetpack Compos</span><a id="_idTextAnchor086"/><span class="koboSpan" id="kobo.38.1">e</span></span></li>
</ul>
<h1 id="_idParaDest-52"><a id="_idTextAnchor087"/><span class="koboSpan" id="kobo.39.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.40.1">The complete source code for this chapter can be found at </span><a href="https://github.com/PacktPublishing/Modern-Android-13-Development-Cookbook/tree/main/chapter-two"><span class="koboSpan" id="kobo.41.1">https://github.com/PacktPublishing/Modern-Android-13-Development-Cookbook/tree/main/chapter-two</span></a><span class="koboSpan" id="kobo.42.1">. </span><span class="koboSpan" id="kobo.42.2">To be able to view all the recipes, you will need to run all the preview functions separately. </span><span class="koboSpan" id="kobo.42.3">Hence, look for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.43.1">@Preview</span></strong><span class="koboSpan" id="kobo.44.1"> composable function to view the </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">UI created</span><a id="_idTextAnchor088"/><span class="koboSpan" id="kobo.46.1">.</span></span></p>
<h1 id="_idParaDest-53"><a id="_idTextAnchor089"/><span class="koboSpan" id="kobo.47.1">Implementing Android views in Jetpack Compose</span></h1>
<p><span class="koboSpan" id="kobo.48.1">In every Android application, having a UI element is very crucial. </span><span class="koboSpan" id="kobo.48.2">A view in Android is a simple </span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.49.1">building block for a UI. </span><span class="koboSpan" id="kobo.49.2">A view ensures </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.50.1">users can interact with your application through a tap or other motion. </span><span class="koboSpan" id="kobo.50.2">This recipe will look at different Compose UI elements and see how we can </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">build th</span><a id="_idTextAnchor090"/><span class="koboSpan" id="kobo.52.1">em.</span></span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor091"/><span class="koboSpan" id="kobo.53.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.54.1">In this recipe, we will create one project that we will re-use for the entire chapter, so let’s go ahead and follow the steps in </span><a href="B18827_01.xhtml#_idTextAnchor014"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.55.1">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.56.1">, </span><em class="italic"><span class="koboSpan" id="kobo.57.1">Getting Started with Modern Android Development Skills</span></em><span class="koboSpan" id="kobo.58.1">, on how to create your first </span><span class="No-Break"><span class="koboSpan" id="kobo.59.1">Android project.</span></span></p>
<p><span class="koboSpan" id="kobo.60.1">Create a project and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">Compose Basics</span></strong><span class="koboSpan" id="kobo.62.1">. </span><span class="koboSpan" id="kobo.62.2">In addition, we will mostly use the </span><strong class="bold"><span class="koboSpan" id="kobo.63.1">Preview</span></strong><span class="koboSpan" id="kobo.64.1"> section to view the UI element </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">we crea</span><a id="_idTextAnchor092"/><span class="koboSpan" id="kobo.66.1">te.</span></span></p>
<h2 id="_idParaDest-55"><a id="_idTextAnchor093"/><span class="koboSpan" id="kobo.67.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.68.1">Once you have created the project, follow these steps to build several Compose </span><span class="No-Break"><span class="koboSpan" id="kobo.69.1">UI elements:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.70.1">Inside our project, let us go ahead and create a new package and call it components. </span><span class="koboSpan" id="kobo.70.2">This is where we will add all the components </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">we create.</span></span></li>
<li><span class="koboSpan" id="kobo.72.1">Create a Kotlin file and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">UIComponents.kt</span></strong><span class="koboSpan" id="kobo.74.1">; inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.75.1">UIComponent</span></strong><span class="koboSpan" id="kobo.76.1">, go ahead and create a composable function, call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">EditTextExample()</span></strong><span class="koboSpan" id="kobo.78.1">, and call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.79.1">OutlinedTextField()</span></strong><span class="koboSpan" id="kobo.80.1"> function; this will prompt you to import the required import, which </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">androidx.Compose.material.OutlinedTextField</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.83.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.84.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.85.1">
fun EditTextExample() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.86.1">
    OutlinedTextField()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.87.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.88.1">When you </span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.89.1">look deep into </span><strong class="source-inline"><span class="koboSpan" id="kobo.90.1">OutlineTextField</span></strong><span class="koboSpan" id="kobo.91.1"> (see </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.92.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.93.1">.1</span></em><span class="koboSpan" id="kobo.94.1">), you will notice the function accepts </span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.95.1">several inputs, and this is very useful when you need to customize your own </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">composable functions.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer025">
<span class="koboSpan" id="kobo.97.1"><img alt="Figure 2.1 – The OutlinedTextField input" src="image/Figure_2.1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.98.1">Figure 2.1 – The OutlinedTextField input</span></p>
<ol>
<li value="4"><span class="koboSpan" id="kobo.99.1">For our </span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.100.1">example, we will not </span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.101.1">do much with the UI we create and will rather just look at how we </span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">create them.</span></span></li>
<li><span class="koboSpan" id="kobo.103.1">Now, to fully create our </span><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">OutlinedTextField()</span></strong><span class="koboSpan" id="kobo.105.1"> based on the types of input we see it accepts, we can give it a text and color and we can decorate it using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.106.1">Modifier()</span></strong><span class="koboSpan" id="kobo.107.1">; that is, by giving it specific instructions such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.108.1">fillMaxWidth()</span></strong><span class="koboSpan" id="kobo.109.1">, which sets the max width. </span><span class="koboSpan" id="kobo.109.2">When we say fill, we are simply specifying it should be fully filled. </span><span class="koboSpan" id="kobo.109.3">We set </span><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">.padding(top)</span></strong><span class="koboSpan" id="kobo.111.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">16.dp</span></strong><span class="koboSpan" id="kobo.113.1">, which applies additional space along each edge of the content in </span><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">dp</span></strong><span class="koboSpan" id="kobo.115.1">. </span><span class="koboSpan" id="kobo.115.2">It also has a value, which is the value to be entered in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">OutlinedTextField</span></strong><span class="koboSpan" id="kobo.117.1">, and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1">onValueChange</span></strong><span class="koboSpan" id="kobo.119.1"> lambda that listens to the </span><span class="No-Break"><span class="koboSpan" id="kobo.120.1">input change.</span></span></li>
<li><span class="koboSpan" id="kobo.121.1">We also give our </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">OutlinedText</span></strong><span class="koboSpan" id="kobo.123.1"> some border colors when focused and when not focused to reflect the different states. </span><span class="koboSpan" id="kobo.123.2">Hence, if you start entering input, the box will change color to blue, as specified in </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">the code:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.125.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.126.1">
fun EditTextExample() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.127.1">
    OutlinedTextField(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.128.1">
        value = "",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.129.1">
        onValueChange = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.130.1">
        label = { Text(stringResource(id =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.131.1">
        R.string.sample)) },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.132.1">
        modifier = Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.133.1">
            .fillMaxWidth()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.134.1">
            .padding(top = 16.dp),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.135.1">
        colors =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.136.1">
            TextFieldDefaults.outlinedTextFieldColors(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.137.1">
                focusedBorderColor = Color.Blue,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.138.1">
                unfocusedBorderColor = Color.Black</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.139.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.140.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.141.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.142.1">We also </span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.143.1">have another type </span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.144.1">of </span><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">TextField</span></strong><span class="koboSpan" id="kobo.146.1">, which is not outlined, and if you compare what </span><strong class="source-inline"><span class="koboSpan" id="kobo.147.1">OutlinedTextField</span></strong><span class="koboSpan" id="kobo.148.1"> takes in as input, you will notice they are </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">fairly similar:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.150.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.151.1">
fun NotOutlinedEditTextExample() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.152.1">
    TextField(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.153.1">
        value = "",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.154.1">
        onValueChange = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.155.1">
        label = { Text(stringResource(id =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.156.1">
        R.string.sample)) },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.157.1">
        modifier = Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.158.1">
            .fillMaxWidth()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.159.1">
            .padding(top = 8.dp, bottom = 16.dp),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.160.1">
        colors =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.161.1">
            TextFieldDefaults.outlinedTextFieldColors(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.162.1">
                focusedBorderColor = Color.Blue,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.163.1">
                unfocusedBorderColor = Color.Black</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.164.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.165.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.166.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.167.1">You can </span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.168.1">run the application </span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.169.1">by adding the Compose functions inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.170.1">@Preview</span></strong><span class="koboSpan" id="kobo.171.1"> composable function. </span><span class="koboSpan" id="kobo.171.2">In our example, we can create </span><strong class="source-inline"><span class="koboSpan" id="kobo.172.1">UIElementPreview()</span></strong><span class="koboSpan" id="kobo.173.1">, which is a preview function for displaying our UI. </span><span class="koboSpan" id="kobo.173.2">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.174.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.175.1">.2</span></em><span class="koboSpan" id="kobo.176.1">, the top view is </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">OutlinedTextField</span></strong><span class="koboSpan" id="kobo.178.1">, whereas the second one is a </span><span class="No-Break"><span class="koboSpan" id="kobo.179.1">normal </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">TextField</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.181.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer026">
<span class="koboSpan" id="kobo.182.1"><img alt="Figure 2.2 – OutlinedTextField and TextField" src="image/Figure_2.2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.183.1">Figure 2.2 – OutlinedTextField and TextField</span></p>
<ol>
<li value="9"><span class="koboSpan" id="kobo.184.1">Now, let’s </span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.185.1">go ahead and look </span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.186.1">at button examples. </span><span class="koboSpan" id="kobo.186.2">We will look at different ways to create buttons with different shapes. </span><span class="koboSpan" id="kobo.186.3">If you hover over the </span><strong class="source-inline"><span class="koboSpan" id="kobo.187.1">Button()</span></strong><span class="koboSpan" id="kobo.188.1"> composable function, you will see what it accepts as input, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.189.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.190.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer027">
<span class="koboSpan" id="kobo.192.1"><img alt="Figure 2.3 – Button input" src="image/Figure_2.3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.193.1">Figure 2.3 – Button input</span></p>
<p><span class="koboSpan" id="kobo.194.1">In our second example, we will try to create a button with an icon on it. </span><span class="koboSpan" id="kobo.194.2">In addition, we will add text, which is crucial when creating buttons since we need to specify to </span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.195.1">users what action </span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.196.1">or what the button will be doing once it is </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">clicked on.</span></span></p>
<ol>
<li value="10"><span class="koboSpan" id="kobo.198.1">So, go ahead and create a Compose function in the same Kotlin file and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">ButtonWithIcon()</span></strong><span class="koboSpan" id="kobo.200.1">, and then import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">Button()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.202.1">composable function.</span></span></li>
<li><span class="koboSpan" id="kobo.203.1">Inside it, you will need to import an </span><strong class="source-inline"><span class="koboSpan" id="kobo.204.1">Icon()</span></strong><span class="koboSpan" id="kobo.205.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">painterResource</span></strong><span class="koboSpan" id="kobo.207.1"> input, a content description, </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">Modifier</span></strong><span class="koboSpan" id="kobo.209.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">tint</span></strong><span class="koboSpan" id="kobo.211.1">. </span><span class="koboSpan" id="kobo.211.2">We will also need </span><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">Text()</span></strong><span class="koboSpan" id="kobo.213.1">, which will give our button a name. </span><span class="koboSpan" id="kobo.213.2">For our example, we will not </span><span class="No-Break"><span class="koboSpan" id="kobo.214.1">use </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.215.1">tint</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.217.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.218.1">
fun ButtonWithIcon() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.219.1">
    Button(onClick = {}) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.220.1">
        Icon(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.221.1">
            painterResource(id =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.222.1">
                R.drawable.ic_baseline_shopping_bag_24                ),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.223.1">
            contentDescription = stringResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.224.1">
                id = R.string.shop),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.225.1">
            modifier = Modifier.size(20.dp)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.226.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.227.1">
        Text(text = stringResource(id = R.string.buy),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.228.1">
            Modifier.padding(start = 10.dp))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.229.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.230.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.231.1">Let us </span><a id="_idIndexMarker100"/><span class="koboSpan" id="kobo.232.1">also go ahead and create </span><a id="_idIndexMarker101"/><span class="koboSpan" id="kobo.233.1">a new composable function and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">CornerCutShapeButton()</span></strong><span class="koboSpan" id="kobo.235.1">; in this example, we will try to create a button with </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">cut corners:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.237.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.238.1">
fun CornerCutShapeButton() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.239.1">
    Button(onClick = {}, shape = CutCornerShape(10)) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.240.1">
        Text(text = stringResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.241.1">
            id = R.string.cornerButton))  }}}}</span></pre></li>
<li><span class="koboSpan" id="kobo.242.1">Let us also go ahead and create a new composable function and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">RoundCornerShapeButton()</span></strong><span class="koboSpan" id="kobo.244.1">; in this example, we will try to create a button with </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">round corners:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.246.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.247.1">
fun RoundCornerShapeButton() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.248.1">
    Button(onClick = {}, shape =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.249.1">
    RoundedCornerShape(10.dp)) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.250.1">
        Text(text = stringResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.251.1">
            id = R.string.rounded))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.252.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.253.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.254.1">Let us also </span><a id="_idIndexMarker102"/><span class="koboSpan" id="kobo.255.1">go ahead and </span><a id="_idIndexMarker103"/><span class="koboSpan" id="kobo.256.1">create a new composable function and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">ElevatedButtonExample()</span></strong><span class="koboSpan" id="kobo.258.1">; in this example, we will try to create a button </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">with elevation:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.260.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.261.1">
fun ElevatedButtonExample() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.262.1">
    Button(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.263.1">
        onClick = {},</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.264.1">
        elevation = ButtonDefaults.elevation(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.265.1">
            defaultElevation = 8.dp,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.266.1">
            pressedElevation = 10.dp,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.267.1">
            disabledElevation = 0.dp</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.268.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.269.1">
    ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.270.1">
        Text(text = stringResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.271.1">
            id = R.string.elevated))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.272.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.273.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.274.1">When you </span><a id="_idIndexMarker104"/><span class="koboSpan" id="kobo.275.1">run the application, you </span><a id="_idIndexMarker105"/><span class="koboSpan" id="kobo.276.1">should have an image similar to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.277.1">Figure 2</span></em></span><em class="italic"><span class="koboSpan" id="kobo.278.1">.4</span></em><span class="koboSpan" id="kobo.279.1">; the first button after </span><strong class="source-inline"><span class="koboSpan" id="kobo.280.1">TextField</span></strong><span class="koboSpan" id="kobo.281.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">ButtonWithIcon()</span></strong><span class="koboSpan" id="kobo.283.1">, the second one is </span><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">CornerCutShapeButton()</span></strong><span class="koboSpan" id="kobo.285.1">, the third is </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">RoundCornerShapeButton()</span></strong><span class="koboSpan" id="kobo.287.1">, and, lastly, we </span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">have </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">ElevatedButtonExample()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer028">
<span class="koboSpan" id="kobo.291.1"><img alt="Figure 2.4 – The different button types and other UI elements" src="image/Figure_2.4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.292.1">Figure 2.4 – The different button types and other UI elements</span></p>
<ol>
<li value="16"><span class="koboSpan" id="kobo.293.1">Now, let us look at one last example since we will be using different views and styles throughout the book and will learn more in the process. </span><span class="koboSpan" id="kobo.293.2">Now, let us look at an image view; the </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">Image()</span></strong><span class="koboSpan" id="kobo.295.1"> composable function takes in several inputs, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.296.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.297.1">.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer029">
<span class="koboSpan" id="kobo.299.1"><img alt="Figure 2.5 – Different ImageView input types" src="image/Figure_2.5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.300.1">Figure 2.5 – Different ImageView input types</span></p>
<ol>
<li value="17"><span class="koboSpan" id="kobo.301.1">In our example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">Image()</span></strong><span class="koboSpan" id="kobo.303.1"> will only have a painter, which is not nullable, meaning </span><a id="_idIndexMarker106"/><span class="koboSpan" id="kobo.304.1">you need to provide an </span><a id="_idIndexMarker107"/><span class="koboSpan" id="kobo.305.1">image for this composable function, a content description for accessibility, and </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">a modifier:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.307.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.308.1">
fun ImageViewExample() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.309.1">
    Image(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.310.1">
        painterResource(id = R.drawable.android),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.311.1">
        contentDescription = stringResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.312.1">
            id = R.string.image),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.313.1">
        modifier = Modifier.size(200.dp)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.314.1">
    )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.315.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.316.1">You can </span><a id="_idIndexMarker108"/><span class="koboSpan" id="kobo.317.1">also try to play around </span><a id="_idIndexMarker109"/><span class="koboSpan" id="kobo.318.1">with others things, such as adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">RadioButton()</span></strong><span class="koboSpan" id="kobo.320.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">CheckBox()</span></strong><span class="koboSpan" id="kobo.322.1"> elements and customizing them. </span><span class="koboSpan" id="kobo.322.2">When you run your application, you should have something similar to </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.323.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.324.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer030">
<span class="koboSpan" id="kobo.326.1"><img alt="Figure 2.6 – Se﻿veral UI components" src="image/Figure_2.6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.327.1">Figure 2.6 – Se</span><a id="_idTextAnchor094"/><span class="koboSpan" id="kobo.328.1">veral UI components</span></p>
<h2 id="_idParaDest-56"><a id="_idTextAnchor095"/><span class="koboSpan" id="kobo.329.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.330.1">Every composable function is annotated with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.331.1">@Composable</span></strong><span class="koboSpan" id="kobo.332.1"> annotation. </span><span class="koboSpan" id="kobo.332.2">This annotation tells the Compose compiler that the provided compiler is intended to convert the </span><a id="_idIndexMarker110"/><span class="koboSpan" id="kobo.333.1">provided data into a UI. </span><span class="koboSpan" id="kobo.333.2">It is also </span><a id="_idIndexMarker111"/><span class="koboSpan" id="kobo.334.1">important to note each composable function name needs to be a noun and not a verb or an adjective, and Google provides these guidelines. </span><span class="koboSpan" id="kobo.334.2">Any composable function you create can accept parameters that enable the app logic to describe or modify </span><span class="No-Break"><span class="koboSpan" id="kobo.335.1">your UI.</span></span></p>
<p><span class="koboSpan" id="kobo.336.1">We mention the Compose compiler, which means that a compiler is any special program that takes the code we wrote, examines it, and translates it into something the computer can understand – or </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">machine language.</span></span></p>
<p><span class="koboSpan" id="kobo.338.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.339.1">Icon()</span></strong><span class="koboSpan" id="kobo.340.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">painterResouce</span></strong><span class="koboSpan" id="kobo.342.1"> specifies the icon we will be adding to the button, the content description helps with accessibility, and the modifier is used to decorate </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">our icon.</span></span></p>
<p><span class="koboSpan" id="kobo.344.1">We can preview the UI elements we build by adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">@Preview</span></strong><span class="koboSpan" id="kobo.346.1"> annotation and adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.347.1">showBackground = </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">true</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.350.1">
@Preview(showBackground = true)</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">@Preview</span></strong><span class="koboSpan" id="kobo.352.1"> is powerful, and we will look at how you can utilize it bette</span><a id="_idTextAnchor096"/><span class="koboSpan" id="kobo.353.1">r in </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">future chapters.</span></span></p>
<h1 id="_idParaDest-57"><a id="_idTextAnchor097"/><span class="koboSpan" id="kobo.355.1">Implementing a scrollable list in Jetpack Compose</span></h1>
<p><span class="koboSpan" id="kobo.356.1">When building </span><a id="_idIndexMarker112"/><span class="koboSpan" id="kobo.357.1">Android applications, one </span><a id="_idIndexMarker113"/><span class="koboSpan" id="kobo.358.1">thing that we can all agree on is you must know how to build a </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">RecyclerView</span></strong><span class="koboSpan" id="kobo.360.1"> to display your data. </span><span class="koboSpan" id="kobo.360.2">With our new, modern way of building Android applications, if we need to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">RecyclerView</span></strong><span class="koboSpan" id="kobo.362.1">, we can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.364.1">, which is similar. </span><span class="koboSpan" id="kobo.364.2">In this recipe, we will look at rows, columns, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.366.1">, and build a scrollable list using our </span><span class="No-Break"><span class="koboSpan" id="kobo.367.1">dummy data.</span></span></p>
<p><span class="koboSpan" id="kobo.368.1">In addition, we will be learning some </span><a id="_idTextAnchor098"/><span class="koboSpan" id="kobo.369.1">Kotlin in </span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">the process.</span></span></p>
<h2 id="_idParaDest-58"><a id="_idTextAnchor099"/><span class="koboSpan" id="kobo.371.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.372.1">We will continue using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">Compose Basics</span></strong><span class="koboSpan" id="kobo.374.1"> project to build a scrollable list; hence, to get started, you need to have done the </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">previous recipe.</span></span></p>
<h2 id="_idParaDest-59"><a id="_idTextAnchor100"/><span class="koboSpan" id="kobo.376.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.377.1">Follow these </span><a id="_idIndexMarker114"/><span class="koboSpan" id="kobo.378.1">steps to build your first </span><span class="No-Break"><span class="koboSpan" id="kobo.379.1">scrollable list:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.380.1">Let us go </span><a id="_idIndexMarker115"/><span class="koboSpan" id="kobo.381.1">ahead and build our first scrollable list, but first, we need to create our dummy data, and this is the item we want to be displayed on our list. </span><span class="koboSpan" id="kobo.381.2">Hence, create a package called </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">favoritecity</span></strong><span class="koboSpan" id="kobo.383.1"> where our scrollable example </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">will live.</span></span></li>
<li><span class="koboSpan" id="kobo.385.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">favoritecity</span></strong><span class="koboSpan" id="kobo.387.1"> package, create a new data class and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.388.1">City</span></strong><span class="koboSpan" id="kobo.389.1">; this will be our dummy data source – </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">data class </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.391.1">City ()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.393.1">Let us model our </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">City</span></strong><span class="koboSpan" id="kobo.395.1"> data class. </span><span class="koboSpan" id="kobo.395.2">Make sure you add the necessary imports once you have added the </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">annotated values:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.397.1">
data class City(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.398.1">
    val id: Int,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.399.1">
    @StringRes val nameResourceId: Int,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.400.1">
    @DrawableRes val imageResourceId: Int</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.401.1">
)</span></pre></li>
<li><span class="koboSpan" id="kobo.402.1">Now, in our dummy data, we need to create a Kotlin class and call this class </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">CityDataSource</span></strong><span class="koboSpan" id="kobo.404.1">. </span><span class="koboSpan" id="kobo.404.2">In this class, we will create a function called </span><strong class="source-inline"><span class="koboSpan" id="kobo.405.1">loadCities()</span></strong><span class="koboSpan" id="kobo.406.1">, which will return our list of </span><strong class="source-inline"><span class="koboSpan" id="kobo.407.1">List&lt;City&gt;</span></strong><span class="koboSpan" id="kobo.408.1">, which we will display in our scrollable list. </span><span class="koboSpan" id="kobo.408.2">Check the </span><em class="italic"><span class="koboSpan" id="kobo.409.1">Technical requirements</span></em><span class="koboSpan" id="kobo.410.1"> section for all the required imports to get all the code </span><span class="No-Break"><span class="koboSpan" id="kobo.411.1">and images:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.412.1">
class CityDataSource {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.413.1">
    fun loadCities(): List&lt;City&gt; {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.414.1">
        return listOf&lt;City&gt;(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.415.1">
            City(1, R.string.spain, R.drawable.spain),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.416.1">
            City(2, R.string.new_york,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.417.1">
                R.drawable.newyork),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.418.1">
            City(3, R.string.tokyo, R.drawable.tokyo),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.419.1">
            City(4, R.string.switzerland,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.420.1">
                R.drawable.switzerland),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.421.1">
            City(5, R.string.singapore,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.422.1">
                R.drawable.singapore),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.423.1">
            City(6, R.string.paris, R.drawable.paris),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.424.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.425.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.426.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.427.1">Now, we have </span><a id="_idIndexMarker116"/><span class="koboSpan" id="kobo.428.1">our dummy data, and it </span><a id="_idIndexMarker117"/><span class="koboSpan" id="kobo.429.1">is time to display this on our scrollable list. </span><span class="koboSpan" id="kobo.429.2">Let’s create a new Kotlin file in our </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1">components </span></strong><span class="koboSpan" id="kobo.431.1">package and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1">CityComponents</span></strong><span class="koboSpan" id="kobo.433.1">. </span><span class="koboSpan" id="kobo.433.2">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.434.1">CityComponents</span></strong><span class="koboSpan" id="kobo.435.1">, we will create our </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">@</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.437.1">Preview</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.438.1"> function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.439.1">
@Preview(showBackground = true)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.440.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.441.1">
private fun CityCardPreview() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.442.1">
    CityApp()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.443.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.444.1">Inside our </span><strong class="source-inline"><span class="koboSpan" id="kobo.445.1">@Preview</span></strong><span class="koboSpan" id="kobo.446.1"> function, we have another composable function, </span><strong class="source-inline"><span class="koboSpan" id="kobo.447.1">CityApp()</span></strong><span class="koboSpan" id="kobo.448.1">; inside this function, we will call our </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">CityList</span></strong><span class="koboSpan" id="kobo.450.1"> composable function, which </span><a id="_idIndexMarker118"/><span class="koboSpan" id="kobo.451.1">has the list as a </span><a id="_idIndexMarker119"/><span class="koboSpan" id="kobo.452.1">parameter. </span><span class="koboSpan" id="kobo.452.2">In addition, in this composable function, we will call </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.454.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.455.1">items</span></strong><span class="koboSpan" id="kobo.456.1"> will be </span><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">CityCard(cities)</span></strong><span class="koboSpan" id="kobo.458.1">. </span><span class="koboSpan" id="kobo.458.2">See the </span><em class="italic"><span class="koboSpan" id="kobo.459.1">How it works</span></em><span class="koboSpan" id="kobo.460.1"> section for further explanation about </span><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">LazyColumn</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.462.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">items</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.465.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.466.1">
fun CityList(cityList: List&lt;City&gt;) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.467.1">
    LazyColumn {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.468.1">
        items(cityList) { cities -&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.469.1">
            CityCard(cities)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.470.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.471.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.472.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.473.1">Finally, let us construct our </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">CityCard(city)</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.475.1">composable function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.476.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.477.1">
fun CityCard(city: City) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.478.1">
    Card(modifier = Modifier.padding(10.dp),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.479.1">
    elevation = 4.dp) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.480.1">
        Column {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.481.1">
            Image(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.482.1">
                painter = painterResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.483.1">
                    city.imageResourceId),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.484.1">
                contentDescription = stringResource(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.485.1">
                    city.nameResourceId),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.486.1">
                modifier = Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.487.1">
                    .fillMaxWidth()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.488.1">
                    .height(154.dp),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.489.1">
                contentScale = ContentScale.Crop</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.490.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.491.1">
            Text(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.492.1">
                text = LocalContext.current.getString(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.493.1">
                    city.nameResourceId),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.494.1">
                modifier = Modifier.padding(16.dp),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.495.1">
                style = MaterialTheme.typography.h5</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.496.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.497.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.498.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.499.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.500.1">When you </span><a id="_idIndexMarker120"/><span class="koboSpan" id="kobo.501.1">run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">CityCardPreview</span></strong><span class="koboSpan" id="kobo.503.1"> composable </span><a id="_idIndexMarker121"/><span class="koboSpan" id="kobo.504.1">function, you should have a scrollable list, as seen in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.505.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.506.1">.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.507.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer031">
<span class="koboSpan" id="kobo.508.1"><img alt="Figure 2.7﻿ – A scrollable list of cities" src="image/Figure_2.7.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.509.1">Figure 2.7</span><a id="_idTextAnchor101"/><span class="koboSpan" id="kobo.510.1"> – A scrollable list of cities</span></p>
<h2 id="_idParaDest-60"><a id="_idTextAnchor102"/><span class="koboSpan" id="kobo.511.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.512.1">In Kotlin, a list </span><a id="_idIndexMarker122"/><span class="koboSpan" id="kobo.513.1">has two types, </span><strong class="bold"><span class="koboSpan" id="kobo.514.1">immutable</span></strong><span class="koboSpan" id="kobo.515.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.516.1">mutable</span></strong><span class="koboSpan" id="kobo.517.1">. </span><span class="koboSpan" id="kobo.517.2">Immutable lists </span><a id="_idIndexMarker123"/><span class="koboSpan" id="kobo.518.1">are items that cannot be modified, whereas </span><a id="_idIndexMarker124"/><span class="koboSpan" id="kobo.519.1">mutable lists are items in the list that can be modified. </span><span class="koboSpan" id="kobo.519.2">To </span><a id="_idIndexMarker125"/><span class="koboSpan" id="kobo.520.1">define a list, we can say a list is a generic ordered collection of elements, and these elements can be in the form of integers, strings, images, and so on, which is mostly informed by the type of data we want our lists to contain. </span><span class="koboSpan" id="kobo.520.2">For instance, in our example, we have a string and image helping identify our favorite cities by name </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">and image.</span></span></p>
<p><span class="koboSpan" id="kobo.522.1">In our </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1">City</span></strong><span class="koboSpan" id="kobo.524.1"> data class, we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1">@StringRes</span></strong><span class="koboSpan" id="kobo.526.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">@DrawableRes</span></strong><span class="koboSpan" id="kobo.528.1"> in order to just pull this directly from the </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1">res</span></strong><span class="koboSpan" id="kobo.530.1"> folders for </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1">Drawable</span></strong><span class="koboSpan" id="kobo.532.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">String</span></strong><span class="koboSpan" id="kobo.534.1"> easily, and they also represent the ID for the images </span><span class="No-Break"><span class="koboSpan" id="kobo.535.1">and string.</span></span></p>
<p><span class="koboSpan" id="kobo.536.1">We created </span><strong class="source-inline"><span class="koboSpan" id="kobo.537.1">CityList</span></strong><span class="koboSpan" id="kobo.538.1"> and annotated it with the composable function and declared the list of city objects as our parameter in the function. </span><span class="koboSpan" id="kobo.538.2">A scrollable list in Jetpack Compose is made using </span><strong class="source-inline"><span class="koboSpan" id="kobo.539.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.540.1">. </span><span class="koboSpan" id="kobo.540.2">The main difference between </span><strong class="source-inline"><span class="koboSpan" id="kobo.541.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.542.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.543.1">Column</span></strong><span class="koboSpan" id="kobo.544.1"> is that when using </span><strong class="source-inline"><span class="koboSpan" id="kobo.545.1">Column</span></strong><span class="koboSpan" id="kobo.546.1">, you can only display small items, as Compose loads all items </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">at once.</span></span></p>
<p><span class="koboSpan" id="kobo.548.1">In addition, a column can only hold fixed composable functions, whereas </span><strong class="source-inline"><span class="koboSpan" id="kobo.549.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.550.1">, as the name suggests, loads the content as required on demand, making it good for loading more items when needed. </span><span class="koboSpan" id="kobo.550.2">In addition, </span><strong class="source-inline"><span class="koboSpan" id="kobo.551.1">LazyColumn</span></strong><span class="koboSpan" id="kobo.552.1"> comes with a scrolling ability inbuilt, which makes work easier </span><span class="No-Break"><span class="koboSpan" id="kobo.553.1">for developers.</span></span></p>
<p><span class="koboSpan" id="kobo.554.1">We also </span><a id="_idIndexMarker126"/><span class="koboSpan" id="kobo.555.1">created a composable function, </span><strong class="source-inline"><span class="koboSpan" id="kobo.556.1">CityCard</span></strong><span class="koboSpan" id="kobo.557.1">, where we import the </span><strong class="source-inline"><span class="koboSpan" id="kobo.558.1">Card()</span></strong><span class="koboSpan" id="kobo.559.1"> element from Compose. </span><span class="koboSpan" id="kobo.559.2">A card contains </span><a id="_idIndexMarker127"/><span class="koboSpan" id="kobo.560.1">content and actions about a single object; in our example, for instance, our card has an image and the name of the city. </span><span class="koboSpan" id="kobo.560.2">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">Card()</span></strong><span class="koboSpan" id="kobo.562.1"> element in Compose has the following inputs in </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">its parameter:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.564.1">
@Composable
fun Card(
    modifier: Modifier = Modifier,
    shape: Shape = MaterialTheme.shapes.medium,
    backgroundColor: Color = MaterialTheme.colors.surface,
    contentColor: Color = contentColorFor(backgroundColor),
    border: BorderStroke? </span><span class="koboSpan" id="kobo.564.2">= null,
    elevation: Dp = 1.dp,
    content: @Composable () -&gt; Unit
),</span></pre>
<p><span class="koboSpan" id="kobo.565.1">This means you can easily model your card to the best fitting; our card has padding and elevation, and </span><a id="_idIndexMarker128"/><span class="koboSpan" id="kobo.566.1">the scope has a column. </span><span class="koboSpan" id="kobo.566.2">In </span><a id="_idIndexMarker129"/><span class="koboSpan" id="kobo.567.1">this column, we have an image and text, which helps describe the image for </span><span class="No-Break"><span class="koboSpan" id="kobo.568.1">more context.</span></span></p>
<h2 id="_idParaDest-61"><a id="_idTextAnchor103"/><span class="koboSpan" id="kobo.569.1">See also</span></h2>
<p><span class="koboSpan" id="kobo.570.1">There is more to learn about lists and grids in Compose; you can use this link to learn </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">more: </span></span><a href="https://developer.android.com/jetpack/compose/lists"><span class="No-Break"><span class="koboSpan" id="kobo.572.1">https://developer.android.com/jetpack/compose/lists</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.573.1">.</span></span></p>
<h1 id="_idParaDest-62"><a id="_idTextAnchor104"/><span class="koboSpan" id="kobo.574.1">Implementing your first tab layout with a view pager using Jetpack Compose</span></h1>
<p><span class="koboSpan" id="kobo.575.1">In </span><a id="_idIndexMarker130"/><span class="koboSpan" id="kobo.576.1">Android development, having a slide between pages is very common, with a significant use case being </span><a id="_idIndexMarker131"/><span class="koboSpan" id="kobo.577.1">onboarding or even when you are trying to display specific data in a tabbed, carousel way. </span><span class="koboSpan" id="kobo.577.2">In </span><a id="_idIndexMarker132"/><span class="koboSpan" id="kobo.578.1">this recipe, we will build a simple horizontal pager in Compose and see how we can utilize the new knowledge to b</span><a id="_idTextAnchor105"/><span class="koboSpan" id="kobo.579.1">uild better and more modern </span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">Android apps.</span></span></p>
<h2 id="_idParaDest-63"><a id="_idTextAnchor106"/><span class="koboSpan" id="kobo.581.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.582.1">In this example, we will build a horizontal pager that changes colors when selected to show the state is selected. </span><span class="koboSpan" id="kobo.582.2">We will look into states in </span><a href="B18827_03.xhtml#_idTextAnchor137"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.583.1">Chapter 3</span></em></span></a><span class="koboSpan" id="kobo.584.1">, </span><em class="italic"><span class="koboSpan" id="kobo.585.1">Handling the UI State in Jetpack Compose and Using Hilt</span></em><span class="koboSpan" id="kobo.586.1">, for better understanding. </span><span class="koboSpan" id="kobo.586.2">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.587.1">Compose Basics</span></strong><span class="koboSpan" id="kobo.588.1"> project to </span><span class="No-Break"><span class="koboSpan" id="kobo.589.1">get started.</span></span></p>
<h2 id="_idParaDest-64"><a id="_idTextAnchor107"/><span class="koboSpan" id="kobo.590.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.591.1">Follow these steps to build your </span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">tab carousel:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.593.1">Add the following pager dependencies </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.595.1">build.gradle(Module:app)</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.597.1">
implementation "com.google.accompanist:accompanist-pager:0.x.x"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.598.1">
implementation "com.google.accompanist:accompanist-pager-indicators:0.x.x"</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.599.1">
implementation 'androidx.Compose.material:material:1.x.x'</span></pre></li>
</ol>
<p><span class="koboSpan" id="kobo.600.1">Jetpack Compose offers </span><strong class="bold"><span class="koboSpan" id="kobo.601.1">Accompanist</span></strong><span class="koboSpan" id="kobo.602.1">, a group of libraries that aims to support it with commonly required features by developers – for instance, in our case, </span><span class="No-Break"><span class="koboSpan" id="kobo.603.1">the pager.</span></span></p>
<ol>
<li value="2"><span class="koboSpan" id="kobo.604.1">In the </span><a id="_idIndexMarker133"/><span class="koboSpan" id="kobo.605.1">same project from previous recipes, let’s create a package and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.606.1">pagerexample</span></strong><span class="koboSpan" id="kobo.607.1">; inside it, create a Kotlin file and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.608.1">CityTabExample</span></strong><span class="koboSpan" id="kobo.609.1">; inside </span><a id="_idIndexMarker134"/><span class="koboSpan" id="kobo.610.1">this file, create a composable function and call </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.612.1">CityTabCarousel</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.613.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.614.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.615.1">
fun CityTabCarousel(){}</span></pre></li>
<li><span class="koboSpan" id="kobo.616.1">Now, let </span><a id="_idIndexMarker135"/><span class="koboSpan" id="kobo.617.1">us go ahead and build our </span><strong class="source-inline"><span class="koboSpan" id="kobo.618.1">CityTabCarousel</span></strong><span class="koboSpan" id="kobo.619.1">; for our example, we will create a dummy list of pages with our cities from the </span><span class="No-Break"><span class="koboSpan" id="kobo.620.1">previous project:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.621.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.622.1">
fun CityTabCarousel(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.623.1">
    pages: MutableList&lt;String&gt; = arrayListOf(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.624.1">
        "Spain",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.625.1">
        "New York",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.626.1">
        "Tokyo",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.627.1">
        "Switzerland",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.628.1">
        "Singapore",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.629.1">
        "Paris" )) {. </span><span class="koboSpan" id="kobo.629.2">. </span><span class="koboSpan" id="kobo.629.3">.}</span></pre></li>
<li><span class="koboSpan" id="kobo.630.1">We will need to change the color of the button based on the state, and to do this; we need to use </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">LocalContext</span></strong><span class="koboSpan" id="kobo.632.1">, which provides the context we can use. </span><span class="koboSpan" id="kobo.632.2">We will also need to create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1">var pagerState = rememberPagerState()</span></strong><span class="koboSpan" id="kobo.634.1">, which will remember our pager state, and finally, when </span><a id="_idIndexMarker136"/><span class="koboSpan" id="kobo.635.1">clicked, we will need to move to the next city in our pager, which will be very helpful. </span><span class="koboSpan" id="kobo.635.2">Hence, go </span><a id="_idIndexMarker137"/><span class="koboSpan" id="kobo.636.1">ahead and add the following to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1">CityTabCarousel</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.638.1">composable function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.639.1">
val context = LocalContext.current</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.640.1">
var pagerState = rememberPagerState()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.641.1">
val coroutineScope = rememberCoroutineScope()</span></pre></li>
<li><span class="koboSpan" id="kobo.642.1">Now, let’s </span><a id="_idIndexMarker138"/><span class="koboSpan" id="kobo.643.1">create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.644.1">Column</span></strong><span class="koboSpan" id="kobo.645.1"> element and add our </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1">ScrollableTabRow()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.647.1">composable function:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.648.1">
Column {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.649.1">
    ScrollableTabRow(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.650.1">
        selectedTabIndex = pagerState.currentPage,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.651.1">
        indicator = { tabPositions -&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.652.1">
            TabRowDefaults.Indicator(...)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.653.1">
        },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.654.1">
        edgePadding = 0.dp,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.655.1">
        backgroundColor = Color(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.656.1">
            context.resources.getColor(R.color.white,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.657.1">
                null)),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.658.1">
    ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.659.1">
        pages.forEachIndexed { index, title -&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.660.1">
            val isSelected =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.661.1">
                pagerState.currentPage == index</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.662.1">
            TabHeader(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.663.1">
                title,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.664.1">
                isSelected,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.665.1">
                onClick = { coroutineScope.launch {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.666.1">
                pagerState.animateScrollToPage(index)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.667.1">
                } },</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.668.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.669.1">
        }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.670.1">
    }</span></pre></li>
<li><span class="koboSpan" id="kobo.671.1">Add </span><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">Text()</span></strong><span class="koboSpan" id="kobo.673.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.674.1">TabHeader()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.675.1">for </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.676.1">HorizontalPager</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.677.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.678.1">
    HorizontalPager(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.679.1">
        count = pages.size,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.680.1">
        state = pagerState,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.681.1">
        modifier = Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.682.1">
            .fillMaxWidth()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.683.1">
            .fillMaxHeight()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.684.1">
            .background(Color.White)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.685.1">
    ) { page -&gt;</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.686.1">
        Text(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.687.1">
            text = "Display City Name:</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.688.1">
                ${pages[page]}",</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.689.1">
            modifier = Modifier.fillMaxWidth(),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.690.1">
            style = TextStyle(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.691.1">
                textAlign = TextAlign.Center</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.692.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.693.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.694.1">
    }</span></pre></li>
<li><span class="koboSpan" id="kobo.695.1">Please </span><a id="_idIndexMarker139"/><span class="koboSpan" id="kobo.696.1">download </span><a id="_idIndexMarker140"/><span class="koboSpan" id="kobo.697.1">the entire </span><a id="_idIndexMarker141"/><span class="koboSpan" id="kobo.698.1">code for this recipe by following the link provided in the </span><em class="italic"><span class="koboSpan" id="kobo.699.1">Technical requirements</span></em><span class="koboSpan" id="kobo.700.1"> section to add all the required code. </span><span class="koboSpan" id="kobo.700.2">Finally, run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.701.1">@Preview</span></strong><span class="koboSpan" id="kobo.702.1"> function, and your app should look</span><a id="_idTextAnchor108"/><span class="koboSpan" id="kobo.703.1"> like </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.704.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.705.1">.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer032">
<span class="koboSpan" id="kobo.707.1"><img alt="Figure 2.8 – Tabs with cities" src="image/Figure_2.8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.708.1">Figure 2.8 – Tabs with cities</span></p>
<h2 id="_idParaDest-65"><a id="_idTextAnchor109"/><span class="koboSpan" id="kobo.709.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.710.1">Accompanist comes with some significant libraries – for example, System UI Controller, AppCompact Compose Theme Adapter, Material Theme Adapter, Pager, Drawable Painter, and Flow Layouts, just to mention </span><span class="No-Break"><span class="koboSpan" id="kobo.711.1">a few.</span></span></p>
<p><span class="koboSpan" id="kobo.712.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.713.1">ScrollableTabRow()</span></strong><span class="koboSpan" id="kobo.714.1"> that we use inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.715.1">Column</span></strong><span class="koboSpan" id="kobo.716.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.717.1">CityTabCarousel</span></strong><span class="koboSpan" id="kobo.718.1"> function </span><a id="_idIndexMarker142"/><span class="koboSpan" id="kobo.719.1">contains a row of tabs and helps display an indicator underneath the currently focused or selected tab. </span><span class="koboSpan" id="kobo.719.2">In addition, as the name suggests, it enables scrolling and you do not have to </span><a id="_idIndexMarker143"/><span class="koboSpan" id="kobo.720.1">implement further scrolling tooling. </span><span class="koboSpan" id="kobo.720.2">It also places its tab offsets at the starting edge, and you </span><a id="_idIndexMarker144"/><span class="koboSpan" id="kobo.721.1">can quickly scroll tabs that are off-screen, as you will see when you run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.722.1">@Preview</span></strong><span class="koboSpan" id="kobo.723.1"> function and play around </span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">with it.</span></span></p>
<p><span class="koboSpan" id="kobo.725.1">When we invoke </span><strong class="source-inline"><span class="koboSpan" id="kobo.726.1">remember()</span></strong><span class="koboSpan" id="kobo.727.1">, in Compose, this means we keep any value consistent across recomposition. </span><span class="koboSpan" id="kobo.727.2">Compose provides this function to help us store single objects in memory. </span><span class="koboSpan" id="kobo.727.3">When we trigger our application to run, </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">remember()</span></strong><span class="koboSpan" id="kobo.729.1"> stores the initial value. </span><span class="koboSpan" id="kobo.729.2">As the word means, it simply retains the value and returns the stored value so that the composable function can </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">use it.</span></span></p>
<p><span class="koboSpan" id="kobo.731.1">Furthermore, whenever the stored value changes, you can update it, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">remember()</span></strong><span class="koboSpan" id="kobo.733.1"> function will keep it. </span><span class="koboSpan" id="kobo.733.2">The next time we trigger another run in our app and recomposition occurs, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.734.1">remember()</span></strong><span class="koboSpan" id="kobo.735.1"> function will provide the latest </span><span class="No-Break"><span class="koboSpan" id="kobo.736.1">stored value.</span></span></p>
<p><span class="koboSpan" id="kobo.737.1">You will also notice our </span><strong class="source-inline"><span class="koboSpan" id="kobo.738.1">MutableList&lt;String&gt;</span></strong><span class="koboSpan" id="kobo.739.1"> is indexed at each position, and we do this to check which is selected. </span><span class="koboSpan" id="kobo.739.2">It is within this Lambda that we call </span><strong class="source-inline"><span class="koboSpan" id="kobo.740.1">TabHeader</span></strong><span class="koboSpan" id="kobo.741.1"> and showcase </span><a id="_idIndexMarker145"/><span class="koboSpan" id="kobo.742.1">the selected tab pages. </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1">forEachIndexed</span></strong><span class="koboSpan" id="kobo.744.1"> performs the given action on each element, </span><a id="_idIndexMarker146"/><span class="koboSpan" id="kobo.745.1">providing a sequential index of elements. </span><span class="koboSpan" id="kobo.745.2">We also ensure when a user clicks on a specific </span><a id="_idIndexMarker147"/><span class="koboSpan" id="kobo.746.1">tab, we are on the </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">right page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.748.1">
onClick = { coroutineScope.launch { pagerState.animateScrollToPage(index) } }</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.749.1">HorizontalPager</span></strong><span class="koboSpan" id="kobo.750.1"> is a horizontally scrolling layout that allows our users to flip between items from left to right. </span><span class="koboSpan" id="kobo.750.2">It takes in several inputs, but we supply it with the count, state, and modifier to decorate it in our use case. </span><span class="koboSpan" id="kobo.750.3">In the Lambda, we display text – in our example, showing which page we are on, which helps when navigating, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.751.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.752.1">.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer033">
<span class="koboSpan" id="kobo.754.1"><img alt="Figure 2.9 – HorizontalPager" src="image/Figure_2.9.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.755.1">Figure 2.9 – HorizontalPager</span></p>
<p><span class="koboSpan" id="kobo.756.1">Our </span><strong class="source-inline"><span class="koboSpan" id="kobo.757.1">TabHeader</span></strong><span class="koboSpan" id="kobo.758.1"> composable function has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.759.1">Box()</span></strong><span class="koboSpan" id="kobo.760.1">; a box in Jetpack Compose will always </span><a id="_idIndexMarker148"/><span class="koboSpan" id="kobo.761.1">size itself to fit the content, and this is subject to the specified constraints. </span><span class="koboSpan" id="kobo.761.2">In our example, we </span><a id="_idIndexMarker149"/><span class="koboSpan" id="kobo.762.1">decorate our </span><strong class="source-inline"><span class="koboSpan" id="kobo.763.1">Box</span></strong><span class="koboSpan" id="kobo.764.1"> with the selectable modifier, which configures components to be selectable </span><a id="_idIndexMarker150"/><span class="koboSpan" id="kobo.765.1">as part of a mutually exclusive group, allowing each item to be selected only once at any </span><span class="No-Break"><span class="koboSpan" id="kobo.766.1">given time.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.767.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.768.1">Ensure your target and compile SDK targets 33. </span><span class="koboSpan" id="kobo.768.2">In addition, you will notice that most Accompanist’s libraries are experimental, which means they can change. </span><span class="koboSpan" id="kobo.768.3">There is debate on whether to use this in your production, so you should always consult your team on these APIs. </span><span class="koboSpan" id="kobo.768.4">To see the entire list of libraries supported by Accompanist, you can</span><a id="_idTextAnchor110"/><span class="koboSpan" id="kobo.769.1"> follow this </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1">link: </span></span><a href="https://github.com/google/accompanist"><span class="No-Break"><span class="koboSpan" id="kobo.771.1">https://github.com/google/accompanist</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.772.1">.</span></span></p>
<h1 id="_idParaDest-66"><a id="_idTextAnchor111"/><span class="koboSpan" id="kobo.773.1">Implementing animations in Compose</span></h1>
<p><span class="koboSpan" id="kobo.774.1">Animation in Android is the process of adding motion effects to views. </span><span class="koboSpan" id="kobo.774.2">This can be achieved using images, text, or even starting a new screen where the transition is noticeable </span><a id="_idIndexMarker151"/><span class="koboSpan" id="kobo.775.1">using motion effects. </span><span class="koboSpan" id="kobo.775.2">Animations are vital in Modern Android Development since modern UIs are more interactive </span><a id="_idIndexMarker152"/><span class="koboSpan" id="kobo.776.1">and adaptive to smoother experiences, and users </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">like them.</span></span></p>
<p><span class="koboSpan" id="kobo.778.1">Furthermore, applications these days are rated based on how great their UI and user experiences are, hence the need to ensure your application is modern and robust. </span><span class="koboSpan" id="kobo.778.2">In this example, we will build a collapsing toolbar, an animation that is widely used in the </span><span class="No-Break"><span class="koboSpan" id="kobo.779.1">Android world.</span></span></p>
<h2 id="_idParaDest-67"><span class="koboSpan" id="kobo.780.1">Getti</span><a id="_idTextAnchor112"/><span class="koboSpan" id="kobo.781.1">ng ready</span></h2>
<p><span class="koboSpan" id="kobo.782.1">We will continue using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.783.1">Compose </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">Basics</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.785.1"> project.</span></span></p>
<h2 id="_idParaDest-68"><a id="_idTextAnchor113"/><span class="koboSpan" id="kobo.786.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.787.1">We will be building a collapsing toolbar in this recipe; there are other great animations you can now build utilizing the power of Compose. </span><span class="koboSpan" id="kobo.787.2">The power is in </span><span class="No-Break"><span class="koboSpan" id="kobo.788.1">your hands:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.789.1">We will not need to add any dependency to this recipe. </span><span class="koboSpan" id="kobo.789.2">We already have everything in place. </span><span class="koboSpan" id="kobo.789.3">So, let us go ahead and create a new package and add a Kotlin </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1">file, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.791.1">collapsingtoolbar</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.792.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.793.1">Inside the Kotlin file, go ahead and create a new composable </span><span class="No-Break"><span class="koboSpan" id="kobo.794.1">function, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.795.1">CollapsingTool</span></strong></span><strong class="source-inline"> </strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">BarExample()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.797.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.798.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.799.1">
fun CollapsingToolbarExample() {...}</span></pre></li>
<li><span class="koboSpan" id="kobo.800.1">We will have all our needed composable functions in a box; you can refer to the previous recipe to refresh your memory on that. </span><span class="koboSpan" id="kobo.800.2">We will also need to define the height at which we will start to collapse our view, and this can be based on preference; for our example, we can set </span><strong class="source-inline"><span class="koboSpan" id="kobo.801.1">height</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.802.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.803.1">260.dp</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.804.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.805.1">
private val height = 260.dp</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.806.1">
private val titleToolbar = 50.dp</span></pre></li>
<li><span class="koboSpan" id="kobo.807.1">Let us </span><a id="_idIndexMarker153"/><span class="koboSpan" id="kobo.808.1">go ahead and add more </span><a id="_idIndexMarker154"/><span class="koboSpan" id="kobo.809.1">composable functions with dummy text data to display once we scroll our content. </span><span class="koboSpan" id="kobo.809.2">We can assume this app is used for reading information about the cities </span><span class="No-Break"><span class="koboSpan" id="kobo.810.1">we display:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.811.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.812.1">
fun CollapsingToolbarExample() {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.813.1">
    val scrollState: ScrollState =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.814.1">
        rememberScrollState(0)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.815.1">
    val headerHeight = with(LocalDensity.current) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.816.1">
        height.toPx() }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.817.1">
    val toolbarHeight = with(LocalDensity.current) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.818.1">
        titleToolbar.toPx() }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.819.1">
    Box(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.820.1">
        modifier = Modifier.fillMaxSize()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.821.1">
    ) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.822.1">
        CollapsingHeader(scrollState, headerHeight)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.823.1">
        FactsAboutNewYork(scrollState)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.824.1">
        OurToolBar(scrollState, headerHeight,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.825.1">
            toolbarHeight)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.826.1">
        City()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.827.1">
    }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.828.1">
}</span></pre></li>
<li><span class="koboSpan" id="kobo.829.1">In our </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1">CollapsingHeader</span></strong><span class="koboSpan" id="kobo.831.1"> function, we pass in the scroll state and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.832.1">headerHeight</span></strong><span class="koboSpan" id="kobo.833.1"> a float. </span><span class="koboSpan" id="kobo.833.2">We decorate Box with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1">Modifier.graphicLayer</span></strong><span class="koboSpan" id="kobo.835.1">, where we set a parallax effect to make it look good </span><span class="No-Break"><span class="koboSpan" id="kobo.836.1">and presentable.</span></span></li>
<li><span class="koboSpan" id="kobo.837.1">We also </span><a id="_idIndexMarker155"/><span class="koboSpan" id="kobo.838.1">ensure we add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.839.1">Brush()</span></strong><span class="koboSpan" id="kobo.840.1"> and set </span><a id="_idIndexMarker156"/><span class="koboSpan" id="kobo.841.1">the colors we need, and specify where it </span><span class="No-Break"><span class="koboSpan" id="kobo.842.1">should start:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.843.1">
Box(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.844.1">
    Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.845.1">
        .fillMaxSize()</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.846.1">
        .background(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.847.1">
            brush = Brush.verticalGradient(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.848.1">
                colors = listOf(Color.Transparent,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.849.1">
                Color(0xFF6D38CA)),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.850.1">
                startY = 1 * headerHeight / 5</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.851.1">
            )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.852.1">
        )</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.853.1">
)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.854.1">
...</span></pre></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.855.1">FactsAboutNewYork</span></strong><span class="koboSpan" id="kobo.856.1"> is not a complex composable function, just dummy text; then, finally, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.857.1">ToolBar</span></strong><span class="koboSpan" id="kobo.858.1">, we utilize </span><strong class="source-inline"><span class="koboSpan" id="kobo.859.1">AnimatedVisibility</span></strong><span class="koboSpan" id="kobo.860.1"> and declare our </span><strong class="source-inline"><span class="koboSpan" id="kobo.861.1">enter</span></strong><span class="koboSpan" id="kobo.862.1"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.863.1">exit</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.864.1"> transition:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.865.1">
AnimatedVisibility(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.866.1">
    visible = showToolbar,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.867.1">
    enter = fadeIn(animationSpec = tween(200)),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.868.1">
    exit = fadeOut(animationSpec = tween(200))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.869.1">
) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.870.1">
...</span></pre></li>
<li><span class="koboSpan" id="kobo.871.1">Finally, run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.872.1">@Preview</span></strong><span class="koboSpan" id="kobo.873.1"> function, and you will have a collapsible toolbar, which </span><a id="_idIndexMarker157"/><span class="koboSpan" id="kobo.874.1">brings a smooth experience </span><a id="_idIndexMarker158"/><span class="koboSpan" id="kobo.875.1">to your UI. </span><span class="koboSpan" id="kobo.875.2">In addition, get the entire code in the </span><em class="italic"><span class="koboSpan" id="kobo.876.1">Techn</span><a id="_idTextAnchor114"/><span class="koboSpan" id="kobo.877.1">ical </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.878.1">requirements</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.879.1"> section.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer034">
<span class="koboSpan" id="kobo.880.1"><img alt="Figure 2.10 – A collapsible toolbar" src="image/Figure_2.10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.881.1">Figure 2.10 – A collapsible toolbar</span></p>
<h2 id="_idParaDest-69"><a id="_idTextAnchor115"/><span class="koboSpan" id="kobo.882.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.883.1">In Modern Android Development, the Jetpack Compose library has many animation APIs that are available as composable functions. </span><span class="koboSpan" id="kobo.883.2">For example, you might want your image or text to fade in and </span><span class="No-Break"><span class="koboSpan" id="kobo.884.1">fade out.</span></span></p>
<p><span class="koboSpan" id="kobo.885.1">Hence, if you </span><a id="_idIndexMarker159"/><span class="koboSpan" id="kobo.886.1">are animating appearance </span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.887.1">and disappearance, which can be for an image, a text, a radio group, a button, and so on, you can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.888.1">AnimatedVisibility</span></strong><span class="koboSpan" id="kobo.889.1"> to achieve this. </span><span class="koboSpan" id="kobo.889.2">Otherwise, if you are swapping content based on the state and want your content to crossfade, you can use </span><strong class="source-inline"><span class="koboSpan" id="kobo.890.1">CrossFade</span></strong><span class="koboSpan" id="kobo.891.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.892.1">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.893.1">AnimatedContent</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.895.1">val headerHeight = with(LocalDensity.current) { height.toPx() }</span></strong><span class="koboSpan" id="kobo.896.1"> provides density, which will be used to transform the DP and SP units, and we can use this when we provide the DP, which we will do and later convert into the body of </span><span class="No-Break"><span class="koboSpan" id="kobo.897.1">our layout.</span></span></p>
<p><span class="koboSpan" id="kobo.898.1">You can call the modifier and use </span><strong class="source-inline"><span class="koboSpan" id="kobo.899.1">graphicsLayer</span></strong><span class="koboSpan" id="kobo.900.1"> to update any of the content above it independently to minimize invalidated content. </span><span class="koboSpan" id="kobo.900.2">In addition, </span><strong class="source-inline"><span class="koboSpan" id="kobo.901.1">graphicsLayer</span></strong><span class="koboSpan" id="kobo.902.1"> can be used to apply effects such as scaling, rotation, opacity, shadow, or </span><span class="No-Break"><span class="koboSpan" id="kobo.903.1">even clipping.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.904.1">translationY = -scroll.value.toFloat() / 2f</span></strong><span class="koboSpan" id="kobo.905.1"> basically sets the vertical pixel offset of the layer relative to its top bound. </span><span class="koboSpan" id="kobo.905.2">The default value is always zero, but you can customize this to fit your needs. </span><span class="koboSpan" id="kobo.905.3">We also ensure the gradient is only applied to wrapping the title in </span><strong class="source-inline"><span class="koboSpan" id="kobo.906.1">startY = 1 * headerHeight / </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.907.1">5</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.908.1">.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.909.1">EnterTransition</span></strong><span class="koboSpan" id="kobo.910.1"> defines how the target content should appear; a target here can be an image, a text, or even a radio group. </span><span class="koboSpan" id="kobo.910.2">On the other hand, </span><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">ExitTransition</span></strong><span class="koboSpan" id="kobo.912.1"> defines how the initial target content should disappear when exiting the app or </span><span class="No-Break"><span class="koboSpan" id="kobo.913.1">navigating away.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.914.1">AnimatedContent</span></strong><span class="koboSpan" id="kobo.915.1"> offers </span><strong class="source-inline"><span class="koboSpan" id="kobo.916.1">slideIntoContainer</span></strong><span class="koboSpan" id="kobo.917.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">slideOutOfContainer</span></strong><span class="koboSpan" id="kobo.919.1">, and it animates its content as it changes based on the target state, which is remarkable. </span><span class="koboSpan" id="kobo.919.2">In addition, you can also encapsulate a transition and make it reusable by creating a class that holds all your animation values and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.920.1">Update()</span></strong><span class="koboSpan" id="kobo.921.1">function, which returns an instance of </span><span class="No-Break"><span class="koboSpan" id="kobo.922.1">that class.</span></span></p>
<p><span class="koboSpan" id="kobo.923.1">It is also fair to mention that, as with the old ways of doing animation in Android using </span><strong class="source-inline"><span class="koboSpan" id="kobo.924.1">MotionLayout</span></strong><span class="koboSpan" id="kobo.925.1">, there are many ways to do transitions in Jetpack Compose. </span><span class="koboSpan" id="kobo.925.2">For instance, in </span><em class="italic"><span class="koboSpan" id="kobo.926.1">Table 2.1</span></em><span class="koboSpan" id="kobo.927.1">, you will see the different types </span><span class="No-Break"><span class="koboSpan" id="kobo.928.1">of transitions:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-1">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.929.1">EnterTransition</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.930.1">ExitTransition</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">SlideIn</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.932.1">SlideOut</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">FadeIn</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.934.1">FadeOut</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">SlideInHorizontally</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.936.1">SlideOutHorizontally</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.937.1">SlideInVertically</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.938.1">SlideOutVertically</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.939.1">ScaleIn</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.940.1">SlaceOut</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.941.1">ExpandIn</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.942.1">ShrinkOut</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.943.1">ExpandHorizontally</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">ShinkHorizontally</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.945.1">ExpandVertically</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.946.1">ShrinkVertically</span></strong></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.947.1">Table 2.1 – A table showing different types of transitions</span></p>
<p><span class="koboSpan" id="kobo.948.1">In addition, you </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.949.1">can add your own custom </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.950.1">animation effects in Jetpack Compose beyond the already built-in enter and exit animations by simply accessing the elemental transition instance via the </span><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">transition</span></strong><span class="koboSpan" id="kobo.952.1"> property inside the content lambda for </span><strong class="source-inline"><span class="koboSpan" id="kobo.953.1">AnimatedVisibility</span></strong><span class="koboSpan" id="kobo.954.1">. </span><span class="koboSpan" id="kobo.954.2">You will also notice any animation states that have </span><span class="No-Break"><span class="koboSpan" id="kobo.955.1">been added</span><a id="_idTextAnchor116"/><span class="koboSpan" id="kobo.956.1">.</span></span></p>
<h1 id="_idParaDest-70"><a id="_idTextAnchor117"/><span class="koboSpan" id="kobo.957.1">Implementing accessibility in Jetpack Compose</span></h1>
<p><span class="koboSpan" id="kobo.958.1">As we build </span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.959.1">Android applications, we need to always have accessibility in the back of our minds because this makes technology inclusive and ensures all people with special needs are considered as we </span><span class="No-Break"><span class="koboSpan" id="kobo.960.1">build applications.</span></span></p>
<p><span class="koboSpan" id="kobo.961.1">Accessibility should be a team effort. </span><span class="koboSpan" id="kobo.961.2">If well handled, the advantages include having more people using your application. </span><span class="koboSpan" id="kobo.961.3">An accessible application is better for everyone. </span><span class="koboSpan" id="kobo.961.4">You also reduce the risk of </span><span class="No-Break"><span class="koboSpan" id="kobo.962.1">being sued.</span></span></p>
<p><span class="koboSpan" id="kobo.963.1">There are different types of disabilities, such as visual, aural, and motor impairments. </span><span class="koboSpan" id="kobo.963.2">If you open your </span><strong class="bold"><span class="koboSpan" id="kobo.964.1">Accessibility</span></strong><span class="koboSpan" id="kobo.965.1"> settings, you will see the different options that people with disabilities use on </span><span class="No-Break"><span class="koboSpan" id="kobo.966.1">their devices</span><a id="_idTextAnchor118"/><span class="koboSpan" id="kobo.967.1">.</span></span></p>
<h2 id="_idParaDest-71"><a id="_idTextAnchor119"/><span class="koboSpan" id="kobo.968.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.969.1">Like previous recipes, we will continue using our sample project from previous recipes; you do not need to </span><span class="No-Break"><span class="koboSpan" id="kobo.970.1">install anythin</span><a id="_idTextAnchor120"/><span class="koboSpan" id="kobo.971.1">g.</span></span></p>
<h2 id="_idParaDest-72"><a id="_idTextAnchor121"/><span class="koboSpan" id="kobo.972.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.973.1">For this </span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.974.1">recipe, we will describe the visual elements, which are </span><span class="No-Break"><span class="koboSpan" id="kobo.975.1">very vital:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.976.1">By default, when we add an </span><strong class="source-inline"><span class="koboSpan" id="kobo.977.1">Image</span></strong><span class="koboSpan" id="kobo.978.1"> function, you might notice that it has two parameters, a painter for the image and a content description to visually describe </span><span class="No-Break"><span class="koboSpan" id="kobo.979.1">the element:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.980.1">
Image(painter = , contentDescription = )</span></pre></li>
<li><span class="koboSpan" id="kobo.981.1">When you set the content description to </span><strong class="source-inline"><span class="koboSpan" id="kobo.982.1">null</span></strong><span class="koboSpan" id="kobo.983.1">, you indicate to the Android framework that this element does not have an associated action or state. </span><span class="koboSpan" id="kobo.983.2">So, let’s go ahead and update all our </span><span class="No-Break"><span class="koboSpan" id="kobo.984.1">content descriptions:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.985.1">
Image(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.986.1">
    modifier = modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.987.1">
    painter = painterResource(city.imageResourceId),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.988.1">
    contentDescription =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.989.1">
        stringResource(R.string.city_images))</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.990.1">
)</span></pre></li>
<li><span class="koboSpan" id="kobo.991.1">Make sure you add the string to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.992.1">string </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.993.1">res</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.994.1"> folder:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.995.1">
&lt;string name="city_images"&gt;City Images&lt;/string&gt;</span></pre></li>
<li><span class="koboSpan" id="kobo.996.1">So, go ahead and ensure you add a content description for every image that </span><span class="No-Break"><span class="koboSpan" id="kobo.997.1">requires it.</span></span></li>
<li><span class="koboSpan" id="kobo.998.1">In Compose, you can easily indicate whether a text is a heading by specifying this in the modifier and using semantics to show that that is a heading. </span><span class="koboSpan" id="kobo.998.2">Let’s add that in our </span><span class="No-Break"><span class="koboSpan" id="kobo.999.1">decorated text:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1000.1">
...</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1001.1">
modifier = Modifier</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1002.1">
    .padding(18.dp)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1003.1">
    .semantics { heading() }</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1004.1">
...</span></pre></li>
<li><span class="koboSpan" id="kobo.1005.1">Finally, we can go ahead and compile, run, and test whether our application is accessible by following this link on how to manually test using talkback or using automated </span><span class="No-Break"><span class="koboSpan" id="kobo.1006.1">testing: </span></span><a href="https://developer.android.com/guide/topics/ui/accessibility/testing"><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">https://developer.android.com/guide/topics/ui/accessibility/testi</span><span id="_idTextAnchor122"/><span class="koboSpan" id="kobo.1008.1">ng</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1009.1">.</span></span></li>
</ol>
<h2 id="_idParaDest-73"><a id="_idTextAnchor123"/><span class="koboSpan" id="kobo.1010.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.1011.1">Jetpack Compose </span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.1012.1">is built with accessibility in mind; that is to say, material components such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.1013.1">RadioButton</span></strong><span class="koboSpan" id="kobo.1014.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1015.1">Switch</span></strong><span class="koboSpan" id="kobo.1016.1">, and so on have their size internally set, but only when these components can receive </span><span class="No-Break"><span class="koboSpan" id="kobo.1017.1">user interactions.</span></span></p>
<p><span class="koboSpan" id="kobo.1018.1">Furthermore, any screen element that users can click on or interact with should be large enough for reliable interaction. </span><span class="koboSpan" id="kobo.1018.2">A standard format sets these elements to a size of at least </span><strong class="source-inline"><span class="koboSpan" id="kobo.1019.1">48dp</span></strong><span class="koboSpan" id="kobo.1020.1"> for </span><strong class="source-inline"><span class="koboSpan" id="kobo.1021.1">width</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1022.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1023.1">height</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1024.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1025.1">For example, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1026.1">Switch</span></strong><span class="koboSpan" id="kobo.1027.1"> has its </span><strong class="source-inline"><span class="koboSpan" id="kobo.1028.1">onCheckChanged</span></strong><span class="koboSpan" id="kobo.1029.1"> parameter set to a non-null value, including width and height of at least </span><strong class="source-inline"><span class="koboSpan" id="kobo.1030.1">48dp</span></strong><span class="koboSpan" id="kobo.1031.1">; we would have </span><strong class="source-inline"><span class="koboSpan" id="kobo.1032.1">CheckableSwitch()</span></strong><span class="koboSpan" id="kobo.1033.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1034.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1035.1">NonCheckableSwitch()</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1036.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1037.1">
@Composable
fun CheckableSwitch(){
    var checked by remember { mutableStateOf(false) }
    Switch(checked = checked, onCheckedChange = </span><strong class="bold"><span class="koboSpan" id="kobo.1038.1">{} </span></strong><span class="koboSpan" id="kobo.1039.1">)
}
@Composable
fun NonCheckableSwitch(){
    var checked by remember { mutableStateOf(false) }
    Switch(checked = checked, onCheckedChange = null )
}</span></pre>
<p><span class="koboSpan" id="kobo.1040.1">Once you have </span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.1041.1">implemented accessibility in your applications, you can easily test it by installing analysis tools from the Play Store – </span><strong class="source-inline"><span class="koboSpan" id="kobo.1042.1">uiautomatorviewer</span></strong><span class="koboSpan" id="kobo.1043.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.1044.1">lint</span></strong><span class="koboSpan" id="kobo.1045.1">. </span><span class="koboSpan" id="kobo.1045.2">You can also automate your tests using Espresso or Roboelectric to check for </span><span class="No-Break"><span class="koboSpan" id="kobo.1046.1">accessibility support.</span></span></p>
<p><span class="koboSpan" id="kobo.1047.1">Finally, you can manually test your application for accessibility support by going to </span><strong class="bold"><span class="koboSpan" id="kobo.1048.1">Settings</span></strong><span class="koboSpan" id="kobo.1049.1">, then to </span><strong class="bold"><span class="koboSpan" id="kobo.1050.1">Accessibility</span></strong><span class="koboSpan" id="kobo.1051.1">, and selecting </span><strong class="bold"><span class="koboSpan" id="kobo.1052.1">talkback</span></strong><span class="koboSpan" id="kobo.1053.1">. </span><span class="koboSpan" id="kobo.1053.2">This is found at the top of the screen; then press </span><strong class="bold"><span class="koboSpan" id="kobo.1054.1">On</span></strong><span class="koboSpan" id="kobo.1055.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.1056.1">Off</span></strong><span class="koboSpan" id="kobo.1057.1"> to turn the talkback functionality on or off. </span><span class="koboSpan" id="kobo.1057.2">Then, navigate to the dialog confirmation, and click </span><strong class="bold"><span class="koboSpan" id="kobo.1058.1">OK</span></strong><span class="koboSpan" id="kobo.1059.1"> to </span><span class="No-Break"><span class="koboSpan" id="kobo.1060.1">confirm permis</span><a id="_idTextAnchor124"/><span class="koboSpan" id="kobo.1061.1">sion.</span></span></p>
<h2 id="_idParaDest-74"><a id="_idTextAnchor125"/><span class="koboSpan" id="kobo.1062.1">There’s more…</span></h2>
<p><span class="koboSpan" id="kobo.1063.1">There is more regarding accessibility that developers should consider as they build their applications, including a state with which they should be able to notify their users on whether a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1064.1">Switch</span></strong><span class="koboSpan" id="kobo.1065.1"> button has been selected. </span><span class="koboSpan" id="kobo.1065.2">This ensures their applications support accessibility and are up </span><span class="No-Break"><span class="koboSpan" id="kobo.1066.1">to stan</span><a id="_idTextAnchor126"/><span class="koboSpan" id="kobo.1067.1">dard.</span></span></p>
<h1 id="_idParaDest-75"><a id="_idTextAnchor127"/><span class="koboSpan" id="kobo.1068.1">Implementing declarative graphics using Jetpack Compose</span></h1>
<p><span class="koboSpan" id="kobo.1069.1">In </span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.1070.1">Android development, your </span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.1071.1">application might have a different need, and this need might be building your own custom graphics for an intended purpose. </span><span class="koboSpan" id="kobo.1071.2">This is very common in many stable and large Android code bases. </span><span class="koboSpan" id="kobo.1071.3">The essential part of any custom view is its appearance. </span><span class="koboSpan" id="kobo.1071.4">Furthermore, custom drawing can be a very easy or complex task based on the needs of your application. </span><span class="koboSpan" id="kobo.1071.5">In Modern Android Development, Jetpack Compose makes it easier to work with custom graphics simply because the demand is immense. </span><span class="koboSpan" id="kobo.1071.6">For example, many applications may need to control what happens on their screen accurately; the use case might be as simple as putting a circle on the screen or building more complex graphics to handle known </span><span class="No-Break"><span class="koboSpan" id="kobo.1072.1">use</span><a id="_idTextAnchor128"/><span class="koboSpan" id="kobo.1073.1"> cases.</span></span></p>
<h2 id="_idParaDest-76"><a id="_idTextAnchor129"/><span class="koboSpan" id="kobo.1074.1">Getting ready</span></h2>
<p><span class="koboSpan" id="kobo.1075.1">Open the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1076.1">Compose Basics</span></strong><span class="koboSpan" id="kobo.1077.1"> project to get started with this recipe. </span><span class="koboSpan" id="kobo.1077.2">You can find the entire code in the </span><em class="italic"><span class="koboSpan" id="kobo.1078.1">Technical </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1079.1">requirements</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1080.1"> s</span><a id="_idTextAnchor130"/><span class="koboSpan" id="kobo.1081.1">ection.</span></span></p>
<h2 id="_idParaDest-77"><a id="_idTextAnchor131"/><span class="koboSpan" id="kobo.1082.1">How to do it…</span></h2>
<p><span class="koboSpan" id="kobo.1083.1">In our </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.1084.1">project, let us create a </span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.1085.1">new package and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.1086.1">circularexample</span></strong><span class="koboSpan" id="kobo.1087.1">; inside this package, create a Kotlin file and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.1088.1">DrawCircleCompose</span></strong><span class="koboSpan" id="kobo.1089.1">; inside the file, create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1090.1">CircleProgressIndicatorExample</span></strong><span class="koboSpan" id="kobo.1091.1"> composable function. </span><span class="koboSpan" id="kobo.1091.2">You will not need to import anything </span><span class="No-Break"><span class="koboSpan" id="kobo.1092.1">for now:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.1093.1">Let us now go ahead and define our composable function. </span><span class="koboSpan" id="kobo.1093.2">Since, in our example, we want to display a tracker in a circle, we need to float to fill in our circle. </span><span class="koboSpan" id="kobo.1093.3">We will also define the colors to help us identify </span><span class="No-Break"><span class="koboSpan" id="kobo.1094.1">the progress:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1095.1">
@Composable</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1096.1">
fun CircleProgressIndicatorExample(tracker: Float, progress: Float) {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1097.1">
    val circleColors = listOf(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1098.1">
        colorResource(id = R.color.purple_700),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1099.1">
        colorResource(id = R.color.teal_200)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1100.1">
    )</span></pre></li>
<li><span class="koboSpan" id="kobo.1101.1">Now, let’s call </span><strong class="source-inline"><span class="koboSpan" id="kobo.1102.1">Canvas</span></strong><span class="koboSpan" id="kobo.1103.1"> to draw our arc. </span><span class="koboSpan" id="kobo.1103.2">We give our circle the size of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1104.1">200.dp</span></strong><span class="koboSpan" id="kobo.1105.1"> with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1106.1">8.dp</span></strong><span class="koboSpan" id="kobo.1107.1"> padding. </span><span class="koboSpan" id="kobo.1107.2">Where it gets interesting is in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1108.1">onDraw</span></strong><span class="koboSpan" id="kobo.1109.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1110.1">startAngle</span></strong><span class="koboSpan" id="kobo.1111.1"> is set at </span><strong class="source-inline"><span class="koboSpan" id="kobo.1112.1">-90</span></strong><span class="koboSpan" id="kobo.1113.1">; the start angle is set in degrees to understand </span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">it better.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.1115.1">The zero represents 3 o’clock, and you can also play around with your start angle to see how </span><strong class="source-inline"><span class="koboSpan" id="kobo.1116.1">-90</span></strong><span class="koboSpan" id="kobo.1117.1"> translates. </span><span class="koboSpan" id="kobo.1117.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1118.1">useCenter</span></strong><span class="koboSpan" id="kobo.1119.1"> Boolean indicates whether arc is </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.1120.1">to close the center </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.1121.1">of the bounds. </span><span class="koboSpan" id="kobo.1121.2">Hence, in our case, we set it to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1122.1">false</span></strong><span class="koboSpan" id="kobo.1123.1">. </span><span class="koboSpan" id="kobo.1123.2">Then, finally, we set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1124.1">style</span></strong><span class="koboSpan" id="kobo.1125.1">, which can be anything based on </span><span class="No-Break"><span class="koboSpan" id="kobo.1126.1">our preference:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1127.1">
Canvas(
    modifier = Modifier
        .size(200.dp)
        .padding(8.dp),
    onDraw = {
        this.drawIntoCanvas {
            drawArc(
                color = colorSecondary,
                startAngle = -90f,
                sweepAngle = 360f,
                useCenter = false,
                style = Stroke(width = 55f, cap =
                    StrokeCap.Butt),
                size = Size(size.width, size.height)
            )
colorResource(id = R.color.teal_200)
 . </span><span class="koboSpan" id="kobo.1127.2">. </span><span class="koboSpan" id="kobo.1127.3">.</span></pre>
<ol>
<li value="3"><span class="koboSpan" id="kobo.1128.1">We have just drawn the first part of the circle; now, we need to draw the progress with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1129.1">Brush</span></strong><span class="koboSpan" id="kobo.1130.1">, which </span><span class="No-Break"><span class="koboSpan" id="kobo.1131.1">utilizes </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1132.1">linearGradient</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1133.1">:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1134.1">
drawArc(</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1135.1">
    brush = Brush.linearGradient(colors =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1136.1">
        circleColors),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1137.1">
    startAngle = -90f,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1138.1">
    sweepAngle = progress(tracker, progress),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1139.1">
    useCenter = false,</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1140.1">
    style = Stroke(width = 55f, cap =</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1141.1">
        StrokeCap.Round),</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1142.1">
    size = Size(size.width, size.height)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1143.1">
) . </span><span class="koboSpan" id="kobo.1143.2">. </span><span class="koboSpan" id="kobo.1143.3">.</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1144.1">
. </span><span class="koboSpan" id="kobo.1144.2">. </span><span class="koboSpan" id="kobo.1144.3">.</span></pre></li>
<li><span class="koboSpan" id="kobo.1145.1">Finally, our </span><strong class="source-inline"><span class="koboSpan" id="kobo.1146.1">progress</span></strong><span class="koboSpan" id="kobo.1147.1"> function </span><a id="_idIndexMarker173"/><span class="koboSpan" id="kobo.1148.1">tells </span><strong class="source-inline"><span class="koboSpan" id="kobo.1149.1">sweepAngle</span></strong><span class="koboSpan" id="kobo.1150.1"> where our </span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.1151.1">progress should be based on our </span><span class="No-Break"><span class="koboSpan" id="kobo.1152.1">tracking abilities:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.1153.1">
private fun progress(tracker: Float, progress: Float): Float {</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1154.1">
    val totalProgress = (progress * 100) / tracker</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1155.1">
    return ((360 * totalProgress) / 100)</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1156.1">
}</span></pre><pre class="source-code"><span class="koboSpan" id="kobo.1157.1">
. </span><span class="koboSpan" id="kobo.1157.2">. </span><span class="koboSpan" id="kobo.1157.3">.</span></pre></li>
<li><span class="koboSpan" id="kobo.1158.1">Run the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1159.1">preview</span></strong><span class="koboSpan" id="kobo.1160.1"> function, and you should see a circular progress indicator as in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1161.1">Figure 2</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1162.1">.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1163.1">.</span></span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer035">
<span class="koboSpan" id="kobo.1164.1"><img alt="Figure 2.11 – Showing a circular progress image" src="image/Figure_2.11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1165.1">Figure 2.11 – Showing a circular progress image</span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1166.1">Im</span><a id="_idTextAnchor132"/><span class="koboSpan" id="kobo.1167.1">portant note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1168.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.1169.1">Canvas</span></strong><span class="koboSpan" id="kobo.1170.1"> composable function uses </span><strong class="source-inline"><span class="koboSpan" id="kobo.1171.1">Canvas</span></strong><span class="koboSpan" id="kobo.1172.1"> to Compose an object, which, in turn, creates and helps manage a view-base Canvas. </span><span class="koboSpan" id="kobo.1172.2">It is also important to mention that Compose makes it easier for developers by maintaining the state and creating and freeing any necessary </span><span class="No-Break"><span class="koboSpan" id="kobo.1173.1">hel</span><a id="_idTextAnchor133"/><span class="koboSpan" id="kobo.1174.1">per objects.</span></span></p>
<h2 id="_idParaDest-78"><a id="_idTextAnchor134"/><span class="koboSpan" id="kobo.1175.1">How it works…</span></h2>
<p><span class="koboSpan" id="kobo.1176.1">Generally, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1177.1">Canvas</span></strong><span class="koboSpan" id="kobo.1178.1"> allows you to specify an area on the screen where you want to draw. </span><span class="koboSpan" id="kobo.1178.2">In the </span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.1179.1">old way of building </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.1180.1">Android applications, we also utilized </span><strong class="source-inline"><span class="koboSpan" id="kobo.1181.1">Canvas</span></strong><span class="koboSpan" id="kobo.1182.1">, and now in Compose, it is more powerful </span><span class="No-Break"><span class="koboSpan" id="kobo.1183.1">and valuable.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1184.1">linearGradient</span></strong><span class="koboSpan" id="kobo.1185.1"> create a linear gradient with the specified colors along the provided start and end coordinates. </span><span class="koboSpan" id="kobo.1185.2">For our example, we give it simple colors that come with </span><span class="No-Break"><span class="koboSpan" id="kobo.1186.1">the project.</span></span></p>
<p><span class="koboSpan" id="kobo.1187.1">The drawing functions have instrumental default parameters that you can use. </span><span class="koboSpan" id="kobo.1187.2">For instance, by default, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">drawArc</span></strong><span class="koboSpan" id="kobo.1189.1">, as you can see, takes in </span><span class="No-Break"><span class="koboSpan" id="kobo.1190.1">several inputs:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer036">
<span class="koboSpan" id="kobo.1191.1"><img alt="Figure 2.12 – Showing what drawArc takes as input" src="image/Figure_2.12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1192.1">Figure 2.12 – Showing what drawArc takes as input</span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.1193.1">sweepAngle</span></strong><span class="koboSpan" id="kobo.1194.1"> in our example, which is the size of the arc in the degree that is drawn clockwise relative to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1195.1">startAngle</span></strong><span class="koboSpan" id="kobo.1196.1">, returns a function that calculates progress. </span><span class="koboSpan" id="kobo.1196.2">This function </span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.1197.1">can be customized to </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.1198.1">fit your needs. </span><span class="koboSpan" id="kobo.1198.2">In our example, we pass in a tracker and progress and return </span><span class="No-Break"><span class="koboSpan" id="kobo.1199.1">a float.</span></span></p>
<p><span class="koboSpan" id="kobo.1200.1">Since we want to fill the circle, we create </span><strong class="source-inline"><span class="koboSpan" id="kobo.1201.1">cal totalProgress</span></strong><span class="koboSpan" id="kobo.1202.1">, which checks </span><em class="italic"><span class="koboSpan" id="kobo.1203.1">progress * 100</span></em><span class="koboSpan" id="kobo.1204.1"> divided by the tracker, and we return </span><em class="italic"><span class="koboSpan" id="kobo.1205.1">360 (circle) * our progress divided by 100</span></em><span class="koboSpan" id="kobo.1206.1">. </span><span class="koboSpan" id="kobo.1206.2">You can customize this function to fit your needs. </span><span class="koboSpan" id="kobo.1206.3">You can also write code to listen to where you are and make the progress move based on your input value from a listen</span><a id="_idTextAnchor135"/><span class="koboSpan" id="kobo.1207.1">er </span><span class="No-Break"><span class="koboSpan" id="kobo.1208.1">you create.</span></span></p>
<h2 id="_idParaDest-79"><a id="_idTextAnchor136"/><span class="koboSpan" id="kobo.1209.1">There’s more…</span></h2>
<p><span class="koboSpan" id="kobo.1210.1">There is more you can do with </span><strong class="source-inline"><span class="koboSpan" id="kobo.1211.1">Canvas</span></strong><span class="koboSpan" id="kobo.1212.1"> and custom drawing. </span><span class="koboSpan" id="kobo.1212.2">One amazing way to enhance your knowledge on the topic is to look into old solutions posted on Stack Overflow, such as drawing a heart or any other shape, and see whether you can do the same </span><span class="No-Break"><span class="koboSpan" id="kobo.1213.1">in Compose.</span></span></p>
</div>
</body></html>