<html><head></head><body>
		<div><h1 id="_idParaDest-196"><em class="italic"><a id="_idTextAnchor201"/>Chapter 14</em>: Getting Data into Collection Views</h1>
			<p>In the previous chapter, you learned about the Model-View-Controller (MVC) design pattern and about collection views. You've also revisited the <strong class="bold">Explore</strong> and <strong class="bold">Restaurant List </strong>screens, and you have seen how the collection views in both screens work. At this point, though, both screens just display cells that do not contain any data. As shown in the app tour in <a href="B17469_09_Final_VK_ePub.xhtml#_idTextAnchor133"><em class="italic">Chapter 9</em></a><em class="italic">, Setting Up the User Interface</em>, the <strong class="bold">Explore</strong> screen should display a list of cuisines, and the <strong class="bold">Restaurant List</strong> screen should display a list of restaurants.</p>
			<p>In this chapter, you're going to implement the model objects for the <strong class="bold">Explore</strong> screen to make it display a list of cuisines. You'll start by learning about model objects that you will use. Next, you'll learn about property lists, and see how they are used to store cuisine data, and you'll create a Swift structure that can store cuisine instances. After that, you'll create a data manager class that reads data from the property list and populates an array of structures. This array of structures will then be used as the data source for the collection view in the <strong class="bold">Explore</strong> screen.</p>
			<p>By the end of this chapter, you'll have learned how property lists are used to store data, how to create model objects, how to create a data manager class that can load data from a property list into an array of model objects, how to configure view controllers to provide model objects to collection view, and how to configure collection views to display data on screen.</p>
			<p>The following topics will be covered:</p>
			<ul>
				<li>Understanding model objects</li>
				<li>Understanding <code>.plist</code> files</li>
				<li>Creating a structure to represent a cuisine</li>
				<li>Implementing a data manager class to read data from a <code>.plist</code> file</li>
				<li>Displaying data in a collection view</li>
			</ul>
			<h1 id="_idParaDest-197"><a id="_idTextAnchor202"/>Technical requirements</h1>
			<p>You will continue working on the <code>LetsEat</code> project that you modified in <a href="B17469_12_Final_VK_ePub.xhtml#_idTextAnchor182"><em class="italic">Chapter 12</em></a><em class="italic">, Modifying and Configuring Cells</em>.</p>
			<p>The resource files and completed Xcode project for this chapter are in the <code>Chapter14 </code>folder of the code bundle for this book, which can be downloaded here:</p>
			<p><a href="https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition">https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition</a></p>
			<p>Check out the following video to see the code in action: </p>
			<p><a href="https://bit.ly/3mWQ8sJ">https://bit.ly/3mWQ8sJ</a></p>
			<p>Let's start by looking at the different model objects that are required to hold the initial data, load the data into the app, and store the data within the app.</p>
			<h1 id="_idParaDest-198"><a id="_idTextAnchor203"/>Understanding model objects</h1>
			<p>As you<a id="_idIndexMarker659"/> learned in <a href="B17469_13_Final_VK_ePub.xhtml#_idTextAnchor194"><em class="italic">Chapter 13</em></a><em class="italic">, Getting Started with MVC and Collection Views</em>, a common design pattern for iOS apps is Model-View-Controller, or MVC. To recap, MVC divides an app into three different parts:</p>
			<ul>
				<li><strong class="bold">Model</strong>: This handles data storage, representation, and data processing tasks.</li>
				<li><strong class="bold">View</strong>: This is anything on the screen that the user can interact with. </li>
				<li><strong class="bold">Controller</strong>: This manages the flow of information between model and view.</li>
			</ul>
			<p>Let's revisit the design of the <strong class="bold">Explore</strong> screen that you saw during the app tour, which looks like this:</p>
			<div><div><img src="img/Figure_14.01_B17469.jpg" alt="Figure 14.1: iOS Simulator showing the Explore screen from the app tour&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.1: iOS Simulator showing the Explore screen from the app tour</p>
			<p>Build and run <a id="_idIndexMarker660"/>your app, and the <strong class="bold">Explore</strong> screen will look like this:</p>
			<div><div><img src="img/Figure_14.02_B17469.jpg" alt="Figure 14.2: iOS Simulator showing the Explore screen from your app&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.2: iOS Simulator showing the Explore screen from your app</p>
			<p>As you can <a id="_idIndexMarker661"/>see, all of the cells are currently empty. Based on the MVC design pattern, you have completed the implementation of the views (collection view section header and collection view) and the controller (the <code>ExploreViewController</code> class). Now, you will add model objects that will provide the data to be displayed.</p>
			<p>First, you'll add a property list, <code>ExploreData.plist</code>, to your project, which contains the name and the image filename for each cuisine. The cuisine images themselves are already present in your <code>Assets.xcassets</code> folder. Next, you'll create a model object, <code>ExploreItem</code>, which will be a structure with two properties. One property will be used to store cuisine names, and the other will be used to store image filenames. After that, you will create a data manager class, <code>ExploreDataManager</code>, which will load the data from <code>ExploreData.plist</code>, put it into an array of <code>ExploreItem</code> instances and provide the array to the <code>ExploreViewController</code> instance. Finally, you will modify the <code>ExploreViewController</code> class so it can provide data for the collection view to display.</p>
			<p>To learn more<a id="_idIndexMarker662"/> about property list files, let's add <code>ExploreData.plist</code> to your project now and see how it stores cuisine data.</p>
			<h1 id="_idParaDest-199"><a id="_idTextAnchor204"/>Understanding .plist files</h1>
			<p>Apple developed <a id="_idIndexMarker663"/>property lists to store data structures or object states for later reconstitution and transmission. They are commonly used to store preferences for applications. Property list files use the <code>.plist</code> filename extension, and hence are often referred to as <code>.plist</code> files. You will be using a <code>.plist</code> file containing cuisine data, <code>ExploreData.plist</code>, in your project.</p>
			<p>You will need to download the code bundle for this book to get the <code>ExploreData.plist</code> file. After that, you can use Xcode to view its contents. Follow these steps:</p>
			<ol>
				<li>If you have not yet done so, download the resource files and completed Xcode project for this from this link: <a href="https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition">https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition</a>.</li>
				<li>Open the <code>Chapter14</code> folder and look inside the <code>resources</code> folder to find <code>ExploreData.plist</code>. This file stores cuisine names and image filenames.</li>
				<li>Open the <code>LetsEat</code> project, right-click on the <code>Explore</code> folder in the Project navigator, and choose <strong class="bold">New Group</strong>.</li>
				<li>Rename the new group that you just added <code>Model</code>.</li>
				<li>Drag <code>ExploreData.plist</code> into this group.</li>
				<li>Make sure <strong class="bold">Copy items if needed</strong> is ticked and click <strong class="bold">Finish</strong>.</li>
			</ol>
			<p>When you click on <code>ExploreData.plist</code> in the Project navigator, you'll see an array that contains dictionaries, as shown:</p>
			<div><div><img src="img/Figure_14.03_B17469.jpg" alt="Figure 14.3: Editor area showing contents of ExploreData.plist&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.3: Editor area showing contents of ExploreData.plist</p>
			<p>Each dictionary has two elements. The first element has a key, <code>name</code>, and a value describing a type of cuisine. The second element has a key, <code>image</code>, and a value containing the filename of a cuisine image. All of the cuisine images are stored in the <code>Assets.xcassets</code> file in your project.</p>
			<p>To use the data contained in <code>ExploreData.plist</code>, you'll need to create a structure to hold it in the<a id="_idIndexMarker664"/> app so it can be accessed later by the <code>ExploreViewController</code> instance. You will create it in the next section.</p>
			<h1 id="_idParaDest-200"><a id="_idTextAnchor205"/>Creating a structure to represent a cuisine</h1>
			<p>To create a<a id="_idIndexMarker665"/> model object that can represent a <a id="_idIndexMarker666"/>cuisine in your app, you will add a new file to your project, <code>ExploreItem</code>, and declare an <code>ExploreItem</code> structure that has properties for a cuisine's name and image. Follow these steps:</p>
			<ol>
				<li value="1">Right-click on the <code>Model</code> folder and select <strong class="bold">New File</strong>.</li>
				<li><strong class="bold">iOS</strong> should already be selected. Choose <strong class="bold">Swift File</strong>, then click <strong class="bold">Next</strong>.</li>
				<li>Name the file <code>ExploreItem</code> and then click <code>import</code> statement.<p class="callout-heading">Important Information</p><p class="callout">The <code>import</code> statement allows you to import other code libraries into your project, giving you the ability to use classes, properties, and methods from them. <code>Foundation</code> is one of Apple's core frameworks, and you can learn more about it here: <a href="https://developer.apple.com/documentation/foundation">https://developer.apple.com/documentation/foundation</a>.</p></li>
				<li>Add the following code to the file to declare a structure named <code>ExploreItem</code>:<pre>struct ExploreItem {
}</pre></li>
				<li>Add the following code before the last curly brace to add two optional <code>String</code> properties<a id="_idIndexMarker667"/> to <a id="_idIndexMarker668"/>the <code>ExploreItem</code> structure:<pre>Struct ExploreItem {
<code>name</code> property will store the cuisine name, and the <code>image</code> property will store the filename of an image from the <code>Assets.xcassets</code> file.</p><p class="callout-heading">Important Information</p><p class="callout">Structures are covered in <a href="B17469_07_Final_VK_ePub.xhtml#_idTextAnchor108"><em class="italic">Chapter 7</em></a>, <em class="italic">Classes, Structures, and Enumerations.</em></p></li>
			</ol>
			<p>Structures automatically get a default initializer. You can create an instance of <code>ExploreItem</code> by using the following statement:</p>
			<pre>let myExploreItem = ExploreItem(name:"name", 
image:"image")</pre>
			<p>However, the name and image filename in <code>ExploreData.plist</code> are stored as dictionary elements, as shown in the following example:</p>
			<p><code>["name": "All", "image": "all.png"]</code></p>
			<p class="callout-heading">Important Information</p>
			<p class="callout">Dictionaries are covered in <a href="B17469_05_Final_VK_ePub.xhtml#_idTextAnchor066"><em class="italic">Chapter 5</em></a>, <em class="italic">Collection Types</em>.</p>
			<p>You'll create a custom initializer that takes a dictionary as a parameter and assigns the values obtained from the dictionary elements to the properties in an <code>ExploreItem </code>instance. You'll <a id="_idIndexMarker669"/>use an extension to add this custom<a id="_idIndexMarker670"/> initializer to the <code>ExploreItem</code> structure.</p>
			<p class="callout-heading">Important Information</p>
			<p class="callout">Extensions are covered in <a href="B17469_08_Final_VK_ePub.xhtml#_idTextAnchor123"><em class="italic">Chapter 8</em></a>, <em class="italic">Protocols, Extensions, and Error Handling</em>.</p>
			<p>Follow these steps:</p>
			<ol>
				<li value="1">Type the following after the <code>ExploreItem</code> structure declaration to add an extension:<pre>extension ExploreItem {
 
}</pre><p>You'll use this extension to add the initializer method to the <code>ExploreItem </code>structure.</p></li>
				<li>Add the following between the curly braces of the extension to declare a custom initializer method:<pre>init(dict: [String: String]) {
 
}</pre><p>Ignore the error that appears, as you will fix it shortly. This initializer takes a dictionary as an argument. Note that both key and value are strings.</p></li>
				<li>Add the following between the curly braces of the initializer:<pre>self.name = dict["name"]
self.image = dict["image"]</pre><p>This assigns the value of the dictionary item with the key <code>"name"</code> to the <code>name</code> property, and the value of the dictionary item with the key <code>"image"</code> to the <code>image</code> property. </p><p>The completed extension should look as follows:</p><pre>extension ExploreItem {
   init(dict: [String: String]) {
      self.name = dict["name"]
      self.image = dict["image"]
   }
}</pre><p>At<a id="_idIndexMarker671"/> this <a id="_idIndexMarker672"/>point, you have a structure, <code>ExploreItem</code>, with two <code>String</code> properties, <code>name</code> and <code>image</code>. When you create an instance of this structure, you will pass in a dictionary containing elements with keys and values of type <code>String</code>. The value for the <code>name</code> key will be assigned to the <code>name</code> property, and the value of the <code>image</code> key will be assigned to the <code>image</code> property.</p></li>
			</ol>
			<p>In the next section, you'll implement a data manager class. This will read the array of dictionaries from the <code>ExploreData.plist</code> file and assign the values of the dictionary elements to <code>ExploreItem</code> instances.</p>
			<h1 id="_idParaDest-201"><a id="_idTextAnchor206"/>Implementing a data manager class to read data from a .plist file</h1>
			<p>You <a id="_idIndexMarker673"/>have <a id="_idIndexMarker674"/>added a <code>.plist</code> file, <code>ExploreData.plist</code>, to your project containing the cuisine data, and you have created a structure, <code>ExploreItem</code>, that can store details of each cuisine. Now, you need to create a new class, <code>ExploreDataManager</code>, that can read the data in the <code>.plist</code> file and store it in an array of <code>ExploreItem</code> instances. You'll refer to this class as a data manager class. Follow these steps:</p>
			<ol>
				<li value="1">Right-click on the <strong class="bold">Model</strong> folder and select <strong class="bold">New File</strong>.</li>
				<li><strong class="bold">iOS</strong> should already be selected. Choose <strong class="bold">Swift File</strong>, then click <strong class="bold">Next</strong>.</li>
				<li>Name the file <code>ExploreDataManager</code> and then click <strong class="bold">Create</strong> to display its contents in the Editor area.</li>
				<li>Type the following code in the file to declare the <code>ExploreDataManager</code> class:<pre>class ExploreDataManager {
 
}</pre></li>
				<li>Type in the following code between the curly braces. This implements a method, <code>loadData()</code>, which will read the contents of the <code>ExploreData.plist</code> file and return an array of dictionaries:<pre>private func loadData() -&gt; [[String: String]] {
   let decoder = PropertyListDecoder()
   if let path = Bundle.main.path(forResource:
   "ExploreData", ofType: "plist"), 
   let exploreData = FileManager.default.contents(
   atPath: path), 
   let exploreItems = try? decoder.decode([[String: 
   String]].self, from: exploreData) {
      return exploreItems
   }
   return [[:]]
}</pre><p>Let's break this method down:</p><pre>private</pre><p>The <code>private</code> keyword means that the method may only be used within this class.</p><pre>func loadData() -&gt; [[String: String]]</pre><p>The <code>loadData()</code> method <a id="_idIndexMarker675"/>declaration<a id="_idIndexMarker676"/> has no arguments and returns an array of dictionaries, and each dictionary contains elements with keys and values of type <code>String</code>.</p><pre>let decoder = PropertyListDecoder()</pre><p>This statement creates an instance of a property list decoder that will be used to decode the data in the <code>ExploreData.plist</code> file. </p><pre>if let path = Bundle.main.path(forResource:
"ExploreData", ofType: "plist"),</pre><p>When you build your app, the result is a folder with all of the app resources inside it, called the application bundle. <code>ExploreData.plist</code> is inside this bundle. This statement attempts to get the path to the <code>ExploreData.plist</code> file and assign it to a constant, <code>path</code>.</p><pre>let exploreData = FileManager.default.contents(
atPath: path),</pre><p>This statement attempts to get the <code>ExploreData.plist</code> file stored at <code>path</code> and assign it to a constant, <code>exploreData</code>.</p><pre>let exploreItems = try? decoder.decode([[String: 
String]].self, from: exploreData) {</pre><p>If you click <code>ExploreData.plist</code> in your project, note that the root level object is<a id="_idIndexMarker677"/> an <a id="_idIndexMarker678"/>array, and each item in the array is a dictionary, as shown:</p></li>
			</ol>
			<div><div><img src="img/Figure_14.04_B17469.jpg" alt="Figure 14.4: Editor area showing arrays and dictionaries in ExploreData.plist&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.4: Editor area showing arrays and dictionaries in ExploreData.plist</p>
			<p>This statement attempts to create an array from the contents of the <code>ExploreData.plist</code> file and assign it to a constant, <code>exploreItems</code>:</p>
			<pre>   return exploreItems
}</pre>
			<p>If the optional binding is successful, this statement returns <code>exploreItems</code> as an array of dictionaries, and each dictionary is of the <code>[String: String]</code> type:</p>
			<pre>   return [[:]]
}</pre>
			<p>If the optional binding is unsuccessful, an empty array of dictionaries is returned.</p>
			<p>At this point, you have a data manager class, <code>ExploreDataManager</code>, containing a method that loads data from the <code>ExploreData.plist</code> file and assigns it to an array, <code>exploreItems</code>. In the next section, you will look at how to use the dictionaries inside this array <a id="_idIndexMarker679"/>to <a id="_idIndexMarker680"/>initialize <code>ExploreItem</code> instances, which will eventually be passed to the <code>ExploreViewController</code> instance managing the <strong class="bold">Explore</strong> screen.</p>
			<h2 id="_idParaDest-202"><a id="_idTextAnchor207"/>Using the data manager to initialize ExploreItem instances</h2>
			<p>At <a id="_idIndexMarker681"/>present, you<a id="_idIndexMarker682"/> have a data manager class, <code>ExploreDataManager</code>. This class contains a method, <code>loadData()</code>, which reads data from <code>ExploreData.plist</code> and returns an array of dictionaries. You'll add a method that creates and initializes <code>ExploreItem</code> instances with the dictionaries in that array. Follow these steps:</p>
			<ol>
				<li value="1">In the <code>ExploreDataManager</code> class definition, add the following code before the <code>loadData()</code> method to implement a <code>fetch()</code> method:<pre>func fetch() {
   for data in loadData() {
      print(data)
   }
}</pre><p>This method will call <code>loadData()</code>, which returns an array of dictionaries. The <code>for</code> loop is then used to print the contents of each dictionary in the array to the Debug area to ensure that the <code>ExploreData.plist</code> file has been read successfully.</p></li>
				<li>Click the <code>ExploreViewController</code> file in the Project navigator. Add the following code to the <code>viewDidLoad()</code> method. This creates an <code>ExploreDataManager</code> instance and calls its <code>fetch()</code> method when the <code>ExploreViewController</code> instance loads its view:<pre>override func viewDidLoad() {
   super.viewDidLoad()
<code>ExploreData.plist</code> file are read and printed in the Debug area, as shown:</p><div><img src="img/Figure_14.05_B17469.jpg" alt="Figure 14.5: Debug area displaying contents of ExploreData.plist&#13;&#10;"/></div><p class="figure-caption">Figure 14.5: Debug area displaying contents of ExploreData.plist</p><p>Now, you'll <a id="_idIndexMarker683"/>assign <a id="_idIndexMarker684"/>the <code>name</code> and <code>image</code> strings from each dictionary in the array to an <code>ExploreItem</code> instance.</p></li>
				<li>Click on the <code>ExploreDataManager</code> file. Add a property declaration to store an array of <code>ExploreItem</code> instances just before the <code>fetch()</code> method:<pre>private var exploreItems: [ExploreItem] = []</pre><p>This adds a property, <code>exploreItems</code>, to the <code>ExploreDataManager</code> class and assigns an empty array to it.</p></li>
				<li>Inside the <code>fetch()</code> method, replace the <code>print()</code> statement with the following statement that initializes <code>ExploreItem</code> instances and appends them to the <code>exploreItems</code> array:<pre>exploreItems.append(ExploreItem(dict: data))</pre><p>The custom initializer in the <code>ExploreItem</code> class assigns the <code>name</code> and <code>image </code>strings in each dictionary read from <code>ExploreData.plist</code> to the <code>name</code> and <code>image</code> properties of an <code>ExploreData</code> instance.</p></li>
				<li>Verify<a id="_idIndexMarker685"/> that<a id="_idIndexMarker686"/> the <code>ExploreDataManager</code> file's contents looks like this: <pre>import Foundation
class ExploreDataManager {
   <strong class="bold">private var exploreItems: [ExploreItem] = []</strong>
   func fetch() {
      for data in loadData() {
         <strong class="bold">exploreItems.append(ExploreItem(dict: </strong>
<strong class="bold">         data))</strong>
      }
   }
   private func loadData() -&gt; [[String: String]] {
      let decoder = PropertyListDecoder()
      if let path = Bundle.main.path(forResource:
      "ExploreData", ofType: "plist"), 
      let exploreData = 
      FileManager.default.contents(atPath: path), 
      let exploreItems = try? 
      decoder.decode([[String: String]].self, 
      from: exploreData) {
         return exploreItems
      }
      return [[:]]
   }
}</pre></li>
			</ol>
			<p>At this point, you have an <code>ExploreDataManager</code> class that reads data from <code>ExploreData.plist</code> and stores it in <code>exploreItems</code>, an array of <code>ExploreItem</code> instances. This array will be the data source for the collection view managed by the  <code>ExploreViewController</code> instance. The cuisine information it contains will eventually be <a id="_idIndexMarker687"/>displayed<a id="_idIndexMarker688"/> in the <strong class="bold">Explore</strong> screen.</p>
			<h1 id="_idParaDest-203"><a id="_idTextAnchor208"/>Displaying data in a collection view</h1>
			<p>You've<a id="_idIndexMarker689"/> implemented a data manager class, <code>ExploreDataManager</code>, that reads cuisine data from the <code>ExploreData.plist</code> file and stores it in an array of <code>ExploreItem</code> instances. Now, you will modify the <code>ExploreViewController</code> class to use that array as the data source for the collection view in the <strong class="bold">Explore</strong> screen.</p>
			<p>At present, the collection view in the <code>ExploreCell</code>, for this purpose. You can then configure the view controller for the collection view, <code>ExploreViewController</code>, to get cuisine details from the <code>ExploreDataManager</code> instance and provide it to the collection view for display. To create <code>ExploreCell</code>, follow these steps:</p>
			<ol>
				<li value="1">Right-click on the <code>Explore</code> folder in the Project navigator and choose <strong class="bold">New Group</strong>.</li>
				<li>Rename the new group <code>View</code>.</li>
				<li>Right-click on the <code>View</code> folder and select <strong class="bold">New File</strong>.</li>
				<li><strong class="bold">iOS</strong> should already be selected. Choose <strong class="bold">Cocoa Touch Class</strong>, then click <strong class="bold">Next</strong>.</li>
				<li>Configure the class as shown here:<p><code>ExploreCell</code></p><p><code>UICollectionViewCell</code> </p><p><code>Unchecked</code> </p><p><code>Swift</code></p><p>Click <strong class="bold">Next</strong>.</p></li>
				<li>Click <strong class="bold">Create</strong>.</li>
				<li>A new<a id="_idIndexMarker690"/> file, <code>ExploreCell</code>, will be added to your project. Inside it you will see the following:<pre>import UIKit
class ExploreCell: UICollectionViewCell {
}</pre><p class="callout-heading">Important Information</p><p class="callout"><code>UIKit</code> provides the infrastructure required for iOS apps. You can read more about it here: <a href="https://developer.apple.com/documentation/uikit">https://developer.apple.com/documentation/uikit</a>.</p></li>
				<li>You'll now assign the <code>ExploreCell</code> class as the identity of the <code>exploreCell</code> collection view cell. Click the <code>Main</code> storyboard file in the Project navigator and click <code>exploreCell</code> inside the <strong class="bold">Explore View Controller Scene</strong> in the document outline. Click the Identity inspector button:<div><img src="img/Figure_14.06_B17469.jpg" alt="Figure 14.6: Identity inspector selected&#13;&#10;"/></div><p class="figure-caption">Figure 14.6: Identity inspector selected</p></li>
				<li>Under<a id="_idIndexMarker691"/> the <code>ExploreCell</code>. This sets an <code>ExploreCell</code> instance as the manager for <code>exploreCell</code>. Press <em class="italic">Return</em> when done:</li>
			</ol>
			<div><div><img src="img/Figure_14.07_B17469.jpg" alt="Figure 14.7: Identity inspector showing Class settings for exploreCell&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.7: Identity inspector showing Class settings for exploreCell</p>
			<p>You've just declared and defined the <code>ExploreCell</code> class, and assigned it as the manager for the <code>exploreCell</code> collection view cell. Now, you'll create outlets in this class that will be connected to the image view and the label in the <code>exploreCell</code> collection view cell, so you can control what they display.</p>
			<h2 id="_idParaDest-204"><a id="_idTextAnchor209"/>Connecting the outlets in exploreCell</h2>
			<p>To manage what<a id="_idIndexMarker692"/> is being displayed by the collection view cells in the <code>exploreCell</code> collection view cell to outlets in the <code>ExploreCell</code> class. You"ll use the assistant editor for this. Follow these steps:</p>
			<ol>
				<li value="1">Click the Navigator and Inspector buttons to hide the Navigator and Inspector areas. This will give you more room to work:<div><img src="img/Figure_14.08_B17469.jpg" alt="Figure 14.8: Toolbar showing Navigator and Inspector buttons&#13;&#10;"/></div><p class="figure-caption">Figure 14.8: Toolbar showing Navigator and Inspector buttons</p></li>
				<li>Click the Adjust Editor Options button to display a menu:<div><img src="img/Figure_14.09_B17469.jpg" alt="Figure 14.9: Adjust Editor Options button&#13;&#10;"/></div><p class="figure-caption">Figure 14.9: Adjust Editor Options button</p></li>
				<li>Choose <strong class="bold">Assistant</strong> from the menu to display the assistant editor:<div><img src="img/Figure_14.10_B17469.jpg" alt="Figure 14.10: Adjust Editor Options menu with Assistant selected&#13;&#10;"/></div><p class="figure-caption">Figure 14.10: Adjust Editor Options menu with Assistant selected</p></li>
				<li>To create the outlets for the <code>ExploreCell</code> class, the assistant editor path should be set to <code>Automatic | ExploreCell.swift</code>. If you don't see <code>ExploreCell.swift</code> in the path, select the <code>exploreCell</code> collection view cell's <code>ExploreCell.swift</code> from the assistant editor's path drop-down menu:<div><img src="img/Figure_14.11_B17469.jpg" alt="Figure 14.11: Assistant editor bar showing ExploreCell.swift&#13;&#10;"/></div><p class="figure-caption">Figure 14.11: Assistant editor bar showing ExploreCell.swift</p></li>
				<li><em class="italic">Ctrl + Drag</em> from<a id="_idIndexMarker693"/> the <strong class="bold">Label</strong> element in the collection view cell to the space between the curly braces as shown. This creates an outlet for it:<div><img src="img/Figure_14.12_B17469.jpg" alt="Figure 14.12: Editor area showing ExploreCell.swift&#13;&#10;"/></div><p class="figure-caption">Figure 14.12: Editor area showing ExploreCell.swift</p></li>
				<li>In the pop-up dialog, enter <code>exploreNameLabel</code> in the <strong class="bold">Name</strong> field to set the outlet's name:<div><img src="img/Figure_14.13_B17469.jpg" alt="Figure 14.13: Pop-up dialog box for exploreNameLabel outlet creation&#13;&#10;"/></div><p class="figure-caption">Figure 14.13: Pop-up dialog box for exploreNameLabel outlet creation</p></li>
				<li><em class="italic">Ctrl + Drag</em> from <a id="_idIndexMarker694"/>the <code>exploreNameLabel</code> property. This creates an outlet for it:<div><img src="img/Figure_14.14_B17469.jpg" alt="Figure 14.14: Editor area showing ExploreCell.swift&#13;&#10;"/></div><p class="figure-caption">Figure 14.14: Editor area showing ExploreCell.swift</p></li>
				<li>In the pop-up dialog, enter <code>exploreImageView</code> in the <strong class="bold">Name</strong> field to set the outlet's name:<div><img src="img/Figure_14.15_B17469.jpg" alt="Figure 14.15: Pop-up dialog box for exploreImageView outlet creation&#13;&#10;"/></div><p class="figure-caption">Figure 14.15: Pop-up dialog box for exploreImageView outlet creation</p></li>
				<li>The <code>exploreNameLabel</code> and <code>exploreImageView</code> outlets have been added <a id="_idIndexMarker695"/>to the <code>ExploreCell</code> class and connected to the <code>exploreCell</code> collection view cell's image view and label elements, as shown:<div><img src="img/Figure_14.16_B17469.jpg" alt="Figure 14.16: Editor area showing exploreNameLabel and exploreImageView outlets&#13;&#10;"/></div><p class="figure-caption">Figure 14.16: Editor area showing exploreNameLabel and exploreImageView outlets</p></li>
				<li>Click the <strong class="bold">x</strong> button to close the assistant editor:</li>
			</ol>
			<div><div><img src="img/Figure_14.17_B17469.jpg" alt="Figure 14.17: Assistant editor close button&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.17: Assistant editor close button</p>
			<p>The <code>exploreCell</code> collection view cell in the <code>Main</code> storyboard file has now been set up with a class, <code>ExploreCell</code>. The outlets for the collection view cell's image view and label have also been created and assigned. Now, you can set the <code>exploreNameLabel</code> and <code>exploreImageView</code> outlets in the <code>ExploreCell</code> instance to display a cuisine image and name in each cell when the app is run.</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">You can check whether the outlets are connected properly in the Connections inspector.</p>
			<p>In the next <a id="_idIndexMarker696"/>section, you will add code to <code>ExploreDataManager</code> to provide the number of cells to be displayed by <code>collectionView</code>, and provide an <code>ExploreItem</code> instance whose properties will be used to determine what image and label the cell will display.</p>
			<h2 id="_idParaDest-205"><a id="_idTextAnchor210"/>Implementing additional data manager methods</h2>
			<p>As you<a id="_idIndexMarker697"/> learned in <a href="B17469_13_Final_VK_ePub.xhtml#_idTextAnchor194"><em class="italic">Chapter 13</em></a><em class="italic">, Getting Started with MVC and Collection Views</em>, a collection view needs to know how many cells to display and what to put in each cell. You will add two methods to the <code>ExploreDataManager</code> class that will provide the number of <code>ExploreItem</code> instances in the <code>exploreItems</code> array and return an <code>ExploreItem</code> instance at a specified array index. Click the <code>ExploreDataManager</code> file in the Project navigator and add these two methods after the <code>loadData()</code> method:</p>
			<pre>func numberOfExploreItems() -&gt; Int {
   exploreItems.count
}
func exploreItem(at index: Int) -&gt; ExploreItem {
   exploreItems[index]
}</pre>
			<p>The first method, <code>numberOfExploreItems()</code>, will determine the number of cells to be displayed by the collection view.</p>
			<p>The second method, <code>exploreItem(at:)</code>, will return an <code>ExploreItem</code> instance that corresponds to a cell's position in the collection view.</p>
			<p>In the next section, you'll update the collection view data source methods in the <code>ExploreViewController</code> class to provide the number of cells to be displayed in the collection <a id="_idIndexMarker698"/>view, and to provide the cuisine name and image for each cell.</p>
			<h2 id="_idParaDest-206"><a id="_idTextAnchor211"/>Updating the data source methods in ExploreViewController</h2>
			<p>The data <a id="_idIndexMarker699"/>source methods<a id="_idIndexMarker700"/> in the <code>ExploreViewController</code> class are currently set to display 20 cells, each cell containing an empty image view and label. You'll update them to get the number of cells to display, and the data to put in each cell, from the <code>ExploreDataManager</code> instance. Follow these steps:</p>
			<ol>
				<li value="1">Click the <code>ExploreViewController</code> file and find the <code>viewDidLoad()</code> method. It should look like this:<pre>override func viewDidLoad() {
   super.viewDidLoad()
   let manager = ExploreDataManager()
   manager.fetch()
}</pre><p>This means the <code>ExploreDataManager</code> instance is only accessible within the <code>viewDidLoad()</code> method. You need to make it available to the entire class.</p></li>
				<li>Move the <code>let manager = ExploreDataManager()</code> line to just after the <code>collectionView</code> property declaration to make the <code>ExploreDataManager</code> instance available to all methods within the <code>ExploreViewController</code> class, as shown:<pre>@IBOutlet var collectionView: UICollectionView!
<strong class="bold">let manager = ExploreDataManager()</strong></pre></li>
				<li>Update <code>collectionView(_:numberOfItemsInSection:)</code> as shown. This will make<a id="_idIndexMarker701"/> the<a id="_idIndexMarker702"/> collection view display a cell for each element in the <code>items</code> array:<pre>func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int {
   <strong class="bold">manager.numberOfExploreItems()</strong>
}</pre></li>
				<li>Update <code>collectionView(_:cellForItemAt:)</code> as shown to set the image view and label for each cell using data from the corresponding element in the <code>items</code> array:<pre>func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell {
   let cell = collectionView.dequeueReusableCell(
   withReuseIdentifier: "exploreCell", for: 
   indexPath) <code>ExploreCell</code>.</p><pre>let exploreItem = manager.exploreItem(at: 
indexPath.row)</pre><p>Gets <a id="_idIndexMarker703"/>the <code>ExploreItem</code> instance <a id="_idIndexMarker704"/>that corresponds to the current cell in the collection view. In other words, the first cell in the collection view corresponds to the first <code>ExploreItem</code> instance in the <code>exploreItems</code> array, the second cell corresponds to the second <code>ExploreItem</code> instance, and so on.</p><pre>cell.exploreNameLabel.text = exploreItem.name</pre><p>Sets the <code>text</code> property of the cell's <code>nameLabel</code> to the name of the <code>ExploreItem </code>instance.</p><pre>cell.exploreImageView.image = UIImage(named: 
exploreItem.image!)</pre><p>Gets the <code>image</code> string from the <code>ExploreItem</code> instance, gets the corresponding image from the <code>Assets.xcassets</code> file, and assigns it to the <code>image</code> of the cell's <code>imgExplore</code> property.</p></li>
			</ol>
			<p>Build and run the app. You'll see the collection view in the <strong class="bold">Explore</strong> screen display images and text of different cuisines. Tapping a collection view cell will display the <strong class="bold">Restaurant List </strong>screen:</p>
			<div><div><img src="img/Figure_14.18_B17469.jpg" alt="Figure 14.18: iOS Simulator showing Explore and Restaurant List screens&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.18: iOS Simulator showing Explore and Restaurant List screens</p>
			<p>At this <a id="_idIndexMarker705"/>point, the <code>ExploreData.plist</code> file. In <a href="B17469_17_Final_VK_ePub.xhtml#_idTextAnchor248"><em class="italic">Chapter 17</em></a>, <em class="italic">Getting Started with JSON Files</em>, you will modify the <code>RestaurantListViewController</code> class to make the <strong class="bold">Restaurant List</strong> screen display a list of restaurants offering the selected cuisine. But before you can do that, you'll need to set a location in the <strong class="bold">Locations</strong> screen, which will provide a list of all available restaurants at that location. This will be covered in the next chapter.</p>
			<h1 id="_idParaDest-207"><a id="_idTextAnchor212"/>Summary</h1>
			<p>In this chapter, you added a property list file, <code>ExploreData.plist</code>, to your project. You implemented the <code>ExploreItem</code> structure, the model objects for the <code>ExploreDataManager</code>, to read data from <code>ExploreData.plist</code>, put the data into an array of <code>ExploreItem</code> instances, and provide it to <code>ExploreViewController</code>. You created a class for the <code>exploreCell</code> collection view cell. Finally, you configured the data source methods in the <code>ExploreViewController</code> class to use data from the array of <code>ExploreItem </code>instances to populate the collection view, and the <strong class="bold">Explore</strong> screen now displays a list of cuisines. Great job!</p>
			<p>You now know how to provide data to an app using <code>.plist</code> files, create model objects, create data manager classes that load <code>.plist</code> files into model objects, configure collection views to display data that has been loaded, and configure view controllers for collection views. This will be useful should you wish to create your own apps that use collection views.</p>
			<p>In the next chapter, you will look at table views, which are similar in some ways to collection views, and configure the <strong class="bold">Locations</strong> screen to display a list of locations in a table view when you tap the <strong class="bold">LOCATION</strong> button in the <strong class="bold">Explore</strong> screen.</p>
		</div>
	</body></html>