<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Collections Framework</h1>
                </header>
            
            <article>
                
<p class="mce-root">The following recipes will be covered in this chapter:</p>
<ul>
<li style="font-weight: 400">How to merge two collections</li>
</ul>
<ul>
<li style="font-weight: 400">Splitting original collection into pair of collections</li>
</ul>
<ul>
<li style="font-weight: 400">Sorting a list by specified comparator</li>
</ul>
<ul>
<li style="font-weight: 400">Sorting in descending order</li>
</ul>
<ul>
<li style="font-weight: 400">Parsing a JSON response using Gson</li>
</ul>
<ul>
<li style="font-weight: 400">How to filter and map using lambda expressions</li>
</ul>
<ul>
<li style="font-weight: 400">How to sort a list of objects and keep null objects at the end</li>
</ul>
<ul>
<li style="font-weight: 400">How to implement a lazy list in Kotlin</li>
</ul>
<ul>
<li style="font-weight: 400">How to pad a string in Kotlin</li>
</ul>
<ul>
<li style="font-weight: 400">How to flatten an array or map</li>
</ul>
<ul>
<li style="font-weight: 400">How to sort collection by multiple fields in Kotlin</li>
</ul>
<ul>
<li style="font-weight: 400">How to use limit in Kotlin list</li>
</ul>
<ul>
<li style="font-weight: 400">How to create a 2D array in Kotlin</li>
</ul>
<ul>
<li style="font-weight: 400">How to skip the first N entries in Kotlin</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article>
                
<p>Collections framework is useful when we want to process items in a collection. If you have worked with Java, you are probably familiar with collections framework. The most common use of collections framework are maps, sets, lists, and so on. Kotlin too has its collection framework, but it's much better than Java's collection framework because, in Kotlin, we can leverage the functional programming approach to make our code more concise and easy to work with. So, let's dive into the recipes related to Kotlin's collection framework.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to merge two collections</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will see how to merge two or more collections into one. However, before we move ahead, we need to understand the difference between mutable and immutable types. An <span>immutable</span> type object is an object that cannot be changed. For example, if we define an <span>immutable</span> list, we won't be able to add other objects to it. With that in mind, let's start the recipe!</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for coding. You can use whichever IDE you like as long as it is able to compile and run Kotlin code.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>You can create a list in Kotlin with the <kbd>listOf</kbd> method. However, the list returned by this method is an <span>immutable</span> list, so we need to create a mutable list in order to add objects to it. Let's check out the mentioned steps:</p>
<ol>
<li>Let's create two lists, <kbd>listA</kbd> and <kbd>listB</kbd>, as follows:</li>
</ol>
<pre style="padding-left: 60px"><span>var </span>listA= <span>mutableListOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"a"</span>,<span>"b"</span>)<br/><span>var </span>listB= <span>mutableListOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"c"</span>)</pre>
<div class="packt_tip">If the type declaration is inferred from the objects inside the <kbd>listOf/mutableListOf</kbd> method, we won't need to declare the type declaration explicitly. So, the preceding code will be rewritten as <kbd>mutableListOf("a","a","b")</kbd>.</div>
<ol start="2">
<li>Now, we will try to add the contents of <kbd>listA</kbd> in <kbd>listB</kbd>. For that purpose, we will require the <kbd>addAll()</kbd> method:</li>
</ol>
<div>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>listA= <span>mutableListOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"a"</span>,<span>"b"</span>)<br/>    <span>val </span>listB= <span>mutableListOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"c"</span>)<br/>    listB.addAll(listA)<br/>    <span>println</span>(listB)<br/>}</pre></div>
<p style="padding-left: 60px">Here's the output:</p>
<pre style="padding-left: 60px"><strong>[a, c, a, a, b]</strong></pre>
<ol start="3">
<li>Another way to merge two lists is using <kbd>union</kbd>. This returns the unique elements of the combined collection:</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>listA= <span>mutableListOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"a"</span>,<span>"b"</span>)<br/>    <span>val </span>listB= <span>mutableListOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"c"</span>)<br/>    <span>val </span>listC=listB.<span>union</span>(listA)<br/>    <span>println</span>(listC)<br/>}</pre>
<p style="padding-left: 60px">This is the output:</p>
<pre style="padding-left: 60px"><strong>[a, c, b]</strong></pre>
<ol start="4">
<li>Similarly, mutable sets can be merged too, the only difference is that <kbd>addAll</kbd> in a set will be similar to what we will receive with the <kbd>union</kbd> method; since it's a set, only a unique value is allowed:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>setA= <span>mutableSetOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"b"</span>,<span>"c"</span>)<br/><span>val </span>setB= <span>mutableSetOf</span><span>&lt;String&gt;</span>(<span>"a"</span>,<span>"b"</span>,<span>"c"</span>,<span>"d"</span>)<br/>setB.addAll(setA)<br/><span>println</span>(setB)<br/><span>println</span>(setB.<span>union</span>(setA))</pre>
<p style="padding-left: 60px">This is the output:</p>
<pre style="padding-left: 60px"><strong>[a, b, c, d]</strong><br/><strong>[a, b, c, d]</strong></pre>
<p>If you want to merge two maps, you will need the <kbd>putAll()</kbd> method, as <kbd>addAll</kbd> and <kbd>union</kbd> are not present for the <kbd>map</kbd>:</p>
<pre><span>val </span>mapA= <span>mutableMapOf</span><span>&lt;String,Int&gt;</span>(<span>"a" </span><span>to </span><span>1</span>, <span>"b" </span><span>to </span><span>2</span>)<br/><span>val </span>mapB= <span>mutableMapOf</span><span>&lt;String,Int&gt;</span>(<span>"a" </span><span>to </span><span>2</span>, <span>"d" </span><span>to </span><span>4</span>)<br/>mapA.putAll(mapB)<br/>println(mapA)</pre>
<p>Here's the output:</p>
<pre><strong>{a=2, b=2, d=4}</strong></pre>
<p>Notice that key <kbd>a</kbd> was defined in both the maps, but the one that comes later (in this case, <kbd>mapB</kbd>) wins.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Splitting original collection into pair of collections</h1>
                </header>
            
            <article>
                
<p>There are times when you wish that you could just split a list into sublists without going into the <kbd>for</kbd> and <kbd>while</kbd> loops. Kotlin provides you with a function just for this occasion. In this recipe, we will see how to split a list based on some criteria.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>Kotlin provides a <kbd>partition</kbd> function. According to the documentation of the partition function it does the following:</p>
<div class="packt_quote">Splits the original array into a pair of lists, where the first list contains elements for which predicate yielded true, while the second list contains elements for which predicate yielded false.</div>
<p>Let's understand it more clearly by going through this example:</p>
<ol>
<li>In this example, we will create a list of numbers, and we want to split this list into two sublists: one having odd numbers and the other having even numbers:</li>
</ol>
<div>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>listA= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>)<br/>    val pair=listA.partition {<br/>        it%2==0<br/>    }<br/>    println(pair)<br/>}</pre></div>
<p style="padding-left: 60px">This is the output:</p>
<pre style="padding-left: 60px"><strong>([2, 4, 6], [1, 3, 5])</strong></pre>
<ol start="2">
<li>As you can see in the preceding example, we need to put the condition in the predicate inside the <kbd>partition</kbd> block. The returned object is a <kbd>Pair</kbd> object, holding the two sublists.</li>
<li>The <kbd>partition</kbd> function also works with the <kbd>set</kbd> collection in a similar way:</li>
</ol>
<div>
<pre style="padding-left: 60px"><span>val </span>setA= <span>setOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>)<br/><span>val </span>pair=setA.<span>partition </span><span>{<br/></span><span>    it</span>%<span>2</span>==<span>0<br/></span><span>}<br/></span><span>println</span>(pair)<br/><br/></pre></div>
<p style="padding-left: 60px">Here's the output:</p>
<pre style="padding-left: 60px"><strong>([2, 4, 6], [1, 3, 5])</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>Let's take a look at the implementation of the <kbd>partition</kbd> function in Kotlin:</p>
<pre><span>public inline fun </span>&lt;T&gt; Iterable&lt;T&gt;.partition(predicate: (T) -&gt; Boolean): Pair&lt;List&lt;T&gt;, List&lt;T&gt;&gt; {<br/>    <span>val </span>first = ArrayList&lt;T&gt;()<br/>    <span>val </span>second = ArrayList&lt;T&gt;()<br/>    <span>for </span>(element <span>in this</span>) {<br/>        <span>if </span>(predicate(element)) {<br/>            first.add(element)<br/>        } <span>else </span>{<br/>            second.add(element)<br/>        }<br/>    }<br/>    <span>return </span>Pair(first, second)<br/>}</pre>
<p>As you can see, the <kbd>partition</kbd> function is just an abstraction, that saves you from writing long for loops, but internally it does it the same old way.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more…</h1>
                </header>
            
            <article>
                
<p>The <kbd>partition</kbd> function works in a similar way with arrays as well. Here are its different usages. Each of them works similarly, just producing lists of different types:</p>
<pre class="signature language-kotlin"><span class="token keyword">// Produces two lists<br/>inline</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Array<span class="token operator">&lt;</span><span class="token keyword">out</span> T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Byte and produces two lists of Byte<br/>inline</span> <span class="token keyword">fun</span> ByteArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Byte<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Byte<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Byte<span class="token operator">&gt;</span><span class="token operator">&gt;<br/><br/></span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Short and produces two lists of Short<br/>inline</span> <span class="token keyword">fun</span> ShortArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Short<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Short<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Short<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Int and produces two lists of Int<br/>inline</span> <span class="token keyword">fun</span> IntArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Long and produces two lists of Long<br/>inline</span> <span class="token keyword">fun</span> LongArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Long<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Long<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Long<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Float and produces two lists of Float<br/>inline</span> <span class="token keyword">fun</span> FloatArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Float<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Float<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Float<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Double and produces two lists of Double<br/>inline</span> <span class="token keyword">fun</span> DoubleArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Double<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Double<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Double<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Boolean and produces two lists of Boolean<br/>inline</span> <span class="token keyword">fun</span> BooleanArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Boolean<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Boolean<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>
<pre class="signature language-kotlin"><span class="token keyword">// Breaks original list of Char and produces two lists of Char<br/>inline</span> <span class="token keyword">fun</span> CharArray<span class="token punctuation">.</span><span class="token function">partition</span><span class="token punctuation">(</span>
    predicate<span class="token operator">:</span> <span class="token punctuation">(</span>Char<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span><span class="token operator">:</span> Pair<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Char<span class="token operator">&gt;</span><span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Char<span class="token operator">&gt;</span><span class="token operator">&gt;</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Sorting a list by specified comparator</h1>
                </header>
            
            <article>
                
<p>Sorting a list is one of the most common operations done on the list. When we try to sort a list of custom objects, we need to specify the comparator. Let's see how we can sort a list by the specified comparator.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>In the following examples, we will try to sort objects based on certain properties. This will give us an idea of how to sort based on the specified comparator:</p>
<ol>
<li>Let's create a <kbd>Person</kbd> class with age property. We will be sorting a list of person objects based on age:</li>
</ol>
<pre style="padding-left: 60px">fun main(args: Array&lt;String&gt;) {<br/>    val p1=Person(91)<br/>    val p2=Person(10)<br/>    val p3=Person(78)<br/>    val listOfPerson= listOf(p1,p2,p3)<br/>    var sortedListOfPerson=listOfPerson.sortedBy {<br/>        it.age<br/>    }<br/>}<br/>class Person(var age:Int)</pre>
<ol start="2">
<li>To sort a list based on the specified comparator, we need to use the <kbd>sortedBy</kbd> function:</li>
</ol>
<pre style="padding-left: 60px">fun main(args: Array&lt;String&gt;) {<br/>    val p1=Person(91)<br/>    val p2=Person(10)<br/>    val p3=Person(78)<br/>    val listOfPerson= listOf(p1,p2,p3)<br/>    var sortedListOfPerson=listOfPerson.sortedBy {<br/>        it.age<br/>    }<br/>}<br/>class Person(var age:Int)<span><br/></span></pre>
<ol start="3">
<li>Kotlin also provides a <kbd>sortedWith</kbd> method, where you can specify your own implementation of comparator:</li>
</ol>
<pre style="padding-left: 60px">fun main(args: Array&lt;String&gt;)<br/>{<br/>  val p1=Person(91)<br/>  val p2=Person(10)<br/>  val p3=Person(78)<br/>  val listOfPerson= listOf(p1,p2,p3)<br/>  var sortedListOfPerson=listOfPerson<br/>  <strong>.sortedWith&lt;Person&gt;(object:Comparator&lt;Person&gt;</strong>{<br/>      override fun compare(p0: Person, p1: Person):Int {<br/>        if(p0.age&gt;p1.age){<br/>              return 1<br/>          }<br/>          if(p0.age==p1.age){<br/>              return 0<br/>          }<br/>          return -1<br/>      }<br/>  })<br/>}<br/>class Person(var age:Int)</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>The <kbd>sortedBy</kbd> function is syntactic sugar provided by Kotlin. Internally, it's calling the <kbd>sortedWith</kbd> method that takes in a comparator.</p>
<p>Now, let's see the implementation of the <kbd>sortBy</kbd> function:</p>
<pre><span>public inline fun </span>&lt;<span>T</span>, <span>R </span>: Comparable&lt;<span>R</span>&gt;&gt; Iterable&lt;<span>T</span>&gt;.sortedBy(<span>crossinline </span>selector: (<span>T</span>) -&gt; <span>R</span>?): List&lt;<span>T</span>&gt; {<br/>    <span>return </span><span>sortedWith</span>(<span>compareBy</span>(selector))<br/>}</pre>
<p>The <kbd>sortBy</kbd> function calls the <kbd>sortedWith</kbd> method inside it, which is as following<em>:<br/></em></p>
<pre><span>public fun </span>&lt;<span>T</span>&gt; Iterable&lt;<span>T</span>&gt;.sortedWith(comparator: Comparator&lt;<span>in </span><span>T</span>&gt;): List&lt;<span>T</span>&gt; {<br/>    <span>if </span>(<span>this is </span>Collection) {<br/>       <span>if </span>(<span>size</span> &lt;= <span>1</span>) <span>return this</span>.<span>toList</span>()<br/>       <span>@Suppress</span>(<span>"UNCHECKED_CAST"</span>)<br/>       <span>return </span>(<span>toTypedArray</span>&lt;Any?&gt;() <span>as </span>Array&lt;<span>T</span>&gt;).<span>apply </span><span>{ </span><span>sortWith</span>(comparator) <span>}</span>.<span>asList</span>()<br/>    }<br/>    <span>return </span><span>toMutableList</span>().<span>apply </span><span>{ </span><span>sortWith</span>(comparator) <span>}<br/></span>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Sorting in descending order</h1>
                </header>
            
            <article>
                
<p>In the last recipe, we saw how to sort a list with a specified comparator. We provide the comparator, and it sorts it accordingly. Interestingly, Kotlin also provides a method to sort items of a list in descending order. In this recipe, we will see how to sort a collection of primitive objects as well as custom objects in descending order. So let's get started!</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>We will now see how to sort in descending order using some examples:</p>
<ol>
<li>First, we will try to sort a simple list of integers:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>listOfInt= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>)<br/><span>var </span>sortedList=listOfInt.<span>sortedDescending</span>()<br/>sortedList.forEach {<br/>    print("${it} ")<br/>}</pre>
<p style="padding-left: 60px">This is the output:</p>
<pre style="padding-left: 60px"><strong>5 4 3 2 1</strong></pre>
<ol start="2">
<li>Now, let's use our list of <kbd>Person</kbd> from the preceding recipe. To sort it in descending order, this is what we will do:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>p1=Person(<span>91</span>)<br/><span>val </span>p2=Person(<span>10</span>)<br/><span>val </span>p3=Person(<span>78</span>)<br/><span>val </span>listOfPerson= <span>listOf</span><span>&lt;Person&gt;</span>(p1,p2,p3)<br/><span>val </span>sortedListOfPerson=listOfPerson.<span>sortedByDescending </span><span>{<br/></span><span>    it</span>.<span>age<br/></span><span>}<br/></span>sortedListOfPerson.<span>forEach </span><span>{<br/></span><span>    </span><span>print</span>(<span>"</span><span>${</span><span>it</span>.<span>age</span><span>} </span><span>"</span>)<br/><span>}</span></pre>
<p style="padding-left: 60px">Here's the output:</p>
<pre style="padding-left: 60px"><strong>91 78 10</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>The <kbd>sortedByDescending</kbd> works a bit like <kbd>sortedBy</kbd>. Internally, both use the <kbd>sortedWith</kbd> function:</p>
<pre><span>public inline fun </span>&lt;<span>T</span>, <span>R </span>: Comparable&lt;<span>R</span>&gt;&gt; Iterable&lt;<span>T</span>&gt;.sortedByDescending(<span>crossinline </span>selector: (<span>T</span>) -&gt; <span>R</span>?): List&lt;<span>T</span>&gt; {<br/>    <span>return </span><span>sortedWith</span>(<span>compareByDescending</span>(selector))<br/>}</pre>
<p><span>The following is the implementation of <kbd>compareByDescending</kbd></span>:</p>
<pre><span>@kotlin.internal.InlineOnly<br/></span><span>public inline fun </span>&lt;<span>T</span>&gt; compareByDescending(<span>crossinline </span>selector: (<span>T</span>) -&gt; Comparable&lt;*&gt;?): Comparator&lt;<span>T</span>&gt; =<br/>        <span>Comparator </span><span>{ </span>a, b <span>-&gt; </span><span>compareValuesBy</span>(b, a, selector) <span>}</span></pre>
<p>Note that just the order of variables is reversed to produce the descending order.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Parsing a JSON response using Gson</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will learn how to parse JSON. JSON is the most widely used data type for API responses. We will be using Gson, an open source library by Google. It's fast, and it scales very well even with a huge response.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using Android Studio for this purpose, and JSONObject is provided by Android SDK. We will be using Gson for JSON parsing. You can add it to your project by adding the following lines to your <kbd>build.gradle</kbd> file:</p>
<pre>compile <span>'com.google.code.gson:gson:2.8.0'</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>Now, let's follow these steps to parse JSON data using Gson. For example, we will use a raw string here to keep things simple:</p>
<ol>
<li>First, we will create dummy JSON data using a raw string, as follows:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>jsonStr=<span>"""<br/></span><span>    {<br/></span><span>     "name": "Aanand Shekhar",<br/></span><span>     "age": 21,<br/></span><span>     "isAwesome": true<br/></span><span>    }<br/></span><span>"""</span>.<span>trimIndent</span>()</pre>
<ol start="2">
<li>Next, we will create a data class to hold this data. Here's how our data class looks:</li>
</ol>
<pre style="padding-left: 60px"><span>data class </span>Information(<span>val </span><span>name</span>:<span>String</span>,<span>val </span><span>age</span>:Int, <span>val </span><span>isAwesome</span>:Boolean)</pre>
<ol start="3">
<li>Finally, we will use <kbd>Gson</kbd> to parse the JSON string:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>information:Information= <span>Gson</span>().fromJson&lt;Information&gt;(jsonStr,Information::<span>class</span>.<span>java</span>)</pre>
<p>Now you can use it just like a Kotlin object.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more…</h1>
                </header>
            
            <article>
                
<p>You can create the data class automatically using some Android Studio plugins. One of the most widely used<span> </span>plugins<span> </span>is <strong>RoboPOJOGenerator</strong> ( <a href="https://github.com/robohorse/RoboPOJOGenerator">https://github.com/robohorse/RoboPOJOGenerator</a> ).</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to filter and map using lambda expressions</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will learn how to transform a list using a <kbd>map</kbd> function in Kotlin, and how to filter the list with whichever criteria we like. We will be using lambda functions, which provide a great way to do functional programming. So let's get started.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>First, let's see how to use the <strong>filter</strong> function on a list. The filter function returns a list containing all elements matching the given predicate. We will create a list of numbers and filter the list based on even or odd.</p>
<p>The <kbd>filter</kbd> method is good for an immutable collection as it doesn't modify the original collection but returns a new one. In the filter method, we need to implement the predicate. The predicate, like the condition, is based on the list that is filtered.</p>
<p>For example, we know that even items will follow <kbd>it%2==0</kbd>. So the corresponding filter method will look like this:</p>
<pre><span>val </span>listOfNumbers=<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>)<br/><span>var </span>evenList=listOfNumbers.<span>filter </span><span>{<br/></span><span>    it</span>%<span>2</span>==<span>0<br/></span><span>}<br/></span><span>println</span>(evenList)<br/><br/>//Output: <strong>[2, 4, 6, 8]</strong></pre>
<p>Another variant of the filter function is <kbd>filterNot</kbd>, which, as the name suggests, returns a list containing all elements not matching the given predicate.</p>
<p>Another cool lambda function is <kbd>map</kbd>. It transforms the list and returns a new one:</p>
<pre><span>val </span>listOfNumbers=<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>)<br/><span>var </span>transformedList=listOfNumbers.<span>map </span><span>{<br/></span><span>    it</span>*<span>2<br/></span><span>}<br/></span><span>println</span>(transformedList)<br/><br/>//Output: <strong>[2, 4, 6, 8, 10, 12, 14, 16, 18]</strong></pre>
<p>A variant of the <kbd>map</kbd> function is <kbd>mapIndexed</kbd>. It provides the index along with the item in its construct:</p>
<pre><span>val </span>listOfNumbers=<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>)<br/><span>val </span>map=listOfNumbers.<span>mapIndexed </span><span>{ </span>index, it<br/>    <span>-&gt; </span>it*index<span>}<br/></span><span>println</span>(map)<br/><br/>//Output: <strong>[0, 2, 6, 12, 20]</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to sort a list of objects and keep null objects at the end</h1>
                </header>
            
            <article>
                
<p>We have already seen how to sort a list based on a specified parameter using a comparator. However, so far, we have worked with lists having non-null values. In this recipe, we will see how to sort a list of objects, which have the null property (on which we are sorting). So let's get started.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>Now, let's follow these steps to sort a list, while keeping null objects at the end:</p>
<ol>
<li>Let's create a <kbd>Person</kbd> class having an age property that can be null:</li>
</ol>
<pre style="padding-left: 60px"><span>class </span>Person(<span>var </span><span>age</span>:Int?)</pre>
<ol start="2">
<li>Now, let's create a list of <kbd>Person</kbd> objects:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>listOfPersons=<span>listOf</span>(Person(<span>10</span>), Person(<span>20</span>), Person(<span>2</span>), Person(<span>null</span>))</pre>
<ol start="3">
<li>Finally, we want to sort them in ascending order, while keeping the null items at the end:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>sortedList=listOfPersons.<span>sortedWith</span>(<span>compareBy</span>(<span>nullsLast</span>&lt;Int&gt;(),<span>{it</span>.<span>age</span><span>}</span>))<br/>sortedList.<span>forEach </span><span>{<br/></span><span>    </span><span>print</span>(<span>" </span><span>${</span><span>it</span>.<span>age</span><span>} </span><span>"</span>)<br/><span>}<br/><br/></span></pre>
<p style="padding-left: 60px">The output is as follows:</p>
<pre style="padding-left: 60px"><strong>2 10 20 null</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>We have used the <kbd>sortedWith</kbd> method. According to documentation, <kbd>sortedWith</kbd> does this:</p>
<div class="mce-root packt_quote">Returns a sequence that yields elements of this sequence sorted according to the specified comparator.</div>
<p>Apart from that, we've made use of the <kbd>kotlin.comparisons</kbd> package, which provides us two main functions used in the preceding solution:</p>
<ul>
<li><kbd>public inline fun &lt;T: Comparable&lt;T&gt;&gt; nullsLast()</kbd>: This method provides a comparator of nullable comparable values considering null value greater than any other value. That's how we can get the null items at the end, because they are considered bigger than any other values.</li>
<li><kbd>compareBy(comparator: Comparator&lt;in K&gt;, crossinline selector: (T) -&gt; K)</kbd>: This function accepts a comparator (such as <kbd>nullsLast()</kbd>) and a function that provides values for the comparator, and then combines them into a new comparator.</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to implement a lazy list in Kotlin</h1>
                </header>
            
            <article>
                
<p>If the value of an element or expression is not evaluated when it's defined, but rather when it is first accessed, it is said to be <strong>lazily evaluated</strong>. There are many situations where it comes in handy. For example, you might have a list A and you want to create a filtered list from it, let's call it list B. If you do something like the following, the filter operation will be performed during the declaration of B:</p>
<pre><span>val </span>A= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>)<br/><span>var </span>B=A.<span>filter </span><span>{</span><br/>    <span>it</span>%<span>2</span>==<span>0<br/></span><span>}</span></pre>
<p>This forces the program to initialize B as soon as it is defined. While this may not be a big deal for a small list, it can cause latency with bigger objects. Also, we can delay the object creation until we first need it. In this recipe, we will learn how we can implement a lazy list.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>To create a lazy list, we need to convert the list into a sequence.<span> A s</span>equence<span> </span>represents lazily evaluated collections. Let's understand<span> </span>it with<span> </span>an example:</p>
<ol>
<li><span>In the given example, let's first filter a list based on elements being odd or even:</span></li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>A= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>)<br/>    <span>var </span>B=A.<span>filter </span><span>{<br/></span><span>        </span><span>println</span>(<span>"checking </span><span>${</span><span>it</span><span>}</span><span>"</span>)<br/>        <span>it</span>%<span>2</span>==<span>0<br/></span><span>    </span><span>}<br/></span>}</pre>
<p>This is the output:</p>
<pre style="padding-left: 60px"><strong>checking 1</strong><br/><strong>checking 2</strong><br/><strong>checking 3</strong><br/><strong>checking 4</strong></pre>
<p style="padding-left: 60px">In the preceding example, the filter function was evaluated only when the object was defined.</p>
<ol start="2">
<li>Now, let's convert the list into a sequence. Converting the list to a sequence is just one step away; you can convert any list to a sequence using<span> the </span><kbd>.asSequence()</kbd><span> </span>method, or by<span> </span><kbd>Sequence{ createIterator() }</kbd>:</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>A= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>).<span>asSequence</span>()<br/>    <span>var </span>B=A.<span>filter </span><span>{<br/></span><span>        </span><span>println</span>(<span>"checking </span><span>${</span><span>it</span><span>}</span><span>"</span>)<br/>        <span>it</span>%<span>2</span>==<span>0<br/></span><span>    </span><span>}<br/></span>}</pre>
<ol start="3">
<li>If you run the preceding code, you won't see any output in the console, because the object hasn't been created yet. It will be created when list B is first accessed:</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>A= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>).<span>asSequence</span>()<br/>    <span>var </span>B=A.<span>filter </span><span>{<br/></span><span>        </span><span>println</span>(<span>"checking </span><span>${</span><span>it</span><span>}</span><span>"</span>)<br/>        <span>it</span>%<span>2</span>==<span>0<br/></span><span>    </span><span>}<br/></span><span>    </span>B.<span>forEach </span><span>{<br/></span><span>        </span><span>println</span>(<span>"printing </span><span>${</span><span>it</span><span>}</span><span>"</span>)<br/>    <span>}<br/></span>}<br/><br/>//Output:<strong>checking 1</strong><br/><strong>         checking 2</strong><br/><strong>         printing 2</strong><br/><strong>         checking 3</strong><br/><strong>         checking 4</strong><br/><strong>         printing 4</strong></pre>
<p>The <kbd>filter</kbd> function was evaluated when the items were accessed. This is called <strong>lazy evaluation</strong>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>Sequences<span> </span>in Kotlin are potentially unbounded and are used when the length of the<span> </span>list<span> </span>is not known in advance (much like Streams in Java 8). Since it can be infinite, lazy evaluation is needed for this type of structure. Consider this example:</p>
<pre><span>val </span>seq= <span>generateSequence</span>(<span>1</span>)<span>{it</span>*<span>2</span><span>}<br/></span>seq.<span>take</span>(<span>10</span>).<span>forEach </span><span>{<br/></span><span>    </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/><span>}</span></pre>
<p>Here, <kbd>generateSequence</kbd><span> </span>generates a sequence of infinite numbers, but when we call<span> </span><kbd>take(10)</kbd>, only 10 items are evaluated and printed.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to pad a string in Kotlin</h1>
                </header>
            
            <article>
                
<p>Sometimes, to keep up with the length of the string, we pad the string with some characters. In many communication protocols, keeping the standard length of the payload is vital.  Kotlin makes it very easy to pad the string with any character and length. Let's see how to use it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will use the <kbd>kotlin.stdlib</kbd><span> </span>library of Kotlin. Specifically, we will be working with<span> the </span><kbd>padStart</kbd> and<span> </span><kbd>padEnd</kbd><span> </span>functions. Let's now follow the given steps to understand how to use these functions:</p>
<ol>
<li>Let's see an example of<span> the </span><kbd>padStart</kbd><span> </span>function:</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>string=<span>"abcdef"<br/></span><span>    </span><span>val </span>pad=string.<span>padStart</span>(<span>10</span>,<span>'-'</span>)<br/>    <span>println</span>(pad)<br/>}</pre>
<p style="padding-left: 60px">This is the output:</p>
<pre style="padding-left: 60px"><strong> ----abcdef</strong></pre>
<ol start="2">
<li class="mce-root">Next, we look at an example of <kbd>padEnd</kbd>:<em><br/></em></li>
</ol>
<pre style="padding-left: 60px"><span>val </span>string=<span>"abcdef"<br/></span><span>val </span>pad=string.<span>padEnd</span>(<span>10</span>,<span>'-'</span>)<br/><span>println</span>(pad)</pre>
<p style="padding-left: 60px">Here's the output:</p>
<pre style="padding-left: 60px"><strong> abcdef----</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>The padding functions are needed to expand the string to a certain length using the character provided with the function. So, if the length of the padded string is less than the string itself, it will just return the same string.</p>
<p>Another key thing to note is that by default, the padding character is a space character. This is the implementation of the <kbd>padStart</kbd> function:</p>
<pre><span>public fun </span>String.padStart(length: Int, padChar: Char = <span>' '</span>): String<br/>        = (<span>this as </span>CharSequence).<span>padStart</span>(length, padChar).toString()</pre>
<p>As you can see, the default value for <kbd>padChar</kbd> is a space character, and it is called on a String object.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to flatten an array or map</h1>
                </header>
            
            <article>
                
<p>In the previous few recipes of this chapter, we learned how to create multidimension arrays. In this recipe, we will see how we can convert them to a 1D list, or <em>flatten</em> it.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>We will be using the <kbd>.flatten</kbd> method of the <kbd>kotlin.stdlib</kbd> library. It takes in an array or collection and returns a single list of all elements from all collections/arrays in the given collection/array.</p>
<p>For example, with an array of arrays:</p>
<p><kbd>[[1,2,3],[1,2,3],[1,2,3]] -&gt; [1,2,3,1,2,3,1,2,3]</kbd></p>
<pre><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>a= <span>arrayOf</span>(<span>arrayOf</span>(<span>1</span>,<span>2</span>,<span>3</span>),<span>arrayOf</span>(<span>1</span>,<span>2</span>,<span>3</span>),<span>arrayOf</span>(<span>1</span>,<span>2</span>,<span>3</span>))<br/>    a.<span>flatten</span>().<span>forEach </span><span>{ </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>) <span>}<br/></span>}<br/><br/>//Output: <strong> 1 2 3 1 2 3 1 2 3</strong> </pre>
<p class="mce-root">For example, with a list of lists:</p>
<p><kbd><span>[[1,2,3],[1,2,3],[1,2,3]] -&gt; [1,2,3,1,2,3,1,2,3]</span></kbd></p>
<pre><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>a= <span>listOf</span>(<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>),<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>),<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>))<br/>    a.<span>flatten</span>().<span>forEach </span><span>{ </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>) <span>}<br/></span>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>Let's take a look at the implementation of<span> the </span><kbd>flatten()</kbd><span> </span>function:</p>
<pre><span>public fun </span>&lt;<span>T</span>&gt; Iterable&lt;Iterable&lt;<span>T</span>&gt;&gt;.flatten(): List&lt;<span>T</span>&gt; {<br/>    <span>val </span>result = ArrayList&lt;<span>T</span>&gt;()<br/>    <span>for </span>(element <span>in this</span>) {<br/>        result.<span>addAll</span>(element)<br/>    }<br/>    <span>return </span>result<br/>}</pre>
<p class="mce-root">As you can see, it's just adding the items from<span> </span>iterables<span> </span>(array or lists) in a new list and returning that list.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to sort collection by multiple fields in Kotlin</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will learn how to sort a collection by multiple fields in Kotlin. This often comes in handy when we want to give precedence to an object over another object when both have equal value on a specific property. For example, we might have a list of <kbd>Student</kbd> objects and want to arrange them in ascending order of age, but if two students have the same age, we will order them based on their GPA. In this recipe, we will see how to handle use cases like this. So let's get started!</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>Now, let's follow these steps to sort based on multiple fields of an object:</p>
<ol>
<li>First, let's create the <kbd>Student</kbd> class:</li>
</ol>
<pre style="padding-left: 60px"><span>class </span>Student(<span>val </span><span>age</span>:Int, <span>val </span><span>GPA</span>: Double)</pre>
<ol start="2">
<li>Then, create a list of <kbd>Student</kbd> objects:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>studentA=Student(<span>11</span>,<span>2.0</span>)<br/><span>val </span>studentB=Student(<span>11</span>,<span>2.1</span>)<br/><span>val </span>studentC=Student(<span>11</span>,<span>1.3</span>)<br/><span>val </span>studentD=Student(<span>12</span>,<span>1.3</span>)<br/><span>val </span>studentsList=<span>listOf</span><span>&lt;Student&gt;</span>(studentA,studentB,studentC,studentD)</pre>
<ol start="3">
<li>To sort it on multiple fields, we simply need to do this:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>sortedList=studentsList.<span>sortedWith</span>(<span>compareBy</span>(<span>{it</span>.<span>age</span><span>}</span>,<span>{it</span>.<span>GPA</span><span>}</span>))</pre>
<ol start="4">
<li>If we print it <span>now</span>, we will get the following output:</li>
</ol>
<pre style="padding-left: 60px">sortedList.<span>forEach </span><span>{<br/></span><span>    </span><span>println</span>(<span>"age: </span><span>${</span><span>it</span>.<span>age</span><span>}</span><span>, GPA: </span><span>${</span><span>it</span>.<span>GPA</span><span>} </span><span>"</span>)<br/><span>}<br/></span><br/>//Output: <strong>age: 11, GPA: 1.3 </strong><br/><strong>          age: 11, GPA: 2.0 </strong><br/><strong>          age: 11, GPA: 2.1 </strong><br/><strong>          age: 12, GPA: 1.3</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>We have used the <kbd>sortedWith</kbd> function, which takes in a comparator. The comparator is provided by the <kbd>compareBy</kbd> function. The <kbd>compareBy</kbd> has an overload that takes multiple functions:</p>
<pre><span>public fun </span>&lt;<span>T</span>&gt; compareBy(<span>vararg </span>selectors: (<span>T</span>) -&gt; Comparable&lt;*&gt;?):Comparator&lt;T&gt;</pre>
<p>As you can see in the preceding code, <kbd>vararg</kbd> allows us to take multiple functions in its construct and returns a comparator, which feeds the <kbd>sortedWith</kbd> function.</p>
<p>Note that sorting with multiple fields works like sort by field 1, then by field 2, then by field 3, and so on.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to use limit in Kotlin list</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will learn how to take specific items from the list. We will use the <kbd>kotlin.stdlib</kbd> library for this purpose.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>We will be using<span> the </span><kbd>take</kbd><span> </span>function and its variants for limiting the items in the list.</p>
<p><kbd>take(n)</kbd>: Returns a list of the first n items:</p>
<pre><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>list= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>)<br/>    <span>val </span>limitedList=list.<span>take</span>(<span>3</span>)<br/>    <span>println</span>(limitedList)<br/>}<br/><br/>//Output:<strong> [1,2,3]</strong></pre>
<p><kbd>takeLast(n)</kbd>: Returns a list containing the last [n] elements:</p>
<pre><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>list= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>)<br/>    <span>val </span>limitedList=list.<span>takeLast</span>(<span>3</span>)<br/>    <span>println</span>(limitedList)<br/>}<br/><br/>//Output:<strong> [3,4,5]</strong></pre>
<p><kbd>takeWhile{ predicate }</kbd>: Returns a list containing the first elements satisfying the given [predicate]:</p>
<pre><span>val </span>list= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>)<br/><span>val </span>limitedList=list.<span>takeWhile </span><span>{ it</span>&lt;<span>3 </span><span>}<br/></span><span>println</span>(limitedList)<br/><br/>//Output: <strong>[1,2]</strong></pre>
<p><kbd>takeLastWhile{predicate}</kbd>: Works a bit like <kbd>takeWhile</kbd>, except that it evaluates the list from the end.</p>
<p><kbd>takeIf { predicate }</kbd>: Returns <kbd>`this`</kbd> value if it satisfies the given [predicate], or <kbd>`null`</kbd> if it doesn't:</p>
<pre><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>list= <span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>)<br/>    <span>var </span>limitedList=list.<span>takeIf </span><span>{ it </span>.contains(<span>1</span>) <span>}<br/></span><span>    </span><span>println</span>(limitedList)<br/>}<br/><br/>//Output: <strong>[1,2,3,4,5]</strong></pre>
<p>Note that<span> </span>the<span> </span><kbd>it</kbd><span> </span>inside the <kbd>takeIf</kbd> lambda represents the list itself, and not just an element of<span> </span>list.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to create a 2D array in Kotlin</h1>
                </header>
            
            <article>
                
<p>2D arrays are useful for data representation in certain situations such as board games, images, and so on. In Java, we can represent a 2D array by doing the following:</p>
<pre><span>int</span>[][] data = <span>new int</span>[size][size];</pre>
<p class="mce-root">Since Kotlin brings new syntax, let's see how to work with a<span> </span>2D<span> </span>array in Kotlin.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p>Let's now follow the given steps to create a 2D array in Kotlin:</p>
<ol>
<li>We can create a simple 2D array in Kotlin using this syntax:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>array = Array(<span>n</span>, <span>{</span>IntArray(<span>n</span>)<span>}</span>)</pre>
<p style="padding-left: 60px">Here, <kbd>n</kbd> represents the dimension of the array. Here, we have used the <kbd>Array</kbd> class of Kotlin, which represents an array (specifically, a Java array when targeting the JVM platform). We have initialized the <kbd>Array</kbd> object by passing the size and initializer:</p>
<pre style="padding-left: 60px"><span>public inline constructor</span>(size: Int, init: (Int) -&gt; <span>T</span>)</pre>
<ol start="2">
<li>Our dimension is <kbd>n</kbd>, and as an initializer, we are passing a 1D array, which then gives a structure of a 2D array. If you want to initialize the 2D array with a<span> </span>specific<span> </span>value, you need to pass it in the initializer. Consider this example:</li>
</ol>
<pre style="padding-left: 60px">Array<span>&lt;IntArray&gt;</span>(<span>10</span>,<span>{</span>IntArray(<span>10</span>,<span>{</span>-<span>1</span><span>}</span>)<span>}</span>)</pre>
<ol start="3">
<li>The preceding 2D array will be initialized by all <kbd>-1</kbd>.</li>
<li>We can also use the<span> </span><kbd>arrayOf</kbd><span> </span>construct to create a 2D array by passing two 1D arrays:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>even: IntArray = <span>intArrayOf</span>(<span>2</span>, <span>4</span>, <span>6</span>)<br/><span>val </span>odd: IntArray = <span>intArrayOf</span>(<span>1</span>, <span>3</span>, <span>5</span>)<br/><br/><span>val </span>lala: Array&lt;IntArray&gt; = <span>arrayOf</span>(even, odd)<br/>lala.<span>forEach </span><span>{<br/></span><span>    it</span>.<span>forEach </span><span>{<br/></span><span>        </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/>    <span>}<br/></span><span>    </span><span>println</span>()<br/><span>}<br/></span><br/>//Output:<strong> 2 4 6 </strong><br/><strong>          1 3 5</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">There's more…</h1>
                </header>
            
            <article>
                
<p>You can also create your own function by extending<span> K</span>otlin's<span> </span>code. For example, creating a method, as follows:</p>
<pre><span>inline fun </span>&lt;<span>reified </span><span>inside</span>&gt; array2d(sizeOuter: Int, sizeInner: Int, <span>noinline </span>innerInit: (Int)-&gt;<span>inside</span>): Array&lt;Array&lt;<span>inside</span>&gt;&gt;<br/>       = Array(sizeOuter) <span>{ </span>Array<span>&lt;inside&gt;</span>(sizeInner, innerInit) <span>}</span></pre>
<p>This can enable you<span> to </span>create<span> </span>a 2D array quite easily, just by doing the following:</p>
<pre><span>array2d</span>(<span>10</span>,<span>10</span>,<span>{</span><span>0</span><span>}</span>)</pre>
<p>You can also create a list of lists in a similar fashion. Here's an example of a<span> </span>list<span> </span>of lists:</p>
<pre><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>a= <span>listOf</span>(<span>listOf</span>(<span>1</span>,<span>2</span>,<span>3</span>), <span>listOf</span>(<span>4</span>,<span>5</span>,<span>6</span>), <span>listOf</span>(<span>7</span>,<span>8</span>,<span>9</span>))<br/>    a.<span>forEach </span><span>{<br/></span><span>        </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/>    <span>}<br/></span>}<br/><br/></pre>
<p>This is its output:</p>
<pre><strong>[1, 2, 3] [4, 5, 6] [7, 8, 9]</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to skip the first "n" entries in Kotlin</h1>
                </header>
            
            <article>
                
<p>In this recipe, we will learn how to drop entries in a collection. First, we will see how to drop the first <em>n</em> items, then we will see how to drop the last <em>n</em> items, and finally, we will see how to use a predicate while dropping the elements from the collection.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>I'll be using IntelliJ IDEA for writing and running Kotlin code; you are free to use any IDE that can do the same task.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How to do it…</h1>
                </header>
            
            <article>
                
<p><span>In the following steps, we will learn to skip the first <em>n</em> entries of a Kotlin list:</span></p>
<ol>
<li>First, let's see how to drop the first <em>n</em> items in a collection. We will be using a list, but it also works with an array. Also, we will be using<span> </span><kbd>kotlin.stdlib</kbd><span>, </span>which contains the functions required in this recipe. The function to use here<span> </span>is<span> </span><kbd>drop</kbd>:</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>list= <span>listOf</span><span>&lt;Int&gt;</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>)<br/>    <span>var </span>droppedList=list.<span>drop</span>(<span>2</span>)<br/>    droppedList.<span>forEach </span><span>{<br/></span><span>        </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/>    <span>}<br/></span>}<br/><br/>//Output: <strong>3 4 5 6 7 8 9</strong> </pre>
<ol start="2">
<li>To skip the last <em>n</em> items in the collection, you need to use the<span> </span><kbd>dropLast</kbd><span> </span>function:</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>list= <span>listOf</span><span>&lt;Int&gt;</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>)<br/>    <span>var </span>droppedList=list.<span>dropLast</span>(<span>2</span>)<br/>    droppedList.<span>forEach </span><span>{<br/></span><span>        </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/>    <span>}<br/></span>}<br/><br/>//Output: <strong> 1 2 3 4 5 6 7</strong> </pre>
<ol start="3">
<li>This lambda function drops the item while the predicate returns true:</li>
</ol>
<pre style="padding-left: 60px"><span>val </span>list= <span>listOf</span><span>&lt;Int&gt;</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>,<span>1</span>,<span>2</span>,<span>3</span>)<br/><span>val </span>droppedList=list.<span>dropWhile </span><span>{ it</span>&lt;<span>3 </span><span>}<br/></span>droppedList.<span>forEach </span><span>{<br/></span><span>    </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/><span>}<br/><br/>//Output: <strong> 3 4 5 6 7 8 9 1 2 3</strong> </span></pre>
<ol start="4">
<li>This function drops the items at the end while the condition is satisfied.</li>
</ol>
<pre style="padding-left: 60px"><span>fun </span>main(args: Array&lt;String&gt;) {<br/>    <span>val </span>list= <span>listOf</span><span>&lt;Int&amp;gt;</span>(<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>,<span>6</span>,<span>7</span>,<span>8</span>,<span>9</span>,<span>3</span>,<span>1</span>,<span>2</span>)<br/>    <span>val </span>droppedList=list.<span>dropLastWhile </span><span>{ it</span>&lt;<span>3 </span><span>}<br/></span><span>    </span>droppedList.<span>forEach </span><span>{<br/></span><span>        </span><span>print</span>(<span>" </span><span>${</span><span>it</span><span>} </span><span>"</span>)<br/>    <span>}<br/></span>}<br/><br/>//Output:<strong>  1 2 3 4 5 6 7 8 9 3</strong> </pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">How it works…</h1>
                </header>
            
            <article>
                
<p>The<span> </span><kbd>drop</kbd><span> </span>function returns a new list by skipping the first n items. Internally, it just uses the usual<span> </span><kbd>for</kbd><span> </span>loops and performs some checks on whether the input is an array or a list.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  </body></html>