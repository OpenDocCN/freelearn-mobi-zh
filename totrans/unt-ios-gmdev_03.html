<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Hello World</h1></div></div></div><div><blockquote class="blockquote"><p>In this chapter we will build a new project from scratch and produce the first reader created application that we can run on our iOS device. While we have experimented with deploying applications to our device before, these were pre-built applications. It's time to take the training wheels off and take the environment for a test drive.</p></blockquote></div><p>In this chapter we will:</p><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Compose our first scene</li><li class="listitem" style="list-style-type: disc">Test our application in the editor</li><li class="listitem" style="list-style-type: disc">Customize the iOS settings</li><li class="listitem" style="list-style-type: disc">Deploy this application to a device</li></ul></div><p>This is where the fun really starts...</p><div><div><div><div><h1 class="title"><a id="ch03lvl1sec01"/>Composing our first scene</h1></div></div></div><p>In our first application we're going to follow software development tradition and create the typical first program Hello World. As we're using Unity to create our game it seemed to make sense to actually create a 3D world and deploy it to our device. When we're done we should be able to see the earth on our device:<a id="id100" class="indexterm"/>
</p><div><img src="img/978-1-84969-040-9_3_1.jpg" alt="Composing our first scene"/><div><p>The final output of our Hello World game</p></div></div></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec02"/>Start with the basics</h1></div></div></div><p>For our first game we're going to start with the basics.<a id="id101" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">Create a scene</li><li class="listitem">Create sample objects</li><li class="listitem">Customize sample objects</li><li class="listitem">Control the camera</li><li class="listitem">Deploy to the iOS Device<a id="id102" class="indexterm"/></li></ol></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec03"/>Time for action —  Creating a scene</h1></div></div></div><div><ol class="orderedlist"><li class="listitem">Our first step is to create a new Unity Project by selecting<strong> File | New Project</strong>. In the Project Directory specify where you would like Unity to create this new Project and press the<strong> Create Project</strong> button:<a id="id103" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_2.jpg" alt="Time for action — Creating a scene"/></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">Unity bundles common sets of scripts, assets, and other reusable functionality into distributable files referred to as Unity Packages. These single file archives end with the <code class="literal">.unityPackage</code> extension and represent the primary mechanism for sharing in Unity. We will not be importing any packages into Unity for these first applications so don't worry about selecting any of the packages.<a id="id104" class="indexterm"/><p>Most games are broken up into scenes or levels and Unity is designed around this concept. A scene in its most basic state is just a container pointing to all of all the art assets, scripts, behaviors, and so on. You can, of course, put all of your content into one big scene, but that is more suitable for very small games or those that stream all of their content from the Internet. With the constraints of most iOS devices and the speed of even 3G Internet connections it would be impractical to do that so we will focus on level-based design.
<a id="id105" class="indexterm"/>
</p></li></ul></div></li><li class="listitem">When Unity created our project, it created a default scene for us it simply needs to be saved. Unity will put all of the scenes in the<code class="literal"> Assets</code> folder of the project. Save the scene as<strong> level1</strong> and you will find that the new level is represented in the<strong> Project</strong> view:<a id="id106" class="indexterm"/></li></ol></div><div><img src="img/978-1-84969-040-9_3_3.jpg" alt="Time for action — Creating a scene"/></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">Once you start creating multiple scenes, you will be able to simply double-click on the scene in the <strong>Project</strong> view and it will change the <strong>Scene</strong> view and <strong>Game</strong> view to represent the new state.<a id="id107" class="indexterm"/></li></ul></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec01"/>What just happened?</h2></div></div></div><p>We have just created a simple scene for our game. At the moment it's very empty, but is ready to be filled with actors, scripts, and other functionality to become a real game.<a id="id108" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec04"/>Time for action —  Creating objects in a scene</h1></div></div></div><p>Next, we need to create some objects in our scene or we will have a very boring game. The first object we need to create is something to represent the ground. Yes I know there is no ground in space, but to illustrate some of the available features we need the ground.<a id="id109" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">In the<strong> Main Menu</strong>, create a new plane by selecting<strong> GameObject | Create Other | Plane</strong>.</li><li class="listitem">We also want to give this Plane a unique name, so in the<strong> Inspector</strong> view change the name of the object from Plane to Ground by selecting the<strong> Plane</strong> text in the<strong> Inspector</strong> by simply replacing it with<strong> Ground</strong>. Unity will now refer to this object as<strong> Ground</strong> as well. This will come in useful later when we're trying to do things with the ground plane:<div><img src="img/978-1-84969-040-9_3_4.jpg" alt="Time for action — Creating objects in a scene"/></div></li><li class="listitem">In the<strong> Inspector</strong>, increase the size of our ground plane by changing the<strong> Scale</strong> to <strong> (100, 1, 100)</strong>. This should give us plenty of room to move around:<div><img src="img/978-1-84969-040-9_3_5.jpg" alt="Time for action — Creating objects in a scene"/></div></li><li class="listitem">One new feature of Unity 3 is the ability to get a quick render of what the world looks like from the camera's perspective without having to play the game. In the<strong> Hierarchy</strong> view select the<strong> Main Camera</strong> object and you will see in the<strong> Scene</strong> view that there is a<strong> Camera Preview</strong> window that is showing you what the camera sees. This window is a real-time preview as well, so as objects change in the scene, the<strong> Camera Preview</strong> will update to reflect those changes:<a id="id110" class="indexterm"/></li></ol></div><div><img src="img/978-1-84969-040-9_3_6.jpg" alt="Time for action — Creating objects in a scene"/></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec02"/>What just happened?</h2></div></div></div><p>We have just created a simple ground object for our Hello World scene and explored how we can preview the world with the Camera Preview.<a id="id111" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec05"/>Time for action —  Let there be light</h1></div></div></div><p>One of your most important assets in Unity is lighting. With the right lighting effects your game can go from looking pedestrian to revolutionary. Unity has a very sophisticated lighting engine that can handle dynamic lights, baking lights with the Beast lighting system, and deferred lights.<a id="id112" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">For now we will create a basic light by selecting<strong> Create | Point light</strong> which will add a<strong> Point Light Game</strong> Object to our scene:<div><img src="img/978-1-84969-040-9_3_7.jpg" alt="Time for action — Let there be light"/></div></li><li class="listitem">Now that you've created your point light, let's position it above the scene so that it can reflect on other objects. In the<strong> Inspector</strong>, change the<strong> Position</strong> to <strong>(0,5,0)</strong>. This should put it above the scene:<a id="id113" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_8.jpg" alt="Time for action — Let there be light"/></div></li><li class="listitem">Let's center the editor on this light by pressing the shortcut-key F, which will focus the scene on this object:<div><img src="img/978-1-84969-040-9_3_24.jpg" alt="Time for action — Let there be light"/></div></li><li class="listitem">Just to make sure our light is bright enough let's set the<strong> Intensity</strong> to<strong> 4</strong>. You can either use the slider or just enter<strong> 4</strong> in the text box next to the slider:<a id="id114" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_25.jpg" alt="Time for action — Let there be light"/></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">You can also see that the intensity of the light has increased as there is now more light in the scene:</li></ul></div><div><img src="img/978-1-84969-040-9_3_26.jpg" alt="Time for action — Let there be light"/></div></li><li class="listitem">Select the<strong> Main Camera</strong>, you will see a<strong> Camera Preview</strong> that shows the light shining down upon the ground plane:</li></ol></div><div><img src="img/978-1-84969-040-9_3_9.jpg" alt="Time for action — Let there be light"/></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec03"/>What just happened?</h2></div></div></div><p>We have added some lighting to our scene so that we will be able to see what's going on in our scene. Remember, that in the absence of lights in the scene there won't be much for the gamer to see. While we have created a simple lighting model here, you will see that lighting is perhaps one of the most important features that you can add to your game as it will provide a significant amount of visual fidelity to your objects.<a id="id115" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec06"/>Time for action —  Hello "World"</h1></div></div></div><p>What good would a Hello World chapter be if we didn't actually put the world in it.<a id="id116" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">In the<strong> Hierarchy</strong> view, create a<strong> Sphere</strong> with<strong> Create | Sphere</strong>.</li><li class="listitem">Rename this Game Object to<strong> World</strong> in the<strong> Inspector</strong>.</li><li class="listitem">Let's move it a little off-center so that we can see the effect lighting has on this sphere to<strong> Position</strong> <strong>(-2, 2, 0)</strong>. While this is interesting, this doesn't much look like the world:<div><img src="img/978-1-84969-040-9_3_10.jpg" alt="Time for action — Hello &quot;World&quot;"/></div></li><li class="listitem">In the<code class="literal"> Chapter 3</code> folder you will find a file called<code class="literal"> earth.jpg</code>. Select the<strong> Project</strong> view and drag this texture right into the<strong> Project</strong> view. Your Unity environment may pause for a moment while Unity imports this file.<a id="id117" class="indexterm"/></li><li class="listitem">Select the earth texture in the<strong> Project</strong> view and you will see the details for this texture:<div><img src="img/978-1-84969-040-9_3_11.jpg" alt="Time for action — Hello &quot;World&quot;"/></div></li><li class="listitem">It would be nice if we could just plop this texture onto our sphere and have a rendering of our world. The Unity developers thought this would be nice as well. Consequently, you can drag the earth texture from the<strong> Project</strong> view onto our sphere in the<strong> Scene</strong> view and it will automatically texture it.<a id="id118" class="indexterm"/></li><li class="listitem">Select the<strong> Scene</strong> view and examine the rendering of our scene. We're getting closer to a true Hello World:</li></ol></div><div><img src="img/978-1-84969-040-9_3_12.jpg" alt="Time for action — Hello &quot;World&quot;"/></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec04"/>What just happened?</h2></div></div></div><p>We have just added the first actor to our game. In this case our actor is a very simple sphere model with a texture on it, but we have just performed the basic steps that are necessary to get objects into a Unity scene.<a id="id119" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec07"/>Time for action —  Controling the camera</h1></div></div></div><p>This is all very interesting, except that we're fairly far away from our creation and we lack the ability to move around the scene. With traditional iOS devices we can accomplish this by accessing the accelerometer within the device:<a id="id120" class="indexterm"/>
</p><div><img src="img/978-1-84969-040-9_3_13.jpg" alt="Time for action — Controling the camera"/></div><p>Unity encapsulates all of the functionality of the accelerometer into the<code class="literal"> Input</code> class and we can use its attributes and methods to connect to the accelerometer and determine what is going on with our device.<a id="id121" class="indexterm"/>
</p><div><h3 class="title"><a id="tip07"/>Tip</h3><p>Those of you coming from Unity iPhone will notice that all of the Unity Input for iOS has been encapsulated in the<code class="literal"> Input</code> class. There is no longer a need to use the<code class="literal"> iPhoneInput</code> class.</p></div><div><ol class="orderedlist"><li class="listitem">In the<strong> Project</strong> view create a new JavaScript script by selecting<strong> Create | JavaScript</strong>. This will create a new script named<code class="literal"> NewBehaviourScript</code>.<a id="id122" class="indexterm"/></li><li class="listitem">Double-clicking on this script will open the script in Unity's default editor<strong> Unitron</strong>. We will cover the other Unity-provided tools that can be used to develop scripts, MonoDevelop, when we deep dive into scripting.</li><li class="listitem">In the script window we simply enter the code for the script in the<code class="literal"> Update</code> function:<a id="id123" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_14.jpg" alt="Time for action — Controling the camera"/></div><div><h3 class="title"><a id="tip08"/>Tip</h3><p><strong>Downloading the example code</strong></p><p>You can download the example code files for all Packt books you have purchased from your account at<a class="ulink" href="http://www.packtpub.com"> http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit<a class="ulink" href="http://www.packtpub.com/support"> http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">Scripts must, generally, be attached to Game Objects to do anything useful. In our case we want to move the camera around so we need to attach this script to the camera. There are two ways to accomplish this in Unity. As with texturing, you could simply drag the script onto the camera.<a id="id124" class="indexterm"/></li></ul></div></li><li class="listitem">In the<strong> Hierarchy</strong> view select the<strong> Main Camera</strong> object.</li><li class="listitem">Then, in the<strong> Project</strong> view drag the script from the<strong> Project</strong> view onto either the Camera in the<strong> Inspector</strong> view or onto the object in the<strong> Hierarchy</strong> view.<p>The other way to accomplish this task is to select the <strong>Main Camera</strong> in the <strong>Hierarchy</strong> view and, subsequently, in the Unity menu bar select <strong>Component | Scripts | New Behaviour Script.
</strong>
</p><p>In either case you will find that Unity has added your script to the camera:
</p></li></ol></div><div><img src="img/978-1-84969-040-9_3_23.jpg" alt="Time for action — Controling the camera"/></div><div><div><div><div><h2 class="title"><a id="ch03lvl2sec05"/>What just happened?</h2></div></div></div><p>We have just examined how scripting is handled in the Unity environment. Every part of your gameplay functionality will be implemented as a script and you've just seen how simple it is to add these behaviors.<a id="id125" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec08"/>Time for action —  Deploying to the iOS device</h1></div></div></div><p>Now that we've created an application that does something useful, it's time to deploy our new creation to our iOS device and explore our scene using the accelerometer. As we've run through this process before we can cover these details at a high-level, it's important to walk through this again just so that the process feels right.<a id="id126" class="indexterm"/>
</p><div><ol class="orderedlist"><li class="listitem">The first thing we need to do is to make sure that we're deploying the right type of application. When Unity originally created our new project it created it for desktop deployment. We need to change this in the<strong> Build Settings</strong><strong> (File | Build Settings):</strong><div><img src="img/978-1-84969-040-9_3_15.jpg" alt="Time for action — Deploying to the iOS device"/></div></li><li class="listitem">An important step here is to make sure that any scenes that we want included in the build on our device are included.<a id="id127" class="indexterm"/></li><li class="listitem">Click on the<strong> Add Current</strong> button and our level1 scene and all of the assets necessary for that scene will be included in the application when it is packaged for the device.<a id="id128" class="indexterm"/></li><li class="listitem">Select the iOS platform as the target platform and click on the<strong> Switch Platform</strong> button. Unity will pause for a moment and make the necessary changes to the project so that it can be deployed to the new target platform:<a id="id129" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_16.jpg" alt="Time for action — Deploying to the iOS device"/></div><div><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">With this done the only thing remaining is to change the build settings for the project so that Unity can communicate with XCode and have it construct the application for deployment.<a id="id130" class="indexterm"/></li></ul></div></li><li class="listitem">As before, we need to create an<strong> App ID</strong> and deploy a provisioning profile to our development machine so that Unity can accomplish this. Enter the<strong> iOS Provisioning Portal</strong> and create a new<strong> App ID</strong> for our new application. While we could use the same<strong> App ID</strong> we used before, recall that doing so would replace our old application with the one we just built:<a id="id131" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_17.jpg" alt="Time for action — Deploying to the iOS device"/></div></li><li class="listitem">Next we need to create another provisioning profile so that we can deploy the application to the device:<div><img src="img/978-1-84969-040-9_3_18.jpg" alt="Time for action — Deploying to the iOS device"/></div></li><li class="listitem">Once the provisioning profile is created you need to download the provisioning profile so that XCode can deploy the application to your iOS device:<a id="id132" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_19.jpg" alt="Time for action — Deploying to the iOS device"/></div></li><li class="listitem">Double-clicking on the provisioning profile will open XCode's Organizer and deploy the provisioning profile to your device:<a id="id133" class="indexterm"/><div><img src="img/978-1-84969-040-9_3_20.jpg" alt="Time for action — Deploying to the iOS device"/></div></li><li class="listitem">With this completed all we need to do is inform Unity of which<strong> App ID</strong> it should be using by entering that<strong> App ID</strong> in the<strong> Bundle Identifier:</strong><div><img src="img/978-1-84969-040-9_3_21.jpg" alt="Time for action — Deploying to the iOS device"/></div><div><h3 class="title"><a id="tip09"/>Tip</h3><p>It would be nice to use our own icon rather than using the stock Unity icon. The icon that you use should be an asset in your unity project and can be any texture you want. Simply drag that texture onto the Default Icon box and Unity will do the rest.</p></div></li><li class="listitem">With all of these steps completed, the last action we need to perform is invoking Unity's Build process so it can have XCode compile our game and install it on the phone. We can accomplish this through<strong> File | Build &amp; Run</strong>.</li><li class="listitem">Shortly after you've performed these steps, Unity will start on your iOS device.</li></ol></div><p>Remember that we have the accelerometer active so as soon as our game starts we will start moving around the scene.</p><div><div><div><div><h2 class="title"><a id="ch03lvl2sec06"/>What just happened?</h2></div></div></div><p>We just built our first game application from scratch. It doesn't do much right now, but we have just opened the doorway to building great games for the iOS platform. This should also give you a feel for how you would normally interact with the Unity environment. Unity is a sandbox where you can add all sorts of assets and then create scripts that will allow behaviors for those assets.<a id="id135" class="indexterm"/>
</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch03lvl1sec09"/>Summary</h1></div></div></div><p>We built an application that actually does something worth showing to people in this chapter. While it's not likely to make millions of dollars in sales or garner celebrity status, this is a critical milestone for developing games in Unity as we have just touched a lot of the game development workflow.</p><p>Now that we've built our first scene, we need to take a tour of the Unity core concepts, as without a clear understanding of how Unity works, it will be difficult to really take advantage of the environment. The Unity Concepts will form the basis of the next chapter.</p></div></body></html>