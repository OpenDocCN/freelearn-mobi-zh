# *第4章*：范围操作符和循环

在上一章中，您学习了条件语句，它允许您根据不同的条件执行不同的操作，以及可选类型，它允许您创建可能或可能没有值的变量。

在本章中，您将了解**范围操作符**和**循环**。范围操作符允许您通过指定范围的开头和结尾值来表示一系列值，您还将了解不同类型的范围操作符。循环允许您重复执行指令或一系列指令。您可以重复执行固定次数的序列，或者重复执行序列直到满足某个条件。您将了解用于完成此操作的不同类型的循环。

到本章结束时，您将学会如何使用范围，以及如何创建和使用不同类型的循环（`for-in`、`while`和`repeat-while`）。

以下内容将涵盖：

+   探索范围操作符

+   探索循环

# 技术要求

本章的Xcode游乐场位于本书代码包的`Chapter04`文件夹中，可以在此处下载：

[https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition](https://github.com/PacktPublishing/iOS-15-Programming-for-Beginners-Sixth-Edition)

查看以下视频以查看代码的实际效果：

[https://bit.ly/309pdRJ](https://bit.ly/309pdRJ)

如果您想从头开始，创建一个新的游乐场并将其命名为`RangeOperatorsAndLoops`。

您可以在阅读过程中输入并运行本章中的所有代码。让我们从使用范围操作符指定数字范围开始。

# 探索范围操作符

范围操作符允许您表示一系列值。假设您想表示从`firstNumber`开始到`lastNumber`结束的数字序列。您不需要指定每个值；您只需以这种方式指定范围：

[PRE0]

假设您需要编写一个为百货公司编写程序，该程序可以自动向18至30岁的顾客发送折扣券。如果需要为每个年龄设置`if`或`switch`语句，将会非常繁琐。在这种情况下使用范围操作符会方便得多。

重要信息

想要了解更多关于范围操作符的信息，请访问：[https://docs.swift.org/swift-book/LanguageGuide/BasicOperators.html](https://docs.swift.org/swift-book/LanguageGuide/BasicOperators.html).

让我们在游乐场中尝试一下。按照以下步骤操作：

1.  将以下代码添加到您的游乐场中，并点击`10`和以`20`结束的数字，包括这两个数字，到`myRange`常量中。这被称为**闭区间操作符**。

1.  结果区域显示的结果可能被截断。点击结果右侧的方形图标。它将在编辑器区域中显示：![Figure 4.1: 编辑器区域显示内联结果

    ![img/Figure_4.1_B17469.jpg](img/Figure_4.1_B17469.jpg)

    Figure 4.1: 编辑器区域显示内联结果

    你现在可以在代码行下的框中看到完整的输出结果。如果你愿意，可以拖动右边缘使框变大。

    小贴士

    记住你可以拖动结果和编辑器区域之间的边界来增加结果区域的大小。

1.  如果你不想在范围内包含序列的最后一个数字，请使用 `..<` 代替 `...`。输入并运行以下代码：

    [PRE1]

    这将在 `myRange2` 常量中存储从 `10` 开始到 `19` 结束的序列，并被称为 **半开范围运算符**。

还有一种类型的范围运算符，即 **单侧范围运算符**，你将在下一章中了解它。

现在你已经了解了如何创建和使用范围，你将在下一节中学习循环、不同的循环类型以及如何使用它们。

# 探索循环

在编程中，你经常需要一遍又一遍地做同样的事情。例如，每个月，公司都需要为每位员工生成工资条。如果公司有 10,000 名员工，编写 10,000 条指令来创建工资条将是不高效的。重复一条指令 10,000 次会更好，循环就是为此而用的。

有三种类型的循环；`for-in` 循环、`while` 循环和 `repeat-while` 循环。`for-in` 循环将重复已知次数，而 `while` 和 `repeat-while` 循环将重复直到循环条件为真。

重要信息

更多关于循环的信息，请访问：[https://docs.swift.org/swift-book/LanguageGuide/ControlFlow.html](https://docs.swift.org/swift-book/LanguageGuide/ControlFlow.html)。

让我们逐一查看每种类型，首先是 `for-in` 循环，它在你知道循环应该重复多少次时使用。

## 使用 `for-in` 循环

`for-in` 循环遍历序列中的每个值，并在每次迭代时执行大括号内的语句集，即循环体。每个值依次分配给一个临时变量，并且可以在循环体内使用该临时变量。以下是它的样子：

[PRE2]

循环重复的次数由序列中的项目数量决定。让我们首先创建一个 `for-in` 循环来显示 `myRange` 中的所有数字。按照以下步骤操作：

1.  将以下代码添加到您的游乐场中，并点击 `myRange` 包含范围中的最后一个数字。

1.  让我们尝试相同的程序，但这次使用 `myRange2`。按照以下方式修改代码并运行：

    [PRE3]

1.  你甚至可以直接在 `in` 关键字后使用范围运算符。输入并运行以下代码：

    [PRE4]

    从 `0` 到 `5` 的每个数字都在调试区域中显示。

1.  如果你想要反转序列，请使用 `reversed()` 函数。按照以下方式修改代码并运行：

    [PRE5]

干得好！让我们在下一节中检查 `while` 循环，它在循环序列应该重复直到条件为 `true` 时使用。

## 使用 `while` 循环

`while`循环包含一个条件和一组用大括号括起来的语句，称为循环体。首先检查条件；如果为`true`，则执行循环体，并且循环会重复，直到条件为`false`。它看起来是这样的：

[PRE6]

将以下代码添加以创建一个变量，将其增加`5`，并且只要变量的值小于`50`就持续这样做。点击**播放/停止**按钮来运行它：

[PRE7]

让我们逐步分析代码。最初，`y`被设置为`0`。检查`y < 50`条件并返回`true`，因此执行循环体。`y`的值增加`5`，并在调试区域打印出`y is 5`。循环重复，并再次检查`y < 50`。由于`y`现在是`5`且`5 < 50`仍然返回`true`，因此再次执行循环体。这会一直重复，直到`y`的值为`50`，此时`y < 50`返回`false`，循环停止。

如果`while`循环的初始条件为`false`，则循环体将永远不会执行。尝试将`y`的值更改为`100`来查看这一点。

在下一节中，你将学习`repeat-while`循环。这些循环将首先执行循环体内的语句，然后再检查循环条件。

## 重复-直到循环

与`while`循环类似，`repeat-while`循环也包含一个条件和一组循环体，但循环体在检查条件之前先执行。如果条件为`true`，则循环会重复，直到条件返回`false`。它看起来是这样的：

[PRE8]

将以下代码添加以创建一个变量，将其增加`5`，并且只要变量的值小于`50`就持续这样做。点击**播放/停止**按钮来运行它：

[PRE9]

让我们逐步分析代码。最初，`x`被设置为`0`。执行循环体。`x`的值增加`5`，因此现在`x`包含`5`，并在调试区域打印出`x is 5`。检查`x < 50`条件，由于它返回`true`，循环会重复。`x`的值增加`5`，因此现在`x`包含`10`，并在调试区域打印出`x is 10`。循环会重复，直到`x`包含`50`，此时`x < 50`返回`false`，循环停止。

即使初始条件为`false`，循环体也会至少执行一次。尝试将`x`的值更改为`100`来查看这一点。

你现在知道了如何创建和使用不同的循环类型。太棒了！

# 摘要

在本章中，你了解了闭包和半开区间运算符，这些运算符允许你指定一个数字范围，而不是逐个指定每个数字。

你还学习了三种不同的循环类型：`for-in`循环、`while`循环和`repeat-while`循环。`for-in`循环允许你重复一组语句固定次数，而`while`和`repeat-while`循环允许你在条件为`true`的情况下重复一组语句。做得好！

在下一章中，你将学习集合类型，这些类型允许你通过索引存储数据集合、通过键值对存储数据集合以及存储无结构的数据集合。
