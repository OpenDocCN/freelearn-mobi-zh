<html><head></head><body>
  <div><div><div><div><h1 class="title"><a class="calibre1" id="ch03"/>Chapter 3. Views and Layouts</h1>
        </div>
      </div>
    </div>

    <p class="calibre9">In terms of the iPhone and the iPad, a view can be thought of as what you see, but the types of views you see depend (to an extent) on the application type you select when you create your application.</p>

    <p class="calibre9">In this chapter we will be covering the following topics:</p>

    <div><ul class="itemizedlist">
        <li class="listitem">Projects and their types of layouts</li>

        <li class="listitem">Ensuring that your design fits all iOS devices</li>

        <li class="listitem">UI controls</li>
      </ul>
    </div>

    <div><div><div><div><h1 class="title"><a class="calibre1" id="ch03lvl1sec15"/>Selection of the project type</h1>
          </div>
        </div>
      </div>

      <p class="calibre9">When you first decide to create an iOS application, you will be presented with the view shown in the following screenshot:</p>

      <div><img alt="Selection of the project type" class="calibre11" src="img/00020.jpeg"/></div>

      <p class="calibre12"/>

      <div><div><div><div><h2 class="title1"><a class="calibre1" id="ch03lvl2sec17"/>Application types and their view types</h2>
            </div>
          </div>
        </div>

        <p class="calibre9">The project types require a bit of <a class="calibre1" id="id142"/>an explanation, which has been provided in the following table:</p>

        <div><table border="1" class="calibre16">
            <colgroup class="calibre17">
              <col class="calibre18"/>
              <col class="calibre18"/>
            </colgroup>

            <thead class="calibre19">
              <tr class="calibre20">
                <th class="calibre21" valign="bottom">
                  <p class="calibre22">Project type</p>
                </th>

                <th class="calibre21" valign="bottom">
                  <p class="calibre22">View type</p>
                </th>
              </tr>
            </thead>

            <tbody class="calibre23">
              <tr class="calibre20">
                <td class="calibre24" valign="top">
                  <p class="calibre22">Master-Detail</p>
                </td>

                <td class="calibre24" valign="top">
                  <p class="calibre22">A <a class="indexterm" id="id143"/>table <a class="indexterm" id="id144"/>based layout.</p>
                </td>
              </tr>

              <tr class="calibre20">
                <td class="calibre24" valign="top">
                  <p class="calibre22">Single View</p>
                </td>

                <td class="calibre24" valign="top">
                  <p class="calibre22">The simplest <a class="indexterm" id="id145"/>form of view. The name does not <a class="indexterm" id="id146"/>mean that you have an app with just one page, but that views don't propagate through (so view 1 may have tabs that go to view 2. View 2 could be a <code class="literal">MT.D</code>).</p>
                </td>
              </tr>

              <tr class="calibre20">
                <td class="calibre24" valign="top">
                  <p class="calibre22">Tabbed</p>
                </td>

                <td class="calibre24" valign="top">
                  <p class="calibre22">A standard <a class="indexterm" id="id147"/>view with a number of persistent tabs <a class="indexterm" id="id148"/>at the bottom of the screen. The view changes, but the tabs stay.</p>
                </td>
              </tr>

              <tr class="calibre20">
                <td class="calibre24" valign="top">
                  <p class="calibre22">OpenGL</p>
                </td>

                <td class="calibre24" valign="top">
                  <p class="calibre22">Fast, responsive, <a class="indexterm" id="id149"/>used for high resolution gaming. I <a class="indexterm" id="id150"/>won't be covering this here, as it is outside the scope of this book.</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <p class="calibre9">A more complete explanation of the <a class="calibre1" id="id151"/>project types can be found at <a class="calibre1" href="http://oleb.net/blog/2013/05/xcode-project-templates-difference/">http://oleb.net/blog/2013/05/xcode-project-templates-difference/</a>.</p>
      </div>
    </div>
  </div>


  <div><div><div><div><h1 class="title"><a class="calibre1" id="ch03lvl1sec16"/>The iOS layout</h1>
        </div>
      </div>
    </div>

    <p class="calibre9">When dealing with the layout of <a class="calibre1" id="id152"/>the iPhone (and the iPad) user interface, a number of factors have to be taken into consideration; the most important is probably the physical size of the screen. While it is easy to create a user interface using Xcode, unlike Android devices, iOS does not really auto-resize. The UI is partially due to the way layouts are created in iOS.</p>

    <div><div><div><div><h2 class="title1"><a class="calibre1" id="ch03lvl2sec18"/>The Canvas model</h2>
          </div>
        </div>
      </div>

      <p class="calibre9">When I was growing up, I was <a class="calibre1" id="id153"/>given a "fuzzy felt" kit at school. For those who don't know what it is, a fuzzy felt kit consists of a large background piece of felt onto which you stick other pieces of felt; this enables you to create lots of pictures. Designing for iOS is the same. You can drag-and-drop any piece of the user interface into the main view and leave it there. This is what gives iOS a part of the richness it enjoys; it is up to the designer to create, rather than have strict rules on what goes where. For the application, the UI elements all have an <strong class="calibre2">absolute</strong> position on the screen, rather than being relative to any other objects. Here, though, is the problem.</p>

      <p class="calibre9">If you increase the screen size, those positions stay the same. So, what may look good on an iPhone 4 has bits missing on the 3G and has gaps on the iPhone 5—don't start thinking about the iPad—as the view would be just in the middle of the screen, usually squashed up.</p>
    </div>

    <div><div><div><div><h2 class="title1"><a class="calibre1" id="ch03lvl2sec19"/>How to avoid some of these problems</h2>
          </div>
        </div>
      </div>

      <p class="calibre9">The simplest method is, when <a class="calibre1" id="id154"/>using Xcode to design your UI, you check the <strong class="calibre2">Use AutoLayout</strong> checkbox on the UI View. This does the moving around for you.</p>

      <div><img alt="How to avoid some of these problems" class="calibre11" src="img/00021.jpeg"/></div>

      <p class="calibre12"/>

      <p class="calibre9">The problem here though is that you need to set this <strong class="calibre2">Use AutoLayout</strong> on every view, and it is also not supported on the iPhone 3GS. However, the 3GS is now so old that it is probably not worth going through the hoops required to auto-scale on it. The 3GS supports iOS 6, but only by hacking. iOS 5 <a class="calibre1" id="id155"/>is nearing the end of its life (at the time of writing).</p>
    </div>
  </div>


  <div><div><div><div><h1 class="title"><a class="calibre1" id="ch03lvl1sec17"/>Views and View Controllers</h1>
        </div>
      </div>
    </div>

    <p class="calibre9">They sound similar, but they're not. <a class="calibre1" id="id156"/>The simplest way to think of a View Controller and a View is like a web page. A typical web page is a piece of information served up from a server. The content may be created dynamically (say from a database query), but for the user it's just data. This would be considered as a View. It has things on it, but no real user interaction.</p>

    <p class="calibre9">A View Controller is <a class="calibre1" id="id157"/>closer to a web page constructed using <code class="email">ASP.net</code>, or some other form of language that feeds back to a server (such as PHP). The website has a button on it. The button has an event, which is then fed back to the code (known as the handler <a class="calibre1" id="id158"/>code) behind the button. The View created using Xcode is the web page, and the source file with a connection is the server.</p>

    <p class="calibre9">As outlined in the previous chapter, the objects on <code class="email">UIViewController</code> are connected to the code behind the control by clicking on the control (as well as pressing the <em class="calibre15">Ctrl</em> key) and dragging the widget to the connector entry window.</p>

    <div><div><div><div><h2 class="title1"><a class="calibre1" id="ch03lvl2sec20"/>Other Views</h2>
          </div>
        </div>
      </div>

      <p class="calibre9">Outside of the View choice, there are a number of other views that are available, as shown in the following table:</p>

      <div><table border="1" class="calibre16">
          <colgroup class="calibre17">
            <col class="calibre18"/>
            <col class="calibre18"/>
          </colgroup>

          <thead class="calibre19">
            <tr class="calibre20">
              <th class="calibre21" valign="bottom">
                <p class="calibre22">View name</p>
              </th>

              <th class="calibre21" valign="bottom">
                <p class="calibre22">Description</p>
              </th>
            </tr>
          </thead>

          <tbody class="calibre23">
            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Activity Indicator</strong> <a class="indexterm" id="id159"/> <strong class="calibre28">View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It is a modal indicator <a class="indexterm" id="id160"/>that shows that something (an activity) is occurring. This can be the loading of a web page or the rendering of a map.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Progress</strong> <a class="indexterm" id="id161"/> <strong class="calibre28">View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It shows the progress of time <a class="indexterm" id="id162"/>for an activity—gives the user a better idea of how long something is going to take.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Collection</strong> <a class="indexterm" id="id163"/> <strong class="calibre28">View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It displays a <a class="indexterm" id="id164"/>collection of cells (<code class="literal">CollectionViewCells</code>). Each cell can be defined.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Collection Reusable View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">A reusable <a class="indexterm" id="id165"/>collection works as follows: say you have a group of cells which, for argument's sake, occupies the screen. In a standard collection, when the cells go off <a class="indexterm" id="id166"/>screen, they are still held in the collection. While this makes rendering faster when they return, they take up memory space. The reusable collection stores a pointer to the cell and then refreshes when back on the screen—the collection is then reused.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Table View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It will <a class="indexterm" id="id167"/>be <a class="indexterm" id="id168"/>covered in <a class="indexterm" href="../Text/part0026.html#page" title="Chapter 4. Controllers">Chapter 4</a>, <em class="calibre30">Controllers</em>.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">ImageView</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">Think of this as a <a class="indexterm" id="id169"/>picture view. It has no click events and displays <a class="indexterm" id="id170"/>images. It can, however, play animations within it.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Text View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It displays multiple <a class="indexterm" id="id171"/>lines of <a class="indexterm" id="id172"/>text. Can be a read only as well as a read/write.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Web View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It is a view <a class="indexterm" id="id173"/>used to <a class="indexterm" id="id174"/>render HTML. The HTML file can be held on the phone or remotely.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Map View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It displays a <a class="indexterm" id="id175"/>map with various options. Maps are covered <a class="indexterm" id="id176"/>later in this book.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Scroll View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It is a view <a class="indexterm" id="id177"/>designed <a class="indexterm" id="id178"/>to allow more content to be accommodated on a screen than the screen size actually allows.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">Picker View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It is a <a class="indexterm" id="id179"/>user-definable <a class="indexterm" id="id180"/>picker.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">AdBanner View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It is an <a class="indexterm" id="id181"/>advertising <a class="indexterm" id="id182"/>banner bar for in-app advertising.</p>
              </td>
            </tr>

            <tr class="calibre20">
              <td class="calibre24" valign="top">
                <p class="calibre22"><strong class="calibre28">GLKit View</strong></p>
              </td>

              <td class="calibre24" valign="top">
                <p class="calibre22">It is <a class="indexterm" id="id183"/>used for <a class="indexterm" id="id184"/>OpenGL-ES rendering.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <p class="calibre9">I will deal with the views not covered here elsewhere in this book. As with all views, these too need to be dragged onto the view in Xcode and then linked to the main code.</p>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec08"/>Activity Indicator and Progress View</h3>
            </div>
          </div>
        </div>

        <p class="calibre9">The <code class="email">UIActivityIndicatorView</code> <a class="calibre1" id="id185"/>class is a very simple view to implement.</p>

        <div><pre class="programlisting">var aiActivity = new UIActivityIndicatorView()
{
ActivityIndicatorViewStyle = UIActivityIndicatorViewStyle.Gray,HidesWhenStopped = true,
};
// start the indicator
aiActivity.StartAnimating();
// stop the indicator
aiActivity.StopAnimating();</pre>
        </div>

        <p class="calibre9">The <code class="email">UIProgressView</code> class <a class="calibre1" id="id186"/>is a little more complex, but still quite simple. This works on a thread system to keep track of the indicator. Let's start by setting one up:</p>

        <div><pre class="programlisting">var pvActivity = new UIProgressView()
{
BackgroundColor = UIColor.Red,Style = UIProgressViewStyle.Bar,
};
pvActivity.SetProgress(0, true);</pre>
        </div>

        <p class="calibre9">Next is to construct the thread routine. <a class="calibre1" id="id187"/>The <code class="email">NSAutoreleasePool</code> class is used as a temporary block of memory that is released once the code within the braces has been executed. In the following code, it allows access to the <code class="email">InvokeOnMainThread</code> <a class="calibre1" id="id188"/>method:</p>

        <div><pre class="programlisting">private void myTestRoutine()
{
    int n = 5;
    for (int i = 0; I &lt; n; ++i)
    {
        Thread.Sleep(1000);
        using (var pool = new NSAutoreleasePool())
        {
            InvokeOnMainThread(delegate
            {
                 pvActivity.Progress = (float)(i + 1) / n;
            });
        }
    }
}</pre>
        </div>

        <p class="calibre9">And finally, link it to the Progress View:</p>

        <div><pre class="programlisting">Thread t = new Thread(myTestRoutine);
t.Start();</pre>
        </div>
      </div>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec09"/>UIImageView</h3>
            </div>
          </div>
        </div>

        <p class="calibre9">A <code class="email">UIImageView</code> class can <a class="calibre1" id="id189"/>bring an image in from <code class="email">UIImage</code>, which in turn brings images in from a number of places:</p>

        <div><ul class="itemizedlist">
            <li class="listitem"><code class="email">FromFile</code>: a file held <a class="calibre1" id="id190"/>within the structure of the application (for <a class="calibre1" id="id191"/>example, if the application has a directory called <code class="email">Graphics</code>, the <code class="email">FromFile</code> would point to <code class="email">Graphics</code> | <code class="email">image.png</code>).</li>

            <li class="listitem"><code class="email">FromImage</code>: <a class="calibre1" id="id192"/>loads <a class="calibre1" id="id193"/>from <code class="email">CoreImage</code> files.</li>

            <li class="listitem"><code class="email">FromResource</code>: loads <a class="calibre1" id="id194"/>from <a class="calibre1" id="id195"/>the <code class="email">Resources</code> directory. These are embedded from within the application.</li>

            <li class="listitem"><code class="email">FromBundle</code>: loads <a class="calibre1" id="id196"/>an image relative to the main application bundle <a class="calibre1" id="id197"/>and caches it.</li>

            <li class="listitem"><code class="email">LoadFromData</code>: an <a class="calibre1" id="id198"/>image <a class="calibre1" id="id199"/>created from within the app.</li>
          </ul>
        </div>

        <p class="calibre9">To load a file into <code class="email">UIImageView</code>:</p>

        <div><pre class="programlisting">var myImage = new UIImageView()
{
  ContentMode = UIViewContentMode.ScaleAspectFit;
  Image = UIImage.FromFile("Graphics/helloXamarin.png"),
  Frame = new RectangleF(new PointF(20, 20), new SizeF(100, 100)),
};</pre>
        </div>

        <p class="calibre9">The <code class="email">UIImageView</code> class can also display animations. The main prerequisite for doing this is that you should have a number of images to animate. In my example, I have six images of a tractor. The wheels are the only parts that move.</p>

        <div><img alt="UIImageView" class="calibre11" src="img/00022.jpeg"/></div>

        <p class="calibre12"/>

        <p class="calibre9">To start the animation, use the following code:</p>

        <div><pre class="programlisting">UIImageView animation = new UIImageView()
{
    Frame = new RectangleF(new PointF(20, 20), newSizeF(100,100)),
    AnimationDuration = 0.5,
    AnimationRepeatCount = 0,
    Center = new PointF(animation.Center.X + 115,animation.Center.Y + 65),
};
animation.AnimationImages = new UIImage[]
{
    UIImage.FromFile("Graphics/track-1.png"),UIImage.FromFile("Graphics/track-2.png"),UIImage.FromFile("Graphics/track-3.png"),UIImage.FromFile("Graphics/track-4.png"),UIImage.FromFile("Graphics/track-5.png"),UIImage.FromFile("Graphics/track-6.png")};
animation.StartAnimating();</pre>
        </div>

        <p class="calibre9">To stop the animation, use:</p>

        <div><pre class="programlisting">animation.StopAnimating();</pre>
        </div><img alt="Note" class="calibre10" src="img/00001.gif"/>

        <div><h3 class="title2"><a class="calibre1" id="tip04"/>Tip</h3>

          <p class="calibre9">Animation is covered in <a class="calibre1" href="../Text/part0048.html#page" title="Chapter 10. Animation">Chapter 10</a>, <em class="calibre15">Animation</em>.</p>
        </div><img alt="Note" class="calibre10" src="img/00001.gif"/><br class="book"/>
      </div>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec10"/>UICollectionView</h3>
            </div>
          </div>
        </div>

        <p class="calibre9">The simplest Collection View <a class="calibre1" id="id200"/>that you're likely to see is an image gallery. Think of the Collection View as being a grid view that can be extended. Each Collection View is made up of three different items; cells, supplementary views (data-driven views), and decoration views.</p>

        <div><div><div><div><h4 class="title3"><a class="calibre1" id="ch03lvl4sec03"/>Cells</h4>
              </div>
            </div>
          </div>

          <p class="calibre9">Each <code class="email">UICollectionView</code> class <a class="calibre1" id="id201"/>will contain <code class="email">UICollectionViewCells</code>.</p>

          <p class="calibre9">These cells have a main <a class="calibre1" id="id202"/>Content <a class="calibre1" id="id203"/>View (where you see something, be it a picture or the data derived within the app), and surrounding the Content View is one of the two background views: normal or selected. If the content part is not smaller than the background, the background won't be seen.</p>
        </div>

        <div><div><div><div><h4 class="title3"><a class="calibre1" id="ch03lvl4sec04"/>Supplementary Views</h4>
              </div>
            </div>
          </div>

          <p class="calibre9">These are views that present <a class="calibre1" id="id204"/>information linked to each section of <code class="email">UICollectionView</code>. They are data driven. Where the cells are from a data source, the Supplementary View presents that section's data (for example, the main view could be the <a class="calibre1" id="id205"/>front covers of books, the Supplementary View could be the table of contents).</p>
        </div>

        <div><div><div><div><h4 class="title3"><a class="calibre1" id="ch03lvl4sec05"/>Decoration View</h4>
              </div>
            </div>
          </div>

          <p class="calibre9">These are not data generated <a class="calibre1" id="id206"/>and are there purely for aesthetic purposes.</p>
        </div>

        <div><div><div><div><h4 class="title3"><a class="calibre1" id="ch03lvl4sec06"/>Data source</h4>
              </div>
            </div>
          </div>

          <p class="calibre9">The <code class="email">UICollectionView</code> class gets its <a class="calibre1" id="id207"/>data via the <code class="email">UICollectionViewDataSource</code> class. This class provides information, such as the cells (from <code class="email">GetCell</code>), supplementary views (from <code class="email">GetViewForSupplementaryElement</code>), number of sections (from <code class="email">NumberOfSections</code> or 1 if not implemented), and the number of items per section (from <code class="email">GetItemsCount</code>).</p>
        </div>

        <div><div><div><div><h4 class="title3"><a class="calibre1" id="ch03lvl4sec07"/>Cell Reuse</h4>
              </div>
            </div>
          </div>

          <p class="calibre9">The <code class="email">UICollectionView</code> class will <a class="calibre1" id="id208"/>only call the data source to get cells for items that are on the screen. Items that are not on the screen are placed in a queue to be reused.</p>
        </div>
      </div>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec11"/>UIWebView</h3>
            </div>
          </div>
        </div>

        <p class="calibre9">The <code class="email">UIWebView</code> class effectively <a class="calibre1" id="id209"/>transforms your device into a web browser with JavaScript capabilities as well as the usual web facilities, such as move back, forward, and typing a URL in the text field when extended with <code class="email">UITextField</code>.</p>

        <p class="calibre9">To load a web page is simple enough, as shown in the following code:</p>

        <div><pre class="programlisting">var web = new UIWebView();
NSUrl url = new NSUrl("http://www.bbc.co.uk");
web.LoadRequest(new NSUrlRequest(url));</pre>
        </div>

        <p class="calibre9">There are a number of factors to remember with web page loading. The first factor is that it is typically an asynchronous task; in other words, some parts are completed before others and it is quite possible that the application flow will return to the main thread before the task is completed. The second factor is the speed. I'll not concern myself with the second factor for now.</p>

        <div><ul class="itemizedlist">
            <li class="listitem">To overcome the problem caused by asynchronous tasks, there are a number of events that can be used:

              <div><ul class="itemizedlist3">
                  <li class="listitem"><code class="email">LoadStarted</code></li>

                  <li class="listitem"><code class="email">LoadFinished</code></li>

                  <li class="listitem"><code class="email">LoadError</code></li>

                  <li class="listitem">The boolean <code class="email">IsLoading</code>

                    <p class="calibre9">The <code class="email">IsLoading</code> boolean is a flag that can be checked at any point to determine if something is loading (true) or has completed loading (false).</p>

                    <p class="calibre9">For example:</p>

                    <div><pre class="programlisting">web.LoadStarted += delegate {
  // start ActivityIndicator here, stops anything else happening
};
web.LoadFinished += delegate {
  // stop ActivityIndicator
};
web.LoadError += delegate {
  UIAlertView error message
};</pre>
                    </div>
                  </li>
                </ul>
              </div>
            </li>

            <li class="listitem">To move back and forward, the following methods can be used:

              <div><ul class="itemizedlist3">
                  <li class="listitem"><code class="email">web.GoBack()</code></li>

                  <li class="listitem"><code class="email">web.GoForward()</code></li>
                </ul>
              </div>

              <p class="calibre29">These methods have a simple boolean test</p>

              <div><ul class="itemizedlist3">
                  <li class="listitem"><code class="email">web.CanGoBack</code></li>

                  <li class="listitem"><code class="email">web.CanGoForward</code></li>
                </ul>
              </div>
            </li>

            <li class="listitem">For refreshing a webpage, the following method can be used:

              <div><pre class="programlisting">web.Reload();</pre>
              </div>
            </li>

            <li class="listitem">It is also possible to include <a class="calibre1" id="id210"/>zoom support and fitting the page

              <div><pre class="programlisting">web.ScalesPageToFit = true;</pre>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec12"/>MapView</h3>
            </div>
          </div>
        </div><img alt="Note" class="calibre10" src="img/00001.gif"/>

        <div><h3 class="title2"><a class="calibre1" id="note03"/>Note</h3>

          <p class="calibre9">These are the iOS maps, not <a class="calibre1" id="id211"/>Google Maps (Apple moved from using Google to their own maps with iOS 6).</p>
        </div><img alt="Note" class="calibre10" src="img/00001.gif"/><br class="book"/>

        <p class="calibre9">Maps under iOS require the use of <code class="email">CoreLocations</code> and <code class="email">MapKit</code>. Mapping and location services are dealt with later in <a class="calibre1" href="../Text/part0055.html#page" title="Chapter 12. Peripherals">Chapter 12</a>, <em class="calibre15">Peripherals</em>.</p>
      </div>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec13"/>UIScrollView</h3>
            </div>
          </div>
        </div>

        <p class="calibre9">There are times when too much <a class="calibre1" id="id212"/>information will be displayed on screen (for example, if you are dynamically generating content or creating some form of a drawing application). In such cases, <code class="email">UIScrollView</code> can be used to ensure that the user can see everything.</p>

        <p class="calibre9">The view (when combined with <code class="email">PageEnabled = true;</code>) works by calculating the size of the page.</p>

        <p class="calibre9">Assuming that the Scroll View has been created in Xcode (and is called <code class="email">scrollView</code>), the code will be as follows:</p>

        <div><pre class="programlisting">private List&lt;UIView&gt; viewPages = new List&lt;UIView&gt;();
private int numPages = 4;
private float pad = 10, height =400, width = 300;
public override void ViewDidLoad()
{
     scrollView.Frame = View.Frame;
     scrollView.PagingEnabled = true;
     scrollview.ContentSize = new SizeF(numPages * width + pad +
       2 * pad * (numPages – 1), View.Frame.Height);</pre>
        </div>

        <p class="calibre9">We now have an effective page system. The problem is tracing which page the user is on. This is handled with <code class="email">UIPageControl</code>. In the previous example, tracking would be performed as follows:</p>

        <div><pre class="programlisting">private UIPageControl pageNumber;</pre>
        </div>

        <p class="calibre9">In the <code class="email">ViewDidLoad()</code> <a class="calibre1" id="id213"/>method, <a class="calibre1" id="id214"/>tracking would be performed as follows:</p>

        <div><pre class="programlisting">scrollView.Scrolled += delegate {
    pageNumber.CurrentPage = (int)Math.Round(scrollView.X / width);
};</pre>
        </div>
      </div>

      <div><div><div><div><h3 class="title2"><a class="calibre1" id="ch03lvl3sec14"/>AdBannerView</h3>
            </div>
          </div>
        </div>

        <p class="calibre9">You have seen these on many <a class="calibre1" id="id215"/>different apps. These are the bars at the top that advertise anything, from cars to fast food, and normally are targeted on the app type (for example, if you design an application that gives statistics on a car performance, the ad banner will typically get adverts for car magazines, car games, and so on). It is simply a way of generating income for the application developer. Advert support is a part of the <code class="email">AdSupport</code> namespace.</p>

        <p class="calibre9">The simple way to consider these views is as a form of web view with a number of key events:</p>

        <div><ul class="itemizedlist">
            <li class="listitem"><code class="email">AdLoaded</code>: until the ad is <a class="calibre1" id="id216"/>loaded, the view isn't shown. This makes the experience less obtrusive for the user.</li>

            <li class="listitem"><code class="email">FailedToReceive</code>: the <a class="calibre1" id="id217"/>advert failed to download.</li>
          </ul>
        </div>
      </div>
    </div>

    <div><div><div><div><h2 class="title1"><a class="calibre1" id="ch03lvl2sec21"/>Implementing a view with multiple View Controllers</h2>
          </div>
        </div>
      </div>

      <p class="calibre9">It is simple enough to <a class="calibre1" id="id218"/>implement a view with more than one <a class="calibre1" id="id219"/>View Controller. Say we have two views. One occupies the top 130 pixels of the screen; the other is 250 pixels in height. It is added by adding the second view as a subview to the first.</p>

      <div><pre class="programlisting">secondView v2 = new secondView();
v2.Frame = new RectangleF(new PointF(0, 130), newSizeF(320, 250));
View.AddSubview(v2);</pre>
      </div>

      <p class="calibre9">The events from both the View Controllers will still work as they do normally (so say the second view is a web view and the first has some buttons, the buttons will still respond to the the Touch events and the web view will still respond to the Web events).</p>

      <p class="calibre9">The issue, though, comes when view 1 (the parent) wants to act on the events of view 2. This too is not that difficult to do. In fact, when dealing with the <code class="email">MT.D</code> class in <a class="calibre1" href="../Text/part0019.html#page" title="Chapter 2. The User Interface">Chapter 2</a>, <em class="calibre15">The User Interface</em>, the <code class="email">SubView</code> event was acted on in the parent by overriding the <code class="email">Selected</code> event with adelegate in another class (as demonstrated in the following code examples).</p>

      <div><pre class="programlisting">public class PickerChangedEventArgs : EventArgs
{
    public string SelectedValue { get; set; }
}</pre>
      </div>

      <p class="calibre9">And within the class handling <code class="email">UIPickerViewModel</code>, the <code class="email">Selected</code> method has to be overridden to support <code class="email">PickerChangedEventArgs</code> as shown in the following code:</p>

      <div><pre class="programlisting">public override void Selected(UIPickerView picker, int row,int component)
{
    if (PickerChanged != null)
    {
        PickerChanged(this, new PickerChangedEventArgs {
            SelectedValue = myValues[row] });
    }
}</pre>
      </div>

      <p class="calibre9">Finally within the main <a class="calibre1" id="id220"/>app, code <a class="calibre1" id="id221"/>that calls the class <code class="email">UIPickerView</code> needs to fire on the new event.</p>

      <div><pre class="programlisting">myPickerViewModel.PickerChanged += (object sender,PickerChangedEventArgs e) =&gt; 
{
    myElement.Value = e.SelectedValue;
};</pre>
      </div>
    </div>
  </div>


  <div><div><div><div><h1 class="title"><a class="calibre1" id="ch03lvl1sec18"/>Summary</h1>
        </div>
      </div>
    </div>

    <p class="calibre9">It is a little wonder that the iPhone is such an adaptable device for displaying various forms of data with all of these Views and View types available, despite its complexity; it is actually a simple enough system to code for.</p>

    <p class="calibre9">In the next chapter, we will delve deeper into controllers.</p>
  </div>
</body></html>