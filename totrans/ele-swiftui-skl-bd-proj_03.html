<html><head></head><body>
<div id="_idContainer073">
<h1 class="chapter-number" id="_idParaDest-47"><a id="_idTextAnchor272"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-48"><a id="_idTextAnchor273"/><span class="koboSpan" id="kobo.2.1">iPhone Project – Tax Calculator Functionality</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In this chapter, we will work on implementing the tax calculation and page navigation functionality in our first project, the tax calculator. </span><span class="koboSpan" id="kobo.3.2">In the previous chapter, we looked at the design of the calculator and broke it down into two views and all the components required. </span><span class="koboSpan" id="kobo.3.3">We then implemented all the components using SwiftUI. </span><span class="koboSpan" id="kobo.3.4">At the end of the previous chapter, we effectively only had a fancy wireframe. </span><span class="koboSpan" id="kobo.3.5">Now, we will implement all the functionality to provide navigation between the two views, calculating the tax breakdown and displaying </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">the calculation.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">This chapter will be split into the </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">following sections:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.7.1">Navigating from </span><strong class="source-inline"><span class="koboSpan" id="kobo.8.1">ContentView</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.9.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.10.1">ResultsView</span></strong></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.11.1">Input validation</span></span></li>
<li><span class="koboSpan" id="kobo.12.1">Calculating </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">tax breakdown</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.14.1">Extra tasks</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.15.1">By the end of this chapter, you will have created a fully functional tax calculator that can be used as a foundation. </span><span class="koboSpan" id="kobo.15.2">I’ll provide exercises as we reach the end of the chapter to implement more advanced functionality within the tax calculator. </span><span class="koboSpan" id="kobo.15.3">The code is yours to use, modify, and distribute as you see fit. </span><span class="koboSpan" id="kobo.15.4">This will transition nicely into our next project, the iPad </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">gallery app.</span></span></p>
<h1 id="_idParaDest-49"><a id="_idTextAnchor274"/><span class="koboSpan" id="kobo.17.1">Technical Requirements</span></h1>
<p><span class="koboSpan" id="kobo.18.1">This chapter requires you to download Xcode version 14 or above from Apple’s </span><span class="No-Break"><span class="koboSpan" id="kobo.19.1">App Store.</span></span></p>
<p><span class="koboSpan" id="kobo.20.1">To install Xcode, just search for </span><strong class="source-inline"><span class="koboSpan" id="kobo.21.1">Xcode</span></strong><span class="koboSpan" id="kobo.22.1"> in the App Store, and select and download the latest version. </span><span class="koboSpan" id="kobo.22.2">Open Xcode and follow any additional installation instructions. </span><span class="koboSpan" id="kobo.22.3">Once Xcode has opened and launched, you’re ready </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">to go.</span></span></p>
<p><span class="koboSpan" id="kobo.24.1">Version 14 of Xcode has the </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">following features/requirements:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.26.1">Includes SDKs for iOS 16, iPadOS 16, macOS 12.3, tvOS 16, and </span><span class="No-Break"><span class="koboSpan" id="kobo.27.1">watchOS 9</span></span></li>
<li><span class="koboSpan" id="kobo.28.1">Supports on-device debugging in iOS 11 or later, tvOS 11 or later, and watchOS 4 </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">or later</span></span></li>
<li><span class="koboSpan" id="kobo.30.1">Requires a Mac running macOS Monterey 12.5 </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">or later</span></span></li>
<li><span class="koboSpan" id="kobo.32.1">For further information regarding the technical details, please refer to </span><a href="B18783_01.xhtml#_idTextAnchor014"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.33.1">Chapter 1</span></em></span></a><span class="No-Break"><span class="koboSpan" id="kobo.34.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.35.1">The code files for this chapter and the previous chapter to use as a base can be found </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">here: </span></span><a href="https://github.com/PacktPublishing/Elevate-SwiftUI-Skills-by-Building-Projects"><span class="No-Break"><span class="koboSpan" id="kobo.37.1">https://github.com/PacktPublishing/Elevate-SwiftUI-Skills-by-Building-Projects</span></span></a></p>
<h1 id="_idParaDest-50"><a id="_idTextAnchor275"/><span class="koboSpan" id="kobo.38.1">Navigating from ContentView to ResultsView</span></h1>
<p><span class="koboSpan" id="kobo.39.1">In </span><a id="_idIndexMarker160"/><span class="koboSpan" id="kobo.40.1">this section, we will finally implement the navigational system for moving from </span><strong class="source-inline"><span class="koboSpan" id="kobo.41.1">ContentView</span></strong><span class="koboSpan" id="kobo.42.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.43.1">ResultsView</span></strong><span class="koboSpan" id="kobo.44.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">back again.</span></span></p>
<p><span class="koboSpan" id="kobo.46.1">If you recall back to the previous chapter, when viewing the UI for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.47.1">ResultsView</span></strong><span class="koboSpan" id="kobo.48.1">, we were forced to use the Live Preview Window instead of running the application. </span><span class="koboSpan" id="kobo.48.2">The reason was that there was no functionality for navigating from </span><strong class="source-inline"><span class="koboSpan" id="kobo.49.1">ContentView</span></strong><span class="koboSpan" id="kobo.50.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.51.1">ResultsView</span></strong><span class="koboSpan" id="kobo.52.1">. </span><span class="koboSpan" id="kobo.52.2">We have already added the button for calculating the tax, but we need to implement the code for the button triggering </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">the navigation.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">First, we need to wrap our </span><strong class="source-inline"><span class="koboSpan" id="kobo.55.1">VStack</span></strong><span class="koboSpan" id="kobo.56.1"> in </span><strong class="source-inline"><span class="koboSpan" id="kobo.57.1">ContentView</span></strong><span class="koboSpan" id="kobo.58.1"> in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">NavigationView</span></strong><span class="koboSpan" id="kobo.60.1">. </span><span class="koboSpan" id="kobo.60.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">NavigationView</span></strong><span class="koboSpan" id="kobo.62.1"> allows us to present a stack of views which is very useful for navigation, as it effectively has a history of all previous views, allowing an easy and extendable </span><span class="No-Break"><span class="koboSpan" id="kobo.63.1">navigation system:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.64.1">
import SwiftUIstruct ContentView: View
{
    @State private var salary: String = ""
    var body: some View
    {
        NavigationView
        {
            VStack
            {
                Text( "Annual Salary" )
                    .padding(.bottom, 75.0)
                TextField( "", text: $salary )
                    .frame( width: 200.0 )
                    .border( Color.black, width: 1 )
                    .padding( .bottom, 75.0 )
                    .keyboardType( .decimalPad )
                Button
                { }
                label:
                { Text( "Calculate Tax" ) }
                    .buttonStyle( .borderedProminent )
            }
            .padding( )
        }
    }
    func GoToResultsView( )
    {
        ResultsView( )
    }
}
struct ContentView_Previews: PreviewProvider
{
    static var previews: some View
    {
        ContentView( )
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.65.1">We </span><a id="_idIndexMarker161"/><span class="koboSpan" id="kobo.66.1">have now implemented </span><strong class="source-inline"><span class="koboSpan" id="kobo.67.1">NavigationView</span></strong><span class="koboSpan" id="kobo.68.1">, which allows us to use our existing code and design for navigation. </span><span class="koboSpan" id="kobo.68.2">There is one extra piece of code we require – a </span><strong class="source-inline"><span class="koboSpan" id="kobo.69.1">GoToResultsView</span></strong><span class="koboSpan" id="kobo.70.1"> function. </span><span class="koboSpan" id="kobo.70.2">An empty version has been added to the preceding code. </span><span class="koboSpan" id="kobo.70.3">We will use it later in </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.72.1">As of now, this won’t have any effect on our application, as we need to modify the button to become a </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">NavigationLink</span></strong><span class="koboSpan" id="kobo.74.1">, which is basically a fancy button allowing us to navigate between views. </span><span class="koboSpan" id="kobo.74.2">Fortunately for us, it can be styled in any way we desire, but first let’s implement a basic </span><strong class="source-inline"><span class="koboSpan" id="kobo.75.1">NavigationLink</span></strong><span class="koboSpan" id="kobo.76.1">. </span><span class="koboSpan" id="kobo.76.2">To do this, replace the button code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.77.1">ContentView</span></strong><span class="koboSpan" id="kobo.78.1"> with the </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.80.1">
NavigationLink( destination: ResultsView( ), label:{
    Text( "Calculate Tax" )
} )</span></pre>
<p><span class="koboSpan" id="kobo.81.1">Let’s </span><a id="_idIndexMarker162"/><span class="koboSpan" id="kobo.82.1">break down the code we just added. </span><span class="koboSpan" id="kobo.82.2">The first parameter it takes is the destination for the application’s view system, so the new view that will be pushed onto the stack. </span><span class="koboSpan" id="kobo.82.3">We have specified </span><strong class="source-inline"><span class="koboSpan" id="kobo.83.1">ResultsView</span></strong><span class="koboSpan" id="kobo.84.1"> but you could easily specify a simple component, which would create its own view. </span><span class="koboSpan" id="kobo.84.2">The next parameter is called </span><strong class="source-inline"><span class="koboSpan" id="kobo.85.1">label</span></strong><span class="koboSpan" id="kobo.86.1">; this is similar to the label specified in the button itself. </span><span class="koboSpan" id="kobo.86.2">Currently, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.87.1">Text</span></strong><span class="koboSpan" id="kobo.88.1"> component, which looks </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">like this:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer063">
<span class="koboSpan" id="kobo.90.1"><img alt="Figure 3.1 – Basic NavigationLink button" src="image/Figure_3.01_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.91.1">Figure 3.1 – Basic NavigationLink button</span></p>
<p><span class="koboSpan" id="kobo.92.1">Let’s style the </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">NavigationLink</span></strong><span class="koboSpan" id="kobo.94.1"> button and modify the code to look </span><span class="No-Break"><span class="koboSpan" id="kobo.95.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.96.1">
NavigationLink( destination: ResultsView( ), label:{
    Text( "Calculate Tax" )
        .bold( )
        .frame( width: 200, height: 50 )
        .background( Color.blue )
        .foregroundColor( Color.white )
        .cornerRadius( 10 )
} )</span></pre>
<p><span class="koboSpan" id="kobo.97.1">We </span><a id="_idIndexMarker163"/><span class="koboSpan" id="kobo.98.1">have added five main style aspects to the button. </span><span class="koboSpan" id="kobo.98.2">Let’s take a look at </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">each one:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">.bold( )</span></strong><span class="koboSpan" id="kobo.101.1">: Makes the </span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">text bold</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">.frame( width: 200, height: 50 )</span></strong><span class="koboSpan" id="kobo.104.1">: Sets the size of </span><span class="No-Break"><span class="koboSpan" id="kobo.105.1">the button</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.106.1">.background( Color.blue )</span></strong><span class="koboSpan" id="kobo.107.1">: Sets the background color </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">to blue</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.109.1">.foregroundColor( Color.white )</span></strong><span class="koboSpan" id="kobo.110.1">: Sets the text color </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">to white</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">.cornerRadius( 10 )</span></strong><span class="koboSpan" id="kobo.113.1">: Makes the button’s corners rounded, giving a more natural, </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">iOS-like feel</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.115.1">After these styles have been applied to the application and, more specifically, the button, it will look like the </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">following figure:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer064">
<span class="koboSpan" id="kobo.117.1"><img alt="Figure 3.2 – NavigationLink button styled" src="image/Figure_3.02_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.118.1">Figure 3.2 – NavigationLink button styled</span></p>
<p><span class="koboSpan" id="kobo.119.1">We </span><a id="_idIndexMarker164"/><span class="koboSpan" id="kobo.120.1">will now add a navigation title. </span><span class="koboSpan" id="kobo.120.2">This provides a nice consistent method for adding a title/header to the view. </span><span class="koboSpan" id="kobo.120.3">This is simple – add the following code to the bottom of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.121.1">VStack</span></strong><span class="koboSpan" id="kobo.122.1">, just after </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">the padding:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.124.1">
.padding( ).navigationTitle( "Main Page" )</span></pre>
<p><span class="koboSpan" id="kobo.125.1">Running the application will show </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">the following:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer065">
<span class="koboSpan" id="kobo.127.1"><img alt="Figure 3.3 – Navigation title" src="image/Figure_3.03_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.128.1">Figure 3.3 – Navigation title</span></p>
<p><span class="koboSpan" id="kobo.129.1">Navigating to </span><strong class="source-inline"><span class="koboSpan" id="kobo.130.1">ResultsView</span></strong><span class="koboSpan" id="kobo.131.1"> by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.132.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.133.1"> button will show that the back button’s text in the top left is now the same as the navigation title that was added. </span><span class="koboSpan" id="kobo.133.2">This can be seen in the </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer066">
<span class="koboSpan" id="kobo.135.1"><img alt="Figure 3.4 – Updated back button text" src="image/Figure_3.04_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.136.1">Figure 3.4 – Updated back button text</span></p>
<p><span class="koboSpan" id="kobo.137.1">Let’s </span><a id="_idIndexMarker165"/><span class="koboSpan" id="kobo.138.1">now update </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">ResultsView</span></strong><span class="koboSpan" id="kobo.140.1"> to use a navigation title instead of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.141.1">Text</span></strong><span class="koboSpan" id="kobo.142.1"> component for the heading of the page. </span><span class="koboSpan" id="kobo.142.2">First, we need to remove the </span><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">Text</span></strong><span class="koboSpan" id="kobo.144.1"> component with the following code </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">from </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.146.1">ResultsView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.147.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.148.1">
Text( "Summary" )    .font( .system( size: 36 ) )
    .fontWeight( .bold )</span></pre>
<p><span class="koboSpan" id="kobo.149.1">Now that </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">ResultsView</span></strong><span class="koboSpan" id="kobo.151.1"> has no title, let’s add the navigation link. </span><span class="koboSpan" id="kobo.151.2">Like before, add the following code after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">VStack</span></strong><span class="koboSpan" id="kobo.153.1">, right after </span><span class="No-Break"><span class="koboSpan" id="kobo.154.1">the padding:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.155.1">
.padding( ).navigationBarTitle( "Summary" )</span></pre>
<p><span class="koboSpan" id="kobo.156.1">This little addition will change </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">ResultsView</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.158.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer067">
<span class="koboSpan" id="kobo.159.1"><img alt="Figure 3.5 – ResultsView navigation title" src="image/Figure_3.05_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.160.1">Figure 3.5 – ResultsView navigation title</span></p>
<p><span class="koboSpan" id="kobo.161.1">So, we</span><a id="_idIndexMarker166"/><span class="koboSpan" id="kobo.162.1"> have added a fair bit of code. </span><span class="koboSpan" id="kobo.162.2">This is what the </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1">ContentView</span></strong><span class="koboSpan" id="kobo.164.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">ResultsView</span></strong><span class="koboSpan" id="kobo.166.1"> code should look like before we </span><span class="No-Break"><span class="koboSpan" id="kobo.167.1">move on</span><a id="_idTextAnchor276"/><span class="koboSpan" id="kobo.168.1">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.169.1">ContentView</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.170.1">
import SwiftUIstruct ContentView: View
{
    @State private var salary: String = ""
    var body: some View
    {
        NavigationView
        {
            VStack
            {
                Text( "Annual Salary" )
                    .padding(.bottom, 75.0)
                TextField( "", text: $salary )
                    .frame( width: 200.0 )
                    .border( Color.black, width: 1 )
                    .padding( .bottom, 75.0 )
                    .keyboardType( .decimalPad )
                NavigationLink( destination: ResultsView( ), label:
                {
                    Text( "Calculate Tax" )
                        .bold( )
                        .frame( width: 200, height: 50 )
                        .background( Color.blue )
                        .foregroundColor( Color.white )
                        .cornerRadius( 10 )
                } )
            }
            .padding( )
            .navigationTitle( "Main Page" )
        }
    }
}
struct ContentView_Previews: PreviewProvider
{
    static var previews: some View
    {
        ContentView( )
    }
</span><a id="_idTextAnchor277"/><span class="koboSpan" id="kobo.171.1">}</span></pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.172.1">ResultsView</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.173.1">
import SwiftUIimport SwiftUICharts
struct ResultsView: View
{
    var taxBreakdown: [Double] = [5, 10, 15]
    var body: some View
    {
        VStack
        {
            PieChart( )
                .data( taxBreakdown )
                .chartStyle( ChartStyle( backgroundColor: .white,
                                         foregroundColor: ColorGradient( .blue, .purple ) ) )
            Text( "Before Tax" )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Text( "£100,000.00" )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Text( "After Tax" )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Text( "£65,000.00" )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Group
            {
                Text( "Post Tax Salary" )
                ProgressView( "", value: 20, total: 100 )
                Text( "Tax" )
                ProgressView( "", value: 20, total: 100 )
                Text( "National Insurance" )
                ProgressView( "", value: 20, total: 100 )
            }
        }
        .padding( )
        .navigationBarTitle( "Summary" )
    }
}
struct ResultsView_Previews: PreviewProvider
{
    static var previews: some View
    {
        ResultsView( )
    }
</span><a id="_idTextAnchor278"/><span class="koboSpan" id="kobo.174.1">}</span><a id="_idTextAnchor279"/></pre>
<p><span class="koboSpan" id="kobo.175.1">Wow, we </span><a id="_idIndexMarker167"/><span class="koboSpan" id="kobo.176.1">have done a lot. </span><span class="koboSpan" id="kobo.176.2">Take the time to pat yourself on the back. </span><span class="koboSpan" id="kobo.176.3">All this allowed us to implement a seamless yet familiar navigation system. </span><span class="koboSpan" id="kobo.176.4">We learned how to implement a navigation system to navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">ResultsView</span></strong><span class="koboSpan" id="kobo.178.1"> and back to </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">ContentView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.180.1"> easil</span><a id="_idTextAnchor280"/><span class="koboSpan" id="kobo.181.1">y.</span></span></p>
<p><span class="koboSpan" id="kobo.182.1">In the next section, we will validate the salary to make sure we do not pass through any data that </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">is incorrect.</span></span></p>
<h1 id="_idParaDest-51"><a id="_idTextAnchor281"/><span class="koboSpan" id="kobo.184.1">Validating salary input</span></h1>
<p><span class="koboSpan" id="kobo.185.1">As of now, if you</span><a id="_idIndexMarker168"/><span class="koboSpan" id="kobo.186.1"> press the </span><strong class="bold"><span class="koboSpan" id="kobo.187.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.188.1"> button, it takes the user to the results page from the front page. </span><span class="koboSpan" id="kobo.188.2">However, it does this regardless of input, so it will go to the next page even if there is no salary. </span><span class="koboSpan" id="kobo.188.3">The following validation checks must be done for it to be an </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">acceptable value:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.190.1">Does it contain a value that is </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">a number?</span></span></li>
<li><span class="koboSpan" id="kobo.192.1">Is the value above 0 (this rules </span><span class="No-Break"><span class="koboSpan" id="kobo.193.1">out negatives)?</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.194.1">You might be wondering why we can’t just check whether the salary is above 0 as we have chosen a decimal keypad. </span><span class="koboSpan" id="kobo.194.2">There are two main reasons </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">for this:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.196.1">The user can insert </span><a id="_idIndexMarker169"/><span class="koboSpan" id="kobo.197.1">decimal points in a way that makes the input </span><strong class="bold"><span class="koboSpan" id="kobo.198.1">Not a Number</span></strong><span class="koboSpan" id="kobo.199.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.200.1">NaN</span></strong><span class="koboSpan" id="kobo.201.1">) – for </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">example, </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.203.1">4.5.6..</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">.</span></span></li>
<li><span class="koboSpan" id="kobo.205.1">Even though the user cannot directly type text due to the keyboard being a decimal pad, they can still copy it from another application and paste it into our calculator, thus breaking the number-only </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">TextField</span></strong><span class="koboSpan" id="kobo.207.1">. </span><span class="koboSpan" id="kobo.207.2">You may think it’s worth just disabling pasting but it’s important to retain this functionality, as the user may legitimately want to paste a number instead of typing it out, especially if it isn’t a simple </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">small number.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.209.1">If not correctly handled, the application will crash upon the user pressing the </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.211.1"> button. </span><span class="koboSpan" id="kobo.211.2">The way we will achieve these conditions is explained in the </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">following secti</span><a id="_idTextAnchor282"/><span class="koboSpan" id="kobo.213.1">ons.</span></span></p>
<h2 id="_idParaDest-52"><a id="_idTextAnchor283"/><span class="koboSpan" id="kobo.214.1">Using a variable to track if the salary is valid</span></h2>
<p><span class="koboSpan" id="kobo.215.1">We will </span><a id="_idIndexMarker170"/><span class="koboSpan" id="kobo.216.1">add a Boolean variable after the salary string to track whether the salary is valid; if it is, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">ResultsView</span></strong><span class="koboSpan" id="kobo.218.1"> will be displayed. </span><span class="koboSpan" id="kobo.218.2">The salary string is only checked when the </span><strong class="bold"><span class="koboSpan" id="kobo.219.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.220.1"> button is pressed. </span><span class="koboSpan" id="kobo.220.2">Add the following code before </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1">the body:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.222.1">
@State private var isSalaryValid: Bool = </span><a id="_idTextAnchor284"/><span class="koboSpan" id="kobo.223.1">false</span></pre> <h2 id="_idParaDest-53"><a id="_idTextAnchor285"/><span class="koboSpan" id="kobo.224.1">isActive NavigationLink</span></h2>
<p><span class="koboSpan" id="kobo.225.1">Now we will </span><a id="_idIndexMarker171"/><span class="koboSpan" id="kobo.226.1">link the </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">isSalaryValid</span></strong><span class="koboSpan" id="kobo.228.1"> variable created previously with </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">NavigationLink</span></strong><span class="koboSpan" id="kobo.230.1"> using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">isActive</span></strong><span class="koboSpan" id="kobo.232.1"> parameter. </span><span class="koboSpan" id="kobo.232.2">Update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">NavigationLink</span></strong><span class="koboSpan" id="kobo.234.1"> code to look like </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.236.1">
NavigationLink( destination: ResultsView( ), isActive: $isSalaryValid, label:</span></pre> <p><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">isActive</span></strong><span class="koboSpan" id="kobo.238.1"> is a simple concept – if </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">true</span></strong><span class="koboSpan" id="kobo.240.1">, it immediately takes you to the destination view, and if it is </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">false</span></strong><span class="koboSpan" id="kobo.242.1">, then </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">nothing happens.</span></span></p>
<p><span class="koboSpan" id="kobo.244.1">In the following section, we will validate </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">the s</span><a id="_idTextAnchor286"/><span class="koboSpan" id="kobo.246.1">alary.</span></span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor287"/><span class="koboSpan" id="kobo.247.1">Validating the salary</span></h2>
<p><span class="koboSpan" id="kobo.248.1">Firstly, we </span><a id="_idIndexMarker172"/><span class="koboSpan" id="kobo.249.1">will override the tap gesture and call a custom function called </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">GoToResultsView</span></strong><span class="koboSpan" id="kobo.251.1">. </span><span class="koboSpan" id="kobo.251.2">Add the following code to the end of all </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">text </span></span><span class="No-Break"><a id="_idIndexMarker173"/></span><span class="No-Break"><span class="koboSpan" id="kobo.253.1">properties:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.254.1">
.onTapGesture{
    GoToResultsView( )
}</span></pre>
<p><span class="koboSpan" id="kobo.255.1">Finally, we must check whether the string is valid, then navigate to the results view. </span><span class="koboSpan" id="kobo.255.2">Add the following function to </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">handle this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.257.1">
func GoToResultsView( ){
    if ( Float( salary ) != nil )
    {
        if ( Float( salary )! </span><span class="koboSpan" id="kobo.257.2">&gt; 0 )
        { isSalaryValid = true }
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.258.1">Let’s unpack this function to see what </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">it does:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">if ( Float( salary ) != nil )</span></strong><span class="koboSpan" id="kobo.261.1">: Checks whether the salary is a number. </span><span class="koboSpan" id="kobo.261.2">This is accomplished by casting the string to a </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">Float</span></strong><span class="koboSpan" id="kobo.263.1">. </span><span class="koboSpan" id="kobo.263.2">If unsuccessful, it is </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">nil</span></strong><span class="koboSpan" id="kobo.265.1"> – this allows us to check for this. </span><span class="koboSpan" id="kobo.265.2">This also includes validating an </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">empty string.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.267.1">if ( Float( salary )! </span><span class="koboSpan" id="kobo.267.2">&gt; 0 )</span></strong><span class="koboSpan" id="kobo.268.1">: Checks whether the salary is greater than zero. </span><span class="koboSpan" id="kobo.268.2">The exclamation mark says that the variable salary is definitely a </span><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">Float</span></strong><span class="koboSpan" id="kobo.270.1"> to avoid any problems, as it’s already been checked we can </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">do this.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.272.1">isSalaryValid = true</span></strong><span class="koboSpan" id="kobo.273.1">: Sets the </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">isSalaryValid</span></strong><span class="koboSpan" id="kobo.275.1"> check variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">true</span></strong><span class="koboSpan" id="kobo.277.1">, which triggers </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">ResultsView</span></strong><span class="koboSpan" id="kobo.279.1"> and loads </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">it up.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.281.1">All of these </span><a id="_idIndexMarker174"/><span class="koboSpan" id="kobo.282.1">additions should result in the following</span><a id="_idIndexMarker175"/><span class="koboSpan" id="kobo.283.1"> code in the following </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.284.1">ContentView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.285.1"> file:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.286.1">
import SwiftUIstruct ContentView: View
{
    @State private var salary: String = ""
    @State private var isSalaryValid: Bool = false
    var body: some View
    {
        NavigationView
        {
            VStack
            {
                Text( "Annual Salary" )
                    .padding(.bottom, 75.0)
                TextField( "", text: $salary )
                    .frame( width: 200.0 )
                    .border( Color.black, width: 1 )
                    .padding( .bottom, 75.0 )
                    .keyboardType( .decimalPad )
                NavigationLink( destination: ResultsView( ), isActive: $isSalaryValid, label:
                {
                    Text( "Calculate Tax" )
                        .bold( )
                        .frame( width: 200, height: 50 )
                        .background( Color.blue )
                        .foregroundColor( Color.white )
                        .cornerRadius( 10 )
                        .onTapGesture
                        {
                            GoToResultsView( )
                        }
                } )
            }
            .padding( )
            .navigationTitle( "Main Page" )
        }
    }
    func GoToResultsView( )
    {
        if ( Float( salary ) != nil )
        {
            if ( Float( salary )! </span><span class="koboSpan" id="kobo.286.2">&gt; 0 )
            { isSalaryValid = true }
        }
    }
}
struct ContentView_Previews: PreviewProvider
{
    static var previews: some View
    {
        ContentView( )
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.287.1">With the </span><a id="_idIndexMarker176"/><span class="koboSpan" id="kobo.288.1">preceding code, we validated the</span><a id="_idIndexMarker177"/><span class="koboSpan" id="kobo.289.1"> salary, and a variable was used to track the status of the validation, which allowed us to navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.290.1">ResultsView</span></strong><span class="koboSpan" id="kobo.291.1"> when it </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">was validated.</span></span></p>
<p><span class="koboSpan" id="kobo.293.1">In the next section, we will pass the salary between </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">ContentView</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.295.1">and </span><a id="_idTextAnchor288"/></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.296.1">ResultsView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">.</span></span></p>
<h2 id="_idParaDest-55"><a id="_idTextAnchor289"/><span class="koboSpan" id="kobo.298.1">Passing the salary through to ResultsView</span></h2>
<p><span class="koboSpan" id="kobo.299.1">As of </span><a id="_idIndexMarker178"/><span class="koboSpan" id="kobo.300.1">now, when we click </span><strong class="bold"><span class="koboSpan" id="kobo.301.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.302.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">ResultsView</span></strong><span class="koboSpan" id="kobo.304.1"> is still using dummy data. </span><span class="koboSpan" id="kobo.304.2">Let’s change that by passing in the salary we validated in the previous section. </span><span class="koboSpan" id="kobo.304.3">Doing this is simple when using State and Bind. </span><span class="koboSpan" id="kobo.304.4">The salary variable in </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1">ContentView</span></strong><span class="koboSpan" id="kobo.306.1"> is already a state variable, simply meaning when it changes, the part of the view linked to it also changes and vice versa. </span><span class="koboSpan" id="kobo.306.2">When we change the text in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">TextField</span></strong><span class="koboSpan" id="kobo.308.1"> salary, our application updates the state variable. </span><span class="koboSpan" id="kobo.308.2">We can use a binding variable in </span><strong class="source-inline"><span class="koboSpan" id="kobo.309.1">ResultsView</span></strong><span class="koboSpan" id="kobo.310.1">, which allows us to pass in data </span><span class="No-Break"><span class="koboSpan" id="kobo.311.1">between views.</span></span></p>
<p><span class="koboSpan" id="kobo.312.1">First, in </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">ResultsView</span></strong><span class="koboSpan" id="kobo.314.1">, add the following line above the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.315.1">taxBreakdown</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.316.1"> array:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.317.1">
@Binding var salary: String</span></pre> <p><span class="koboSpan" id="kobo.318.1">This simply declares a </span><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">salary</span></strong><span class="koboSpan" id="kobo.320.1"> variable of type </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">String</span></strong><span class="koboSpan" id="kobo.322.1">, which is the same format as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.323.1">salary</span></strong><span class="koboSpan" id="kobo.324.1"> variable in </span><strong class="source-inline"><span class="koboSpan" id="kobo.325.1">ContentView</span></strong><span class="koboSpan" id="kobo.326.1">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1">@Binding</span></strong><span class="koboSpan" id="kobo.328.1"> just states that it is expecting this value to be </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">passed in.</span></span></p>
<p><span class="koboSpan" id="kobo.330.1">Now we must update </span><strong class="source-inline"><span class="koboSpan" id="kobo.331.1">NavigationLink</span></strong><span class="koboSpan" id="kobo.332.1"> to pass in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.333.1">salary</span></strong><span class="koboSpan" id="kobo.334.1"> variable from </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">ContentView</span></strong><span class="koboSpan" id="kobo.336.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.337.1">ResultsView</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.338.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.339.1">
NavigationLink( destination: ResultsView( salary: $salary ), isActive: $isSalaryValid, label:</span></pre> <p><span class="koboSpan" id="kobo.340.1">Though we have completed all the binding, if we try and run the application, the following error will </span><span class="No-Break"><span class="koboSpan" id="kobo.341.1">be thrown:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer068">
<span class="koboSpan" id="kobo.342.1"><img alt="Figure 3.6 – Preview error" src="image/Figure_3.06_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.343.1">Figure 3.6 – Preview error</span></p>
<p><span class="koboSpan" id="kobo.344.1">This error relates to the preview view, which appears usually to the right of the code. </span><span class="koboSpan" id="kobo.344.2">Without this, the preview cannot run. </span><span class="koboSpan" id="kobo.344.3">To fix this error, we can give a default hardcoded value just for the preview. </span><span class="koboSpan" id="kobo.344.4">Update the code </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.346.1">
struct ResultsView_Previews: PreviewProvider{
    static var previews: some View
    {
        ResultsView( salary: .constant( "100" ) )
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.347.1">Now once </span><a id="_idIndexMarker179"/><span class="koboSpan" id="kobo.348.1">we run the application, we get no errors because we solved the missing argument error, and can move on to calculating the tax breakdown from the salary we </span><span class="No-Break"><span class="koboSpan" id="kobo.349.1">passed </span><a id="_idTextAnchor290"/><span class="koboSpan" id="kobo.350.1">through.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.351.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.352.1">If you would like to test to make sure the variable has been passed through, you can use a breakpoint or </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">print</span></strong><span class="koboSpan" id="kobo.354.1"> statement. </span><span class="koboSpan" id="kobo.354.2">I will let you do that as a</span><a id="_idTextAnchor291"/><span class="koboSpan" id="kobo.355.1">n </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">extra task.</span></span></p>
<h1 id="_idParaDest-56"><a id="_idTextAnchor292"/><span class="koboSpan" id="kobo.357.1">Calculating tax breakdown</span></h1>
<p><span class="koboSpan" id="kobo.358.1">In the</span><a id="_idIndexMarker180"/><span class="koboSpan" id="kobo.359.1"> previous chapter, we passed through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">salary</span></strong><span class="koboSpan" id="kobo.361.1"> variable, but we still need to calculate the tax. </span><span class="koboSpan" id="kobo.361.2">I will be doing it in line with the UK income tax rates of 2023/2024, but this can be adapted easily for any other tax system. </span><span class="koboSpan" id="kobo.361.3">In the following table, we have the tax rates </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">for 2023/2024:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001">
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.363.1">Income</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.364.1">Tax rate</span></strong></span></p>
</td>
<td class="No-Table-Style"/>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.365.1">Up </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">to £12,570</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.367.1">0%</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.368.1">Personal allowance</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.369.1">£12,571 </span><span class="No-Break"><span class="koboSpan" id="kobo.370.1">to £37,700</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.371.1">20%</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.372.1">Basic rate</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.373.1">£37,701 </span><span class="No-Break"><span class="koboSpan" id="kobo.374.1">to £150,000</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.375.1">40%</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.376.1">Higher rate</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.377.1">over £150,000</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.378.1">45%</span></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><span class="koboSpan" id="kobo.379.1">Additional rate</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.380.1">Table 3.1 – Tax brackets</span></p>
<p><span class="koboSpan" id="kobo.381.1">As there are brackets and not a single fixed tax, we will need to do a few calculations to figure out the exact tax to be deducted. </span><span class="koboSpan" id="kobo.381.2">On top of the income tax, there is also national insurance tax. </span><span class="koboSpan" id="kobo.381.3">National insurance tax isn’t so simple as there are different categories, but let’s </span><a id="_idIndexMarker181"/><span class="koboSpan" id="kobo.382.1">keep it at a simple 13%, which it </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">roughly is.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.384.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.385.1">There are definitely more aspects to calculating tax, such as pension contributions, student loans, and so on; however, we will leave it </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">at this.</span></span><a id="_idTextAnchor293"/></p>
<h2 id="_idParaDest-57"><a id="_idTextAnchor294"/><span class="koboSpan" id="kobo.387.1">Tax calculation</span></h2>
<p><span class="koboSpan" id="kobo.388.1">Let’s implement a</span><a id="_idIndexMarker182"/><span class="koboSpan" id="kobo.389.1"> formula in </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">ResultsView</span></strong><span class="koboSpan" id="kobo.391.1"> to calculate the income tax. </span><span class="koboSpan" id="kobo.391.2">Add the following code at the start of </span><span class="No-Break"><span class="koboSpan" id="kobo.392.1">the body:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.393.1">
var body: some View {let salaryNum = Double( salary )!
</span><span class="koboSpan" id="kobo.393.2">var incomeTax: Double = 0
if ( salaryNum &gt; 12570 )
{
    if ( salaryNum &gt; 37700 )
    {
        if ( salaryNum &gt; 150000 )
        {
            incomeTax += ( 37700 - 12571 ) * 0.2
            incomeTax += ( 150000 - 37701 ) * 0.4
            incomeTax += ( salaryNum - 150000 ) * 0.45
        }
        else
        {
            incomeTax += ( 37700 - 12571 ) * 0.2
            incomeTax += ( salaryNum - 37700 ) * 0.4
        }
    }
    else
    { incomeTax += ( salaryNum - 12570 ) * 0.2 }
}
return VStack {
….
</span><span class="koboSpan" id="kobo.393.3">}
}</span></pre>
<p><span class="koboSpan" id="kobo.394.1">We check each tax </span><a id="_idIndexMarker183"/><span class="koboSpan" id="kobo.395.1">bracket and calculate the tax accordingly. </span><span class="koboSpan" id="kobo.395.2">Next, we will calculate the national insurance. </span><span class="koboSpan" id="kobo.395.3">First, add another double variable </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">below </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.397.1">incomeTax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.399.1">
let salaryNum = Double( salary )!var incomeTax: Double = 0
var nationalInsuranceTax: Double = 0</span></pre>
<p><span class="koboSpan" id="kobo.400.1">Now we can simply calculate it by multiplying the salary by </span><strong class="source-inline"><span class="koboSpan" id="kobo.401.1">0.13</span></strong><span class="koboSpan" id="kobo.402.1"> to get </span><strong class="source-inline"><span class="koboSpan" id="kobo.403.1">13%</span></strong><span class="koboSpan" id="kobo.404.1">. </span><span class="koboSpan" id="kobo.404.2">Add the following code below the income </span><span class="No-Break"><span class="koboSpan" id="kobo.405.1">tax calculation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.406.1">
nationalInsuranceTax = salaryNum * 0.13</span></pre> <p><span class="koboSpan" id="kobo.407.1">Now that we</span><a id="_idIndexMarker184"/><span class="koboSpan" id="kobo.408.1"> have all of the taxes calculated, we can move on to working out the post-tax salary. </span><span class="koboSpan" id="kobo.408.2">This is simple – we just subtract the income tax and national insurance tax from the salary. </span><span class="koboSpan" id="kobo.408.3">Add the following code beneath the </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">previous code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.410.1">
let postTaxSalary = salaryNum - incomeTax - nationalInsuranceTax</span></pre> <p><span class="koboSpan" id="kobo.411.1">Let’s format these values into strings, which will be used when displaying the tax figures. </span><span class="koboSpan" id="kobo.411.2">Add the following code below </span><strong class="source-inline"><span class="koboSpan" id="kobo.412.1">post-tax </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.413.1">salary</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.414.1"> calculation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.415.1">
let salaryString = String( format:"£%.2F", salaryNum )let postTaxSalaryString = String( format: "£%.2F", postTaxSalary )
let incomeTaxString = String( format: "£%.2F", incomeTax )
let nationalInsuranceTaxSting = String( format: "£%.2F",
nationalInsuranceTax )</span></pre>
<p><span class="koboSpan" id="kobo.416.1">This creates a string from the respective numbers rounded to two decimal places. </span><span class="koboSpan" id="kobo.416.2">Next, move the </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">taxBreakdown</span></strong><span class="koboSpan" id="kobo.418.1"> hardcoded pie chart array beneath the formatted strings, and update it </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.420.1">
let taxBreakdown: [Double] = [postTaxSalary, incomeTax, nationalInsuranceTax]</span></pre> <p><span class="koboSpan" id="kobo.421.1">We are using let instead of var as it won’t need to </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">be changed.</span></span></p>
<p><span class="koboSpan" id="kobo.423.1">Now we are finally ready to start updating each component in the UI. </span><span class="koboSpan" id="kobo.423.2">First, we will update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.424.1">Text</span></strong><span class="koboSpan" id="kobo.425.1"> components, which display the </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">Before Tax</span></strong><span class="koboSpan" id="kobo.427.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">After Tax</span></strong><span class="koboSpan" id="kobo.429.1"> figures </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.431.1">
Text( "Before Tax" )    .font( .system( size: 32 ) )
    .padding(.vertical)
Text( salaryString )
    .font( .system( size: 32 ) )
    .padding(.vertical)
Text( "After Tax" )
    .font( .system( size: 32 ) )
    .padding(.vertical)
Text( postTaxSalaryString )
    .font( .system( size: 32 ) )
    .padding(.vertical)</span></pre>
<p><span class="koboSpan" id="kobo.432.1">Finally, update </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">ProgressView</span></strong><span class="koboSpan" id="kobo.434.1"> to</span><a id="_idIndexMarker185"/><span class="koboSpan" id="kobo.435.1"> display the correct percentage and value for the tax </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">and salary:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.437.1">
Text( "Post Tax Salary" )ProgressView( postTaxSalaryString, value: postTaxSalary / salaryNum * 100, total: 100 )
Text( "Tax" )
ProgressView( incomeTaxString, value: incomeTax / salaryNum * 100, total: 100 )
Text( "National Insurance" )
ProgressView( nationalInsuranceTaxSting, value: 13, total: 100 )</span></pre>
<p><span class="koboSpan" id="kobo.438.1">The reason for dividing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1">postTaxSalary</span></strong><span class="koboSpan" id="kobo.440.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.441.1">incomeTax</span></strong><span class="koboSpan" id="kobo.442.1"> variables by </span><strong class="source-inline"><span class="koboSpan" id="kobo.443.1">salaryNum</span></strong><span class="koboSpan" id="kobo.444.1"> and multiplying it by </span><strong class="source-inline"><span class="koboSpan" id="kobo.445.1">100</span></strong><span class="koboSpan" id="kobo.446.1"> is to work out the percentage for </span><strong class="source-inline"><span class="koboSpan" id="kobo.447.1">ProgressView</span></strong><span class="koboSpan" id="kobo.448.1">. </span><span class="koboSpan" id="kobo.448.2">Before running, update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.449.1">VStack</span></strong><span class="koboSpan" id="kobo.450.1"> to be returned. </span><span class="koboSpan" id="kobo.450.2">There seems to be an issue with the code, causing conflicts for the compiler. </span><span class="koboSpan" id="kobo.450.3">To resolve this, we need to explicitly state what to draw by </span><span class="No-Break"><span class="koboSpan" id="kobo.451.1">returning it:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.452.1">
return VStack</span></pre> <p><span class="koboSpan" id="kobo.453.1">If we run our</span><a id="_idIndexMarker186"/><span class="koboSpan" id="kobo.454.1"> application and insert the salary of £100,000, </span><strong class="source-inline"><span class="koboSpan" id="kobo.455.1">ResultsView</span></strong><span class="koboSpan" id="kobo.456.1"> will appear </span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer069">
<span class="koboSpan" id="kobo.458.1"><img alt="Figure 3.7 – ResultsView updated" src="image/Figure_3.07_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.459.1">Figure 3.7 – ResultsView updated</span></p>
<p><span class="koboSpan" id="kobo.460.1">That definitely was tiring, all that code. </span><span class="koboSpan" id="kobo.460.2">For reference, here is what the </span><strong class="source-inline"><span class="koboSpan" id="kobo.461.1">ContentView</span></strong><span class="koboSpan" id="kobo.462.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.463.1">ResultsView</span></strong><span class="koboSpan" id="kobo.464.1"> code should look like before </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">moving</span><a id="_idTextAnchor295"/><span class="koboSpan" id="kobo.466.1"> on:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.467.1">ContentView:</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.468.1">
import SwiftUIstruct ContentView: View
{
    @State private var salary: String = ""
    @State private var isSalaryValid: Bool = false
    var body: some View
    {
        NavigationView
        {
            VStack
            {
                Text( "Annual Salary" )
                    .padding(.bottom, 75.0)
                TextField( "", text: $salary )
                    .frame( width: 200.0 )
                    .border( Color.black, width: 1 )
                    .padding( .bottom, 75.0 )
                    .keyboardType( .decimalPad )
                NavigationLink( destination: ResultsView( salary: $salary ), isActive: $isSalaryValid, label:
                {
                    Text( "Calculate Tax" )
                        .bold( )
                        .frame( width: 200, height: 50 )
                        .background( Color.blue )
                        .foregroundColor( Color.white )
                        .cornerRadius( 10 )
                        .onTapGesture
                        {
                            GoToResultsView( )
                        }
                } )
            }
            .padding( )
            .navigationTitle( "Main Page" )
        }
    }
    func GoToResultsView( )
    {
        if ( nil != Float( salary ) )
        {
            if ( Float( salary )! </span><span class="koboSpan" id="kobo.468.2">&gt; 0 )
            { isSalaryValid = true }
        }
    }
}
struct ContentView_Previews: PreviewProvider
{
    static var previews: some View
    {
        ContentView( )
    }
}</span></pre>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.469.1">ResultsView:</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.470.1">
import SwiftUIimport SwiftUICharts
struct ResultsView: View
{
    @Binding var salary: String
    var body: some View
    {
        let salaryNum = Double( salary )!
</span><span class="koboSpan" id="kobo.470.2">        var incomeTax: Double = 0
        var nationalInsuranceTax: Double = 0
        if ( salaryNum &gt; 12570 )
        {
            if ( salaryNum &gt; 37700 )
            {
                if ( salaryNum &gt; 150000 )
                {
                    incomeTax += ( 37700 - 12571 ) * 0.2
                    incomeTax += ( 150000 - 37701 ) * 0.4
                    incomeTax += ( salaryNum - 150000 ) * 0.45
                }
                else
                {
                    incomeTax += ( 37700 - 12571 ) * 0.2
                    incomeTax += ( salaryNum - 37700 ) * 0.4
                }
            }
            else
            { incomeTax += ( salaryNum - 12570 ) * 0.2 }
        }
        nationalInsuranceTax = salaryNum * 0.13
        let postTaxSalary = salaryNum - incomeTax - nationalInsuranceTax
        let salaryString = String( format:"£%.2F", salaryNum )
        let postTaxSalaryString = String( format: "£%.2F", postTaxSalary )
        let incomeTaxString = String( format: "£%.2F", incomeTax )
        let nationalInsuranceTaxSting = String( format: "£%.2F", nationalInsuranceTax )
        let taxBreakdown: [Double] = [postTaxSalary, incomeTax, nationalInsuranceTax]
        return VStack
        {
            PieChart( )
                .data( taxBreakdown )
                .chartStyle( ChartStyle( backgroundColor: .white,
                                         foregroundColor: ColorGradient( .blue, .purple ) ) )
            Text( "Before Tax" )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Text( salaryString )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Text( "After Tax" )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Text( postTaxSalaryString )
                .font( .system( size: 32 ) )
                .padding(.vertical)
            Group
            {
                Text( "Post Tax Salary" )
                ProgressView( postTaxSalaryString, value: postTaxSalary / salaryNum * 100, total: 100 )
                Text( "Tax" )
                ProgressView( incomeTaxString, value: incomeTax / salaryNum * 100, total: 100 )
                Text( "National Insurance" )
                ProgressView( nationalInsuranceTaxSting, value: 13, total: 100 )
            }
        }
        .padding( )
        .navigationBarTitle( "Summary" )
    }
}
struct ResultsView_Previews: PreviewProvider
{
    static var previews: some View
    {
        ResultsView( salary: .constant( "100" ) )
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.471.1">In the next</span><a id="_idIndexMarker187"/><span class="koboSpan" id="kobo.472.1"> section, we will fix an error that occurs in </span><strong class="source-inline"><span class="koboSpan" id="kobo.473.1">ContentView</span></strong><span class="koboSpan" id="kobo.474.1">; see whether you can figure out what the </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">erro</span><a id="_idTextAnchor296"/><span class="koboSpan" id="kobo.476.1">r is.</span></span></p>
<h2 id="_idParaDest-58"><a id="_idTextAnchor297"/><span class="koboSpan" id="kobo.477.1">Fixing the ContentView binding error</span></h2>
<p><span class="koboSpan" id="kobo.478.1">There is an</span><a id="_idIndexMarker188"/><span class="koboSpan" id="kobo.479.1"> error in </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">ContentView</span></strong><span class="koboSpan" id="kobo.481.1">. </span><span class="koboSpan" id="kobo.481.2">It can be triggered by following </span><span class="No-Break"><span class="koboSpan" id="kobo.482.1">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.483.1">Navigate to </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">ResultsView</span></strong><span class="koboSpan" id="kobo.485.1"> by clicking the </span><strong class="bold"><span class="koboSpan" id="kobo.486.1">Calculate </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.487.1">Tax</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.488.1"> button.</span></span></li>
<li><span class="koboSpan" id="kobo.489.1">Go back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">ContentView</span></strong><span class="koboSpan" id="kobo.491.1"> by pressing the back arrow on the </span><span class="No-Break"><span class="koboSpan" id="kobo.492.1">top left.</span></span></li>
<li><span class="koboSpan" id="kobo.493.1">Input invalid data, which can be any of </span><span class="No-Break"><span class="koboSpan" id="kobo.494.1">the following:</span></span><ol><li><span class="koboSpan" id="kobo.495.1">Delete all the text </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.497.1">TextField</span></strong></span></li><li><span class="No-Break"><span class="koboSpan" id="kobo.498.1">Space character</span></span></li><li><span class="koboSpan" id="kobo.499.1">Any </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">non-numerical character</span></span></li><li><span class="koboSpan" id="kobo.501.1">Two or more </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">decimal points</span></span></li></ol></li>
</ol>
<p><span class="koboSpan" id="kobo.503.1">Once these steps are complete, the following error </span><span class="No-Break"><span class="koboSpan" id="kobo.504.1">will appear:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer070">
<span class="koboSpan" id="kobo.505.1"><img alt="Figure 3.8 – Invalid input error" src="image/Figure_3.08_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.506.1">Figure 3.8 – Invalid input error</span></p>
<p><span class="koboSpan" id="kobo.507.1">This occurs because the variable is bound to </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">ResultsView</span></strong><span class="koboSpan" id="kobo.509.1">, which uses the value numerically. </span><span class="koboSpan" id="kobo.509.2">As the input is no longer numerical, it crashes. </span><span class="koboSpan" id="kobo.509.3">The problem is that </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">Double( salary )</span></strong><span class="koboSpan" id="kobo.511.1"> returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.512.1">nil</span></strong><span class="koboSpan" id="kobo.513.1"> and forces it to be assigned using </span><strong class="source-inline"><span class="koboSpan" id="kobo.514.1">!</span></strong><span class="koboSpan" id="kobo.515.1">, which makes it crash. </span><span class="koboSpan" id="kobo.515.2">We will default assign a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.516.1">0</span></strong><span class="koboSpan" id="kobo.517.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.518.1">salaryNum</span></strong><span class="koboSpan" id="kobo.519.1"> variable and if it’s not </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">nil</span></strong><span class="koboSpan" id="kobo.521.1">, then cast the salary string as </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">Double</span></strong><span class="koboSpan" id="kobo.523.1">. </span><span class="koboSpan" id="kobo.523.2">Update the code </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.525.1">
var salaryNum: Double = 0if ( nil != Double( salary ) )
{
    salaryNum = Double( salary )!
</span><span class="koboSpan" id="kobo.525.2">}</span></pre>
<p><span class="koboSpan" id="kobo.526.1">Alternatively, you can use the coalescing operator to reduce the preceding check as follows: </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1">let salaryNum = Double( salary ) ?? </span><span class="koboSpan" id="kobo.527.2">0</span></strong><span class="koboSpan" id="kobo.528.1">. </span><span class="koboSpan" id="kobo.528.2">For more information on the coalescing operator, </span><span class="No-Break"><span class="koboSpan" id="kobo.529.1">visit </span></span><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/basicoperators/#Nil-Coalescing-Operator"><span class="No-Break"><span class="koboSpan" id="kobo.530.1">https://docs.swift.org/swift-book/documentation/the-swift-programming-language/basicoperators/#Nil-Coalescing-Operator</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.531.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.532.1">First, we</span><a id="_idIndexMarker189"/><span class="koboSpan" id="kobo.533.1"> change the variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.534.1">var</span></strong><span class="koboSpan" id="kobo.535.1"> instead of </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">let</span></strong><span class="koboSpan" id="kobo.537.1"> as it needs to be modifiable just for checking whether the cast equates to </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">nil</span></strong><span class="koboSpan" id="kobo.539.1">. </span><span class="koboSpan" id="kobo.539.2">Then, we check that it’s not </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">nil</span></strong><span class="koboSpan" id="kobo.541.1"> and assign the value accordingly. </span><em class="italic"><span class="koboSpan" id="kobo.542.1">Assigning 0 won’t have any effect as the view isn’t visible at this time</span></em><span class="koboSpan" id="kobo.543.1">. </span><span class="koboSpan" id="kobo.543.2">Now if you run the application, it won’t crash if you followed the </span><span class="No-Break"><span class="koboSpan" id="kobo.544.1">preceding steps.</span></span></p>
<p><span class="koboSpan" id="kobo.545.1">In the next section, we will </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">rename </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">Conten</span><a id="_idTextAnchor298"/><span class="koboSpan" id="kobo.548.1">tView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.549.1">.</span></span></p>
<h2 id="_idParaDest-59"><a id="_idTextAnchor299"/><span class="koboSpan" id="kobo.550.1">Renaming ContentView to FrontView</span></h2>
<p><span class="koboSpan" id="kobo.551.1">In this small section, we will </span><a id="_idIndexMarker190"/><span class="koboSpan" id="kobo.552.1">change </span><strong class="source-inline"><span class="koboSpan" id="kobo.553.1">ContentView</span></strong><span class="koboSpan" id="kobo.554.1">’s name to </span><strong class="source-inline"><span class="koboSpan" id="kobo.555.1">FrontView</span></strong><span class="koboSpan" id="kobo.556.1">. </span><span class="koboSpan" id="kobo.556.2">The default name of </span><strong class="source-inline"><span class="koboSpan" id="kobo.557.1">ContentView</span></strong><span class="koboSpan" id="kobo.558.1"> doesn’t provide much information to us. </span><span class="koboSpan" id="kobo.558.2">We will rename it </span><strong class="source-inline"><span class="koboSpan" id="kobo.559.1">FrontView</span></strong><span class="koboSpan" id="kobo.560.1">. </span><span class="koboSpan" id="kobo.560.2">You could rename the file and manually change every occurrence of </span><strong class="source-inline"><span class="koboSpan" id="kobo.561.1">ContentView</span></strong><span class="koboSpan" id="kobo.562.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.563.1">FrontView</span></strong><span class="koboSpan" id="kobo.564.1">, which wouldn’t be too tedious in an application this size. </span><span class="koboSpan" id="kobo.564.2">However, in a larger and more complex application, it would take away a lot of valuable development time. </span><span class="koboSpan" id="kobo.564.3">We can use Xcode’s renaming tool to </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">aid us.</span></span></p>
<p><span class="koboSpan" id="kobo.566.1">Simply go to any reference to </span><strong class="source-inline"><span class="koboSpan" id="kobo.567.1">ContentView</span></strong><span class="koboSpan" id="kobo.568.1"> in the application’s code, right-click it, and go to </span><strong class="bold"><span class="koboSpan" id="kobo.569.1">Refactor</span></strong><span class="koboSpan" id="kobo.570.1"> | </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.571.1">Rename…</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.572.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer071">
<span class="koboSpan" id="kobo.573.1"><img alt="Figure 3.9 – Rename… button" src="image/Figure_3.09_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.574.1">Figure 3.9 – Rename… button</span></p>
<p><span class="koboSpan" id="kobo.575.1">In the next</span><a id="_idIndexMarker191"/><span class="koboSpan" id="kobo.576.1"> view, set the name to </span><strong class="source-inline"><span class="koboSpan" id="kobo.577.1">FrontView</span></strong><span class="koboSpan" id="kobo.578.1"> and </span><span class="No-Break"><span class="koboSpan" id="kobo.579.1">press </span></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.580.1">Enter</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.581.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer072">
<span class="koboSpan" id="kobo.582.1"><img alt="Figure 3.10 – Xcode renaming tool" src="image/Figure_3.10_B18783.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.583.1">Figure 3.10 – Xcode renaming tool</span></p>
<p><span class="koboSpan" id="kobo.584.1">Renaming files </span><a id="_idIndexMarker192"/><span class="koboSpan" id="kobo.585.1">and updating all references is as easy as that. </span><span class="koboSpan" id="kobo.585.2">This also works for variables and functions; feel free to use it whenever you </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">need to.</span></span></p>
<p><span class="koboSpan" id="kobo.587.1">We have now completed the calculator application; in the next section, you will see some of the extra tasks for you </span><span class="No-Break"><span class="koboSpan" id="kobo.588.1">to co</span><a id="_idTextAnchor300"/><span class="koboSpan" id="kobo.589.1">mplete.</span></span></p>
<h1 id="_idParaDest-60"><a id="_idTextAnchor301"/><span class="koboSpan" id="kobo.590.1">Extra tasks</span></h1>
<p><span class="koboSpan" id="kobo.591.1">Now that the application is complete, here is a list of tasks for you to complete to enhance your application and also to test your knowledge of the concepts learned in </span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.593.1">Show an error when submitting an </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">invalid salary</span></span></li>
<li><span class="koboSpan" id="kobo.595.1">Formatting salary and tax components </span><span class="No-Break"><span class="koboSpan" id="kobo.596.1">with commas</span></span></li>
<li><span class="koboSpan" id="kobo.597.1">Abstracting tax brackets and percentages to make the app </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">more dynamic</span></span></li>
<li><span class="koboSpan" id="kobo.599.1">Pie </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1">chart labeling</span></span></li>
<li><span class="koboSpan" id="kobo.601.1">Different types </span><span class="No-Break"><span class="koboSpan" id="kobo.602.1">of tax</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.603.1">Corporation tax</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.604.1">Inheritance tax</span></span></li>
<li><span class="koboSpan" id="kobo.605.1">Provide more inputs for the current salary calculator such as pension contributions and </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">student loans</span></span></li>
<li><span class="koboSpan" id="kobo.607.1">Back </span><span class="No-Break"><span class="koboSpan" id="kobo.608.1">button styling</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.609.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.610.1">If at any point you require help, feel free to join my Discord group </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">at </span></span><a href="https://discord.gg/7e78FxrgqH"><span class="No-Break"><span class="koboSpan" id="kobo.612.1">https://discord.gg/7e78FxrgqH</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.613.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.614.1">We will summarize what we have covered in this chapter. </span><span class="koboSpan" id="kobo.614.2">However, before that, I will provide additional code for the extra tasks for you to implement at your </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">own l</span><a id="_idTextAnchor302"/><span class="koboSpan" id="kobo.616.1">eisure.</span></span></p>
<h2 id="_idParaDest-61"><a id="_idTextAnchor303"/><span class="koboSpan" id="kobo.617.1">Different tax options</span></h2>
<p><span class="koboSpan" id="kobo.618.1">To add </span><a id="_idIndexMarker193"/><span class="koboSpan" id="kobo.619.1">different tax options to your code, you can modify </span><strong class="source-inline"><span class="koboSpan" id="kobo.620.1">ResultsView</span></strong><span class="koboSpan" id="kobo.621.1"> to include a picker or segmented control for selecting different tax options. </span><span class="koboSpan" id="kobo.621.2">Here’s an example of how you can modify your code to add a picker for </span><span class="No-Break"><span class="koboSpan" id="kobo.622.1">tax options:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.623.1">
import SwiftUIstruct FrontView: View {
    @State private var salary: String = ""
    @State private var isSalaryValid: Bool = false
    @State private var selectedTaxOption: TaxOption = .option1 // Default tax option
    enum TaxOption: String, CaseIterable {
        case option1 = "Income Tax"
        case option2 = "Dividen Tax"
        case option3 = "Corporation Tax"
        // You can add more tax options if needed
    }
    var body: some View {
        NavigationView {
            VStack {
                Text("Annual Salary")
                    .padding(.bottom, 75.0)
                TextField("", text: $salary)
                    .frame(width: 200.0)
                    .border(Color.black, width: 1)
                    .padding(.bottom, 75.0)
                    .keyboardType(.decimalPad)
                Picker("Tax Option", selection: $selectedTaxOption) {
                    ForEach(TaxOption.allCases, id: \.self) { option in
                        Text(option.rawValue)
                    }
                }
                .pickerStyle(SegmentedPickerStyle())
                .padding(.bottom, 75.0)
                NavigationLink(destination: ResultsView(salary: $salary, taxOption: selectedTaxOption), isActive: $isSalaryValid) {
                    Text("Calculate Tax")
                        .bold()
                        .frame(width: 200, height: 50)
                        .background(Color.blue)
                        .foregroundColor(Color.white)
                        .cornerRadius(10)
                        .onTapGesture {
                            goToResultsView()
                        }
                }
            }
            .padding()
            .navigationTitle("Main Page")
        }
    }
    func goToResultsView() {
        if let salaryFloat = Float(salary), salaryFloat &gt; 0 {
            isSalaryValid = true
        }
    }
}
struct ResultsView: View {
    var salary: String
    var taxOption: FrontView.TaxOption
    var body: some View {
        VStack {
            Text("Results")
                .font(.title)
                .padding()
            Text("Salary: \(salary)")
                .padding()
            Text("Tax Option: \(taxOption.rawValue)")
                .padding()
            // Calculate and display tax results based on the selected tax option
            Spacer()
        }
        .navigationTitle("Results")
    }
}
struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        FrontView()
    }
}
```</span></pre>
<p><span class="koboSpan" id="kobo.624.1">In this </span><a id="_idIndexMarker194"/><span class="koboSpan" id="kobo.625.1">example, I’ve added the </span><strong class="source-inline"><span class="koboSpan" id="kobo.626.1">TaxOption</span></strong><span class="koboSpan" id="kobo.627.1"> enum to define different tax options. </span><span class="koboSpan" id="kobo.627.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.628.1">selectedTaxOption</span></strong><span class="koboSpan" id="kobo.629.1"> property is used to store the selected tax option. </span><span class="koboSpan" id="kobo.629.2">I’ve added a picker (using a segmented control style) to allow the user to select the </span><span class="No-Break"><span class="koboSpan" id="kobo.630.1">tax option.</span></span></p>
<p><span class="koboSpan" id="kobo.631.1">When the user taps </span><strong class="bold"><span class="koboSpan" id="kobo.632.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.633.1">, the selected tax option is passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.634.1">ResultsView</span></strong><span class="koboSpan" id="kobo.635.1">, where you can calculate and display the tax results based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">selecte</span><a id="_idTextAnchor304"/><span class="koboSpan" id="kobo.637.1">d option.</span></span></p>
<h2 id="_idParaDest-62"><a id="_idTextAnchor305"/><span class="koboSpan" id="kobo.638.1">Tax geography</span></h2>
<p><span class="koboSpan" id="kobo.639.1">To add the</span><a id="_idIndexMarker195"/><span class="koboSpan" id="kobo.640.1"> ability to calculate tax breakdowns for different geographies, including countries and states, you can modify </span><strong class="source-inline"><span class="koboSpan" id="kobo.641.1">ResultsView</span></strong><span class="koboSpan" id="kobo.642.1"> and introduce a selection mechanism for geographies. </span><span class="koboSpan" id="kobo.642.2">Here’s an example of how you can modify your code to </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1">achieve that:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.644.1">
import SwiftUIstruct FrontView: View {
    @State private var salary: String = ""
    @State private var isSalaryValid: Bool = false
    @State private var selectedGeography: Geography = .country("USA") // Default geography
    enum Geography {
        case country(String)
        case state(String, String) // Country, State
        var displayText: String {
            switch self {
            case .country(let country):
                return country
            case .state(let country, let state):
                return "\(state), \(country)"
            }
        }
    }
    var body: some View {
        NavigationView {
            VStack {
                Text("Annual Salary")
                    .padding(.bottom, 75.0)
                TextField("", text: $salary)
                    .frame(width: 200.0)
                    .border(Color.black, width: 1)
                    .padding(.bottom, 75.0)
                    .keyboardType(.decimalPad)
                Picker("Geography", selection: $selectedGeography) {
                    Text("USA").tag(Geography.country("USA"))
                    Text("California, USA").tag(Geography.state("USA", "California"))
                    // Add more geography options as needed
                }
                .pickerStyle(SegmentedPickerStyle())
                .padding(.bottom, 75.0)
                NavigationLink(destination: ResultsView(salary: $salary, geography: selectedGeography), isActive: $isSalaryValid) {
                    Text("Calculate Tax")
                        .bold()
                        .frame(width: 200, height: 50)
                        .background(Color.blue)
                        .foregroundColor(Color.white)
                        .cornerRadius(10)
                        .onTapGesture {
                            goToResultsView()
                        }
                }
            }
            .padding()
            .navigationTitle("Main Page")
        }
    }
    func goToResultsView() {
        if let salaryFloat = Float(salary), salaryFloat &gt; 0 {
            isSalaryValid = true
        }
    }
}
struct ResultsView: View {
    var salary: String
    var geography: FrontView.Geography
    var body: some View {
        VStack {
            Text("Results")
                .font(.title)
                .padding()
            Text("Salary: \(salary)")
                .padding()
            Text("Geography: \(geography.displayText)")
                .padding()
            // Calculate and display tax breakdown based on the selected geography
            Spacer()
        }
        .navigationTitle("Results")
    }
}
struct ContentView_Previews: PreviewProvider {
    static var previews: some View {
        FrontView()
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.645.1">In this example, I’ve </span><a id="_idIndexMarker196"/><span class="koboSpan" id="kobo.646.1">introduced the </span><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">Geography</span></strong><span class="koboSpan" id="kobo.648.1"> enum, which represents different geographies. </span><span class="koboSpan" id="kobo.648.2">It can be either a country or a state within a country. </span><span class="koboSpan" id="kobo.648.3">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">selectedGeography</span></strong><span class="koboSpan" id="kobo.650.1"> property is used to store the </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">selected geography.</span></span></p>
<p><span class="koboSpan" id="kobo.652.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">FrontView</span></strong><span class="koboSpan" id="kobo.654.1">, I’ve added a picker (using a segmented control style) to allow the user to select the geography. </span><span class="koboSpan" id="kobo.654.2">You can add more geography options </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">as needed.</span></span></p>
<p><span class="koboSpan" id="kobo.656.1">When the user taps </span><strong class="bold"><span class="koboSpan" id="kobo.657.1">Calculate Tax</span></strong><span class="koboSpan" id="kobo.658.1">, the selected salary and geography are passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.659.1">ResultsView</span></strong><span class="koboSpan" id="kobo.660.1">, where you can calculate and display the tax breakdown based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.661.1">selected geography.</span></span></p>
<p><span class="koboSpan" id="kobo.662.1">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.663.1">ResultsView</span></strong><span class="koboSpan" id="kobo.664.1">, I’ve added a </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">displayText</span></strong><span class="koboSpan" id="kobo.666.1"> computed property to format and display the selected geography. </span><span class="koboSpan" id="kobo.666.2">You can modify the code to calculate and display the tax breakdown based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1">selected geography.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.668.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.669.1">This code provides a basic structure for adding tax breakdowns based on geographies. </span><span class="koboSpan" id="kobo.669.2">The actual tax calculations and breakdowns would need to be implemented based on the tax laws and rules of the specific countries and </span><span class="No-Break"><span class="koboSpan" id="kobo.670.1">states involved.</span></span></p>
<p><span class="koboSpan" id="kobo.671.1">Here’s the updated code for </span><strong class="source-inline"><span class="koboSpan" id="kobo.672.1">ResultsView</span></strong><span class="koboSpan" id="kobo.673.1"> with the tax breakdown based on the given logic and the addition of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.674.1">Geography</span><a id="_idTextAnchor306"/></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.675.1"> selection:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.676.1">ResultsView</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.677.1">
import SwiftUIimport SwiftUICharts
struct ResultsView: View {
    @Binding var salary: String
    var geography: FrontView.Geography
    var body: some View {
        let salaryNum: Double = Double(salary) ?? </span><span class="koboSpan" id="kobo.677.2">0
        let taxBreakdown = calculateTaxBreakdown(for: salaryNum, in: geography)
        let salaryString = formatCurrency(salaryNum)
        let postTaxSalaryString = formatCurrency(taxBreakdown.postTaxSalary)
        let incomeTaxString = formatCurrency(taxBreakdown.incomeTax)
        let nationalInsuranceTaxString = formatCurrency(taxBreakdown.nationalInsuranceTax)
        return VStack {
            PieChart()
                .data(taxBreakdown.chartData)
                .chartStyle(ChartStyle(backgroundColor: .white, foregroundColor: ColorGradient(.blue, .purple)))
            Text("Before Tax")
                .font(.system(size: 32))
                .padding(.vertical)
            Text(salaryString)
                .font(.system(size: 32))
                .padding(.vertical)
            Text("After Tax")
                .font(.system(size: 32))
                .padding(.vertical)
            Text(postTaxSalaryString)
                .font(.system(size: 32))
                .padding(.vertical)
            Group {
                Text("Post Tax Salary")
                ProgressView(postTaxSalaryString, value: taxBreakdown.postTaxPercentage, total: 100)
                Text("Tax")
                ProgressView(incomeTaxString, value: taxBreakdown.incomeTaxPercentage, total: 100)
                Text("National Insurance")
                ProgressView(nationalInsuranceTaxString, value: taxBreakdown.nationalInsurancePercentage, total: 100)
            }
        }
        .padding()
        .navigationBarTitle("Summary")
    }
    private func calculateTaxBreakdown(for salary: Double, in geography: FrontView.Geography) -&gt; TaxBreakdown {
        var incomeTax: Double = 0
        var nationalInsuranceTax: Double = 0
        if salary &gt; 12570 {
            if salary &gt; 37700 {
                if salary &gt; 150000 {
                    incomeTax += (37700 - 12571) * 0.2
                    incomeTax += (150000 - 37701) * 0.4
                    incomeTax += (salary - 150000) * 0.45
                } else {
                    incomeTax += (37700 - 12571) * 0.2
                    incomeTax += (salary - 37700) * 0.4
                }
            } else {
                incomeTax += (salary - 12570) * 0.2
            }
        }
        nationalInsuranceTax = salary * 0.13
        let postTaxSalary = salary - incomeTax - nationalInsuranceTax
        let chartData: [(String, Double)] = [("Post Tax Salary", postTaxSalary), ("Tax", incomeTax), ("National Insurance", nationalInsuranceTax)]
        let totalSalary = salary + nationalInsuranceTax
        let postTaxPercentage = postTaxSalary / totalSalary * 100
        let incomeTaxPercentage = incomeTax / totalSalary * 100
        let nationalInsurancePercentage = nationalInsuranceTax / totalSalary * 100
        return TaxBreakdown(postTaxSalary: postTaxSalary, incomeTax: incomeTax, nationalInsuranceTax: nationalInsuranceTax, chartData: chartData, postTaxPercentage: postTax
Percentage, incomeTaxPercentage: incomeTaxPercentage, nationalInsurancePercentage: nationalInsurancePercentage)
    }
    private func formatCurrency(_ value: Double) -&gt; String {
        let formatter = NumberFormatter()
        formatter.numberStyle = .currency
        formatter.currencySymbol = "£"
        return formatter.string(from: NSNumber(value: value)) ?? </span><span class="koboSpan" id="kobo.677.3">""
    }
}
struct TaxBreakdown {
    var postTaxSalary: Double
    var incomeTax: Double
    var nationalInsuranceTax: Double
    var chartData: [(String, Double)]
    var postTaxPercentage: Double
    var incomeTaxPercentage: Double
    var nationalInsurancePercentage: Double
}
struct ResultsView_Previews: PreviewProvider {
    static var previews: some View {
        ResultsView(salary: .constant("100"), geography: .country("USA"))
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.678.1">In this updated</span><a id="_idIndexMarker197"/><span class="koboSpan" id="kobo.679.1"> code, </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">ResultsView</span></strong><span class="koboSpan" id="kobo.681.1"> now accepts a </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">geography</span></strong><span class="koboSpan" id="kobo.683.1"> parameter of type </span><strong class="source-inline"><span class="koboSpan" id="kobo.684.1">FrontView.Geography</span></strong><span class="koboSpan" id="kobo.685.1">. </span><span class="koboSpan" id="kobo.685.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1">calculateTaxBreakdown(for:in:)</span></strong><span class="koboSpan" id="kobo.687.1"> function is added to calculate the tax breakdown based on the salary and </span><span class="No-Break"><span class="koboSpan" id="kobo.688.1">selected geography.</span></span></p>
<p><span class="koboSpan" id="kobo.689.1">The tax breakdown is stored in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1">TaxBreakdown</span></strong><span class="koboSpan" id="kobo.691.1"> struct, which includes the post-tax salary, income tax, national insurance tax, chart data, and percentage values for each </span><span class="No-Break"><span class="koboSpan" id="kobo.692.1">tax category.</span></span></p>
<p><span class="koboSpan" id="kobo.693.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1">formatCurrency(_:)</span></strong><span class="koboSpan" id="kobo.695.1"> function is used to format currency values with the pound </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">sign (£).</span></span></p>
<p><span class="koboSpan" id="kobo.697.1">The calculated tax breakdown is used to populate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">PieChart</span></strong><span class="koboSpan" id="kobo.699.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">ProgressView</span></strong><span class="koboSpan" id="kobo.701.1"> components to display the tax breakdown </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">and percentages.</span></span></p>
<p><span class="koboSpan" id="kobo.703.1">Please note that the tax calculation logic in the code provided is based on the initial logic and may not be accurate or applicable to real-world tax calculations. </span><span class="koboSpan" id="kobo.703.2">It serves as an example structure for integrating tax breakdown calculations into your </span><span class="No-Break"><span class="koboSpan" id="kobo.704.1">S</span><a id="_idTextAnchor307"/><span class="koboSpan" id="kobo.705.1">wiftUI code.</span></span></p>
<h1 id="_idParaDest-63"><a id="_idTextAnchor308"/><span class="koboSpan" id="kobo.706.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.707.1">In this chapter, we implemented all the calculator’s functionality. </span><span class="koboSpan" id="kobo.707.2">We linked all the UI components that we implemented in the previous chapter. </span><span class="koboSpan" id="kobo.707.3">First, we provided a means to navigate to and from </span><strong class="source-inline"><span class="koboSpan" id="kobo.708.1">ResultsView</span></strong><span class="koboSpan" id="kobo.709.1">. </span><span class="koboSpan" id="kobo.709.2">Then, we checked the salary input to make sure it was above zero and didn’t contain any invalid characters. </span><span class="koboSpan" id="kobo.709.3">Once validated, we passed the salary from </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">ContentView</span></strong><span class="koboSpan" id="kobo.711.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">ResultsView</span></strong><span class="koboSpan" id="kobo.713.1">. </span><span class="koboSpan" id="kobo.713.2">Using the salary, we calculated the tax breakdown in </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">ResultsView</span></strong><span class="koboSpan" id="kobo.715.1">, fixed an annoying error, and renamed </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1">ContentView</span></strong><span class="koboSpan" id="kobo.717.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">FrontView</span></strong><span class="koboSpan" id="kobo.719.1">. </span><span class="koboSpan" id="kobo.719.2">Finally, we also implemented a few extra tasks for our tax </span><span class="No-Break"><span class="koboSpan" id="kobo.720.1">calculator app.</span></span></p>
<p><span class="koboSpan" id="kobo.721.1">In the next chapter, we’ll start our next application, which will be a photo gallery for the iPad. </span><span class="koboSpan" id="kobo.721.2">We will leverage many of the skills learned already, so feel free to take a moment and go back over anything you didn’t </span><span class="No-Break"><span class="koboSpan" id="kobo.722.1">fully understand.</span></span></p>
</div>
</body></html>