<html><head></head><body>
<div id="_idContainer099" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-83"><a id="_idTextAnchor092" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-84" class="calibre6"><a id="_idTextAnchor093" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.2.1">Navigating within Your App</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.3.1">The apps we make need to move from one screen to the other, showing different content on these screens. </span><span class="kobospan" id="kobo.3.2">So far, we have been making apps with only one screen. </span><span class="kobospan" id="kobo.3.3">In this chapter, we will learn how to move from one screen to the other. </span><span class="kobospan" id="kobo.3.4">We will learn how to use the </span><strong class="bold"><span class="kobospan" id="kobo.4.1">Jetpack Compose Navigation</span></strong><span class="kobospan" id="kobo.5.1"> library to navigate to different Jetpack Compose screens within our app. </span><span class="kobospan" id="kobo.5.2">We will learn the tips and best practices for using this library. </span><span class="kobospan" id="kobo.5.3">Also, we will cover how to pass arguments as we navigate to screens. </span><span class="kobospan" id="kobo.5.4">Lastly, we will build on what we learned in </span><a href="B19779_04.xhtml#_idTextAnchor055" class="calibre3 pcalibre pcalibre1"><span><em class="italic"><span class="kobospan" id="kobo.6.1">Chapter 4</span></em></span></a><span class="kobospan" id="kobo.7.1">, by handling navigation on large screens </span><span><span class="kobospan" id="kobo.8.1">and foldables.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.9.1">In this chapter, we’re going to cover the following </span><span><span class="kobospan" id="kobo.10.1">main topics:</span></span></p>
<ul class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.11.1">Jetpack </span><span><span class="kobospan" id="kobo.12.1">Navigation overview</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.13.1">Navigating to </span><span><span class="kobospan" id="kobo.14.1">Compose destinations</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.15.1">Passing arguments </span><span><span class="kobospan" id="kobo.16.1">to destinations</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.17.1">Navigation in foldables and </span><span><span class="kobospan" id="kobo.18.1">large screens</span></span></li>
</ul>
<h1 id="_idParaDest-85" class="calibre6"><a id="_idTextAnchor094" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.19.1">Technical requirements</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.20.1">To follow the instructions in this chapter, you will need to have Android Studio Hedgehog or later (</span><a href="https://developer.android.com/studio" class="calibre3 pcalibre pcalibre1"><span><span class="kobospan" id="kobo.21.1">https://developer.android.com/studio</span></span></a><span><span class="kobospan" id="kobo.22.1">) downloaded.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.23.1">You can use the previous chapter’s code to follow the instructions in this chapter. </span><span class="kobospan" id="kobo.23.2">You can find the code for this chapter </span><span><span class="kobospan" id="kobo.24.1">at </span></span><a href="https://github.com/PacktPublishing/Mastering-Kotlin-for-Android/tree/main/chapterseven" class="calibre3 pcalibre pcalibre1"><span><span class="kobospan" id="kobo.25.1">https://github.com/PacktPublishing/Mastering-Kotlin-for-Android/tree/main/chapterseven</span></span></a><span><span class="kobospan" id="kobo.26.1">.</span></span></p>
<h1 id="_idParaDest-86" class="calibre6"><a id="_idTextAnchor095" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.27.1">Jetpack Navigation overview</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.28.1">The Jetpack Navigation library </span><a id="_idIndexMarker300" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.29.1">provides an API for handling </span><strong class="bold"><span class="kobospan" id="kobo.30.1">complex navigation</span></strong><span class="kobospan" id="kobo.31.1"> with ease while also following the principles of Android Jetpack. </span><span class="kobospan" id="kobo.31.2">The library is available for both the old view system, which uses XML (</span><a href="https://developer.android.com/guide/navigation" class="calibre3 pcalibre pcalibre1"><span class="kobospan" id="kobo.32.1">https://developer.android.com/guide/navigation</span></a><span class="kobospan" id="kobo.33.1">), and Jetpack Compose (</span><a href="https://developer.android.com/jetpack/compose/navigation" class="calibre3 pcalibre pcalibre1"><span class="kobospan" id="kobo.34.1">https://developer.android.com/jetpack/compose/navigation</span></a><span class="kobospan" id="kobo.35.1">). </span><span class="kobospan" id="kobo.35.2">We will be learning about the latter in </span><span><span class="kobospan" id="kobo.36.1">this chapter.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.37.1">Still building on</span><a id="_idIndexMarker301" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.38.1"> the Pets app we used in the previous chapter, we are going to navigate to a details screen that has a back button to the previous screen. </span><span class="kobospan" id="kobo.38.2">We will also be passing data to the </span><span><span class="kobospan" id="kobo.39.1">details screen.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.40.1">To start with, we need to add the Jetpack Navigation Compose dependency to our project. </span><span class="kobospan" id="kobo.40.2">Let’s add the following library inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.41.1">versions</span></strong><span class="kobospan" id="kobo.42.1"> section in our </span><span><strong class="source-inline"><span class="kobospan" id="kobo.43.1">libs.versions.toml</span></strong></span><span><span class="kobospan" id="kobo.44.1"> file:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.45.1">
compose-navigation = "androidx.navigation:navigation-compose:2.7.2"</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.46.1">Next, we need to add the dependency to our app module’s </span><span><strong class="source-inline"><span class="kobospan" id="kobo.47.1">build.gradle.kts</span></strong></span><span><span class="kobospan" id="kobo.48.1"> file:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.49.1">
implementation(libs.compose.navigation)</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.50.1">Do a Gradle sync to add the library to our project. </span><span class="kobospan" id="kobo.50.2">The next step is to create </span><strong class="source-inline"><span class="kobospan" id="kobo.51.1">NavController</span></strong><span class="kobospan" id="kobo.52.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.53.1">NavHost</span></strong><span class="kobospan" id="kobo.54.1">. </span><strong class="source-inline"><span class="kobospan" id="kobo.55.1">NavController</span></strong><span class="kobospan" id="kobo.56.1"> is a class that manages app navigation within </span><strong class="source-inline"><span class="kobospan" id="kobo.57.1">NavHost</span></strong><span class="kobospan" id="kobo.58.1">. </span><strong class="source-inline"><span class="kobospan" id="kobo.59.1">NavHost</span></strong><span class="kobospan" id="kobo.60.1"> is a container that hosts composables and handles navigation between them. </span><span class="kobospan" id="kobo.60.2">Let’s create a new package called </span><strong class="source-inline"><span class="kobospan" id="kobo.61.1">navigation</span></strong><span class="kobospan" id="kobo.62.1"> and create a new sealed class called </span><strong class="source-inline"><span class="kobospan" id="kobo.63.1">Screens.kt</span></strong><span class="kobospan" id="kobo.64.1">. </span><span class="kobospan" id="kobo.64.2">Inside the file, let us add the </span><span><span class="kobospan" id="kobo.65.1">following code:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.66.1">
sealed class Screens(val route: String) {
    object PetsScreen : Screens("pets")
    object PetDetailsScreen : Screens("petDetails")
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.67.1">This is a sealed class that has two objects. </span><span class="kobospan" id="kobo.67.2">A </span><a id="_idIndexMarker302" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.68.1">sealed class is used to represent restricted class hierarchies wherein the object or value can only have a value among one of the types defined in the sealed class. </span><span class="kobospan" id="kobo.68.2">The first object is </span><strong class="source-inline"><span class="kobospan" id="kobo.69.1">PetsScreen</span></strong><span class="kobospan" id="kobo.70.1">, which will be the first screen we will see when we launch the app. </span><span class="kobospan" id="kobo.70.2">The second object is </span><strong class="source-inline"><span class="kobospan" id="kobo.71.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.72.1">, which will be the screen we will navigate to when we click on a pet item in </span><strong class="source-inline"><span class="kobospan" id="kobo.73.1">PetsScreen</span></strong><span class="kobospan" id="kobo.74.1">. </span><span class="kobospan" id="kobo.74.2">Every time we need to add a new destination screen, we will add a new object to the </span><span><span class="kobospan" id="kobo.75.1">sealed class.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.76.1">Next, let us </span><a id="_idIndexMarker303" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.77.1">create a new file inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.78.1">navigation</span></strong><span class="kobospan" id="kobo.79.1"> package called </span><strong class="source-inline"><span class="kobospan" id="kobo.80.1">AppNavigation.kt</span></strong><span class="kobospan" id="kobo.81.1">. </span><span class="kobospan" id="kobo.81.2">Inside the file, let us add the </span><span><span class="kobospan" id="kobo.82.1">following code:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.83.1">
@Composable
fun AppNavigation() {
    val navController = rememberNavController()
    NavHost(
        navController = navController,
        startDestination =  Screens.PetsScreen.route
    ){
        composable(Screens.PetsScreen.route){
            PetsScreen()
        }
    }
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.84.1">Let’s explain the </span><span><span class="kobospan" id="kobo.85.1">preceding code:</span></span></p>
<ul class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.86.1">We create </span><strong class="source-inline1"><span class="kobospan" id="kobo.87.1">NavController</span></strong><span class="kobospan" id="kobo.88.1"> using the </span><strong class="source-inline1"><span class="kobospan" id="kobo.89.1">rememberNavController()</span></strong><span class="kobospan" id="kobo.90.1"> function. </span><span class="kobospan" id="kobo.90.2">This function is used to create </span><strong class="source-inline1"><span class="kobospan" id="kobo.91.1">NavController</span></strong><span class="kobospan" id="kobo.92.1"> that will be remembered across recompositions. </span><span class="kobospan" id="kobo.92.2">This is important because we need to be able to navigate to different screens in </span><span><span class="kobospan" id="kobo.93.1">our app.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.94.1">We create a </span><strong class="source-inline1"><span class="kobospan" id="kobo.95.1">NavHost</span></strong><span class="kobospan" id="kobo.96.1"> composable that takes in </span><strong class="source-inline1"><span class="kobospan" id="kobo.97.1">navController</span></strong><span class="kobospan" id="kobo.98.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.99.1">startDestination</span></strong><span class="kobospan" id="kobo.100.1">. </span><strong class="source-inline1"><span class="kobospan" id="kobo.101.1">startDestination</span></strong><span class="kobospan" id="kobo.102.1"> is the first screen we want to see when we launch the app. </span><span class="kobospan" id="kobo.102.2">In our case, it </span><span><span class="kobospan" id="kobo.103.1">is </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.104.1">PetsScreen</span></strong></span><span><span class="kobospan" id="kobo.105.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.106.1">We add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.107.1">PetsScreen</span></strong><span class="kobospan" id="kobo.108.1"> composable. </span><span class="kobospan" id="kobo.108.2">This composable has an error because we have </span><a id="_idIndexMarker304" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.109.1">not created it yet. </span><span class="kobospan" id="kobo.109.2">We will do </span><span><span class="kobospan" id="kobo.110.1">that shortly.</span></span></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer083">
<span class="kobospan" id="kobo.111.1"><img alt="Figure 7.1 – PetsScreen error" src="image/B19779_07_01.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.112.1">Figure 7.1 – PetsScreen error</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.113.1">As seen in the preceding screenshot, the </span><strong class="source-inline"><span class="kobospan" id="kobo.114.1">PetsScreen</span></strong><span class="kobospan" id="kobo.115.1"> composable is highlighted in red because we have not created the composable yet. </span><span class="kobospan" id="kobo.115.2">We will refactor our code a bit. </span><span class="kobospan" id="kobo.115.3">Let us create a new file called </span><strong class="source-inline"><span class="kobospan" id="kobo.116.1">PetsScreen.kt</span></strong><span class="kobospan" id="kobo.117.1">. </span><span class="kobospan" id="kobo.117.2">Inside the file, let’s add the </span><span><span class="kobospan" id="kobo.118.1">following code:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.119.1">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PetsScreen(onPetClicked: (Cat) -&gt; Unit) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Text(text = "Pets")
                },
                colors =  TopAppBarDefaults.smallTopAppBarColors(
                    containerColor = MaterialTheme.colorScheme.primary,
                )
            )
        },
        content =  { paddingValues -&gt;
            PetList(
                modifier = Modifier
                    .fillMaxSize()
                    .padding(paddingValues),
                onPetClicked = onPetClicked
            )
        }
    )
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.120.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.121.1">PetsScreen</span></strong><span class="kobospan" id="kobo.122.1"> composable </span><a id="_idIndexMarker305" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.123.1">displays a list of pets. </span><span class="kobospan" id="kobo.123.2">We have added a </span><strong class="source-inline"><span class="kobospan" id="kobo.124.1">Scaffold</span></strong><span class="kobospan" id="kobo.125.1"> composable as the root element. </span><span class="kobospan" id="kobo.125.2">Inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.126.1">Scaffold</span></strong><span class="kobospan" id="kobo.127.1"> composable, we have added a </span><strong class="source-inline"><span class="kobospan" id="kobo.128.1">TopAppBar</span></strong><span class="kobospan" id="kobo.129.1"> composable. </span><span class="kobospan" id="kobo.129.2">We have also added a </span><strong class="source-inline"><span class="kobospan" id="kobo.130.1">PetList</span></strong><span class="kobospan" id="kobo.131.1"> composable as the content of the </span><strong class="source-inline"><span class="kobospan" id="kobo.132.1">Scaffold</span></strong><span class="kobospan" id="kobo.133.1"> composable. </span><span class="kobospan" id="kobo.133.2">We have added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.134.1">onPetClicked</span></strong><span class="kobospan" id="kobo.135.1"> callback to the </span><strong class="source-inline"><span class="kobospan" id="kobo.136.1">PetList</span></strong><span class="kobospan" id="kobo.137.1"> composable. </span><span class="kobospan" id="kobo.137.2">We will be using this callback to navigate to </span><strong class="source-inline"><span class="kobospan" id="kobo.138.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.139.1"> when we click on a pet item in </span><span><span class="kobospan" id="kobo.140.1">the list.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.141.1">With this, our navigation graph is ready. </span><span class="kobospan" id="kobo.141.2">We can now add the </span><strong class="source-inline"><span class="kobospan" id="kobo.142.1">AppNavigation</span></strong><span class="kobospan" id="kobo.143.1"> composable to our </span><strong class="source-inline"><span class="kobospan" id="kobo.144.1">MainActivity.kt</span></strong><span class="kobospan" id="kobo.145.1"> file. </span><span class="kobospan" id="kobo.145.2">Let’s replace all the code inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.146.1">ChapterSevenTheme</span></strong><span class="kobospan" id="kobo.147.1"> block with </span><span><span class="kobospan" id="kobo.148.1">the following:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.149.1">
ChapterSevenTheme {
    AppNavigation()
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.150.1">Build and run the </span><a id="_idIndexMarker306" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.151.1">app. </span><span class="kobospan" id="kobo.151.2">The app still displays a list of cute pets as before, but now we are using the Jetpack Navigation library to handle </span><span><span class="kobospan" id="kobo.152.1">our navigation.</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer084">
<span class="kobospan" id="kobo.153.1"><img alt="Figure 7.2 – Pets" src="image/B19779_07_02.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.154.1">Figure 7.2 – Pets</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.155.1">In the next section, let us learn how to navigate to a details screen when we click on a pet item in </span><span><span class="kobospan" id="kobo.156.1">the list.</span></span></p>
<h1 id="_idParaDest-87" class="calibre6"><a id="_idTextAnchor096" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.157.1">Navigating to Compose destinations</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.158.1">In this </span><a id="_idIndexMarker307" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.159.1">section, we will learn how to navigate to a details screen when we click on a pet item in the list. </span><span class="kobospan" id="kobo.159.2">First, we need to create a new composable for </span><strong class="source-inline"><span class="kobospan" id="kobo.160.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.161.1">. </span><span class="kobospan" id="kobo.161.2">Let us create a new file called </span><strong class="source-inline"><span class="kobospan" id="kobo.162.1">PetDetailsScreen.kt</span></strong><span class="kobospan" id="kobo.163.1"> and create the </span><strong class="source-inline"><span class="kobospan" id="kobo.164.1">PetDetailsScreenContent</span></strong><span class="kobospan" id="kobo.165.1"> composable </span><span><span class="kobospan" id="kobo.166.1">as </span></span><span><a id="_idIndexMarker308" class="calibre3 pcalibre pcalibre1"/></span><span><span class="kobospan" id="kobo.167.1">follows:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.168.1">
@OptIn(ExperimentalLayoutApi::class)
@Composable
fun PetDetailsScreenContent(modifier: Modifier) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        AsyncImage(
            model = "https://cataas.com/cat/rV1MVEh0Af2Bm4O0",
            contentDescription = "Cute cat",
            modifier = Modifier
                .fillMaxWidth()
                .height(200.dp),
            contentScale = ContentScale.FillWidth
        )
        FlowRow(
            modifier = Modifier
                .padding(start = 6.dp, end = 6.dp)
        ) {
            repeat(2) {
                SuggestionChip(
                    modifier = Modifier
                        .padding(start = 3.dp, end = 3.dp),
                    onClick = { },
                    label = {
                        Text(text = "Tag $it")
                    }
                )
            }
        }
    }
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.169.1">Here, we</span><a id="_idIndexMarker309" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.170.1"> created a composable that has </span><strong class="source-inline"><span class="kobospan" id="kobo.171.1">Column</span></strong><span class="kobospan" id="kobo.172.1"> as the root element. </span><span class="kobospan" id="kobo.172.2">Inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.173.1">Column</span></strong><span class="kobospan" id="kobo.174.1"> element, we added an </span><strong class="source-inline"><span class="kobospan" id="kobo.175.1">AsyncImage</span></strong><span class="kobospan" id="kobo.176.1"> composable that displays a cat image. </span><span class="kobospan" id="kobo.176.2">We also added a </span><strong class="source-inline"><span class="kobospan" id="kobo.177.1">FlowRow</span></strong><span class="kobospan" id="kobo.178.1"> composable to flow items to the next line when space runs out, which cannot be achieved with rows. </span><strong class="source-inline"><span class="kobospan" id="kobo.179.1">FlowRow</span></strong><span class="kobospan" id="kobo.180.1"> displays two </span><strong class="source-inline"><span class="kobospan" id="kobo.181.1">SuggestionChip</span></strong><span class="kobospan" id="kobo.182.1"> composables. </span><span class="kobospan" id="kobo.182.2">We will use this composable to display the details of a pet. </span><span class="kobospan" id="kobo.182.3">Notice we are using hardcoded cat IDs and tags for now. </span><span class="kobospan" id="kobo.182.4">We will pass this data from the </span><strong class="source-inline"><span class="kobospan" id="kobo.183.1">PetList</span></strong><span class="kobospan" id="kobo.184.1"> composable in the next section. </span><span class="kobospan" id="kobo.184.2">Next, let us create the </span><strong class="source-inline"><span class="kobospan" id="kobo.185.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.186.1"> composable </span><span><span class="kobospan" id="kobo.187.1">as follows:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.188.1">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PetDetailsScreen(onBackPressed: () -&gt; Unit) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Text(text = "Pet Details")
                },
                colors =  TopAppBarDefaults.smallTopAppBarColors(
                    containerColor = MaterialTheme.colorScheme.primary,
                ),
                navigationIcon = {
                    IconButton(
                        onClick = onBackPressed,
                        content = {
                            Icon(
                                imageVector = Icons.Default.ArrowBack,
                                contentDescription = "Back"
                            )
                        }
                    )
                }
            )
        },
        content = { paddingValues -&gt;
            PetDetailsScreenContent(
                modifier = Modifier
                    .padding(paddingValues)
            )
        }
    )
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.189.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.190.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.191.1"> composable</span><a id="_idIndexMarker310" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.192.1"> displays the details of a pet. </span><span class="kobospan" id="kobo.192.2">We have added a </span><strong class="source-inline"><span class="kobospan" id="kobo.193.1">Scaffold</span></strong><span class="kobospan" id="kobo.194.1"> composable as the root element. </span><span class="kobospan" id="kobo.194.2">Inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.195.1">Scaffold</span></strong><span class="kobospan" id="kobo.196.1"> composable, we have added a </span><strong class="source-inline"><span class="kobospan" id="kobo.197.1">TopAppBar</span></strong><span class="kobospan" id="kobo.198.1"> composable. </span><span class="kobospan" id="kobo.198.2">We have also used the </span><strong class="source-inline"><span class="kobospan" id="kobo.199.1">PetDetailsScreenContent</span></strong><span class="kobospan" id="kobo.200.1"> composable we created earlier as the content of the </span><strong class="source-inline"><span class="kobospan" id="kobo.201.1">Scaffold</span></strong><span class="kobospan" id="kobo.202.1"> composable. </span><span class="kobospan" id="kobo.202.2">We have added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.203.1">onBackPressed</span></strong><span class="kobospan" id="kobo.204.1"> callback to the </span><strong class="source-inline"><span class="kobospan" id="kobo.205.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.206.1"> composable. </span><span class="kobospan" id="kobo.206.2">We will be using this callback to navigate back to the previous screen when we click on the back button </span><span><span class="kobospan" id="kobo.207.1">in </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.208.1">TopAppBar</span></strong></span><span><span class="kobospan" id="kobo.209.1">.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.210.1">Our next step is to add a composable for </span><strong class="source-inline"><span class="kobospan" id="kobo.211.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.212.1"> to our </span><strong class="source-inline"><span class="kobospan" id="kobo.213.1">AppNavigation.kt</span></strong><span class="kobospan" id="kobo.214.1"> file. </span><span class="kobospan" id="kobo.214.2">Let us add the following code to our </span><strong class="source-inline"><span class="kobospan" id="kobo.215.1">NavHost</span></strong><span class="kobospan" id="kobo.216.1"> below the composable </span><span><span class="kobospan" id="kobo.217.1">for </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.218.1">PetsScreen</span></strong></span><span><span class="kobospan" id="kobo.219.1">:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.220.1">
composable(Screens.PetDetailsScreen.route){
    PetDetailsScreen(
        onBackPressed = {
            navController.popBackStack()
        }
    )
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.221.1">Here, we have added a composable for </span><strong class="source-inline"><span class="kobospan" id="kobo.222.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.223.1">. </span><span class="kobospan" id="kobo.223.2">We passed in the route for the screen and the </span><strong class="source-inline"><span class="kobospan" id="kobo.224.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.225.1"> composable as the content. </span><strong class="source-inline"><span class="kobospan" id="kobo.226.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.227.1"> has the </span><strong class="source-inline"><span class="kobospan" id="kobo.228.1">onBackPressed</span></strong><span class="kobospan" id="kobo.229.1"> argument. </span><span class="kobospan" id="kobo.229.2">The argument handles the situation where a user taps the back arrow icon, which is normally at the top left. </span><span class="kobospan" id="kobo.229.3">We use </span><strong class="source-inline"><span class="kobospan" id="kobo.230.1">navController.popBackStack()</span></strong><span class="kobospan" id="kobo.231.1"> inside the </span><strong class="source-inline"><span class="kobospan" id="kobo.232.1">onBackPressed</span></strong><span class="kobospan" id="kobo.233.1"> argument. </span><span class="kobospan" id="kobo.233.2">This method attempts to pop the current destination off the back stack and navigates to the </span><span><span class="kobospan" id="kobo.234.1">previous destination.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.235.1">Now we </span><a id="_idIndexMarker311" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.236.1">need to do the actual navigation to </span><strong class="source-inline"><span class="kobospan" id="kobo.237.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.238.1"> when we click on a pet item in the list. </span><span class="kobospan" id="kobo.238.2">Let us head over to the </span><strong class="source-inline"><span class="kobospan" id="kobo.239.1">PetListItem</span></strong><span class="kobospan" id="kobo.240.1"> composable. </span><span class="kobospan" id="kobo.240.2">We will add a new </span><strong class="source-inline"><span class="kobospan" id="kobo.241.1">onPetClicked</span></strong><span class="kobospan" id="kobo.242.1"> callback to the </span><strong class="source-inline"><span class="kobospan" id="kobo.243.1">PetListItem</span></strong><span class="kobospan" id="kobo.244.1"> composable. </span><span class="kobospan" id="kobo.244.2">The modified composable should look </span><span><span class="kobospan" id="kobo.245.1">like this:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.246.1">
@OptIn(ExperimentalLayoutApi::class)
@Composable
fun PetListItem(cat: Cat, onPetClicked: (Cat) -&gt; Unit) {
    ElevatedCard(
        modifier = Modifier
            .fillMaxWidth()
            .padding(6.dp)
    ) {
        Column(
            modifier = Modifier
                .fillMaxWidth()
                .padding(bottom = 10.dp)
                .clickable {
                    onPetClicked(cat)
                }
        ) {
            AsyncImage(
                model = "https://cataas.com/cat/${cat.id}",
                contentDescription = "Cute cat",
                modifier = Modifier
                    .fillMaxWidth()
                    .height(200.dp),
                contentScale = ContentScale.FillWidth
            )
            FlowRow(
                modifier = Modifier
                    .padding(start = 6.dp, end = 6.dp)
            ) {
              repeat(cat.tags.size) {
                  SuggestionChip(
                      modifier = Modifier
                          .padding(start = 3.dp, end = 3.dp),
                      onClick = { },
                      label = {
                          Text(text = cat.tags[it])
                      }
                  )
              }
            }
        }
    }
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.247.1">In the preceding code, we have added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.248.1">onPetClicked</span></strong><span class="kobospan" id="kobo.249.1"> callback to the composable. </span><span class="kobospan" id="kobo.249.2">We have added the </span><strong class="source-inline"><span class="kobospan" id="kobo.250.1">clickable</span></strong><span class="kobospan" id="kobo.251.1"> modifier to </span><strong class="source-inline"><span class="kobospan" id="kobo.252.1">Column</span></strong><span class="kobospan" id="kobo.253.1"> and called the </span><strong class="source-inline"><span class="kobospan" id="kobo.254.1">onPetClicked</span></strong><span class="kobospan" id="kobo.255.1"> callback inside the modifier. </span><span class="kobospan" id="kobo.255.2">We pass in the </span><strong class="source-inline"><span class="kobospan" id="kobo.256.1">cat</span></strong><span class="kobospan" id="kobo.257.1"> object to the callback. </span><span class="kobospan" id="kobo.257.2">Next, we</span><a id="_idIndexMarker312" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.258.1"> need to add the </span><strong class="source-inline"><span class="kobospan" id="kobo.259.1">onPetClicked</span></strong><span class="kobospan" id="kobo.260.1"> callback to the </span><strong class="source-inline"><span class="kobospan" id="kobo.261.1">PetList</span></strong><span class="kobospan" id="kobo.262.1"> composable, </span><span><span class="kobospan" id="kobo.263.1">as follows:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.264.1">
@Composable
fun PetList(modifier: Modifier, onPetClicked: (Cat) -&gt; Unit) {
    // other code
}</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.265.1">Next, we need to pass this callback where we use our </span><strong class="source-inline"><span class="kobospan" id="kobo.266.1">PetListItem</span></strong><span class="kobospan" id="kobo.267.1"> composable. </span><span class="kobospan" id="kobo.267.2">The modified </span><strong class="source-inline"><span class="kobospan" id="kobo.268.1">PetListItem</span></strong><span class="kobospan" id="kobo.269.1"> composable at the call site inside the items block should look </span><span><span class="kobospan" id="kobo.270.1">like this:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.271.1">
PetListItem(
    cat = pet,
    onPetClicked = onPetClicked
)</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.272.1">Lastly, we need to modify the </span><strong class="source-inline"><span class="kobospan" id="kobo.273.1">AppNavigation</span></strong><span class="kobospan" id="kobo.274.1"> composable to pass the </span><strong class="source-inline"><span class="kobospan" id="kobo.275.1">onPetClicked</span></strong><span class="kobospan" id="kobo.276.1"> callback to the </span><strong class="source-inline"><span class="kobospan" id="kobo.277.1">PetsScreen</span></strong><span class="kobospan" id="kobo.278.1"> composable. </span><span class="kobospan" id="kobo.278.2">The modified </span><strong class="source-inline"><span class="kobospan" id="kobo.279.1">AppNavigation</span></strong><span class="kobospan" id="kobo.280.1"> composable should look </span><span><span class="kobospan" id="kobo.281.1">like this:</span></span></p>
<pre class="source-code"><span class="kobospan1" id="kobo.282.1">
PetsScreen(
    onPetClicked = {
        navController.navigate(Screens.PetDetailsScreen.route)
    }
)</span></pre> <p class="calibre4"><span class="kobospan" id="kobo.283.1">Here, we pass the </span><strong class="source-inline"><span class="kobospan" id="kobo.284.1">onPetClicked</span></strong><span class="kobospan" id="kobo.285.1"> callback to the </span><strong class="source-inline"><span class="kobospan" id="kobo.286.1">PetsScreen</span></strong><span class="kobospan" id="kobo.287.1"> composable. </span><span class="kobospan" id="kobo.287.2">Inside the callback, we call the </span><strong class="source-inline"><span class="kobospan" id="kobo.288.1">navigate()</span></strong><span class="kobospan" id="kobo.289.1"> function on </span><strong class="source-inline"><span class="kobospan" id="kobo.290.1">navController</span></strong><span class="kobospan" id="kobo.291.1"> and pass in the route for </span><strong class="source-inline"><span class="kobospan" id="kobo.292.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.293.1">. </span><span class="kobospan" id="kobo.293.2">This will navigate to </span><strong class="source-inline"><span class="kobospan" id="kobo.294.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.295.1"> when we click on a</span><a id="_idIndexMarker313" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.296.1"> pet item in </span><span><span class="kobospan" id="kobo.297.1">the list.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.298.1">Build and run the app. </span><span class="kobospan" id="kobo.298.2">Click on a pet item in the list. </span><span class="kobospan" id="kobo.298.3">You will see that the app navigates </span><span><span class="kobospan" id="kobo.299.1">to </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.300.1">PetDetailsScreen</span></strong></span><span><span class="kobospan" id="kobo.301.1">.</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer085">
<span class="kobospan" id="kobo.302.1"><img alt="Figure 7.3 – Pet Details screen" src="image/B19779_07_03.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.303.1">Figure 7.3 – Pet Details screen</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.304.1">We can see a cute </span><a id="_idIndexMarker314" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.305.1">cat image and some tags. </span><span class="kobospan" id="kobo.305.2">Additionally, if we press the back button in </span><strong class="source-inline"><span class="kobospan" id="kobo.306.1">TopAppBar</span></strong><span class="kobospan" id="kobo.307.1">, we will be able to navigate back </span><span><span class="kobospan" id="kobo.308.1">to </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.309.1">PetsScreen</span></strong></span><span><span class="kobospan" id="kobo.310.1">.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.311.1">So far, we have been able to navigate from </span><strong class="source-inline"><span class="kobospan" id="kobo.312.1">PetsScreen</span></strong><span class="kobospan" id="kobo.313.1"> to </span><strong class="source-inline"><span class="kobospan" id="kobo.314.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.315.1">. </span><span class="kobospan" id="kobo.315.2">However, we are not passing any data to </span><strong class="source-inline"><span class="kobospan" id="kobo.316.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.317.1">. </span><span class="kobospan" id="kobo.317.2">In the next section, we will learn how to pass data </span><span><span class="kobospan" id="kobo.318.1">to </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.319.1">PetDetailsScreen</span></strong></span><span><span class="kobospan" id="kobo.320.1">.</span></span></p>
<h1 id="_idParaDest-88" class="calibre6"><a id="_idTextAnchor097" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.321.1">Passing arguments to destinations</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.322.1">In our </span><strong class="source-inline"><span class="kobospan" id="kobo.323.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.324.1">, we need to remove the hardcoded cat IDs and tags and pass them</span><a id="_idIndexMarker315" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.325.1"> from the </span><strong class="source-inline"><span class="kobospan" id="kobo.326.1">PetList</span></strong><span class="kobospan" id="kobo.327.1"> composable. </span><span class="kobospan" id="kobo.327.2">Follow </span><span><span class="kobospan" id="kobo.328.1">these steps:</span></span></p>
<ol class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.329.1">Let us head </span><a id="_idIndexMarker316" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.330.1">over to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.331.1">PetDetailsScreenContent</span></strong><span class="kobospan" id="kobo.332.1"> composable inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.333.1">PetDetailsScreen.kt</span></strong><span class="kobospan" id="kobo.334.1"> file and modify it </span><span><span class="kobospan" id="kobo.335.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.336.1">
@OptIn(ExperimentalLayoutApi::class)
@Composable
fun PetDetailsScreenContent(modifier: Modifier, cat: Cat) {
    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        AsyncImage(
            model = "https://cataas.com/cat/${cat.id}",
            contentDescription = "Cute cat",
            modifier = Modifier
                .fillMaxWidth()
                .height(200.dp),
            contentScale = ContentScale.FillWidth
        )
        FlowRow(
            modifier = Modifier
                .padding(start = 6.dp, end = 6.dp)
        ) {
            repeat(cat.tags.size) {
                SuggestionChip(
                    modifier = Modifier
                        .padding(start = 3.dp, end = 3.dp),
                    onClick = { },
                    label = {
                        Text(text = cat.tags[it])
                    }
                )
            }
        }
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.337.1">We have </span><a id="_idIndexMarker317" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.338.1">added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.339.1">cat</span></strong><span class="kobospan" id="kobo.340.1"> parameter</span><a id="_idIndexMarker318" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.341.1"> to the composable. </span><span class="kobospan" id="kobo.341.2">We have used the </span><strong class="source-inline"><span class="kobospan" id="kobo.342.1">cat</span></strong><span class="kobospan" id="kobo.343.1"> object to display the cat image </span><span><span class="kobospan" id="kobo.344.1">and tags.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.345.1">Next, let us head over to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.346.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.347.1"> composable and modify it </span><span><span class="kobospan" id="kobo.348.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.349.1">
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun PetDetailsScreen(onBackPressed: () -&gt; Unit, cat: Cat) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Text(text = "Pet Details")
                },
                colors =  TopAppBarDefaults.smallTopAppBarColors(
                    containerColor = MaterialTheme.colorScheme.primary,
                ),
                navigationIcon = {
                    IconButton(
                        onClick = onBackPressed,
                        content = {
                            Icon(
                                imageVector = Icons.Default.ArrowBack,
                                contentDescription = "Back"
                            )
                        }
                    )
                }
            )
        },
        content = { paddingValues -&gt;
            PetDetailsScreenContent(
                modifier = Modifier
                    .padding(paddingValues),
                cat = cat
            )
        }
    )
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.350.1">Here, we</span><a id="_idIndexMarker319" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.351.1"> have added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.352.1">cat</span></strong><span class="kobospan" id="kobo.353.1"> parameter to the composable. </span><span class="kobospan" id="kobo.353.2">We have passed the </span><strong class="source-inline"><span class="kobospan" id="kobo.354.1">cat</span></strong><span class="kobospan" id="kobo.355.1"> object to the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.356.1">PetDetailsScreenContent</span></strong></span><span><span class="kobospan" id="kobo.357.1"> composable.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.358.1">Next, let</span><a id="_idIndexMarker320" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.359.1"> us head over to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.360.1">AppNavigation</span></strong><span class="kobospan" id="kobo.361.1"> composable and add the logic for passing the </span><strong class="source-inline1"><span class="kobospan" id="kobo.362.1">cat</span></strong><span class="kobospan" id="kobo.363.1"> object to </span><strong class="source-inline1"><span class="kobospan" id="kobo.364.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.365.1">. </span><span class="kobospan" id="kobo.365.2">We need to first modify the composable for </span><strong class="source-inline1"><span class="kobospan" id="kobo.366.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.367.1">, </span><span><span class="kobospan" id="kobo.368.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.369.1">
composable(
    route = "${Screens.PetDetailsScreen.route}/{cat}",
    arguments = listOf(
        navArgument("cat") {
            type = NavType.StringType
        }
    )
){
    PetDetailsScreen(
        onBackPressed = {
            navController.popBackStack()
        },
        cat = Json.decodeFromString(it.arguments?.getString("cat") ?: "")
    )
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.370.1">Let’s</span><a id="_idIndexMarker321" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.371.1"> explain </span><span><span class="kobospan" id="kobo.372.1">the changes:</span></span></p><ul class="calibre17"><li class="calibre15"><span class="kobospan" id="kobo.373.1">On the </span><a id="_idIndexMarker322" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.374.1">route, we have added a new parameter called </span><strong class="source-inline1"><span class="kobospan" id="kobo.375.1">cat</span></strong><span class="kobospan" id="kobo.376.1">. </span><span class="kobospan" id="kobo.376.2">This is the parameter we will use to pass the </span><strong class="source-inline1"><span class="kobospan" id="kobo.377.1">cat</span></strong><span class="kobospan" id="kobo.378.1"> object </span><span><span class="kobospan" id="kobo.379.1">to </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.380.1">PetDetailsScreen</span></strong></span><span><span class="kobospan" id="kobo.381.1">.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.382.1">We have added a new </span><strong class="source-inline1"><span class="kobospan" id="kobo.383.1">arguments</span></strong><span class="kobospan" id="kobo.384.1"> parameter. </span><span class="kobospan" id="kobo.384.2">This parameter is used to pass arguments to the destination screen. </span><span class="kobospan" id="kobo.384.3">We have added </span><strong class="source-inline1"><span class="kobospan" id="kobo.385.1">navArgument</span></strong><span class="kobospan" id="kobo.386.1"> for the </span><strong class="source-inline1"><span class="kobospan" id="kobo.387.1">cat</span></strong><span class="kobospan" id="kobo.388.1"> parameter. </span><span class="kobospan" id="kobo.388.2">We have set the type to be </span><strong class="source-inline1"><span class="kobospan" id="kobo.389.1">String</span></strong><span class="kobospan" id="kobo.390.1">. </span><span class="kobospan" id="kobo.390.2">This is because we will be passing a string representation of the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.391.1">cat</span></strong></span><span><span class="kobospan" id="kobo.392.1"> object.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.393.1">We pass the </span><strong class="source-inline1"><span class="kobospan" id="kobo.394.1">cat</span></strong><span class="kobospan" id="kobo.395.1"> object to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.396.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.397.1"> composable. </span><span class="kobospan" id="kobo.397.2">We have used </span><strong class="source-inline1"><span class="kobospan" id="kobo.398.1">Json.decodeFromString()</span></strong><span class="kobospan" id="kobo.399.1"> from the Kotlinx Serialization library that we learned about in </span><a href="B19779_06.xhtml#_idTextAnchor084" class="calibre3 pcalibre pcalibre1"><em class="italic"><span class="kobospan" id="kobo.400.1">Chapter 6</span></em></a><span class="kobospan" id="kobo.401.1"> to convert the string value of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.402.1">cat</span></strong><span class="kobospan" id="kobo.403.1"> object into a </span><strong class="source-inline1"><span class="kobospan" id="kobo.404.1">Cat</span></strong><span class="kobospan" id="kobo.405.1"> object. </span><span class="kobospan" id="kobo.405.2">We have used the </span><strong class="source-inline1"><span class="kobospan" id="kobo.406.1">arguments</span></strong><span class="kobospan" id="kobo.407.1"> property of </span><strong class="source-inline1"><span class="kobospan" id="kobo.408.1">NavBackStackEntry</span></strong><span class="kobospan" id="kobo.409.1"> to get the string value of the </span><strong class="source-inline1"><span class="kobospan" id="kobo.410.1">cat</span></strong><span class="kobospan" id="kobo.411.1"> object. </span><span class="kobospan" id="kobo.411.2">We have used the Elvis operator to return an empty string if the </span><strong class="source-inline1"><span class="kobospan" id="kobo.412.1">arguments</span></strong><span class="kobospan" id="kobo.413.1"> property </span><span><span class="kobospan" id="kobo.414.1">is null.</span></span></li></ul></li> <li class="calibre15"><span class="kobospan" id="kobo.415.1">Lastly, we need to modify the </span><strong class="source-inline1"><span class="kobospan" id="kobo.416.1">onPetClicked</span></strong><span class="kobospan" id="kobo.417.1"> callback of </span><strong class="source-inline1"><span class="kobospan" id="kobo.418.1">PetsScreen</span></strong><span class="kobospan" id="kobo.419.1"> in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.420.1">AppNavigation</span></strong><span class="kobospan" id="kobo.421.1"> composable, </span><span><span class="kobospan" id="kobo.422.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.423.1">
composable(Screens.PetsScreen.route) {
    PetsScreen(
        onPetClicked = { cat -&gt;
            navController.navigate(
                "${Screens.PetDetailsScreen.route}/${Json.encodeToString(cat)}"
            )
        }
    )
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.424.1">We have </span><a id="_idIndexMarker323" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.425.1">modified the </span><strong class="source-inline"><span class="kobospan" id="kobo.426.1">navigate()</span></strong><span class="kobospan" id="kobo.427.1"> function </span><a id="_idIndexMarker324" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.428.1">to pass the </span><strong class="source-inline"><span class="kobospan" id="kobo.429.1">Cat</span></strong><span class="kobospan" id="kobo.430.1"> object as a string. </span><span class="kobospan" id="kobo.430.2">We also used </span><strong class="source-inline"><span class="kobospan" id="kobo.431.1">Json.encodeToString()</span></strong><span class="kobospan" id="kobo.432.1"> from the Kotlinx Serialization library to convert the </span><strong class="source-inline"><span class="kobospan" id="kobo.433.1">Cat</span></strong><span class="kobospan" id="kobo.434.1"> object into a string. </span><span class="kobospan" id="kobo.434.2">This will be passed as an argument to </span><strong class="source-inline"><span class="kobospan" id="kobo.435.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.436.1"> when we click on a pet item in </span><span><span class="kobospan" id="kobo.437.1">the list.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.438.1">Build and run the app. </span><span class="kobospan" id="kobo.438.2">Click on any cute cat picture from the list and now the details screen will display the cat image and tag of the cute cat that </span><span><span class="kobospan" id="kobo.439.1">we selected:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer086">
<span class="kobospan" id="kobo.440.1"><img alt="Figure 7.4 – Pet Details" src="image/B19779_07_04.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.441.1">Figure 7.4 – Pet Details</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.442.1">We have</span><a id="_idIndexMarker325" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.443.1"> now been able to pass data to </span><strong class="source-inline"><span class="kobospan" id="kobo.444.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.445.1">. </span><span class="kobospan" id="kobo.445.2">We </span><a id="_idIndexMarker326" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.446.1">have learned how to navigate to a compose destination and pass data to the details screen. </span><span class="kobospan" id="kobo.446.2">In the next section, we will learn how to handle navigation in foldables and </span><span><span class="kobospan" id="kobo.447.1">large screens.</span></span></p>
<h1 id="_idParaDest-89" class="calibre6"><a id="_idTextAnchor098" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.448.1">Navigation in foldables and large screens</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.449.1">In the </span><em class="italic"><span class="kobospan" id="kobo.450.1">Designing UIs for large screens and foldables</span></em><span class="kobospan" id="kobo.451.1"> section of </span><a href="B19779_04.xhtml#_idTextAnchor055" class="calibre3 pcalibre pcalibre1"><span><em class="italic"><span class="kobospan" id="kobo.452.1">Chapter 4</span></em></span></a><span class="kobospan" id="kobo.453.1">, we learned</span><a id="_idIndexMarker327" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.454.1"> about the </span><strong class="source-inline"><span class="kobospan" id="kobo.455.1">WindowSize</span></strong><span class="kobospan" id="kobo.456.1"> class and how we can make our apps responsive in foldable devices and large screens. </span><span class="kobospan" id="kobo.456.2">In this section, we are going to make our Pets app responsive in foldable devices and</span><a id="_idIndexMarker328" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.457.1"> large screens. </span><span class="kobospan" id="kobo.457.2">We are going to make several changes, </span><span><span class="kobospan" id="kobo.458.1">as follows:</span></span></p>
<ul class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.459.1">Add a bottom bar to </span><strong class="source-inline1"><span class="kobospan" id="kobo.460.1">PetsScreen</span></strong><span class="kobospan" id="kobo.461.1">, which will have </span><span><span class="kobospan" id="kobo.462.1">several options.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.463.1">Add </span><strong class="source-inline1"><span class="kobospan" id="kobo.464.1">NavigationRail</span></strong><span class="kobospan" id="kobo.465.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.466.1">NavigationDrawer</span></strong><span class="kobospan" id="kobo.467.1">, which will be used depending on the </span><span><span class="kobospan" id="kobo.468.1">screen size.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.469.1">Observe the device’s foldable state and change the layout of the app depending on the </span><span><span class="kobospan" id="kobo.470.1">foldable state.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.471.1">Depending on the screen size, we will also change the content type. </span><span class="kobospan" id="kobo.471.2">On large screens, we will display the list of cats and the details of the selected cat side by side. </span><span class="kobospan" id="kobo.471.3">On small screens, we will display the list of cats and the details of the selected cat on </span><span><span class="kobospan" id="kobo.472.1">different screens.</span></span></li>
</ul>
<p class="calibre4"><span class="kobospan" id="kobo.473.1">Quite a lot of </span><a id="_idIndexMarker329" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.474.1">changes are required. </span><span class="kobospan" id="kobo.474.2">The good thing is that I have already made the changes and you can find the final version in the </span><strong class="source-inline"><span class="kobospan" id="kobo.475.1">chapterseven</span></strong><span class="kobospan" id="kobo.476.1"> folder in the project’s repository. </span><span class="kobospan" id="kobo.476.2">Let us go through the changes one </span><span><span class="kobospan" id="kobo.477.1">by one:</span></span></p>
<ol class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.478.1">We will start by creating a </span><strong class="source-inline1"><span class="kobospan" id="kobo.479.1">sealed interface</span></strong><span class="kobospan" id="kobo.480.1"> named </span><strong class="source-inline1"><span class="kobospan" id="kobo.481.1">NavigationType</span></strong><span class="kobospan" id="kobo.482.1"> that represents the different types of navigation we will be using in our app. </span><span class="kobospan" id="kobo.482.2">Let us create a new file inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.483.1">navigation</span></strong><span class="kobospan" id="kobo.484.1"> package called </span><strong class="source-inline1"><span class="kobospan" id="kobo.485.1">NavigationType.kt</span></strong><span class="kobospan" id="kobo.486.1"> and add the </span><span><span class="kobospan" id="kobo.487.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.488.1">
sealed interface NavigationType {
    object BottomNavigation : NavigationType
    object NavigationDrawer : NavigationType
    object NavigationRail : NavigationType
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.489.1">We are using a sealed interface instead of a sealed class here. </span><span class="kobospan" id="kobo.489.2">This is because we do not need to hold any state in our </span><strong class="source-inline"><span class="kobospan" id="kobo.490.1">NavigationType</span></strong><span class="kobospan" id="kobo.491.1">. </span><span class="kobospan" id="kobo.491.2">We also do not need to pass properties to any of the </span><strong class="source-inline"><span class="kobospan" id="kobo.492.1">NavigationTypes</span></strong><span class="kobospan" id="kobo.493.1">. </span><span class="kobospan" id="kobo.493.2">We have three options: </span><strong class="source-inline"><span class="kobospan" id="kobo.494.1">BottomNavigation</span></strong><span class="kobospan" id="kobo.495.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.496.1">NavigationDrawer</span></strong><span class="kobospan" id="kobo.497.1">, and </span><strong class="source-inline"><span class="kobospan" id="kobo.498.1">NavigationRail</span></strong><span class="kobospan" id="kobo.499.1">. </span><span class="kobospan" id="kobo.499.2">We will be using these options to change the navigation type depending on the </span><span><span class="kobospan" id="kobo.500.1">screen size.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.501.1">Next, let us</span><a id="_idIndexMarker330" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.502.1"> create yet another sealed interface called </span><strong class="source-inline1"><span class="kobospan" id="kobo.503.1">ContentType</span></strong><span class="kobospan" id="kobo.504.1">. </span><span class="kobospan" id="kobo.504.2">This interface will be used to change the content display type depending on the screen size. </span><span class="kobospan" id="kobo.504.3">Let us create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.505.1">ContentType.kt</span></strong><span class="kobospan" id="kobo.506.1"> still inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.507.1">navigation</span></strong><span class="kobospan" id="kobo.508.1"> package and add the </span><span><span class="kobospan" id="kobo.509.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.510.1">
sealed interface ContentType {
    object List : ContentType
    object ListAndDetail : ContentType
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.511.1">This </span><a id="_idIndexMarker331" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.512.1">represents the two modes in which we can display our content depending on the screen size. </span><span class="kobospan" id="kobo.512.2">We have the </span><strong class="source-inline"><span class="kobospan" id="kobo.513.1">List</span></strong><span class="kobospan" id="kobo.514.1"> mode, which displays the list of cats only. </span><span class="kobospan" id="kobo.514.2">We also have the </span><strong class="source-inline"><span class="kobospan" id="kobo.515.1">ListAndDetail</span></strong><span class="kobospan" id="kobo.516.1"> mode, which displays the list of cats and the details of the selected cat side </span><span><span class="kobospan" id="kobo.517.1">by side.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.518.1">Next, in our </span><strong class="source-inline1"><span class="kobospan" id="kobo.519.1">Screens.kt</span></strong><span class="kobospan" id="kobo.520.1"> file, we have to add a new destination screen called </span><strong class="source-inline1"><span class="kobospan" id="kobo.521.1">FavoritesScreen</span></strong><span class="kobospan" id="kobo.522.1">. </span><span class="kobospan" id="kobo.522.2">The final code for the file should look </span><span><span class="kobospan" id="kobo.523.1">like this:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.524.1">
sealed class Screens(val route: String) {
    object PetsScreen : Screens("pets")
    object PetDetailsScreen : Screens("petDetails")
    object FavoritePetsScreen : Screens("favoritePets")
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.525.1">We now have three destinations for </span><span><span class="kobospan" id="kobo.526.1">our app.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.527.1">Next, let us add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.528.1">WindowSize</span></strong><span class="kobospan" id="kobo.529.1"> dependencies to the libraries section in the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.530.1">libs.versions.toml</span></strong></span><span><span class="kobospan" id="kobo.531.1"> file:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.532.1">
compose-window-size = "androidx.compose.material3:material3-window-size-class:1.2.0-alpha07"
androidx-window = "androidx.window:window:1.1.0"</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.533.1">We also</span><a id="_idIndexMarker332" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.534.1"> need to add the dependencies to our app module’s </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.535.1">build.gradle.kts</span></strong></span><span><span class="kobospan" id="kobo.536.1"> file:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.537.1">
implementation(libs.compose.window.size)
implementation(libs.androidx.window)</span></pre><p class="calibre4"><span class="kobospan" id="kobo.538.1">Do a Gradle sync to be able to add the dependencies to </span><span><span class="kobospan" id="kobo.539.1">our project.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.540.1">Next, we </span><a id="_idIndexMarker333" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.541.1">need to create the composables for </span><strong class="source-inline1"><span class="kobospan" id="kobo.542.1">NavigationRail</span></strong><span class="kobospan" id="kobo.543.1">, </span><strong class="source-inline1"><span class="kobospan" id="kobo.544.1">NavigationDrawer</span></strong><span class="kobospan" id="kobo.545.1">, and </span><strong class="source-inline1"><span class="kobospan" id="kobo.546.1">BottomNavigation</span></strong><span class="kobospan" id="kobo.547.1">. </span><span class="kobospan" id="kobo.547.2">Let us create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.548.1">PetsNavigationRail.kt</span></strong><span class="kobospan" id="kobo.549.1"> inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.550.1">view</span></strong><span class="kobospan" id="kobo.551.1"> package and add the </span><span><span class="kobospan" id="kobo.552.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.553.1">
@Composable
fun PetsNavigationRail(
    onFavoriteClicked: () -&gt; Unit,
    onHomeClicked: () -&gt; Unit,
    onDrawerClicked: () -&gt; Unit
) {
    val items = listOf(Screens.PetsScreen, Screens.FavoritePetsScreen)
    val selectedItem = remember { mutableStateOf(items[0]) }
    NavigationRail(
        modifier = Modifier
            .fillMaxHeight()
    ) {
        NavigationRailItem(
            selected = false,
            onClick = onDrawerClicked,
            icon = {
                Icon(
                    imageVector = Icons.Default.Menu,
                    contentDescription = "Menu Icon"
                )
            }
        )
        NavigationRailItem(
            selected = selectedItem.value == Screens.PetsScreen,
            onClick = {
                onHomeClicked()
                selectedItem.value = Screens.PetsScreen
            },
            icon = {
                Icon(
                    imageVector = Icons.Default.Home,
                    contentDescription = "Home Icon"
                )
            }
        )
        NavigationRailItem(
            selected = selectedItem.value == Screens.FavoritePetsScreen,
            onClick = {
                onFavoriteClicked()
                selectedItem.value = Screens.FavoritePetsScreen
            },
            icon = {
                Icon(
                    imageVector = Icons.Default.Favorite,
                    contentDescription = "Favorite Icon"
                )
            }
        )
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.554.1">In the preceding code, we created the </span><strong class="source-inline"><span class="kobospan" id="kobo.555.1">PetsNavigationRail()</span></strong><span class="kobospan" id="kobo.556.1"> composable, which has three parameters: </span><strong class="source-inline"><span class="kobospan" id="kobo.557.1">onFavoriteClicked</span></strong><span class="kobospan" id="kobo.558.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.559.1">onHomeClicked</span></strong><span class="kobospan" id="kobo.560.1">, and </span><strong class="source-inline"><span class="kobospan" id="kobo.561.1">onDrawerClicked</span></strong><span class="kobospan" id="kobo.562.1">. </span><span class="kobospan" id="kobo.562.2">The first two are callbacks that will be used to navigate to the different screens. </span><span class="kobospan" id="kobo.562.3">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.563.1">onDrawerClicked</span></strong><span class="kobospan" id="kobo.564.1"> callback to close or open the drawer when the user interacts </span><a id="_idIndexMarker334" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.565.1">with it. </span><span class="kobospan" id="kobo.565.2">At the top, we</span><a id="_idIndexMarker335" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.566.1"> have the </span><strong class="source-inline"><span class="kobospan" id="kobo.567.1">items</span></strong><span class="kobospan" id="kobo.568.1"> variable, which holds a list of all our screens, and the </span><strong class="source-inline"><span class="kobospan" id="kobo.569.1">selectedItem</span></strong><span class="kobospan" id="kobo.570.1"> variable, which holds the currently selected screen. </span><span class="kobospan" id="kobo.570.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.571.1">NavigationRail</span></strong><span class="kobospan" id="kobo.572.1"> composable from the Material 3 library to display the navigation rail. </span><span class="kobospan" id="kobo.572.2">To add items to </span><strong class="source-inline"><span class="kobospan" id="kobo.573.1">NavigationRail</span></strong><span class="kobospan" id="kobo.574.1">, we use the </span><strong class="source-inline"><span class="kobospan" id="kobo.575.1">NavigationRailItem</span></strong><span class="kobospan" id="kobo.576.1"> composable. </span><span class="kobospan" id="kobo.576.2">We pass in the selected state of the item, the </span><strong class="source-inline"><span class="kobospan" id="kobo.577.1">onClick</span></strong><span class="kobospan" id="kobo.578.1"> callback, and the icon </span><span><span class="kobospan" id="kobo.579.1">to display.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.580.1">Next, let us create the </span><strong class="source-inline1"><span class="kobospan" id="kobo.581.1">PetsBottomNavigationBar</span></strong><span class="kobospan" id="kobo.582.1"> composable. </span><span class="kobospan" id="kobo.582.2">Let us create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.583.1">PetsBottomNavigationBar.kt</span></strong><span class="kobospan" id="kobo.584.1"> inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.585.1">view</span></strong><span class="kobospan" id="kobo.586.1"> package and add the </span><span><span class="kobospan" id="kobo.587.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.588.1">
@Composable
fun PetsBottomNavigationBar(
    onFavoriteClicked: () -&gt; Unit,
    onHomeClicked: () -&gt; Unit
) {
    val items = listOf(Screens.PetsScreen, Screens.FavoritePetsScreen)
    val selectedItem = remember { mutableStateOf(items[0]) }
    NavigationBar(
        modifier = Modifier
            .fillMaxWidth(),
        containerColor = MaterialTheme.colorScheme.background
    ) {
        NavigationBarItem(
            selected = selectedItem.value == Screens.PetsScreen,
            onClick = {
                onHomeClicked()
                selectedItem.value = Screens.PetsScreen
            },
            icon = {
                Icon(
                    imageVector = Icons.Default.Home,
                    contentDescription = "Home Icon"
                )
            }
        )
        NavigationBarItem(
            selected = selectedItem.value == Screens.FavoritePetsScreen,
            onClick = {
                onFavoriteClicked()
                selectedItem.value = Screens.FavoritePetsScreen
            },
            icon = {
                Icon(
                    imageVector = Icons.Default.Favorite,
                    contentDescription = "Favorite Icon"
                )
            }
        )
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.589.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.590.1">PetsBottomNavigationBar</span></strong><span class="kobospan" id="kobo.591.1"> composable is similar to the</span><strong class="source-inline"><span class="kobospan" id="kobo.592.1"> PetsNavigationRail</span></strong><span class="kobospan" id="kobo.593.1"> composable. </span><span class="kobospan" id="kobo.593.2">The only difference is that we are using the </span><strong class="source-inline"><span class="kobospan" id="kobo.594.1">NavigationBar</span></strong><span class="kobospan" id="kobo.595.1"> composable instead of the </span><strong class="source-inline"><span class="kobospan" id="kobo.596.1">NavigationRail</span></strong><span class="kobospan" id="kobo.597.1"> composable. </span><span class="kobospan" id="kobo.597.2">We have the home and favorite items. </span><span class="kobospan" id="kobo.597.3">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.598.1">NavigationBarItem</span></strong><span class="kobospan" id="kobo.599.1"> composable to add items to </span><strong class="source-inline"><span class="kobospan" id="kobo.600.1">NavigationBar</span></strong><span class="kobospan" id="kobo.601.1">. </span><span class="kobospan" id="kobo.601.2">We pass in the</span><a id="_idIndexMarker336" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.602.1"> selected state of the item, the </span><strong class="source-inline"><span class="kobospan" id="kobo.603.1">onClick</span></strong><span class="kobospan" id="kobo.604.1"> callback, and the icon </span><span><span class="kobospan" id="kobo.605.1">to display.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.606.1">Next, let</span><a id="_idIndexMarker337" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.607.1"> us create the </span><strong class="source-inline1"><span class="kobospan" id="kobo.608.1">PetsNavigationDrawer</span></strong><span class="kobospan" id="kobo.609.1"> composable. </span><span class="kobospan" id="kobo.609.2">Let us create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.610.1">PetsNavigationDrawer.kt</span></strong><span class="kobospan" id="kobo.611.1"> inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.612.1">view</span></strong><span class="kobospan" id="kobo.613.1"> package and add the </span><span><span class="kobospan" id="kobo.614.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.615.1">
@Composable
fun PetsNavigationDrawer(
    onFavoriteClicked: () -&gt; Unit,
    onHomeClicked: () -&gt; Unit,
    onDrawerClicked: () -&gt; Unit = {}
) {
    val items = listOf(Screens.PetsScreen, Screens.FavoritePetsScreen)
    val selectedItem = remember { mutableStateOf(items[0]) }
    Column(
        modifier = Modifier
            .wrapContentWidth()
            .fillMaxHeight()
            .background(MaterialTheme.colorScheme.inverseOnSurface)
            .padding(16.dp)
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Text(
                text = "Chapter Seven",
                style = MaterialTheme.typography.titleMedium,
                color = MaterialTheme.colorScheme.primary
            )
            IconButton(
                onClick = onDrawerClicked
            ) {
                Icon(
                    imageVector = Icons.Default.Menu,
                    contentDescription = "Navigation Drawer Icon"
                )
            }
        }
        NavigationDrawerItem(
            label = { Text(text = "Pets") },
            selected = selectedItem.value == Screens.PetsScreen,
            onClick = {
                onHomeClicked()
                selectedItem.value = Screens.PetsScreen
            },
            icon = {
                Icon(
                    imageVector = Icons.Default.Home,
                    contentDescription = "Home Icon"
                )
            }
        )
        NavigationDrawerItem(
            label = { Text(text = "Favorites") },
            selected = selectedItem.value == Screens.FavoritePetsScreen,
            onClick = {
                onFavoriteClicked()
                selectedItem.value = Screens.FavoritePetsScreen
            },
            icon = {
                Icon(
                    imageVector = Icons.Default.Favorite,
                    contentDescription = "Favorite Icon"
                )
            }
        )
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.616.1">We used the </span><strong class="source-inline"><span class="kobospan" id="kobo.617.1">NavigationDrawer</span></strong><span class="kobospan" id="kobo.618.1"> composable from the Material 3 library to display the navigation drawer. </span><span class="kobospan" id="kobo.618.2">We used the </span><strong class="source-inline"><span class="kobospan" id="kobo.619.1">NavigationDrawerItem</span></strong><span class="kobospan" id="kobo.620.1"> composable to add items to </span><strong class="source-inline"><span class="kobospan" id="kobo.621.1">NavigationDrawer</span></strong><span class="kobospan" id="kobo.622.1">. </span><span class="kobospan" id="kobo.622.2">We passed in the label, the selected</span><a id="_idIndexMarker338" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.623.1"> state of the item, the </span><strong class="source-inline"><span class="kobospan" id="kobo.624.1">onClick</span></strong><span class="kobospan" id="kobo.625.1"> callback, and the icon </span><span><span class="kobospan" id="kobo.626.1">to display.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.627.1">Since </span><a id="_idIndexMarker339" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.628.1">our </span><strong class="source-inline1"><span class="kobospan" id="kobo.629.1">PetsNavigationDrawer</span></strong><span class="kobospan" id="kobo.630.1">, </span><strong class="source-inline1"><span class="kobospan" id="kobo.631.1">PetsNavigationRail</span></strong><span class="kobospan" id="kobo.632.1">, and </span><strong class="source-inline1"><span class="kobospan" id="kobo.633.1">PetsBottomNavigationBar</span></strong><span class="kobospan" id="kobo.634.1"> composables have </span><strong class="source-inline1"><span class="kobospan" id="kobo.635.1">FavoritesScreen</span></strong><span class="kobospan" id="kobo.636.1">, let us create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.637.1">FavoritePetsScreen.kt</span></strong><span class="kobospan" id="kobo.638.1"> inside the view package and add the </span><span><span class="kobospan" id="kobo.639.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.640.1">
@Composable
fun FavoritePetsScreen() {
    Column(
        modifier = Modifier
            .fillMaxSize(),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        Text(text = "Favorite Pets")
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.641.1">This is a simple composable that displays the text </span><strong class="source-inline"><span class="kobospan" id="kobo.642.1">"Favorite Pets"</span></strong><span class="kobospan" id="kobo.643.1">. </span><span class="kobospan" id="kobo.643.2">We will use this composable as the content of </span><strong class="source-inline"><span class="kobospan" id="kobo.644.1">FavoritesScreen</span></strong><span class="kobospan" id="kobo.645.1">. </span><span class="kobospan" id="kobo.645.2">We also need to refactor our </span><strong class="source-inline"><span class="kobospan" id="kobo.646.1">AppNavigation()</span></strong><span class="kobospan" id="kobo.647.1"> composable to make it ready to handle the different navigation and content types. </span><span class="kobospan" id="kobo.647.2">The final modified composable should look </span><span><span class="kobospan" id="kobo.648.1">like this:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.649.1">@Composable
fun AppNavigation(
    contentType: ContentType,
    navHostController: NavHostController = rememberNavController()
) {
    NavHost(
        navController = navHostController,
        startDestination = Screens.PetsScreen.route
    ) {
        composable(Screens.PetsScreen.route) {
            PetsScreen(
                onPetClicked = { cat -&gt;
                    navHostController.navigate(
                        "${Screens.PetDetailsScreen.route}/${Json.encodeToString(cat)}"
                    )
                },
                contentType = contentType
            )
        }
        composable(
            route = "${Screens.PetDetailsScreen.route}/{cat}",
            arguments = listOf(
                navArgument("cat") {
                    type = NavType.StringType
                }
            )
        ) {
            PetDetailsScreen(
                onBackPressed = {
                    navHostController.popBackStack()
                },
                cat = Json.decodeFromString(it.arguments?.getString("cat") ?: "")
            )
        }
        composable(Screens.FavoritePetsScreen.route) {
            FavoritePetsScreen()
        }
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.650.1">Let’s </span><a id="_idIndexMarker340" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.651.1">highlight</span><a id="_idIndexMarker341" class="calibre3 pcalibre pcalibre1"/> <span><span class="kobospan" id="kobo.652.1">the changes:</span></span></p><ul class="calibre17"><li class="calibre15"><span class="kobospan" id="kobo.653.1">Our </span><strong class="source-inline1"><span class="kobospan" id="kobo.654.1">AppNavigation()</span></strong><span class="kobospan" id="kobo.655.1"> composable now takes in a </span><strong class="source-inline1"><span class="kobospan" id="kobo.656.1">contentType</span></strong><span class="kobospan" id="kobo.657.1"> parameter of type </span><strong class="source-inline1"><span class="kobospan" id="kobo.658.1">ContentType</span></strong><span class="kobospan" id="kobo.659.1">. </span><span class="kobospan" id="kobo.659.2">This is the parameter we will use to change the content type depending on the screen size. </span><span class="kobospan" id="kobo.659.3">We also pass in a </span><strong class="source-inline1"><span class="kobospan" id="kobo.660.1">navHostController</span></strong><span class="kobospan" id="kobo.661.1"> parameter of type </span><strong class="source-inline1"><span class="kobospan" id="kobo.662.1">NavHostController</span></strong><span class="kobospan" id="kobo.663.1">. </span><span class="kobospan" id="kobo.663.2">This is the parameter we will use to navigate to different screens in our app. </span><span class="kobospan" id="kobo.663.3">Previously, </span><strong class="source-inline1"><span class="kobospan" id="kobo.664.1">navHostController</span></strong><span class="kobospan" id="kobo.665.1"> was created inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.666.1">AppNavigation()</span></strong><span class="kobospan" id="kobo.667.1"> composable. </span><span class="kobospan" id="kobo.667.2">We have moved it to the call site so that we can be able to use the same </span><strong class="source-inline1"><span class="kobospan" id="kobo.668.1">navHostController</span></strong><span class="kobospan" id="kobo.669.1"> in </span><span><span class="kobospan" id="kobo.670.1">different composables.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.671.1">We have used the new </span><strong class="source-inline1"><span class="kobospan" id="kobo.672.1">PetsScreen()</span></strong><span class="kobospan" id="kobo.673.1"> composable, which takes in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.674.1">contentType</span></strong><span class="kobospan" id="kobo.675.1"> parameter. </span><span class="kobospan" id="kobo.675.2">Same as before, we still pass </span><strong class="source-inline1"><span class="kobospan" id="kobo.676.1">onPetClicked</span></strong><span class="kobospan" id="kobo.677.1">, which navigates to </span><strong class="source-inline1"><span class="kobospan" id="kobo.678.1">PetDetailsScreen</span></strong><span class="kobospan" id="kobo.679.1">. </span><span class="kobospan" id="kobo.679.2">Previously, we were using the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.680.1">PetList</span></strong></span><span><span class="kobospan" id="kobo.681.1"> composable.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.682.1">Lastly, we </span><a id="_idIndexMarker342" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.683.1">have added our new </span><strong class="source-inline1"><span class="kobospan" id="kobo.684.1">FavoritePetsScreen</span></strong><span class="kobospan" id="kobo.685.1"> destination to the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.686.1">NavHost</span></strong></span><span><span class="kobospan" id="kobo.687.1"> composable.</span></span></li></ul></li> <li class="calibre15"><span class="kobospan" id="kobo.688.1">Let us see</span><a id="_idIndexMarker343" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.689.1"> what the new update </span><strong class="source-inline1"><span class="kobospan" id="kobo.690.1">PetsScreen</span></strong><span class="kobospan" id="kobo.691.1"> composable looks like. </span><span class="kobospan" id="kobo.691.2">Let us head over to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.692.1">PetsScreen.kt</span></strong><span class="kobospan" id="kobo.693.1"> file and modify the composable </span><span><span class="kobospan" id="kobo.694.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.695.1">
@Composable
fun PetsScreen(
    onPetClicked: (Cat) -&gt; Unit,
    contentType: ContentType,
) {
    val petsViewModel: PetsViewModel = koinViewModel()
    val petsUIState by petsViewModel.petsUIState.collectAsStateWithLifecycle()
    PetsScreenContent(
        modifier = Modifier
            .fillMaxSize(),
        onPetClicked = onPetClicked,
        contentType = contentType,
        petsUIState = petsUIState
    )
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.696.1">We have added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.697.1">contentType</span></strong><span class="kobospan" id="kobo.698.1"> parameter to the composable. </span><span class="kobospan" id="kobo.698.2">We have also added a new </span><strong class="source-inline"><span class="kobospan" id="kobo.699.1">petsUIState</span></strong><span class="kobospan" id="kobo.700.1"> parameter. </span><span class="kobospan" id="kobo.700.2">This is the UI state of </span><strong class="source-inline"><span class="kobospan" id="kobo.701.1">PetsScreen</span></strong><span class="kobospan" id="kobo.702.1">. </span><span class="kobospan" id="kobo.702.2">We will use this state to display the list </span><span><span class="kobospan" id="kobo.703.1">of cats.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.704.1">Next, create</span><a id="_idIndexMarker344" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.705.1"> a new file </span><a id="_idIndexMarker345" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.706.1">called </span><strong class="source-inline1"><span class="kobospan" id="kobo.707.1">PetsScreenContent.kt</span></strong><span class="kobospan" id="kobo.708.1"> and add the </span><span><span class="kobospan" id="kobo.709.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.710.1">
@Composable
fun PetsScreenContent(
    modifier: Modifier,
    onPetClicked: (Cat) -&gt; Unit,
    contentType: ContentType,
    petsUIState: PetsUIState
) {
    Column(
        modifier = modifier
            .padding(16.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        AnimatedVisibility(
            visible = petsUIState.isLoading
        ) {
            CircularProgressIndicator()
        }
        AnimatedVisibility(
            visible = petsUIState.pets.isNotEmpty()
        ) {
            if (contentType == ContentType.List) {
                PetList(
                    onPetClicked = onPetClicked,
                    pets = petsUIState.pets,
                    modifier = Modifier
                        .fillMaxWidth()
                )
            } else {
                PetListAndDetails(
                    pets = petsUIState.pets
                )
            }
        }
        AnimatedVisibility(
            visible = petsUIState.error != null
        ) {
            Text(text = petsUIState.error ?: "")
        }
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.711.1">Let’s explain the </span><span><span class="kobospan" id="kobo.712.1">preceding code:</span></span></p><ul class="calibre17"><li class="calibre15"><strong class="source-inline1"><span class="kobospan" id="kobo.713.1">PetsScreenContent</span></strong><span class="kobospan" id="kobo.714.1"> has a parent </span><strong class="source-inline1"><span class="kobospan" id="kobo.715.1">Column</span></strong><span class="kobospan" id="kobo.716.1"> composable. </span><span class="kobospan" id="kobo.716.2">Inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.717.1">Colum</span></strong><span class="kobospan" id="kobo.718.1">n composable, we have added three </span><strong class="source-inline1"><span class="kobospan" id="kobo.719.1">AnimatedVisibility</span></strong><span class="kobospan" id="kobo.720.1"> composables. </span><span class="kobospan" id="kobo.720.2">The first one is used to display </span><strong class="source-inline1"><span class="kobospan" id="kobo.721.1">CircularProgressIndicator</span></strong><span class="kobospan" id="kobo.722.1"> when </span><strong class="source-inline1"><span class="kobospan" id="kobo.723.1">petsUIState</span></strong><span class="kobospan" id="kobo.724.1"> is loading. </span><span class="kobospan" id="kobo.724.2">The second one is used to display the list of cats when the </span><strong class="source-inline1"><span class="kobospan" id="kobo.725.1">pets</span></strong><span class="kobospan" id="kobo.726.1"> variable from </span><strong class="source-inline1"><span class="kobospan" id="kobo.727.1">petsUIState</span></strong><span class="kobospan" id="kobo.728.1"> is not empty. </span><span class="kobospan" id="kobo.728.2">The third one is used to display an error message when </span><strong class="source-inline1"><span class="kobospan" id="kobo.729.1">petsUIState</span></strong><span class="kobospan" id="kobo.730.1"> has </span><span><span class="kobospan" id="kobo.731.1">an error.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.732.1">When</span><a id="_idIndexMarker346" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.733.1"> displaying the list of cats, we check </span><strong class="source-inline1"><span class="kobospan" id="kobo.734.1">contentType</span></strong><span class="kobospan" id="kobo.735.1">. </span><span class="kobospan" id="kobo.735.2">If </span><strong class="source-inline1"><span class="kobospan" id="kobo.736.1">contentType</span></strong><span class="kobospan" id="kobo.737.1"> is </span><strong class="source-inline1"><span class="kobospan" id="kobo.738.1">List</span></strong><span class="kobospan" id="kobo.739.1">, we display the </span><strong class="source-inline1"><span class="kobospan" id="kobo.740.1">PetList</span></strong><span class="kobospan" id="kobo.741.1"> composable. </span><span class="kobospan" id="kobo.741.2">If </span><strong class="source-inline1"><span class="kobospan" id="kobo.742.1">contentType</span></strong><span class="kobospan" id="kobo.743.1"> is </span><strong class="source-inline1"><span class="kobospan" id="kobo.744.1">ListAndDetail</span></strong><span class="kobospan" id="kobo.745.1">, we display the </span><strong class="source-inline1"><span class="kobospan" id="kobo.746.1">PetListAndDetails</span></strong><span class="kobospan" id="kobo.747.1"> composable. </span><span class="kobospan" id="kobo.747.2">We will create the </span><strong class="source-inline1"><span class="kobospan" id="kobo.748.1">PetListAndDetails</span></strong><span class="kobospan" id="kobo.749.1"> composable shortly. </span><span class="kobospan" id="kobo.749.2">Note the </span><strong class="source-inline1"><span class="kobospan" id="kobo.750.1">PetList</span></strong><span class="kobospan" id="kobo.751.1"> composable is also modified to take in the </span><strong class="source-inline1"><span class="kobospan" id="kobo.752.1">pets</span></strong><span class="kobospan" id="kobo.753.1"> parameter. </span><span class="kobospan" id="kobo.753.2">We will use this parameter to display the list of cats. </span><span class="kobospan" id="kobo.753.3">We will see the </span><span><span class="kobospan" id="kobo.754.1">changes shortly.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.755.1">Lastly, we </span><a id="_idIndexMarker347" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.756.1">show the error message if </span><strong class="source-inline1"><span class="kobospan" id="kobo.757.1">petsUIState</span></strong><span class="kobospan" id="kobo.758.1"> has </span><span><span class="kobospan" id="kobo.759.1">an error.</span></span></li></ul><p class="calibre4"><span class="kobospan" id="kobo.760.1">Our updated </span><strong class="source-inline"><span class="kobospan" id="kobo.761.1">PetList</span></strong><span class="kobospan" id="kobo.762.1"> composable should look </span><span><span class="kobospan" id="kobo.763.1">like this:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.764.1">@Composable
fun PetList(
    onPetClicked: (Cat) -&gt; Unit,
    pets: List&lt;Cat&gt;,
    modifier: Modifier
) {
    LazyColumn(
        modifier = modifier
    ) {
        items(pets) { pet -&gt;
            PetListItem(
                cat = pet,
                onPetClicked = onPetClicked
            )
        }
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.765.1">No major</span><a id="_idIndexMarker348" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.766.1"> changes here: we have just added the </span><strong class="source-inline"><span class="kobospan" id="kobo.767.1">pets</span></strong><span class="kobospan" id="kobo.768.1"> parameter. </span><span class="kobospan" id="kobo.768.2">We use this parameter to display the list of cats in our </span><strong class="source-inline"><span class="kobospan" id="kobo.769.1">LazyColumn</span></strong><span class="kobospan" id="kobo.770.1">. </span><span class="kobospan" id="kobo.770.2">With this update, it is time to create the </span><span><strong class="source-inline"><span class="kobospan" id="kobo.771.1">PetListAndDetails</span></strong></span><span><span class="kobospan" id="kobo.772.1"> composable.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.773.1">Let us </span><a id="_idIndexMarker349" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.774.1">create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.775.1">PetListAndDetails.kt</span></strong><span class="kobospan" id="kobo.776.1"> inside the view package and add the </span><span><span class="kobospan" id="kobo.777.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.778.1">
@Composable
fun PetListAndDetails(pets: List&lt;Cat&gt;) {
    var currentPet by remember {
        mutableStateOf(pets.first())
    }
    Row(
        modifier = Modifier
            .fillMaxWidth(),
        horizontalArrangement = Arrangement.SpaceEvenly
    ) {
        PetList(
            onPetClicked = {
                currentPet = it
            },
            pets = pets,
            modifier = Modifier
                .fillMaxWidth()
                .weight(1f)
        )
        PetDetailsScreenContent(
            modifier = Modifier
                .fillMaxWidth()
                .padding(16.dp)
                .weight(1f),
            cat = currentPet
        )
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.779.1">This </span><a id="_idIndexMarker350" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.780.1">composable has a </span><strong class="source-inline"><span class="kobospan" id="kobo.781.1">Row</span></strong><span class="kobospan" id="kobo.782.1">, which has two items each with a weight of </span><strong class="source-inline"><span class="kobospan" id="kobo.783.1">1f</span></strong><span class="kobospan" id="kobo.784.1">. </span><span class="kobospan" id="kobo.784.2">We have used the updated </span><strong class="source-inline"><span class="kobospan" id="kobo.785.1">PetListComposable</span></strong><span class="kobospan" id="kobo.786.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.787.1">PetDetailsScreenContent</span></strong><span class="kobospan" id="kobo.788.1"> that we created earlier. </span><span class="kobospan" id="kobo.788.2">We have also added a </span><strong class="source-inline"><span class="kobospan" id="kobo.789.1">currentPet</span></strong><span class="kobospan" id="kobo.790.1"> variable, which holds the currently selected cat. </span><span class="kobospan" id="kobo.790.2">We use this variable to display the details of the selected cat. </span><span class="kobospan" id="kobo.790.3">We also use this variable to update </span><strong class="source-inline"><span class="kobospan" id="kobo.791.1">currentPet</span></strong><span class="kobospan" id="kobo.792.1"> when we click on a pet item in the list. </span><span class="kobospan" id="kobo.792.2">Make sure you also update </span><strong class="source-inline"><span class="kobospan" id="kobo.793.1">PetDetailsScreenContent</span></strong><span class="kobospan" id="kobo.794.1"> to take in the new </span><span><span class="kobospan" id="kobo.795.1">modifier parameter.</span></span></p><p class="calibre4"><span class="kobospan" id="kobo.796.1">With the</span><a id="_idIndexMarker351" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.797.1"> modifications we have made, let us now create a new composable called </span><strong class="source-inline"><span class="kobospan" id="kobo.798.1">AppNavigationContent</span></strong><span class="kobospan" id="kobo.799.1">, which has logic for displaying </span><strong class="source-inline"><span class="kobospan" id="kobo.800.1">NavigationRail</span></strong><span class="kobospan" id="kobo.801.1"> or </span><strong class="source-inline"><span class="kobospan" id="kobo.802.1">BottomNavigation</span></strong><span class="kobospan" id="kobo.803.1"> depending </span><span><span class="kobospan" id="kobo.804.1">on </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.805.1">NavigationType</span></strong></span><span><span class="kobospan" id="kobo.806.1">.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.807.1">Let us </span><a id="_idIndexMarker352" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.808.1">create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.809.1">AppNavigationContent.kt</span></strong><span class="kobospan" id="kobo.810.1"> inside the navigation package and add the </span><span><span class="kobospan" id="kobo.811.1">following code:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.812.1">
@Composable
fun AppNavigationContent(
    contentType: ContentType,
    navigationType: NavigationType,
    onFavoriteClicked: () -&gt; Unit,
    onHomeClicked: () -&gt; Unit,
    navHostController: NavHostController,
    onDrawerClicked: () -&gt; Unit = {}
) {
    Row(
        modifier = Modifier
            .fillMaxSize(),
    ) {
        AnimatedVisibility(
            visible = navigationType == NavigationType.NavigationRail
        ) {
            PetsNavigationRail(
                onFavoriteClicked = onFavoriteClicked,
                onHomeClicked = onHomeClicked,
                onDrawerClicked = onDrawerClicked
            )
        }
        Scaffold(
            content = { paddingValues -&gt;
                Column(
                    modifier = Modifier
                        .fillMaxSize()
                        .padding(paddingValues)
                ) {
                    AppNavigation(
                        contentType = contentType,
                        navHostController = navHostController
                    )
                }
            },
            bottomBar = {
                AnimatedVisibility(
                    visible = navigationType == NavigationType.BottomNavigation
                ) {
                    PetsBottomNavigationBar(
                        onFavoriteClicked = onFavoriteClicked,
                        onHomeClicked = onHomeClicked
                    )
                }
            }
        )
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.813.1">Let’s </span><a id="_idIndexMarker353" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.814.1">explain the </span><span><span class="kobospan" id="kobo.815.1">preceding code:</span></span></p><ul class="calibre17"><li class="calibre15"><span class="kobospan" id="kobo.816.1">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.817.1">AppNavigationContent</span></strong><span class="kobospan" id="kobo.818.1"> composable takes a number of parameters. </span><span class="kobospan" id="kobo.818.2">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.819.1">contentType </span></strong><span class="kobospan" id="kobo.820.1">parameter is used to display the content type. </span><span class="kobospan" id="kobo.820.2">The </span><strong class="source-inline1"><span class="kobospan" id="kobo.821.1">navigationType</span></strong><span class="kobospan" id="kobo.822.1"> parameter is used to toggle the navigation options. </span><strong class="source-inline1"><span class="kobospan" id="kobo.823.1">onFavoriteClicked</span></strong><span class="kobospan" id="kobo.824.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.825.1">onHomeClicked</span></strong><span class="kobospan" id="kobo.826.1"> are callbacks that will be </span><a id="_idIndexMarker354" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.827.1">used to navigate to the different screens. </span><strong class="source-inline1"><span class="kobospan" id="kobo.828.1">navHostController</span></strong><span class="kobospan" id="kobo.829.1"> is an object that manages navigation within the </span><strong class="source-inline1"><span class="kobospan" id="kobo.830.1">NavHost</span></strong> <strong class="source-inline1"><span class="kobospan" id="kobo.831.1">onDrawerClicked</span></strong><span class="kobospan" id="kobo.832.1"> is used to close or open the drawer when the user interacts </span><span><span class="kobospan" id="kobo.833.1">with it.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.834.1">We have </span><strong class="source-inline1"><span class="kobospan" id="kobo.835.1">Row</span></strong><span class="kobospan" id="kobo.836.1"> as the root element. </span><span class="kobospan" id="kobo.836.2">Inside </span><strong class="source-inline1"><span class="kobospan" id="kobo.837.1">Row</span></strong><span class="kobospan" id="kobo.838.1">, we have an </span><strong class="source-inline1"><span class="kobospan" id="kobo.839.1">AnimatedVisibility</span></strong><span class="kobospan" id="kobo.840.1"> composable that displays the </span><strong class="source-inline1"><span class="kobospan" id="kobo.841.1">PetsNavigationRail</span></strong><span class="kobospan" id="kobo.842.1"> composable when </span><strong class="source-inline1"><span class="kobospan" id="kobo.843.1">navigationType</span></strong><span class="kobospan" id="kobo.844.1"> is </span><strong class="source-inline1"><span class="kobospan" id="kobo.845.1">NavigationType</span></strong><span class="kobospan" id="kobo.846.1">.</span><strong class="source-inline1"><span class="kobospan" id="kobo.847.1">NavigationRail</span></strong><span class="kobospan" id="kobo.848.1">. </span><span class="kobospan" id="kobo.848.2">We have also added a </span><strong class="source-inline1"><span class="kobospan" id="kobo.849.1">Scaffold</span></strong><span class="kobospan" id="kobo.850.1"> composable. </span><span class="kobospan" id="kobo.850.2">We have used the </span><strong class="source-inline1"><span class="kobospan" id="kobo.851.1">AppNavigation</span></strong><span class="kobospan" id="kobo.852.1"> composable as the content of </span><strong class="source-inline1"><span class="kobospan" id="kobo.853.1">Scaffold</span></strong><span class="kobospan" id="kobo.854.1">, passing in </span><strong class="source-inline1"><span class="kobospan" id="kobo.855.1">contentType</span></strong><span class="kobospan" id="kobo.856.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.857.1">navHostController</span></strong><span class="kobospan" id="kobo.858.1">. </span><span class="kobospan" id="kobo.858.2">We have also used the </span><strong class="source-inline1"><span class="kobospan" id="kobo.859.1">PetsBottomNavigationBar</span></strong><span class="kobospan" id="kobo.860.1"> composable as the bottom bar of </span><strong class="source-inline1"><span class="kobospan" id="kobo.861.1">Scaffold</span></strong><span class="kobospan" id="kobo.862.1">. </span><span class="kobospan" id="kobo.862.2">We have used the </span><strong class="source-inline1"><span class="kobospan" id="kobo.863.1">AnimatedVisibility</span></strong><span class="kobospan" id="kobo.864.1"> composable to display the </span><strong class="source-inline1"><span class="kobospan" id="kobo.865.1">PetsBottomNavigationBar</span></strong><span class="kobospan" id="kobo.866.1"> composable when </span><strong class="source-inline1"><span class="kobospan" id="kobo.867.1">navigationType</span></strong> <span><span class="kobospan" id="kobo.868.1">is </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.869.1">NavigationType.BottomNavigation</span></strong></span><span><span class="kobospan" id="kobo.870.1">.</span></span></li></ul></li> <li class="calibre15"><span class="kobospan" id="kobo.871.1">The last step</span><a id="_idIndexMarker355" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.872.1"> is to refactor the </span><strong class="source-inline1"><span class="kobospan" id="kobo.873.1">MainActivity.kt</span></strong><span class="kobospan" id="kobo.874.1"> file to use the new </span><strong class="source-inline1"><span class="kobospan" id="kobo.875.1">AppNavigationContent</span></strong><span class="kobospan" id="kobo.876.1"> composable. </span><span class="kobospan" id="kobo.876.2">We will walk through the changes step by step. </span><span class="kobospan" id="kobo.876.3">There</span><a id="_idIndexMarker356" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.877.1"> are </span><span><span class="kobospan" id="kobo.878.1">several changes:</span></span><ol class="calibre18"><li class="upper-roman"><span class="kobospan" id="kobo.879.1">To begin with, we need to observe the device’s foldable state. </span><span class="kobospan" id="kobo.879.2">This will enable us to change the content type and navigation type. </span><span class="kobospan" id="kobo.879.3">Let us create a new file called </span><strong class="source-inline1"><span class="kobospan" id="kobo.880.1">DeviceFoldPosture.kt</span></strong><span class="kobospan" id="kobo.881.1"> inside the </span><strong class="source-inline1"><span class="kobospan" id="kobo.882.1">navigation</span></strong><span class="kobospan" id="kobo.883.1"> package and add the </span><span><span class="kobospan" id="kobo.884.1">following code:</span></span></li></ol><pre class="source-code"><span class="kobospan1" id="kobo.885.1">
sealed interface DeviceFoldPosture {
    data class BookPosture(val hingePosition: Rect) : DeviceFoldPosture
    data class SeparatingPosture(
        val hingePosition: Rect,
        val orientation: FoldingFeature.Orientation
    ) : DeviceFoldPosture
    object NormalPosture : DeviceFoldPosture
}
@OptIn(ExperimentalContracts::class)
fun isBookPosture(foldFeature: FoldingFeature?): Boolean {
    contract { returns(true) implies (foldFeature != null) }
    return foldFeature?.state == FoldingFeature.State.HALF_OPENED &amp;&amp;
            foldFeature.orientation == FoldingFeature.Orientation.VERTICAL
}
@OptIn(ExperimentalContracts::class)
fun isSeparating(foldFeature: FoldingFeature?): Boolean {
    contract { returns(true) implies (foldFeature != null) }
    return foldFeature?.state == FoldingFeature.State.FLAT &amp;&amp; foldFeature.isSeparating
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.886.1">In the</span><a id="_idIndexMarker357" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.887.1"> preceding code, we have</span><a id="_idIndexMarker358" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.888.1"> a sealed interface that represents the different postures a foldable device can be in. </span><span class="kobospan" id="kobo.888.2">We have </span><strong class="source-inline"><span class="kobospan" id="kobo.889.1">BookPosture</span></strong><span class="kobospan" id="kobo.890.1">, which represents the posture when the device is in portrait orientation and its fold state is half opened. </span><span class="kobospan" id="kobo.890.2">We have </span><strong class="source-inline"><span class="kobospan" id="kobo.891.1">SeparatingPosture</span></strong><span class="kobospan" id="kobo.892.1">, which represents the posture when the fold or hinge device creates two logical display areas. </span><span class="kobospan" id="kobo.892.2">We also have </span><strong class="source-inline"><span class="kobospan" id="kobo.893.1">NormalPosture</span></strong><span class="kobospan" id="kobo.894.1">, which represents the posture when the device is not folded. </span><span class="kobospan" id="kobo.894.2">We have two utility functions, </span><strong class="source-inline"><span class="kobospan" id="kobo.895.1">isBookPosture()</span></strong><span class="kobospan" id="kobo.896.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.897.1">isSeparating()</span></strong><span class="kobospan" id="kobo.898.1">, which are used to check the posture of the device. </span><span class="kobospan" id="kobo.898.2">We will use these functions to check the posture of</span><a id="_idIndexMarker359" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.899.1"> the device and change the layout of the app depending on </span><span><span class="kobospan" id="kobo.900.1">the posture.</span></span></p><ol class="calibre18"><li class="upper-roman" value="2"><span class="kobospan" id="kobo.901.1">Let us head over to the </span><strong class="source-inline1"><span class="kobospan" id="kobo.902.1">MainActivity.kt</span></strong><span class="kobospan" id="kobo.903.1"> file and add the following code </span><a id="_idIndexMarker360" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.904.1">before the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.905.1">setContent</span></strong></span><span><span class="kobospan" id="kobo.906.1"> block:</span></span></li></ol><pre class="source-code"><span class="kobospan1" id="kobo.907.1">val deviceFoldingPostureFlow = WindowInfoTracker.getOrCreate(this).windowLayoutInfo(this)
    .flowWithLifecycle(this.lifecycle)
    .map { layoutInfo -&gt;
        val foldingFeature =
            layoutInfo.displayFeatures
                .filterIsInstance&lt;FoldingFeature&gt;()
                .firstOrNull()
        when {
            isBookPosture(foldingFeature) -&gt;
                DeviceFoldPosture.BookPosture(foldingFeature.bounds)
            isSeparating(foldingFeature) -&gt;
                DeviceFoldPosture.SeparatingPosture(
                    foldingFeature.bounds,
                    foldingFeature.orientation
                )
            else -&gt; DeviceFoldPosture.NormalPosture
        }
    }
    .stateIn(
        scope = lifecycleScope,
        started = SharingStarted.Eagerly,
        initialValue = DeviceFoldPosture.NormalPosture
    )</span></pre><p class="calibre4"><span class="kobospan" id="kobo.908.1">Here, we use </span><strong class="source-inline"><span class="kobospan" id="kobo.909.1">WindowInfoTracker</span></strong><span class="kobospan" id="kobo.910.1"> to get the window layout info. </span><span class="kobospan" id="kobo.910.2">We use </span><strong class="source-inline"><span class="kobospan" id="kobo.911.1">flowWithLifecycle()</span></strong><span class="kobospan" id="kobo.912.1"> to make sure we only get the layout info when the activity is in </span><a id="_idIndexMarker361" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.913.1">the correct life cycle state. </span><span class="kobospan" id="kobo.913.2">We then use the </span><strong class="source-inline"><span class="kobospan" id="kobo.914.1">map</span></strong><span class="kobospan" id="kobo.915.1"> operator to map the layout </span><a id="_idIndexMarker362" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.916.1">info to the different postures. </span><span class="kobospan" id="kobo.916.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.917.1">stateIn()</span></strong><span class="kobospan" id="kobo.918.1"> operator, which converts a cold </span><strong class="source-inline"><span class="kobospan" id="kobo.919.1">Flow</span></strong><span class="kobospan" id="kobo.920.1"> into a hot </span><strong class="source-inline"><span class="kobospan" id="kobo.921.1">StateFlow</span></strong><span class="kobospan" id="kobo.922.1"> that is started in the given coroutine scope, sharing the most recently emitted value of device posture. </span><span class="kobospan" id="kobo.922.2">We use </span><strong class="source-inline"><span class="kobospan" id="kobo.923.1">SharingStarted.Eagerly</span></strong><span class="kobospan" id="kobo.924.1"> to make sure we get the latest value of the posture when the activity is in the started state. </span><span class="kobospan" id="kobo.924.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.925.1">initialValue</span></strong><span class="kobospan" id="kobo.926.1"> parameter to set the initial value of the posture to </span><strong class="source-inline"><span class="kobospan" id="kobo.927.1">DeviceFoldPosture.NormalPosture</span></strong><span class="kobospan" id="kobo.928.1">. </span><span class="kobospan" id="kobo.928.2">We will use this flow to observe the device’s posture and change the app’s layout depending on </span><span><span class="kobospan" id="kobo.929.1">the posture.</span></span></p><ol class="calibre18"><li class="upper-roman" value="3"><span class="kobospan" id="kobo.930.1">Next, inside our </span><strong class="source-inline1"><span class="kobospan" id="kobo.931.1">setcontent</span></strong><span class="kobospan" id="kobo.932.1"> block, we need to add the variables before the </span><span><span class="kobospan" id="kobo.933.1">theme block:</span></span></li></ol><pre class="source-code"><span class="kobospan1" id="kobo.934.1">val devicePosture = deviceFoldingPostureFlow.collectAsStateWithLifecycle().value
val windowSizeClass = calculateWindowSizeClass(activity = this)
val scope = rememberCoroutineScope()
val drawerState = rememberDrawerState(initialValue = DrawerValue.Closed)
val navController = rememberNavController()</span></pre><p class="calibre4"><span class="kobospan" id="kobo.935.1">We have </span><a id="_idIndexMarker363" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.936.1">added the </span><strong class="source-inline"><span class="kobospan" id="kobo.937.1">devicePosture</span></strong><span class="kobospan" id="kobo.938.1"> variable, which holds the posture of the device. </span><span class="kobospan" id="kobo.938.2">We have also added the </span><strong class="source-inline"><span class="kobospan" id="kobo.939.1">windowSizeClass</span></strong><span class="kobospan" id="kobo.940.1"> variable, which holds the window size class of the device; the </span><strong class="source-inline"><span class="kobospan" id="kobo.941.1">scope</span></strong><span class="kobospan" id="kobo.942.1"> variable, which holds </span><strong class="source-inline"><span class="kobospan" id="kobo.943.1">CoroutineScope</span></strong><span class="kobospan" id="kobo.944.1">; the </span><strong class="source-inline"><span class="kobospan" id="kobo.945.1">drawerState</span></strong><span class="kobospan" id="kobo.946.1"> variable, which holds the state of the drawer; and the </span><strong class="source-inline"><span class="kobospan" id="kobo.947.1">navController</span></strong><span class="kobospan" id="kobo.948.1"> variable, which holds </span><strong class="source-inline"><span class="kobospan" id="kobo.949.1">NavHostController</span></strong><span class="kobospan" id="kobo.950.1">. </span><span class="kobospan" id="kobo.950.2">We will use this variable to navigate to different screens in </span><span><span class="kobospan" id="kobo.951.1">our app.</span></span></p><ol class="calibre18"><li class="upper-roman" value="4"><span class="kobospan" id="kobo.952.1">Inside</span><a id="_idIndexMarker364" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.953.1"> our </span><strong class="source-inline1"><span class="kobospan" id="kobo.954.1">ChapterSevenTheme</span></strong><span class="kobospan" id="kobo.955.1">, we need to add the </span><span><span class="kobospan" id="kobo.956.1">following code:</span></span></li></ol><pre class="source-code"><span class="kobospan1" id="kobo.957.1">val navigationType: NavigationType
val contentType: ContentType
when (windowSizeClass.widthSizeClass) {
    WindowWidthSizeClass.Compact -&gt; {
        navigationType = NavigationType.BottomNavigation
        contentType = ContentType.List
    }
    WindowWidthSizeClass.Medium -&gt; {
        navigationType = NavigationType.NavigationRail
        contentType = if (devicePosture is DeviceFoldPosture.BookPosture
            || devicePosture is DeviceFoldPosture.SeparatingPosture
        ) {
            ContentType.ListAndDetail
        } else {
            ContentType.List
        }
    }
    WindowWidthSizeClass.Expanded -&gt; {
        navigationType = if (devicePosture is DeviceFoldPosture.BookPosture) {
            NavigationType.NavigationRail
        } else {
            NavigationType.NavigationDrawer
        }
        contentType = ContentType.ListAndDetail
    }
    else -&gt; {
        navigationType = NavigationType.BottomNavigation
        contentType = ContentType.List
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.958.1">Here, we</span><a id="_idIndexMarker365" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.959.1"> have two </span><a id="_idIndexMarker366" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.960.1">variables: </span><strong class="source-inline"><span class="kobospan" id="kobo.961.1">navigationType</span></strong><span class="kobospan" id="kobo.962.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.963.1">contentType</span></strong><span class="kobospan" id="kobo.964.1">. </span><span class="kobospan" id="kobo.964.2">We use </span><strong class="source-inline"><span class="kobospan" id="kobo.965.1">windowSizeClass</span></strong><span class="kobospan" id="kobo.966.1"> to get the width of our device and, depending on the width size, we assign the values for our </span><strong class="source-inline"><span class="kobospan" id="kobo.967.1">navigationType</span></strong><span class="kobospan" id="kobo.968.1"> and </span><span><strong class="source-inline"><span class="kobospan" id="kobo.969.1">contentType</span></strong></span><span><span class="kobospan" id="kobo.970.1"> variables:</span></span></p><ul class="calibre17"><li class="calibre15"><span class="kobospan" id="kobo.971.1">If the width size is </span><strong class="source-inline1"><span class="kobospan" id="kobo.972.1">Compact</span></strong><span class="kobospan" id="kobo.973.1">, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.974.1">BottomNavigation</span></strong><span class="kobospan" id="kobo.975.1"> for </span><strong class="source-inline1"><span class="kobospan" id="kobo.976.1">navigationType</span></strong><span class="kobospan" id="kobo.977.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.978.1">List</span></strong> <span><span class="kobospan" id="kobo.979.1">for </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.980.1">contentType</span></strong></span><span><span class="kobospan" id="kobo.981.1">.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.982.1">If the width size is </span><strong class="source-inline1"><span class="kobospan" id="kobo.983.1">Medium</span></strong><span class="kobospan" id="kobo.984.1">, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.985.1">NavigationRail</span></strong><span class="kobospan" id="kobo.986.1"> for </span><strong class="source-inline1"><span class="kobospan" id="kobo.987.1">navigationType</span></strong><span class="kobospan" id="kobo.988.1">. </span><span class="kobospan" id="kobo.988.2">For </span><strong class="source-inline1"><span class="kobospan" id="kobo.989.1">contentType</span></strong><span class="kobospan" id="kobo.990.1">, we check </span><strong class="source-inline1"><span class="kobospan" id="kobo.991.1">devicePosture</span></strong><span class="kobospan" id="kobo.992.1">. </span><span class="kobospan" id="kobo.992.2">If </span><strong class="source-inline1"><span class="kobospan" id="kobo.993.1">devicePosture</span></strong><span class="kobospan" id="kobo.994.1"> is </span><strong class="source-inline1"><span class="kobospan" id="kobo.995.1">DeviceFoldPosture.BookPosture</span></strong><span class="kobospan" id="kobo.996.1"> or </span><strong class="source-inline1"><span class="kobospan" id="kobo.997.1">DeviceFoldPosture.SeparatingPosture</span></strong><span class="kobospan" id="kobo.998.1">, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.999.1">ListAndDetail</span></strong><span class="kobospan" id="kobo.1000.1"> for </span><strong class="source-inline1"><span class="kobospan" id="kobo.1001.1">contentType</span></strong><span class="kobospan" id="kobo.1002.1">. </span><span class="kobospan" id="kobo.1002.2">If </span><strong class="source-inline1"><span class="kobospan" id="kobo.1003.1">devicePosture</span></strong><span class="kobospan" id="kobo.1004.1"> is not </span><strong class="source-inline1"><span class="kobospan" id="kobo.1005.1">DeviceFoldPosture.BookPosture</span></strong><span class="kobospan" id="kobo.1006.1"> or </span><strong class="source-inline1"><span class="kobospan" id="kobo.1007.1">DeviceFoldPosture.SeparatingPosture</span></strong><span class="kobospan" id="kobo.1008.1">, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.1009.1">List</span></strong> <span><span class="kobospan" id="kobo.1010.1">for </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1011.1">contentType</span></strong></span><span><span class="kobospan" id="kobo.1012.1">.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.1013.1">If the </span><a id="_idIndexMarker367" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1014.1">width size is </span><strong class="source-inline1"><span class="kobospan" id="kobo.1015.1">Expanded</span></strong><span class="kobospan" id="kobo.1016.1">, we check </span><strong class="source-inline1"><span class="kobospan" id="kobo.1017.1">devicePosture</span></strong><span class="kobospan" id="kobo.1018.1">. </span><span class="kobospan" id="kobo.1018.2">If </span><strong class="source-inline1"><span class="kobospan" id="kobo.1019.1">devicePosture</span></strong><span class="kobospan" id="kobo.1020.1"> is </span><strong class="source-inline1"><span class="kobospan" id="kobo.1021.1">DeviceFoldPosture.BookPosture</span></strong><span class="kobospan" id="kobo.1022.1">, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.1023.1">NavigationRail</span></strong><span class="kobospan" id="kobo.1024.1"> for </span><strong class="source-inline1"><span class="kobospan" id="kobo.1025.1">navigationType</span></strong><span class="kobospan" id="kobo.1026.1">. </span><span class="kobospan" id="kobo.1026.2">If </span><strong class="source-inline1"><span class="kobospan" id="kobo.1027.1">devicePosture</span></strong><span class="kobospan" id="kobo.1028.1"> is not </span><strong class="source-inline1"><span class="kobospan" id="kobo.1029.1">DeviceFoldPosture.BookPosture</span></strong><span class="kobospan" id="kobo.1030.1">, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.1031.1">NavigationDrawer</span></strong><span class="kobospan" id="kobo.1032.1"> for </span><strong class="source-inline1"><span class="kobospan" id="kobo.1033.1">navigationType</span></strong><span class="kobospan" id="kobo.1034.1">. </span><span class="kobospan" id="kobo.1034.2">We use </span><strong class="source-inline1"><span class="kobospan" id="kobo.1035.1">ListAndDetail</span></strong> <span><span class="kobospan" id="kobo.1036.1">for </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1037.1">contentType</span></strong></span><span><span class="kobospan" id="kobo.1038.1">.</span></span></li><li class="calibre15"><span class="kobospan" id="kobo.1039.1">Lastly, if the width size is anything else, we use </span><strong class="source-inline1"><span class="kobospan" id="kobo.1040.1">BottomNavigation</span></strong><span class="kobospan" id="kobo.1041.1"> for </span><strong class="source-inline1"><span class="kobospan" id="kobo.1042.1">navigationType</span></strong><span class="kobospan" id="kobo.1043.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.1044.1">List</span></strong> <span><span class="kobospan" id="kobo.1045.1">for </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1046.1">contentType</span></strong></span><span><span class="kobospan" id="kobo.1047.1">.</span></span></li></ul><ol class="calibre18"><li class="upper-roman" value="5"><span class="kobospan" id="kobo.1048.1">Below </span><a id="_idIndexMarker368" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1049.1">the preceding code, add this </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1050.1">if</span></strong></span><span><span class="kobospan" id="kobo.1051.1"> statement:</span></span></li></ol><pre class="source-code"><span class="kobospan1" id="kobo.1052.1">if (navigationType == NavigationType.NavigationDrawer) {
    PermanentNavigationDrawer(
        drawerContent = {
            PermanentDrawerSheet {
                PetsNavigationDrawer(
                    onFavoriteClicked = {
                        navController.navigate(Screens.FavoritePetsScreen.route)
                    },
                    onHomeClicked = {
                        navController.navigate(Screens.PetsScreen.route)
                    }
                )
            }
        }
    ) {
        AppNavigationContent(
            navigationType = navigationType,
            contentType = contentType,
            onFavoriteClicked = {
                navController.navigate(Screens.FavoritePetsScreen.route)
            },
            onHomeClicked = {
                navController.navigate(Screens.PetsScreen.route)
            },
            navHostController = navController
        )
    }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.1053.1">The </span><a id="_idIndexMarker369" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1054.1">condition checks whether </span><strong class="source-inline"><span class="kobospan" id="kobo.1055.1">navigationType</span></strong><span class="kobospan" id="kobo.1056.1"> is </span><strong class="source-inline"><span class="kobospan" id="kobo.1057.1">NavigationType.NavigationDrawer</span></strong><span class="kobospan" id="kobo.1058.1">. </span><span class="kobospan" id="kobo.1058.2">If it is, we use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1059.1">PermanentNavigationDrawer</span></strong><span class="kobospan" id="kobo.1060.1"> composable from the Material 3 library. </span><span class="kobospan" id="kobo.1060.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1061.1">PetsNavigationDrawer</span></strong><span class="kobospan" id="kobo.1062.1"> composable that we created for </span><strong class="source-inline"><span class="kobospan" id="kobo.1063.1">drawerContent</span></strong><span class="kobospan" id="kobo.1064.1">. </span><span class="kobospan" id="kobo.1064.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1065.1">AppNavigationContent</span></strong><span class="kobospan" id="kobo.1066.1"> composable as the content of </span><strong class="source-inline"><span class="kobospan" id="kobo.1067.1">PermanentNavigationDrawer</span></strong><span class="kobospan" id="kobo.1068.1">. </span><span class="kobospan" id="kobo.1068.2">We pass in the </span><strong class="source-inline"><span class="kobospan" id="kobo.1069.1">navigationType</span></strong><span class="kobospan" id="kobo.1070.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.1071.1">contentType</span></strong><span class="kobospan" id="kobo.1072.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.1073.1">onFavoriteClicked</span></strong><span class="kobospan" id="kobo.1074.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.1075.1">onHomeClicked</span></strong><span class="kobospan" id="kobo.1076.1">, and </span><span><strong class="source-inline"><span class="kobospan" id="kobo.1077.1">navHostController</span></strong></span><span><span class="kobospan" id="kobo.1078.1"> parameters.</span></span></p><ol class="calibre18"><li class="upper-roman" value="6"><span class="kobospan" id="kobo.1079.1">Next, let </span><a id="_idIndexMarker370" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1080.1">us add the </span><strong class="source-inline1"><span class="kobospan" id="kobo.1081.1">else</span></strong><span class="kobospan" id="kobo.1082.1"> condition for our </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.1083.1">if</span></strong></span><span><span class="kobospan" id="kobo.1084.1"> statement:</span></span></li></ol><pre class="source-code"><span class="kobospan1" id="kobo.1085.1">else {
  ModalNavigationDrawer(
      drawerContent = {
          ModalDrawerSheet {
              PetsNavigationDrawer(
                  onFavoriteClicked = {
                      navController.navigate(Screens.FavoritePetsScreen.route)
                  },
                  onHomeClicked = {
                      navController.navigate(Screens.PetsScreen.route)
                  },
                  onDrawerClicked = {
                      scope.launch {
                          drawerState.close()
                      }
                  }
              )
          }
      },
      drawerState = drawerState
  ) {
      AppNavigationContent(
          navigationType = navigationType,
          contentType = contentType,
          onFavoriteClicked = {
              navController.navigate(Screens.FavoritePetsScreen.route)
          },
          onHomeClicked = {
              navController.navigate(Screens.PetsScreen.route)
          },
          navHostController = navController,
          onDrawerClicked = {
              scope.launch {
                  drawerState.open()
              }
          }
      )
  }
}</span></pre><p class="calibre4"><span class="kobospan" id="kobo.1086.1">Here, when </span><strong class="source-inline"><span class="kobospan" id="kobo.1087.1">navigationType</span></strong><span class="kobospan" id="kobo.1088.1"> is not </span><strong class="source-inline"><span class="kobospan" id="kobo.1089.1">NavigationType.NavigationDrawer</span></strong><span class="kobospan" id="kobo.1090.1">, we use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1091.1">ModalNavigationDrawer</span></strong><span class="kobospan" id="kobo.1092.1"> composable from the Material 3 library. </span><span class="kobospan" id="kobo.1092.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1093.1">PetsNavigationDrawer</span></strong><span class="kobospan" id="kobo.1094.1"> composable for </span><strong class="source-inline"><span class="kobospan" id="kobo.1095.1">drawerContent</span></strong><span class="kobospan" id="kobo.1096.1">. </span><span class="kobospan" id="kobo.1096.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1097.1">AppNavigationContent</span></strong><span class="kobospan" id="kobo.1098.1"> composable as the content of </span><strong class="source-inline"><span class="kobospan" id="kobo.1099.1">ModalNavigationDrawer</span></strong><span class="kobospan" id="kobo.1100.1">. </span><span class="kobospan" id="kobo.1100.2">We pass in the </span><strong class="source-inline"><span class="kobospan" id="kobo.1101.1">navigationType</span></strong><span class="kobospan" id="kobo.1102.1">,</span><strong class="source-inline"><span class="kobospan" id="kobo.1103.1"> contentType</span></strong><span class="kobospan" id="kobo.1104.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.1105.1">onFavoriteClicked</span></strong><span class="kobospan" id="kobo.1106.1">, </span><strong class="source-inline"><span class="kobospan" id="kobo.1107.1">onHomeClicked</span></strong><span class="kobospan" id="kobo.1108.1">, and </span><strong class="source-inline"><span class="kobospan" id="kobo.1109.1">navHostController</span></strong><span class="kobospan" id="kobo.1110.1"> parameters. </span><span class="kobospan" id="kobo.1110.2">We also pass in the </span><strong class="source-inline"><span class="kobospan" id="kobo.1111.1">drawerState</span></strong><span class="kobospan" id="kobo.1112.1"> parameter. </span><span class="kobospan" id="kobo.1112.2">We use the </span><strong class="source-inline"><span class="kobospan" id="kobo.1113.1">onDrawerClicked</span></strong><span class="kobospan" id="kobo.1114.1"> callback to open or close the drawer when the user interacts </span><span><span class="kobospan" id="kobo.1115.1">with it.</span></span></p></li> </ol>
<p class="calibre4"><span class="kobospan" id="kobo.1116.1">Those </span><a id="_idIndexMarker371" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1117.1">were a</span><a id="_idIndexMarker372" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1118.1"> lot of changes; great work on adding them! </span><span class="kobospan" id="kobo.1118.2">We now need to run these changes and see them into action. </span><span class="kobospan" id="kobo.1118.3">Luckily, we have a </span><strong class="bold"><span class="kobospan" id="kobo.1119.1">resizable emulator</span></strong><span class="kobospan" id="kobo.1120.1"> to help test these changes. </span><span class="kobospan" id="kobo.1120.2">We will be creating one and testing the app in the </span><span><span class="kobospan" id="kobo.1121.1">next subsection.</span></span></p>
<h2 id="_idParaDest-90" class="calibre7"><a id="_idTextAnchor099" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1122.1">Creating and using the resizable emulator</span></h2>
<p class="calibre4"><span class="kobospan" id="kobo.1123.1">To create and </span><a id="_idIndexMarker373" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1124.1">use the resizable emulator, follow </span><span><span class="kobospan" id="kobo.1125.1">these steps:</span></span></p>
<ol class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.1126.1">Open the </span><strong class="bold"><span class="kobospan" id="kobo.1127.1">Device Manager</span></strong><span class="kobospan" id="kobo.1128.1"> window</span><a id="_idIndexMarker374" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1129.1"> from the right sidebar in Android Studio. </span><span class="kobospan" id="kobo.1129.2">If you cannot find it there, use the </span><strong class="bold"><span class="kobospan" id="kobo.1130.1">View</span></strong><span class="kobospan" id="kobo.1131.1"> menu option at the top and select </span><strong class="bold"><span class="kobospan" id="kobo.1132.1">Tool Windows</span></strong><span class="kobospan" id="kobo.1133.1">; then, you will see the </span><strong class="bold"><span class="kobospan" id="kobo.1134.1">Device </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.1135.1">Manager</span></strong></span><span><span class="kobospan" id="kobo.1136.1"> option.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer087">
<span class="kobospan" id="kobo.1137.1"><img alt="Figure 7.5 – Device Manager" src="image/B19779_07_05.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1138.1">Figure 7.5 – Device Manager</span></p>
<ol class="calibre14">
<li value="2" class="calibre15"><span class="kobospan" id="kobo.1139.1">Select </span><a id="_idIndexMarker375" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1140.1">the </span><strong class="bold"><span class="kobospan" id="kobo.1141.1">Virtual</span></strong><span class="kobospan" id="kobo.1142.1"> devices tab and click on </span><strong class="bold"><span class="kobospan" id="kobo.1143.1">Create Device</span></strong><span class="kobospan" id="kobo.1144.1">, which brings you this </span><span><span class="kobospan" id="kobo.1145.1">pop-up window:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer088">
<span class="kobospan" id="kobo.1146.1"><img alt="Figure 7.6 – New device configurations" src="image/B19779_07_06.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1147.1">Figure 7.6 – New device configurations</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1148.1">The window enables you to customize the properties of the device you want to create. </span><span class="kobospan" id="kobo.1148.2">You can change the device category and you also select the device you want </span><span><span class="kobospan" id="kobo.1149.1">to create.</span></span></p>
<ol class="calibre14">
<li value="3" class="calibre15"><span class="kobospan" id="kobo.1150.1">Let us </span><a id="_idIndexMarker376" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1151.1">select the </span><strong class="bold"><span class="kobospan" id="kobo.1152.1">Resizable (Experimental)</span></strong><span class="kobospan" id="kobo.1153.1"> option under the </span><strong class="bold"><span class="kobospan" id="kobo.1154.1">Phone</span></strong><span class="kobospan" id="kobo.1155.1"> category. </span><span class="kobospan" id="kobo.1155.2">This will enable us to create a resizable device. </span><span class="kobospan" id="kobo.1155.3">Click </span><strong class="bold"><span class="kobospan" id="kobo.1156.1">Next</span></strong><span class="kobospan" id="kobo.1157.1"> and you will see the </span><span><span class="kobospan" id="kobo.1158.1">following window:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer089">
<span class="kobospan" id="kobo.1159.1"><img alt="Figure 7.7 – System Image" src="image/B19779_07_07.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1160.1">Figure 7.7 – System Image</span></p>
<ol class="calibre14">
<li value="4" class="calibre15"><span class="kobospan" id="kobo.1161.1">Here, you select the system image you want to use. </span><span class="kobospan" id="kobo.1161.2">Let us select the </span><strong class="bold"><span class="kobospan" id="kobo.1162.1">API 34</span></strong><span class="kobospan" id="kobo.1163.1"> system image. </span><span class="kobospan" id="kobo.1163.2">Click </span><strong class="bold"><span class="kobospan" id="kobo.1164.1">Next</span></strong><span class="kobospan" id="kobo.1165.1"> and you will see the </span><span><span class="kobospan" id="kobo.1166.1">following window:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer090">
<span class="kobospan" id="kobo.1167.1"><img alt="Figure 7.8 – Device information" src="image/B19779_07_08.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1168.1">Figure 7.8 – Device information</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1169.1">This is the </span><a id="_idIndexMarker377" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1170.1">last step where you confirm the device name and the device orientation. </span><span class="kobospan" id="kobo.1170.2">We will maintain the name generated and use portrait as the </span><span><span class="kobospan" id="kobo.1171.1">default orientation.</span></span></p>
<ol class="calibre14">
<li value="5" class="calibre15"><span class="kobospan" id="kobo.1172.1">Click </span><strong class="bold"><span class="kobospan" id="kobo.1173.1">Finish</span></strong><span class="kobospan" id="kobo.1174.1"> and you will see the device has been added to your list </span><span><span class="kobospan" id="kobo.1175.1">of devices:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer091">
<span class="kobospan" id="kobo.1176.1"><img alt="Figure 7.9 – Devices list" src="image/B19779_07_09.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1177.1">Figure 7.9 – Devices list</span></p>
<ol class="calibre14">
<li value="6" class="calibre15"><span class="kobospan" id="kobo.1178.1">Start the emulator and run </span><span><span class="kobospan" id="kobo.1179.1">the app.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer092">
<span class="kobospan" id="kobo.1180.1"><img alt="Figure 7.10 – Resizable emulator" src="image/B19779_07_10.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1181.1">Figure 7.10 – Resizable emulator</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1182.1">From the emulator, we</span><a id="_idIndexMarker378" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1183.1"> can see we have two options highlighted. </span><span class="kobospan" id="kobo.1183.2">The first one allows us to change the device from a small/normal device to a foldable or tablet device. </span><span class="kobospan" id="kobo.1183.3">The second one allows us to change the options when we change to a foldable device. </span><span class="kobospan" id="kobo.1183.4">Let us change the device to a foldable device. </span><span class="kobospan" id="kobo.1183.5">The app now changes the navigation option to navigation rail and the screen has a list and details of the first cat </span><span><span class="kobospan" id="kobo.1184.1">opened too.</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer093">
<span class="kobospan" id="kobo.1185.1"><img alt="Figure 7.11 – Foldable device navigation rail" src="image/B19779_07_11.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1186.1">Figure 7.11 – Foldable device navigation rail</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1187.1">On tapping the </span><strong class="bold"><span class="kobospan" id="kobo.1188.1">Foldable</span></strong><span class="kobospan" id="kobo.1189.1"> options, we </span><a id="_idIndexMarker379" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1190.1">can see the </span><span><span class="kobospan" id="kobo.1191.1">following options:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer094">
<span class="kobospan" id="kobo.1192.1"><img alt="Figure 7.12 – Foldable options" src="image/B19779_07_12.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1193.1">Figure 7.12 – Foldable options</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1194.1">Selecting the</span><a id="_idIndexMarker380" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1195.1"> second option in the foldables section brings us to the </span><span><span class="kobospan" id="kobo.1196.1">following screen:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer095">
<span class="kobospan" id="kobo.1197.1"><img alt="Figure 7.13 – Foldable device" src="image/B19779_07_13.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1198.1">Figure 7.13 – Foldable device</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1199.1">From the</span><a id="_idIndexMarker381" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1200.1"> device size option, we can also switch to </span><span><span class="kobospan" id="kobo.1201.1">tablet view:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer096">
<span class="kobospan" id="kobo.1202.1"><img alt="Figure 7.14 – Tablet view" src="image/B19779_07_14.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1203.1">Figure 7.14 – Tablet view</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1204.1">You can see</span><a id="_idIndexMarker382" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1205.1"> the app now has a permanent navigation drawer and the screen has a list and details of the first cat opened too. </span><span class="kobospan" id="kobo.1205.2">Tap a different cat and you will see the details of the cat displayed on the right side of the screen. </span><span class="kobospan" id="kobo.1205.3">We can also navigate to the </span><strong class="bold"><span class="kobospan" id="kobo.1206.1">Favorites</span></strong><span class="kobospan" id="kobo.1207.1"> screen and back to the </span><span><strong class="bold"><span class="kobospan" id="kobo.1208.1">Pets</span></strong></span><span><span class="kobospan" id="kobo.1209.1"> screen.</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer097">
<span class="kobospan" id="kobo.1210.1"><img alt="Figure 7.15 – Favorite Pets screen" src="image/B19779_07_15.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1211.1">Figure 7.15 – Favorite Pets screen</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1212.1">We can also see </span><a id="_idIndexMarker383" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1213.1">the modal </span><span><span class="kobospan" id="kobo.1214.1">navigation drawer:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer098">
<span class="kobospan" id="kobo.1215.1"><img alt="Figure 7.16 – Modal navigation drawer" src="image/B19779_07_16.jpg" class="calibre5"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1216.1">Figure 7.16 – Modal navigation drawer</span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1217.1">The resizable emulator</span><a id="_idIndexMarker384" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1218.1"> is a great way for us to test our app across different device sizes, but it has its own limitations. </span><span class="kobospan" id="kobo.1218.2">The following are the limitations of </span><span><span class="kobospan" id="kobo.1219.1">resizable emulators:</span></span></p>
<ul class="calibre16">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1220.1">Hinge simulation</span></strong><span class="kobospan" id="kobo.1221.1">: While </span><a id="_idIndexMarker385" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1222.1">resizable emulators offer multi-window support and simulate various orientations, they might not accurately replicate the behavior of a physical hinge on foldable devices. </span><span class="kobospan" id="kobo.1222.2">The hinge’s physical characteristics and behavior may affect app layouts and </span><span><span class="kobospan" id="kobo.1223.1">interactions differently.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1224.1">Hardware specifics</span></strong><span class="kobospan" id="kobo.1225.1">: Emulators lack physical hardware components present in foldable devices, such as the actual hinge mechanism, flexible displays, sensors, and proprietary features, impacting the true emulation of foldable </span><span><span class="kobospan" id="kobo.1226.1">device behavior.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1227.1">Performance variation</span></strong><span class="kobospan" id="kobo.1228.1">: Emulators</span><a id="_idIndexMarker386" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1229.1"> may not accurately represent the performance capabilities of real foldable devices, especially in terms of hardware-specific optimizations and </span><span><span class="kobospan" id="kobo.1230.1">performance characteristics.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1231.1">Real-world testing environment</span></strong><span class="kobospan" id="kobo.1232.1">: Foldable devices may have unique environmental factors that impact user experience, such as external lighting conditions affecting the flexible display. </span><span class="kobospan" id="kobo.1232.2">Emulators may not replicate these real-world </span><span><span class="kobospan" id="kobo.1233.1">scenarios accurately.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1234.1">Software emulation versus hardware interaction</span></strong><span class="kobospan" id="kobo.1235.1">: Certain foldable device behaviors, such as drag-and-drop interactions across screens or unique gestures, might not be fully emulated in software due to </span><span><span class="kobospan" id="kobo.1236.1">hardware-specific interactions.</span></span></li>
</ul>
<p class="calibre4"><span class="kobospan" id="kobo.1237.1">We have learned how to handle navigation in foldable devices and large screens and how to provide a great user experience as the user is switching between the different screen sizes. </span><span class="kobospan" id="kobo.1237.2">This ensures that our app is responsive to different devices and that we satisfactorily use the available screen sizes. </span><span class="kobospan" id="kobo.1237.3">The team at Google has published stories of companies that support large screens and foldables; you can have a look </span><span><span class="kobospan" id="kobo.1238.1">here: </span></span><a href="https://developer.android.com/large-screens/stories" class="calibre3 pcalibre pcalibre1"><span><span class="kobospan" id="kobo.1239.1">https://developer.android.com/large-screens/stories</span></span></a><span><span class="kobospan" id="kobo.1240.1">.</span></span></p>
<h1 id="_idParaDest-91" class="calibre6"><a id="_idTextAnchor100" class="calibre3 pcalibre pcalibre1"/><span class="kobospan" id="kobo.1241.1">Summary</span></h1>
<p class="calibre4"><span class="kobospan" id="kobo.1242.1">In this chapter, we have learned how to use the Jetpack Compose Navigation library to navigate to different Jetpack Compose screens within our app. </span><span class="kobospan" id="kobo.1242.2">We have also learned tips and best practices for using this library. </span><span class="kobospan" id="kobo.1242.3">Additionally, we have covered how to pass arguments as we navigate to screens. </span><span class="kobospan" id="kobo.1242.4">Lastly, we have built on what we learned in </span><a href="B19779_04.xhtml#_idTextAnchor055" class="calibre3 pcalibre pcalibre1"><span><em class="italic"><span class="kobospan" id="kobo.1243.1">Chapter 4</span></em></span></a><span class="kobospan" id="kobo.1244.1">, by handling navigation in large screens and foldables </span><span><span class="kobospan" id="kobo.1245.1">in detail.</span></span></p>
<p class="calibre4"><span class="kobospan" id="kobo.1246.1">We have created </span><strong class="source-inline"><span class="kobospan" id="kobo.1247.1">FavoritePetsScreen</span></strong><span class="kobospan" id="kobo.1248.1">, but as of now it only has a </span><strong class="source-inline"><span class="kobospan" id="kobo.1249.1">Text</span></strong><span class="kobospan" id="kobo.1250.1"> label. </span><span class="kobospan" id="kobo.1250.2">In the next chapter, we will be adding functionality to persist data locally and retrieve that data locally too without any internet access. </span><span class="kobospan" id="kobo.1250.3">We will learn how to save our cute cat photos to Room, another Jetpack library for offline storage, and also add pets to our </span><span><span class="kobospan" id="kobo.1251.1">favorites list.</span></span></p>
</div>
</body></html>