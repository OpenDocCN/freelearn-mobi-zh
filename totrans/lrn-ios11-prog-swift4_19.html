<html><head></head><body>
      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Foodie Reviews</h1>
            
         </header>
         
         
         <article>
            
            
            <p>We are all familiar with reviews, from food reviews to App Store reviews. Seeing reviews
               for websites and apps is common place. In this chapter, we will create a review form
               that has a custom five-star rating component that we will add to it. We will learn
               about <kbd>UIControls</kbd> and how powerful they are. We will also look at literals and how to use them in our
               code.
            </p>
            
            <p>In this chapter, you will learn about:</p>
            
            <ul>
               
               <li>Creating a form that users can use to write a review</li>
               
               <li>Creating a custom star rating</li>
               
               <li>Image and color literals</li>
               
            </ul>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Getting started with reviews</h1>
            
         </header>
         
         
         <article>
            
            
            <p>Our review form UI is set up, but we need to make a slight change to it. Right now,
               we have an image displayed for ratings. We are going to build a custom rating component
               that we will use in both restaurant details and our Review form.
            </p>
            
            <p>We add it to our restaurant details first, then once we are finished, we add it to
               the Review form. We want our ratings view to be able to show ratings from zero stars
               to five stars. We also want the user to be able to select half stars when rating,
               so it will also need to show half stars.
            </p>
            
            <p>The first thing we do is start creating our custom <kbd>UIControl</kbd>. <kbd>UIButtons</kbd> and <kbd>UISwitches</kbd> are sub-classes of <kbd>UIControls</kbd>, and without getting super technical, we are going to create our control:
            </p>
            
            <ol>
               
               <li>Right click the <kbd>Reviews Form</kbd> folder and select <span class="packt_screen">New File</span>.
               </li>
               
               <li>Inside of the <span class="packt_screen">Choose a template for your new file</span> screen, select <span class="packt_screen">iOS</span> at the top, and then <span class="packt_screen">Cocoa Touch Class</span>. Then, hit <span class="packt_screen">Next</span>.
               </li>
               
               <li>In the options screen that appears, add the following:</li>
               
            </ol>
            
            <p style="padding-left: 60px">New file:</p>
            
            <ul>
               
               <li style="list-style-type: none">
                  
                  <ul>
                     
                     <li><span class="packt_screen">Class</span>: <kbd>RatingsView</kbd></li>
                     
                     <li><span class="packt_screen">Subclass</span>: <kbd>UIControl</kbd></li>
                     
                     <li><span class="packt_screen">Language</span>: <kbd>Swift</kbd></li>
                     
                  </ul>
                  
               </li>
               
            </ul>
            
            <ol start="4">
               
               <li>Click <span class="packt_screen">Next</span>, and then <span class="packt_screen">Create</span>.
               </li>
               
            </ol>
            
            <p>Now that we have created our file, we want to be able to hook it up to a <kbd>UIView</kbd> in storyboard. Let's do the following:
            </p>
            
            <ol>
               
               <li>Open up <kbd>RestaurantDetail.storyboard</kbd>.
               </li>
               
               <li>In the object library of the Utilities panel, type <kbd>view</kbd> in the <span class="packt_screen">filter</span> field.
               </li>
               
               <li>Delete the image with the five empty stars.</li>
               
               <li>Then, drag out a View into the cell with the empty stars.</li>
               
               <li>Select the View and, in the Size inspector, update the following values:</li>
               
            </ol>
            
            <ul>
               
               <li style="list-style-type: none">
                  
                  <ul>
                     
                     <li><span class="packt_screen">X</span>: <kbd>151</kbd></li>
                     
                     <li><span class="packt_screen">Y</span>: <kbd>43</kbd></li>
                     
                     <li><span class="packt_screen">Width</span>: <kbd>205</kbd></li>
                     
                     <li><span class="packt_screen">Height</span>: <kbd>34</kbd></li>
                     
                  </ul>
                  
               </li>
               
            </ul>
            
            <ol start="6">
               
               <li>Select the <span class="packt_screen">View</span>, and then the Pin icon. Enter the following values:
               </li>
               
            </ol>
            
            <ul>
               
               <li style="list-style-type: none">
                  
                  <ul>
                     
                     <li><span class="packt_screen">Top</span>: <kbd>13</kbd></li>
                     
                     <li><span class="packt_screen">Left</span>: <kbd><kbd>0</kbd></kbd></li>
                     
                     <li><span class="packt_screen">Width</span>: <kbd>205</kbd> (checked)
                     </li>
                     
                     <li><span class="packt_screen">Height</span>: <kbd>34</kbd> (checked)
                     </li>
                     
                     <li><span class="packt_screen">Constrain to margins</span>: Unchecked
                     </li>
                     
                  </ul>
                  
               </li>
               
            </ul>
            
            <ol start="7">
               
               <li>Click <span class="packt_screen">Add 4 Constraints</span>.
               </li>
               
               <li>Next, select the Restaurant View Controller, then in the Identity inspector, update
                  the <span class="packt_screen">Custom Class</span> to <kbd>RatingsView</kbd> and hit <em>Enter</em>.
               </li>
               
            </ol>
            
            <p>Now, we are set up to get started. Open up the <kbd>RatingsView.swift</kbd> file and let's get started.
            </p>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Displaying ratings in our custom UIControl</h1>
            
         </header>
         
         
         <article>
            
            
            <p>Inside the <kbd>RatingsView.swift</kbd> file, we first need to create all of the variables we will need to work with. Add
               the following under the class declaration:
            </p>
            <pre>let imgFilledStar = #imageL iteral(resourceName: "filled-star")<br/>let imgHalfStar = #imageLiteral(resourceName: "half-star")<br/>let imgEmptyStar = #imageLiteral(resourceName: "empty-star")<br/>let shouldBecomeFirstResponder = true<br/>var rating:CGFloat = 0.0<br/>var totalStars = 5 </pre>
            <div>
               
               <p>If you are having trouble using an image literal, you can use <kbd>UIImage(named:)</kbd> instead.
               </p>
               
            </div>
            
            <p>We are doing something in this file. We are using image literals as our variables.
               If you type <kbd>Image Literal</kbd> in your file and hit return, you will see a small icon:
            </p>
            
            <div class="CDPAlignCenter CDPAlign"><img height="91" src="assets/c04a4b00-0504-4bd5-95d6-cb8e59874aaf.png" width="162"/></div>
            
            <p>Double-click this icon and a modal appears that shows you an image to choose:</p>
            
            <div class="CDPAlignCenter CDPAlign"><img height="154" src="assets/e032f96b-cec6-4973-8384-83f58b958f75.png" width="315"/></div>
            
            <p>You can look and find the three images using this window, or you can just type everything
               you see here, and the image appears. When done you should see the following:
            </p>
            
            <div class="CDPAlignCenter CDPAlign"><img height="135" src="assets/3b4db90e-1392-435f-9d26-f9fa6f20ebb0.png" width="221"/></div>
            
            <p>The first three variables created are used for drawing our ratings view. The next
               variable, <kbd>showBecomeFirstResponder</kbd>, is a variable to let us be able to respond and handle events as they happen. Next,
               the rating variable is used for keeping track of our current rating. Finally, we have
               a variable to keep track of the total number of stars.
            </p>
            
            <p>Now let's add our <kbd>init</kbd> methods:
            </p>
            <pre>override init(frame: CGRect) {<br/>    super.init(frame: frame)<br/>}<br/>required init?(coder aDecoder: NSCoder) {<br/>    super.init(coder: aDecoder)<br/>}<br/>override func setNeedsLayout() {<br/>    super.setNeedsLayout()<br/>    self.setNeedsLayout()<br/>}</pre>
            <p>These are just boilerplate code that you need when creating views. There's nothing
               really to explain here other than that you need them. Next, we need to create a few
               methods that will handle creating our stars. We need three of them for each type of
               star (full, half, and empty). Add the following after the last curly bracket:
            </p>
            <pre>private extension RatingView {<br/>    func drawStar(with frame:CGRect, highlighted:Bool) {<br/>        let image = highlighted ? imgFilledStar :imgEmptyStar<br/>        draw(with: image, and: frame)<br/>    }<br/><br/>    func drawHalfStar(with frame:CGRect) {<br/>        draw(with: imgHalfStar, and: frame)<br/>    }<br/><br/>    func draw(with image:UIImage, and frame:CGRect) {<br/>        image.draw(in: frame)<br/>    }<br/>}</pre>
            <p>These methods just create a full, half, or empty star. We now need to be able to draw
               these stars. <kbd>UIView</kbd> has a draw method we can use to draw stars. Before the <kbd>drawStar(frame:highlighted:)</kbd> method, add the following method inside of the class:
            </p>
            <pre>override func draw(_ rect: CGRect) {<br/>    let context = UIGraphicsGetCurrentContext()<br/>    context!.setFillColor( colorLiteral(red: 1, green: 1, blue: 1, alpha: 0).cgColor)<br/>    context!.fill(rect)<br/><br/>    let availWidth = rect.size.width<br/>    let cellWidth = availWidth / CGFloat(totalStars)<br/>    let starSide = (cellWidth &lt;= rect.size.height) ? cellWidth : rect.size.height<br/><br/>    for index in 0...totalStars {<br/>        let value = cellWidth*CGFloat(index) + cellWidth/2<br/>        let center = CGPoint(x: value+1, y: rect.size.height/2)<br/>        let frame = CGRect(x: center.x - starSide/2, y: center.y - starSide/2, width: starSide, height: starSide)<br/>        let highlighted = (Float(index+1) &lt;= ceilf(Float(self.rating)))<br/><br/>        if highlighted &amp;&amp; (CGFloat(index+1) &gt; CGFloat(self.rating)) {<br/>            drawHalfStar(with: frame)<br/>        } else {<br/>            drawStar(with: frame, highlighted: highlighted)<br/>        }<br/>    }<br/>}</pre>
            <p>Here is all the code we need to create our stars. Let's break down the code and see
               what is happening. First, we get a graphics context, and we set its fill color to
               be clear. We are using a <span class="packt_screen">Color Literal</span> this time, and this allows us to create colors and see those colors directly in our
               Swift file. You can either type <kbd>Color Literal</kbd> and hit <em>Enter</em>. You will see a white box has been created for you, and if you double-click this
               box, you can edit the color just like you would in storyboard.
            </p>
            
            <p>Next, we create three variables: <kbd>availWidth</kbd>, <kbd>cellWidth</kbd>, and <kbd>starSide</kbd>. Since we are using <kbd>UIView</kbd> in the storyboard, we check to see the size of this container. We then determine
               the size of each star based on the width and the number of stars. Finally, we calculate
               the height of the star.
            </p>
            
            <p>Then, we loop through each star and create them based on the rating value. Our rating
               can be 0-5, with increments of <kbd>0.5</kbd>. We also set up the positioning of each star using the center point. Finally, we
               determine, based on the value, whether the star should be an empty star, a half star,
               or a full star. That is our setup method and you do not have to get what is going
               on entirely, just have a basic understanding, and the more you code, the more it starts
               to make sense.
            </p>
            
            <p>Before we build the project, open <kbd>RestaurantDetailViewController</kbd>, and under import <kbd>UIKit</kbd>, add the following import:
            </p>
            <pre>import MapKit<br/>Then, after imgMap, add the following outlet:<br/>@IBOutlet weak var ratingView: RatingView!</pre>
            <p>Let's do some cleaning up by moving the <kbd>createMap()</kbd>, <kbd>setupLabels()</kbd>, and <kbd>takeSnapshot(:location)</kbd> methods into a private extension. When you are done, you should see the following:
            </p>
            <pre>private extension RestaurantDetailViewController {<br/>    func setupLabels() {<br/>        guard let restaurant = selectedRestaurant else { return }<br/>        if let name = restaurant.name {<br/>            lblName.text = name<br/>            title = name<br/>        }<br/>        if let cuisine = restaurant.subtitle { lblCuisine.text = cuisine }<br/>        if let address = restaurant.address {<br/>            lblAddress.text = address<br/>            lblHeaderAddress.text = address<br/>        }<br/>        lblTableDetails.text = "Table for 7, tonight at 10:00 PM"<br/>    }<br/>    func createMap() {<br/>        guard let annotation = selectedRestaurant, let long = annotation.longitude, let lat = annotation.latitude else { return }<br/>        let location = CLLocationCoordinate2D(<br/>            latitude: lat,<br/>            longitude: long<br/>        )<br/>        takeSnapShot(with: location)<br/>    }<br/><br/>    func takeSnapShot(with location: CLLocationCoordinate2D) {<br/>        let mapSnapshotOptions = MKMapSnapshotOptions()<br/>        var loc = location<br/>        let polyLine = MKP  olyline(coordinates: &amp;loc, count: 1)<br/>        let region = MKCoordinateRegionForMapRect(polyLine.boundingMapRect)<br/>        mapSnapshotOptions.region = region<br/>        mapSnapshotOptions.scale = UIScreen.main.scale<br/>        mapSnapshotOptions.size = CGSize(width: 340, height: 208)<br/>        mapSnapshotOptions.showsBuildings = true<br/>        mapSnapshotOptions.showsPointsOfInterest = true<br/>        let snapShotter = MKMapSnapshotter(options: mapSnapshotOptions)<br/>        snapShotter.start() { snapshot, error in<br/>            guard let snapshot = snapshot else {<br/>                return<br/>            }<br/>            UIGraphicsBeginImageContextWithOptions(mapSnapshotOptions.size, true, 0)<br/>            snapshot.image.draw(at: .zero)<br/>            let identifier = "custompin"<br/>            let annotation = MKPointAnnotation()<br/>            annotation.coordinate = location<br/>            let pinView = MKPinAnnotationView(annotation: annotation, reuseIdentifier: identifier)<br/>            pinView.image = UIImage(named: "custom-annotation")!<br/>            let pinImage = pinView.image<br/>            var point = snapshot.point(for: location)<br/>            let rect = self.imgMap.bounds<br/>            if rect.contains(point) {<br/>                let pinCenterOffset = pinView.centerOffset<br/>                point.x -= pinView.bounds.size.width / 2<br/>                point.y -= pinView.bounds.size.height / 2<br/>                point.x += pinCenterOffset.x<br/>                point.y += pinCenterOffset.y<br/>                pinImage?.draw(at: point)<br/>            }<br/><br/>            if let image = UIGraphicsGetImageFromCurrentImageContext() {<br/>                UIGraphicsEndImageContext()<br/>                DispatchQueue.main.async {<br/>                    self.imgMap.image = image<br/>                }<br/>            }<br/>        }<br/>    }<br/>}</pre>
            <p>Next, add the following method into the private method:</p>
            <pre>func createRating() {<br/>    ratingView.rating = 3.5<br/>}</pre>
            <p>Next, open <kbd>RestaurantDetail.storyboard</kbd> and select the Restaurant View Controller, then in the Outlet inspector click and
               drag from <kbd>ratingView</kbd> to the <kbd>UIView</kbd> we created earlier. Let's build and run the project by hitting the Play button (or
               use <em>cmd</em> + R). When you get to the restaurant details, you will see that we now have 3.5 stars:
            </p>
            
            <div class="CDPAlignCenter CDPAlign"><img height="359" src="assets/02c69175-9d42-4b4c-8edc-f1e2d3b7eb32.jpg" width="205"/></div>
            
            <p>This is precisely what we want, but we also need our control be able to handle touch
               events.
            </p>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Adding our touch events</h1>
            
         </header>
         
         
         <article>
            
            
            <p>Adding touch events will be used to change the rating to the desired rating. Open
               <kbd>RatingView</kbd> and let's add the methods we need to get our control to accept touch events by adding
               the following inside the main class:
            </p>
            <pre>override var canBecomeFirstResponder: Bool {<br/>    return shouldBecomeFirstResponder<br/>}<br/>override func beginTracking(_ touch: UITouch, with event: UIEvent?) -&gt; Bool {<br/>    if self.isEnabled {<br/>        super.beginTracking(touch, with: event)<br/>        if (shouldBecomeFirstResponder &amp;&amp; self.isFirstResponder) {<br/>            becomeFirstResponder()<br/>        }<br/>        handle(with: touch)<br/>        return true<br/>    }<br/>    else { return false }<br/>}</pre>
            <p>Then, add the following into the private extension:</p>
            <pre>func handle(with touch: UITouch) {<br/>    let cellWidth = self.bounds.size.width / CGFloat(totalStars)<br/>    let location = touch.location(in: self)<br/>    var value = location.x / cellWidth<br/><br/>    if (value + 0.5 &lt; CGFloat(ceilf(Float(value)))) {<br/>        value = floor(value) + 0.5<br/>    }<br/>    else {<br/>        value = CGFloat(ceilf(Float(value)))<br/>    }<br/><br/>    updateRating(with: value)<br/>}<br/>// Update Rating<br/>func updateRating(with value:CGFloat) {<br/>    if (self.rating != value &amp;&amp; value &gt;= 0 &amp;&amp; value &lt;= CGFloat(totalStars)) {<br/>        self.rating = value<br/>        setNeedsDisplay()<br/>    }<br/>}</pre>
            <p>The following code is used to handle touch. First, we set the <kbd>canBecomeFirstResponder</kbd> variable. Next, we have the <kbd>beginTracking(touch:event:)</kbd>. In this method, we set whether our control can accept touch events. If the control
               is enabled, then we allow touches, and we call the <kbd>handle()</kbd> method and pass it the <kbd>UITouch</kbd> location. Let's discuss the <kbd>handle()</kbd> method.
            </p>
            
            <p>In our handle method, we start with three variables. We first get the width of the
               entire rating view. Next, we get the value of the touch location, then finally we
               take the <kbd>x</kbd> value of the location and divide it by the width. We then check the value, figure
               out whether it is less than <kbd>0.5</kbd> or greater than <kbd>0.5</kbd>, and round appropriately. Last, we update the rating with the value we calculate.
            </p>
            
            <p>In the <kbd>updateRating(value:)</kbd> method, we check to make sure that our value is not equal to the current value and
               whether the value is greater than zero and less than the total number of stars. If
               these conditions pass, then we set the rating to the new value and call the <kbd>setNeedsDisplay()</kbd> method. This method makes sure that our control is redrawn.
            </p>
            
            <p>Open <kbd>RestaurantDetailsViewController</kbd> and in the <kbd>createRating()</kbd> method, add the following:
            </p>
            <pre>ratingView.isEnabled = true</pre>
            <p>We now have a rating, and by setting the rating to 3.5, we should now see 3.5 stars.
               We also set the <kbd>isEnabled</kbd> value to <kbd>true</kbd>, which means we can touch and change the rating. If we set it to <kbd>false</kbd>, then the value cannot change. In the restaurant details, we want to turn off touch,
               but in the <kbd>ReviewFormViewController</kbd> we want that to be enabled. You can play with this, and when done set the <kbd>isEnable</kbd> value to <kbd>false</kbd> and remove the rating.
            </p>
            
            <p>We set the rating later in the book when we start saving reviews:</p>
            
            <div class="CDPAlignCenter CDPAlign"><img height="499" src="assets/ec8a24b4-f014-4de4-8c7c-4c131537aa0f.jpg" width="284"/></div>
            
            <p>You can now change the rating from 3.5 to 4.5 by tapping on the view. Now that we
               have this set up, let's get our review form set up.
            </p>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Setting up the unwind segues</h1>
            
         </header>
         
         
         <article>
            
            
            <p>As we have done before, we need to add code for us to unwind (dismiss) a View Controller:</p>
            
            <ol>
               
               <li>Open the <kbd>RestaurantDetailsViewController.swift</kbd> file and add the following into the private extension:
               </li>
               
            </ol>
            <pre style="padding-left: 60px">@IBAction func unwindReviewCancel(segue:UIStoryboardSegue) {}</pre>
            <ol start="2">
               
               <li>Save the file and open the <kbd>ReviewForm.storyboard</kbd>.
               </li>
               
               <li>CTL drag the <span class="packt_screen">Cancel</span> button to the Exit icon inside of the same View Controller:
               </li>
               
            </ol>
            
            <div class="CDPAlignCenter CDPAlign"><img height="381" src="assets/395c9bd9-c1ad-40f4-bd17-118a4451a4f3.png" width="175"/></div>
            
            <ol start="4">
               
               <li>In the screen that appears, under <span class="packt_screen">Action Segue</span>, select <kbd>unwindReviewCancelWithSegue</kbd>.
               </li>
               
            </ol>
            
            <p>If you build and run the project by hitting the Play button (or use <em>cmd</em> + <em>R</em>), you should now be able to dismiss the <span class="packt_screen">Ratings View</span>.
            </p>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Setting up our rating control </h1>
            
         </header>
         
         
         <article>
            
            
            <p>We are now going to set up our rating control:</p>
            
            <ol>
               
               <li>Open up <kbd>ReviewForm.storyboard</kbd>.
               </li>
               
               <li>In the object library of the Utilities panel, type <kbd>view</kbd> in the <span class="packt_screen">filter</span> field.
               </li>
               
               <li>Delete the image with the five empty stars.</li>
               
               <li>Then, drag out a View into the cell with the empty stars.</li>
               
               <li>Select the View and, in the Size inspector, update the following values:</li>
               
            </ol>
            
            <ul>
               
               <li style="list-style-type: none">
                  
                  <ul>
                     
                     <li><span class="packt_screen">X</span>: <kbd>133</kbd></li>
                     
                     <li><span class="packt_screen">Y</span>: <kbd>7</kbd></li>
                     
                     <li><span class="packt_screen">Width</span>: <kbd>108</kbd></li>
                     
                     <li><span class="packt_screen">Height</span>: <kbd>17</kbd></li>
                     
                  </ul>
                  
               </li>
               
            </ul>
            
            <ol start="6">
               
               <li>Next, in the Identity inspector, update the <strong>Custom Class</strong> to <kbd>RatingsView</kbd> and hit <em>Enter</em>.
               </li>
               
               <li>Next, select the view inside of the view and then select the Pin icon and enter the
                  following values:
               </li>
               
            </ol>
            
            <ul>
               
               <li style="list-style-type: none">
                  
                  <ul>
                     
                     <li><span class="packt_screen">Top</span>: <kbd>7</kbd></li>
                     
                     <li><span class="packt_screen">Constrain to margins</span>: Unchecked
                     </li>
                     
                     <li><span class="packt_screen">Width</span>: <kbd>108</kbd> (should be checked)
                     </li>
                     
                     <li><span class="packt_screen">Height</span>: <kbd>17</kbd> (should be checked)
                     </li>
                     
                  </ul>
                  
               </li>
               
            </ul>
            
            <ol start="8">
               
               <li>Click <span class="packt_screen">Add 3 Constraints</span>.
               </li>
               
               <li>Next, click the Align icon and enter the value of <span class="packt_screen">Horizontally in Container</span> as <kbd>0</kbd> (should be checked).
               </li>
               
               <li>Click <span class="packt_screen">Add 1 Constraint</span>.
               </li>
               
               <li>Select the label that says <span class="packt_screen">Tap a Star to Rate</span>.
               </li>
               
               <li>Then, select the Pin icon and enter the value of <span class="packt_screen">Top</span> as <kbd>1</kbd>.
               </li>
               
               <li>Click <span class="packt_screen">Add 1 Constraints</span>.
               </li>
               
               <li>Next, select the Restaurant View Controller, then in the Identity inspector, update
                  the <span class="packt_screen">Custom Class</span> to <kbd>RatingsView</kbd> and hit <em>Enter</em>.
               </li>
               
            </ol>
            
            <p>Our form is now updated; let's create our controller next.</p>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Creating our review form controller </h1>
            
         </header>
         
         
         <article>
            
            
            <ol>
               
               <li>Right-click the <kbd>Review Form</kbd> folder again and select <span class="packt_screen">New File</span>.
               </li>
               
               <li>Inside of the <span class="packt_screen">Choose a template for your new file</span> screen, select <span class="packt_screen">iOS</span> at the top, and then <span class="packt_screen">Cocoa Touch Class</span>. Then, hit <span class="packt_screen">Next</span>.
               </li>
               
               <li>In the options screen that appears, add the following:</li>
               
            </ol>
            
            <p style="padding-left: 60px">New file:</p>
            
            <ul>
               
               <li style="list-style-type: none">
                  
                  <ul>
                     
                     <li><span class="packt_screen">Class</span>: <kbd>ReviewFormViewController</kbd></li>
                     
                     <li><span class="packt_screen">Subclass</span>: <kbd>UITableViewController</kbd></li>
                     
                     <li><span class="packt_screen">Also create XIB</span>: Unchecked
                     </li>
                     
                     <li><span class="packt_screen">Language</span>: <kbd>Swift</kbd></li>
                     
                  </ul>
                  
               </li>
               
            </ul>
            
            <ol start="4">
               
               <li>Click <span class="packt_screen">Next</span>, and then <span class="packt_screen">Create</span>.
               </li>
               
            </ol>
            
            <p>Delete everything after the <kbd>viewDidLoad()</kbd> method, as we do not need all of the other code. Next, let's set up our <kbd>ReviewFormViewController</kbd> by adding the following after the class declaration:
            </p>
            <pre>@IBOutlet weak var ratingView: RatingView!<br/>@IBOutlet weak var tfTitle: UITextField!<br/>@IBOutlet weak var tfName: UITextField!<br/>@IBOutlet weak var tvReview: UITextView!</pre>
            <p>We also need to add a method when our save button is tapped by adding the following:</p>
            <pre>@IBAction func onSaveTapped(_ sender: Any) {<br/>  print(ratingView.rating)<br/>  print(tfTitle.text as Any)<br/>  print(tfName.text as Any)<br/>  print(tvReview.text)<br/>  dismiss(animated: true, completion: nil)<br/>}</pre>
            <p>Let's now connect this file with our <kbd>UIViewController</kbd> and our review form in storyboard:
            </p>
            
            <ol>
               
               <li>In the Utilities panel, select the Identity inspector.</li>
               
               <li>Under <span class="packt_screen">Custom Class</span>, in the <span class="packt_screen">Class</span> drop-down menu, type/select <span class="packt_screen">ReviewFormViewController</span> and hit <em>Enter</em> in order connect the View Controller to the class.
               </li>
               
               <li>Now, select the Connections inspector in the Utilities panel.</li>
               
               <li>Now, click and drag from the empty circle of each of the following variables we just
                  added under Outlets to their respective elements in either the scene or Outline view.
               </li>
               
               <li>Click and drag from the empty circle for <kbd>ratingView</kbd> to the <kbd>UIView</kbd> in the storyboard:
               </li>
               
            </ol>
            
            <div class="CDPAlignCenter CDPAlign"><img height="437" src="assets/b19321b1-0ee1-491c-908d-d59a011ace3a.png" width="341"/></div>
            
            <ol start="6">
               
               <li>Click and drag from the empty circle for <kbd>tfTitle</kbd> to the <kbd>Textfield</kbd> in the storyboard:
               </li>
               
            </ol>
            
            <div class="CDPAlignCenter CDPAlign"><img height="585" src="assets/baa34c8c-194d-4be9-a52e-7fa14d1aa20e.png" width="423"/></div>
            
            <ol start="7">
               
               <li>Click and drag from the empty circle for <kbd>tfName</kbd> to the <kbd>Textfield</kbd> in the storyboard:
               </li>
               
            </ol>
            
            <div class="CDPAlignCenter CDPAlign"><img height="517" src="assets/a1d11d0c-8037-45d3-a7cd-ece9b0cb4004.png" width="419"/></div>
            
            <ol start="8">
               
               <li>Click and drag from the empty circle for <kbd>tvReview</kbd> to the <kbd>Text View</kbd> in the storyboard:
               </li>
               
            </ol>
            
            <div class="CDPAlignCenter CDPAlign"><img height="549" src="assets/19c47696-86c0-4213-880c-eafe8cba3d7e.png" width="460"/></div>
            
            <ol start="9">
               
               <li>Finally, click and drag from the empty circle for <kbd>onSaveTapped</kbd> to the <span class="packt_screen">Save</span> button in the Navigation controller:
               </li>
               
            </ol>
            
            <div class="CDPAlignCenter CDPAlign"><img height="578" src="assets/434946ac-b56c-49e7-8083-fda57bd13a93.png" width="448"/></div>
            
            <p>Now, that we have an outlet connected to our form, let's build and run the project
               by hitting the Play button (or use <em>cmd</em> + <em>R</em>). If you go to your form, enter the information and hit save so you can see that
               information in your Output panel. Our reviews are now ready to go. Next, we'll create
               photos with filters.
            </p>
            
            
            
         </article>
         
         
         
      </section>
      
   

      
      <section>
         
         
         <header>
            
            <h1 class="header-title">Summary </h1>
            
         </header>
         
         
         <article>
            
            
            <p>In this chapter, we created a Review form using a static table view. We worked with
               Text View and Text Fields for the first time. We also set up our first custom <kbd>UIControl</kbd> with our star rating, and we got to use color and <span class="packt_screen">Image Literals</span> in this chapter. Literals are a great way to see your image or the color you are
               working with visually.
            </p>
            
            <p>In the next chapter, we will work on creating a way to add a photo to a restaurant.
               We will also learn how to add filters to our photos.
            </p>
            
            
            
         </article>
         
         
         
      </section>
      
   </body></html>