<html><head></head><body>
<div id="_idContainer053">
<h1 class="chapter-number" id="_idParaDest-45"><a id="_idTextAnchor048"/><span class="koboSpan" id="kobo.1.1">3</span></h1>
<h1 id="_idParaDest-46"><a id="_idTextAnchor049"/><span class="koboSpan" id="kobo.2.1">Creating a Breathing App</span></h1>
<p><span class="koboSpan" id="kobo.3.1">So far, we have looked at the SwiftUI fundamentals, some of the modifiers we can use to alter a view in a certain way, and many of the properties that can be animated. </span><span class="koboSpan" id="kobo.3.2">Now it’s time to put that knowledge to work and build our </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">first project.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this chapter, we will build an animation that is similar to the breathing apps that are popular on Apple watches and iPhones. </span><span class="koboSpan" id="kobo.5.2">There will be three animations that we will combine to make six circle views move, recreating the slow, rhythmic motions of the </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">Apple app.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">There is not a lot of code needed to make this app work; however, as we move through the book, we will build upon this project and gradually ramp up </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">the difficulty.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">The steps needed to complete the project are </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">as follows:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.11.1">Setting up the project </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">with Xcode</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Adding the variables </span></li>
<li><span class="koboSpan" id="kobo.14.1">Implementing a background color </span></li>
<li><span class="koboSpan" id="kobo.15.1">Adding the circles </span></li>
<li><span class="koboSpan" id="kobo.16.1">Animating </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">the circles</span></span></li>
</ul>
<h1 id="_idParaDest-47"><a id="_idTextAnchor050"/><span class="koboSpan" id="kobo.18.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.19.1">You can download the completed project from GitHub in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.20.1">Chapter 3</span></strong></span> <span class="No-Break"><span class="koboSpan" id="kobo.21.1">folder: </span></span><a href="https://github.com/PacktPublishing/Animating-SwiftUI-Applications"><span class="No-Break"><span class="koboSpan" id="kobo.22.1">https://</span></span><span class="No-Break"><span class="koboSpan" id="kobo.23.1">github.com/PacktPublishing/Animating-SwiftUI-Applications</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.24.1">.</span></span></p>
<h1 id="_idParaDest-48"><a id="_idTextAnchor051"/><span class="koboSpan" id="kobo.25.1">Setting up the project with Xcode</span></h1>
<p><span class="koboSpan" id="kobo.26.1">Let’s start by </span><a id="_idIndexMarker218"/><span class="koboSpan" id="kobo.27.1">opening Xcode. </span><span class="koboSpan" id="kobo.27.2">Then, choose either the </span><strong class="bold"><span class="koboSpan" id="kobo.28.1">iOS</span></strong><span class="koboSpan" id="kobo.29.1"> option to just build your project on an iPhone or choose </span><strong class="bold"><span class="koboSpan" id="kobo.30.1">Multiplatform</span></strong><span class="koboSpan" id="kobo.31.1"> if you want to build this project so it runs on an iPhone, iPad, or a Mac. </span><span class="koboSpan" id="kobo.31.2">After that, from the list of templates, choose the one called </span><strong class="bold"><span class="koboSpan" id="kobo.32.1">App</span></strong><span class="koboSpan" id="kobo.33.1">, and </span><span class="No-Break"><span class="koboSpan" id="kobo.34.1">click </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.35.1">Next</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">Now, give the project a name. </span><span class="koboSpan" id="kobo.37.2">I’m calling mine </span><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">Animating Circles</span></strong><span class="koboSpan" id="kobo.39.1">, but you can name it whatever you like. </span><span class="koboSpan" id="kobo.39.2">Then, fill out the rest of the details on this page. </span><span class="koboSpan" id="kobo.39.3">The two checkboxes can be left unchecked, as we are not using </span><strong class="bold"><span class="koboSpan" id="kobo.40.1">Core Data</span></strong><span class="koboSpan" id="kobo.41.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.42.1">Tests</span></strong><span class="koboSpan" id="kobo.43.1">. </span><span class="koboSpan" id="kobo.43.2">Finally, select a location to save the project. </span><span class="koboSpan" id="kobo.43.3">I usually just save them on </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">my desktop.</span></span></p>
<p><span class="koboSpan" id="kobo.45.1">We are then taken to the Xcode interface; you’ll notice that Xcode automatically imports the SwiftUI framework, so we can get right into </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">our project.</span></span></p>
<h1 id="_idParaDest-49"><a id="_idTextAnchor052"/><span class="koboSpan" id="kobo.47.1">Adding the variables</span></h1>
<p><span class="koboSpan" id="kobo.48.1">Our first task is to</span><a id="_idIndexMarker219"/><span class="koboSpan" id="kobo.49.1"> add some variables to keep track of the animations. </span><span class="koboSpan" id="kobo.49.2">There will be three animations, so in </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1">ContentView</span></strong><span class="koboSpan" id="kobo.51.1">, we need three boolean variables for them. </span><span class="koboSpan" id="kobo.51.2">We need to give them an initial value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">false</span></strong><span class="koboSpan" id="kobo.53.1">, which will be changed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.54.1">true</span></strong><span class="koboSpan" id="kobo.55.1"> when the app first </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">starts up:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.57.1">
struct ContentView: View {
    //animation bools
    @State var scaleUpDown = false
    @State var rotateInOut = false
    @State var moveInOut = false</span></pre>
<p><span class="koboSpan" id="kobo.58.1">The variables are called </span><strong class="source-inline"><span class="koboSpan" id="kobo.59.1">scaleUpDown</span></strong><span class="koboSpan" id="kobo.60.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.61.1">rotateInOut</span></strong><span class="koboSpan" id="kobo.62.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.63.1">MoveInOut</span></strong><span class="koboSpan" id="kobo.64.1">. </span><span class="koboSpan" id="kobo.64.2">Usually, when you name your variables, you want to make them as descriptive as possible, so you don’t have to guess what they are used for and can recognize them right away, as we </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">did here.</span></span></p>
<p><span class="koboSpan" id="kobo.66.1">All the variables are now in place, so let’s move on to looking at the background of </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">our animation.</span></span></p>
<h1 id="_idParaDest-50"><a id="_idTextAnchor053"/><span class="koboSpan" id="kobo.68.1">Implementing a background color</span></h1>
<p><span class="koboSpan" id="kobo.69.1">For the </span><a id="_idIndexMarker220"/><span class="koboSpan" id="kobo.70.1">background, we will go into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.71.1">body</span></strong><span class="koboSpan" id="kobo.72.1"> computed property. </span><span class="koboSpan" id="kobo.72.2">This is where we add our views that will be seen on the screen by the user. </span><span class="koboSpan" id="kobo.72.3">The first thing we want to add is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">ZStack</span></strong><span class="koboSpan" id="kobo.74.1">; this is the main stack that’s going to hold all of </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">the views:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.76.1">
var body: some View {
      ZStack {
             }
      }</span></pre>
<p><span class="koboSpan" id="kobo.77.1">The reason we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">ZStack</span></strong><span class="koboSpan" id="kobo.79.1"> versus an </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">HStack</span></strong><span class="koboSpan" id="kobo.81.1"> or a </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">VStack</span></strong><span class="koboSpan" id="kobo.83.1"> is we want the views stacked on each other, so they appear as only one view, and later we will animate them separately with </span><span class="No-Break"><span class="koboSpan" id="kobo.84.1">different modifiers.</span></span></p>
<p><span class="koboSpan" id="kobo.85.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.86.1">ZStack</span></strong><span class="koboSpan" id="kobo.87.1">, let’s set a black background for the screen by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.88.1">.foregroundColor</span></strong><span class="koboSpan" id="kobo.89.1"> modifier, and specify the color to use; we will use black in </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">this case:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.91.1">
Rectangle() 
.foregroundColor(Color.black)</span></pre>
<p><span class="koboSpan" id="kobo.92.1">The following figure shows the result of </span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">that code:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer047">
<span class="koboSpan" id="kobo.94.1"><img alt="Figure 3.1: Adding a black background " src="image/B18674_03_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.95.1">Figure 3.1: Adding a black background</span></p>
<p><span class="koboSpan" id="kobo.96.1">As you can see, when adding a background in SwiftUI, it will cover most of the iPhone screen, but there is an area on an iPhone that is known as the “safe area.” </span><span class="koboSpan" id="kobo.96.2">This is the area reserved for the iPhone notch at the top (the earpiece area) and the very bottom of the phone where the colored background </span><span class="No-Break"><span class="koboSpan" id="kobo.97.1">can’t reach.</span></span></p>
<p><span class="koboSpan" id="kobo.98.1">SwiftUI lets us hide the safe areas by </span><a id="_idIndexMarker221"/><span class="koboSpan" id="kobo.99.1">using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.100.1">.edgesIgnoringSafeArea</span></strong><span class="koboSpan" id="kobo.101.1"> modifier, then passing in the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.102.1">.all</span></strong><span class="koboSpan" id="kobo.103.1">, which extends the black color to the edges of the iPhone screen on all sides. </span><span class="koboSpan" id="kobo.103.2">To do this, add this line of code just underneath the </span><strong class="source-inline"><span class="koboSpan" id="kobo.104.1">.fourgroundColor(Color.black)</span></strong><span class="koboSpan" id="kobo.105.1"> line you </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">previously added:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.107.1">
.edgesIgnoringSafeArea(.all)</span></pre>
<p><span class="koboSpan" id="kobo.108.1">This produces a completely covered iPhone screen with a black background, as </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer048">
<span class="koboSpan" id="kobo.110.1"><img alt=" Figure 3.2: Using the .edgesIgnoringSafeArea modifier " src="image/B18674_03_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.111.1"> Figure 3.2: Using the .edgesIgnoringSafeArea modifier</span></p>
<p><span class="koboSpan" id="kobo.112.1">There </span><a id="_idIndexMarker222"/><span class="koboSpan" id="kobo.113.1">are also </span><strong class="source-inline"><span class="koboSpan" id="kobo.114.1">.vertical</span></strong><span class="koboSpan" id="kobo.115.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.116.1">.horizontal</span></strong><span class="koboSpan" id="kobo.117.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1">.leading</span></strong><span class="koboSpan" id="kobo.119.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">.trailing</span></strong><span class="koboSpan" id="kobo.121.1"> values that you can use to make the </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1">.edgesIgnoringSafeArea</span></strong><span class="koboSpan" id="kobo.123.1"> modifier more specific depending on what part of the device you want to </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">be ignored.</span></span></p>
<p><span class="koboSpan" id="kobo.125.1">So, we’ve set up the background of our animation. </span><span class="koboSpan" id="kobo.125.2">Now it’s time to add </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">the circles.</span></span></p>
<h1 id="_idParaDest-51"><a id="_idTextAnchor054"/><span class="koboSpan" id="kobo.127.1">Adding the circles</span></h1>
<p><span class="koboSpan" id="kobo.128.1">Let’s briefly </span><a id="_idIndexMarker223"/><span class="koboSpan" id="kobo.129.1">review the goal of this project. </span><span class="koboSpan" id="kobo.129.2">We want to make six circles grow and shrink, and at the same time rotate them, and move them in and out. </span><span class="koboSpan" id="kobo.129.3">The six circles will be overlapping each other, which adds a nice look as they will be partially translucent. </span></p>
<p><span class="koboSpan" id="kobo.130.1">To make this work, we need some more ZStacks, and then to place the circles, in pairs, into them. </span><span class="koboSpan" id="kobo.130.2">How the circles are aligned in relation to each other can be likened to the numbers on a clock. </span><span class="koboSpan" id="kobo.130.3">Going with this clock analogy, we need a </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">ZStack</span></strong><span class="koboSpan" id="kobo.132.1"> to hold the three pairs: </span></p>
<ul>
<li><span class="koboSpan" id="kobo.133.1">The first pair of circles will be placed in the 12 and 6 </span><span class="No-Break"><span class="koboSpan" id="kobo.134.1">o’clock positions</span></span></li>
<li><span class="koboSpan" id="kobo.135.1">The second pair of circles will be placed in the 2 and 7 </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">o’clock positions</span></span></li>
<li><span class="koboSpan" id="kobo.137.1">The third pair of circles will be placed in the 10 and 4 </span><span class="No-Break"><span class="koboSpan" id="kobo.138.1">o’clock positions</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.139.1">Let’s see how to add these three pairs </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">of circles.</span></span></p>
<h2 id="_idParaDest-52"><a id="_idTextAnchor055"/><span class="koboSpan" id="kobo.141.1">Adding the first pair of circles</span></h2>
<p><span class="koboSpan" id="kobo.142.1">The first pair of circles</span><a id="_idIndexMarker224"/><span class="koboSpan" id="kobo.143.1"> we will add will be placed in the 12 and 6 o’clock positions. </span><span class="koboSpan" id="kobo.143.2">The following is the code we need to </span><span class="No-Break"><span class="koboSpan" id="kobo.144.1">accomplish that:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.145.1">
//MARK: - ZStack for the 12 and 6 O'clock circles
            ZStack {
                ZStack {
                    Circle().fill(LinearGradient(gradient:                       Gradient(colors: [.green, .white]),                       startPoint: .top, endPoint: .bottom))
                        .frame(width: 120, height: 120)
                        .offset(y: moveInOut ? </span><span class="koboSpan" id="kobo.145.2">-60 : 0)
                    
                    Circle().fill(LinearGradient(gradient:                       Gradient(colors: [.green, .white]),                       startPoint: .bottom, endPoint: .top))
                        .frame(width: 120, height: 120,                           alignment: .center)
                        .offset(y: moveInOut ? </span><span class="koboSpan" id="kobo.145.3">60 : 0)
                }.opacity(0.5)</span></pre>
<p><span class="koboSpan" id="kobo.146.1">This </span><a id="_idIndexMarker225"/><span class="koboSpan" id="kobo.147.1">code creates two circles using the circle shape initializer. </span><span class="koboSpan" id="kobo.147.2">Each circle gets a gradient color that makes them lighter toward the center of the screen, and darker in the opposite direction. </span><span class="koboSpan" id="kobo.147.3">The gradient works by filling the circles with a smooth transition between two colors. </span><span class="koboSpan" id="kobo.147.4">In this case, the gradient goes from green to white. </span><span class="koboSpan" id="kobo.147.5">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">LinearGradient</span></strong><span class="koboSpan" id="kobo.149.1"> struct is used to create the gradient, and it takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.150.1">gradient</span></strong><span class="koboSpan" id="kobo.151.1"> parameter, which is an instance of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">Gradient</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.153.1"> struct.</span></span></p>
<p><span class="koboSpan" id="kobo.154.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">Gradient</span></strong><span class="koboSpan" id="kobo.156.1"> struct takes a parameter called </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">colors</span></strong><span class="koboSpan" id="kobo.158.1">, which is an array of color values. </span><span class="koboSpan" id="kobo.158.2">In this case, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">colors</span></strong><span class="koboSpan" id="kobo.160.1"> parameter is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1">[.green, .white]</span></strong><span class="koboSpan" id="kobo.162.1">, which means that the gradient will transition from green </span><span class="No-Break"><span class="koboSpan" id="kobo.163.1">to white.</span></span></p>
<p><span class="koboSpan" id="kobo.164.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">startPoint</span></strong><span class="koboSpan" id="kobo.166.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">endPoint</span></strong><span class="koboSpan" id="kobo.168.1"> parameters of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.169.1">LinearGradient</span></strong><span class="koboSpan" id="kobo.170.1"> struct determine the direction of the gradient. </span><span class="koboSpan" id="kobo.170.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">startPoint</span></strong><span class="koboSpan" id="kobo.172.1"> parameter is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.173.1">.top</span></strong><span class="koboSpan" id="kobo.174.1"> and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.175.1">endPoint</span></strong><span class="koboSpan" id="kobo.176.1"> parameter is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">.bottom</span></strong><span class="koboSpan" id="kobo.178.1"> for the first circle, which means that the gradient will start at the top of the circle and go toward the bottom. </span><span class="koboSpan" id="kobo.178.2">For the second circle, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">startPoint</span></strong><span class="koboSpan" id="kobo.180.1"> parameter is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">.bottom</span></strong><span class="koboSpan" id="kobo.182.1"> and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1">endPoint</span></strong><span class="koboSpan" id="kobo.184.1"> parameter is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">.top</span></strong><span class="koboSpan" id="kobo.186.1">, which means that the gradient will start at the bottom of the circle and go toward the top. </span><span class="koboSpan" id="kobo.186.2">The look we are going for is a whiter shade of green toward the part of the circles that are just touching each other, and a darker shade of green on the opposite parts of </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">the circles.</span></span></p>
<p><span class="koboSpan" id="kobo.188.1">All the circles will be of the same size to start out with, which is 120 points for the width and height, and that’s accomplished using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">frame</span></strong><span class="koboSpan" id="kobo.190.1"> modifier. </span><span class="koboSpan" id="kobo.190.2">Because we are in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">ZStack</span></strong><span class="koboSpan" id="kobo.192.1">, the two circles will be stacked on top of each other. </span><span class="koboSpan" id="kobo.192.2">If you would like to see both circles now, then change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">moveInOut</span></strong><span class="koboSpan" id="kobo.194.1"> state property to </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">true</span></strong><span class="koboSpan" id="kobo.196.1">. </span><span class="koboSpan" id="kobo.196.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">moveInOut</span></strong><span class="koboSpan" id="kobo.198.1"> property will be changed to true later when we add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">onAppear</span></strong><span class="koboSpan" id="kobo.200.1"> modifier code, but for now, to see how the UI is shaping up, go ahead and change that property to </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">true</span></strong><span class="koboSpan" id="kobo.202.1">, and this is what you </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">should see:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer049">
<span class="koboSpan" id="kobo.204.1"><img alt="Figure 3.3: Twelve and six o’clock circles " src="image/B18674_03_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.205.1">Figure 3.3: Twelve and six o’clock circles</span></p>
<p><span class="koboSpan" id="kobo.206.1">Let’s look </span><a id="_idIndexMarker226"/><span class="koboSpan" id="kobo.207.1">at the </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">moveInOut</span></strong><span class="koboSpan" id="kobo.209.1"> variable now. </span><span class="koboSpan" id="kobo.209.2">Remember that I said the naming of our variables should be descriptive and should be related to what they do? </span><span class="koboSpan" id="kobo.209.3">Well, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">moveInOut</span></strong><span class="koboSpan" id="kobo.211.1"> variable is an example of that descriptive naming, because it will move the circles in and out of each other. </span><span class="koboSpan" id="kobo.211.2">It does this by controlling the vertical offset of the circles that are contained within the </span><strong class="source-inline"><span class="koboSpan" id="kobo.212.1">ZStack</span></strong><span class="koboSpan" id="kobo.213.1">. </span><span class="koboSpan" id="kobo.213.2">The ternary operator is responsible for setting the </span><strong class="source-inline"><span class="koboSpan" id="kobo.214.1">moveInOut</span></strong><span class="koboSpan" id="kobo.215.1"> value by choosing between two different numbers. </span></p>
<p><span class="koboSpan" id="kobo.216.1">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">moveInOut</span></strong><span class="koboSpan" id="kobo.218.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">true</span></strong><span class="koboSpan" id="kobo.220.1">, the first circle has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.221.1">y</span></strong><span class="koboSpan" id="kobo.222.1"> offset of </span><strong class="source-inline"><span class="koboSpan" id="kobo.223.1">-60</span></strong><span class="koboSpan" id="kobo.224.1">, which moves it upward by 60 points. </span><span class="koboSpan" id="kobo.224.2">The second circle has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">y</span></strong><span class="koboSpan" id="kobo.226.1"> offset of </span><strong class="source-inline"><span class="koboSpan" id="kobo.227.1">60</span></strong><span class="koboSpan" id="kobo.228.1">, which moves it downward by 60 points. </span><span class="koboSpan" id="kobo.228.2">This results in the two circles moving toward the top and bottom of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.229.1">ZStack</span></strong><span class="koboSpan" id="kobo.230.1"> respectively. </span><span class="koboSpan" id="kobo.230.2">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">moveInOut</span></strong><span class="koboSpan" id="kobo.232.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">false</span></strong><span class="koboSpan" id="kobo.234.1">, the first circle has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">y</span></strong><span class="koboSpan" id="kobo.236.1"> offset of </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">0</span></strong><span class="koboSpan" id="kobo.238.1">, which keeps it in the center of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">ZStack</span></strong><span class="koboSpan" id="kobo.240.1">, and the second circle also has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">y</span></strong><span class="koboSpan" id="kobo.242.1"> offset of </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">0</span></strong><span class="koboSpan" id="kobo.244.1">, which keeps it in the center of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">ZStack</span></strong><span class="koboSpan" id="kobo.246.1"> as well. </span><span class="koboSpan" id="kobo.246.2">This results in the two circles staying in the center, overlaying </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">each other.</span></span></p>
<p><span class="koboSpan" id="kobo.248.1">Next, by adding</span><a id="_idIndexMarker227"/><span class="koboSpan" id="kobo.249.1"> the opacity modifier at the end of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">ZStack</span></strong><span class="koboSpan" id="kobo.251.1">, both circles are set to a 50% opacity. </span><span class="koboSpan" id="kobo.251.2">This makes it easy to see through them and the other circles that we will add, as they overlap each other during the animation, and that also makes for a nice visual as the colors blend together and darken during </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">the overlap.</span></span></p>
<h2 id="_idParaDest-53"><a id="_idTextAnchor056"/><span class="koboSpan" id="kobo.253.1">Adding the second pair of circles</span></h2>
<p><span class="koboSpan" id="kobo.254.1">Now, for </span><a id="_idIndexMarker228"/><span class="koboSpan" id="kobo.255.1">the next set of circles, we’re doing almost the exact same thing... </span><span class="koboSpan" id="kobo.255.2">almost. </span><span class="koboSpan" id="kobo.255.3">Staying with our clock analogy, we need circles at the 2 and 7 o’clock marks. </span><span class="koboSpan" id="kobo.255.4">First, I will show you the code, then I will explain the parts that </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">are new:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.257.1">
//MARK: - ZStack for the 2 and 7 o'clock circles
                ZStack {
                    Circle().fill(LinearGradient(gradient:                       Gradient(colors: [.green, .white]),                       startPoint: .top, endPoint: .bottom))
                        .frame(width: 120, height: 120,                           alignment: .center)
                        .offset(y: moveInOut ? </span><span class="koboSpan" id="kobo.257.2">-60 : 0)
                    Circle().fill(LinearGradient(gradient:                       Gradient(colors: [.green, .white]),                       startPoint: .bottom, endPoint: .top))
                        .frame(width: 120, height: 120,                           alignment: .center)
                        .offset(y: moveInOut ? </span><span class="koboSpan" id="kobo.257.3">60 : 0)
                }.opacity(0.5)
                    .rotationEffect(.degrees(60))</span></pre>
<p><span class="koboSpan" id="kobo.258.1">We’re creating</span><a id="_idIndexMarker229"/><span class="koboSpan" id="kobo.259.1"> two circles with a gradient of green and white colors, which have the same width and height of 120 points, and they get offset by the animation variable, </span><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">moveInOut</span></strong><span class="koboSpan" id="kobo.261.1">. </span><span class="koboSpan" id="kobo.261.2">Again, depending on whether </span><strong class="source-inline"><span class="koboSpan" id="kobo.262.1">moveInOut</span></strong><span class="koboSpan" id="kobo.263.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">true</span></strong><span class="koboSpan" id="kobo.265.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">false</span></strong><span class="koboSpan" id="kobo.267.1"> will determine the placement of the circle. </span><span class="koboSpan" id="kobo.267.2">If it’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">true</span></strong><span class="koboSpan" id="kobo.269.1">, the circles will separate, and if </span><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">false</span></strong><span class="koboSpan" id="kobo.271.1">, they will come to the middle with one circle placed over the second circle. </span><span class="koboSpan" id="kobo.271.2">Next, we set the opacity of these circles to 50%, as we did with the first set of circles, to make them slightly transparent, so we can see </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">them overlap.</span></span></p>
<p><span class="koboSpan" id="kobo.273.1">What’s different for this set of circles is that we need to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1">rotationEffect</span></strong><span class="koboSpan" id="kobo.275.1"> modifier on them. </span><span class="koboSpan" id="kobo.275.2">This modifier lets us rotate the placement of the circles by passing in a value for the amount of rotation we want. </span></p>
<p><span class="koboSpan" id="kobo.276.1">Notice that this modifier is placed on the end of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.277.1">ZStack</span></strong><span class="koboSpan" id="kobo.278.1"> that holds the two circles. </span><span class="koboSpan" id="kobo.278.2">This placement will make the entire </span><strong class="source-inline"><span class="koboSpan" id="kobo.279.1">ZStack</span></strong><span class="koboSpan" id="kobo.280.1"> and its children rotate, so it saves us some code as we don’t need to place the modifier on both child </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">circles individually.</span></span></p>
<p><span class="koboSpan" id="kobo.282.1">I’m using a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.283.1">60</span></strong><span class="koboSpan" id="kobo.284.1"> for the </span><strong class="source-inline"><span class="koboSpan" id="kobo.285.1">.degrees</span></strong><span class="koboSpan" id="kobo.286.1"> parameter, which will rotate this </span><strong class="source-inline"><span class="koboSpan" id="kobo.287.1">ZStack</span></strong><span class="koboSpan" id="kobo.288.1"> 60 degrees from the previous pair of circles. </span><span class="koboSpan" id="kobo.288.2">The value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1">60</span></strong><span class="koboSpan" id="kobo.290.1"> for the rotation is half of 120, which is the width of each circle, so this rotation will cause the circles to overlap each other </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">by half.</span></span></p>
<p><span class="koboSpan" id="kobo.292.1">Again, if you want to see how the two pairs of circles look, change the </span><strong class="source-inline"><span class="koboSpan" id="kobo.293.1">moveInOut</span></strong><span class="koboSpan" id="kobo.294.1"> property to </span><strong class="source-inline"><span class="koboSpan" id="kobo.295.1">true</span></strong><span class="koboSpan" id="kobo.296.1">, and this is </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer050">
<span class="koboSpan" id="kobo.298.1"><img alt="Figure 3.4: Two and seven o’clock circles " src="image/B18674_03_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.299.1">Figure 3.4: Two and seven o’clock circles</span></p>
<p><span class="koboSpan" id="kobo.300.1">Notice that we didn’t </span><a id="_idIndexMarker230"/><span class="koboSpan" id="kobo.301.1">have to rotate the first pair of circles using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.302.1">rotationEffect</span></strong><span class="koboSpan" id="kobo.303.1"> modifier; that’s because they’re not overlapping any other circles as they are the first pair on the screen. </span><span class="koboSpan" id="kobo.303.2">If we don’t use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">rotationEffect</span></strong><span class="koboSpan" id="kobo.305.1"> modifier here, though, this second pair of circles will be placed exactly over the first pair of circles, and we won’t </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">see them.</span></span></p>
<h2 id="_idParaDest-54"><a id="_idTextAnchor057"/><span class="koboSpan" id="kobo.307.1">Adding the third pair of circles</span></h2>
<p><span class="koboSpan" id="kobo.308.1">Finally, for the</span><a id="_idIndexMarker231"/><span class="koboSpan" id="kobo.309.1"> last pair of circles on our clock, they need to be placed at the 10 and 4 o’clock marks. </span><span class="koboSpan" id="kobo.309.2">Here is </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">the code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.311.1">
  //MARK: - ZStack for the 10 and 4 o'clock circles
                ZStack {
                    Circle().fill(LinearGradient(gradient:                       Gradient(colors: [.green, .white]),                       startPoint: .top, endPoint: .bottom))
                        .frame(width: 120, height: 120, alignment: .center)
                        .offset(y: moveInOut ? </span><span class="koboSpan" id="kobo.311.2">-60 : 0)
                    Circle().fill(LinearGradient(gradient:                       Gradient(colors: [.green, .white]),                       startPoint: .bottom, endPoint: .top))
                        .frame(width: 120, height: 120,                           alignment: .center)
                        .offset(y: moveInOut ? </span><span class="koboSpan" id="kobo.311.3">60 : 0)
                }.opacity(0.5)
                    .rotationEffect(.degrees(120))</span></pre>
<p><span class="koboSpan" id="kobo.312.1">Looking at this code, we can again see that very little is different from the other sets of circles. </span><span class="koboSpan" id="kobo.312.2">We’re adding two circles with a gradient of green and white, and with a size of 120 points. </span><span class="koboSpan" id="kobo.312.3">They move in and out 60 points or -60 points on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.313.1">y</span></strong><span class="koboSpan" id="kobo.314.1"> axis, as we have seen, but for this pair of circles, we’re rotating them by 120 degrees, which places them at the 10 and 4 o’clock positions and completes the clock of circles. </span><span class="koboSpan" id="kobo.314.2">The result is </span><span class="No-Break"><span class="koboSpan" id="kobo.315.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer051">
<span class="koboSpan" id="kobo.316.1"><img alt="Figure 3.5: Ten and four o’clock circles – the complete design " src="image/B18674_03_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.317.1">Figure 3.5: Ten and four o’clock circles – the complete design</span></p>
<p><span class="koboSpan" id="kobo.318.1">Okay, so we’ve </span><a id="_idIndexMarker232"/><span class="koboSpan" id="kobo.319.1">added all of the circles. </span><span class="koboSpan" id="kobo.319.2">Now it’s time to add the fun part – the animation – and make </span><span class="No-Break"><span class="koboSpan" id="kobo.320.1">them move.</span></span></p>
<h1 id="_idParaDest-55"><a id="_idTextAnchor058"/><span class="koboSpan" id="kobo.321.1">Animating the circles</span></h1>
<p><span class="koboSpan" id="kobo.322.1">Now we </span><a id="_idIndexMarker233"/><span class="koboSpan" id="kobo.323.1">have all our circle pairs in place, it’s time to start animating them. </span><span class="koboSpan" id="kobo.323.2">I’m going to add the animation code. </span><span class="koboSpan" id="kobo.323.3">It may look a bit strange at first, but not to worry, I will explain it line </span><span class="No-Break"><span class="koboSpan" id="kobo.324.1">by line:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.325.1">
            //MARK: - Animations
            .rotationEffect(.degrees(rotateInOut ? </span><span class="koboSpan" id="kobo.325.2">90 : 0))
            .scaleEffect(scaleUpDown ? </span><span class="koboSpan" id="kobo.325.3">1 : 1/4)
            .animation(Animation.easeInOut.              repeatForever(autoreverses: true).speed(1/8),               value: scaleInOut)
            .onAppear() {
                rotateInOut.toggle()
                scaleUpDown.toggle()
                moveInOut.toggle()
            }
        }
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.326.1">The</span><a id="_idIndexMarker234"/><span class="koboSpan" id="kobo.327.1"> first line of code calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">rotationEffect</span></strong><span class="koboSpan" id="kobo.329.1"> modifier. </span><span class="koboSpan" id="kobo.329.2">For its </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">.degrees</span></strong><span class="koboSpan" id="kobo.331.1"> parameter, I’m passing in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">rotateInOut</span></strong><span class="koboSpan" id="kobo.333.1"> variable, which is then checked by a ternary operator. </span><span class="koboSpan" id="kobo.333.2">The ternary operator has one of two values to choose from, </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">90</span></strong><span class="koboSpan" id="kobo.335.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">0</span></strong><span class="koboSpan" id="kobo.337.1">. </span><span class="koboSpan" id="kobo.337.2">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">rotateInOut</span></strong><span class="koboSpan" id="kobo.339.1"> variable is </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">true</span></strong><span class="koboSpan" id="kobo.341.1">, then the </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">rotationEffect</span></strong><span class="koboSpan" id="kobo.343.1"> modifier will rotate the </span><strong class="source-inline"><span class="koboSpan" id="kobo.344.1">ZStack</span></strong><span class="koboSpan" id="kobo.345.1"> that contains all of the pairs of circles by 90 degrees. </span><span class="koboSpan" id="kobo.345.2">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.346.1">rotateInOut</span></strong><span class="koboSpan" id="kobo.347.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">false</span></strong><span class="koboSpan" id="kobo.349.1">, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">rotationEffect</span></strong><span class="koboSpan" id="kobo.351.1"> modifier rotates the </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">ZStack</span></strong><span class="koboSpan" id="kobo.353.1"> back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">0</span></strong><span class="koboSpan" id="kobo.355.1">. </span><span class="koboSpan" id="kobo.355.2">So, all of the circles get rotated at once to either 90 degrees or back to zero, depending on the value that </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">rotateInOut</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.357.1"> contains.</span></span></p>
<p><span class="koboSpan" id="kobo.358.1">The next line of code is the scale effect animation. </span><span class="koboSpan" id="kobo.358.2">For the </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1">scaleEffect</span></strong><span class="koboSpan" id="kobo.360.1"> modifier, we pass in another ternary operator that has two values to set, either </span><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">1</span></strong><span class="koboSpan" id="kobo.362.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1">1/4</span></strong><span class="koboSpan" id="kobo.364.1">. </span><span class="koboSpan" id="kobo.364.2">When the </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">scaleUpDown</span></strong><span class="koboSpan" id="kobo.366.1"> property is </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">true</span></strong><span class="koboSpan" id="kobo.368.1">, all the circles will be at full scale, which is reflected by the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.369.1">1</span></strong><span class="koboSpan" id="kobo.370.1">; otherwise, when the </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">scaleUpDown</span></strong><span class="koboSpan" id="kobo.372.1"> property is </span><strong class="source-inline"><span class="koboSpan" id="kobo.373.1">false</span></strong><span class="koboSpan" id="kobo.374.1">, all the circles will scale down to one-fourth of </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">their size.</span></span></p>
<p><span class="koboSpan" id="kobo.376.1">The next line of code calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.377.1">.animation</span></strong><span class="koboSpan" id="kobo.378.1"> function. </span><span class="koboSpan" id="kobo.378.2">This is the magic function that applies the animation to any view we put it on. </span><span class="koboSpan" id="kobo.378.3">We are putting it on the end of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1">ZStack</span></strong><span class="koboSpan" id="kobo.380.1"> that contains all of the circles, so when any values change, for example, the variables change from </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1">true</span></strong><span class="koboSpan" id="kobo.382.1"> to </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1">false</span></strong><span class="koboSpan" id="kobo.384.1"> and vice versa, then the new values will be applied to the view, which is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.385.1">ZStack</span></strong><span class="koboSpan" id="kobo.386.1"> and its children. </span><span class="koboSpan" id="kobo.386.2">Those new values don’t get applied instantly; they are interpolated over, so the animation happens smoothly </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">and fluidly.</span></span></p>
<p><span class="koboSpan" id="kobo.388.1">I’m using</span><a id="_idIndexMarker235"/><span class="koboSpan" id="kobo.389.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">easeInEaseOut</span></strong><span class="koboSpan" id="kobo.391.1"> timing curve type and also adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">.repeatForever</span></strong><span class="koboSpan" id="kobo.393.1"> modifier, which will keep the animation going for as long as the app is running. </span><span class="koboSpan" id="kobo.393.2">And by passing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.394.1">true</span></strong><span class="koboSpan" id="kobo.395.1"> value to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.396.1">autoreverses</span></strong><span class="koboSpan" id="kobo.397.1"> parameter, the animation reverses itself when it completes its animations in one direction, so it can continue and animate in the </span><span class="No-Break"><span class="koboSpan" id="kobo.398.1">opposite direction.</span></span></p>
<p><span class="koboSpan" id="kobo.399.1">We can also set the speed of the animation. </span><span class="koboSpan" id="kobo.399.2">I’m using </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">1/8</span></strong><span class="koboSpan" id="kobo.401.1"> as the value inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1">.speed</span></strong><span class="koboSpan" id="kobo.403.1"> modifier, for a relatively slow animation. </span><span class="koboSpan" id="kobo.403.2">Since this project is similar to the familiar breathing app, I thought a slower animation rather than a faster one would be more appropriate, as the slow pace is helpful when focusing </span><span class="No-Break"><span class="koboSpan" id="kobo.404.1">on breathing.</span></span></p>
<p><span class="koboSpan" id="kobo.405.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1">value</span></strong><span class="koboSpan" id="kobo.407.1"> parameter requires one of our </span><strong class="source-inline"><span class="koboSpan" id="kobo.408.1">@State</span></strong><span class="koboSpan" id="kobo.409.1"> variables so it can monitor it for changes. </span><span class="koboSpan" id="kobo.409.2">All of the variables we are using are </span><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">@State</span></strong><span class="koboSpan" id="kobo.411.1">, and they will have their values changed at some point, so any one of them will work fine in this parameter for </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">this code.</span></span></p>
<p><span class="koboSpan" id="kobo.413.1">The final part of the project is to change the values in each of our variables so the animation can work. </span><span class="koboSpan" id="kobo.413.2">Remember we looked at different triggers for animations by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">.onAppear</span></strong><span class="koboSpan" id="kobo.415.1"> modifier. </span><span class="koboSpan" id="kobo.415.2">This will perform an action when the screen or view first appears and then trigger the animation. </span><span class="koboSpan" id="kobo.415.3">The action we want to perform as soon as the app starts up is to toggle each of the variables to their opposite states. </span><span class="koboSpan" id="kobo.415.4">We gave them initial values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.416.1">false</span></strong><span class="koboSpan" id="kobo.417.1">, but inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.418.1">onAppear</span></strong><span class="koboSpan" id="kobo.419.1">, they get toggled to </span><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">true</span></strong><span class="koboSpan" id="kobo.421.1">, which starts </span><span class="No-Break"><span class="koboSpan" id="kobo.422.1">the animation.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.423.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.424.1">If you tested out the app earlier and changed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">moveInOut</span></strong><span class="koboSpan" id="kobo.426.1"> variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">true</span></strong><span class="koboSpan" id="kobo.428.1">, make sure to set it back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.429.1">false</span></strong><span class="koboSpan" id="kobo.430.1"> again, so the animations will get triggered in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.431.1">onAppear</span></strong><span class="koboSpan" id="kobo.432.1"> modifier. </span></p>
<p><span class="koboSpan" id="kobo.433.1">And now we have three animations </span><span class="No-Break"><span class="koboSpan" id="kobo.434.1">happening simultaneously:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.435.1">The circles are moving in and out from each other. </span><span class="koboSpan" id="kobo.435.2">When moving inward, the circles will overlap each other completely, and when moving out, they will separate until their edges are just touching. </span><span class="koboSpan" id="kobo.435.3">Again, this animation is monitored by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.436.1">moveInOut</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.437.1">state variable.</span></span></li>
<li><span class="koboSpan" id="kobo.438.1">The </span><a id="_idIndexMarker236"/><span class="koboSpan" id="kobo.439.1">second animation is scaling the circles by using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">scaleEffect</span></strong><span class="koboSpan" id="kobo.441.1"> modifier. </span><span class="koboSpan" id="kobo.441.2">It takes a single parameter, which is a value between </span><strong class="source-inline"><span class="koboSpan" id="kobo.442.1">0</span></strong><span class="koboSpan" id="kobo.443.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.444.1">1</span></strong><span class="koboSpan" id="kobo.445.1"> that represents the amount of scaling to be applied. </span><span class="koboSpan" id="kobo.445.2">In this case, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">scaleUpDown</span></strong><span class="koboSpan" id="kobo.447.1"> variable is being used to control the value passed to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">scaleEffect</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.449.1"> modifier.</span></span></li>
<li><span class="koboSpan" id="kobo.450.1">The final animation is rotating all of the circles by 90 degrees when </span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1">rotateInOut</span></strong><span class="koboSpan" id="kobo.452.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1">true</span></strong><span class="koboSpan" id="kobo.454.1">, and rotating them back to 0 when </span><strong class="source-inline"><span class="koboSpan" id="kobo.455.1">rotateInOut</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.456.1">is </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.457.1">false</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.459.1">Run the application and have a play around with it. </span><span class="koboSpan" id="kobo.459.2">The following figure shows the sequence the animation will take: </span></p>
<div>
<div class="IMG---Figure" id="_idContainer052">
<span class="koboSpan" id="kobo.460.1"><img alt="Figure 3.6: Animation sequence " src="image/B18674_03_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.461.1">Figure 3.6: Animation sequence</span></p>
<p><span class="koboSpan" id="kobo.462.1">The best way to understand how the different modifiers and functions work is to pass in different values and by experimenting. </span><span class="koboSpan" id="kobo.462.2">Always feel free to use your own creativity for everything – for the</span><a id="_idIndexMarker237"/><span class="koboSpan" id="kobo.463.1"> parameters, things such as the color of the gradients, the size of the circles, the speed, the location, the amount of rotation, and so on. </span><span class="koboSpan" id="kobo.463.2">Changing the parameter values to your liking will give you a better understanding of how each modifier acts on </span><span class="No-Break"><span class="koboSpan" id="kobo.464.1">a view.</span></span></p>
<p><span class="koboSpan" id="kobo.465.1">Later in the book, you will learn how to add sounds and music to a project, as well as how to add buttons and slider controls. </span><span class="koboSpan" id="kobo.465.2">When you know how to do that, you can come back to this project and tweak it to incorporate some music, and perhaps a slider to change the speed of the animations. </span><span class="koboSpan" id="kobo.465.3">For example, as this is a breathing app, and some people might want to relax by taking deep breaths and holding them for a second or more, you can alter the animation to pause for any amount of time to signify the holding of one’s breath, all done through the use of various controls that you will learn about in </span><span class="No-Break"><span class="koboSpan" id="kobo.466.1">upcoming projects.</span></span></p>
<h1 id="_idParaDest-56"><a id="_idTextAnchor059"/><span class="koboSpan" id="kobo.467.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.468.1">Great job on the completion of this first project! </span><span class="koboSpan" id="kobo.468.2">By creating a breathing app, you’ve got to explore how to rotate, scale, and move a view to another location, all by using SwiftUI’s intuitive modifiers and design tools. </span><span class="koboSpan" id="kobo.468.3">We also used a special modifier that does a lot of the work in the background for us, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.469.1">.animation</span></strong><span class="koboSpan" id="kobo.470.1"> modifier, which interpolates over values after we define a start and end point, and creates a smooth seamless animation from </span><span class="No-Break"><span class="koboSpan" id="kobo.471.1">those values.</span></span></p>
<p><span class="koboSpan" id="kobo.472.1">In the next chapter, we will continue our journey into animation and build a record player. </span><span class="koboSpan" id="kobo.472.2">This project will look at how to animate a view around one of its anchor points, rather than from the center, as well as adding sound and a button to start </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">the animation.</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer054">
</div>
</div>
</body></html>