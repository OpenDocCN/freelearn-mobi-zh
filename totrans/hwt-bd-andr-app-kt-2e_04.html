<html><head></head><body>
		<div><h1 id="_idParaDest-79" class="chapter number"><a id="_idTextAnchor259"/><a id="_idTextAnchor260"/><a id="_idTextAnchor261"/><a id="_idTextAnchor262"/><a id="_idTextAnchor263"/>4</h1>
			<h1 id="_idParaDest-80"><a id="_idTextAnchor264"/>Building App Navigation</h1>
			<p><a id="_idTextAnchor265"/>In this chapter, you will build user-friendly app navigation through three primary patterns: bottom navigation, the navigation drawer, and tabbed navigation. Through guided theory and practice, you will learn how each of these patterns works so that users can easily access your app’s content. This chapter will also focus on making the user aware of where they are in the app and which level of your app’s hierarchy they can navigate to.</p>
			<p>By the end of this chapter, you will know how to use these three primary navigation patterns and understand how they work with the app bar to support navigation.</p>
			<p><a id="_idTextAnchor266"/>In the previous chapter, you explored<a id="_idIndexMarker316"/> fragments and the <strong class="bold">fragment lifecycle</strong> and employed Jetpack navigation to simplify their use in your apps. In this chapter, you will learn how to add different types of navigation to your app while continuing to use Jetpack navigation.</p>
			<p>You will start off by learning about the navigation drawer, the earliest widely adopted navigational pattern used in Android apps, before exploring bottom navigation and tab navigation. You’ll learn about the Android navigation user flow, how it is built around destinations, and how they govern navigation within the app.</p>
			<p>The difference between primary and secondary destinations will be explained, as well as which one of the three primary navigation patterns is more suitable, depending on your app’s use case.</p>
			<p>We will cover the following topics in this chapter:</p>
			<ul>
				<li>Navigation overview</li>
				<li>Navigation drawer</li>
				<li>Bottom navigation</li>
				<li>Tabbed navigation<a id="_idTextAnchor267"/><a id="_idTextAnchor268"/></li>
			</ul>
			<h1 id="_idParaDest-81"><a id="_idTextAnchor269"/>Technical requirements</h1>
			<p>The complete code for all the exercises and the activity in this chapter is available on GitHub at <a href="https://packt.link/B2rz6">https://packt.link/B2rz6</a>.</p>
			<h1 id="_idParaDest-82"><a id="_idTextAnchor270"/>Navigation overview</h1>
			<p>The Android <a id="_idIndexMarker317"/>navigation user flow is built around <strong class="bold">destinations</strong> within<a id="_idIndexMarker318"/> your app. There are primary destinations available at the top level of your app and, subsequently, are always displayed in the main app navigation and secondary destinations. A guiding principle of each of the three navigation patterns is to contextually provide information about the main section of the app the user is in at any point in time.</p>
			<p>This can take the form of a label in the top app bar of the destination the user is in, optionally displaying an arrow hint that the user is not at the top level, and/or providing highlighted text and icons in the <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>) that indicate the section the user is in. Navigation in your app should be fluid and natural, intuitively guiding the user while also providing some context of where they are at any given point in time.</p>
			<p>Each of the three navigation patterns you will explore accomplishes this goal in varying ways. Some of these navigational patterns are more suitable for use with a higher number of top-level primary destinations to display, and others are suitable for les<a id="_idTextAnchor271"/><a id="_idTextAnchor272"/>s.</p>
			<h1 id="_idParaDest-83"><a id="_idTextAnchor273"/>Navigation drawer</h1>
			<p>The <strong class="bold">navigation drawer</strong> is one of<a id="_idIndexMarker319"/> the most common navigation patterns used in Android apps and was certainly the first pattern to be widely adopted. The following is a screenshot of the culmination of the next exercise, which shows a simple navigation drawer in its closed stat<a id="_idTextAnchor274"/>e:</p>
			<div><div><img src="img/B19411_04_01.jpg" alt="Figure 4.1 – App with the navigation drawer closed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.1 – App with the navigation drawer closed</p>
			<p>The navigation<a id="_idIndexMarker320"/> drawer is accessed through what has become commonly known as the hamburger menu, which is the icon with three horizontal lines at the top left of <em class="italic">Figure 4</em><em class="italic">.1</em>. The navigation options are not visible on the screen, but contextual information about the screen you are on is displayed in the top app bar.</p>
			<p>An overflow menu can also accompany this on the right-hand side of the screen, through which other contextually relevant navigation options can be accessed. The following screenshot is of a navigation drawer in the open state, showing all the navigation option<a id="_idTextAnchor275"/>s:</p>
			<div><div><img src="img/B19411_04_02.jpg" alt="Figure 4.2 – App with the navigation drawer open"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.2 – App with the navigation drawer open</p>
			<p>Upon selecting the <a id="_idIndexMarker321"/>hamburger menu, the navigation drawer slides out from the left with the current section highlighted. This can be displayed with or without an icon. Due to the nature of the navigation occupying the height of the screen, it is best suited to five or more top-level destinations.</p>
			<p>The destinations can also be grouped together to indicate multiple hierarchies of primary destinations (shown by the dividing line in the preceding screenshot), and these hierarchies can also have labels. In addition, the drawer content is also scrollable. In summary, the navigation drawer is a very convenient way to provide quick access to many different app destinations.</p>
			<p>A weakness of the navigation drawer is that it requires the user to select the hamburger menu for the destinations to become visible. Tabs and bottom navigation (with fixed tabs), in contrast, are always visible. However, this is conversely also a strength of the navigation drawer as <a id="_idIndexMarker322"/>more screen space can be used for the app’s content.</p>
			<p>Let’s get started with the first exercise of this chapter and create a navigation drawer so that we can access all the sections of an <a id="_idTextAnchor276"/><a id="_idTextAnchor277"/>app.</p>
			<h2 id="_idParaDest-84"><a id="_idTextAnchor278"/>Exercise 4.01 – creating an App with a navigation drawer</h2>
			<p>In this exercise, you<a id="_idIndexMarker323"/> will create a new app in Android Studio<a id="_idIndexMarker324"/> named <code>Navigation Drawer</code> using the <code>Empty Activity</code> project template while leaving all the other defaults as they are. There are wizard options where you can create a new project with all the navigation patterns you are going to produce in the exercises within this chapter, but we will build the apps incrementally to guide you through the steps.</p>
			<p>You will build an app that often uses a navigation drawer, such as a news or mail app. The sections we will be adding are <strong class="bold">Home</strong>, <strong class="bold">Favorites</strong>, <strong class="bold">Recents</strong>, <strong class="bold">Archive</strong>, <strong class="bold">Bin</strong>, and <strong class="bold">Settings</strong>.</p>
			<p>Perform the following steps to complete this exercise:</p>
			<ol>
				<li>Create a new project with an <code>Empty Activity</code> called <code>Navigation Drawer</code>. Do not use the <strong class="bold">Navigation Drawer Activity</strong> project template, as we are going to use incremental steps to build the app.</li>
				<li>Add the Gradle dependencies you will require to <code>app/build.gradle</code>:<pre class="source code">
implementation 
'androidx.navigation:navigation-fragment-ktx:2.5.3'
implementation 
'androidx.navigation:navigation-ui-ktx:2.5.3'</pre></li>
				<li>Update <code>strings.xml</code> and <code>themes.xml</code> in the <code>res/values</code> folder with the<a id="_idIndexMarker325"/> following <a id="_idIndexMarker326"/>content:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">strings.xml</p>
			<pre class="source code">
       &lt;string name="nav_header_desc"&gt;Navigation header&lt;/string&gt;
&lt;string name="home"&gt;Home&lt;/string&gt;
    &lt;string name="settings"&gt;Settings&lt;/string&gt;
    &lt;string name="content"&gt;Content&lt;/string&gt;
    &lt;string name="archive"&gt;Archive&lt;/string&gt;
    &lt;string name="recent"&gt;Recent&lt;/string&gt;
    &lt;string name="favorites"&gt;Favorites&lt;/string&gt;
    &lt;string name="bin"&gt;Bin&lt;/string&gt;
    &lt;string name="home_fragment"&gt;Home Fragment&lt;/string&gt;
    &lt;string name="settings_fragment"&gt;Settings Fragment&lt;/string&gt;
    &lt;string name="content_fragment"&gt;Content Fragment&lt;/string&gt;
    &lt;string name="archive_fragment"&gt;Archive Fragment&lt;/string&gt;
    &lt;string name="recent_fragment"&gt;Recent Fragment&lt;/string&gt;
    &lt;string name="favorites_fragment"&gt;Favorites Fragment&lt;/string&gt;
    &lt;string name="bin_fragment"&gt;Bin Fragment&lt;/string&gt;
    &lt;string name="link_to_content_button"&gt;Link to Content Button&lt;/string&gt;</pre>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">themes.xml</p>
			<pre class="source code">
  &lt;style name="Theme.NavigationDrawer.NoActionBar"&gt;
        &lt;item name="windowActionBar"&gt;false&lt;/item&gt;
        &lt;item name="windowNoTitle"&gt;true&lt;/item&gt;
   &lt;/style&gt;
    &lt;style name="Theme.NavigationDrawer.AppBarOverlay" parent="ThemeOverlay.AppCompat.Dark.ActionBar" /&gt;
    &lt;style name="Theme.NavigationDrawer.PopupOverlay" parent="ThemeOverlay.AppCompat.Light" /&gt;</pre>
			<ol>
				<li value="4">Next, update<a id="_idIndexMarker327"/> the activity element with <a id="_idIndexMarker328"/>name <code>MainActivity</code> in the <code>AndroidManifest.xml</code> to NOT use an Action Bar. This will be provided by the Navigation Drawer layout. Go to <code>app</code> | <code>manifests</code> | <code>AndroidManifest.xml</code> and add the <code>android:theme</code> attribute with the <code>NoActionBar</code> style as in the snippet of code shown here:<pre class="source code">
&lt;activity
    android:name=".MainActivity"
    android:exported="true"
    android:theme=
        "@style/Theme.NavigationDrawer.NoActionBar"&gt;</pre></li>
				<li>Create the following fragments (<code>HomeFragment</code></li><li><code>FavoritesFragment</code></li><li><code>RecentFragment</code></li><li><code>ArchiveFragment</code></li><li><code>SettingsFragment</code></li><li><code>BinFragment</code></li><li><code>ContentFragment</code></li></ul></li>
				<li>Change each <a id="_idIndexMarker329"/>of these fragment layouts<a id="_idIndexMarker330"/> to use the following content:<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=
  "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;
    &lt;TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="8dp"
        android:text="@string/home_fragment"
        android:textAlignment="center"
        android:layout_gravity="center_horizontal"
        android:textSize="20sp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</pre></li>
			</ol>
			<p>The only difference is the <code>android:text</code> attribute, which will have the corresponding string from the <code>strings.xml</code> file. So, create these fragments with the correct string, indicating which fragment the user is viewing.</p>
			<p>This may seem a bit repetitive, and one single fragment could be updated with this text, but it demonstrates how you would separate different sections in a real-world app.</p>
			<ol>
				<li value="7">Update the <code>fragment_home.xml</code> with the following content, which adds a button (this<a id="_idIndexMarker331"/> is <a id="_idIndexMarker332"/>the body content you can see in <em class="italic">Figure 4</em><em class="italic">.1</em>, with the closed navigation drawer):<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=
  "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;
    &lt;TextView
        <strong class="bold">android:id="@+id/text_home"</strong>
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="8dp"
        android:text="@string/home_fragment"
        android:textAlignment="center"
        android:layout_gravity="center_horizontal"
        android:textSize="20sp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;
<strong class="bold">    &lt;Button</strong>
<strong class="bold">        android:id="@+id/button_home"</strong>
<strong class="bold">        android:layout_width="140dp"</strong>
<strong class="bold">        android:layout_height="140dp"</strong>
<strong class="bold">        android:layout_marginTop="16dp"</strong>
<strong class="bold">        android:text="@string/link_to_content_button"</strong>
<strong class="bold">        app:layout_constraintEnd_toEndOf="parent"</strong>
<strong class="bold">        app:layout_constraintStart_toStartOf="parent"</strong>
<strong class="bold">        app:layout_constraintTop_toBottomOf="@+id/text_home" /&gt;</strong>
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</pre></li>
			</ol>
			<p><code>TextView</code> is <a id="_idIndexMarker333"/>the <a id="_idIndexMarker334"/>same as what’s specified in the other fragment layouts, except it has an ID (<code>id</code>) with which it constrains the button below it.</p>
			<ol>
				<li value="8">Create the navigation graph that will be used in the app. Select <code>res</code> folder is selected in the Project see this option. Select <code>mobile_navigation.xml</code>.</li>
			</ol>
			<p>This creates the na<a id="_idTextAnchor279"/>vigation graph:</p>
			<div><div><img src="img/B19411_04_03.jpg" alt="Figure 4.3 – The Android Studio New Resource File dialog"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.3 – The Android Studio New Resource File dialog</p>
			<ol>
				<li value="9">Open the <code>mobile_navigation.xml</code> file in the <code>res/navigation</code> folder and update<a id="_idIndexMarker335"/> it<a id="_idIndexMarker336"/> with the code from the file in the following link. A truncated version of the code is shown here. Use this link to access the entire code: <a href="https://packt.link/ZRDiT">https://packt.link/ZRDiT</a>.</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">mobile_navigation.xml</p>
			<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;navigation xmlns:android=
    "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mobile_navigation"
    app:startDestination="@+id/nav_home"&gt;
    &lt;fragment
        android:id="@+id/nav_home"
        android:name="com.example.navigationdrawer.HomeFragment"
        android:label="@string/home"
        tools:layout="@layout/fragment_home"&gt;
        &lt;action
            android:id="@+id/nav_home_to_content"
            app:destination="@id/nav_content"
            app:popUpTo="@id/nav_home" /&gt;
    &lt;/fragment&gt;
…</pre>
			<p>This <a id="_idIndexMarker337"/>creates <a id="_idIndexMarker338"/>all the destinations in your app. However, it doesn’t specify whether these are primary or secondary destinations. This should be familiar from the fragment Jetpack navigation exercise from the previous chapter.</p>
			<p>The most important point to note here is <code>app:startDestination="@+id/nav_home</code>, which specifies what will be displayed to start with when the navigation loads and that there is an action available from within <code>HomeFragment</code> to move to the <code>nav_content</code> destination in the graph:</p>
			<pre class="source code">
        &lt;action
            android:id="@+id/nav_home_to_content"
            app:destination="@id/nav_content"
            app:popUpTo="@id/nav_home" /&gt;</pre>
			<p>You are now going to see how this is set up in <code>HomeFragment</code> and its layout.</p>
			<ol>
				<li value="10">Open <code>HomeFragment</code> and add two <code>import</code> statements for the <code>Button</code> and <code>Navigation</code> imports and<a id="_idIndexMarker339"/> update <code>onCreateView</code> to <a id="_idIndexMarker340"/>set up the button:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">HomeFragment</p>
			<pre class="source code">
<strong class="bold">import android.widget.Button</strong>
<strong class="bold">import androidx.navigation.Navigation</strong>
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        val view = inflater.inflate(R.layout.fragment_home, container, false)
        view.findViewById&lt;Button&gt; (R.id.button_home)?.setOnClickListener(
            Navigation.createNavigateOnClickListener (R.id.nav_home_to_content, null)
        )
        return view
    }</pre>
			<p>This uses the <code>ClickListener</code> navigation to complete the <code>R.id.nav_home_to_content</code> action when <code>button_home</code> is clicked.</p>
			<p>However, these changes will not do anything yet as you still need to set up the navigation host for your app and add all the other layout files, along with the navigation drawer.</p>
			<ol>
				<li value="11">Create a <code>Nav</code> host fragment by creating a new file in the layout folder called <code>content_main.xml</code>. This can be done by right-clicking on the <code>layout</code> folder in the <code>res</code> directory and then going to <code>FragmentContainerView</code>:<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.fragment.app.FragmentContainerView
    xmlns:android=
      "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/nav_host_fragment"
    android:name="androidx.navigation.fragment.NavHostFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:defaultNavHost="true"
    app:navGraph="@navigation/mobile_navigation" /&gt;</pre></li>
				<li>You’ll notice that the navigation graph is set to the graph you just created:<pre class="source code">
    app:navGraph="@navigation/mobile_navigation"</pre></li>
				<li>With that, the body of the app and its destination have been set up. Now, you need to set up the UI navigation. Create another layout resource file called <code>nav_header_main.xml</code> and add the following content:<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android=
    "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="176dp"
    android:background="@color/teal_700"
    android:gravity="bottom"
    android:orientation="vertical"
    android:paddingStart="16dp"
    android:paddingTop="16dp"
    android:paddingEnd="16dp"
    android:paddingBottom="16dp"
    android:theme="@style/ThemeOverlay.AppCompat.Dark"&gt;
    &lt;ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/nav_header_desc"
        android:paddingTop= "8dp"
        app:srcCompat="@mipmap/ic_launcher_round" /&gt;
    &lt;TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop= "8dp"
        android:text="@string/app_name"
        android:textAppearance= "@style/TextAppearance.AppCompat.Body1" /&gt;
&lt;/LinearLayout&gt;</pre></li>
			</ol>
			<p>This is the layout that’s displayed in the header of the navigation drawer.</p>
			<ol>
				<li value="14">Create the app bar with a toolbar layout file called <code>app_bar_main.xml</code>, and include<a id="_idIndexMarker343"/> the<a id="_idIndexMarker344"/> following content:<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=
  "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;
    &lt;com.google.android.material.appbar.AppBarLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:theme= "@style/Theme.NavigationDrawer.AppBarOverlay"&gt;
        &lt;androidx.appcompat.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:background="?attr/colorPrimary"
            app:popupTheme= "@style/Theme.NavigationDrawer.PopupOverlay" /&gt;
    &lt;/com.google.android.material.appbar.AppBarLayout&gt;
    &lt;include layout="@layout/content_main" /&gt;
&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</pre></li>
			</ol>
			<p>This integrates the main body layout of the app with the app bar that appears above it. The remaining part is to create the items that will appear in the navigation drawer and create and populate the navigation drawer with these items.</p>
			<ol>
				<li value="15">To use icons with these menu items, you need to copy the vector assets in the drawable folder of the completed exercise to the drawable folder of your project. Vector assets use coordinates for points, lines, and curves to layout images with associated color information.</li>
			</ol>
			<p>They are significantly smaller when compared to PNG and JPG images, and vectors can<a id="_idIndexMarker345"/> be <a id="_idIndexMarker346"/>resized to different sizes without loss of quality. You can find them here: <a href="https://packt.link/CurtF">https://packt.link/CurtF</a>.</p>
			<p>Copy the following drawables:</p>
			<ul>
				<li><code>favorites.xml</code></li>
				<li><code>archive.xml</code><code><a id="_idTextAnchor280"/></code></li>
				<li><code>recent.xml</code></li>
				<li><code>home.xml</code></li>
				<li><code>bin.xml</code></li>
			</ul>
			<ol>
				<li value="16">Create a menu with these items. To do this, go to <code>activity_main_drawer</code>, and then populate it with the following content:<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;menu xmlns:android=
    "http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    tools:showIn="navigation_view"&gt;
    &lt;group
        android:id="@+id/menu_top"
        android:checkableBehavior="single"&gt;
        &lt;item
            android:id="@+id/nav_home"
            android:icon="@drawable/home"
            android:title="@string/home" /&gt;
        &lt;item
            android:id="@+id/nav_recent"
            android:icon="@drawable/recent"
            android:title="@string/recent" /&gt;
        &lt;item
            android:id="@+id/nav_favorites"
            android:icon="@drawable/favorites"
            android:title="@string/favorites" /&gt;
    &lt;/group&gt;
    &lt;group
        android:id="@+id/menu_bottom"
        android:checkableBehavior="single"&gt;
        &lt;item
            android:id="@+id/nav_archive"
            android:icon="@drawable/archive"
            android:title="@string/archive" /&gt;
        &lt;item
            android:id="@+id/nav_bin"
            android:icon="@drawable/bin"
            android:title="@string/bin" /&gt;
    &lt;/group&gt;
&lt;/menu&gt;</pre></li>
			</ol>
			<p>This sets up the menu items that will appear in the navigation drawer itself. The name of the IDs is the magic that ties up the menu items to the destinations within the navigation graph.</p>
			<p>If the IDs of the menu items (in <code>activity_main_drawer.xml</code>) exactly match the IDs of the destinations in the navigation graph (which, in this case, are fragments within <code>mobile_navigation.xml</code>), then the destination is automatically loaded into the navigation host.</p>
			<ol>
				<li value="17">The layout for <code>MainActivity</code> ties the navigation drawer to all<a id="_idIndexMarker347"/> the layouts specified <a id="_idIndexMarker348"/>previously. Open <code>activity_main.xml</code> and update it with the following content:<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.drawerlayout.widget.DrawerLayout
xmlns:android=
  "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true"
    tools:openDrawer="start"&gt;
    &lt;include
        layout="@layout/app_bar_main"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /&gt;
  &lt;com.google.android.material.navigation.NavigationView
        android:id="@+id/nav_view"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:fitsSystemWindows="true"
        app:headerLayout="@layout/nav_header_main"
        app:menu="@menu/activity_main_drawer" /&gt;
&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;</pre></li>
			</ol>
			<p>As you can see, an <code>include</code> is used to add <code>app_bar_main.xml</code>. The <code>&lt;include&gt;</code> element allows you to add layouts that will be replaced at compile time with the actual layout itself.</p>
			<ol>
				<li value="18">They allow us to encapsulate different layouts as they can be reused in multiple layout <a id="_idIndexMarker349"/>files <a id="_idIndexMarker350"/>within the app. <code>NavigationView</code> (the class that creates the navigation drawer) specifies the layout files you have just created to configure its header and menu items:<pre class="source code">
    app:headerLayout="@layout/nav_header_main"
    app:menu="@menu/activity_main_drawer"</pre></li>
				<li>Now that you have specified all the layout files, update <code>MainActivity</code> by adding the following interaction logic:<pre class="source code">
package com.example.navigationdrawer
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import androidx.navigation.findNavController
import androidx.navigation.fragment.NavHostFragment
import androidx.navigation.ui.*
import com.google.android.material.navigation.NavigationView
class MainActivity : AppCompatActivity() {
    private lateinit var appBarConfiguration: AppBarConfiguration
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        setSupportActionBar(findViewById(R.id.toolbar))
        val navHostFragment = supportFragmentManager.findFragmentById(R.id.nav_host_fragment) as NavHostFragment
        val navController = navHostFragment.navController
        //Creating top level destinations
        //and adding them to the draw
        appBarConfiguration = AppBarConfiguration(
            setOf(
                R.id.nav_home, R.id.nav_recent, R.id.nav_favorites, R.id.nav_archive, R.id.nav_bin
            ), findViewById(R.id.drawer_layout)
        )
        setupActionBarWithNavController(navController, appBarConfiguration)
        findViewById&lt;NavigationView&gt;(R.id.nav_view) ?.setupWithNavController(navController)
    }
    override fun onSupportNavigateUp(): Boolean {
        val navController = findNavController(R.id.nav_host_fragment)
        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()
    }
}</pre></li>
			</ol>
			<p>Now, let’s go through the preceding code. The <code>setSupportActionBar(toolbar)</code> line configures the toolbar used in the app by referencing it from the layout and setting it. Retrieving <code>NavHostFragment</code> is <a id="_idIndexMarker351"/>done <a id="_idIndexMarker352"/>with the following code:</p>
			<pre class="source code">
    val navHostFragment = supportFragmentManager
.findFragmentById(R.id.nav_host_fragment) as NavHostFragment
        val navController = navHostFragment.navController</pre>
			<p>Next, you add the menu items you want to display in the navigation drawer:</p>
			<pre class="source code">
appBarConfiguration = AppBarConfiguration(
    setOf(
        R.id.nav_home, R.id.nav_recent, R.id.nav_favorites, R.id.nav_archive, R.id.nav_bin
    ), findViewById(R.id.drawer_layout)
)</pre>
			<p>The <code>drawer_layout</code> is the container for the <code>nav_view</code>, the main app bar, and its included content.</p>
			<p>This may seem like you are doing this twice as these items are displayed in the <code>activity_main_drawer.xml</code> menu for the navigation drawer. However, the function of setting these in <code>AppBarConfiguration</code> is that these primary destinations will not display an up arrow when they are selected as they are at the top level.</p>
			<p>It also adds <code>drawer_layout</code> as the last parameter to specify which layout should be used when the hamburger menu is selected to display in the navigation drawer. The next line is as follows:</p>
			<pre class="source code">
setupActionBarWithNavController(navController, appBarConfiguration)</pre>
			<p>This sets up the app bar with the navigation graph so that any changes that are made to the destinations are reflected in the app bar:</p>
			<pre class="source code">
findViewById&lt;NavigationView&gt; (R.id.nav_view)?.setupWithNavController(navController)</pre>
			<p>This is the last statement in <code>onCreate</code>, and it specifies the item within the navigation drawer that should be highlighted when the user clicks on it. The next<a id="_idIndexMarker353"/> function<a id="_idIndexMarker354"/> in the class handles pressing the up button for the secondary destination, ensuring that it goes back to its parent primary destination:</p>
			<pre class="source code">
override fun onSupportNavigateUp(): Boolean {
    val navController = findNavController(R.id.nav_host_fragment)
    return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()
}</pre>
			<p>The app bar can also display other menu items through the overflow menu, which, when configured, is displayed as three vertical dots at the top on the right-hand side. Let’s create an overflow menu to display the <strong class="bold">Settings</strong> screen.</p>
			<ol>
				<li value="20">To add the overflow menu to the app bar, go to <code>main.xml</code>.</li>
			</ol>
			<p>Update it with the following content:</p>
			<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;menu xmlns:android=
    "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"&gt;
    &lt;item
        android:id="@+id/nav_settings"
        android:title="@string/settings"
        app:showAsAction="never" /&gt;
&lt;/menu&gt;</pre>
			<p>This <a id="_idIndexMarker355"/>configuration<a id="_idIndexMarker356"/> shows one item: <code>Settings</code>. Since it specifies the same ID as the <code>SettingsFragment</code> destination in the navigation graph, <code>android:id="@+id/nav_settings"</code> it will open the <code>SettingsFragment</code> fragment.</p>
			<p>The attribute being set to <code>app:showAsAction="never"</code> ensures it will stay as a menu option within the three dots overflow menu and will not appear on the app bar itself. There are other values for <code>app:showAsAction</code>, which set menu options to always appear on the app bar and if there is room.</p>
			<p>See the full list here: <a href="https://developer.android.com/guide/topics/resources/menu-resource">https://developer.android.com/guide/topics/resources/menu-resource</a>.</p>
			<ol>
				<li value="21">To add the overflow menu to the app bar, add the following to the <code>MainActivity</code> class:<pre class="source code">
override fun onCreateOptionsMenu(menu: Menu): Boolean {
    menuInflater.inflate(R.menu.main, menu)
    return true
}
override fun onOptionsItemSelected(item: MenuItem): Boolean {
    return item.onNavDestinationSelected(findNavController (R.id.nav_host_fragment))
}</pre></li>
			</ol>
			<p>You will also need to add the following imports:</p>
			<pre class="source code">
import android.view.Menu
import android.view.MenuItem</pre>
			<p>The <code>onCreateOptionsMenu</code> function<a id="_idIndexMarker357"/> selects<a id="_idIndexMarker358"/> the menu to add to the app bar, while <code>onOptionsItemSelected</code> handles what to do when the item is selected using the <code>item.onNavDestinationSelected(findNavController(R.id.nav_host_fragment))</code> navigation function. This is used to navigate to the destination within the navigation graph.</p>
			<ol>
				<li value="22">Run the app and navigate to a top-level destination using the navigation drawer. The following screenshot shows an example of<a id="_idTextAnchor281"/> navigating to the <code>Recent</code> destination:</li>
			</ol>
			<div><div><img src="img/B19411_04_04.jpg" alt="Figure 4.4 – Recent menu item opened from the navigation drawer"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.4 – Recent menu item opened from the navigation drawer</p>
			<ol>
				<li value="23">When you <a id="_idIndexMarker359"/>open <a id="_idIndexMarker360"/>the navigation drawer again you will see<a id="_idTextAnchor282"/> that the <code>Recent</code> menu item is selected:</li>
			</ol>
			<div><div><img src="img/B19411_04_05.jpg" alt="Figure 4.5 – The highlighted Recent menu item in the navigation drawer"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.5 – The highlighted Recent menu item in the navigation drawer</p>
			<ol>
				<li value="24">Select<a id="_idIndexMarker361"/> the <strong class="bold">Home</strong> menu<a id="_idIndexMarker362"/> item <a id="_idTextAnchor283"/>again to display the button with the label <strong class="bold">LINK TO </strong><strong class="bold">CONTENT BUTTON</strong>:</li>
			</ol>
			<div><div><img src="img/B19411_04_06.jpg" alt="Figure 4.6 – The Home screen with a button for the secondary destination"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.6 – The Home screen with a button for the secondary destination</p>
			<ol>
				<li value="25">Click this <a id="_idIndexMarker363"/>button<a id="_idIndexMarker364"/> to go to the secondary destina<a id="_idTextAnchor284"/>tion. You will see an up arrow displayed:</li>
			</ol>
			<div><div><img src="img/B19411_04_07.jpg" alt="Figure 4.7 – Secondary destination with an up arrow displayed"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.7 – Secondary destination with an up arrow displayed</p>
			<p>In all the<a id="_idIndexMarker365"/> preceding <a id="_idIndexMarker366"/>screenshots, the overflow menu is displayed. After selecting it, you will see a <code> </code>fragment with the up arrow displayed:</p>
			<div><div><img src="img/B19411_04_08.jpg" alt="Figure 4.8 – Settings Fragment"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.8 – Settings Fragment</p>
			<p>Although there<a id="_idIndexMarker367"/> are <a id="_idIndexMarker368"/>quite a few steps to go through to set up an app with a navigation drawer, once created, it is very configurable. By adding a menu item entry to the drawer menu and a destination to the navigation graph, a new fragment can be created and set up for use immediately.</p>
			<p>This removes a lot of the boilerplate code you needed to use fragments in the previous chapter. The next navigational pattern you’ll explore is bottom navigation. This has become the most popular navigational pattern in Android, largely because it makes the<a id="_idTextAnchor286"/><a id="_idTextAnchor287"/> main sections<a id="_idIndexMarker369"/> of the <a id="_idIndexMarker370"/>app easily accessible.</p>
			<h1 id="_idParaDest-85"><a id="_idTextAnchor288"/>Bottom navigation</h1>
			<p><strong class="bold">Bottom navigation</strong> is <a id="_idIndexMarker371"/>used when there are a limited number of top-level destinations, and these can range from three to five primary destinations that are not related to each other. Each item on the bottom navigation bar displays an icon and an optional text label.</p>
			<p>This navigation allows quick access as the items are always available, no matter which secondar<a id="_idTextAnchor289"/><a id="_idTextAnchor290"/>y destination of the app the user navigates to.</p>
			<h2 id="_idParaDest-86"><a id="_idTextAnchor291"/>Exercise 4.02 – adding bottom navigation to your app</h2>
			<p>Create a new app <a id="_idIndexMarker372"/>in Android Studio named <code>Bottom Navigation</code> using<a id="_idIndexMarker373"/> the <strong class="bold">Empty Activity</strong> project template, leaving all the other defaults as they are. Do not use the <strong class="bold">Bottom Navigation Activity</strong> project template, as we are going to use incremental steps to build the app.</p>
			<p>You will build a loyalty app that provides offers, rewards, and so on for customers who have signed up to use it. Bottom navigation is quite common for this kind of app because there will typically be limited top-level destinations.</p>
			<p>Let’s get started:</p>
			<ol>
				<li>Many of the steps are very similar to the previous exercise, as you will be using Jetpack navigation and defining destinations in a navigation graph and a corresponding menu.</li>
				<li>Create a new project with an <code>Empty Activity</code> called <code>Bottom Navigation</code>.</li>
				<li>Add the Gradle dependencies you will require to <code>app/build.gradle</code>:<pre class="source code">
implementation 
'androidx.navigation:navigation-fragment-ktx:2.5.3'
implementation 
'androidx.navigation:navigation-ui-ktx:2.5.3'</pre></li>
				<li>Append <code>strings.xml</code> in<a id="_idIndexMarker374"/> the <code>res/values</code> folder<a id="_idIndexMarker375"/> with the following values:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">strings.xml</p>
			<pre class="source code">
    &lt;!-- Bottom Navigation --&gt;
    &lt;string name="home"&gt;Home&lt;/string&gt;
    &lt;string name="tickets"&gt;Tickets&lt;/string&gt;
    &lt;string name="offers"&gt;Offers&lt;/string&gt;
    &lt;string name="rewards"&gt;Rewards&lt;/string&gt;
    &lt;!-- Action Bar --&gt;
    &lt;string name="settings"&gt;Settings&lt;/string&gt;
    &lt;string name="cart"&gt;Shopping Cart&lt;/string&gt;
    &lt;string name="content"&gt;Content&lt;/string&gt;
    &lt;string name="home_fragment"&gt;Home Fragment&lt;/string&gt;
    &lt;string name="tickets_fragment"&gt;Tickets Fragment&lt;/string&gt;
    &lt;string name="offers_fragment"&gt;Offers Fragment&lt;/string&gt;
    &lt;string name="rewards_fragment"&gt;Rewards Fragment&lt;/string&gt;
    &lt;string name="settings_fragment"&gt; Settings Fragment&lt;/string&gt;
    &lt;string name="cart_fragment"&gt; Shopping Cart Fragment&lt;/string&gt;
    &lt;string name="content_fragment"&gt;Content Fragment&lt;/string&gt;
    &lt;string name="link_to_content_button"&gt; Link to Content Button&lt;/string&gt;</pre>
			<ol>
				<li value="5">Create eight fragments with the following names:<ul><li><code>HomeFragment</code></li><li><code>ContentFragment</code></li><li><code>OffersFragment</code></li><li><code>RewardsFragment</code></li><li><code>SettingsFragment</code></li><li><code>TicketsFragment</code></li><li><code>CartFragment</code></li></ul></li>
				<li>Apply the same layout that you applied in the previous exercise for all the fragments adding the corresponding string resource except for <code>fragment_home.xml</code>. For this layout, use the same layout file that you used in <em class="italic">Exercise 4.01 – creating an App with a </em><em class="italic">navigation drawer</em>.</li>
				<li>Create the navigation graph as you did in the previous exercise and call it <code>mobile_navigation.xml</code>. Update it with the code from the following file provided in<a id="_idIndexMarker376"/> the <a id="_idIndexMarker377"/>link. A truncated version of the code is shown here. See the link for the entire code block you need to use: <a href="https://packt.link/Fwuyl">https://packt.link/Fwuyl</a>.</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">mobile_navigation.xml</p>
			<pre class="source code">
&lt;navigation xmlns:android=
    "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mobile_navigation"
    app:startDestination="@+id/nav_home"&gt;
    &lt;fragment
        android:id="@+id/nav_home"
        android:name="com.example.bottomnavigation.HomeFragment"
        android:label="@string/home"
        tools:layout="@layout/fragment_home"&gt;
        &lt;action
            android:id="@+id/nav_home_to_content"
            app:destination="@id/nav_content"
            app:popUpTo="@id/nav_home" /&gt;
    &lt;/fragment&gt;
…</pre>
			<ol>
				<li value="8">Update the <code>onCreateView</code> function in <code>HomeFragment</code> to use the destination <a id="_idIndexMarker378"/>in the<a id="_idIndexMarker379"/> navigation graph to navigate to <code>ContentFragment</code>. You will also need to add the following imports:<pre class="source code">
import android.widget.Button
import androidx.navigation.Navigation
override fun onCreateView(
    inflater: LayoutInflater,
    container: ViewGroup?,
    savedInstanceState: Bundle?
): View? {
    val view = inflater.inflate(R.layout.fragment_home, container, false)
    view.findViewById&lt;Button&gt;(R.id.button_home) ?.setOnClickListener(
        Navigation.createNavigateOnClickListener (R.id.nav_home_to_content, null)
    )
    return view
}</pre></li>
				<li>Now that the destinations have been defined in the navigation graph, create the menu in the bottom navigation to reference these destinations. First, however, you need to gather the icons that will be used in this exercise. Go to the completed <a id="_idIndexMarker380"/>exercise <a id="_idIndexMarker381"/>on GitHub and find the vector assets in the <code>drawable</code> folder: <a href="https://packt.link/pUXvC">https://packt.link/pUXvC</a>.</li>
			</ol>
			<p>Copy the following drawables to the drawable folder of your project:</p>
			<ul>
				<li><code>cart.xml</code></li>
				<li><code>home.xml</code></li>
				<li><code>offers.xml</code></li>
				<li><code>rewards.xml</code></li>
				<li><code>tickets.xml</code></li>
			</ul>
			<ol>
				<li value="10">Create a <code>bottom_nav_menu.xml</code> file (right click on the <code>res</code> folder and select <code>cart.xml</code> vector asset, which will be used for the top toolbar. Notice that the IDs of the items match the IDs in the navigation graph:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">bottom_nav_menu.xml</p>
			<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;menu xmlns:android=
    "http://schemas.android.com/apk/res/android"&gt;
    &lt;item
        android:id="@+id/nav_home"
        android:icon="@drawable/home"
        android:title="@string/home" /&gt;
    &lt;item
        android:id="@+id/nav_tickets"
        android:icon="@drawable/tickets"
        android:title="@string/tickets"/&gt;
    &lt;item
        android:id="@+id/nav_offers"
        android:icon="@drawable/offers"
        android:title="@string/offers" /&gt;
    &lt;item
        android:id="@+id/nav_rewards"
        android:icon="@drawable/rewards"
        android:title="@string/rewards"/&gt;
&lt;/menu&gt;</pre>
			<ol>
				<li value="11">Update <a id="_idIndexMarker382"/>the <code>activity_main.xml</code> file<a id="_idIndexMarker383"/> with the following content:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">activity_main.xml</p>
			<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout 
xmlns:android=
  "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingTop="?attr/actionBarSize"&gt;
    &lt;com.google.android.material.bottomnavigation.BottomNavigationView
    android:id="@+id/nav_view"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_marginStart="0dp"
    android:layout_marginEnd="0dp"
    android:background="?android:attr/windowBackground"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:menu="@menu/bottom_nav_menu"
    app:labelVisibilityMode="labeled"/&gt;
    &lt;androidx.fragment.app.FragmentContainerView
        android:id="@+id/nav_host_fragment"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        android:name ="androidx.navigation.fragment.NavHostFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:defaultNavHost="true"
        app:navGraph="@navigation/mobile_navigation" /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</pre>
			<p>The <code>BottomNavigation</code> view is configured with the menu you created previously, that is, <code>app:menu="@menu/bottom_nav_menu"</code>, while <code>FragmentContainerView</code> is configured with <code>app:navGraph="@navigation/mobile_navigation"</code>. As the bottom navigation in the app is not connected directly to the app bar, there are fewer layout<a id="_idIndexMarker384"/> files <a id="_idIndexMarker385"/>to set up.</p>
			<ol>
				<li value="12">Update <code>MainActivity</code> with the following content:<pre class="source code">
package com.example.bottomnavigation
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import androidx.navigation.findNavController
import androidx.navigation.fragment.NavHostFragment
import androidx.navigation.ui.*
import com.google.android.material.bottomnavigation.BottomNavigationView
class MainActivity : AppCompatActivity() {
    private lateinit var appBarConfiguration: AppBarConfiguration
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    val navHostFragment = supportFragmentManager.findFragmentById (R.id.nav_host_fragment) as NavHostFragment
    val navController = navHostFragment.navController
        //Creating top level destinations
        //and adding them to bottom navigation
        appBarConfiguration = AppBarConfiguration(setOf(
            R.id.nav_home, R.id.nav_tickets, R.id.nav_offers, R.id.nav_rewards))
        setupActionBarWithNavController(navController, appBarConfiguration)
        findViewById&lt;BottomNavigationView&gt;(R.id.nav_view) ?.setupWithNavController(navController)
    }
    override fun onSupportNavigateUp(): Boolean {
        val navController = findNavController(R.id.nav_host_fragment)
        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()
    }
}</pre></li>
			</ol>
			<p>The <a id="_idIndexMarker386"/>preceding<a id="_idIndexMarker387"/> code should be very familiar because it was explained in the previous exercise. The main change here is that instead of a <code>NavigationView</code> that holds the main UI navigation for the navigation drawer, it is now replaced with a <code>BottomNavigationView</code>. The configuration after this <a id="_idTextAnchor292"/>is the same.</p>
			<ol>
				<li value="13">Run the app. You should see the following output:</li>
			</ol>
			<div><div><img src="img/B19411_04_09.jpg" alt="Figure 4.9 – Bottom navigation with Home selected"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.9 – Bottom navigation with Home selected</p>
			<ol>
				<li value="14">The <a id="_idIndexMarker388"/>display<a id="_idIndexMarker389"/> shows the four menu items you set up, with the <strong class="bold">Home</strong> item selected as the start destination. Click the squa<a id="_idTextAnchor293"/>re button to be taken to the secondary destination within <strong class="bold">Home</strong>:</li>
			</ol>
			<div><div><img src="img/B19411_04_10.jpg" alt="Figure 4.10 – Secondary destination within Home"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.10 – Secondary destination within Home</p>
			<ol>
				<li value="15">The action<a id="_idIndexMarker390"/> that <a id="_idIndexMarker391"/>makes this possible is the <code>nav_home_to_content</code> action specified in the navigation graph:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">mobile_navigation.xml (snippet)</p>
			<pre class="source code">
&lt;fragment
    android:id="@+id/nav_home"
    android:name="com.example.bottomnavigation.HomeFragment"
    android:label="@string/home"
    tools:layout="@layout/fragment_home"&gt;
    &lt;action
        android:id="@+id/nav_home_to_content"
        app:destination="@id/nav_content"
        app:popUpTo="@id/nav_home" /&gt;
&lt;/fragment&gt;</pre>
			<ol>
				<li value="16">Since <a id="_idIndexMarker392"/>only a<a id="_idIndexMarker393"/> limited amount of items are added to the bottom navigation (typically three to five), sometimes action items (those that have a dedicated icon) are added to the app bar. Create another menu called <code>main.xml</code> and add the following content:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">main.xml</p>
			<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;menu xmlns:android=
    "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"&gt;
    &lt;item
        android:id="@+id/nav_cart"
        android:title="@string/cart"
        android:icon="@drawable/cart"
        app:showAsAction="always" /&gt;
    &lt;item
        android:id="@+id/nav_settings"
        android:title="@string/settings"
        app:showAsAction="never" /&gt;
&lt;/menu&gt;</pre>
			<ol>
				<li value="17">This menu will be used in the overflow menu in the app bar. The overflow menu will be available when you click on the three dots. A <code>cart</code> vector asset will also be displayed on the top app bar because the <code>app:showAsAction</code> attribute is set to <code>always</code>. Configure the overflow menu within <code>MainActivity</code> by adding the following:</li>
			</ol>
			<p>Add <a id="_idIndexMarker394"/>these <a id="_idIndexMarker395"/>two imports at the top of the file:</p>
			<pre class="source code">
import android.view.Menu
import android.view.MenuItem</pre>
			<p>And then these two functions:</p>
			<pre class="source code">
override fun onCreateOptionsMenu(menu: Menu): Boolean {
    menuInflater.inflate(R.menu.main, menu)
    return true
}
override fun onOptionsItemSelected(item: MenuItem): Boolean {
    super.onOptionsItemSelected(item)
    return item.onNavDestinationSelected(findNavController (R.id.nav_host_fragment))
}</pre>
			<ol>
				<li value="18">This will now display the main <a id="_idTextAnchor294"/>menu in the app bar. Run the app again, and you’ll see the following:</li>
			</ol>
			<p class="IMG---Figure"> </p>
			<div><div><img src="img/B19411_04_11.jpg" alt="Figure 4.11 – Bottom navigation with the overflow menu"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.11 – Bottom navigation with the overflow menu</p>
			<p>Selecting<a id="_idIndexMarker396"/> the <a id="_idIndexMarker397"/>shopping cart takes yo<a id="_idTextAnchor295"/>u to the secondary destination we configured in the navigation graph:</p>
			<div><div><img src="img/B19411_04_12.jpg" alt="Figure 4.12 – Bottom navigation with the overflow menu in the secondary destination"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.12 – Bottom navigation with the overflow menu in the secondary destination</p>
			<p>As you’ve <a id="_idIndexMarker398"/>seen <a id="_idIndexMarker399"/>in this exercise, setting up bottom navigation is quite straightforward. The navigation graph and the menu setup simplify linking the menu items to the fragments. Additionally, integrating the action bar and the overflow menu are also small steps to implement.</p>
			<p>If you are developing an app that has very well-defined top-level destinations and switching between them is important, then the visibility of these destinations makes bottom navigation an ideal choice. The final primary navigation pattern to explore is tabbed navigation.</p>
			<p>This is a<a id="_idIndexMarker400"/> versatile<a id="_idIndexMarker401"/> pattern as it can be used as an app’s primary navigation and <a id="_idTextAnchor296"/><a id="_idTextAnchor297"/>as secondary navigation with the other navigation patterns we’ve studied.</p>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor298"/>Tabbed navigation</h1>
			<p><strong class="bold">Tabbed navigation</strong> is mostly <a id="_idIndexMarker402"/>used when you want to display related items. It is common to have fixed tabs if there’s only a few of them (typically between two and five tabs) and scrolling horizontal tabs if you have more than five tabs. They are used mostly for grouping destinations that are at the same hierarchical level.</p>
			<p>This can be the primary navigation if the destinations are related. This might be the case if the app you developed is in a narrow or specific subject field where the primary destinations are related, such as a news app. More commonly, it is used with bottom navigation to present secondary navigation that’s available within a primary destination. The following e<a id="_idTextAnchor299"/><a id="_idTextAnchor300"/>xercise demonstrates using tabbed navigation for displaying related items.</p>
			<h2 id="_idParaDest-88"><a id="_idTextAnchor301"/>Exercise 4.03 – using tabs for app navigation</h2>
			<p>Create a new<a id="_idIndexMarker403"/> app<a id="_idIndexMarker404"/> in Android Studio with an <code>Empty Activity</code> named <code>Tab Navigation</code>. You are going to build a skeleton movies app that displays the genres of movies. Let’s get started:</p>
			<ol>
				<li>Update the <code>strings.xml</code> with the following content:</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">strings.xml</p>
			<pre class="source code">
    &lt;string name="action"&gt;Action&lt;/string&gt;
    &lt;string name="comedy"&gt;Comedy&lt;/string&gt;
    &lt;string name="drama"&gt;Drama&lt;/string&gt;
    &lt;string name="sci_fi"&gt;Sci-Fi&lt;/string&gt;
    &lt;string name="family"&gt;Family&lt;/string&gt;
    &lt;string name="crime"&gt;Crime&lt;/string&gt;
    &lt;string name="history"&gt;History&lt;/string&gt;
    &lt;string name="dummy_text"&gt;
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.
&lt;/string&gt;</pre>
			<p>The <code>&lt;string name="dummy_text"&gt;</code> file specified provides some body text for<a id="_idIndexMarker405"/> each <a id="_idIndexMarker406"/>movie genre:</p>
			<ol>
				<li value="2">In order to be able to swipe through the tabs left and right, we need to use a <code>ViewPager</code> component. Add the following dependency to app <code>build.gradle</code>:<pre class="source code">
implementation "androidx.viewpager2:viewpager2:1.0.0"</pre></li>
				<li>Create a new blank <code>MoviesFragment</code> fragment which will display some body text and replace the layout file content with the code following code snippet.</li>
			</ol>
			<p class="SC---Heading" lang="en-US" xml:lang="en-US">fragment_movies.xml</p>
			<pre class="source code">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=
  "http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MoviesFragment"&gt;
    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="16sp"
        android:text="@string/dummy_text"
        android:padding="16dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</pre>
			<ol>
				<li value="4">Update <a id="_idIndexMarker407"/>the <code>activity_main.xml</code> file with the<a id="_idIndexMarker408"/> following content:<pre class="source code">
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"&gt;
    &lt;com.google.android.material.tabs.TabLayout
        app:layout_constraintTop_toTopOf="parent"
        android:id="@+id/tab_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:tabMode="fixed"/&gt;
    &lt;androidx.viewpager2.widget.ViewPager2
   app:layout_constraintTop_toBottomOf="@id/tab_layout"
        android:id="@+id/view_pager"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</pre></li>
			</ol>
			<p>The layout <a id="_idIndexMarker409"/>displays <code>TabLayout</code> at the top <a id="_idIndexMarker410"/>and notices that it sets the tabs to be fixed with the <code>app:tabMode="fixed"</code> attribute. To display the required content, you will use <code>ViewPager</code>, a swipeable layout that allows you to add multiple views or fragments so that when a user swipes to change one of the tabs, the body content displays the corresponding view or fragment. For this exercise, you are going to swipe between movie fragments.</p>
			<p>The format of the tabs can be fixed so all are visible on the screen at the same time or scrollable, so some tabs will initially be off-screen if they don’t fit within the horizontal screen space available.</p>
			<p>Next, we need to provide the content for <code>ViewPager</code>. The component that provides the data that’s used in <code>ViewPager</code> is called an adapter.</p>
			<ol>
				<li value="5">Create a simple adapter that will be used to display our movies. Go to <code>MovieGenresAdapter</code>:<pre class="source code">
package com.example.tabnavigation
import androidx.fragment.app.Fragment
import androidx.fragment.app.FragmentManager
import androidx.lifecycle.Lifecycle
import androidx.viewpager2.adapter.FragmentStateAdapter
val TAB_GENRES_SCROLLABLE = listOf(
    R.string.action,
    R.string.comedy,
    R.string.drama,
    R.string.sci_fi,
    R.string.family,
    R.string.crime,
    R.string.history
)
val TAB_GENRES_FIXED = listOf(R.string.action, R.string.comedy, R.string.drama)
class MovieGenresAdapter(fragmentManager: FragmentManager, lifecycle: Lifecycle) :
    FragmentStateAdapter(fragmentManager, lifecycle) {
    override fun getItemCount(): Int {
       return TAB_GENRES_FIXED.size
    }
    override fun createFragment(position: Int): Fragment {
        return MoviesFragment()
    }
}</pre></li>
			</ol>
			<p>First, look at the <code>MovieGenresAdapter</code> class header. It extends from <code>FragmentStateAdapter</code>, which is an adapter used to populate fragments within <code>ViewPager</code>.</p>
			<p>The callback <a id="_idIndexMarker413"/>method’s functions are as <a id="_idIndexMarker414"/>follows:</p>
			<ul>
				<li><code>getItemCount()</code>: This returns the total number of fragments we will be inserting, which, as we are matching the number of pages to the number of tabs, is the size of the <code>TABS_GENRE_FIXED</code> constant.</li>
				<li><code>createFragment(position Int)</code>: This creates the fragment to be displayed in <code>ViewPager</code> at the passed in argument position. Here we are setting this to be the same fragment, but in a real app, you would populate it with different fragments.</li>
			</ul>
			<ol>
				<li value="6">Update <code>MainActivity</code> so that it uses tabs with <code>ViewPager</code>:<pre class="source code">
package com.example.tabnavigation
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import androidx.viewpager2.widget.ViewPager2
import com.google.android.material.tabs.TabLayout
import com.google.android.material.tabs.TabLayoutMediator
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val viewPager = findViewById&lt;ViewPager2&gt;(R.id.view_pager)
        val tabLayout = findViewById&lt;TabLayout&gt;(R.id.tab_layout)
        val adapter = MovieGenresAdapter(supportFragmentManager, lifecycle)
        viewPager.adapter = adapter
        TabLayoutMediator(tabLayout, viewPager) { tab, position -&gt;
            tab.text = resources.getString(TAB_GENRES_FIXED[position])
        }.attach()
    }
}</pre></li>
				<li>You <a id="_idIndexMarker415"/>then <a id="_idIndexMarker416"/>retrieve the Views from the layout and link the tabs to <code>ViewPager</code> with the <code>TabLayoutMediator</code>. The tab itself is exposed for you to customize. In this instance, we are just setting the text. The position is also available to link the tab position to the fragment position in <code>ViewPager</code>. Creating this tab<a id="_idTextAnchor302"/> navigation is simple and effective.</li>
				<li>Run <a id="_idIndexMarker417"/>the app <a id="_idIndexMarker418"/>up, and you should see the following:</li>
			</ol>
			<div><div><img src="img/B19411_04_13.jpg" alt="Figure 4.13 – Tab layout with fixed tabs"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.13 – Tab layout with fixed tabs</p>
			<p>You can swipe left and right in the body of the page to go to each of the three tabs, and you can also select one of the respective tabs to perform the same action. Now, let’s change the tab data that’s being displayed and set the tabs so that they can be scrolled through.</p>
			<ol>
				<li value="9">First, change <code>MovieGenresAdapter</code> to use a few extra genres by updating the <code>getItemCount</code> function:<pre class="source code">
override fun getItemCount(): Int {
  return TAB_GENRES_SCROLLABLE.size
}</pre></li>
				<li>In <code>MainActivity</code>, set <code>TabLayoutMediator</code> to use the updated item count in the<a id="_idIndexMarker419"/> Adapter to set the tab text for<a id="_idIndexMarker420"/> these extra pages:<pre class="source code">
TabLayoutMediator(tabLayout, viewPager) { tab, position -&gt;
    tab.text = resources.getString(TAB_GENRES_SCROLLABLE[position])
}.attach()</pre></li>
				<li>You will also need to change the <code>app:tabMode="fixed"</code> line to <code>app:tabMode="scrol<a id="_idTextAnchor303"/>lable"</code> in the <code>activity_layout.xml</code> file.</li>
				<li>Run the app now, and you should see the following:</li>
			</ol>
			<div><div><img src="img/B19411_04_14.jpg" alt="Figure 4.14 – The Tab Navigation layout with scrollable tabs"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.14 – The Tab Navigation layout with scrollable tabs</p>
			<p>The list of tabs continues to display off the screen. The tabs can be swiped and selected, and the body content can also be swiped so that you can go left and right through the tab pages.</p>
			<p>With this exercise, you learned how versatile tabs are when it comes to providing navigation in an app. Fixed-width tabs can be used for both primary and secondary navigation. At the same time, scrollable tabs can be used to group related items together for secondary navigation, so you also need to add primary navigation to the app.</p>
			<p>In this <a id="_idIndexMarker421"/>example, the<a id="_idIndexMarker422"/> primary navigation has been omitted for simplicity, but for mo<a id="_idTextAnchor304"/>re real-world and complex apps, you can either add a navigation drawer or bottom navigation.</p>
			<h2 id="_idParaDest-89"><a id="_idTextAnchor305"/>Activity 4.01 – building primary and secondary app navigation</h2>
			<p>You have been<a id="_idIndexMarker423"/> tasked with creating a<a id="_idIndexMarker424"/> sports app. It can have three or more top-level destinations. One of the primary destinations, however, must be called <code>My Sports</code> and should link to one or more secondary destinations, which are sports. You can use any one of the navigation patterns we have explored in this chapter or a combination of them, and you can also introduce any customizations that you feel are appropriate.</p>
			<p>There are different ways of attempting this activity. One approach would be to use bottom navigation and add the individual secondary sports destinations to the navigation graph so that it can link to these destinations. It is fairly simple and delegates to the navigation <a id="_idTextAnchor306"/>graph using actions. Here is what the home screen should look like after using this approach:</p>
			<div><div><img src="img/B19411_04_15.jpg" alt="Figure 4.15 – Bottom navigation for th﻿﻿e My Sports app"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 4.15 – Bottom navigation for th<a id="_idTextAnchor307"/><a id="_idTextAnchor308"/>e My Sports app</p>
			<p class="callout heading">Note</p>
			<p class="callout">The<a id="_idIndexMarker425"/> solution to this <a id="_idIndexMarker426"/>activity can be found at: <a href="https://packt.link/By7eE">https://packt.link/By7eE</a>.</p>
			<h1 id="_idParaDest-90"><a id="_idTextAnchor309"/>Summary</h1>
			<p>This chapter covered the most important navigation techniques you need to know about in order to create clear and consistent navigation in your apps. You started off by learning how to create an Android Studio project with a navigation drawer to connect navigation menu items to individual fragments using Jetpack navigation. You then progressed to actions within Jetpack navigation to navigate to other secondary destinations in your app within the navigation graph.</p>
			<p>The next exercise then used bottom navigation to display primary navigation destinations that are always visible on the screen. We followed this by looking at tabbed navigation, where you learned how to display both fixed and scrollable tabs. For each navigational pattern, you were shown when it might be more suitable, depending on the type of app you were building. We finished this chapter by building our own app using one or more of these navigational patterns and adding both primary and secondary destinations.</p>
			<p>This chapter built upon the comprehensive introduction we provided to Android with Android Studio in <a href="B19411_01.xhtml#_idTextAnchor025"><em class="italic">Chapter 1</em></a>, <em class="italic">Creating Your First App</em>, as well as what you learned about activities and fragments in <a href="B19411_02.xhtml#_idTextAnchor103"><em class="italic">Chapter 2</em></a>, <em class="italic">Building User Screen Flows</em>, and <a href="B19411_03.xhtml#_idTextAnchor163"><em class="italic">Chapter 3</em></a>, <em class="italic">Developing the UI with Fragments</em>. These chapters covered the knowledge, practice, and fundamental Android components you need to create apps. This chapter tied these previous chapters together by guiding you through the primary navigational patterns available to make your apps stand out and be easy to use.</p>
			<p>The next chapter will build on these concepts and introduce you to more advanced ways of displaying app content. You will start off by learning about binding data with lists using <code>RecyclerView</code>. After that, you<a id="_idTextAnchor310"/> will explore the different mechanisms you can use to retrieve and populate content within apps.</p>
		</div>
		<div><div></div>
		</div>
	

		<div><h1 id="_idParaDest-91"><a id="_idTextAnchor311"/>Part 2: Displaying Network Calls</h1>
			<p>In this part, we will look at how we can integrate popular libraries and frameworks used for building Android apps. We will start with libraries used to fetch and process data from the internet, then continue with the <code>RecyclerView</code> library used for rendering lists.</p>
			<p>Next, we will look at how we can handle permissions and use Google Maps, followed by performing tasks in the background with Services and <code>WorkManager</code>, and then displaying notifications to the user. Finally, we will look at Jetpack Compose and how we can use it to simplify the creation of user interfaces.</p>
			<p>We will cover the following chapters in this section:</p>
			<ul>
				<li><a href="B19411_05.xhtml#_idTextAnchor312"><em class="italic">Chapter 5</em></a>, <em class="italic">Essential Libraries: Retrofit, Moshi, and Glide</em></li>
				<li><a href="B19411_06.xhtml#_idTextAnchor353"><em class="italic">Chapter 6</em></a>, <em class="italic">Adding and Interacting with RecyclerView</em></li>
				<li><a href="B19411_07.xhtml#_idTextAnchor421"><em class="italic">Chapter 7</em></a>, <em class="italic">Android Permissions and Google Maps</em></li>
				<li><a href="B19411_08.xhtml#_idTextAnchor471"><em class="italic">Chapter 8</em></a>, <em class="italic">Services, WorkManager, and Notifications</em></li>
				<li><a href="B19411_09.xhtml#_idTextAnchor499"><em class="italic">Chapter 9</em></a>, <em class="italic">Building User Interfaces Using Jetpack Compose</em></li>
			</ul>
		</div>
		<div><div></div>
		</div>
	</body></html>