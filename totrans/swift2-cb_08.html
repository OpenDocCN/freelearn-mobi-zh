<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;8.&#xA0;Integrating with Objective-C" id="22O7C1-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08" class="calibre1"/>Chapter 8. Integrating with Objective-C</h1></div></div></div><p class="calibre7">In this chapter, we will cover the following recipes:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Calling a cab</li><li class="listitem">Hiring a van</li><li class="listitem">Porting your code from one language to another</li><li class="listitem">Replacing the user interface classes</li><li class="listitem">Upgrading the app delegate</li><li class="listitem">Creating your own custom framework</li></ul></div></div>

<div class="book" title="Chapter&#xA0;8.&#xA0;Integrating with Objective-C" id="22O7C1-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="Introduction"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch08lvl1sec64" class="calibre1"/>Introduction</h1></div></div></div><p class="calibre7">Swift 2 is out, and we can see that it is going to replace Objective-C on iOS development sooner or later, however how should you migrate your Objective-C app? Is it necessary to rewrite everything again?</p><p class="calibre7">Of course you don't have to rewrite a whole application in Swift from scratch, you can gradually migrate it. Imagine a four year old app developed by 10 developers, it would take a long time to be rewritten.</p><p class="calibre7">Actually, you've already seen that some of the codes we've used in this book have some kind of "old Objective-C fashion". The reason is that not even Apple computers could migrate the whole Objective-C code into Swift.</p><p class="calibre7">This chapter will help you migrate from Objective-C to Swift, step by step.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Calling a cab"><div class="book" id="23MNU2-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec65" class="calibre1"/>Calling a cab</h1></div></div></div><p class="calibre7">Let's imagine that we <a id="id372" class="calibre1"/>work for a taxi company, which already has an app that allows the clients to call a taxi from it. As you may imagine, the company can start giving additional services rather than only using traditional cars, for example, let's imagine that now they want to offer hiring a van for people that have a lot of luggage.</p><p class="calibre7">In this recipe we are going to start with a pure Objective-C application, after which we are going to modify it for being prepared to add a Swift code in the future.</p></div>

<div class="book" title="Calling a cab">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec200" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">Let's start by creating a <a id="id373" class="calibre1"/>project called <code class="email">Chapter 8 Cab</code>, but in this case select Objective-C instead of Swift as the programming language:</p><div class="mediaobject"><img src="../images/00095.jpeg" alt="Getting ready" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div class="book" title="Calling a cab">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec201" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">First, create a new file to your project, select <span class="strong"><strong class="calibre8">Cocoa Touch Class,</strong></span> which is located on the upper right-hand side of the iOS source:<div class="mediaobject"><img src="../images/00096.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Then create a file <a id="id374" class="calibre1"/>called <code class="email">Car</code>, which should be a subclass of <code class="email">NSObject</code>:<div class="mediaobject"><img src="../images/00097.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p><p class="calibre15">You will see that two files are created, one is called <code class="email">Car.h</code> and the other one is called <code class="email">Car.m</code>.</p></li><li class="listitem" value="3">Click on the header file (<code class="email">Car.h</code>) and add the following code:<div class="informalexample"><pre class="programlisting">#import &lt;Foundation/Foundation.h&gt;

@interface Car : NSObject{
    float fare;
}

@property (assign) float distance;
@property (assign) int pax;

-(id) init;
-(id) initWithFare:(float) fare;
-(float) getFare;

@end</pre></div></li><li class="listitem" value="4">Once the class interface <a id="id375" class="calibre1"/>is created, we have to implement this class, so click on the file <code class="email">Car.m</code> and type the following code:<div class="informalexample"><pre class="programlisting">#import "Car.h"

@implementation Car
-(id) init{
    self = [super init];
    if(self){
        self-&gt;fare = 0.2;
        self.pax = 4;
        self.distance = 0;
    }
    return self;
}

-(id) initWithFare:(float) fare{
    self = [super init];
    if(self){
        self-&gt;fare = fare;
        self.pax = 4;
        self.distance = 0;
    }
    return self;
}

-(float) getFare{
    return self-&gt;fare;
}
@end</pre></div><p class="calibre15">The model part is done, now we need to create the view part.</p></li><li class="listitem" value="5">Let's do something very straightforward, just add a table view onto the storyboard, and then link it with the view controller as an attribute, as a data source, and as a delegate.</li><li class="listitem" value="6">As you have to modify <a id="id376" class="calibre1"/>the header file (usually called <code class="email">ViewController.h</code>), add an auxiliary attribute called <code class="email">vehicles</code> of type <code class="email">NSArray</code>:<div class="informalexample"><pre class="programlisting">@interface ViewController : UIViewController &lt;UITableViewDataSource, UITableViewDelegate&gt;{
    NSArray * vehicles;
    IBOutlet UITableView *tableView;
}
@end</pre></div></li><li class="listitem" value="7">To add some functionality to this app, go to the message file (usually called <code class="email">ViewController.m</code>).<div class="note" title="Note"><h3 class="title2"><a id="tip40" class="calibre1"/>Tip</h3><p class="calibre7">Switching from the header file to its implementation or vice versa can be done using <span class="strong"><em class="calibre9"></em></span> + <span class="strong"><em class="calibre9">^ </em></span>+ up arrow.</p></div></li><li class="listitem" value="8">First let's import the <code class="email">Car.h</code> file:<div class="informalexample"><pre class="programlisting">#import "Car.h"</pre></div></li><li class="listitem" value="9">Then, add the data source content:<div class="informalexample"><pre class="programlisting">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [vehicles count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell * cell;
    cell = [self-&gt;tableView dequeueReusableCellWithIdentifier:@"vehiclecell"];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"vehiclecell"];
    }
    Car * currentCar = [self-&gt;vehicles objectAtIndex:indexPath.row];
    cell.textLabel.text = [NSString stringWithFormat:@"Distance %.0f, pax: %d, fare: %.2f", currentCar.distance * 1000, currentCar.pax, [currentCar getFare] ];
    return cell;
}</pre></div></li><li class="listitem" value="10">Now, you have to initialize the vehicle's attributes. Of course, here, we are going to use just some <a id="id377" class="calibre1"/>hard code, otherwise we would have a huge amount of code:<div class="informalexample"><pre class="programlisting">- (void)viewDidLoad {
    [super viewDidLoad];
    Car * car1 = [[Car alloc] init];
    car1.distance = 1.2;
    Car * car2 = [[Car alloc] init];
    car2.distance = 0.5;
    Car * car3 = [[Car alloc] init];
    car3.distance = 5;
    Car * car4 = [[Car alloc] initWithFare:0.25];
    car4.distance = 4;
    vehicles = @[car1, car2, car3, car4];
    [self-&gt;tableView reloadData];
}</pre></div></li><li class="listitem" value="11">The last thing we need to do is create an event for the user for letting him choose a car for booking:<div class="informalexample"><pre class="programlisting">- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    Car * currentCar = [self-&gt;vehicles objectAtIndex:indexPath.row];
    // let's suppose that the current traffic allows us to drive at 50 km/h
    float time = currentCar.distance / 50.0 * 60.0;
    [[[UIAlertView alloc] initWithTitle:@"Car booked" message:[NSString stringWithFormat:@"The car will arrive in %.0f minutes", time] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
}</pre></div></li><li class="listitem" value="12">Now test this app just to see that it is working. The next step is preparing this app to receive some Swift code. Before adding any Swift file we need to modernize this code; fortunately Xcode offers an option that does it automatically, so click on the <span class="strong"><strong class="calibre8">Edit</strong></span> menu, then choose <span class="strong"><strong class="calibre8">Refactor</strong></span>, and finally <span class="strong"><strong class="calibre8">Convert to Modern Objective-C Syntax…</strong></span>:<div class="mediaobject"><img src="../images/00098.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p><div class="note" title="Note"><h3 class="title2"><a id="tip41" class="calibre1"/>Tip</h3><p class="calibre7">Before you start <a id="id378" class="calibre1"/>modernizing your code, it's a good idea to commit your code on the version control system, if you are using one.</p></div></li><li class="listitem" value="13">When a dialog appears with some introduction text, press <span class="strong"><strong class="calibre8">Next</strong></span>, then check every target that appears on the next dialog, usually they are checked but just in case make sure of it. On the next screen, you will see some options to modernize your Objective-C code, you can leave all of them with their default values, but it is a better idea to make sure that every option is marked "yes":<div class="mediaobject"><img src="../images/00099.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="14">After that, you <a id="id379" class="calibre1"/>will see another dialog displaying the differences between the original code and the one that is going to be updated. Check the differences of each file by clicking on the filenames on the left-hand side:<div class="mediaobject"><img src="../images/00100.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p><div class="note" title="Note"><h3 class="title2"><a id="tip42" class="calibre1"/>Tip</h3><p class="calibre7">Avoid modernizing your code without checking the differences between the old and the new code, sometimes you will find modifications that are not conceptually right.</p></div></li><li class="listitem" value="15">Press <span class="strong"><strong class="calibre8">Save</strong></span> and <a id="id380" class="calibre1"/>you will see a new dialog asking if you would like to enable automatic snapshots:<div class="mediaobject"><img src="../images/00101.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre13"/></div><p class="calibre7">Now check that your project has the code changed and it still works as before.</p></div></div>

<div class="book" title="Calling a cab">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec202" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre7">When you migrate your Objective-C application to Swift, the first thing that you need to do is convert your code to Modern Objective-C Syntax. Thanks to this your code will be ready for being compatible with Swift integration.</p><p class="calibre7">You can see that after modernizing your code, that part of your code is modified, for example, ID is replaced with <code class="email">instancetype</code>, initializers receive the modifier <code class="email">NS_DESIGNATED_INITIALIZER</code>, and some functions are converted into property, mainly those functions that start with get or set.</p><p class="calibre7">Usually this kind of change is considered a massive change, which of course has the risk of needing to roll back to the previous state. This is the reason why Xcode recommends you to create a snapshot.</p></div></div>

<div class="book" title="Calling a cab">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch08lvl2sec203" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">In this recipe we learned how to get an existing Objective-C app and prepare it for using its code with Swift. Of course, sometimes you can do it automatically and sometimes you have to change it manually. It is a good idea to check the modern <a id="id381" class="calibre1"/>Objective-C documentation. You can do it by visiting the website: <a class="calibre1" href="https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html">https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html</a>.</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Hiring a van"><div class="book" id="24L8G2-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec66" class="calibre1"/>Hiring a van</h1></div></div></div><p class="calibre7">In this recipe we are <a id="id382" class="calibre1"/>going to give more functionality to the cab application, in this case we are going to assume that the application won't call only cars, but also a van service will be available. In this case the van needs to specify its capacity, as we are modernizing the code, we will do it using Swift. Of course, there will always be some code to type in Objective-C, bear that in mind.</p></div>

<div class="book" title="Hiring a van">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec204" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">In this recipe we are going to continue with the previous app, so make a copy of the previous recipe and open the project copy. If you want to rename the app from <code class="email">Chapter 8 Car</code> to <code class="email">Chapter 8 Vehicles</code>, it would be good to differentiate them.</p></div></div>

<div class="book" title="Hiring a van">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec205" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">First, click on the project navigator, then on the group that contains the source code, and add a new Swift file called <code class="email">Van.swift</code>. Check that after trying to add it, a new dialog appears asking whether you would like to create a bridge file. Click on <span class="strong"><strong class="calibre8">Yes</strong></span>, otherwise you will have to create a header file by yourself:<div class="mediaobject"><img src="../images/00102.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">Once you have accepted it, go to building settings, type <code class="email">bridging</code> on the search field and check that there is a file set on the option <span class="strong"><strong class="calibre8">Objective-C Bridging Header</strong></span>:<div class="mediaobject"><img src="../images/00103.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">After that, check that there is a new file on the project navigator called <code class="email">Chapter 8 Vehicles-Bridge-Header.h</code>, and its contents are basically empty (only a few comments), so let's import the file <code class="email">Car.h</code>:<div class="informalexample"><pre class="programlisting">#import "Car.h"</pre></div></li><li class="listitem" value="4">Now, click on <code class="email">Car.h</code> and let's add the last modifications, and create a property called <code class="email">image</code>, this way we can differentiate one car from one van:<div class="informalexample"><pre class="programlisting">@property (strong) UIImage * image;</pre></div></li><li class="listitem" value="5">You are going to receive an error because <code class="email">Car.h</code> doesn't import the UIKit, so go to the top of this file and add the following import instruction:<div class="informalexample"><pre class="programlisting">#import &lt;UIKit/UIKit.h&gt;</pre></div></li><li class="listitem" value="6">After that you will have to click on <code class="email">Car.m</code> to initialize this new property, so add the following code in both initializers:<div class="informalexample"><pre class="programlisting">self.image = [UIImage imageNamed:@"car.png"];</pre></div></li><li class="listitem" value="7">Now, we can click back on the Swift file and create a class that represents a van. In this case, we will add an attribute called <code class="email">capacity</code>, which will represent the space, measured in square meters. As you may imagine, this class will be a subclass of a car:<div class="informalexample"><pre class="programlisting">class Van: Car {
    var capacity:Int;
    
    override init(){
        self.capacity = 10
        super.init()
        self.image = UIImage(named: "van.png")
    }
    
    override init(fare: Float){
        self.capacity = 10
        super.init(fare: fare)
        self.image = UIImage(named: "van.png")
    }
    
}</pre></div></li><li class="listitem" value="8">As you can see, we need two images for helping the user to visualize when it is a car and when it is a van. Drag the corresponding images from the <code class="email">Resources</code> folder of this book into the <span class="strong"><strong class="calibre8">Supporting Files</strong></span> group.</li><li class="listitem" value="9">It is obvious that we can't stop here, we have to change the view controller for letting the new class be represented with its specific information. Click on the <code class="email">ViewController.m</code> file and make the following changes: first change the method <code class="email">cellForRowAtIndexPath</code>, it will be displayed in a more complete way:<div class="informalexample"><pre class="programlisting">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell * cell;
    cell = [self-&gt;tableView dequeueReusableCellWithIdentifier:@"vehiclecell"];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"vehiclecell"];
    cell.textLabel.numberOfLines = 1;
    }
    Car * currentCar = self-&gt;vehicles[indexPath.row];

    cell.textLabel.text = [NSString stringWithFormat:@"Distance %.3f meters", currentCar.distance];
    NSString * detailText = detailText = [NSString stringWithFormat:@"Pax: %d Fare: %.2f", currentCar.pax, [currentCar getFare] ];
    if ([currentCar isKindOfClass:[Van class]]) {
        detailText = [NSString stringWithFormat:@"%@, Volume: %ld",detailText, (long)[(Van*)currentCar capacity]];
    }
    cell.detailTextLabel.text = detailText;
    cell.imageView.image = currentCar.image;
    return cell;
}</pre></div></li><li class="listitem" value="10">Now the compiler is going to complain about the <code class="email">Van</code> class, the reason is that you need to import it. How can we import a Swift file in Objective-C? The answer is very simple, just import a file called the same as your project name and concatenating the suffix <code class="email">-Swift.h</code>. If your project has whitespace in its name, replace it with underscores:<div class="informalexample"><pre class="programlisting">#import "Chapter_8_Vehicles-Swift.h"</pre></div></li><li class="listitem" value="11">Then you have to add one more element to the vehicles array, so go to the <code class="email">viewDidLoad</code> and add a van object after car number 4:<div class="informalexample"><pre class="programlisting">- (void)viewDidLoad {
    [super viewDidLoad];
    Car * car1 = [[Car alloc] init];
    car1.distance = 1.2;
    Car * car2 = [[Car alloc] init];
    car2.distance = 0.5;
    Car * car3 = [[Car alloc] init];
    car3.distance = 5;
    Car * car4 = [[Car alloc] initWithFare:0.25];
    car4.distance = 4;
<span class="strong"><strong class="calibre8">    Van * van = [[Van alloc] initWithFare:0.32];</strong></span>
<span class="strong"><strong class="calibre8">    van.distance = 3.8;</strong></span>
    vehicles = @[car1, car2, car3, car4, <span class="strong"><strong class="calibre8">van</strong></span>];
    [self-&gt;tableView reloadData];
}</pre></div></li><li class="listitem" value="12">Now our first migration is done, press play and you will see that your application is still working, but with the possibility of hiring a van:<div class="mediaobject"><img src="../images/00104.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Hiring a van">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec206" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre7">When you mix Swift with Objective-C you have to create a bridge file in case of using Swift code in the Objective-C part. Usually you are guided by a wizard, which creates the bridge file and sets it into the building settings, but bear in mind that you may need to do it if the wizard doesn't appear.</p><p class="calibre7">You have to import every header file that you want to use in Swift. In this case you had to import <code class="email">Car.h</code>.</p><p class="calibre7">Swift classes can inherit from Objective-C classes, however, the opposite is not allowed, meaning that if you start adding Swift code into your project you need to be sure that you are not going to continue developing classes with Objective-C.</p><p class="calibre7">As you've just seen, you can treat the Swift class as an Objective-C class, even if you need to use methods such as <code class="email">isKindOfClass</code>, and also the Objective-C was converted to Swift with its philosophy, such as creating an initializer, like <code class="email">init(fare:Float)</code>, when in Objective-C its original name was <code class="email">initWithFare</code>.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Porting your code from one language to another" id="25JP21-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec67" class="calibre1"/>Porting your code from one language to another</h1></div></div></div><p class="calibre7">In the previous <a id="id383" class="calibre1"/>recipe we learned how to add a new code into an existing Objective-C project, however, you shouldn't only add new code but also, as far as possible, you should migrate your old code to the new Swift language.</p><p class="calibre7">If you would like to keep your application core on Objective-C, that's OK, but remember that new features are going to be added to Swift and it will be difficult keeping two languages on the same project.</p><p class="calibre7">In this recipe we are going to port part of the code, which is written in Objective-C to Swift.</p></div>

<div class="book" title="Porting your code from one language to another" id="25JP21-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec207" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">Make a copy of the previous recipe. If you are using any version control it's a good time for committing your changes. If you are not using a version control system, check <a class="calibre1" title="Chapter 1. Getting Started with Xcode and Swift" href="part0014_split_000.html#DB7S1-bba3081a9dc049b7aa5e4f7cc42ef8bb">Chapter 1</a>, <span class="strong"><em class="calibre9">Getting Started with Xcode and Swift</em></span>, to see how to add it to your project.</p></div></div>

<div class="book" title="Porting your code from one language to another" id="25JP21-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec208" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open the project and add a new file called <code class="email">Setup.swift</code>, here we are going to add a new class with the same name (Setup):<div class="informalexample"><pre class="programlisting">class Setup {
    class func generate() -&gt; [Car]{
        var result = [Car]()
        for distance in [1.2, 0.5, 5.0] {
            var car = Car()
            car.distance = Float(distance)
            result.append(car)
        }
        var car = Car()
        car.distance = 4
        var van = Van()
        van.distance = 3.8
        result += [car, van]
        return result
    }
}</pre></div></li><li class="listitem" value="2">Now that we have this car array generator we can call it on the <code class="email">viewDidLoad</code> method replacing the previous code:<div class="informalexample"><pre class="programlisting">- (void)viewDidLoad {
    [super viewDidLoad];
    <span class="strong"><strong class="calibre8">vehicles = [Setup generate];</strong></span>
    [self-&gt;tableView reloadData];
}</pre></div></li><li class="listitem" value="3">Again, press play and check that the application is still working.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Porting your code from one language to another" id="25JP21-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec209" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre7">The reason we <a id="id384" class="calibre1"/>had to create a class instead of creating a function is that you can only export to Objective-C classes, protocols, properties, and subscripts. Bear that in mind in case of developing with the two languages.</p><p class="calibre7">If you would like to export a class to Objective-C you have two choices. The first one is inheriting from <code class="email">NSObject</code> and the other one is adding the <code class="email">@objc</code> attribute before your class, protocol, property, or subscript.</p><p class="calibre7">If you paid attention, our method returns a Swift array converted to an NSArray, but as you might know, they are different kinds of array. Firstly because Swift arrays are mutable and NSArrays are not, and the other reason is that their methods are different.</p><p class="calibre7">Can we use NSArray in Swift? The answer is yes, but I would recommend avoiding it; imagine once finished migrating to Swift your code still follows the old way, it would be another migration.</p></div></div>

<div class="book" title="Porting your code from one language to another" id="25JP21-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch08lvl2sec210" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">Migrating from Objective-C is something that you should do with care. Don't try to change the whole application at once, remember that some Swift objects behave differently from Objective-C, for example, dictionaries in Swift have the key and the value types specified, but in Objective-C they can be of any type.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Replacing the user interface classes"><div class="book" id="26I9K2-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec68" class="calibre1"/>Replacing the user interface classes</h1></div></div></div><p class="calibre7">At this moment <a id="id385" class="calibre1"/>you know how to migrate the model part of an application, however in real life we also have to replace the graphical classes. Doing it is not complicated but it could be a bit full of details.</p></div>

<div class="book" title="Replacing the user interface classes">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec211" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">Continuing with the previous recipe, make a copy of it or just commit the changes you have and let's continue with our migration.</p></div></div>

<div class="book" title="Replacing the user interface classes">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec212" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">First create a new file called <code class="email">MainViewController.swift</code> and start importing the UIKit:<div class="informalexample"><pre class="programlisting">import UIKit</pre></div></li><li class="listitem" value="2">The next step is creating a class called <code class="email">MainViewController</code>. This class must inherit from <code class="email">UIViewController</code> and implement the protocols <code class="email">UITableViewDataSource</code> and <code class="email">UITableViewDelegate</code>:<div class="informalexample"><pre class="programlisting">class MainViewController:UIViewController,UITableViewDataSource, UITableViewDelegate {</pre></div></li><li class="listitem" value="3">Then, add the attributes we had in the previous view controller, keeping the same name you used before:<div class="informalexample"><pre class="programlisting">    private var vehicles = [Car]()
    @IBOutlet var tableView:UITableView!</pre></div></li><li class="listitem" value="4">Next, we need to implement the methods; let's start with the table view data source methods:<div class="informalexample"><pre class="programlisting">    func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int{
        return vehicles.count
    }
    
    func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell{
        var cell:UITableViewCell? = self.tableView.dequeueReusableCellWithIdentifier("vehiclecell")
        if cell == nil {
            cell = UITableViewCell(style: .Subtitle, reuseIdentifier: "vehiclecell")
        }
        var currentCar = self.vehicles[indexPath.row]
        cell!.textLabel?.numberOfLines = 1
        cell!.textLabel?.text = "Distance \(currentCar.distance * 1000) meters"
        var detailText = "Pax: \(currentCar.pax) Fare: \(currentCar.fare)"
        if  currentCar is Van{
            detailText += ", Volume: \( (currentCar as Van).capacity)"
        }
        cell!.detailTextLabel?.text = detailText
        cell!.imageView?.image = currentCar.image
        return cell!
    }</pre></div><p class="calibre15">Notice that this conversion is not 100% equivalent. The fare, for example, isn't going to be shown with two digits of precision. There is an explanation later for why we are not going to fix this now.</p></li><li class="listitem" value="5">The next step is <a id="id386" class="calibre1"/>adding the event; in this case we have to do the action when the user selects a car:<div class="informalexample"><pre class="programlisting">    func tableView(tableView: UITableView, willSelectRowAtIndexPath indexPath: NSIndexPath) -&gt; NSIndexPath? {
        var currentCar = self.vehicles[indexPath.row]
        var time = currentCar.distance / 50.0 * 60.0
        UIAlertView(title: "Car booked", message: "The car will arrive in \(time) minutes", delegate: nil, cancelButtonTitle: "OK").show()
        return indexPath
    }</pre></div><p class="calibre15">As you can see, we need only do one more step to complete our code. In this case it's the view <code class="email">didLoad</code>. Notice that another difference from Objective-C and Swift is that in Swift you have to specify that you are overloading an existing method:</p><div class="informalexample"><pre class="programlisting">    override func viewDidLoad() {
        super.viewDidLoad()
        vehicles = Setup.generate()
        self.tableView.reloadData()
    }
} // end of class</pre></div></li><li class="listitem" value="6">Our code is complete, but of course our application is still using the old code. To complete this operation, click on the storyboard; if the document outline isn't being displayed, click on the <span class="strong"><strong class="calibre8">Editor</strong></span> menu and then on <span class="strong"><strong class="calibre8">Show Document Outline</strong></span>:<div class="mediaobject"><img src="../images/00105.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">Now that you can <a id="id387" class="calibre1"/>see the document outline, click on <span class="strong"><strong class="calibre8">View Controller</strong></span> that appears next to a yellow circle with a square inside:<div class="mediaobject"><img src="../images/00106.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="8">Then on the right-hand side, click on the identity inspector, go to the custom class, and change the value of the class from <span class="strong"><strong class="calibre8">ViewController</strong></span> to <span class="strong"><strong class="calibre8">MainViewController</strong></span>:<div class="mediaobject"><img src="../images/00107.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="9">After that, press play and check that your application is running, select a car, and check that it is working. Be sure that it is working with your new Swift class by paying <a id="id388" class="calibre1"/>attention to the fare value, which in this case isn't shown with two digits of precision.<div class="mediaobject"><img src="../images/00108.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="10">Is everything done? I would say no, it's a good time to save your changes. Lastly, delete the original Objective-C files, because you won't need them anymore.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Replacing the user interface classes">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec213" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre7">As you can see, it's not so hard replacing an old view controller with a Swift one; the first thing you need to do is create a new view controller class with its protocols. Keep the same names you had on your old code for attributes and methods that are linked as <code class="email">IBActions</code>, it will make the switch very straightforward; otherwise you will have to link again.</p><p class="calibre7">Bear in mind that you need to be sure that your changes are applied and that they are working, but sometimes it is a good idea to have something different, otherwise your application can be using the old Objective-C and you didn't realize it.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip43" class="calibre1"/>Tip</h3><p class="calibre7">Try to modernize your code using the Swift way instead of the old Objective-C style, for example, nowadays it's preferable to use interpolation rather than using <code class="email">stringWithFormat</code>.</p></div><p class="calibre7">We also learned that you don't need to relink any action or outlet if you keep the same name. If you want to change the name of anything you might first keep its original name, test your app, and after <a id="id389" class="calibre1"/>that you can refactor it following the traditional factoring steps.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip44" class="calibre1"/>Tip</h3><p class="calibre7">Don't delete the original Objective-C files until you are sure that the equivalent Swift file is working on every functionality.</p></div></div></div>

<div class="book" title="Replacing the user interface classes">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch08lvl2sec214" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">This application had only one view controller, however applications usually have more than one view controller. In this case, the best way you can update them is one by one instead of all of them at the same time.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Upgrading the app delegate" id="27GQ61-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec69" class="calibre1"/>Upgrading the app delegate</h1></div></div></div><p class="calibre7">As you know, there is an <a id="id390" class="calibre1"/>object that controls the events of an application, which is called application delegate. Usually you shouldn't have much code here, but a few of them you might have. For example, you may deactivate the camera or the GPS requests when your application goes to the background, and reactivate them when the app returns to active.</p><p class="calibre7">Certainly it is a good idea to update this file even if you don't have any new code on it, so it won't be a problem in the future.</p></div>

<div class="book" title="Upgrading the app delegate" id="27GQ61-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec215" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">If you are using the version control system, commit your changes from the last recipe or, if you prefer, just copy your application.</p></div></div>

<div class="book" title="Upgrading the app delegate" id="27GQ61-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec216" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open the previous application recipe and create a new Swift file called <code class="email">ApplicationDelegate.swift</code>, then create a class with the same name.</li><li class="listitem" value="2">As in our previous class, we don't have any code on the application delegate, so we can <a id="id391" class="calibre1"/>differentiate it by printing on the log console. Add this traditional application delegate on your Swift file:<div class="informalexample"><pre class="programlisting">class ApplicationDelegate: UIResponder, UIApplicationDelegate {
    var window: UIWindow?
    
    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
        print("didFinishLaunchingWithOptions")
        return true
    }
    
    func applicationWillResignActive(application: UIApplication) {
        print("applicationWillResignActive")
    }
    
    func applicationDidEnterBackground(application: UIApplication) {
        print("applicationDidEnterBackground")
    }
    
    func applicationWillEnterForeground(application: UIApplication) {
        print("applicationWillEnterForeground")
    }
    
    func applicationDidBecomeActive(application: UIApplication) {
        print("applicationDidBecomeActive")
    }
    
    func applicationWillTerminate(application: UIApplication) {
        print("applicationWillTerminate")
    }
}</pre></div></li><li class="listitem" value="3">Now go to your project navigator and expand the <span class="strong"><strong class="calibre8">Supporting Files</strong></span> group. After that, click on the <code class="email">main.m</code> file:<div class="mediaobject"><img src="../images/00109.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="4">In this file we are <a id="id392" class="calibre1"/>going to import the magic file, the Swift header file:<div class="informalexample"><pre class="programlisting">#import "Chapter_8_Vehicles-Swift.h"</pre></div></li><li class="listitem" value="5">After that we have to specify that the application delegate is the new class we have, so replace the <code class="email">AppDelegate</code> class on the <code class="email">UIApplicationMain</code> call with <code class="email">ApplicationDelegate</code>. Your main function should be like this:<div class="informalexample"><pre class="programlisting">int main(int argc, char * argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([ApplicationDelegate class]));
    }
}</pre></div></li><li class="listitem" value="6">It's time to press play and check whether the application is working or not. Press the home button, or the combination <span class="strong"><em class="calibre9">shift</em></span> + <span class="strong"><em class="calibre9">command</em></span> + <span class="strong"><em class="calibre9">H</em></span> if you are using the simulator, and again open your application. Check that you have some messages on your log console:<div class="mediaobject"><img src="../images/00110.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="7">Now that you are sure that your Swift code is working, remove the original app delegate and its importation on the <code class="email">main.m</code>. Test your app just in case.</li><li class="listitem" value="8">You could consider that we had finished this part, but actually we still have another step to do: removing the <code class="email">main.m</code> file. Now, it is very easy: just click on the <code class="email">ApplicationDelegate.swift</code> file, and before the class declaration, add the attribute <code class="email">@UIApplicationMain</code>, then right click on the <code class="email">main.h</code> and choose to delete <a id="id393" class="calibre1"/>it. Test it and your application is done.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Upgrading the app delegate" id="27GQ61-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec217" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre7">The application delegate class has always been specified at the start of an application. In Objective-C, it follows the C start point, which is a function called <code class="email">main</code>. In iOS, you can specify the class that you want to use as an application delegate.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note34" class="calibre1"/>Note</h3><p class="calibre7">If you program for OS X, the procedure is different; you have to go to your <code class="email">nib</code> file and change its class name to the new one.</p></div><p class="calibre7">Why did we have to change the main function and then eliminate it? The reason is that you should avoid massive changes. If something goes wrong you won't know the step where you failed, so you will probably have to rollback everything again. If you do your migration step by step ensuring that it is still working, it means that in case of finding an error, it will be easier to solve it.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip45" class="calibre1"/>Tip</h3><p class="calibre7">Avoid making massive changes on your project; changing step by step will be easier to solve issues.</p></div></div></div>

<div class="book" title="Upgrading the app delegate" id="27GQ61-bba3081a9dc049b7aa5e4f7cc42ef8bb">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch08lvl2sec218" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre7">In this recipe, we learned the last steps of how to migrate an app from Objective-C to Swift code, however we have to remember that programming is not only about applications; you can also have a framework. In the next recipe, we are going to learn how to create our own framework compatible with Swift and Objective-C.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating your own custom framework"><div class="book" id="28FAO2-bba3081a9dc049b7aa5e4f7cc42ef8bb"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch08lvl1sec70" class="calibre1"/>Creating your own custom framework</h1></div></div></div><p class="calibre7">As you know, sometimes we have code that is to be shared between applications, and the best way to do <a id="id394" class="calibre1"/>this is by creating a framework. In this case we are going to create a framework that should contain a customized view.</p><p class="calibre7">For this recipe, we are going to add only one view. This view will be painted with a gradient; this way you can change your application's background easily.</p></div>

<div class="book" title="Creating your own custom framework">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec219" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre7">Create a new project called <code class="email">CustomViewsFramework</code>. To do it click on <span class="strong"><strong class="calibre8">File</strong></span> | <span class="strong"><strong class="calibre8">New</strong></span> | <span class="strong"><strong class="calibre8">Project</strong></span> and then <a id="id395" class="calibre1"/>choose the section <span class="strong"><strong class="calibre8">Framework and Library</strong></span>; after that choose the option <span class="strong"><strong class="calibre8">Cocoa Touch Framework</strong></span>:</p><div class="mediaobject"><img src="../images/00111.jpeg" alt="Getting ready" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre7">Select <span class="strong"><strong class="calibre8">Swift</strong></span> as the project language.</p></div></div>

<div class="book" title="Creating your own custom framework">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec220" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Start adding a new file to your project, in this case you can choose from the <span class="strong"><strong class="calibre8">Source</strong></span> section, the option <span class="strong"><strong class="calibre8">Cocoa Touch Class</strong></span>:<div class="mediaobject"><img src="../images/00112.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="2">After that you have <a id="id396" class="calibre1"/>to write the new class name; let's call it <code class="email">CVGradientView</code>. Also, make sure that is selected to be a subclass of <code class="email">UIView</code> and its language is Swift:<div class="mediaobject"><img src="../images/00113.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="3">Once the file is created and opened you can remove the comments that come by default, then you <a id="id397" class="calibre1"/>have to add the attribute <code class="email">@IBDesignable</code> before the class declaration:<div class="informalexample"><pre class="programlisting">@IBDesignable public class CVGradientView: UIView {</pre></div></li><li class="listitem" value="4">Now we need to add some attributes; in this case we will use properties with an observer that will refresh the gradient view every time a property is changed:<div class="informalexample"><pre class="programlisting">    @IBInspectable public var color1: UIColor = UIColor.redColor() {
        didSet{
            refresh()
        }
    }
    @IBInspectable public var color2: UIColor = UIColor.blackColor(){
        didSet{
            refresh()
        }
    }
    @IBInspectable public var roundCorners: CGFloat = 1.0 {
        didSet{
            refresh()
        }
    }
    @IBInspectable public var horizontal: Bool = false {
        didSet{
            refresh()
        }
    }</pre></div></li><li class="listitem" value="5">As you noticed, we <a id="id398" class="calibre1"/>have to implement the <code class="email">refresh()</code> method:<div class="informalexample"><pre class="programlisting">    private func refresh(){
        let colors:Array = [color1.CGColor, color2.CGColor]
        gradientLayer.colors = colors
        gradientLayer.cornerRadius = roundCorners
        if (horizontal){
            gradientLayer.endPoint = CGPoint(x: 1, y: 0)
        }else{
            gradientLayer.endPoint = CGPoint(x: 0, y: 1)
        }
        self.setNeedsDisplay()
    }</pre></div></li><li class="listitem" value="6">Then, we need to specify some information about the gradient layer; this information is done following the core animation framework:<div class="informalexample"><pre class="programlisting">    var gradientLayer: CAGradientLayer {
        return layer as CAGradientLayer
    }  
    override public class func layerClass()-&gt;AnyClass{
        return CAGradientLayer.self
    }</pre></div></li><li class="listitem" value="7">Now, we need the last part of this method, that is, the initializer:<div class="informalexample"><pre class="programlisting">    override init(frame: CGRect) {
        super.init(frame: frame)
        refresh()
    }
    
    required public init(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        refresh()
    }
}</pre></div></li><li class="listitem" value="8">Once it is done, we need to identify our module by going to our target build settings and searching for the word <code class="email">module</code>. Now, change the <span class="strong"><strong class="calibre8">Module Identifier</strong></span> to <span class="strong"><strong class="calibre8">CustomViewsFrameWork</strong></span>:<div class="mediaobject"><img src="../images/00114.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="9">The class is complete, so generate the project with <span class="strong"><em class="calibre9"></em></span> + <span class="strong"><em class="calibre9">b</em></span>. Now, we need to check that it is <a id="id399" class="calibre1"/>working, so let's create another project called <code class="email">Chapter 8 Testing Views</code>. Once it is created, click on the project navigator, then click on the target <code class="email">Chapter 8 Testing Views</code>.</li><li class="listitem" value="10">Here you have to select the <span class="strong"><strong class="calibre8">Build Settings</strong></span> tab and change the field <span class="strong"><strong class="calibre8">Embedded Content Contains Swift Code</strong></span> to <span class="strong"><strong class="calibre8">Yes</strong></span>:<div class="mediaobject"><img src="../images/00115.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="11">Next, select the <span class="strong"><strong class="calibre8">General</strong></span> tab and go to the <span class="strong"><strong class="calibre8">Embedded Binaries</strong></span> section, click on the plus button, and when a dialog appears just click on the button with the phrase <span class="strong"><strong class="calibre8">Add other…</strong></span>. Here, it is asking for your framework, so go to the build product of your framework (it should be inside a folder called <code class="email">DerivedData/CustomsViewsFramework/Build/Products/Debug-iphonesimulator/</code>), select it (the file called <code class="email">CustomsViewsFramework.framework</code>), and press <span class="strong"><strong class="calibre8">OK</strong></span>. Check that the linked frameworks sections will also show it:<div class="mediaobject"><img src="../images/00116.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="12">Now that your app knows about this framework, you can click on the storyboard, then click on the only view you have (not on the view controller), go to the identity <a id="id400" class="calibre1"/>inspector, and change the <span class="strong"><strong class="calibre8">Class</strong></span> name field to <span class="strong"><strong class="calibre8">CVGradientView</strong></span> and its <span class="strong"><strong class="calibre8">Module</strong></span> name to <span class="strong"><strong class="calibre8">CustomViewsFramework</strong></span>:<div class="mediaobject"><img src="../images/00117.jpeg" alt="How to do it…" class="calibre10"/></div><p class="calibre14"> </p></li><li class="listitem" value="13">Press play and check that your background has changed. If you want you can even change your background programmatically; just click on the view controller file and start importing your framework:<div class="informalexample"><pre class="programlisting">import CustomViewsFramework</pre></div></li><li class="listitem" value="14">After that, change, for example, the background colors on the view did load:<div class="informalexample"><pre class="programlisting">    override func viewDidLoad() {
        super.viewDidLoad()
        (self.view as CVGradientView).color1 = UIColor.blueColor()
        (self.view as CVGradientView).color2 = UIColor.purpleColor()
    }</pre></div></li><li class="listitem" value="15">Press play again and see that your background is different.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Creating your own custom framework">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec221" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre7">The reason we named this project differently than the others is that frameworks can't have white spaces in their names. In the case of creating a project with white spaces in its name, you have to go to build <a id="id401" class="calibre1"/>settings and change the product name to something without white spaces.</p><p class="calibre7">The attribute <code class="email">@IBDesignable</code> lets interface builder know that it should render the view directly in the canvas, but remember that this attribute can only be used if you are developing a framework; it won't work on traditional applications.</p><p class="calibre7">The other attribute (<code class="email">@IBInspectable</code>) means that this property can be viewed and set by interface builder.</p><p class="calibre7">Notice that we had to mark our class and some attribute and methods as public. The reason is that we want them to be accessed by external modules. If we don't do this, it means that only our framework can access this class.</p></div></div></body></html>