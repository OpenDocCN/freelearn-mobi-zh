<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Exploring Various Frameworks"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Exploring Various Frameworks</h1></div></div></div><p>A framework is a collection of resources. It collects a static library and its header files into a single structure that Xcode can easily include into our projects. A framework is a dynamic library. In iOS, there are two kinds of frameworks: public frameworks and private frameworks. From iOS 3.1, all private and public libraries are combined into a big cache file. There are a lot of frameworks provided by Apple for different functionalities. The extension of the framework is <code class="literal">.framework</code>. For every unique feature, a framework is defined—for example, for using maps a <code class="literal">MapKit</code> framework is available, and for location, a <code class="literal">CoreLocation</code> framework is available. Various frameworks are present at the <code class="literal">&lt;Xcode.app&gt;Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/&lt;iOS_SDK&gt;/System/Library/Frameworks</code> directory, where <code class="literal">Xcode.app</code> is our application path (where we saved our app).</p><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Framework descriptions in a tabular form</li><li class="listitem" style="list-style-type: disc">Databases in iOS</li><li class="listitem" style="list-style-type: disc">Social integration</li><li class="listitem" style="list-style-type: disc">Activities to understand every topic in a better way</li></ul></div><p>Generally, frameworks are bundles that contain a linkable library (<code class="literal">.dylib</code>) and associated resources and headers for development. Each framework contains sample code and other resources associated with it. There are a number of frameworks provided by Apple. Frameworks are listed in the following table with their descriptions:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Name</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Accelerate.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id100"/>framework handles the math, DSP, large numbers, and image processing.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Accounts.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id101"/>framework provides access to accounts in the <code class="literal">Accounts</code> database. It allows creation of accounts if none exist.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AddressBook.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id102"/>framework provides access to the <code class="literal">AddressBook</code> database.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AddressBookUI.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id103"/>framework contains classes for displaying the system-defined people Picker and editor interfaces.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AdSupport.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id104"/>framework provides access to the identifiers to serve adverts and a flag that indicates if limited tracking is on.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AssetsLibrary.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id105"/>framework gives access to user photos and videos.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AudioToolbox.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id106"/>framework provides an interface for recording, playing, and audio streaming.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AudioUnit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id107"/>framework is used to load audio units and their uses.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">AVFoundation.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id108"/>framework is used for playing and recording audio and video.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CFNetwork.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id109"/>framework is used to access networks through Wi-Fi or cellular networks.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreAudio.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id110"/>framework provides the datatypes used for Core Audio.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreBluetooth.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id111"/>framework provides access to Bluetooth (hardware).</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreData.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id112"/>framework contains the interface for application data model.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreFoundation.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id113"/>framework provides software services and basic management of data.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreGraphics.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id114"/>framework contains the API for the Quartz engine and gives a 2D view.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreImage.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id115"/>framework is the interface used to manipulate images and video.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreLocation.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id116"/>framework is the interface used to determine the user's location.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreMedia.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id117"/>framework includes the low-level routines for manipulating audio and video.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreMIDI.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id118"/>framework includes the low-level routines for handling MIDI data.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreMotion.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id119"/>framework is the interface to access accelerometer and gyrometric data.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreTelephony.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id120"/>framework allows access to Carrier information and information related to the current call.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreText.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id121"/>framework contains a text layout and rendering engine.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">CoreVideo.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id122"/>framework includes low-level routines for using audio and video. It is advised to not use it directly.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">EventKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id123"/>framework interface is used to access the calendar and events.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">EventKitUI.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id124"/>framework contains classes for displaying the calendar's interface.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">ExternalAccessory.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id125"/>framework is an interface used to communicate with the attached hardware.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Foundation.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id126"/>framework contains the interface for managing Strings, Arrays, collections, and low-level datatypes.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">GameController.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id127"/>framework is the interface to communicate with game-related hardware.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">GameKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id128"/>framework is used for peer-to-peer connection and to create social games.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">GLKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id129"/>framework is used for building the OpenGL ES application.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">GSS.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id130"/>framework provides security-related services.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">iAd.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id131"/>framework is used to display advertisements.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">ImageIO.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id132"/>framework contains classes to read and write image data.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">IOKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id133"/>framework is a low-level framework and is used to communicate with the kernel and the hardware.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">JavaScriptCore</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id134"/>framework contains files for evaluating JavaScript code and parsing JSON.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MapKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id135"/>framework is used for embedding a map in our application and to use reverse geocoding.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MediaAccessibility.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id136"/>framework was defined in iOS 7. It manages the presentation of closed-caption content in media files.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MediaPlayer.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id137"/>framework contains the interface for playing a video in full screen mode.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MediaToolbox.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id138"/>framework contains the interface for playing audio content.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MessageUI.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>The <a class="indexterm" id="id139"/>framework contains the interface for composing e-mails.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MobileCoreServices.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id140"/>framework defines UTIs supported by the system.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">MultipeerConnectivity.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id141"/>framework was introduced in iOS 7. It is responsible for implementing peer-to-peer networking between devices.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">NewsstandKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id142"/>framework provides the interface for downloading magazines and newspapers in the background.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OpenAL.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id143"/>framework contains the interface for the cross-platform audio library.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">OpenGLES.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id144"/>framework provides the interface for the OpenGL ES library and contains classes that are used for 2D and 3D graphics.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">PassKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id145"/>framework contains interfaces for creating digital passes to replace things such as tickets, membership cards, and so on.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">QuickLook.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id146"/>provides the interface for previewing a file.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SafariServices.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id147"/>framework was introduced in iOS 7. It supports the creation of reading list items in Safari.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Security.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id148"/>framework provides the interface for managing keys, trust policies, and certificates.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Social.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id149"/>framework contains the interface to communicate or integrate social network services.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SpriteKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id150"/>framework was introduced in iOS 7. It facilitates the creation of sprite-based animations.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">StoreKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id151"/>framework is responsible for handling financial transactions associated with the app.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">SystemConfiguration.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id152"/>framework contains the interfaces for determining whether the network is available or not.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Twitter.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id153"/>framework contains the interface for sending tweets.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">UIKit.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id154"/>framework contains the classes for iOS UI components and for the user interface layer of applications.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">VideoToolbox.framework</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id155"/>framework contains the interfaces used by the device. It is advised to not use it directly.</p>
</td></tr></tbody></table></div><p>These are the various frameworks provided by Apple and we can use them as needed.</p><div class="section" title="Exploring various UI components with libraries"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec19"/>Exploring various UI components with libraries</h1></div></div></div><p>You've already <a class="indexterm" id="id156"/>learned about UI in the previous chapter. Now we can start by exploring some UI components and the frameworks. We will make a simple <code class="literal">Student Registration</code> app by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First of all, create a new single view project in Xcode.</li><li class="listitem">Now, go to <a class="indexterm" id="id157"/>storyboard and navigate to <span class="strong"><strong>Editor</strong></span> | <span class="strong"><strong>Embed In</strong></span> | <span class="strong"><strong>Navigation Controller</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_01.jpg"/></div></li><li class="listitem">Now your <a class="indexterm" id="id158"/>storyboard looks like this:<div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_02.jpg"/></div></li><li class="listitem">Select the navigation bar of the second view by clicking on it and rename it to <code class="literal">Student Registration</code>.</li><li class="listitem">Add one button to the view (name it <code class="literal">Add Student</code>) and set the color of the button text and background of the button from the Inspector panel on the right-hand side.</li><li class="listitem">Search for a new <a class="indexterm" id="id159"/>view controller in the interface builder and drag it beside the second view.</li><li class="listitem">For a new view <a class="indexterm" id="id160"/>controller, we need to add new class files. Go to <span class="strong"><strong>File</strong></span> at the top of Xcode and then navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>File...</strong></span>.</li><li class="listitem">Now, create a new <span class="strong"><strong>Objective-C class</strong></span> file and give a suitable name to the class (for example, <code class="literal">StudentRegistration</code>), as shown in the following screenshot:<div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_03.jpg"/></div></li><li class="listitem">Go to the storyboard, select our third view, and give it a name that is similar to our new Objective-C class from the inspector element.</li><li class="listitem">Right-click on the button, select the <span class="strong"><strong>Action</strong></span> option, drag to the new view (the third view), and select <span class="strong"><strong>Push</strong></span>.</li><li class="listitem">Now, drag four text fields in the third view as shown in the following screenshot. Select <a class="indexterm" id="id161"/>one text field and go to the inspector panel where you will find an option <span class="strong"><strong>Placeholder</strong></span>. Here, enter text for all the text fields.</li><li class="listitem">Find the bar <a class="indexterm" id="id162"/>button from the interface builder and drag it to the bar of the third view and name it (for example, <code class="literal">Save</code>).</li></ol></div><p>By following the preceding steps, our storyboard will look like this:</p><div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_04.jpg"/></div><p>Here is our simple UI, but this time we need to stretch our UI component. We can change the color of our navigation bar for better visibility. To change our navigation bar color, we need to apply the following <a class="indexterm" id="id163"/>code. We can insert the <a class="indexterm" id="id164"/>following code in the <code class="literal">didFinishLaunchingWithOptions:</code> method of <code class="literal">AppDelegate.m</code>:</p><div class="informalexample"><pre class="programlisting">[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:YES];
  // Change navigation bar color
  [[UINavigationBar appearance] setBarTintColor:[UIColor colorWithRed:41.0f/255.0f green:128.0f/255.0f blue:185.0f/255.0f alpha:1.0f]];
    
  [[UINavigationBar appearance] setTintColor:[UIColor whiteColor]];
    
    
  // Change font of navigation bar
  [[UINavigationBar appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor],NSForegroundColorAttributeName, nil]];</pre></div><p>Now, we need some changes in our <code class="literal">StudentRegistration-Info.plist</code> file. Make the changes according to the following screenshot:</p><div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_05.jpg"/></div><p>After running our <a class="indexterm" id="id165"/>project, the output will look like this:</p><div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_06.jpg"/></div><p>Now, tap on <a class="indexterm" id="id166"/>the <span class="strong"><strong>+ Add Student</strong></span> button; it will push our app <a class="indexterm" id="id167"/>to another view and our screen will look like this:</p><div class="mediaobject"><img alt="Exploring various UI components with libraries" src="graphics/1829OT_03_07.jpg"/></div></div></div>
<div class="section" title="Database integration"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec20"/>Database integration</h1></div></div></div><p>Databases are a way to <a class="indexterm" id="id168"/>save our data in computer memory. A database is a set of data held in computers, and can be accessible in many ways. In iOS, there is mainly only one type of database: <span class="strong"><strong>SQLite</strong></span>.</p><div class="section" title="SQLite"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec22"/>SQLite</h2></div></div></div><p>SQLite is an <a class="indexterm" id="id169"/>embedded implementation of SQL. SQLite is an in-process library that implements a self-contained, zero-configuration, server-less, and <a class="indexterm" id="id170"/>transactional SQL database engine. The source code for SQLite exists in the public domain and is free for both private and commercial purposes. SQLite is available for several programming languages such as C, C++, Java, and so on. It is also available in several operating systems such as iOS, Android, Symbian, Blackberry, and so on. SQLite is used for handling data files or creating data files in iOS. It can be easily performed by using SQL queries. SQLite works on the principle of RDBMS in which data is stored in a table and the relationship is also stored inside the table.</p><p>So we can use SQLite in <a class="indexterm" id="id171"/>our project, a library and a framework are provided by Apple: <code class="literal">ibsqlite3.dylib</code> and <code class="literal">sqlite3.h</code> respectively. There are several functions of SQLite. The important functions are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">sqlite3_open()</code>: This <a class="indexterm" id="id172"/>function creates and opens an empty <a class="indexterm" id="id173"/>database. If the database already <a class="indexterm" id="id174"/>exists, it will only open the database.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sqlite3_close()</code>: This <a class="indexterm" id="id175"/>function is used to close an <a class="indexterm" id="id176"/>opened SQLite database connection. It will free all the resources associated with the database connection.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sqlite3_prepare_v2()</code>: This <a class="indexterm" id="id177"/>function is <a class="indexterm" id="id178"/>needed to compile the SQL statement into byte code. It basically transforms a SQL statement in to an executable piece of code.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sqlite3_step()</code>: This <a class="indexterm" id="id179"/>function will call a previously <a class="indexterm" id="id180"/>prepared SQL statement.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sqlite3_finalize()</code>: This <a class="indexterm" id="id181"/>function <a class="indexterm" id="id182"/>deletes a previously prepared SQL statement from memory.</li><li class="listitem" style="list-style-type: disc"><code class="literal">sqlite3_exec()</code>: This <a class="indexterm" id="id183"/>combines the functionality of <code class="literal">sqlite3_prepare_v2()</code>, <code class="literal">sqlite3_step()</code>, and <code class="literal">sqlite3_finalize()</code> <a class="indexterm" id="id184"/>into a single function call.</li></ul></div><p>Let's carry out a small activity to understand SQLite in a better way. We will extend the previous app. Open that app and proceed with the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Go to <span class="strong"><strong>Project Settings</strong></span> | <span class="strong"><strong>General</strong></span>. Now, scroll down and click on <span class="strong"><strong>+</strong></span> to add framework. Search for SQLite framework and click on <span class="strong"><strong>Add</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="SQLite" src="graphics/1829OT_03_08.jpg"/></div></li><li class="listitem">Import the following header file for SQLite in the new class that we added in the previous steps:<div class="informalexample"><pre class="programlisting">#import &lt;sqlite3.h&gt;</pre></div></li><li class="listitem">Now, make an object for SQLite in the interface part as follows:<div class="informalexample"><pre class="programlisting">sqlite3 *_database;</pre></div></li><li class="listitem">Now, link all the text fields and the <span class="strong"><strong>Save</strong></span> button to the <code class="literal">.h</code> file of the newly added class file.</li><li class="listitem">Now, go to the <code class="literal">Save</code> <a class="indexterm" id="id185"/>method in the <code class="literal">.m</code> file and write the <a class="indexterm" id="id186"/>following code for SQLite integration:<div class="informalexample"><pre class="programlisting">- (IBAction)Save:(id)sender {
  
  NSArray *paths= NSSearchPathForDirectoriesInDomains(NSDocumentDirectory NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString *databasePath =[documentsDirectory stringByAppendingPathComponent:@"mydbs.sqlite"];
    
    // Check to see if the database file already exists
  bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];
    
    // Open the database and store the handle as a data member
  if (sqlite3_open([databasePath UTF8String], &amp; _database) == SQLITE_OK)
  {
    // Create the database if it doesn't yet exists in the filesystem
    if (!databaseAlreadyExists)
      {
        // Create the SIGNUP table
        const char *sqlStatement = "CREATE TABLE IF NOT EXISTS REGISTRATION (NAME TEXT, FATHERNAME TEXT, ADDRESS TEXT, CONTACT TEXT)";
        char *error;
        
        if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL,    &amp;error) == SQLITE_OK)
          {
            NSLog(@"Database and tables created.");
          }
        else
          {
            NSLog(@"Error: %s", error);
          }
        
        
      }
      
      //-----------SAVING DB-----------
      
      // Create insert statement for the person
    NSString *insertStatement = [NSString stringWithFormat:@"INSERT INTO REGISTRATION (NAME, FATHERNAME, ADDRESS, CONTACT) VALUES (\"%@\", \"%@\", \"%@\", \"%@\")", Name.text,Fathername.text,Address.text,Contact.text];
      
    char *error;
    if ( sqlite3_exec(databaseHandle, [insertStatement UTF8String], NULL, NULL, &amp;error) == SQLITE_OK)
      {
        NSLog(@"Database SAVED.");
      }
    else
      {
        NSLog(@"Error: %s", error);
      }
      
    sqlite3_close(databaseHandle);
  }
  Name.text=@"";
  Fathername.text=@"";
  Address.text=@"";
  Contact.text=@"";
  
}</pre></div></li><li class="listitem">Compile and run your app, insert text in all the text fields, and click on <span class="strong"><strong>Save</strong></span>, as shown in the following <a class="indexterm" id="id187"/>screenshot. In the console, the <a class="indexterm" id="id188"/>output will be <span class="strong"><strong>Database SAVED</strong></span>.<div class="mediaobject"><img alt="SQLite" src="graphics/1829OT_03_09.jpg"/></div></li><li class="listitem">Clicking on the <span class="strong"><strong>Save</strong></span> button will clear all our text fields (as shown in the following screenshot) and save our inputs to the database:<div class="mediaobject"><img alt="SQLite" src="graphics/1829OT_03_10.jpg"/></div></li></ol></div><p>This is all there is to integrating a <a class="indexterm" id="id189"/>SQLite database with our <a class="indexterm" id="id190"/>App.</p></div><div class="section" title="Core Data"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec23"/>Core Data</h2></div></div></div><p>It's used in thousands of applications and by millions of people, both on iOS and OS X. Core Data is maintained by Apple and is very well documented. It's a mature framework. Core Data takes advantage of the Objective-C language and its runtime, and easily integrates with the Core <a class="indexterm" id="id191"/>Foundation framework. The result is an easy-to-use framework for managing an object graph that is easy to use and is very efficient in terms of memory usage. Core Data is a powerful framework provided by Apple to include data in applications. It is even more preferable because it doesn't use processes and can easily maintain the relation between data.</p><p>Apple defines a framework for Core Data known as <code class="literal">CoreData.framework</code>. Before using Core Data in our app, we need to add this framework in our project. Core Data is itself not a database of our application; it is a framework that manages an object graph. With Core Data, we can easily trace the objects in our apps to the table records in the database without firing any SQL query. In Core Data, we need to add three different instances to deal with the database, which are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Persistent store coordinator</strong></span>: As the name suggests, it is a coordinator that coordinates <a class="indexterm" id="id192"/>between managing object contexts and low-level files saved in our database (SQLite file). We cannot use it directly; it will only be used while setting up <code class="literal">NSManageObjectContext</code>. Creating linkage for persistent store coordinates automatically creates linkage for SQLite files.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Managed object context</strong></span>: We can think of it as a scratch pad (a small, fast memory <a class="indexterm" id="id193"/>for the temporary storage of data). When we fetch objects from a persistent store, we get temporary copies into the scratch pad. Then we can use and modify those objects however we like without saving those data; the persistence remains unchanged.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>NSManageObjectModel</strong></span>: A <a class="indexterm" id="id194"/>managed object <a class="indexterm" id="id195"/>model is an instance of the <code class="literal">NSManagedObjectModel</code> class. It describes a schema (contains definitions) for objects (also called entities).</li></ul></div><p>Let's understand Core Data with an activity:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To create the example application project, launch Xcode and select the option to create a <a class="indexterm" id="id196"/>new project. In the new project window, select the <span class="strong"><strong>Empty Application</strong></span> option. In the <span class="strong"><strong>Product Name</strong></span> field, enter <code class="literal">CoreData</code>, enable the <span class="strong"><strong>Use Core Data</strong></span> checkbox, and click on <span class="strong"><strong>Next</strong></span> to select a location to store the project files, as shown in the following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_11.jpg"/></div></li><li class="listitem">In addition to the usual files that are present when creating a new project, this time an additional file named <code class="literal">CoreData.xcdatamodeld</code> is also created. This is the file where the entity descriptions for our data model are going to be stored. The entity description defines the model for our data, much in the way a schema defines the model of a database table. To create the entity for the <code class="literal">CoreData</code> application, select the <code class="literal">CoreData.xcdatamodeld</code> file to load the entity editor, as <a class="indexterm" id="id197"/>shown in the following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_12.jpg"/></div></li><li class="listitem">To create a new entity, click on the <span class="strong"><strong>Add Entity</strong></span> button located in the bottom panel. Double-click on the new <span class="strong"><strong>Entity</strong></span> item that appears beneath the <span class="strong"><strong>Entities</strong></span> heading and change the entity name to <code class="literal">Contacts</code>. With the entity created, the next step is to add some attributes that represent the data that is to be stored. To do so, click on the <span class="strong"><strong>Add Attribute</strong></span> button. In the <span class="strong"><strong>Attributes</strong></span> pane, name the attribute as <code class="literal">name</code> and set the type to <code class="literal">String</code>. Repeat these steps to add two other String attributes named <code class="literal">address</code> and <code class="literal">phone</code> respectively, as shown in the following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_13.jpg"/></div></li><li class="listitem">Now, we need to create our own storyboard file and view controller class. To add a storyboard file, navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>File…</strong></span> and, in the resulting dialog, select <a class="indexterm" id="id198"/>the <span class="strong"><strong>User Interface</strong></span> category from beneath <span class="strong"><strong>iOS</strong></span> in the left-hand-side panel. In the main panel, select the <span class="strong"><strong>Storyboard</strong></span> option and click on <span class="strong"><strong>Next</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_14.jpg"/></div></li><li class="listitem">Name the storyboard as <code class="literal">Main</code> (as shown in the following screenshot), select a location in the project <a class="indexterm" id="id199"/>for the new file, and then click on <span class="strong"><strong>Create</strong></span>.<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_15.jpg"/></div></li><li class="listitem">Next, edit the <code class="literal">AppDelegate.m</code> file and modify the <code class="literal">didFinishLaunchingWithOptions</code> method so that it simply returns <code class="literal">YES</code> instead of creating a window for the application (since we are now using a storyboard file for the user interface, this is no longer needed):<div class="informalexample"><pre class="programlisting">- (BOOL)application:(UIApplication *)application   didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     return YES;
}</pre></div></li><li class="listitem">Now, we need a new Objective-C file. So add a new file from the menu and name it <code class="literal">CoreDataViewController</code>.</li><li class="listitem">In storyboard, drag <code class="literal">ViewController</code> from the interface builder and design it as shown in the <a class="indexterm" id="id200"/>following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_16.jpg"/></div><p>Don't forget to give a name to this view from the inspector editor on the right-hand side of Xcode.</p></li><li class="listitem">Now, it is time to make connections between the storyboard and the newly added Objective-C file, (<code class="literal">CoreDataViewController.h</code>). We also need to import the <code class="literal">AppDelegate.h</code> class to our new class as follows:<div class="informalexample"><pre class="programlisting">#import&lt;AppDelegate.h&gt;</pre></div><p>Our <code class="literal">.h</code> class probably looks the following screenshot:</p><div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_17.jpg"/></div></li><li class="listitem">When the user touches the <span class="strong"><strong>Save</strong></span> button, the <code class="literal">Save</code> method is called. It is within this method, therefore, that we must implement the code to obtain the managed object context, and create and store managed objects containing the data entered by the user. Select the <code class="literal">CoreDataViewController.m</code> file, scroll down to the template <a class="indexterm" id="id201"/><code class="literal">Save</code> method, and implement the code as follows:<div class="informalexample"><pre class="programlisting">- (IBAction)Save:(id)sender 
{
    CoreDataAppDelegate *appDelegate =
    [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context =[appDelegate managedObjectContext];
    NSManagedObject *newContact;
    newContact = [NSEntityDescriptioninsertNewObjectForEntityForName:@"Contacts"inManagedObjectContext:context];
    [newContact setValue: _name.text forKey:@"name"];
    [newContact setValue: _address.text forKey:@"address"];
    [newContact setValue: _phone.text forKey:@"phone"];
    _name.text = @"";
    _address.text = @"";
    _phone.text = @"";
    NSError *error;
    [context save:&amp;error];
    _status.text = @"Contact saved";
}</pre></div></li><li class="listitem">The final step is to build and run the application. Click on the <span class="strong"><strong>Run</strong></span> button located in the toolbar of the main Xcode project window and enter the example text in to the <a class="indexterm" id="id202"/>text fields, as shown in the following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_18.jpg"/></div></li><li class="listitem">After tapping on the <span class="strong"><strong>Save</strong></span> button, our data is saved in the database and our label is changed into <span class="strong"><strong>Contact saved</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="Core Data" src="graphics/1829OT_03_19.jpg"/></div></li></ol></div></div></div>
<div class="section" title="Social integration in our application"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec21"/>Social integration in our application</h1></div></div></div><p>Integration of social sites in an app is very common nowadays. In iOS 6, a new framework is introduced <a class="indexterm" id="id203"/>known as <span class="strong"><strong>Social.framework</strong></span>. The social framework lets us integrate social networking services such as Facebook and <a class="indexterm" id="id204"/>Twitter in our application. We don't have to download any SDK or use any API; Social framework handles everything. One class is important for integrating social networking services: <code class="literal">SLComposeViewController</code>. The <code class="literal">SLComposeViewController</code> class presents a standard view <a class="indexterm" id="id205"/>for users to compose tweet or Facebook posts. This class also allows users to share location without any additional code.</p><p>The work of the <code class="literal">SLComposeViewController</code> class is to get the Twitter or Facebook screen on our device to enable sharing.</p><p>Now, in order to handle the API and connection, another class is available in Social framework: <code class="literal">SLRequest</code>. The <code class="literal">SLRequest</code> class allows iOS applications to interact directly with social network APIs through HTTP-based requests.</p><p>Let's carry out one simple <a class="indexterm" id="id206"/>activity to understand social integration in a better way:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Again, continue with the previous project. Open that project and add one new Objective-C class as we did earlier and name it.</li><li class="listitem">Drag a new view controller near or below the third view controller and add two buttons named <code class="literal">Tweet</code> and <code class="literal">Facebook</code> respectively.</li><li class="listitem">Add one more button in the second view below the <span class="strong"><strong>Add Student</strong></span> button and name it (for example, <code class="literal">Share on Facebook or Twitter</code>).</li><li class="listitem">Now, give the new view (the fourth view) the same name as the new class in the inspector element.</li><li class="listitem">Click on the <span class="strong"><strong>Share on Facebook or Twitter</strong></span> button and choose the action and link it to the fourth (new) view. Storyboard will look like this:<div class="mediaobject"><img alt="Social integration in our application" src="graphics/1829OT_03_20.jpg"/></div></li><li class="listitem">Link both the buttons (<span class="strong"><strong>Tweet</strong></span> and <span class="strong"><strong>Facebook</strong></span>) to the new class.</li><li class="listitem">Add a new framework, <code class="literal">Social.framework</code>, to our code.</li><li class="listitem">Import the header to the new class <code class="literal">.h</code> file:<div class="informalexample"><pre class="programlisting">#import&lt;Social/Social.h&gt;</pre></div></li><li class="listitem">Add the following code in the new class <code class="literal">.m</code> file:<div class="informalexample"><pre class="programlisting">- (IBAction)Tweet:(id)sender {
    
    SLComposeViewController *tweetSheet = [SLComposeViewController
    composeViewControllerForServiceType:SLServiceTypeTwitter];
    [tweetSheet setInitialText:@" Share on Twitter -_- "];
    [self presentViewController:tweetSheet animated:YES completion:nil];
    
}

- (IBAction)PostOnFB:(id)sender {
    
    
    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    
    [controller setInitialText:@"Post to your wall -_- "];
    [self presentViewController:controller animated:YES completion:Nil];
}</pre></div></li><li class="listitem">Compile and <a class="indexterm" id="id207"/>run the project. The output will look like the following screenshot:<div class="mediaobject"><img alt="Social integration in our application" src="graphics/1829OT_03_21.jpg"/></div></li><li class="listitem">Click on the <span class="strong"><strong>Share on Facebook or Twitter</strong></span> button. The output will be as follows:<div class="mediaobject"><img alt="Social integration in our application" src="graphics/1829OT_03_22.jpg"/></div></li><li class="listitem">Now, click on <a class="indexterm" id="id208"/>the <span class="strong"><strong>Tweet</strong></span> button. The output will look like this:<div class="mediaobject"><img alt="Social integration in our application" src="graphics/1829OT_03_23.jpg"/></div><p>This output <a class="indexterm" id="id209"/>appears because we didn't manage the settings in the simulator. When you set your account in <span class="strong"><strong>Settings</strong></span>, it will able to post our tweet on Twitter; or when we run it on the actual device, it will work properly.</p></li><li class="listitem">Now, click on the <a class="indexterm" id="id210"/><span class="strong"><strong>Facebook</strong></span> button, the output will be as follows:<div class="mediaobject"><img alt="Social integration in our application" src="graphics/1829OT_03_24.jpg"/></div></li></ol></div><p>This activity is only for sharing something on our post. For creating a login we need Facebook SDK. Logging in with Facebook not only allows you to attach a social characteristic into your app, but it can also be used as a login system instead of creating a custom one. To create a <a class="indexterm" id="id211"/>Facebook login, we need to download the Facebook SDK from <a class="ulink" href="https://developers.facebook.com/docs/ios">https://developers.facebook.com/docs/ios</a>. There are a lot of classes available in this SDK. Most tasks are handled by those classes. Developers don't have to bother about everything. They are only required to add the login view to the view controller.</p><p>This activity is a little <a class="indexterm" id="id212"/>complex and the method is also long, so you can go through the link: <a class="ulink" href="http://www.appcoda.com/ios-programming-facebook-login-sdk/">http://www.appcoda.com/ios-programming-facebook-login-sdk/</a> and get appropriate examples of Facebook login. Follow the steps given in the link and you will get an output similar to the following screenshot:</p><div class="mediaobject"><img alt="Social integration in our application" src="graphics/1829OT_03_25.jpg"/></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec22"/>Summary</h1></div></div></div><p>In this chapter, you learned some more about the UI and how to integrate frameworks in your project. You also made a simple app, <code class="literal">Student Registration</code>, by exploring each section. And, at the end of the chapter, you created a fully-loaded app with a UI and its functionalities. You also learned about databases with social media integration.</p><p>In next chapter, you will learn about new frameworks and APIs and various new concepts.</p></div></body></html>