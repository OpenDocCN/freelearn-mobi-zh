<html><head></head><body><div><div><div><h1 class="chapterNumber">26</h1>
    <h1 id="_idParaDest-315" class="chapterTitle">Getting Started with Apple Intelligence</h1>
    <p class="normal">During Apple’s Worldwide Developers Conference in 2024, Apple introduced <strong class="keyWord">Apple Intelligence</strong>, a personal<a id="_idIndexMarker1063"/> intelligence system that puts powerful generative models in Apple devices, enabling new AI-driven features in your apps. These features <a id="_idIndexMarker1064"/>include <strong class="keyWord">Writing Tools</strong>, <strong class="keyWord">Image Playground</strong>, <strong class="keyWord">Genmoji</strong>, and <strong class="keyWord">Siri with App Intents</strong>. However, only <a id="_idIndexMarker1065"/>Writing Tools is available at the<a id="_idIndexMarker1066"/> time of writing.</p>
    <p class="normal">In this chapter, you’re going to explore Apple Intelligence features using the <em class="italic">JRNL</em> app that you completed in <em class="chapterRef">Chapter 22</em>, <em class="italic">Getting Started with Collection Views</em>.</p>
    <p class="normal">First, you’ll learn about Apple Intelligence and what it can do. Next, you’ll see how predictive code completion can help you write your apps. Finally, you’ll learn about Writing Tools and see how it works in your app.</p>
    <p class="normal">By the end of this chapter, you’ll have learned how to use Apple Intelligence features in Xcode and your apps.</p>
    <p class="normal">The following topics will be covered in this chapter:</p>
    <ul>
      <li class="bulletList">Introducing Apple Intelligence</li>
      <li class="bulletList">Using predictive code completion in Xcode</li>
      <li class="bulletList">Implementing Writing Tools in your app</li>
    </ul>
    <h1 id="_idParaDest-316" class="heading-1">Technical requirements</h1>
    <p class="normal">You will continue working on the <code class="inlineCode">JRNL</code> project that you modified in <em class="chapterRef">Chapter 22</em>, <em class="italic">Getting Started with Collection Views</em>.</p>
    <p class="normal">The resource files and completed Xcode project for this chapter are in the <code class="inlineCode">Chapter26</code> folder of the code bundle for this book, which can be downloaded here:</p>
    <p class="normal"><a href="https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition%0D">https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition</a></p>
    <p class="normal">Check out the following video to see the code in action:</p>
    <p class="normal"><a href="https://youtu.be/vraSf4dPHfc%0D">https://youtu.be/vraSf4dPHfc</a></p>
    <p class="normal">Let’s start by learning about Apple Intelligence in the next section.</p>
    <h1 id="_idParaDest-317" class="heading-1">Introducing Apple Intelligence</h1>
    <p class="normal">Apple Intelligence is <a id="_idIndexMarker1067"/>an artificial intelligence platform that consists of on-device and server processing that will enable incredible new features to help users communicate, work, and express themselves. These features include:</p>
    <ul>
      <li class="bulletList">Predictive code completion, which helps you write code using Xcode.</li>
      <li class="bulletList">Writing Tools, which helps users proofread, rewrite, and summarize text.</li>
      <li class="bulletList">Image Playground, which allows users to create fun and playful images.</li>
      <li class="bulletList">Genmoji, which lets users create emojis to suit any occasion.</li>
      <li class="bulletList">Siri with App Intents, which allows developers to give Siri the ability to take actions within your app.</li>
    </ul>
    <p class="normal">Apple Intelligence will be free to all Apple users and will be available in the fall of 2024. At the time of writing, only predictive code completion and Writing Tools are available.</p>
    <div><p class="normal">To learn about what Apple Intelligence can do, watch this video: <a href="https://www.youtube.com/watch?v=Q_EYoV1kZWk">https://www.youtube.com/watch?v=Q_EYoV1kZWk</a>.</p>
      <p class="normal">You can view Apple Developer documentation on Apple Intelligence at this link: <a href="https://developer.apple.com/apple-intelligence/">https://developer.apple.com/apple-intelligence/</a>.</p>
    </div>
    <p class="normal">In the next section, you<a id="_idIndexMarker1068"/> will learn how Apple Intelligence will help you write code for your app.</p>
    <h1 id="_idParaDest-318" class="heading-1">Using predictive code completion in Xcode</h1>
    <p class="normal">As you know, when <a id="_idIndexMarker1069"/>you type code, Xcode will try to<a id="_idIndexMarker1070"/> help you by displaying suggestions in a pop-up menu. Code completion takes this to another level, providing more thorough code suggestions via an on-device AI coding model. This model is specifically trained on Swift and Apple SDKs and will be able to infer what you are trying to do based on the surrounding code context, like function names and comments.</p>
    <p class="normal">To see this in action, you’ll add a new file to your project and create some example structures and functions. Follow these steps:</p>
    <ol>
      <li class="numberedList" value="1">Open the completed Xcode project in the <code class="inlineCode">Chapter22</code> folder of the code bundle for this book, which can be downloaded from <a href="https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition">https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition</a>.</li>
      <li class="numberedList">Click <strong class="screenText">Settings</strong> in the <strong class="screenText">Xcode</strong> menu and click the <strong class="screenText">Text Editing</strong> tab. Click the <strong class="screenText">Editing</strong> tab and tick the <strong class="screenText">Predictive code completion</strong> check box: </li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_01.png" alt="" width="812" height="548"/></figure>
    <p class="packt_figref">Figure 26.1: Settings window showing the Predictive code completion check box</p>
    <ol>
      <li class="numberedList" value="3">A <strong class="screenText">Download predictive code completion model?</strong> alert will appear. Click the <strong class="screenText">Download</strong> button <a id="_idIndexMarker1071"/>to<a id="_idIndexMarker1072"/> download and install the language model, and wait for it to complete:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_02.png" alt="" width="449" height="410"/></figure>
    <p class="packt_figref">Figure 26.2: The Download predictive code completion model? alert</p>
    <ol>
      <li class="numberedList" value="4">Click the <strong class="screenText">Components</strong> tab <a id="_idIndexMarker1073"/>in <a id="_idIndexMarker1074"/>the <strong class="screenText">Settings</strong> window and verify the <strong class="screenText">Predictive Code Completion Model</strong> is present:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_03.png" alt="" width="812" height="519"/></figure>
    <p class="packt_figref">Figure 26.3: Settings window showing the Components tab</p>
    <ol>
      <li class="numberedList" value="5">Right-click<a id="_idIndexMarker1075"/> the <strong class="screenText">JRNL</strong> folder<a id="_idIndexMarker1076"/> in the Project navigator and choose <strong class="screenText">New File from Template...</strong>. Choose <strong class="screenText">Swift File</strong> from the template chooser and name the file <code class="inlineCode">Employee</code>. It will appear in the Project navigator.</li>
      <li class="numberedList">Type in the following comment and code after the <code class="inlineCode">import</code> statement:
        <pre class="programlisting code-one"><code class="hljs-code">// This file contains the definition of the Employee structure, a method that will generate sample data, an EmployeeDatabase structure containing an array of Employee instances and methods to add, delete and find employees in an array.
struct Employee
</code></pre>
      </li>
      <li class="numberedList">Xcode will display a predictive code suggestion. Press <em class="keystroke">Tab</em> to accept it:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_04.png" alt="" width="812" height="164"/></figure>
    <p class="packt_figref">Figure 26.4: Editor area showing a predictive code suggestion</p>
    <ol>
      <li class="numberedList" value="8">Xcode will display a list of possible properties for the <code class="inlineCode">Employee</code> structure. Press <em class="keystroke">Tab</em> to accept it:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_05.png" alt="" width="812" height="144"/></figure>
    <p class="packt_figref">Figure 26.5: Editor area showing a predictive code suggestion</p>
    <p class="normal-one">Note that Xcode<a id="_idIndexMarker1077"/> has <a id="_idIndexMarker1078"/>automatically created the <code class="inlineCode">Employee</code> structure for you. Cool!</p>
    <ol>
      <li class="numberedList" value="9">Type <code class="inlineCode">ex</code> after the <code class="inlineCode">Employee</code> structure definition and press <em class="keystroke">Tab</em> to accept the predictive code suggestion.</li>
      <li class="numberedList">Verify that Xcode has automatically created a method to generate sample data:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_06.png" alt="" width="812" height="286"/></figure>
    <p class="packt_figref">Figure 26.6: Editor area showing syntax errors</p>
    <p class="normal-one">Note that there may be a few syntax errors that you need to fix. This will probably improve as Apple updates the language model over time.</p>
    <p class="normal-one">After fixing<a id="_idIndexMarker1079"/> the<a id="_idIndexMarker1080"/> syntax errors, your code should look similar to this:</p>
    <pre class="programlisting code-one"><code class="hljs-code">struct Employee: Codable, Identifiable {
  let id: Int
  let name: String
  let age: Int
  let salary: Double
}
 
extension Employee {
  static func generateSampleData() -&gt; [Employee] {
    [
      Employee(id: 1, name: "John Doe", age: 25, 
      salary: 100000),
      Employee(id: 2, name: "Jane Smith", age: 28, 
      salary: 120000),
      Employee(id: 3, name: "Jimmy Johnson", age: 30, 
      salary: 150000),
    ]
  }
}
</code></pre>
    <ol>
      <li class="numberedList" value="11">Type <code class="inlineCode">struct Emp</code> after the extension and keep pressing <em class="keystroke">Tab</em> to accept the suggestions until no more suggestions appear. The generated code will be similar to this:
        <pre class="programlisting code-one"><code class="hljs-code">struct EmployeeDatabase: Codable {
  var employees: [Employee]
}
</code></pre>
      </li>
      <li class="numberedList">Type <code class="inlineCode">func</code> after the <code class="inlineCode">employees</code> property declaration and keep pressing <em class="keystroke">Tab</em> to accept the suggestions until no more suggestions appear. The generated code will be similar to this:
        <pre class="programlisting code-one"><code class="hljs-code">mutating func add(_ employee: Employee) {
  employees.append(employee)
}
</code></pre>
      </li>
      <li class="numberedList">Type <em class="keystroke">Return</em> twice after the definition of the <code class="inlineCode">add(_:)</code> method and wait until the code <a id="_idIndexMarker1081"/>suggestion <a id="_idIndexMarker1082"/>appears. Keep pressing <em class="keystroke">Tab</em> to accept the suggestions until no more suggestions appear. The generated code will be similar to this:
        <pre class="programlisting code-one"><code class="hljs-code">func find(by id: Int) -&gt; Employee? {
  employees.first(where: { $0.id == id })
}
</code></pre>
      </li>
      <li class="numberedList">Repeat <em class="italic">Step 14</em> and keep pressing <em class="keystroke">Tab</em> to accept the suggestions until no more suggestions appear. The generated code will be similar to this:
        <pre class="programlisting code-one"><code class="hljs-code">mutating func delete(by id: Int) {
  employees.removeAll(where: { $0.id == id })
}
</code></pre>
      </li>
      <li class="numberedList">Verify that the generated code is similar to the code shown here:
        <pre class="programlisting code-one"><code class="hljs-code">// This file contains the definition of the Employee structure, a method that will generate sample data, an EmployeeDatabase structure containing an array of Employee instances and methods to add, delete and find employees in an array.
 
struct Employee: Codable, Identifiable {
  let id: Int
  let name: String
  let age: Int
  let salary: Double
}
 
extension Employee {
  static func generateSampleData() -&gt; [Employee] {
     [
       Employee(id: 1, name: "John Doe", age: 25, 
       salary: 100000),
       Employee(id: 2, name: "Jane Smith", age: 28, 
       salary: 120000),
       Employee(id: 3, name: "Jimmy Johnson", age: 30, 
       salary: 150000),
    ]
  }
}
 
struct EmployeeDatabase: Codable {
  var employees: [Employee]
    
  mutating func add(_ employee: Employee) {
    employees.append(employee)
  }
    
  func find(by id: Int) -&gt; Employee? {
    employees.first(where: { $0.id == id })
  }
    
  mutating func delete(by id: Int) {
    employees.removeAll(where: { $0.id == id })
  }
}
</code></pre>
      </li>
    </ol>
    <p class="normal">With the help of<a id="_idIndexMarker1083"/> predictive<a id="_idIndexMarker1084"/> code completion, you have successfully created the classes and methods described in the comment, with very little typing required! Awesome! </p>
    <p class="normal">However, do note that the code generated is not perfect, and you will need to fix errors and other issues as needed.</p>
    <p class="normal">In the next section, you’ll learn how to implement Writing Tools to proofread, rewrite, and summarize text in your apps.</p>
    <h1 id="_idParaDest-319" class="heading-1">Implementing Writing Tools in your app</h1>
    <p class="normal">Writing Tools is an Apple<a id="_idIndexMarker1085"/> Intelligence feature that is available<a id="_idIndexMarker1086"/> system-wide and can help you proofread, rewrite, and summarize text. Writing Tools appears automatically when your app is running in a supported environment, as long as you are using a <code class="inlineCode">UITextView</code>, <code class="inlineCode">NSTextView</code>, or <code class="inlineCode">WKWebView</code> in your app. Apple has also introduced text view delegate methods and properties so that your app may take appropriate action when Writing Tools is in use.</p>
    <div><p class="normal">To view Apple’s WWDC24 video on Writing Tools, see: <a href="https://developer.apple.com/videos/play/wwdc2024/10168/">https://developer.apple.com/videos/play/wwdc2024/10168/</a>.</p>
    </div>
    <p class="normal">To see Writing Tools in action, you’ll run the <em class="italic">JRNL</em> app on your Mac and use Writing Tools to modify the text in the Add New Journal Entry screen. You’ll also explore the new text view delegate methods and properties introduced by Apple. Follow these steps:</p>
    <ol>
      <li class="numberedList" value="1">Open <strong class="screenText">System Settings</strong> on your Mac, choose <strong class="screenText">Apple Intelligence &amp; Siri</strong> in the sidebar, and switch on <strong class="screenText">Apple Intelligence</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_07.png" alt="" width="812" height="537"/></figure>
    <p class="packt_figref">Figure 26.7: System Settings window with Apple Intelligence turned on</p>
    <ol>
      <li class="numberedList" value="2">In Xcode, open<a id="_idIndexMarker1087"/> the <code class="inlineCode">JRNL</code> project and <a id="_idIndexMarker1088"/>choose <strong class="screenText">My Mac (Designed for iPad)</strong> from the destination menu in the toolbar:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_08.png" alt="" width="812" height="286"/></figure>
    <p class="packt_figref">Figure 26.8: Destination menu with My Mac (Designed for iPad) selected</p>
    <ol>
      <li class="numberedList" value="3">Click the<strong class="screenText"> JRNL</strong> icon at the top of the Project navigator, click the <strong class="screenText">JRNL</strong> target, and click the <strong class="screenText">Signing &amp; Capabilities</strong> tab. Set <strong class="screenText">Team</strong> to a free or paid Apple Developer account, and modify the <strong class="screenText">Bundle Identifier</strong> as needed, until there are no more errors in the provisioning profile:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_09.png" alt="" width="812" height="307"/></figure>
    <p class="packt_figref">Figure 26.9: Signing and capabilities screen</p>
    <div><p class="normal">Running your app on a device is covered in more detail in <em class="chapterRef">Chapter 1</em>, <em class="italic">Exploring Xcode</em>.</p>
    </div>
    <ol>
      <li class="numberedList" value="4">Build and run <a id="_idIndexMarker1089"/>the<a id="_idIndexMarker1090"/> app on your Mac and click the <strong class="screenText">+</strong> button to display the Add New Journal Entry screen:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_10.png" alt="" width="747" height="262"/></figure>
    <p class="packt_figref">Figure 26.10: The Journal screen with the + button highlighted</p>
    <ol>
      <li class="numberedList" value="5">Type in a <a id="_idIndexMarker1091"/>few <a id="_idIndexMarker1092"/>paragraphs of text into the text view. Select all the text, right-click, and choose <strong class="screenText">Writing Tools | Proofread</strong>:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_11.png" alt="" width="694" height="647"/></figure>
    <p class="packt_figref">Figure 26.11: Text view with a pop-up menu showing Proofread selected</p>
    <ol>
      <li class="numberedList" value="6">Click the left<a id="_idIndexMarker1093"/> and<a id="_idIndexMarker1094"/> right arrow buttons to step through the changes, and click <strong class="screenText">Done</strong> when you have finished reviewing them:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_12.png" alt="" width="617" height="603"/></figure>
    <p class="packt_figref">Figure 26.12: Reviewing Writing Tools changes in the text view</p>
    <ol>
      <li class="numberedList" value="7">Try the other <a id="_idIndexMarker1095"/>Writing <a id="_idIndexMarker1096"/>Tools features and observe what they do:</li>
    </ol>
    <figure class="mediaobject"><img src="img/B31371_26_13.png" alt="" width="592" height="370"/></figure>
    <p class="packt_figref">Figure 26.13: Writing Tools submenu showing available features</p>
    <ol>
      <li class="numberedList" value="8">You may wish to disable editing in the text view while Writing Tools is active. Click the <strong class="screenText">AddJournalViewController</strong> file in the Project navigator. Add the <a id="_idIndexMarker1097"/>following <a id="_idIndexMarker1098"/>extension after all other code in the file:
        <pre class="programlisting code-one"><code class="hljs-code">extension AddJournalEntryViewController {
  // MARK: - Writing Tools Delegate methods
  func textViewWritingToolsWillBegin(_ textView: 
  UITextView) {
    textView.isEditable = false
  }
  func textviewWritingToolsDidEnd(_ textView: 
  UITextView) {
    textView.isEditable = true
  }
}
</code></pre>
      </li>
    </ol>
    <p class="normal-one">This code disables editing in the text view while Writing Tools is active.</p>
    <ol>
      <li class="numberedList" value="9">In some cases, you may wish to disable Writing Tools altogether. In the <code class="inlineCode">viewDidLoad()</code> method of the <code class="inlineCode">AddJournalEntryViewController</code> class, add this line after all the other code:
        <pre class="programlisting code-one"><code class="hljs-code">bodyTextView.writingToolsBehavior = .none
</code></pre>
      </li>
    </ol>
    <p class="normal-one">This code disables Writing Tools, and the Writing Tools menu item will no longer appear.</p>
    <p class="normal">You have <a id="_idIndexMarker1099"/>successfully<a id="_idIndexMarker1100"/> explored how Writing Tools works in your app. Excellent!</p>
    <h1 id="_idParaDest-320" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, you modified the <em class="italic">JRNL</em> app that you completed in <em class="chapterRef">Chapter 22</em>, <em class="italic">Getting Started with Collection Views</em>, to work with Apple Intelligence.</p>
    <p class="normal">First, you learned about Apple Intelligence and what it can do. Next, you created a new structure and related functions with the help of predictive code completion. Finally, you learned about Writing Tools and how it works in your app.</p>
    <p class="normal">You now have learned how to use Apple Intelligence features in Xcode and your apps. Great!</p>
    <p class="normal">In the next chapter, you’ll learn how to test and submit your app to the App Store.</p>
    <h1 id="_idParaDest-321" class="heading-1">Join us on Discord!</h1>
    <p class="normal">Read this book alongside other users, experts, and the author himself. Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. Scan the QR code or visit the link to join the community.</p>
    <p class="normal"><a href="https://packt.link/ios-Swift%0D">https://packt.link/ios-Swift</a></p>
    <p class="normal"><a href="https://packt.link/ios-Swift%0D"><img src="img/QR_Code2370024260177612484.png" alt="" width="177" height="177"/></a></p>
  </div>
</div></div></body></html>