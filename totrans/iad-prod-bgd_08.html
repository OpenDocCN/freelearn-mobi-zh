<html><head></head><body><div class="chapter" title="Chapter&#xA0;8.&#xA0;Enhancing Our App with Code"><div class="titlepage"><div><div><h1 class="title"><a id="ch08"/>Chapter 8. Enhancing Our App with Code</h1></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>iAd Producer manages the HTML, CSS, and JavaScript that power our iAd, meaning we can make a visually impacting ad without any knowledge of these web technologies. We're able to extend the interactivity of our ads by adapting and adding to the JavaScript source code generated by iAd Producer. We'll go through some of the projects that you've been working on and enhance their interactivity with simple and effective tweaks to the JavaScript.</p></blockquote></div><p>In this chapter, you'll learn about the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">What JavaScript is</li><li class="listitem" style="list-style-type: disc">iAd Producer's code editor</li><li class="listitem" style="list-style-type: disc">Handling events</li><li class="listitem" style="list-style-type: disc">Accessing objects</li><li class="listitem" style="list-style-type: disc">Sending e-mails and SMS</li><li class="listitem" style="list-style-type: disc">Saving calendar events</li></ul></div><p>While this chapter won't make you a JavaScript master, you'll have an understanding of what's happening and be able to apply these snippets and examples to your own amazing iAd projects.</p><div class="section" title="JavaScript"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec01"/>JavaScript</h1></div></div></div><p>JavaScript, often abbreviated to JS, is a lightweight language created to enhance the interactivity of the web by Brendan Eich of Netscape in 1995. JavaScript uses<span class="strong"><strong> objects</strong></span>, an item that can contain one or more<span class="strong"><strong> functions</strong></span> and<span class="strong"><strong> properties</strong></span>. A function is a list of actions that occurs when called by the user or code, and a property, or variable, is a value that is stored within an object.<a class="indexterm" id="id316"/>
</p><p>If you're already familiar with programming, you'll find that JavaScript was highly influenced by the C language. JavaScript is finding increased use in applications beyond the web browser and is a powerful and useful language to learn.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note112"/>Note</h3><p>Contrary to popular misconceptions, JavaScript doesn't bear a relationship to the Java language. It was initially named Mocha, then LiveScript, and finally changed to JavaScript—a trademark of Sun Microsystems.</p></div><p>Don't worry if you haven't used JavaScript before, we'll go through each exercise step-by-step and explain how the code is interacting with our ad and its components.<a class="indexterm" id="id317"/>
</p><div class="section" title="The code editor"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec01"/>The code editor</h2></div></div></div><p>iAd Producer has a built-in code editor that we'll use to edit our JavaScript code. It is essentially a basic text editor with a few handy tools, such as coloring our code to make it more readable and basic error checking.<a class="indexterm" id="id318"/>
</p><p>Whenever you create a new page in your project, iAd Producer automatically generates a hidden JavaScript file that you can view by selecting<span class="strong"><strong> Code</strong></span> |<span class="strong"><strong> Show Code Editor</strong></span> from the menu bar in the iAd Producer. Each object also has its own JavaScript file that is used to call functions when an event occurs (such as a touch or swipe). To view an object's code, open the editor with the object selected. You can see an example of the code editor in the following screenshot:</p><div class="mediaobject"><img alt="The code editor" src="graphics/1321_08_01.jpg"/></div></div></div></div>
<div class="section" title="Accessing page objects"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec02"/>Accessing page objects</h1></div></div></div><p>Whenever we add an object to a page's canvas, we're able to access and edit certain properties of it using some JavaScript code. This allows you to edit properties that aren't available in the iAd Producer interface or change objects in your ad to respond to a user's input.<a class="indexterm" id="id319"/>
</p></div>
<div class="section" title="Time for action &#x2014; accessing an object"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec03"/>Time for action — accessing an object</h1></div></div></div><p>Let's continue using the<code class="literal"> Cloud 9 - iPad</code> ad that we created in the last chapter. We'll add some tweaks to our<span class="strong"><strong> Test Flight</strong></span> page's scroll view object that wouldn't be possible with the iAd Producer interface:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Open the project<code class="literal"> Cloud 9 - iPad</code> in iAd Producer. If you didn't complete this project, then open the file<code class="literal"> 8. Store Finder.iadproj</code> in the folder<code class="literal"> Cloud 9</code> and then<code class="literal"> Exercises</code>. This file has the previous exercises completed for you.</li><li class="listitem">Double-click on the first page,<span class="strong"><strong> Test Flight</strong></span>, from the ad overview to open it on the canvas. Right-click on the hatched background outside of the canvas and expand the menu item<span class="strong"><strong> Page Events</strong></span> |<span class="strong"><strong> View Did Load</strong></span> |<span class="strong"><strong> Execute JavaScript</strong></span>. This will automatically create the required function for this event and open the code editor for this page:<div class="mediaobject"><img alt="Time for action — accessing an object" src="graphics/1321_08_02.jpg"/></div></li><li class="listitem">In the code editor window, iAd Producer has created a new function for this page that will be called and run when the view appears. The<code class="literal"> //Code goes here</code> placeholder comment shows you where to put your custom code for this event. Delete the placeholder comment and add the following:<a class="indexterm" id="id320"/><div class="informalexample"><pre class="programlisting">//get the scrollView from the canvas
var scrollView = this.outlets.scrollView;
</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title">Note</h3><p>In JavaScript, anything on a line following<code class="literal"> //</code> is a comment and will be ignored when run. If you want to have a multiline comment, use<code class="literal"> /* comment goes here */</code>. Comments are useful as they can be used to remind you (or inform other developers working on your code) why you've done things in a certain way. The code editor will turn comments green to distinguish them from the JavaScript.</p></div></li><li class="listitem">The first line is a comment saying what we're doing, which is retrieving the scroll view object from the page and storing a reference of it in a variable, indicated with<code class="literal"> var</code> and called<code class="literal"> scrollView</code>. Each object on the page is assigned a unique outlet name. To find or modify the outlet value for an object, click and select it from the canvas and open the inspector pane. Expand the<span class="strong"><strong> Properties</strong></span> section and you'll see a text box with the outlet name. You're able to change this to something more memorable, if you have multiple objects of the same type on the page:<a class="indexterm" id="id321"/><div class="mediaobject"><img alt="Time for action — accessing an object" src="graphics/1321_08_03.jpg"/></div></li><li class="listitem">Now that we have our outlet easily accessible with the<code class="literal"> scrollView</code> variable, we can manipulate it by adjusting its properties. Add the following lines to your function in the code editor:<div class="informalexample"><pre class="programlisting">//prevent up &amp; down vertical scrolling
scrollView.verticalScrollEnabled = false;
</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title">Note</h3><p>To disable a property, we use the<code class="literal"> false</code> value, and we use the<code class="literal"> true</code> value to enable it.</p></div></li><li class="listitem">This will disable the vertical scrolling of our scroll view so it only can be scrolled left and right by the user. As we're preventing vertical scrolling, we should also prevent the vertical scroll bars from appearing:<div class="informalexample"><pre class="programlisting">//remove vertical scrollbar
scrollView.showsVerticalScrollIndicator = false;
</pre></div></li><li class="listitem">By setting the<code class="literal"> showsVerticalScrollIndicator</code> property of our scroll view object to<code class="literal"> false</code>, we disabled the vertical scroll bar from appearing.</li><li class="listitem">Your complete code should look similar to the following image in the code editor:<a class="indexterm" id="id322"/><div class="mediaobject"><img alt="Time for action — accessing an object" src="graphics/1321_08_04.jpg"/></div></li><li class="listitem">Save your project and test the ad in the iOS Simulator or on a device using iAd Tester. You'll notice that the scroll view can no longer be scrolled up and down, only left and right, and a vertical scroll bar does not appear.<a class="indexterm" id="id323"/></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec02"/>What just happened?</h2></div></div></div><p>We used the<code class="literal"> onViewControllerViewDidLoad</code> event function that is called once the page has completed loading and modified some properties of our scroll view object. iAd Producer doesn't allow certain properties to be accessed, so it can keep its user interface clean and understandable. By hiding advanced functionality from beginners, they make starting out with iAd creation less overwhelming. As you're now an iAd pro, we can take the plunge into JavaScript to create better ads.</p></div></div>
<div class="section" title="Handling user events"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec04"/>Handling user events</h1></div></div></div><p>Whenever an action on our ad is initiated by the user, or by the system, an event is called. We're able to add a JavaScript function to a variety of events in our ad, such as taps on buttons, device shakes, and orientation changes.<a class="indexterm" id="id324"/>
</p><p>Events are separated into three groups:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Global Events:</strong></span> These occur for the entire ad</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Page Events:</strong></span> These are related to a particular page</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Object Events:</strong></span> These are specific to one object on a page</li></ul></div><p>For example, the user shaking the device or the ad finishing the loading is a global event, a page loading or appearing is a page event, and a button being touched would be an object event. You can view the event hierarchy here:</p><div class="mediaobject"><img alt="Handling user events" src="graphics/1321_08_05.jpg"/></div><div class="section" title="Sending SMS and e-mails"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec03"/>Sending SMS and e-mails</h2></div></div></div><p>iAd Producer doesn't have an object or template available for sending e-mails or SMS, but the iAd JS framework that powers our iAd has a simple way of presenting the user with an e-mail dialog.<a class="indexterm" id="id325"/>
</p><p>You may remember we briefly touched upon this in<a class="link" href="ch06.html" title="Chapter 6. Ad Destinations and Actions"> Chapter 6</a>,<span class="emphasis"><em> Ad Destinations and Actions</em></span>, when we added the ability to share our ad using SMS. This time, we'll take a deeper look at the code and what is happening at each step and send an e-mail instead.</p></div></div>
<div class="section" title="Time for action &#x2014; detecting a tap and sending an e-mail"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec05"/>Time for action — detecting a tap and sending an e-mail</h1></div></div></div><p>Continuing to enhance our<code class="literal"> Cloud 9</code> ad, we'll add a button to our<span class="strong"><strong> Book a flight</strong></span> page that will pre-fill the e-mail component with our booking center's e-mail address.</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">If it isn't already, open the<code class="literal"> Cloud 9 - iPad</code> project in iAd Producer. Double-click on the<span class="strong"><strong> Book a flight</strong></span> page to open it on the ad canvas. Using the page toggle above the canvas, change to the<span class="strong"><strong> Map Details</strong></span> view.</li><li class="listitem">From the object library, add a<span class="strong"><strong> Button</strong></span> to the canvas. Open the inspector and change the outlet name to<code class="literal"> emailButton</code>.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note113"/>Note</h3><p>When naming outlets, you should start in lowercase and then use camel case; this means each subsequent word after the first should be capitalized. For example,<span class="emphasis"><em> youShouldCapitalizeEveryFirstLetterOfEachWord</em></span>. Doing so makes it easier to read and understand what each outlet does.</p></div></li><li class="listitem">Update the button text to read<code class="literal"> Book a flight now!</code>.</li><li class="listitem">With the button selected, expand the<span class="strong"><strong> inspector</strong></span> pane and find the<span class="strong"><strong> Events</strong></span> section. The<span class="strong"><strong> Touched Up Inside</strong></span> event will already be selected, but without an action. We use the<span class="strong"><strong> Touched Up Inside</strong></span> event to detect a person releasing their finger from a tap on the object. We use<span class="strong"><strong> Touched Up Inside</strong></span> instead of<span class="strong"><strong> Touched Down Inside</strong></span>, as the<span class="strong"><strong> Touch Down</strong></span> event is called as soon as the user touches on the object. This can create a jarring experience for the user as accidental taps are more likely to occur on touchdown. Change the action for the event to<span class="strong"><strong> Execute JavaScript:</strong></span><a class="indexterm" id="id326"/><div class="mediaobject"><img alt="Time for action — detecting a tap and sending an e-mail" src="graphics/1321_08_06.jpg"/></div></li><li class="listitem">The code editor will appear; delete the<code class="literal"> // Code here</code> placeholder comment and add the following:<div class="informalexample"><pre class="programlisting">// Set the mail composer listener to an empty function
window.ad.mailComposer.listener = function(){ };
</pre></div></li><li class="listitem">This sets the<span class="strong"><strong> listener</strong></span> property of our advert's<code class="literal"> mailComposer</code> object to an empty function. Listener's are functions that are called once another action completes; for example, our listener is called when an e-mail is successfully sent or if it fails for any reason. For now, we're just using an empty function because we don't need to handle any sending errors or successes differently. Without an empty function, our ad would crash as it would try to find something that doesn't exist.<a class="indexterm" id="id327"/></li><li class="listitem">Let's set our recipient e-mail address, which is the e-mail account that will receive any bookings. Add the following code after our listener and update<code class="literal"> your@emailaddress.com</code> with your own e-mail address so you're able to test whether it works later:<div class="informalexample"><pre class="programlisting">// Set our recipient email address for the mail composer window.ad.mailComposer.toRecipients = ["you@emailaddress.com"];
</pre></div></li><li class="listitem">Notice the square brackets? They indicate whether anything within them is in an array. Think of it as a list of items wrapped within the square brackets. Each item of the array is separated by a comma, so if you wanted to include multiple recipients, you'd use<code class="literal"> ["recipientOne@email.com", "recipientTwo@email.com"]</code> and so on.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note114"/>Note</h3><p>Although we only passed one item to the recipients, we still had to use an array because that's what the<code class="literal"> toRecipients</code> property expects.</p></div></li><li class="listitem">With our recipient list set, we can set the<code class="literal"> subject</code> property for our e-mail, while continuing to build up the code in the editor by adding the following:<div class="informalexample"><pre class="programlisting">// Set the email subject property
window.ad.mailComposer.subject = "I'd like to book a flight!";
</pre></div></li><li class="listitem">This simply sets the<code class="literal"> subject</code> property of our ad's mail composer to a<span class="strong"><strong> string</strong></span> —a block of text contained with quotes. We'll pre-fill the body—the main content, of our e-mail:<a class="indexterm" id="id328"/><div class="informalexample"><pre class="programlisting">//Set the message body using the mailComposer function
window.ad.mailComposer.setMessageBody( "I'd like to book a flight..", false );
</pre></div></li><li class="listitem">Unlike our other properties, the body text isn't set using the<code class="literal"> =</code> assignment but by adding values with two brackets. The items contained within these brackets are passed to the<code class="literal"> setMessageBody</code> function of the mail composer. It accepts two arguments, items required by the function, in this case, a string for the body text, and a Boolean value indicating if the body text is an HTML string. A Boolean value is a simple yes or no switch, using<code class="literal"> true</code> or<code class="literal"> false</code> respectively. If we wanted to add HTML web content to our e-mail, we could use<code class="literal">&lt;img src='http://awebsite.com/animage.png' /&gt;</code> as the string and<code class="literal"> true</code> for the Boolean. This would show an image in our e-mail.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note115"/>Note</h3><p>To call or invoke a function, you use the function name followed by<code class="literal"> ()</code>. JavaScript functions can also be properties, which is why<code class="literal"> window.ad.mailComposer.setMessageBody</code> needs to be set using values wrapped in<code class="literal"> (</code> and<code class="literal"> )</code>.</p></div></li><li class="listitem">With all the required info set for our<code class="literal"> mailComposer</code> property, we can now present the user with the mail composer view. Add this final line of code to the editor:<div class="informalexample"><pre class="programlisting">// Show the user the mail composer window
window.ad.mailComposer.presentComposer();
</pre></div></li></ol></div><p>This simply calls the mail composer's<code class="literal"> presentComposer</code> function, which tells the iOS device to show the e-mail window and pre-fills it to the values we set.<a class="indexterm" id="id329"/>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note116"/>Note</h3><p>Notice how the code is indented in from the left of the screen; each line of code within a function should be indented by four spaces to increase readability. You can use one press of the tab key on your keyboard as a shortcut for this.</p></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec04"/>What just happened?</h2></div></div></div><p>As all of this code occurs within the function for the<code class="literal"> onTouchUpInside</code> event of our button, each line is executed step-by-step, with the last step calling a function that shows an e-mail composer with our properties pre-filled in it.</p><p>When creating our e-mail, we used arrays, strings, and Boolean values to customize the message composer with our own required content.</p><p>The iOS Simulator often won't send e-mails. When you hit send, the message is silently discarded with a success message. To test that your e-mail will reach the recipient, you'll need to test on a device with an e-mail account configured:</p><div class="mediaobject"><img alt="What just happened?" src="graphics/1321_08_08.jpg"/></div></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec05"/>Have a go hero</h2></div></div></div><p>It's great that our users can now get in touch with us without having to leave our ad, so why not try the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Send an image in our e-mail; you'll need to have a URL of an image hosted on the web.</li><li class="listitem" style="list-style-type: disc">Change the mail composer to send SMS. Check out the last exercise in<a class="link" href="ch06.html" title="Chapter 6. Ad Destinations and Actions"> Chapter 6</a>,<span class="emphasis"><em> Ad Destinations and Actions</em></span>, if you need some hints.</li><li class="listitem" style="list-style-type: disc">Make sure all your lines of code within the function are indented by four spaces/one tab in.</li><li class="listitem" style="list-style-type: disc">As usual, our ad could do with some styling to update the stock objects we added.</li></ul></div></div></div>
<div class="section" title="Time for action &#x2014; adding something extra to our e-mail"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec06"/>Time for action — adding something extra to our e-mail</h1></div></div></div><p>While our e-mail contact form is fit for purpose, we can still add some extra polish and neat functionality (just like we've been doing to the visual aspect of our ad). As the<span class="strong"><strong> book now</strong></span> button is on the store details page, let's make our e-mail body include the name of the selected store:<a class="indexterm" id="id330"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Open the<code class="literal"> Cloud 9 - iPad</code> project in iAd Producer and open the<span class="strong"><strong> map details view</strong></span> of the<span class="strong"><strong> Book a flight</strong></span> page on the canvas.</li><li class="listitem">We need to get back to the code editor and find the code that we added in the last exercise. With the<span class="strong"><strong> book a flight</strong></span> button selected, click on<span class="strong"><strong> Code</strong></span> |<span class="strong"><strong> Show Code Editor</strong></span> from the menu bar. This will open the code editor and you can scroll down to find the function<code class="literal"> this.onViewTouchUpInside</code>. When a control only has one function or event added to it, this technique is simple. However, if our control has multiple events, our file can quickly become crowded. To open the code editor directly focused in a function, select the button object, then right-click and choose object events, then<span class="strong"><strong> Touched Up Inside</strong></span>, and finally<span class="strong"><strong> Execute JavaScript</strong></span>. You'll see that events that already have functions assigned have a solid dot next to their name, whereas empty events have an empty circle, as shown in the following screenshot:<a class="indexterm" id="id331"/><div class="mediaobject"><img alt="Time for action — adding something extra to our e-mail" src="graphics/1321_08_09.jpg"/></div></li><li class="listitem">With the code editor opened and positioned at our event's function, we can modify some of our code to add the store name to the e-mail message's body. Add the following code straight after setting the e-mail subject:<div class="informalexample"><pre class="programlisting">//create our message variable
var message = "I'd like to book a flight at " + this.viewController.annotation.title;
</pre></div></li><li class="listitem">This creates a variable called<code class="literal"> message</code> that contains the text<code class="literal"> I'd like to book a flight at</code> combined with the text of the title of the map pin's annotation. The<code class="literal"> +</code> is used to join the two strings and we access the text of the maps pin<code class="literal"> title</code> property to construct our message. Now that we have our<code class="literal"> message</code> variable containing the combined string, we need to pass this to the body of our e-mail.</li><li class="listitem">To set our new dynamic text in the body of our e-mail, we need to remove the string from the<code class="literal"> .setMessageBody</code> and replace it with our<code class="literal"> message</code> variable. You should update your message body function to match this line:<div class="informalexample"><pre class="programlisting">//Set the message body using the mailComposer function
window.ad.mailComposer.setMessageBody(message, false);
</pre></div></li><li class="listitem">After we update this message body function, this code will set the message body to be the string that we created and stored in the<code class="literal"> message</code> variable.<a class="indexterm" id="id332"/><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note117"/>Note</h3><p>Make sure you also remove the quotes,<code class="literal"> "</code>", from within the<code class="literal"> .setMessageBody</code> function. Variable names within quotes will cause the variable name, and not the variable value, to appear.</p></div></li><li class="listitem">Your final updated touchup event function should look like the following screenshot:<div class="mediaobject"><img alt="Time for action — adding something extra to our e-mail" src="graphics/1321_08_10.jpg"/></div></li><li class="listitem">Now test the ad. Open a store details view page and tap the<span class="strong"><strong> Book a Flight!</strong></span> button. You'll see that the main e-mail body text is dynamically set with the title of the store.<a class="indexterm" id="id333"/></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note118"/>Note</h3><p>When testing in the simulator, make sure you click on the<span class="strong"><strong> Simulate</strong></span> button from the ad overview, not the store finder canvas. Opening directly from the canvas will cause the ad to crash as it won't load the correct pin data required for the annotation title.</p></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec06"/>What just happened?</h2></div></div></div><p>We've made our e-mail more dynamic by adding the current flight center the user is looking at to the message body; this should allow better management of e-mails received by users.</p><p>By triggering with the<code class="literal"> Touch Up Inside</code> event of our button, we combined a message string with the dynamic pin annotation property, meaning the body text of our e-mail updates with the name of the store the user is currently viewing.</p></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec07"/>Have a go hero</h2></div></div></div><p>If you're feeling comfortable with the JavaScript code we've used so far, you could try extending it further by:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Adding the address to the message string. Hint: You can access the annotation's address using<code class="literal"> this.viewController.annotation.address</code>.</li><li class="listitem" style="list-style-type: disc">Leaving the recipient array empty and creating a<code class="literal"> Share with friend</code> button so a specific store can be shared with a friend. To create an empty array, simply don't add any properties into<code class="literal"> []</code>.</li><li class="listitem" style="list-style-type: disc">Including an additional e-mail address in the recipient array so the e-mail is distributed to two people at your company.</li></ul></div></div><div class="section" title="Pop Quiz — variables"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec08"/>Pop Quiz — variables</h2></div></div></div><p>Variables are a great way to store values in our JavaScript and can help keep our code readable and clear. See if you're able to identify these different variable types and uses:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Which of these would be the correct way to declare a variable name<code class="literal"> cyril</code> with the string<code class="literal"> the squirrel has lost his nuts?</code><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">a. var cyril = "the squirrel has lost his nuts";</li><li class="listitem" style="list-style-type: none">b. variable cyril = "the squirrel has lost his nuts";</li><li class="listitem" style="list-style-type: none">c. cyril = "the squirrel has lost his nuts";</li><li class="listitem" style="list-style-type: none">d. "cyril" = the squirrel has lost his nuts;</li></ul></div></li><li class="listitem">Which of following is the correct way of showing a Boolean value?<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">a. yes/no</li><li class="listitem" style="list-style-type: none">b. true/false</li><li class="listitem" style="list-style-type: none">c. on/off</li><li class="listitem" style="list-style-type: none">d. yes/true</li></ul></div></li></ol></div></div></div>
<div class="section" title="Adding a calendar entry"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec07"/>Adding a calendar entry</h1></div></div></div><p>The iAd JavaScript library allows us to add events to the user's calendar; this can let us leave a reminder of certain time sensitive discounts or promotional events.<a class="indexterm" id="id334"/>
</p></div>
<div class="section" title="Time for action &#x2014; using the calendar"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec08"/>Time for action — using the calendar</h1></div></div></div><p>Using our<code class="literal"> Cloud 9 - iPad</code> project, we'll add an events page with a button that'll add an event to the user's iPad inbuilt calendar:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Open the<code class="literal"> Cloud 9 - iPad</code> project and add a blank page to your ad. Add a button that goes to this page to the main menu carousel. Go back to<a class="link" href="ch07.html" title="Chapter 7. Building for the Big Screen"> Chapter 7</a>,<span class="emphasis"><em> Building for the Big Screen</em></span>, if you need a reminder on how to do this. Name the page<code class="literal"> Events</code>. Use the image<span class="strong"><strong> events-button.png</strong></span> for the button image and place it on one of the placeholder cloud cells, such as<span class="strong"><strong> Cell 4</strong></span>, as shown in the following screenshot:<div class="mediaobject"><img alt="Time for action — using the calendar" src="graphics/1321_08_11.jpg"/></div></li><li class="listitem">Open the new<span class="strong"><strong> Events</strong></span> page on the ad canvas and add a button to the canvas from the object library. Change the text in the button to read<code class="literal"> Add to calendar</code>.</li><li class="listitem">With the button selected, add an<code class="literal"> Execute JavaScript</code> event for when the object is<code class="literal"> Touched Up Inside</code>. Delete the placeholder comment and add the following lines of code:<a class="indexterm" id="id335"/><div class="informalexample"><pre class="programlisting">//Convert readable date into milliseconds
var startDate = Date.parse("Tue, 16 Aug 2011 13:30:00 GMT");
</pre></div></li><li class="listitem">Using the<code class="literal"> Date.parse</code> function, we convert a human-readable date into a format that JavaScript can understand. JavaScript uses the number of milliseconds since January 1, 1970, 00:00:00 UTC to calculate its date and times.</li><li class="listitem">We need to convert the JavaScript time to a format that iAd and iOS can understand. We'll do this using the<code class="literal"> Date</code> function. Add these lines directly after the last two:<div class="informalexample"><pre class="programlisting">// Convert milliseconds to a date object
startDate = new Date(startDate);
</pre></div></li><li class="listitem">This creates a new<code class="literal"> date</code> object from the millisecond time that JavaScript understands. A<code class="literal"> date</code> object has a range of functions we can use to convert the date into a variety of formats.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note119"/>Note</h3><p>Notice, we didn't include<code class="literal"> var</code> this time before the<code class="literal"> startTime</code> variable name. This is because you only need to declare<code class="literal"> var</code> the first time you create the variable.</p></div></li><li class="listitem">Using our<code class="literal"> date</code> object that we just created, we can access an ISO date string of our date required by the iAd calendar. Continue adding the following code to our code:<a class="indexterm" id="id336"/><div class="informalexample"><pre class="programlisting">//Get the ISO string for the date
var startDateISO = startDate.toISOString();
</pre></div></li><li class="listitem">This accesses our<code class="literal"> startDate</code> date object and calls its<code class="literal"> toISOString</code> function; we then save this value in the variable<code class="literal"> startDateISO</code>. An ISO date string is an internationalized standard, and used by our iAd to create the calendar dates. We could just cut out these steps and create the ISO date string directly. However, it's better to work with more manageable readable dates. For example, the ISO date for our start time is<code class="literal"> 2011-08-16T13:30:00.000Z</code>.</li><li class="listitem">With our start date in the right format, we also need to create an end date and time for our event. We'll do this in exactly the same way as our start time, but use a different time in the future. Add the following block of code:<div class="informalexample"><pre class="programlisting">// Convert readable date into milliseconds
var endDate = Date.parse("Tue, 16 Aug 2011 20:30:00 GMT");
// Convert milliseconds to a date object
endDate = new Date(endDate);
// Get the ISO string for the date
var endDateISO = endDate.toISOString();
</pre></div></li><li class="listitem">Exactly as we did for our start time, we now have an ISO date string for the end time of our event.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note120"/>Note</h3><p>To update this for your own event, you'd adjust the start time and end time in the<code class="literal"> Date.parse()</code> function. Use the preceding examples as a template for your time. To specify different time zones, you can add the offset after the<code class="literal"> GMT</code> at the end. For example,<code class="literal"> GMT+0430</code> would offset the time four and a half hours east of the Greenwich meridian and<code class="literal"> GMT-400</code> would offset the time four hours west of GMT and give you USA Eastern Time.</p></div></li><li class="listitem">With our dates ready, we can now create the event object required by the iAd framework. Add this code to the end of your<code class="literal"> touch Up Inside</code> event function:<div class="informalexample"><pre class="programlisting">// Setup the event object
var theEvent = {
"description": "Aviation Awards 2011",
"location": "Brighton, UK",
"summary": "Acrobatics and airplanes!",
"start": startDateISO,
"end": endDateISO
};
</pre></div></li><li class="listitem">This object contains a list of properties and values required to create an event. We're able to take the<code class="literal"> startDateISO</code> and<code class="literal"> endDateISO</code> values and add them to the<code class="literal"> start</code> and<code class="literal"> end</code> properties of our object.<a class="indexterm" id="id337"/></li><li class="listitem">Before we're able to display the calendar window, we need to tell our ad where to position the calendar<span class="strong"><strong> popover</strong></span>. A popover is an iPad-specific element that overlays on top of the other user interface objects, and typically appears next to the button that activated it. We need to get the position of our button and adjust it slightly to display the calendar popover in the right place. Assuming your button is near the center of the screen, return to the iAd Producer canvas and select the button object. Open the inspector pane and expand the<span class="strong"><strong> Layout</strong></span> section:<div class="mediaobject"><img alt="Time for action — using the calendar" src="graphics/1321_08_12.jpg"/></div></li><li class="listitem">We can use these layout metrics to calculate the X and Y positions of our popover. The X position is how far left our popover should show from, and Y is how far from the top of the device screen it should be. To calculate the X position and cause our popover to appear to the right of our button, we take the<span class="strong"><strong> Left</strong></span> value, in this case, above<span class="strong"><strong> 394</strong></span> and add it to the<span class="strong"><strong> Width</strong></span>, in this case,<span class="strong"><strong> 236</strong></span>, giving a final X value of<code class="literal"> 630</code>. We want the popover to appear in the center right of the button, so our Y value is calculated by taking the<span class="strong"><strong> Top</strong></span> value, in this example<span class="strong"><strong> 360</strong></span>, and adding half of the button<span class="strong"><strong> Height</strong></span>, in this case<span class="strong"><strong> 24</strong></span>, giving a final Y value of<code class="literal"> 384</code>. With these values, we can create our position object and add the following to the function:<a class="indexterm" id="id338"/><div class="informalexample"><pre class="programlisting">// On iPad so set the position for the popover
var calPosition = {
'x':630,
'y':384
};
</pre></div></li><li class="listitem">Because we're using integers—number values, instead of strings, we don't need to wrap our position values in quotes.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note121"/>Note</h3><p>As this is only necessary on iPad, we would leave the<code class="literal"> calPosition</code> empty for an iPhone ad because it uses the entire screen when adding a calendar event. Remember, if you move your button, you'll also have to update these values.</p></div></li><li class="listitem">We'll quickly create an empty listener like we did for our e-mail composer. We don't need any feedback to successful or failed calendar events, so we can just use the following:<div class="informalexample"><pre class="programlisting">// Empty listener
var listener = {};
</pre></div></li><li class="listitem">This will prevent the calendar from not showing because it can't find the listener.</li><li class="listitem">With all our objects set up, we can finally tell the iAd framework to show the popover. Add this final line of code to the end of our function:<a class="indexterm" id="id339"/><div class="informalexample"><pre class="programlisting">//show the popover
ad.calendar.presentComposer(theEvent, listener, calPosition);
</pre></div></li><li class="listitem">This tells our advert's calendar to present the event popover and passes it the event object that we created, the empty listener, and the position object for the location of the popover on the screen.</li><li class="listitem">Save the project and then test your new button! Your final code should look like the following screenshot:</li></ol></div><div class="mediaobject"><img alt="Time for action — using the calendar" src="graphics/1321_08_18.jpg"/></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec09"/>What just happened?</h2></div></div></div><p>Using the Date object in JavaScript, we converted human-readable dates into a format that our iAd and iOS device could translate into a machine-readable format. By creating two dates, for the start and end time of an event, we then set up an event object that we can pass to the device. This event object holds details of the event along with the start and end time we converted. Finally, as our ad was for the iPad, we had to set up an object defining the X and Y positions on the screen where the popover should appear. Our popover calendar will look a little like the following screenshot:</p><div class="mediaobject"><img alt="What just happened?" src="graphics/1321_08_13.jpg"/></div><p>The popover gives the user the chance to edit the event, make the event reoccurring, or add an alarm to remind them. Once the user taps, the event is added to the in-built calendar app on their device, ensuring we keep presence with the user after they've closed our ad.</p><p>On the iPhone, we wouldn't need to set a coordinate for the popover and leave the position object empty because the iPhone automatically fills the entire screen with our calendar view.</p></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec10"/>Have a go hero</h2></div></div></div><p>A button in the middle of a blank page isn't very compelling and unlikely to inspire our user to add the event to their calendar. Make your page interesting with some images and information about the event, for example, why not try the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add one or more pictures from past events</li><li class="listitem" style="list-style-type: disc">Use labels with details of the event</li><li class="listitem" style="list-style-type: disc">Update the background of the page so it matches the rest of our advert</li><li class="listitem" style="list-style-type: disc">Don't forget to include a back button so the user can return to the main menu!</li></ul></div></div></div>
<div class="section" title="Playing audio"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec09"/>Playing audio</h1></div></div></div><p>iAd Producer has an audio object where the user can tap a play button to hear an audio file included in our ad. This works great for songs and sound bites, but we can also trigger audio clips from JavaScript. As we're using JavaScript to play our audio file, we can use any event in our ad to initiate the audio.</p></div>
<div class="section" title="Time for action &#x2014; controlling an audio player"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec10"/>Time for action — controlling an audio player</h1></div></div></div><p>Let's combine an audio object from the object library with some JavaScript code to make our audio clip play every time the user shakes the device:<a class="indexterm" id="id340"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">We'll use our example project<code class="literal"> Dino Stores</code> that we built at the beginning of the book and make the dinosaurs roar each time they shake our<span class="strong"><strong> Shake to Change</strong></span> gallery. Open the project in iAd Producer now. If you haven't completed the project, you can use the<code class="literal"> 6.Dino Stores - Store Finder</code> in the<code class="literal"> Dino Stores</code> exercises folder.</li><li class="listitem">Open the<span class="strong"><strong> Shake to Change</strong></span> page on the canvas. From the object library, add an audio object to the canvas and position it off screen so the user won't be able to see it.</li><li class="listitem">With the object selected, expand the inspector pane and select<span class="strong"><strong> roar-noise.m4a</strong></span> as the audio clip's file, as shown in the following screenshot:<div class="mediaobject"><img alt="Time for action — controlling an audio player" src="graphics/1321_08_16.jpg"/></div></li><li class="listitem">Select the shake view object by clicking on the dinosaur image. Right-click on it and select<span class="strong"><strong> Object Events</strong></span> |<span class="strong"><strong> Did Shake</strong></span> |<span class="strong"><strong> Execute JavaScript</strong></span>. This will open the code editor and add a placeholder function for this event.</li><li class="listitem">When the shake event occurs, we want our audio object to play, so add this JavaScript to the function:<div class="informalexample"><pre class="programlisting">this.viewController.outlets.audio.play();
</pre></div></li><li class="listitem">This simply gets the audio object from our page and calls its<code class="literal"> play</code> function, which surprisingly will make our audio clip play! Make sure the outlet value in the object's inspector is set to<code class="literal"> audio</code>. It should be this by default if it's the only audio object on the page.</li><li class="listitem">Close the code editor and test the ad. Navigate to the<span class="strong"><strong> Shake to Change</strong></span> page then shake the device. You'll hear the dinosaurs roar as the pages change.<a class="indexterm" id="id341"/></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec11"/>What just happened?</h2></div></div></div><p>By adding an audio object to our page, we can access it through JavaScript using its<code class="literal"> outlet</code> property. We moved the audio object off the canvas, so it's included in the page but not visible to the user, and when the shake event of our shake view occurred, we called the<code class="literal"> play</code> function of the audio object. You might notice a delay the first time the device is shaken as the audio loads, but subsequent shakes will cause the audio to play immediately as the device will cache it. To minimize the delay, keep the audio short and optimized, as obviously, smaller files will play quicker than larger ones.</p></div></div>
<div class="section" title="Tweeting with Twitter"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec11"/>Tweeting with Twitter</h1></div></div></div><p>When Apple released iOS 5 in the fall of 2011, they included support for tweeting text, links, and images direct from various parts of the operating system. This<span class="strong"><strong> Twitter</strong></span> support has been extended to our iAds and is a great marketing tool due to its sharing reach.</p><p>Twitter is a popular micro-blogging service where users can send small, timely updates, limited to 140 characters to people who follow, or subscribe, to them.<a class="indexterm" id="id342"/>
</p></div>
<div class="section" title="Time for action &#x2014; tweeting the tweet"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec12"/>Time for action — tweeting the tweet</h1></div></div></div><p>As not every device will necessarily be running iOS 5, we'll create a check to ensure that the device supports Twitter, and then let the user tweet and share an update about our brand:<a class="indexterm" id="id343"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Open the<code class="literal"> Dino Stores</code> project we used in the last exercise. We'll add a button to the menu screen that'll open up the Twitter dialog. Open the menu page on the canvas and then drag the button from the object library.</li><li class="listitem">Position the menu near the bottom of the page and expand it to fill the width. Update the text with a call to action, such as<code class="literal"> Tweet a dino fact!</code>. Your button may look a little like the following screenshot:<div class="mediaobject"><img alt="Time for action — tweeting the tweet" src="graphics/1321_08_19.jpg"/></div></li><li class="listitem">Click and select the button, and select<span class="strong"><strong> Execute JavaScript</strong></span> as the<span class="strong"><strong> Touched Up Inside</strong></span> action to create the event and automatically open the code editor.</li><li class="listitem">Remove the placeholder comment<code class="literal"> //Code here</code> and replace it with the following code:<a class="indexterm" id="id344"/><div class="informalexample"><pre class="programlisting">if(window.ad.twitterComposer) {
window.ad.twitterComposer.text = 'The longest dinosaur was Seismosaurus, was as long as five double-decker buses - Dino Stores';
window.ad.twitterComposer.URLs = ['http://www.bencollier.net/'];
window.ad.twitterComposer.present();
}
</pre></div></li><li class="listitem">This checks if the Twitter composer is available and then adds the text and URL that'll compose the tweet. Anything contained in between the curly braces after the<code class="literal"> if(window.ad.twitterComposer)</code> will only run if the Twitter composer object exists. We can now add an<code class="literal"> else</code> block of code that'll run if the Twitter composer is unavailable.</li><li class="listitem">Immediately after the code we just added, insert the following:<div class="informalexample"><pre class="programlisting">else {
alert('You need iOS 5 with a Twitter account to send this tweet');
}
</pre></div></li><li class="listitem">This will only run if the earlier check doesn't find the Twitter composer to be available; and will cause an alert to be presented to the user.</li><li class="listitem">We can test our ad out, either in the iOS Simulator or on a device. You'll need to make sure your iPhone or iPod is running iOS 5 and that you've configured your Twitter account. When using the simulator, you can change the version of iOS it is running from iAd Producer. From the menu bar, select<span class="strong"><strong> Export</strong></span> |<span class="strong"><strong> Simulator iOS Version</strong></span> |<span class="strong"><strong> iOS 5.x</strong></span>. Save your project and click on the<span class="strong"><strong> Simulate</strong></span> button.<a class="indexterm" id="id345"/><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note122"/>Note</h3><p>To log in to Twitter on your iOS device or in the simulator, open the<span class="strong"><strong> Settings</strong></span> app and then select<span class="strong"><strong> Twitter</strong></span>. You'll be prompted for your username and password and have the opportunity to create an account, if you haven't already.</p></div></li><li class="listitem">Clicking on the<span class="strong"><strong> Tweet</strong></span> button will now open up the<span class="strong"><strong> Twitter composer</strong></span> window that we configured:<div class="mediaobject"><img alt="Time for action — tweeting the tweet" src="graphics/1321_08_20.jpg"/></div></li><li class="listitem">If you see our error alert message appear, make sure you're running iOS 5 with your account configured correctly! You can upgrade your device using iTunes.<a class="indexterm" id="id346"/></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec12"/>What just happened?</h2></div></div></div><p>Using the Twitter composer, introduced in iOS 5, we tweeted a basic text tweet with a link attached to it. If we tried to access the Twitter composer when our user wasn't on a Twitter-enabled device, our ad would crash. So checking its availability is vital when targeting older versions of iOS.</p></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec13"/>Have a go hero</h2></div></div></div><p>If you feel confident with your Twitter code, consider improving it as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Change the simulator version to a version prior to iOS 5, so you can test the fallback message.</li><li class="listitem" style="list-style-type: disc">For the more advanced user, consider hiding the button when the Twitter composer isn't available. We could do this using the page event<span class="strong"><strong> viewControllerViewDidAppear</strong></span>, the<code class="literal"> if</code> statement we used earlier, and setting the<code class="literal"> hidden</code> property of the button outlet to<code class="literal"> true</code>.</li></ul></div></div></div>
<div class="section" title="The debugger"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec13"/>The debugger</h1></div></div></div><p>We're not all perfect, and sometimes we'll make mistakes when writing our JavaScript code; fortunately, iAd Producer has two built-in tools it uses to highlight and discover errors in your code.<a class="indexterm" id="id347"/>
</p><div class="section" title="Error checking syntax"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec14"/>Error checking syntax</h2></div></div></div><p>If you have an error with your code syntax—the rules that define the structure of your code, iAd Producer will prompt you when you try to save that JavaScript file. iAd Producer identifies the line where your error occurs and allows you to save the file anyway (not recommended) or edit it.<a class="indexterm" id="id348"/>
</p><div class="mediaobject"><img alt="Error checking syntax" src="graphics/1321_08_14.jpg"/></div><p>General syntactical errors you should check for include:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Forgetting to end a line with a semicolon.</li><li class="listitem" style="list-style-type: disc">Not separating an object or array values with a comma.</li><li class="listitem" style="list-style-type: disc">Including a comma on the last item in an array or an object. For example,<code class="literal"> ['item one', 'item two', last item',]</code> would be incorrect as there is an extra comma at the end.<a class="indexterm" id="id349"/></li><li class="listitem" style="list-style-type: disc">Using the incorrect case. JavaScript and its variables are case sensitive, so<code class="literal"> thisVariable</code> and<code class="literal"> ThisVARIABLE</code> are considered two separate values.</li><li class="listitem" style="list-style-type: disc">Forgetting to close a bracket or brace.</li></ul></div></div><div class="section" title="Using the debugger"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec15"/>Using the debugger</h2></div></div></div><p>If your code is syntactically correct but has errors when it's running, the debugger window will appear and highlight the line of code where the error occurred. For example, if we try and access a variable that we haven't assigned a value to, we might find the debugger showing a warning of accessing an undefined function or value.<a class="indexterm" id="id350"/>
</p><div class="mediaobject"><img alt="Using the debugger" src="graphics/1321_08_15.jpg"/></div><p>If you're familiar with development, you can set breakpoints to pause your ad at certain parts of your code. To set these, just double-click on the line number of the line you'd like to pause at. You can then use the<span class="strong"><strong> continue</strong></span> button in iAd Producer to resume the execution of the JavaScript.<a class="indexterm" id="id351"/>
</p></div><div class="section" title="Coding conventions"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec16"/>Coding conventions</h2></div></div></div><p>When you're writing JavaScript code, you should make sure it complies with some basic rules and best practices used by developers:<a class="indexterm" id="id352"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Name the start variables with lowercase by using camel case, which we looked at earlier in the chapter. Variable names should be verbose and relevant to the data they hold.</li><li class="listitem" style="list-style-type: disc">Comment your code so it's understandable to you when you revisit the code, and clear for other developers that may look at it in the future.</li><li class="listitem" style="list-style-type: disc">End each statement with a semicolon.</li><li class="listitem" style="list-style-type: disc">Code within functions should be indented from the edge using the<span class="emphasis"><em> Tab</em></span> key or four spaces. Notice how the second example is more readable and clear:<a class="indexterm" id="id353"/></li></ul></div><div class="mediaobject"><img alt="Coding conventions" src="graphics/1321_08_17.jpg"/></div></div><div class="section" title="Have a go hero"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec17"/>Have a go hero</h2></div></div></div><p>Having learnt some example code snippets, the style that your code should be, and how to identify and fix errors in your code, you could add some enhanced functionality to the other example projects we've created so far. You could:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add an audio clip to your shake view in the<code class="literal"> Coffee Beans</code> project</li><li class="listitem" style="list-style-type: disc">Add multiple event buttons to the upcoming<span class="strong"><strong> Events</strong></span> page in the<code class="literal"> Cloud 9 - iPad</code> project, each creating calendar events with different times and details</li><li class="listitem" style="list-style-type: disc">This should show you how multiple event functions can exist within one page's JavaScript file</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;" title="Note"><h3 class="title"><a id="note123"/>Note</h3><p>You may want to consider renaming your button outlets when you have multiple buttons on screen. This will make navigating between the functions in your JavaScript file easier.</p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Read the Apple documentation to find out the other possibilities of JavaScript in your iAd, available at<a class="ulink" href="http://developer.apple.com"> http://developer.apple.com</a></li><li class="listitem" style="list-style-type: disc">Create an entirely new ad for your own product or brand, using a variety of techniques that you've learnt so far<a class="indexterm" id="id354"/></li></ul></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec14"/>Summary</h1></div></div></div><p>JavaScript is an incredibly powerful and versatile language, which, coupled with the iAd JS framework, can create some amazingly dynamic and rich ads. In this chapter, we've only brushed upon the potential of expanding our iAds with simple code snippets that have allowed us to:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Edit values of objects that aren't exposed to us in the iAd Producer inspector pane</li><li class="listitem" style="list-style-type: disc">Add events to the user's calendar and continue to remind them of us once they've left our ad</li><li class="listitem" style="list-style-type: disc">Send e-mails with dynamic content to let users contact us</li><li class="listitem" style="list-style-type: disc">Use the code editor and debugger to catch common errors</li></ul></div><p>With our adverts looking great, having rich interactivity, and giving our users memorable experiences, let's take a look at the logistics of managing a successful iAd campaign.</p></div></body></html>