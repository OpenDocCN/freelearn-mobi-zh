- en: Chapter 1. Arduino and iOS – Platforms and Integration
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 Arduino和iOS – 平台和集成
- en: This chapter will give you a brief introduction to the Arduino and iOS platforms
    and the integration methods between them. Moreover, you will learn how to set
    up the development environments on both the platforms and get them ready for the
    projects in the following chapters.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将简要介绍Arduino和iOS平台及其之间的集成方法。此外，你将学习如何在两个平台上设置开发环境，并为下一章的项目做好准备。
- en: We will assume that you already have some basic knowledge of the two platforms
    and electronics, and you are able to build a circuit, at least by using a breadboard.
    However, the main subject of the chapter is to learn how to integrate the two
    platforms together.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设你已经对这两个平台和电子学有一些基本知识，并且能够至少使用面包板搭建电路。然而，本章的主要目的是学习如何将这两个平台集成在一起。
- en: Arduino has been an Open Hardware device since its early origin, and you can
    easily find any kind of information you need about it. Conversely, the iOS platform
    is not very open, especially from the hardware point of view. You cannot design
    and build a hardware device that works with iOS devices without joining an Apple
    dedicated program (MFi). The program has strong requirements that only large companies
    can fulfill.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino自其早期起源以来一直是一款开放硬件设备，你可以轻松找到关于它的任何所需信息。相反，iOS平台在硬件方面并不开放。你无法设计并构建一个与iOS设备兼容的硬件设备，除非加入苹果的专用项目（MFi）。该计划要求严格，只有大公司才能满足。
- en: Tip
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**More information on Arduino and iOS**'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '**关于Arduino和iOS的更多信息**'
- en: More information on Arduino and iOS development can be found at [http://www.arduino.cc](http://www.arduino.cc)
    and [http://apple.co/1HThS1O](http://apple.co/1HThS1O) respectively.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 关于Arduino和iOS开发的更多信息可以在[http://www.arduino.cc](http://www.arduino.cc)和[http://apple.co/1HThS1O](http://apple.co/1HThS1O)分别找到。
- en: Nevertheless, at the end of the chapter, you will learn how to transfer data
    between the two platforms in ways that also allow your applications to be sold
    on the iTunes App Store. This consists of nothing that is too complex. We are
    going to use TCP/IP or Bluetooth BLE.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，在章节的结尾，你将学习如何在两种平台之间以允许你的应用程序在iTunes App Store上销售的方式传输数据。这并不复杂。我们将使用TCP/IP或蓝牙BLE。
- en: 'The following are the topics that will be covered in this chapter:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Hardware and software requirements
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 硬件和软件要求
- en: Arduino and the development environment setup
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino和开发环境设置
- en: iOS and the development environment setup
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: iOS和开发环境设置
- en: Communication methods between the Arduino and iOS devices
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino和iOS设备之间的通信方法
- en: Hardware and software requirements
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 硬件和软件要求
- en: To implement all the projects in this book, you will need some hardware and
    software components, which can be easily bought from any of your local stores
    or over the Internet.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现本书中的所有项目，你需要一些硬件和软件组件，这些组件可以从你当地的任何商店或通过互联网轻松购买。
- en: Hardware requirements for the Arduino platform
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Arduino平台的硬件要求
- en: 'To execute the projects in this book, you mainly need Arduino UNO and the following
    additional hardware components:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行本书中的项目，你主要需要Arduino UNO和以下额外的硬件组件：
- en: Arduino UNO R3 ([http://bit.ly/1IInOke](http://bit.ly/1IInOke)).
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Arduino UNO R3 ([http://bit.ly/1IInOke](http://bit.ly/1IInOke))。
- en: A USB cable (A to B type).
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一条USB线（A到B类型）。
- en: A 9V external DC power supply (optional but recommended).
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个9V外部直流电源（可选但推荐）。
- en: An official Wi-Fi Shield ([http://bit.ly/1UQgq9v](http://bit.ly/1UQgq9v), [http://bit.ly/1i5k1Cn](http://bit.ly/1i5k1Cn)).
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一块官方Wi-Fi盾牌 ([http://bit.ly/1UQgq9v](http://bit.ly/1UQgq9v), [http://bit.ly/1i5k1Cn](http://bit.ly/1i5k1Cn))。
- en: A Bluetooth BLE nRF8001 breakout board from Adafruit ([http://bit.ly/1MvkyJm](http://bit.ly/1MvkyJm)).
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一块来自Adafruit的蓝牙BLE nRF8001扩展板 ([http://bit.ly/1MvkyJm](http://bit.ly/1MvkyJm))。
- en: A digital multimeter (optional but strongly recommended).
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个数字万用表（可选但强烈推荐）。
- en: A breadboard (the larger, the better).
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个面包板（越大越好）。
- en: Some tools (skewdrivers, pliers, tweezers, nippers, and so on).
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一些工具（斜口钳、钳子、镊子、剪钳等）。
- en: Some Male/Male and Male/Female jumper wires (the more, the better; they are
    never enough!)
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一些公对公和公对母的跳线（越多越好；它们永远不够！）
- en: Some electronics components, which will be shown chapter by chapter.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一些电子组件，将在每一章中展示。
- en: A rover robot for a project in [Chapter 5](part0039.xhtml#aid-1565U1 "Chapter 5. TV
    Set Constant Volume Controller"), *TV Set Constant Volume Controller*.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个用于[第5章](part0039.xhtml#aid-1565U1 "第5章. 电视恒定音量控制器")项目的巡游机器人，“电视恒定音量控制器”。
- en: An iBeacon for a project in [Chapter 6](part0045.xhtml#aid-1AT9A1 "Chapter 6. Automatic
    Garage Door Opener"), *Automatic Garage Door Opener* ([http://apple.co/1GXnt7Z](http://apple.co/1GXnt7Z)).
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[第 6 章](part0045.xhtml#aid-1AT9A1 "第 6 章。自动车库门开启器")中的项目 *自动车库门开启器* 的 iBeacon
    ([http://apple.co/1GXnt7Z](http://apple.co/1GXnt7Z))。'
- en: Tip
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Buy original products only!**'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**仅购买正品！**'
- en: There are a lot of counterfeited Arduino products, especially online, that are
    sold for a few dollars. Apart from the moral considerations, an original product
    will provide you with much more quality and certainty to right functioning. Projects
    in this book are developed and tested on original products. You have been warned!
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 许多 Arduino 产品被伪造，尤其是在网上，售价仅为几美元。除了道德考虑之外，正品将为您提供更多质量和确保正确功能的确信。本书中的项目是在正品上开发和测试的。您已被警告！
- en: '**The official Wi-Fi Shield**'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**官方 Wi-Fi 扩展板**'
- en: The official Wi-Fi Shield is not cheap, and it can be tough to make it work
    with iOS sometimes. Many other products are cheaper. Some are compatible, others
    are not. If you choose to use a different Wi-Fi Shield, you need to be sure that
    it works with the Wi-Fi library that is included in the Arduino IDE. Otherwise,
    you will have to modify the Arduino code in this book on your own. You can also
    buy this Shield at [http://bit.ly/1i5k1Cn](http://bit.ly/1i5k1Cn).
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 官方 Wi-Fi 扩展板并不便宜，有时与 iOS 一起使用可能会很困难。许多其他产品更便宜。有些是兼容的，有些则不是。如果您选择使用不同的 Wi-Fi
    扩展板，请确保它与 Arduino IDE 中包含的 Wi-Fi 库兼容。否则，您将不得不自行修改本书中的 Arduino 代码。您也可以在 [http://bit.ly/1i5k1Cn](http://bit.ly/1i5k1Cn)
    购买此扩展板。
- en: '**Arduino.cc versus Arduino.org conflict**'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**Arduino.cc 与 Arduino.org 冲突**'
- en: At the time of writing this book, Arduino split in two companies—arduino.cc
    and arduino.org. They are in the middle of a legal battle, and there is a lot
    of confusion about products with the same name, which are sold by both the companies.
    Though the situation is getting clearer in USA and Asia, it is still unpredictable
    in Europe. In this book, we will be using the products and development environment
    from arduino.cc.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本书时，Arduino 分裂为两家公司——arduino.cc 和 arduino.org。它们正处于法律斗争中，关于两家公司销售的同名产品存在很多混淆。尽管在美国和亚洲的情况正在变得清晰，但在欧洲仍然不可预测。在这本书中，我们将使用
    arduino.cc 的产品和开发环境。
- en: '**The Bluetooth Breakout board**'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**蓝牙断路板**'
- en: The Bluetooth device that we chose has been tested many times on different projects
    and works well. There are many other devices that are available on the market
    and which can do exactly the same job. If you decide to use a different Bluetooth
    device, be sure that is a BLE (Bluetooth Low Energy) device, which is also known
    as Bluetooth 4.0, Bluetooth Low Energy and Bluetooth Smart. You can easily write
    iOS applications, which communicate through Bluetooth only if it is Bluetooth
    BLE.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们选择的蓝牙设备已在多个项目中进行了多次测试，表现良好。市场上还有许多其他设备，可以完成完全相同的工作。如果您决定使用不同的蓝牙设备，请确保它是一个
    BLE（蓝牙低功耗）设备，也称为蓝牙 4.0、蓝牙低功耗和蓝牙智能。只有当它是蓝牙 BLE 时，您才能轻松编写仅通过蓝牙通信的 iOS 应用程序。
- en: Software requirements for the Arduino platform
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Arduino 平台的软件要求
- en: All that you need is Arduino IDE 1.6.4, the libraries included in the IDE, and
    some additional libraries that are available online. You will be instructed to
    download them when needed.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 您所需的一切是 Arduino IDE 1.6.4、IDE 中包含的库以及一些可在网上获得的附加库。当需要时，您将被告知下载它们。
- en: Hardware requirements for the iOS platform
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: iOS 平台的硬件要求
- en: The Apple development environment that is needed to write iOS applications (Xcode)
    is available only for the Mac OS X operating system (the 10.10.3 Yosemite version).
    So, you need a recent Intel-based Mac computer to run Yosemite.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 编写 iOS 应用程序所需的 Apple 开发环境（Xcode）仅适用于 Mac OS X 操作系统（10.10.3 Yosemite 版本）。因此，您需要一个配备最新英特尔处理器的
    Mac 计算机来运行 Yosemite。
- en: Moreover, you need an iOS device (iPhone, iPad, or iPod touch) that runs iOS
    8.4 and supports Bluetooth 4.0.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您需要一个运行 iOS 8.4 且支持蓝牙 4.0 的 iOS 设备（iPhone、iPad 或 iPod touch）。
- en: If you are already a member of the **Apple Developer Program** (**ADP**) for
    iOS (which costs about $99 per year), your life will be easy. Unfortunately, Apple
    doesn't allow you to upload programs that are written with Xcode to your own device
    if you are not a member of ADP. You can still run the programs in the device simulator,
    but it will not be able to simulate the Bluetooth BLE subsystem. This will be
    a problem for projects that use Bluetooth BLE. Anyway, adapting the code presented
    in this book to use Wi-Fi instead of Bluetooth BLE should not be too complex.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经是iOS（每年约99美元）的**Apple Developer Program**（ADP）成员，你的生活将会变得简单。不幸的是，如果你不是ADP的成员，苹果不允许你将使用Xcode编写的程序上传到自己的设备。即使你不是ADP的成员，你仍然可以在设备模拟器中运行程序，但它将无法模拟蓝牙BLE子系统。这将是一个使用蓝牙BLE的项目的问题。无论如何，将本书中展示的代码修改为使用Wi-Fi而不是蓝牙BLE不应该太复杂。
- en: Tip
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Xcode and the new Apple rules**'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '**Xcode和新的苹果规则**'
- en: At the time of writing this book, Apple announced a new version of iOS (version
    9) and Xcode (version 7) that are now in their beta versions. Some restriction
    rules will be removed from these versions, and the user should be able to upload
    self-written apps to their own devices even if they are not subscribed to the
    Apple Developer Program.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书编写时，苹果宣布了一个新的iOS版本（版本9）和Xcode版本（版本7），它们现在处于测试版本。这些版本将取消一些限制规则，用户即使没有订阅Apple
    Developer Program，也应该能够将自编写的应用程序上传到自己的设备。
- en: Software requirements for the iOS platform
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: iOS平台的软件要求
- en: As already mentioned, to write applications for the iOS platform, you need Xcode
    (6.4 at the time of writing this book) and some additional open source libraries
    that are available online. You will be instructed to download them when needed.
    Xcode runs exclusively on Mac with OS X (version 10.10.3 Yosemite or higher).
    Even if most of the code of this book can run on the previous versions of iOS,
    your iOS device has to be able to run iOS 8.3 and higher since it is the version
    that is used across the book.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，要为iOS平台编写应用程序，你需要Xcode（本书编写时的版本为6.4）和一些可在网上找到的额外开源库。当需要时，你将被告知下载它们。Xcode仅在Mac的OS
    X（版本10.10.3 Yosemite或更高版本）上运行。即使本书中的大部分代码可以在iOS的早期版本上运行，但你的iOS设备必须能够运行iOS 8.3及以上版本，因为本书中使用的正是这个版本。
- en: Arduino and the development environment setup
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Arduino和开发环境设置
- en: Arduino is a very basic but powerful microprocessor board. It allows you to
    acquire digital and analog inputs, process them, and control external devices.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino是一个非常基础但功能强大的微处理器板。它允许你获取数字和模拟输入，处理它们，并控制外部设备。
- en: You can find all the details about this device at [http://bit.ly/1IInOke](http://bit.ly/1IInOke).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[http://bit.ly/1IInOke](http://bit.ly/1IInOke)找到有关此设备的所有详细信息。
- en: What makes it different from many other similar (or even more powerful) devices
    on the market is that it has a very simple development environment (IDE) and plenty
    of libraries, which allow you to make projects in a matter of hours. Most of these
    libraries are already available in the IDE or are very easy to add.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 它与市场上许多其他类似（甚至更强大）的设备的不同之处在于，它有一个非常简单的开发环境（IDE）和大量的库，这允许你只需几小时就能完成项目。这些库中的大多数已经在IDE中可用，或者很容易添加。
- en: Tip
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Arduino UNO – Arduino MEGA**'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**Arduino UNO – Arduino MEGA**'
- en: In this book, we are going to refer to Arduino UNO. Many other boards from Arduino
    are available with different hardware characteristics, FLASH, and the RAM memory
    size. Most of the projects in this book will run on Arduino MEGA with no changes
    in their code and minor changes in hardware.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将参考Arduino UNO。Arduino还有许多其他具有不同硬件特性、FLASH和RAM内存大小的板。本书中的大多数项目在Arduino
    MEGA上运行时，代码无需更改，硬件只需做少量修改。
- en: '**Other platforms**'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**其他平台**'
- en: Every few weeks, a new platform that is compatible with Arduino comes out. Two
    of these platforms, which are known to be compatible with the projects in this
    book, are RFduino, which supports Bluetooth BLE without any additional hardware,
    (for more information, visit [http://www.rfduino.com](http://www.rfduino.com))
    and Teensy (to know more about Teensy, visit [https://www.pjrc.com/teensy](https://www.pjrc.com/teensy)).
    Some changes in hardware and/or software may be necessary to work with these platforms.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 每隔几周，就会推出一个与Arduino兼容的新平台。其中两个与本书中的项目兼容的平台是RFduino，它支持蓝牙BLE而无需任何额外硬件（更多信息，请访问[http://www.rfduino.com](http://www.rfduino.com)）和Teensy（了解更多关于Teensy的信息，请访问[https://www.pjrc.com/teensy](https://www.pjrc.com/teensy)）。与这些平台一起工作可能需要进行一些硬件和/或软件的更改。
- en: IDE installation
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IDE安装
- en: The process of installing the IDE is very quick and easy, especially because
    you don't need to install additional drivers on OS X.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 IDE 的过程非常快速且简单，尤其是在您不需要在 OS X 上安装额外的驱动程序的情况下。
- en: 'You can use the following steps to have the development environment ready in
    minutes:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用以下步骤在几分钟内准备好开发环境：
- en: Make sure that you have installed an application that can open a ZIP file. If
    you don't have such an application, you can find them available for free on the
    App Store (The Unarchiver may be an option, which can be downloaded from [http://apple.co/1gT7W2D](http://apple.co/1gT7W2D)).
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保您已安装可以打开 ZIP 文件的应用程序。如果您没有此类应用程序，您可以在 App Store 中免费找到它们（The Unarchiver 可能是一个选择，可以从
    [http://apple.co/1gT7W2D](http://apple.co/1gT7W2D) 下载）。
- en: Download Arduino IDE 1.6.4 from [http://bit.ly/1gT8u8E](http://bit.ly/1gT8u8E).
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 [http://bit.ly/1gT8u8E](http://bit.ly/1gT8u8E) 下载 Arduino IDE 1.6.4。
- en: Usually, the browser will download the file in your `Downloads` folder. Open
    this folder and unzip the ZIP file (`Arduino-1.6.4-macosx.zip`).
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通常，浏览器会在您的 `下载` 文件夹中下载文件。打开此文件夹并解压 ZIP 文件（`Arduino-1.6.4-macosx.zip`）。
- en: Move the `Arduino.app` file to your app folder.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `Arduino.app` 文件移动到您的应用程序文件夹。
- en: The development environment is now ready to run.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 开发环境现在已准备好运行。
- en: Just to be sure that everything is working as expected, upload one of the included
    examples (Blink is fine) to your UNO. Refer to [http://bit.ly/1KsUhqv](http://bit.ly/1KsUhqv)
    in order to properly configure the board and port in the IDE.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确保一切按预期工作，请将包含的示例之一（闪烁即可）上传到您的 UNO。请参考 [http://bit.ly/1KsUhqv](http://bit.ly/1KsUhqv)
    以正确配置 IDE 中的板和端口。
- en: Tip
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**The IDE version to use**'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '**要使用的 IDE 版本**'
- en: The code in this book was tested with IDE 1.6.4, which is the latest version
    that is available at the time of writing this book. Even if a new version of the
    IDE is available, you should use the suggested version. The libraries that are
    included in different versions of the IDE usually vary, and this may cause unexpected
    behavior. You can test a newer IDE once you have completely built and tested the
    project on Arduino and iOS.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的代码是在 IDE 1.6.4 上测试的，这是撰写本书时的最新版本。即使有新的 IDE 版本可用，您也应该使用建议的版本。不同版本的 IDE 中包含的库通常不同，这可能会导致意外的行为。您可以在完全构建和测试
    Arduino 和 iOS 上的项目后测试新的 IDE。
- en: iOS and the development environment setup
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: iOS 和开发环境设置
- en: In the last few years, commonly named smartphones have become the most used
    personal devices. iPhone is one of the most used smartphones all over the world,
    and iPads have replaced personal computers in many cases.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去几年中，通常称为智能手机的设备已成为最常用的个人设备。iPhone 是全球使用最广泛的智能手机之一，而在许多情况下，iPad 已取代了个人电脑。
- en: iPhone, iPad, and iPod touch run the same operating system, which is called
    iOS. They have a neat and homogeneous user interface, which allows its users to
    interact with the device through simple gestures (such as tapping and double-tapping
    the screen) or complex gestures (such as swiping or pinching the screen).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: iPhone、iPad 和 iPod touch 运行相同的操作系统，称为 iOS。它们拥有整洁且统一的用户界面，允许用户通过简单的手势（如轻触和双击屏幕）或复杂的手势（如滑动或捏合屏幕）与设备交互。
- en: Applications that run on both iPhone and iPad can be easily written with minor
    changes, and the platforms are so powerful that almost any application can run
    on them.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在 iPhone 和 iPad 上运行的应用程序可以轻松编写，并且这两个平台都非常强大，几乎任何应用程序都可以在上面运行。
- en: We can directly go to the process of installing the development environment
    so that we can start having fun with iOS and Arduino.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以直接进入安装开发环境的过程，这样我们就可以开始享受 iOS 和 Arduino 的乐趣了。
- en: Xcode installation
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Xcode 安装
- en: 'You can perform the following steps to install Xcode in minutes:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以执行以下步骤在几分钟内安装 Xcode：
- en: Open the App Store application. Usually, you will find it in the Dock. Alternatively,
    you can run it from Launchpad or by navigating to **Finder** | **Applications**
    | **App Store**.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 App Store 应用程序。通常，您可以在 Dock 中找到它。或者，您可以从 Launchpad 运行它，或者通过导航到 **查找器** |
    **应用程序** | **App Store**。
- en: Connect to the App Store by using your account (browse **Store** | **Sign in**).
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用您的账户连接到 App Store（浏览 **商店** | **登录**）。
- en: Locate Xcode (navigate to **Categories** | **Developer Tools** or search for
    it).
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位 Xcode（导航到 **类别** | **开发者工具** 或搜索它）。
- en: Click on the **Get** button to start downloading.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **获取** 按钮开始下载。
- en: In a short span of time, the application will be downloaded and installed (depending
    on the speed of your Internet connection).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在很短的时间内，应用程序将被下载并安装（取决于您的互联网连接速度）。
- en: Communication methods between Arduino and iOS devices
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Arduino与iOS设备之间的通信方法
- en: 'iOS is not so open platform, especially from the hardware point of view. Apple
    requires that the hardware devices connected to iPhone or iPad should not only
    be compliant with straight requirements, but also be certified by Apple itself.
    For this, they need to join an Apple dedicated program (MFi: [http://apple.co/1PwSeWO](http://apple.co/1PwSeWO)).
    The requirements to join the program are very tight, and only a large company
    can fulfill them.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: iOS平台并不那么开放，尤其是从硬件角度来看。苹果要求连接到iPhone或iPad的硬件设备不仅应符合直接要求，而且还需要苹果本身的认证。为此，他们需要加入苹果的专用计划（MFi：[http://apple.co/1PwSeWO](http://apple.co/1PwSeWO)）。加入该计划的要求非常严格，只有大公司才能满足这些要求。
- en: Nevertheless, Apple allows the use of TCP/IP and Bluetooth BLE to communicate
    with any external device. These are the two methods that we are going to use all
    over the book to transfer data with Arduino. On Arduino's side, we have to choose
    additional hardware that is compatible with these two methods or, in a more technical
    jargon, these two protocols.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，苹果允许使用TCP/IP和蓝牙BLE与任何外部设备通信。这些是我们将在整本书中使用来通过Arduino传输数据的方法。在Arduino的一侧，我们必须选择与这两种方法兼容的附加硬件，或者用更技术性的术语来说，这两种协议。
- en: 'Arduino provides the following two Shields for TCP/IP communication:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino提供了以下两种盾以进行TCP/IP通信：
- en: The Ethernet Shield
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以太网盾
- en: The Wi-Fi Shield
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wi-Fi盾
- en: Both these Shields include an SD card bay to store data.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种盾都包括一个SD卡槽来存储数据。
- en: The Ethernet Shield is relatively cheap and very reliable. Since it uses an
    Ethernet connection, it's drawback is that it needs physical wiring to your home
    network or router. This reduces the flexibility of your projects.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 以太网盾相对便宜且非常可靠。由于它使用以太网连接，它的缺点是需要物理线连接到你的家庭网络或路由器。这减少了你项目的灵活性。
- en: Conversely, the Wi-Fi Shield allows you to install your Arduino board everywhere
    in your house without the awkwardness of wires. This is the reason why we chose
    to use the Wi-Fi Shield in this book.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，Wi-Fi盾允许你在家里任何地方安装Arduino板，而不需要线缆的尴尬。这就是我们选择在这本书中使用Wi-Fi盾的原因。
- en: The other connection method (protocol) that is allowed by Apple to transfer
    data to and from external devices is Bluetooth BLE (also known as Bluetooth 4.0).
    This protocol consumes less energy, but it's not compatible with the previous
    versions. If your iOS device is quite new, Bluetooth BLE will be supported. Please
    check this out on your device page at the Apple site.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 苹果允许的另一种将数据传输到外部设备的方法是蓝牙BLE（也称为蓝牙4.0）。此协议消耗的能源更少，但它与之前的版本不兼容。如果你的iOS设备相当新，它将支持蓝牙BLE。请在苹果网站上的设备页面上检查这一点。
- en: Tip
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**BLE supporting devices**'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '**支持BLE的设备**'
- en: If you wish to check whether a device supports BLE, visit [http://bit.ly/1blI106](http://bit.ly/1blI106).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你希望检查设备是否支持BLE，请访问[http://bit.ly/1blI106](http://bit.ly/1blI106)。
- en: Arduino doesn't provide a Bluetooth BLE Shield, but other vendors do. We chose
    the Bluetooth BLE nRF8001 breakout board from Adafruit.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: Arduino没有提供蓝牙BLE盾，但其他供应商有。我们选择了Adafruit的蓝牙BLE nRF8001分线板。
- en: Tip
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: '**Bluetooth 4.0**'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**蓝牙4.0**'
- en: You can learn more about Bluetooth 4.0 by visiting [http://bit.ly/1Pj9caw](http://bit.ly/1Pj9caw).
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过访问[http://bit.ly/1Pj9caw](http://bit.ly/1Pj9caw)了解更多关于蓝牙4.0的信息。
- en: TCP/IP versus Bluetooth
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: TCP/IP与蓝牙
- en: 'You may wonder which is the best communication method for iOS and Arduino.
    There is no right answer. This actually depends on your project and your requirements.
    The following table shows the main pros and cons of each method:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会想知道iOS和Arduino的最佳通信方法。没有正确答案。这实际上取决于你的项目和你的需求。以下表格显示了每种方法的主要优缺点：
- en: '| Method | Pros | Cons |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| 方法 | 优点 | 缺点 |'
- en: '| --- | --- | --- |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| **Wi-Fi** |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| **Wi-Fi** |'
- en: Arduino can be located almost everywhere in your house.
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino可以放在你家里的几乎任何地方。
- en: The iOS device can be everywhere (if the network is properly set, even on the
    other side of the world).
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: iOS设备可以无处不在（如果网络设置得当，甚至在世界另一端）。
- en: An SD card can be used to store data.
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SD卡可以用来存储数据。
- en: '|'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: This is expensive.
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这很贵。
- en: Even if data could be transferred with up to 54 Mbps, the Wi-Fi Shield is not
    so responsive in transferring data.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 即使数据可以以高达54 Mbps的速度传输，Wi-Fi盾在传输数据方面并不那么响应。
- en: The power consumption is so high that you cannot use a battery to power Arduino
    and the Wi-Fi Shield.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 功耗如此之高，以至于你不能使用电池来为Arduino和Wi-Fi盾供电。
- en: '|'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Bluetooth** |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| **蓝牙** |'
- en: Arduino can be located almost everywhere in your house.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arduino几乎可以放在您家的任何地方。
- en: BLE devices consume much less power. So, a battery can be used to power it.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 蓝牙设备消耗的电量要少得多。因此，可以使用电池为其供电。
- en: Data transfer speeds reach up to 1 Mbps but with no latency.
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据传输速度可达1 Mbps，但无延迟。
- en: '|'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: The iOS device has to be near Arduino (about 100 meters; lesser for indoors).
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: iOS设备必须靠近Arduino（大约100米；室内则更短）。
- en: No SD card is available on the board if you wish to store additional data.
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您希望存储额外的数据，则板上没有SD卡可用。
- en: '|'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Summary
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you mainly learned the basics of integrating the Arduino and
    iOS devices. In the following chapters, you will learn how to write code for this
    integration in practice.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您主要学习了将Arduino和iOS设备集成的基础知识。在接下来的章节中，您将学习如何在实践中编写此集成的代码。
- en: Moreover, you installed the Arduino IDE to write and upload programs to Arduino
    and Xcode to write and upload programs to your iOS devices.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您已安装Arduino IDE以编写和上传程序到Arduino，以及Xcode以编写和上传程序到您的iOS设备。
- en: So, sit back. We just got the ball rolling! Let's get rolling!
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，放松一下。我们刚刚开始！让我们开始吧！
