<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><div id="_idContainer117" class="Basic-Text-Frame">
    <h1 class="chapterNumber">6</h1>
    <h1 id="_idParaDest-96" class="chapterTitle">Functions and Closures</h1>
    <p class="normal">At this point, you can write reasonably complex programs that can make decisions and repeat instruction sequences. You can also store data for your programs using collection types. As the programs you write grow in size and complexity, it will become harder to comprehend what they do.</p>
    <p class="normal">To make large <a id="_idIndexMarker240"/>programs easier to understand, Swift allows you to create <strong class="keyWord">functions</strong>, which let you combine several instructions and execute them by calling a single name. You can <a id="_idIndexMarker241"/>also create <strong class="keyWord">closures</strong>, which let you combine several instructions without a name and assign them to a constant or variable.</p>
    <p class="normal">By the end of this chapter, you’ll have learned about functions, nested functions, functions as return types, functions as arguments, and the <code class="inlineCode">guard</code> statement. You’ll also have learned how to create and use closures.</p>
    <p class="normal">The following topics will be covered in this chapter:</p>
    <ul>
      <li class="bulletList">Exploring functions</li>
      <li class="bulletList">Exploring closures</li>
    </ul>
    <h1 id="_idParaDest-97" class="heading-1">Technical requirements</h1>
    <p class="normal">The Xcode playground for this chapter is in the <code class="inlineCode">Chapter06</code> folder of the code bundle for this book, which can be downloaded here:</p>
    <p class="normal"><a href="https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition"><span class="url">https://github.com/PacktPublishing/iOS-18-Programming-for-Beginners-Ninth-Edition</span></a></p>
    <p class="normal">Check out the following video to see the code in action:</p>
    <p class="normal"><a href="https://youtu.be/lgPDkddf_tc%0D"><span class="url">https://youtu.be/lgPDkddf_tc</span></a></p>
    <p class="normal">If you wish to start from scratch, create a new playground and name it <code class="inlineCode">FunctionsAndClosures</code>.</p>
    <p class="normal">You can type in and run all the code in this chapter as you go along. Let’s start by learning about functions.</p>
    <h1 id="_idParaDest-98" class="heading-1">Exploring functions</h1>
    <p class="normal">Functions are <a id="_idIndexMarker242"/>useful for encapsulating several instructions that collectively perform a specific task, such as the following:</p>
    <ul>
      <li class="bulletList">Calculating the 10% service charge for a meal at a restaurant</li>
      <li class="bulletList">Calculating the monthly payment for a car that you wish to purchase</li>
    </ul>
    <p class="normal">Here’s what a function looks like:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-title">functionName</span>(<span class="hljs-params">parameter1</span>: <span class="hljs-type">ParameterType</span>, <span class="hljs-operator">...</span>) -&gt; <span class="hljs-type">ReturnType</span> {
  code
}
</code></pre>
    <p class="normal">Every function has a descriptive name. You can define one or more values that the function takes <a id="_idIndexMarker243"/>as input, known as <strong class="keyWord">parameters</strong>. You can also define what the function <a id="_idIndexMarker244"/>will output when done, known as its <strong class="keyWord">return type</strong>. Both parameters and return types are optional.</p>
    <p class="normal">You “call” a function’s name to execute it. This is what a function call looks like:</p>
    <pre class="programlisting code"><code class="hljs-code">functionName(parameter1: argument1, <span class="hljs-operator">…</span>)
</code></pre>
    <p class="normal">You provide <a id="_idIndexMarker245"/>input values (known as <strong class="keyWord">arguments</strong>) that match the type of the function’s parameters.</p>
    <div class="note">
      <p class="normal">To learn <a id="_idIndexMarker246"/>more about functions, visit <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/functions/"><span class="url">https://docs.swift.org/swift-book/documentation/the-swift-programming-language/functions/</span></a>.</p>
    </div>
    <p class="normal">Let’s see how you can create a function to calculate a service charge in the next section.</p>
    <h2 id="_idParaDest-99" class="heading-2">Creating a function</h2>
    <p class="normal">In its simplest form, a function just executes some instructions and does not have any parameters <a id="_idIndexMarker247"/>or return types. You’ll see how this works by writing a function to calculate the service charge for a meal. The service charge should be 10% of the meal cost.</p>
    <p class="normal">Add the following code to your playground to create and call this function and run it:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">serviceCharge</span>() {
  <span class="hljs-keyword">let</span> mealCost <span class="hljs-operator">=</span> <span class="hljs-number">50</span>
  <span class="hljs-keyword">let</span> serviceCharge <span class="hljs-operator">=</span> mealCost <span class="hljs-operator">/</span> <span class="hljs-number">10</span>
  print(<span class="hljs-string">"Service charge is </span>\(serviceCharge)<span class="hljs-string">"</span>)
}
<span class="hljs-variable">serviceCharge</span>()
</code></pre>
    <p class="normal">You’ve just created a very simple function named <code class="inlineCode">serviceCharge()</code>. All it does is calculate the 10% service charge for a meal costing $50, which is <code class="inlineCode">50 / 10</code>, returning <code class="inlineCode">5</code>. You then call this function using its name. You’ll see <strong class="screenText">Service charge is 5</strong> displayed in the Debug area.</p>
    <p class="normal">This function is not very useful because <code class="inlineCode">mealCost</code> is always <code class="inlineCode">50</code> every time you call this function. Also, the result is only printed in the Debug area and can’t be used elsewhere in your program. Let’s add some parameters and a return type to this function to make it more useful.</p>
    <p class="normal">Modify your code as shown:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">serviceCharge</span>(<span class="code-highlight"><strong class="hljs-template-variable-slc">mealCost</strong><strong class="hljs-slc">: </strong><strong class="hljs-type-slc">Int</strong><strong class="hljs-slc">) -&gt; </strong><strong class="hljs-type-slc">Int</strong><strong class="hljs-slc"> </strong></span>{
  <span class="code-highlight"><strong class="hljs-keyword-slc">return</strong><strong class="hljs-slc"> mealCost </strong><strong class="hljs-operator-slc">/</strong><strong class="hljs-slc"> </strong><strong class="hljs-number-slc">10</strong></span>
}
<span class="code-highlight"><strong class="hljs-keyword-slc">let</strong><strong class="hljs-slc"> </strong><strong class="hljs-template-variable-slc">serviceChargeAmount</strong><strong class="hljs-slc"> </strong><strong class="hljs-operator-slc">=</strong><strong class="hljs-slc"> </strong><strong class="hljs-variable-slc">serviceCharge</strong><strong class="hljs-slc">(</strong><strong class="hljs-variable-slc">mealCost</strong><strong class="hljs-slc">: </strong><strong class="hljs-number-slc">50</strong><strong class="hljs-slc">)</strong></span>
<span class="code-highlight"><strong class="hljs-slc">print(</strong><strong class="hljs-variable-slc">serviceChargeAmount</strong><strong class="hljs-slc">)</strong></span>
</code></pre>
    <p class="normal">This is much better. Now, you can set the meal cost when you call the <code class="inlineCode">serviceCharge(mealCost:)</code> function, and the result can be assigned to a variable or constant. It looks a bit awkward, though. You should try to make function signatures in Swift read like an English sentence, as this is considered a best practice. Let’s see how to do that in the next section, where you’ll use <strong class="keyWord">custom labels</strong> to make your function more English-like and easier to understand.</p>
    <h2 id="_idParaDest-100" class="heading-2">Using custom argument labels</h2>
    <p class="normal">Note that the <code class="inlineCode">serviceCharge(mealCost:)</code> function is not very English-like. You can add a custom <a id="_idIndexMarker248"/>label to the parameter to make the <a id="_idIndexMarker249"/>function easier to understand.</p>
    <p class="normal">Modify your code as shown:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">serviceCharge</span>(<span class="code-highlight"><strong class="hljs-template-variable-slc">forMealPrice</strong></span> <span class="hljs-params">mealCost</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {
  mealCost <span class="hljs-operator">/</span> <span class="hljs-number">10</span>
}
<span class="hljs-keyword">let</span> <span class="hljs-template-variable">serviceChargeAmount</span> <span class="hljs-operator">=</span> <span class="hljs-variable">serviceCharge</span>(<span class="code-highlight"><strong class="hljs-variable-slc">forMealPrice</strong></span>: <span class="hljs-number">50</span>)
print(<span class="hljs-variable">serviceChargeAmount</span>)
</code></pre>
    <p class="normal">The function works the same as before, but to call it, you use <code class="inlineCode">serviceCharge(forMealPrice:)</code>. This sounds more like English and makes it easier to figure out what the function does. Also, note that if your function body only consists of a single statement, the <code class="inlineCode">return</code> keyword is optional.</p>
    <p class="normal">In the next section, you’ll learn how to use several smaller functions within the bodies of other functions, and these <a id="_idIndexMarker250"/>are known as <strong class="keyWord">nested functions</strong>.</p>
    <h2 id="_idParaDest-101" class="heading-2">Using nested functions</h2>
    <p class="normal">It’s possible to have a function within the body of another function, and these are called nested functions. This allows you to keep a number of related functions together in one place and <a id="_idIndexMarker251"/>makes the enclosing function easier to understand. </p>
    <p class="normal">A nested function can use the variables of the enclosing function. Let’s see how nested <a id="_idIndexMarker252"/>functions work by writing a function to calculate monthly payments for a loan.</p>
    <p class="normal">Type in and run the following code:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">calculateMonthlyPayments</span>(<span class="hljs-template-variable">carPrice</span>: <span class="hljs-type">Double</span>, <span class="hljs-template-variable">downPayment</span>: <span class="hljs-type">Double</span>, <span class="hljs-template-variable">interestRate</span>: <span class="hljs-type">Double</span>, <span class="hljs-template-variable">paymentTerm</span>: <span class="hljs-type">Double</span>) -&gt; <span class="hljs-type">Double</span> {
  <span class="hljs-keyword">func</span> <span class="hljs-template-variable">loanAmount</span>() -&gt; <span class="hljs-type">Double</span> {
    carPrice <span class="hljs-operator">-</span> downPayment
  }
  <span class="hljs-keyword">func</span> <span class="hljs-template-variable">totalInterest</span>() -&gt; <span class="hljs-type">Double</span> {
    interestRate <span class="hljs-operator">*</span> paymentTerm
  }
  <span class="hljs-keyword">func</span> <span class="hljs-template-variable">numberOfMonths</span>() -&gt; <span class="hljs-type">Double</span> {
    paymentTerm <span class="hljs-operator">*</span> <span class="hljs-number">12</span>
  }
  <span class="hljs-keyword">return</span> ((<span class="hljs-variable">loanAmount</span>() <span class="hljs-operator">+</span> (<span class="hljs-variable">loanAmount</span>() <span class="hljs-operator">*</span>
  <span class="hljs-variable">totalInterest</span>() <span class="hljs-operator">/</span> <span class="hljs-number">100</span> )) <span class="hljs-operator">/</span> <span class="hljs-variable">numberOfMonths</span>())
}
<span class="hljs-variable">calculateMonthlyPayments</span>(<span class="hljs-variable">carPrice</span>: <span class="hljs-number">50000</span>, <span class="hljs-variable">downPayment</span>: <span class="hljs-number">5000</span>, <span class="hljs-variable">interestRate</span>: <span class="hljs-number">3.5</span>, <span class="hljs-variable">paymentTerm</span>: <span class="hljs-number">7.0</span>)
</code></pre>
    <p class="normal">Here, there are three functions within <code class="inlineCode">calculateMonthlyPayments(carPrice:downPayment:interestRate:paymentTerm:)</code>. Let’s look at them:</p>
    <ul>
      <li class="bulletList">The first nested function, <code class="inlineCode">loanAmount()</code>, calculates the total loan amount by subtracting <code class="inlineCode">downPayment</code> from <code class="inlineCode">carPrice</code>. It returns <code class="inlineCode">50000 - 5000</code> = <code class="inlineCode">45000</code>.</li>
      <li class="bulletList">The second nested function, <code class="inlineCode">totalInterest()</code>, calculates the total interest amount incurred for the payment term by multiplying <code class="inlineCode">interestRate</code> by <code class="inlineCode">paymentTerm</code>. It returns <code class="inlineCode">3.5 * 7</code> = <code class="inlineCode">24.5</code>.</li>
      <li class="bulletList">The third nested function, <code class="inlineCode">numberOfMonths()</code>, calculates the total number of months in the payment term by multiplying <code class="inlineCode">paymentTerm</code> by <code class="inlineCode">12</code>. It returns <code class="inlineCode">7 * 12</code> = <code class="inlineCode">84</code>.</li>
    </ul>
    <p class="normal">Note that <a id="_idIndexMarker253"/>the three nested functions all use the variables of the <a id="_idIndexMarker254"/>enclosing function. The value returned is <code class="inlineCode">( 45000 + ( 45000 * 24.5 / 100 ) ) / 84</code> = <code class="inlineCode">666.96</code>, which is the amount you must pay monthly for seven years to buy this car.</p>
    <p class="normal">As you have seen, functions in Swift are like functions in other languages, but they have a cool feature. Functions <a id="_idIndexMarker255"/>are <strong class="keyWord">first-class types</strong> in Swift, so they can be used as parameters and return types. Let’s see how that is done in the next section.</p>
    <h2 id="_idParaDest-102" class="heading-2">Using functions as return types</h2>
    <p class="normal">A function <a id="_idIndexMarker256"/>can return another function as its return type. Type in and run the following code to create a function that generates the value of pi using one of two possible ways:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">approximateValueOfPi1</span>() -&gt; <span class="hljs-type">Double</span> {
  <span class="hljs-number">3.14159</span>
}
<span class="hljs-keyword">func</span> <span class="hljs-template-variable">approximateValueOfPi2</span>() -&gt; <span class="hljs-type">Double</span> {
  <span class="hljs-number">22.0</span> <span class="hljs-operator">/</span> <span class="hljs-number">7.0</span>
}
<span class="hljs-keyword">func</span> <span class="hljs-template-variable">pi</span>() -&gt; (() -&gt; <span class="hljs-type">Double</span>) {
  <span class="hljs-variable">approximateValueOfPi1</span>
  <span class="hljs-comment">// approximateValueOfPi2</span>
}
<span class="hljs-variable">pi</span>()()
</code></pre>
    <p class="normal">Both <code class="inlineCode">approximateValueOfPi1()</code> and <code class="inlineCode">approximateValueOfPi2()</code> are functions that have no parameters and return the approximate value of pi. The <code class="inlineCode">pi()</code> function’s return type is a function that has no parameters and returns a <code class="inlineCode">Double</code>. This means that it can either return <code class="inlineCode">approximateValueOfPi1</code> (as shown here) or <code class="inlineCode">approximateValueOfPi2</code>, since both functions <a id="_idIndexMarker257"/>match the expected return type.</p>
    <p class="normal"><code class="inlineCode">pi()()</code> calls the function <code class="inlineCode">approximateValueOfPi1</code>, which returns <code class="inlineCode">3.14159</code>. <strong class="screenText">3.14159</strong> is displayed in the Results area. </p>
    <p class="normal">Let’s see how a function can be used as a parameter for another function in the next section.</p>
    <h2 id="_idParaDest-103" class="heading-2">Using functions as parameters</h2>
    <p class="normal">A function can take another function as a parameter. Type in and run the following code to create <a id="_idIndexMarker258"/>a function that determines whether a number meeting a certain condition exists within a list of numbers:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">isThereAMatch</span>(<span class="hljs-template-variable">listOfNumbers</span>: [<span class="hljs-type">Int</span>], <span class="hljs-template-variable">condition</span>: (<span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Bool</span>) -&gt; <span class="hljs-type">Bool</span> {
  <span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> listOfNumbers {
    <span class="hljs-keyword">if</span> condition(number) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
<span class="hljs-keyword">func</span> <span class="hljs-template-variable">numberIsOdd</span>(<span class="hljs-template-variable">number</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Bool</span> {
  (number <span class="hljs-operator">%</span> <span class="hljs-number">2</span>) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>
}
<span class="hljs-keyword">func</span> <span class="hljs-template-variable">numberIsEven</span>(<span class="hljs-template-variable">number</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Bool</span> {
  (number <span class="hljs-operator">%</span> <span class="hljs-number">2</span>) <span class="hljs-operator">==</span> <span class="hljs-number">0</span>
}
<span class="hljs-keyword">let</span> <span class="hljs-template-variable">numbersList</span> <span class="hljs-operator">=</span> [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
<span class="hljs-variable">isThereAMatch</span>(<span class="hljs-variable">listOfNumbers</span>: <span class="hljs-variable">numbersList</span>, <span class="hljs-variable">condition</span>: <span class="hljs-variable">numberIsOdd</span>)
</code></pre>
    <p class="normal"><code class="inlineCode">isThereAMatch(listOfNumbers:condition:)</code> has two parameters: an array of integers and a function. The function provided as an argument must take an integer value and return a Boolean value. </p>
    <p class="normal">Both <code class="inlineCode">numberIsOdd(number:)</code> and <code class="inlineCode">numberIsEven(_:)</code> take an integer and return a Boolean value, which means either function can be an argument for the second parameter. <code class="inlineCode">numbersList</code>, an array containing odd numbers, is used as the argument <a id="_idIndexMarker259"/>for the first parameter. When <code class="inlineCode">numberIsOdd</code> is used as an argument for the second parameter, <code class="inlineCode">isThereAMatch(listOfNumbers:condition:)</code> will return <code class="inlineCode">true</code> when called. Try using <code class="inlineCode">numberisEven</code> as an argument for the second parameter as well.</p>
    <div class="packt_tip">
      <p class="normal">Functions as parameters and return types can be difficult to understand, but are relatively rare at this point in your learning journey, so don’t worry if you don’t get it at first. As you gain experience, it will become clearer to you.</p>
    </div>
    <p class="normal">In the next section, you’ll see how you can perform an early exit on a function if the arguments used are not suitable.</p>
    <h2 id="_idParaDest-104" class="heading-2">Using a guard statement to exit a function early</h2>
    <p class="normal">Let’s say you need a function to be used in an online purchasing terminal. This function will calculate the remaining balance of a debit or credit card when you buy something. The price <a id="_idIndexMarker260"/>of the item that you want to buy is entered in a text field.</p>
    <p class="normal">The <a id="_idIndexMarker261"/>value in the text field is converted into an integer so that you can calculate the remaining card balance. If there is something wrong with the input data, it is useful to be able to exit a function early.</p>
    <p class="normal">Type in and run the following code:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">func</span> <span class="hljs-template-variable">buySomething</span>(<span class="hljs-template-variable">itemValueEntered</span> <span class="hljs-params">itemValueField</span>: <span class="hljs-type">String</span>, <span class="hljs-template-variable">cardBalance</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {
  <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> itemValue <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(itemValueField) <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Error in item value"</span>)
    <span class="hljs-keyword">return</span> cardBalance
  }
  <span class="hljs-keyword">let</span> remainingBalance <span class="hljs-operator">=</span> cardBalance <span class="hljs-operator">-</span> itemValue
  <span class="hljs-keyword">return</span> remainingBalance
}
<span class="hljs-built_in">print</span>(<span class="hljs-variable">buySomething(itemValueEntered</span>: <span class="hljs-string">"10"</span>, <span class="hljs-variable">cardBalance</span>: <span class="hljs-number">50</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-variable">buySomething(itemValueEntered</span>: <span class="hljs-string">"blue"</span>, <span class="hljs-variable">cardBalance</span>: <span class="hljs-number">50</span>))
</code></pre>
    <p class="normal">You should see this result in the Debug area:</p>
    <pre class="programlisting con"><code class="hljs-con">40
Error in item value
50
</code></pre>
    <p class="normal">Let’s see how this function works. The first line in the function body is a <code class="inlineCode">guard</code> statement. This checks to see whether a condition is <code class="inlineCode">true</code>; if not, it exits the function. Here, it is used to check and see whether the user entered a valid price in the online purchasing terminal. </p>
    <p class="normal">If so, the value can be converted successfully into an integer, and you can <a id="_idIndexMarker262"/>calculate the remaining card balance. Otherwise, the <code class="inlineCode">else</code> clause in the <code class="inlineCode">guard</code> statement is executed. An error message <a id="_idIndexMarker263"/>is printed to the Debug area and the unchanged card balance is returned.</p>
    <p class="normal">For <code class="inlineCode">print(buySomething(itemValueEntered: "10", cardBalance: 50))</code>, the item price is deducted successfully from the card balance, and <code class="inlineCode">40</code> is returned.</p>
    <p class="normal">For <code class="inlineCode">print(buySomething(itemValueEntered: "blue", cardBalance: 50))</code>, the <code class="inlineCode">guard</code> statement’s condition fails and its <code class="inlineCode">else</code> clause is executed, resulting in an error message being printed to the Debug area and <code class="inlineCode">50</code> being returned.</p>
    <p class="normal">You now know how to create and use functions. You have also seen how to use custom argument labels, nested functions, functions as parameters or return types, and the <code class="inlineCode">guard</code> statement.</p>
    <p class="normal">Now, let’s look at closures. Like functions, closures allow you to combine several instructions, but closures do not have names and can be assigned to a constant or a variable. You’ll see how they work in the next section.</p>
    <h1 id="_idParaDest-105" class="heading-1">Exploring closures</h1>
    <p class="normal">A closure, like a function, contains a sequence of instructions and can take arguments and <a id="_idIndexMarker264"/>return values. However, closures don’t have names. The sequence of instructions in a closure is surrounded by curly braces (<code class="inlineCode">{ }</code>), and the <code class="inlineCode">in</code> keyword separates the arguments and return type from the closure body.</p>
    <p class="normal">Closures can be assigned to a constant or variable, so they’re handy if you need to pass them around inside your program. For instance, let’s say you have an app that downloads a file from the internet, and you need to do something to the file once it has finished downloading. You can put a list of instructions to process the file inside a closure and have your program execute it once the file finishes downloading.</p>
    <div class="note">
      <p class="normal">To learn <a id="_idIndexMarker265"/>more about closures, visit <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/closures/"><span class="url">https://docs.swift.org/swift-book/documentation/the-swift-programming-language/closures/</span></a>.</p>
    </div>
    <p class="normal">You’ll now write a closure that applies a calculation to each element of an array of numbers. Add the following code to your playground and click the <strong class="screenText">Run</strong> button to run it:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">var</span> <span class="hljs-template-variable">numbersArray</span> <span class="hljs-operator">=</span> [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]
<span class="hljs-keyword">let</span> <span class="hljs-template-variable">myClosure</span> <span class="hljs-operator">=</span> { (number: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> <span class="hljs-keyword">in</span>
   <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> number <span class="hljs-operator">*</span> number
   <span class="hljs-keyword">return</span> result
}
<span class="hljs-keyword">let</span> <span class="hljs-template-variable">mappedNumbers</span> <span class="hljs-operator">=</span> <span class="hljs-variable">numbersArray</span>.map(<span class="hljs-variable">myClosure</span>)
</code></pre>
    <p class="normal">This assigns a <a id="_idIndexMarker266"/>closure that calculates a number’s power of two to <code class="inlineCode">myClosure</code>. The <code class="inlineCode">map()</code> function then applies this closure to every element in <code class="inlineCode">numbersArray</code>. Each element is multiplied by itself, and <code class="inlineCode">[4, 16, 36, 49]</code> appears in the Results area.</p>
    <p class="normal">It’s possible to write closures in a more concise fashion, and you’ll see how to do that in the next section.</p>
    <h2 id="_idParaDest-106" class="heading-2">Simplifying closures</h2>
    <p class="normal">One of the things that new developers have trouble with is the very concise method used by <a id="_idIndexMarker267"/>experienced Swift programmers to write closures. Consider the code shown in the following example:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">var</span> <span class="hljs-template-variable">testNumbers</span> <span class="hljs-operator">=</span> [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]
<span class="hljs-keyword">let</span> <span class="hljs-template-variable">mappedTestNumbers</span> <span class="hljs-operator">=</span> <span class="hljs-variable">testNumbers</span>.map({ 
  (number: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> <span class="hljs-keyword">in</span>
  <span class="hljs-keyword">let</span> result <span class="hljs-operator">=</span> number <span class="hljs-operator">*</span> number
  <span class="hljs-keyword">return</span> result
})
print(<span class="hljs-variable">mappedTestNumbers</span>)
</code></pre>
    <p class="normal">Here, you have <code class="inlineCode">testNumbers</code>, an array of numbers, and you use the <code class="inlineCode">map(_:)</code> function to map a closure to each element of the array in turn. The code in the closure multiplies the number by itself, generating the square of that number. The result, <strong class="screenText">[4, 16, 36, 49]</strong>, is then printed to the Debug area. As you will see, the closure code can be written more concisely.</p>
    <p class="normal">When a closure’s type is already known, you can remove the parameter type, return type, or both. Single-statement closures implicitly return the value of their only statement, which means you can remove the <code class="inlineCode">return</code> statement as well. So, you can write the closure as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">let</span> <span class="hljs-template-variable">mappedTestNumbers</span> <span class="hljs-operator">=</span> <span class="hljs-variable">testNumbers</span>.map({ number <span class="hljs-keyword">in</span>
  number <span class="hljs-operator">*</span> number
})
</code></pre>
    <p class="normal">When a <a id="_idIndexMarker268"/>closure is the only argument to a function, you can omit the parentheses enclosing the closure, as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">let</span> <span class="hljs-template-variable">mappedTestNumbers</span> <span class="hljs-operator">=</span> <span class="hljs-variable">testNumbers</span>.map { number <span class="hljs-keyword">in</span>
  number <span class="hljs-operator">*</span> number
}
</code></pre>
    <p class="normal">You can refer to parameters by a number expressing their relative position in the list of arguments instead of by name, as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">let</span> <span class="hljs-variable">mappedTestNumbers</span> <span class="hljs-operator">=</span> <span class="hljs-variable">testNumbers</span>.map { <span class="hljs-variable">$0</span> <span class="hljs-operator">*</span> <span class="hljs-variable">$0</span> }
</code></pre>
    <p class="normal">So, the closure is now very concise indeed, but will be challenging for new developers to understand. Feel free to write closures in a way that you are comfortable with.</p>
    <p class="normal">You now know how to create and use closures, and how to write them more concisely. Great!</p>
    <h1 id="_idParaDest-107" class="heading-1">Summary</h1>
    <p class="normal">In this chapter, you studied how to group statements into functions. You learned how to use custom argument labels, functions inside other functions, functions as return types, functions as parameters, and the <code class="inlineCode">guard</code> statement. This will be useful later when you need to accomplish the same task at different points in your program.</p>
    <p class="normal">You also learned how to create closures. This will be useful when you need to pass around blocks of code within your program.</p>
    <p class="normal">In the next chapter, we will study classes, structures, and enumerations. Classes and structures allow for the creation of complex objects that can store state and behavior, and enumerations can be used to limit the values that can be assigned to a variable or constant, reducing the chances of error.</p>
    <h1 id="_idParaDest-108" class="heading-1">Join us on Discord!</h1>
    <p class="normal">Read this book alongside other users, experts, and the author himself. Ask questions, provide solutions to other readers, chat with the author via Ask Me Anything sessions, and much more. Scan the QR code or visit the link to join the community.</p>
    <p class="normal"><a href="https://packt.link/ios-Swift%0D"><span class="url">https://packt.link/ios-Swift</span></a></p>
    <p class="normal"><a href="https://packt.link/ios-Swift%0D"><img src="image/QR_Code2370024260177612484.png" alt="" width="177" height="177"/></a></p>
  </div>
</div></div></body></html>