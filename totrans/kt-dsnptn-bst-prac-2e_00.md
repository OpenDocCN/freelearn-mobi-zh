# 前言

设计模式通过为你提供经过验证的开发范式来帮助你作为开发者加快开发过程。重用设计模式有助于防止可能导致重大问题的复杂问题，改进你的代码库，促进代码重用，并使架构更加健壮。

本书的目标是简化 Kotlin 中设计模式的采用，并为程序员提供良好的实践。

本书首先向您展示 Kotlin 中更智能编码的实际方面，解释 Kotlin 的基本语法和设计模式的影响。然后，本书深入解释了经典创建型、结构型和行为型设计模式家族，接着转向函数式编程。随后，它将引导你了解反应式和并发模式，教你如何使用流、线程和协程来编写更好的代码。

在阅读完本书之后，你将能够高效地解决在开发应用过程中遇到的常见问题，并且能够舒适地在任何规模的可扩展和可维护的项目上工作。

# 这本书面向谁

这本书是为那些希望掌握 Kotlin 设计模式以构建可靠、可扩展和可维护应用的开发者而编写的。为了开始阅读这本书，建议具备一定的编程知识。虽然对设计模式的知识有帮助，但并非强制要求。

# 这本书涵盖的内容

*第一章*，*开始使用 Kotlin*，涵盖了 Kotlin 的基本语法，并讨论了设计模式的好处以及为什么应该在 Kotlin 中使用它们。本章的目标不是涵盖 Kotlin 的全部词汇，而是让你熟悉一些基本概念和惯用语。接下来的章节将逐渐向你展示更多与我们将要讨论的设计模式相关的语言特性。

*第二章*，*使用创建型模式*，解释了所有经典创建型模式。这些模式处理何时以及如何创建对象。掌握这些模式将使你更好地管理对象的生命周期，并编写易于维护的代码。

*第三章*，*理解结构模式*，专注于如何创建灵活且易于扩展的对象层次结构。它涵盖了装饰者和适配器模式等。

*第四章*，*熟悉行为模式*，使用 Kotlin 覆盖了行为模式。行为模式处理对象之间的交互以及对象如何动态地改变行为。我们将看到对象如何以高效和松耦合的方式通信。

*第五章*，*介绍函数式编程*，涵盖了函数式编程的基本原则以及它们如何融入 Kotlin 编程语言。它将涵盖不可变性、高级函数和函数作为值等主题。

*第六章*，*线程和协程*，深入探讨了如何在 Kotlin 中启动新线程，并涵盖了协程为什么比线程具有更好的可扩展性的原因。我们将讨论 Kotlin 编译器如何处理协程以及与协程作用域和调度器的关联。

*第七章*，*控制数据流*，涵盖了集合的高级函数。我们将看到序列、通道和流如何以并发和响应式的方式应用这些函数。

*第八章*，*设计并发*，解释了并发设计模式如何帮助我们同时管理许多任务并结构化它们的生命周期。通过有效地使用这些模式，我们可以避免资源泄漏和死锁等问题。

*第九章*，*惯用和反模式*，讨论了 Kotlin 中的最佳和最差实践。你将了解惯用 Kotlin 代码应该是什么样子，以及哪些模式应该避免。完成本章后，你应该能够编写更易于阅读和维护的 Kotlin 代码，并避免一些常见的陷阱。

*第十章*，*使用 Ktor 构建并发微服务*，通过使用 Kotlin 编程语言构建微服务来运用我们迄今为止学到的技能。为此，我们将使用由 JetBrains 开发的 Ktor 框架。

*第十一章*，*使用 Vert.x 构建响应式微服务*，通过使用基于响应式设计模式的 Vert.x 框架，展示了构建微服务的另一种方法，使用 Kotlin 语言。我们将讨论这些方法之间的权衡，查看一些真实的代码示例，并找出何时使用它们。

*评估*包含了本书所有章节的问题答案。

# 为了充分利用本书

你应该具备基本的 Java 知识，并了解 JVM 是什么。还假设你熟悉使用命令行。本书中使用的几个命令行示例基于 OS X，但可以轻松地适应 Windows 或 Linux。

![前言表格](img/Table_Preface.jpg)

**如果你使用的是本书的数字版，我们建议你亲自输入代码或从本书的 GitHub 仓库（下一节中有一个链接）获取代码。这样做将帮助你避免与代码复制和粘贴相关的任何潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件：[`github.com/PacktPublishing/Kotlin-Design-Patterns-and-Best-Practices`](https://github.com/PacktPublishing/Kotlin-Design-Patterns-and-Best-Practices)。如果代码有更新，它将在 GitHub 仓库中更新。

我们在丰富的图书和视频目录中还有其他代码包可供在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 下载彩色图像

我们还提供了一份包含本书中使用的截图和图表彩色图像的 PDF 文件。您可以从这里下载：`static.packt-cdn.com/downloads/9781801815727_ColorImages.pdf`。

# 使用的约定

本书中使用了多种文本约定。

`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“从监听器端，处理异常就像将`collect()`函数包裹在`try`/`catch`块中一样简单。”

代码块如下设置：

```kt
val chan = produce(capacity = 10) { 
```

```kt
    (1..10).forEach { 
```

```kt
        send(it) 
```

```kt
    } 
```

```kt
}
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```kt
flow {
```

```kt
    (1..10).forEach {
```

```kt
    ...
```

```kt
        if (it == 9) {
```

```kt
            throw RuntimeException()
```

```kt
        }
```

```kt
    }
```

```kt
}
```

任何命令行输入或输出都按以下方式编写：

```kt
...
```

```kt
4 seconds -> received 30
```

```kt
5 seconds -> received 40
```

```kt
6 seconds -> received 49
```

```kt
...
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词以**粗体**显示。以下是一个示例：“在下一屏上，选择**JUnit 5**作为您的**测试框架**，并将**目标 JVM 版本**设置为**1.8**，然后点击**完成**。”

小贴士或重要提示

看起来像这样。

# 联系我们

读者的反馈总是受欢迎的。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件发送至 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告这一点。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上以任何形式遇到我们作品的非法副本，如果您能提供位置地址或网站名称，我们将不胜感激。请通过 copyright@packt.com 与我们联系，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个主题上具有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

读完*Kotlin 设计模式和最佳实践*后，我们很乐意听到您的想法！请点击此处直接进入此书的亚马逊评论页面并分享您的反馈。

您的评论对我们和科技社区都非常重要，并将帮助我们确保我们提供高质量的内容。
