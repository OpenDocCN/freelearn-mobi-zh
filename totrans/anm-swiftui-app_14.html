<html><head></head><body>
<div id="_idContainer203">
<h1 class="chapter-number" id="_idParaDest-193"><a id="_idTextAnchor204"/><span class="koboSpan" id="kobo.1.1">14</span></h1>
<h1 id="_idParaDest-194"><a id="_idTextAnchor205"/><span class="koboSpan" id="kobo.2.1">Creating a Color Game</span></h1>
<p><span class="koboSpan" id="kobo.3.1">In the last chapter, we built a game where the user had to find words by using the letters of a larger word. </span><span class="koboSpan" id="kobo.3.2">In this project, we will continue the “finding” theme and build another game, where the user must find colors within a </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">broader color.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">The goal of this project will be to generate a random RGB color and then have the user manipulate separate sliders for each of the individual RGB values in order to completely match that random color. </span><span class="koboSpan" id="kobo.5.2">For example, there will be one slider for red, one slider for green, and one slider for blue, with each slider containing a range from 0 to 255 (the range of each RGB value). </span><span class="koboSpan" id="kobo.5.3">Then, the user will have to adjust those sliders to see whether they can find the exact RGB random color. </span></p>
<p><span class="koboSpan" id="kobo.6.1">We will also add three difficulty levels to the game, from easy to extreme. </span><span class="koboSpan" id="kobo.6.2">And if the user is skilled enough to work out the individual RGB values in the given color, we will display a shower of confetti over the </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">user interface.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">In building this game, you will learn about adding pre-built animations to a project using Swift packages, which includes the aforementioned confetti animation for when the user gets a high score. </span><span class="koboSpan" id="kobo.8.2">We will also add a spring animation to SwiftUI sliders and make them visible when needed, and invisible </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">when not.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">So, in this chapter, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">following topics:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.12.1">Understanding colors</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Creating the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.14.1">Title</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.15.1"> View</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Creating the target and </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">guess circles</span></span></li>
<li><span class="koboSpan" id="kobo.18.1">Creating the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.19.1">Picker</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.20.1"> View</span></span></li>
<li><span class="koboSpan" id="kobo.21.1">Creating the target and </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">guess rectangles</span></span></li>
<li><span class="koboSpan" id="kobo.23.1">Making the </span><span class="No-Break"><span class="koboSpan" id="kobo.24.1">color sliders</span></span></li>
<li><span class="koboSpan" id="kobo.25.1">Keeping track of the user’s score with </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">a button</span></span></li>
<li><span class="koboSpan" id="kobo.27.1">Showing the user’s score in an </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.28.1">Alert</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.29.1"> View</span></span></li>
<li><span class="koboSpan" id="kobo.30.1">Resetting </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">the game</span></span></li>
<li><span class="koboSpan" id="kobo.32.1">Adding </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">a background</span></span></li>
<li><span class="koboSpan" id="kobo.34.1">Adding confetti using </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">Swift packages</span></span></li>
</ul>
<h1 id="_idParaDest-195"><a id="_idTextAnchor206"/><span class="koboSpan" id="kobo.36.1">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.37.1">As always, you can find the code and download the completed project from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">Chapter 14</span></strong></span><span class="koboSpan" id="kobo.39.1"> folder on </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">GitHub: </span></span><a href="https://github.com/PacktPublishing/Animating-SwiftUI-Applications"><span class="No-Break"><span class="koboSpan" id="kobo.41.1">https://github.com/PacktPublishing/Animating-SwiftUI-Applications</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.42.1">.</span></span></p>
<h1 id="_idParaDest-196"><a id="_idTextAnchor207"/><span class="koboSpan" id="kobo.43.1">Understanding colors</span></h1>
<p><span class="koboSpan" id="kobo.44.1">Before we begin, let’s just have</span><a id="_idIndexMarker773"/><span class="koboSpan" id="kobo.45.1"> a quick look at colors. </span><span class="koboSpan" id="kobo.45.2">There are two color models that you may be familiar with, primary colors and </span><span class="No-Break"><span class="koboSpan" id="kobo.46.1">RGB colors.</span></span></p>
<p><span class="koboSpan" id="kobo.47.1">Primary colors are the basic colors from which all other colors can be derived. </span><span class="koboSpan" id="kobo.47.2">In traditional color theory, the primary colors are red, blue, and yellow. </span><span class="koboSpan" id="kobo.47.3">Primary colors are used in many different fields, such as art, printing, and </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1">graphic design.</span></span></p>
<p><span class="koboSpan" id="kobo.49.1">RGB (which is short for Red, Green, and Blue) colors make up a color model in which the colors are combined to create different intensities of red, green, and blue light that can be displayed on electronic displays and devices, such as computers, TVs, phones, </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">and tablets.</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">RGB colors</span><a id="_idIndexMarker774"/><span class="koboSpan" id="kobo.52.1"> are represented by their red, green, and blue components, each of which has a value between 0 and 255. </span><span class="koboSpan" id="kobo.52.2">The value 0 represents the absence of that color, while 255 represents the maximum intensity of that color. </span><span class="koboSpan" id="kobo.52.3">By varying the values of the RGB components, a wide range of colors can be created. </span><span class="koboSpan" id="kobo.52.4">For example, (255, 0, 0) represents pure red, (0, 255, 0) represents pure green, and (0, 0, 255) represents pure blue. </span><span class="koboSpan" id="kobo.52.5">Combinations of these colors can create many different colors and hues </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">of colors.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">We will be adding three sliders, which will represent</span><a id="_idIndexMarker775"/><span class="koboSpan" id="kobo.55.1"> each RGB color, and the user has to manipulate those sliders to find a target color by combining different amounts of those </span><span class="No-Break"><span class="koboSpan" id="kobo.56.1">RGB colors.</span></span></p>
<p><span class="koboSpan" id="kobo.57.1">Let’s jump right in and get this game off the ground. </span><span class="koboSpan" id="kobo.57.2">We’ll start by adding a title to the </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">user interface.</span></span></p>
<h1 id="_idParaDest-197"><a id="_idTextAnchor208"/><span class="koboSpan" id="kobo.59.1">Creating the Title view</span></h1>
<p><span class="koboSpan" id="kobo.60.1">Let’s get started by creating</span><a id="_idIndexMarker776"/><span class="koboSpan" id="kobo.61.1"> a new Xcode project – I’m calling it </span><strong class="bold"><span class="koboSpan" id="kobo.62.1">Find the Colors</span></strong><span class="koboSpan" id="kobo.63.1">. </span><span class="koboSpan" id="kobo.63.2">We will build this project from the top down, with all of the code placed in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.64.1">VStack</span></strong><span class="koboSpan" id="kobo.65.1"> to organize the </span><span class="No-Break"><span class="koboSpan" id="kobo.66.1">views vertically.</span></span></p>
<p><span class="koboSpan" id="kobo.67.1">The first objective here will be to give the UI a title; it’s not a lot of code, but we’ll still put it in its own file anyway. </span><span class="koboSpan" id="kobo.67.2">So, create a new SwiftUI View file, and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.68.1">TitleView</span></strong><span class="koboSpan" id="kobo.69.1">, then add the following code to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.70.1">body</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.71.1"> property:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.72.1">
struct TitleView: View {
    var body: some View {
        HStack {
            Text("Find").foregroundColor(.red)
            Text("The").foregroundColor(.green)
            Text("Color").foregroundColor(.blue)
        } .foregroundColor(.blue)
            .fontWeight(.black)
            .font(Font.system(size: 35, design: .serif))
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.73.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.74.1">HStack</span></strong><span class="koboSpan" id="kobo.75.1">, there are three </span><strong class="source-inline"><span class="koboSpan" id="kobo.76.1">Text</span></strong><span class="koboSpan" id="kobo.77.1"> views, each with different colors – </span><strong class="source-inline"><span class="koboSpan" id="kobo.78.1">"Find"</span></strong><span class="koboSpan" id="kobo.79.1"> with the red color, </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1">"The"</span></strong><span class="koboSpan" id="kobo.81.1"> with green, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1">"Color"</span></strong><span class="koboSpan" id="kobo.83.1"> with blue – all colored using the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.84.1">foregroundColor</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.85.1"> modifier.</span></span></p>
<p><span class="koboSpan" id="kobo.86.1">After the </span><strong class="source-inline"><span class="koboSpan" id="kobo.87.1">HStack</span></strong><span class="koboSpan" id="kobo.88.1">, three additional modifiers are applied to the view. </span><span class="koboSpan" id="kobo.88.2">The first is </span><strong class="source-inline"><span class="koboSpan" id="kobo.89.1">.foregroundColor(.blue)</span></strong><span class="koboSpan" id="kobo.90.1">, which sets the text color of all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.91.1">Text</span></strong><span class="koboSpan" id="kobo.92.1"> views to blue. </span><span class="koboSpan" id="kobo.92.2">The next is </span><strong class="source-inline"><span class="koboSpan" id="kobo.93.1">.fontWeight(.black)</span></strong><span class="koboSpan" id="kobo.94.1">, which sets the font weight of all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.95.1">Text</span></strong><span class="koboSpan" id="kobo.96.1"> views to bold. </span><span class="koboSpan" id="kobo.96.2">And lastly, </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1">.font(Font.system(size: 35, design: .serif))</span></strong><span class="koboSpan" id="kobo.98.1"> sets the font and size of all the </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">Text</span></strong><span class="koboSpan" id="kobo.100.1"> views to </span><strong class="source-inline"><span class="koboSpan" id="kobo.101.1">35</span></strong><span class="koboSpan" id="kobo.102.1"> points with a Serif </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">design font.</span></span></p>
<p><span class="koboSpan" id="kobo.104.1">Next, we’ll go back into </span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">ContentView</span></strong><span class="koboSpan" id="kobo.106.1"> and display the title by adding the </span><span class="No-Break"><span class="koboSpan" id="kobo.107.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.108.1">
struct ContentView: View {
    var body: some View {
        VStack {
                //MARK: - TITLE
                 TitleView().padding()
        }
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.109.1">I also added some </span><strong class="source-inline"><span class="koboSpan" id="kobo.110.1">padding</span></strong><span class="koboSpan" id="kobo.111.1"> so the </span><strong class="source-inline"><span class="koboSpan" id="kobo.112.1">Title</span></strong><span class="koboSpan" id="kobo.113.1"> view won’t be too close to the notch at the top of the iPhone</span><a id="_idIndexMarker777"/><span class="koboSpan" id="kobo.114.1"> when we finish adding all </span><span class="No-Break"><span class="koboSpan" id="kobo.115.1">the views.</span></span></p>
<p><span class="koboSpan" id="kobo.116.1">And now, we can see the colorful title that starts off </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">the UI:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer190">
<span class="koboSpan" id="kobo.118.1"><img alt="Figure 14.1: Game title " src="image/B18674_14_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.119.1">Figure 14.1: Game title</span></p>
<p><span class="koboSpan" id="kobo.120.1">With that, we can move on to the next part of the UI, the target and </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">guess circles.</span></span></p>
<h1 id="_idParaDest-198"><a id="_idTextAnchor209"/><span class="koboSpan" id="kobo.122.1">Creating the target and guess circles</span></h1>
<p><span class="koboSpan" id="kobo.123.1">The next task</span><a id="_idIndexMarker778"/><span class="koboSpan" id="kobo.124.1"> is to create</span><a id="_idIndexMarker779"/><span class="koboSpan" id="kobo.125.1"> two </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">colored circles:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.127.1">One circle will be the target circle, which will show a randomly generated color; because it is an RGB color, the user will need to combine three RGB values to find this </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">target color.</span></span></li>
<li><span class="koboSpan" id="kobo.129.1">The other circle will be their “guess” circle – kind of like a sketchpad, where the user can see their current progress as they manipulate </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">the sliders.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.131.1">These two circles</span><a id="_idIndexMarker780"/><span class="koboSpan" id="kobo.132.1"> will be created</span><a id="_idIndexMarker781"/><span class="koboSpan" id="kobo.133.1"> in their own SwiftUI file, so let’s make them now. </span><span class="koboSpan" id="kobo.133.2">Press </span><em class="italic"><span class="koboSpan" id="kobo.134.1">Command + N</span></em><span class="koboSpan" id="kobo.135.1">, select </span><strong class="bold"><span class="koboSpan" id="kobo.136.1">SwiftUI View</span></strong><span class="koboSpan" id="kobo.137.1">, and call it </span><strong class="source-inline"><span class="koboSpan" id="kobo.138.1">TargetAndGuessCircleView</span></strong><span class="koboSpan" id="kobo.139.1">. </span></p>
<p><span class="koboSpan" id="kobo.140.1">We want to use this file inside of </span><strong class="source-inline"><span class="koboSpan" id="kobo.141.1">ContentView</span></strong><span class="koboSpan" id="kobo.142.1"> – in order to do so, we will need some </span><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">Binding</span></strong><span class="koboSpan" id="kobo.144.1"> variables inside </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">the struct:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.146.1">
struct TargetAndGuessCircleView: View {
    //target variables
    @Binding var redTarget: Double
    @Binding var greenTarget: Double
    @Binding var blueTarget: Double
    
    //guess variables
    @Binding var redGuess: Double
    @Binding var greenGuess: Double
    @Binding var blueGuess: Double
    
    //picker variable
    @Binding var selectedPickerIndex: Int
           •••••••</span></pre>
<p><span class="koboSpan" id="kobo.147.1">There are seven variables needed for this file – three variables for the target circle, three variables for the guess circle, and one integer (which we will use for a </span><strong class="source-inline"><span class="koboSpan" id="kobo.148.1">Picker</span></strong><span class="koboSpan" id="kobo.149.1"> view) will allow the user to select a difficulty level. </span></p>
<p><span class="koboSpan" id="kobo.150.1">After adding those </span><strong class="source-inline"><span class="koboSpan" id="kobo.151.1">Binding</span></strong><span class="koboSpan" id="kobo.152.1"> properties, we notice we have an error in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">previews</span></strong><span class="koboSpan" id="kobo.154.1"> struct. </span><span class="koboSpan" id="kobo.154.2">Remember that when we add these variables to a file, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">previews</span></strong><span class="koboSpan" id="kobo.156.1"> struct always has to be updated</span><a id="_idIndexMarker782"/><span class="koboSpan" id="kobo.157.1"> with some dummy</span><a id="_idIndexMarker783"/><span class="koboSpan" id="kobo.158.1"> data in order for it to work again. </span><span class="koboSpan" id="kobo.158.2">So, modify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.159.1">previews</span></strong><span class="koboSpan" id="kobo.160.1"> struct so it looks </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.162.1">
struct TargetAndGuessCircleView_Previews: PreviewProvider {
    static var previews: some View {
        TargetAndGuessCircleView(redTarget: .constant(0.3), 
        greenTarget: .constant(0.2), blueTarget: 
        .constant(0.7), redGuess: .constant(0.7), 
        greenGuess: .constant(0.4), blueGuess: 
        .constant(0.7), selectedPickerIndex: .constant(2))
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.163.1">After that, let’s go back into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">body</span></strong><span class="koboSpan" id="kobo.165.1"> property. </span><span class="koboSpan" id="kobo.165.2">We want to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">ZStack</span></strong><span class="koboSpan" id="kobo.167.1"> so that we can overlay the target circle over the guess circle. </span><span class="koboSpan" id="kobo.167.2">We can create these two circles with the </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.169.1">
ZStack {
    //MARK: - GUESS CIRCLE
    if selectedPickerIndex == 0 {
        Circle()
            .fill(Color(red: redGuess, green: greenTarget,
              blue: blueTarget, opacity: 1.0))
            .frame(height: 200)
    }
    else if selectedPickerIndex == 1 {
        Circle()
            .fill(Color(red: redGuess, green: greenGuess,
              blue: blueTarget, opacity: 1.0))
    .frame(height: 200)
    }
    else if selectedPickerIndex == 2 {
        Circle()
            .fill(Color(red: redGuess, green: greenGuess,
              blue: blueGuess, opacity: 1.0))
            .frame(height: 200)
    }
     
     //MARK: - TARGET CIRCLE
     Circle()
        .fill(Color(red: redTarget, green: greenTarget,
          blue: blueTarget, opacity: 1.0))
        .frame(height: 80)
}</span></pre>
<p><span class="koboSpan" id="kobo.170.1">Inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">ZStack</span></strong><span class="koboSpan" id="kobo.172.1">, we start off with the guess</span><a id="_idIndexMarker784"/><span class="koboSpan" id="kobo.173.1"> circle; this will be the bigger</span><a id="_idIndexMarker785"/><span class="koboSpan" id="kobo.174.1"> circle, with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.175.1">frame</span></strong><span class="koboSpan" id="kobo.176.1"> height set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">200</span></strong><span class="koboSpan" id="kobo.178.1">. </span><span class="koboSpan" id="kobo.178.2">Here, we’re using an </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">if else</span></strong><span class="koboSpan" id="kobo.180.1"> statement and checking the </span><strong class="source-inline"><span class="koboSpan" id="kobo.181.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.182.1"> variable to see what difficulty level the user has chosen. </span><span class="koboSpan" id="kobo.182.2">If they’ve chosen </span><strong class="bold"><span class="koboSpan" id="kobo.183.1">Easy</span></strong><span class="koboSpan" id="kobo.184.1">, the index will be equal to </span><strong class="source-inline"><span class="koboSpan" id="kobo.185.1">0</span></strong><span class="koboSpan" id="kobo.186.1">; in that case, we will supply the green and blue RGB target colors to the user, so they only have to work out the red RGB target value. </span><span class="koboSpan" id="kobo.186.2">If they’ve selected </span><strong class="bold"><span class="koboSpan" id="kobo.187.1">Hard</span></strong><span class="koboSpan" id="kobo.188.1">, the index will be </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">1</span></strong><span class="koboSpan" id="kobo.190.1">; in that case, we only supply the user with the blue RGB value, and they have to work out the red and green values themselves. </span><span class="koboSpan" id="kobo.190.2">Finally, if the user selected the </span><strong class="bold"><span class="koboSpan" id="kobo.191.1">Extreme</span></strong><span class="koboSpan" id="kobo.192.1"> option, the index will be </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">2</span></strong><span class="koboSpan" id="kobo.194.1">; in that case, we don’t supply the user with any RGB target values and they have to work out the individual target color </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">value themselves.</span></span></p>
<p><span class="koboSpan" id="kobo.196.1">Next, we create the target circle – this will be the randomly generated</span><a id="_idIndexMarker786"/><span class="koboSpan" id="kobo.197.1"> colored circle that the user</span><a id="_idIndexMarker787"/><span class="koboSpan" id="kobo.198.1"> has to try and match by manipulating the sliders. </span><span class="koboSpan" id="kobo.198.2">Notice that we’re creating this circle much smaller, only </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">80</span></strong><span class="koboSpan" id="kobo.200.1"> points, and because we are in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">ZStack</span></strong><span class="koboSpan" id="kobo.202.1">, this circle will be on top of the guess circle. </span><span class="koboSpan" id="kobo.202.2">The reason for this overlaying of circles is that as the user is trying to work out the colors, their guess circle will change in color and they can better visualize how close they are to the </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">target color.</span></span></p>
<p><span class="koboSpan" id="kobo.204.1">Lastly, at the end of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">ZStack</span></strong><span class="koboSpan" id="kobo.206.1">, we’re using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.207.1">onAppear</span></strong><span class="koboSpan" id="kobo.208.1"> modifier. </span><span class="koboSpan" id="kobo.208.2">This modifier will run an action every time the </span><strong class="source-inline"><span class="koboSpan" id="kobo.209.1">ZStack</span></strong><span class="koboSpan" id="kobo.210.1"> gets redrawn; if the </span><strong class="source-inline"><span class="koboSpan" id="kobo.211.1">ZStack</span></strong><span class="koboSpan" id="kobo.212.1"> gets redrawn, it means the user chose to play a new game (using a button that we will create later) and the sliders will go back </span><span class="No-Break"><span class="koboSpan" id="kobo.213.1">to </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.214.1">0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.215.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.216.1">That finishes up the </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">TargetAndGuessCircleView</span></strong><span class="koboSpan" id="kobo.218.1"> file. </span><span class="koboSpan" id="kobo.218.2">Let’s go back into </span><strong class="source-inline"><span class="koboSpan" id="kobo.219.1">ContentView</span></strong><span class="koboSpan" id="kobo.220.1"> and add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.221.1">State</span></strong><span class="koboSpan" id="kobo.222.1"> variables that we need in order to </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">display </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">TargetAndGuessCircleView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.226.1">
//target variables
    @State var redTarget = Double.random(in: 0..&lt;1)
    @State var greenTarget = Double.random(in: 0..&lt;1)
    @State var blueTarget = Double.random(in: 0..&lt;1)
    //guess variables
    @State var redGuess: Double
    @State var greenGuess: Double
    @State var blueGuess: Double
    //picker variable
    @State var selectedPickerIndex = 1</span></pre>
<p><span class="koboSpan" id="kobo.227.1">There are seven </span><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">State</span></strong><span class="koboSpan" id="kobo.229.1"> properties, one for each of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">Binding</span></strong><span class="koboSpan" id="kobo.231.1"> properties we made in the previous file. </span><span class="koboSpan" id="kobo.231.2">The variables are each set to a random double value between </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">0</span></strong><span class="koboSpan" id="kobo.233.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">1</span></strong><span class="koboSpan" id="kobo.235.1"> using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1">Double.random(in: 0..&lt;1)</span></strong><span class="koboSpan" id="kobo.237.1"> method. </span><span class="koboSpan" id="kobo.237.2">The function will generate a new random number every time it’s called, meaning that every time the user starts a new game, a new random value will be used to pick an </span><span class="No-Break"><span class="koboSpan" id="kobo.238.1">RGB value.</span></span></p>
<p><span class="koboSpan" id="kobo.239.1">Continuing from here, we notice</span><a id="_idIndexMarker788"/><span class="koboSpan" id="kobo.240.1"> that there’s an error</span><a id="_idIndexMarker789"/><span class="koboSpan" id="kobo.241.1"> in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">Previews</span></strong><span class="koboSpan" id="kobo.243.1"> struct of </span><strong class="source-inline"><span class="koboSpan" id="kobo.244.1">ContentView</span></strong><span class="koboSpan" id="kobo.245.1">. </span><span class="koboSpan" id="kobo.245.2">This is a familiar error – it is Xcode telling us that we declared a property in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.246.1">ContentView</span></strong><span class="koboSpan" id="kobo.247.1"> struct, yet we are not including it here in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.248.1">Previews</span></strong><span class="koboSpan" id="kobo.249.1"> struct. </span><span class="koboSpan" id="kobo.249.2">Let’s fix that by inputting some data into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">Previews</span></strong><span class="koboSpan" id="kobo.251.1"> struct, </span><span class="No-Break"><span class="koboSpan" id="kobo.252.1">like so:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.253.1">
ContentView(redGuess: 0.5, greenGuess: 0.5, blueGuess: 0.5)</span></pre>
<p><span class="koboSpan" id="kobo.254.1">That will fix the error in </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1">ContentView</span></strong><span class="koboSpan" id="kobo.256.1">, but we also need to update the Swift file that contains the main startup code for the project. </span><span class="koboSpan" id="kobo.256.2">That file will be named the same as what you named your app – I named this project </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1">Find the Color</span></strong><span class="koboSpan" id="kobo.258.1">, so in the Project Navigator to the left of Xcode, there will be a file with a Swift extension, </span><span class="No-Break"><span class="koboSpan" id="kobo.259.1">called </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">Find_The_ColorApp.swift</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.262.1">Click on that Swift file, and update the code to </span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">the following:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.264.1">
@main
struct Find_The_ColorApp: App {
  var body: some Scene {
      WindowGroup {
          ContentView(redGuess: 0.5, greenGuess: 0.5,
            blueGuess: 0.5)
      }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.265.1">We can now go back into </span><strong class="source-inline"><span class="koboSpan" id="kobo.266.1">ContentView</span></strong><span class="koboSpan" id="kobo.267.1">, call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1">TargetAndGuessCircleView</span></strong><span class="koboSpan" id="kobo.269.1"> file, and pass in the appropriate </span><strong class="source-inline"><span class="koboSpan" id="kobo.270.1">State</span></strong><span class="koboSpan" id="kobo.271.1"> variables. </span><span class="koboSpan" id="kobo.271.2">Add the following code directly underneath the </span><span class="No-Break"><span class="koboSpan" id="kobo.272.1">title code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.273.1">
//MARK: - TARGET AND GUESS CIRCLES
    TargetAndGuessCircleView(redTarget: $redTarget,
      greenTarget: $greenTarget, blueTarget: $blueTarget,
      redGuess: $redGuess, greenGuess: $greenGuess,
      blueGuess: $blueGuess, selectedPickerIndex:
      $selectedPickerIndex)</span></pre>
<p><span class="koboSpan" id="kobo.274.1">This is how</span><a id="_idIndexMarker790"/><span class="koboSpan" id="kobo.275.1"> the UI should</span><a id="_idIndexMarker791"/> <span class="No-Break"><span class="koboSpan" id="kobo.276.1">look now:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer191">
<span class="koboSpan" id="kobo.277.1"><img alt="Figure 14.2: Target and guess circles " src="image/B18674_14_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.278.1">Figure 14.2: Target and guess circles</span></p>
<p><span class="koboSpan" id="kobo.279.1">Let’s continue by adding the </span><strong class="source-inline"><span class="koboSpan" id="kobo.280.1">Picker</span></strong><span class="koboSpan" id="kobo.281.1"> view to allow the user to select the difficulty for </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">the game.</span></span></p>
<h1 id="_idParaDest-199"><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.283.1">Creating the Picker view</span></h1>
<p><span class="koboSpan" id="kobo.284.1">To create the </span><strong class="source-inline"><span class="koboSpan" id="kobo.285.1">Picker</span></strong><span class="koboSpan" id="kobo.286.1"> view, let’s make</span><a id="_idIndexMarker792"/><span class="koboSpan" id="kobo.287.1"> a new SwiftUI View file called </span><strong class="source-inline"><span class="koboSpan" id="kobo.288.1">PickerView</span></strong><span class="koboSpan" id="kobo.289.1"> for </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">this purpose.</span></span></p>
<p><span class="koboSpan" id="kobo.291.1">Inside this file, we need to add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.292.1">Binding</span></strong><span class="koboSpan" id="kobo.293.1"> property so that we can use it inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">ContentView</span></strong><span class="koboSpan" id="kobo.295.1">, as well as add an array of titles for </span><span class="No-Break"><span class="koboSpan" id="kobo.296.1">the picker:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.297.1">
    @Binding var selectedPickerIndex: Int
    @State var levels = ["Easy 😌", "Hard 😓", "Extreme! 
</span><span class="koboSpan" id="kobo.297.2">      🥵"]</span></pre>
<p><span class="koboSpan" id="kobo.298.1">The code here has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.299.1">Binding</span></strong><span class="koboSpan" id="kobo.300.1"> variable to hold the value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.301.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.302.1">; that way, we can keep track of which button on the picker the user has selected. </span><span class="koboSpan" id="kobo.302.2">Then, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.303.1">State</span></strong><span class="koboSpan" id="kobo.304.1"> array of titles that we will use on the individual picker buttons, along with an appropriate emoji signifying the </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">difficulty level.</span></span></p>
<p><span class="koboSpan" id="kobo.306.1">Next, as we’ve done before, update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1">Previews</span></strong><span class="koboSpan" id="kobo.308.1"> struct with some dummy data, to </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">satisfy Xcode:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.310.1">
struct PickerView_Previews: PreviewProvider {
    static var previews: some View {
        PickerView(selectedPickerIndex: .constant(1))
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.311.1">With the previews up and running, we can now create and style the </span><strong class="source-inline"><span class="koboSpan" id="kobo.312.1">Picker</span></strong><span class="koboSpan" id="kobo.313.1"> control. </span><span class="koboSpan" id="kobo.313.2">Move into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">body</span></strong><span class="koboSpan" id="kobo.315.1"> property and add </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.317.1">
 var body: some View {
  VStack {
      Picker("Numbers", selection: $selectedPickerIndex) {
              ForEach(0 ..&lt; levels.count, id: \.self) { 
                index in
                  Text(levels[index])
              }
          }
          .pickerStyle(SegmentedPickerStyle())
          .background(Color.yellow)
          .cornerRadius(8)
          .padding(.horizontal)
          .shadow(color: Color.black, radius: 2, y: 4)
          .padding(.top)
      
      Text("Difficulty Level: " + 
        "\(levels[selectedPickerIndex])").bold()
          .padding(5)
          .animation(.easeInOut(duration: 0.2), value:
            selectedPickerIndex)
      }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.318.1">This is what we are </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1">doing here.</span></span></p>
<p><span class="koboSpan" id="kobo.320.1">The code adds a </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">Picker</span></strong><span class="koboSpan" id="kobo.322.1"> component</span><a id="_idIndexMarker793"/><span class="koboSpan" id="kobo.323.1"> and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.324.1">Text</span></strong><span class="koboSpan" id="kobo.325.1"> component. </span><span class="koboSpan" id="kobo.325.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">VStack</span></strong><span class="koboSpan" id="kobo.327.1"> is used to arrange the </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">Picker</span></strong><span class="koboSpan" id="kobo.329.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.330.1">Text</span></strong><span class="koboSpan" id="kobo.331.1"> components vertically. </span><strong class="source-inline"><span class="koboSpan" id="kobo.332.1">Picker</span></strong><span class="koboSpan" id="kobo.333.1"> is used to display a list of options, with the options being the elements in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">levels</span></strong><span class="koboSpan" id="kobo.335.1"> array; it takes two arguments: </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1">Numbers</span></strong><span class="koboSpan" id="kobo.337.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">selection: $selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.339.1">, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">Numbers</span></strong><span class="koboSpan" id="kobo.341.1"> is the label for the picker and </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">$selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.343.1"> is a state variable that keeps track of the currently </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1">selected option.</span></span></p>
<p><span class="koboSpan" id="kobo.345.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.346.1">ForEach</span></strong><span class="koboSpan" id="kobo.347.1"> loop is used to iterate through the </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1">levels</span></strong><span class="koboSpan" id="kobo.349.1"> array, creating a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">Text</span></strong><span class="koboSpan" id="kobo.351.1"> component for each element in the array. </span><span class="koboSpan" id="kobo.351.2">Each </span><strong class="source-inline"><span class="koboSpan" id="kobo.352.1">Text</span></strong><span class="koboSpan" id="kobo.353.1"> component is configured to display the corresponding element from the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.354.1">levels</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.355.1"> array.</span></span></p>
<p><span class="koboSpan" id="kobo.356.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1">pickerStyle</span></strong><span class="koboSpan" id="kobo.358.1"> method is used to change</span><a id="_idIndexMarker794"/><span class="koboSpan" id="kobo.359.1"> the appearance of the picker to a segmented picker style. </span><span class="koboSpan" id="kobo.359.2">We have used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">background</span></strong><span class="koboSpan" id="kobo.361.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.362.1">cornerRadius</span></strong><span class="koboSpan" id="kobo.363.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.364.1">padding</span></strong><span class="koboSpan" id="kobo.365.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1">shadow</span></strong><span class="koboSpan" id="kobo.367.1"> modifiers before, and these apply various visual styles to </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">the picker.</span></span></p>
<p><span class="koboSpan" id="kobo.369.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1">Text</span></strong><span class="koboSpan" id="kobo.371.1"> component is used to display the difficulty level in the UI under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.372.1">Picker</span></strong><span class="koboSpan" id="kobo.373.1"> component. </span><span class="koboSpan" id="kobo.373.2">It takes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.374.1">"Difficulty Level: " + "(levels[selectedPickerIndex])"</span></strong><span class="koboSpan" id="kobo.375.1"> string and makes it bold, then applies some padding and animation to it. </span><span class="koboSpan" id="kobo.375.2">The animation is added so that instead of the difficulty level string appearing and disappearing instantly, it will ease in and out with a </span><strong class="source-inline"><span class="koboSpan" id="kobo.376.1">0.2</span></strong><span class="koboSpan" id="kobo.377.1">-second duration, for a smoother transition in </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">the UI.</span></span></p>
<p><span class="koboSpan" id="kobo.379.1">Now, we have a </span><strong class="source-inline"><span class="koboSpan" id="kobo.380.1">Picker</span></strong><span class="koboSpan" id="kobo.381.1"> component that can be used to select the difficulty level of the game, and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.382.1">Text</span></strong><span class="koboSpan" id="kobo.383.1"> string to display </span><span class="No-Break"><span class="koboSpan" id="kobo.384.1">that level.</span></span></p>
<p><span class="koboSpan" id="kobo.385.1">The result is </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer192">
<span class="koboSpan" id="kobo.387.1"><img alt="Figure 14.3: The segmented picker " src="image/B18674_14_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.388.1">Figure 14.3: The segmented picker</span></p>
<p><span class="koboSpan" id="kobo.389.1">With the </span><strong class="source-inline"><span class="koboSpan" id="kobo.390.1">Picker</span></strong><span class="koboSpan" id="kobo.391.1"> control done, move back</span><a id="_idIndexMarker795"/><span class="koboSpan" id="kobo.392.1"> into </span><strong class="source-inline"><span class="koboSpan" id="kobo.393.1">ContentView</span></strong><span class="koboSpan" id="kobo.394.1"> and call </span><strong class="source-inline"><span class="koboSpan" id="kobo.395.1">PickerView</span></strong><strong class="bold"> </strong><span class="koboSpan" id="kobo.396.1">directly under the target and guess </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">circle code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.398.1">
//MARK: - PICKER
    PickerView(selectedPickerIndex: $selectedPickerIndex)</span></pre>
<p><span class="koboSpan" id="kobo.399.1">That code will add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.400.1">PickerView</span></strong><span class="koboSpan" id="kobo.401.1"> file into the UI under the target and guess circles. </span><span class="koboSpan" id="kobo.401.2">The result is </span><span class="No-Break"><span class="koboSpan" id="kobo.402.1">shown here:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer193">
<span class="koboSpan" id="kobo.403.1"><img alt="Figure 14.4: The picker in the UI " src="image/B18674_14_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.404.1">Figure 14.4: The picker in the UI</span></p>
<p><span class="koboSpan" id="kobo.405.1">Now, if you click on the picker, you will see that the guess circle changes color; it won’t change to more than three shades of colors, as the picker displays a random color from each RGB value while the preview is running. </span><span class="koboSpan" id="kobo.405.2">If you stop the preview and restart it, another set of three random colors will </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">be displayed.</span></span></p>
<p><span class="koboSpan" id="kobo.407.1">Shortly, we will implement sliders to change the guess</span><a id="_idIndexMarker796"/><span class="koboSpan" id="kobo.408.1"> circle colors, and change the target circle color when the user starts a new game. </span><span class="koboSpan" id="kobo.408.2">Before that, let’s continue with the next part of the UI, making target and guess rectangles. </span><span class="koboSpan" id="kobo.408.3">I’ll explain what they are </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">for next.</span></span></p>
<h1 id="_idParaDest-200"><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.410.1">Creating the target and guess rectangles</span></h1>
<p><span class="koboSpan" id="kobo.411.1">So far, we have given the user</span><a id="_idIndexMarker797"/><span class="koboSpan" id="kobo.412.1"> a guess circle</span><a id="_idIndexMarker798"/><span class="koboSpan" id="kobo.413.1"> so they can see how close they are coming to the target color. </span><span class="koboSpan" id="kobo.413.2">Let’s do something similar to that and give them another visual cue – let’s create a guess rectangle and a target rectangle, and put them directly under the </span><strong class="source-inline"><span class="koboSpan" id="kobo.414.1">Picker</span></strong><span class="koboSpan" id="kobo.415.1"> control. </span><span class="koboSpan" id="kobo.415.2">We can also add an RGB value indicator, so they can see the actual values of each slider as they change, which can be helpful when they’re trying to figure out how much of the slider they need to move and in which direction. </span></p>
<p><span class="koboSpan" id="kobo.416.1">Start by creating a new file to make these rectangles, called </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1">TargetAndGuessRectView</span></strong><span class="koboSpan" id="kobo.418.1">. </span><span class="koboSpan" id="kobo.418.2">This file will contain very similar code to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1">TargetAndGuessCircleView</span></strong><span class="koboSpan" id="kobo.420.1"> file, which means adding the needed </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.421.1">Binding</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.422.1"> properties:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.423.1">
    @Binding var redTarget: Double
    @Binding var greenTarget: Double
    @Binding var blueTarget: Double
    @Binding var redGuess: Double
    @Binding var greenGuess: Double
    @Binding var blueGuess: Double
    @Binding var selectedPickerIndex: Int</span></pre>
<p><span class="koboSpan" id="kobo.424.1">You should be familiar with these </span><strong class="source-inline"><span class="koboSpan" id="kobo.425.1">Binding</span></strong><span class="koboSpan" id="kobo.426.1"> variables, as we’ve created them before in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.427.1">TargetAndGuessCircleView</span></strong><span class="koboSpan" id="kobo.428.1"> file. </span><span class="koboSpan" id="kobo.428.2">Actually, you can refactor all the code and combine the two guess and target files into one file if you’d like, or create a data model and make the properties available to all the files... </span><span class="koboSpan" id="kobo.428.3">I’ll leave that as a challenge </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">for you.</span></span></p>
<p><span class="koboSpan" id="kobo.430.1">Moving on, we need a combination of VStacks and HStacks to position the </span><strong class="source-inline"><span class="koboSpan" id="kobo.431.1">Rectangle</span></strong><span class="koboSpan" id="kobo.432.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.433.1">Text</span></strong><span class="koboSpan" id="kobo.434.1"> views. </span><span class="koboSpan" id="kobo.434.2">Add this code to the body of the file (I’ll explain it </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">all next):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.436.1">
var body: some View {
  VStack {
      HStack {
          //MARK: - TARGET RECTANGLE
          VStack {
              Rectangle()
                  .foregroundColor(Color(red: redTarget,
                    green: greenTarget, blue: blueTarget, 
                    opacity: 1.0))
                  .cornerRadius(5)
                  .padding(.init(top: 0, leading: 10, 
                    bottom: 0, trailing: 0))
                  .frame(height: 40)
              Text("Target Color to Match").bold()
          }
          //MARK: - GUESS RECTANGLE
          VStack {
              if selectedPickerIndex == 0 {
                  Rectangle()
                      .foregroundColor(Color(red: redGuess,
                        green: greenTarget, blue: 
                        blueTarget, opacity: 1.0))
                      .modifier(rectModifier())
              }
             else if selectedPickerIndex == 1 {
                  Rectangle()
                .foregroundColor(Color(red: redGuess,
                  green: greenGuess, blue: blueTarget,
                  opacity: 1.0))
                .modifier(rectModifier())
         }
              else if selectedPickerIndex == 2 {
                   Rectangle()
                      .foregroundColor(Color(red: redGuess,
                        green: greenGuess, blue: blueGuess,
                        opacity: 1.0))
                      .modifier(rectModifier())
              }
              HStack {
                  Image(systemName: "r.circle.fill")
                      .foregroundColor(.red)
                  Text("\(Int(redGuess * 255.0))")
                      .font(.callout)
                  Image(systemName: "g.circle.fill")
                      .foregroundColor(.green)
                  Text("\(Int(greenGuess * 255.0))")
                      .font(.callout)
                  Image(systemName: "b.circle.fill")
                      .foregroundColor(.blue)
                  Text("\(Int(blueGuess * 255.0))")
                      .font(.callout)
              }
           }
      }
        }
    }
}
struct rectModifier : ViewModifier {
    func body(content: Content) -&gt; some View {
        content
            .cornerRadius(5)
            .padding(.init(top: 0, leading: 0, bottom: 0,
              trailing: 10))
            .frame(height: 40)
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.437.1">Here’s a breakdown of what the code </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">is doing.</span></span></p>
<p><span class="koboSpan" id="kobo.439.1">The first </span><strong class="source-inline"><span class="koboSpan" id="kobo.440.1">VStack</span></strong><span class="koboSpan" id="kobo.441.1"> contains</span><a id="_idIndexMarker799"/><span class="koboSpan" id="kobo.442.1"> a rectangle with the color</span><a id="_idIndexMarker800"/><span class="koboSpan" id="kobo.443.1"> determined by the values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.444.1">redTarget</span></strong><span class="koboSpan" id="kobo.445.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.446.1">greenTarget</span></strong><span class="koboSpan" id="kobo.447.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.448.1">blueTarget</span></strong><span class="koboSpan" id="kobo.449.1">. </span><span class="koboSpan" id="kobo.449.2">It also has a corner radius of </span><strong class="source-inline"><span class="koboSpan" id="kobo.450.1">5</span></strong><span class="koboSpan" id="kobo.451.1"> and padding on the leading edge, with a height of </span><strong class="source-inline"><span class="koboSpan" id="kobo.452.1">40</span></strong><span class="koboSpan" id="kobo.453.1">. </span><span class="koboSpan" id="kobo.453.2">Below the rectangle, there is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.454.1">Text</span></strong><span class="koboSpan" id="kobo.455.1"> view displaying the </span><strong class="source-inline"><span class="koboSpan" id="kobo.456.1">"Target Color to Match"</span></strong><span class="koboSpan" id="kobo.457.1"> string in </span><span class="No-Break"><span class="koboSpan" id="kobo.458.1">bold font.</span></span></p>
<p><span class="koboSpan" id="kobo.459.1">The second </span><strong class="source-inline"><span class="koboSpan" id="kobo.460.1">VStack</span></strong><span class="koboSpan" id="kobo.461.1"> contains a rectangle with the color determined by the values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.462.1">redGuess</span></strong><span class="koboSpan" id="kobo.463.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.464.1">greenGuess</span></strong><span class="koboSpan" id="kobo.465.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.466.1">blueGuess</span></strong><span class="koboSpan" id="kobo.467.1">, and is modified by the </span><strong class="source-inline"><span class="koboSpan" id="kobo.468.1">rectModifier</span></strong><span class="koboSpan" id="kobo.469.1"> struct (more on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.470.1">rectModifier</span></strong><span class="koboSpan" id="kobo.471.1"> struct in a moment). </span><span class="koboSpan" id="kobo.471.2">The color of the rectangle is determined by </span><strong class="source-inline"><span class="koboSpan" id="kobo.472.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.473.1">, which is an integer value. </span><span class="koboSpan" id="kobo.473.2">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.475.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1">0</span></strong><span class="koboSpan" id="kobo.477.1">, the color is determined by </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1">redGuess</span></strong><span class="koboSpan" id="kobo.479.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1">greenTarget</span></strong><span class="koboSpan" id="kobo.481.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1">blueTarget</span></strong><span class="koboSpan" id="kobo.483.1">. </span><span class="koboSpan" id="kobo.483.2">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.485.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1">1</span></strong><span class="koboSpan" id="kobo.487.1">, the color is determined by </span><strong class="source-inline"><span class="koboSpan" id="kobo.488.1">redGuess</span></strong><span class="koboSpan" id="kobo.489.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1">greenGuess</span></strong><span class="koboSpan" id="kobo.491.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1">blueTarget</span></strong><span class="koboSpan" id="kobo.493.1">. </span><span class="koboSpan" id="kobo.493.2">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.494.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.495.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.496.1">2</span></strong><span class="koboSpan" id="kobo.497.1">, the color is determined by </span><strong class="source-inline"><span class="koboSpan" id="kobo.498.1">redGuess</span></strong><span class="koboSpan" id="kobo.499.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.500.1">greenGuess</span></strong><span class="koboSpan" id="kobo.501.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.502.1">blueGuess</span></strong><span class="koboSpan" id="kobo.503.1">. </span><span class="koboSpan" id="kobo.503.2">Below the rectangle, there is an </span><strong class="source-inline"><span class="koboSpan" id="kobo.504.1">HStack</span></strong><span class="koboSpan" id="kobo.505.1"> containing an image and text displaying the values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.506.1">redGuess</span></strong><span class="koboSpan" id="kobo.507.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.508.1">greenGuess</span></strong><span class="koboSpan" id="kobo.509.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.510.1">blueGuess</span></strong><span class="koboSpan" id="kobo.511.1">, respectively. </span></p>
<p><span class="koboSpan" id="kobo.512.1">Now the target</span><a id="_idIndexMarker801"/><span class="koboSpan" id="kobo.513.1"> and guess rectangles</span><a id="_idIndexMarker802"/><span class="koboSpan" id="kobo.514.1"> are in place, as well as the three </span><strong class="source-inline"><span class="koboSpan" id="kobo.515.1">Text</span></strong><span class="koboSpan" id="kobo.516.1"> views that will display the RGB values as the user works the slider, let’s continue and look at that last bit of code, the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.517.1">rectModifer</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.518.1"> struct.</span></span></p>
<p><span class="koboSpan" id="kobo.519.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.520.1">rectModifier</span></strong><span class="koboSpan" id="kobo.521.1"> struct is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.522.1">ViewModifier</span></strong><span class="koboSpan" id="kobo.523.1"> that modifies the </span><strong class="source-inline"><span class="koboSpan" id="kobo.524.1">Rectangle</span></strong><span class="koboSpan" id="kobo.525.1"> view. </span><span class="koboSpan" id="kobo.525.2">It is a struct that conforms to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.526.1">ViewModifier</span></strong><span class="koboSpan" id="kobo.527.1"> protocol and defines a single method, </span><strong class="source-inline"><span class="koboSpan" id="kobo.528.1">body(content: Content) -&gt; some View</span></strong><span class="koboSpan" id="kobo.529.1">, which takes a single argument content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.530.1">Content</span></strong><span class="koboSpan" id="kobo.531.1"> type and returns a modified version of that content wrapped in </span><span class="No-Break"><span class="koboSpan" id="kobo.532.1">a </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.533.1">view</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.535.1">In this specific case, the struct is modifying the appearance of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.536.1">rectangle</span></strong><span class="koboSpan" id="kobo.537.1"> view. </span><span class="koboSpan" id="kobo.537.2">The modifications are made by chaining together a series of view modifiers on the </span><strong class="source-inline"><span class="koboSpan" id="kobo.538.1">content</span></strong><span class="koboSpan" id="kobo.539.1"> parameter in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1">body</span></strong><span class="koboSpan" id="kobo.541.1"> method, such as setting the corner radius to </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1">5</span></strong><span class="koboSpan" id="kobo.543.1">, adding </span><strong class="source-inline"><span class="koboSpan" id="kobo.544.1">padding</span></strong><span class="koboSpan" id="kobo.545.1"> to the trailing edge, and setting the height of the rectangle </span><span class="No-Break"><span class="koboSpan" id="kobo.546.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.547.1">40</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.549.1">When </span><strong class="source-inline"><span class="koboSpan" id="kobo.550.1">rectModifier()</span></strong><span class="koboSpan" id="kobo.551.1"> is called, it is passed the </span><strong class="source-inline"><span class="koboSpan" id="kobo.552.1">rectangle</span></strong><span class="koboSpan" id="kobo.553.1"> view as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.554.1">content</span></strong><span class="koboSpan" id="kobo.555.1"> parameter, and it applies the modifications defined in the struct to that </span><strong class="source-inline"><span class="koboSpan" id="kobo.556.1">rectangle</span></strong><span class="koboSpan" id="kobo.557.1"> view, returning the modified version of that view. </span><span class="koboSpan" id="kobo.557.2">In other words, </span><strong class="source-inline"><span class="koboSpan" id="kobo.558.1">rectModifier()</span></strong><span class="koboSpan" id="kobo.559.1"> is a simple way to package a set of modifiers that can be applied to any view, and it provides a way to reuse the same set of modifiers on multiple views, saving on coding time </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">and readability.</span></span></p>
<p><span class="koboSpan" id="kobo.561.1">Here is the result of what we </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">just coded:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer194">
<span class="koboSpan" id="kobo.563.1"><img alt="Figure 14.5: Target and guess rectangles " src="image/B18674_14_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.564.1">Figure 14.5: Target and guess rectangles</span></p>
<p><span class="koboSpan" id="kobo.565.1">The sliders will now display the RGB values for the user. </span></p>
<p><span class="koboSpan" id="kobo.566.1">Now, it’s time</span><a id="_idIndexMarker803"/><span class="koboSpan" id="kobo.567.1"> to go back</span><a id="_idIndexMarker804"/><span class="koboSpan" id="kobo.568.1"> into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.569.1">ContentView</span></strong><span class="koboSpan" id="kobo.570.1"> and make a call to this file directly underneath the </span><strong class="source-inline"><span class="koboSpan" id="kobo.571.1">Picker</span></strong><span class="koboSpan" id="kobo.572.1"> code so that we can display these two rectangles and text in the </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">main UI:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.574.1">
 //MARK: - TARGET AND GUESS RECTANGLES
    TargetAndGuessRectView(redTarget: $redTarget,
      greenTarget: $greenTarget, blueTarget: $blueTarget,
      redGuess: $redGuess, greenGuess: $greenGuess,
      blueGuess: $blueGuess, selectedPickerIndex:
      $selectedPickerIndex)</span></pre>
<p><span class="koboSpan" id="kobo.575.1">Again, this is familiar code – we are simply calling </span><strong class="source-inline"><span class="koboSpan" id="kobo.576.1">TargetAndGuessRectView</span></strong><span class="koboSpan" id="kobo.577.1"> and passing</span><a id="_idIndexMarker805"/><span class="koboSpan" id="kobo.578.1"> in the appropriate </span><strong class="source-inline"><span class="koboSpan" id="kobo.579.1">State</span></strong><span class="koboSpan" id="kobo.580.1"> variables. </span><span class="koboSpan" id="kobo.580.2">Here</span><a id="_idIndexMarker806"/><span class="koboSpan" id="kobo.581.1"> is </span><span class="No-Break"><span class="koboSpan" id="kobo.582.1">the result:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer195">
<span class="koboSpan" id="kobo.583.1"><img alt="Figure 14.6: Target and Guess Rectangles in the UI " src="image/B18674_14_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.584.1">Figure 14.6: Target and Guess Rectangles in the UI</span></p>
<p><span class="koboSpan" id="kobo.585.1">We just need the sliders, and a button to check the score, so let’s do </span><span class="No-Break"><span class="koboSpan" id="kobo.586.1">that now.</span></span></p>
<h1 id="_idParaDest-201"><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.587.1">Making the color sliders</span></h1>
<p><span class="koboSpan" id="kobo.588.1">To start creating</span><a id="_idIndexMarker807"/><span class="koboSpan" id="kobo.589.1"> the sliders, make a new SwiftUI View file and call </span><span class="No-Break"><span class="koboSpan" id="kobo.590.1">it </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.591.1">SliderView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.592.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.593.1">As the sliders are only used to manipulate the guess circle, we won’t need any </span><strong class="source-inline"><span class="koboSpan" id="kobo.594.1">Target</span></strong><span class="koboSpan" id="kobo.595.1"> variables in this file. </span><span class="koboSpan" id="kobo.595.2">Instead, we just need three </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1">Guess</span></strong><span class="koboSpan" id="kobo.597.1"> variables, as well as a variable to track the value of the picker control, which you can add </span><span class="No-Break"><span class="koboSpan" id="kobo.598.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.599.1">
    @Binding var redGuess: Double
    @Binding var greenGuess: Double
    @Binding var blueGuess: Double
    @Binding var selectedPickerIndex: Int</span></pre>
<p><span class="koboSpan" id="kobo.600.1">Again, we need to update the </span><strong class="source-inline"><span class="koboSpan" id="kobo.601.1">Previews</span></strong><span class="koboSpan" id="kobo.602.1"> struct, because it’s giving us this error: </span><strong class="bold"><span class="koboSpan" id="kobo.603.1">Missing arguments for parameters redGuess, greenGuess, blueGuess, selectedPickerIndex in call</span></strong><span class="koboSpan" id="kobo.604.1">. </span><span class="koboSpan" id="kobo.604.2">This error is telling us, as it has before, to include the </span><strong class="source-inline"><span class="koboSpan" id="kobo.605.1">Binding</span></strong><span class="koboSpan" id="kobo.606.1"> variables in its </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1">SliderView</span></strong><span class="koboSpan" id="kobo.608.1"> struct initializer. </span><span class="koboSpan" id="kobo.608.2">Let’s give it what it wants, by updating </span><strong class="source-inline"><span class="koboSpan" id="kobo.609.1">Previews</span></strong><span class="koboSpan" id="kobo.610.1"> with the </span><span class="No-Break"><span class="koboSpan" id="kobo.611.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.612.1">
struct StyleTheSliders_Previews: PreviewProvider {
    static var previews: some View {
        SliderView(redGuess: .constant(0.5), greenGuess: 
          .constant(0.5), blueGuess: .constant(0.5), 
          selectedPickerIndex: .constant(1))
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.613.1">With the previews operational again, let’s continue by making a separate struct for the creation of the slider itself. </span><span class="koboSpan" id="kobo.613.2">Add </span><strong class="source-inline"><span class="koboSpan" id="kobo.614.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.615.1"> outside and underneath the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.616.1">SliderView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.617.1"> struct:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.618.1">
struct CreateSlider: View {
    @Binding var value: Double
    var color: Color
    var body: some View {
        HStack {
            Text("0")
                .bold()
                .foregroundColor(color)
            
            Slider(value: $value, in: 0.0...1.0)
            Text("255")
                .bold()
                .foregroundColor(color)
        }.padding(.init(top: 10, leading: 10, bottom: 10, 
          trailing: 10))
    }
}</span></pre>
<p><span class="koboSpan" id="kobo.619.1">This code defines</span><a id="_idIndexMarker808"/><span class="koboSpan" id="kobo.620.1"> a new SwiftUI struct called </span><strong class="source-inline"><span class="koboSpan" id="kobo.621.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.622.1"> that takes in two parameters: a </span><strong class="source-inline"><span class="koboSpan" id="kobo.623.1">Binding</span></strong><span class="koboSpan" id="kobo.624.1"> variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.625.1">value</span></strong><span class="koboSpan" id="kobo.626.1"> of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.627.1">Double</span></strong><span class="koboSpan" id="kobo.628.1"> type, and a variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1">color</span></strong><span class="koboSpan" id="kobo.630.1"> of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.631.1">Color</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.632.1"> type.</span></span></p>
<p><span class="koboSpan" id="kobo.633.1">Here is what each line of </span><span class="No-Break"><span class="koboSpan" id="kobo.634.1">code does.</span></span></p>
<p><span class="koboSpan" id="kobo.635.1">As we’ve seen before, </span><strong class="source-inline"><span class="koboSpan" id="kobo.636.1">@Binding var value: Double</span></strong><span class="koboSpan" id="kobo.637.1"> is a property wrapper that creates a two-way binding between the struct’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.638.1">value</span></strong><span class="koboSpan" id="kobo.639.1"> variable and another variable. </span><span class="koboSpan" id="kobo.639.2">This allows the struct to read and write the value of the variable that it is </span><span class="No-Break"><span class="koboSpan" id="kobo.640.1">bound to.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.641.1">var color: Color</span></strong><span class="koboSpan" id="kobo.642.1"> creates a variable called </span><strong class="source-inline"><span class="koboSpan" id="kobo.643.1">color</span></strong><span class="koboSpan" id="kobo.644.1"> that is of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.645.1">Color</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.646.1"> type.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.647.1">Text("0")</span></strong><span class="koboSpan" id="kobo.648.1"> creates a </span><strong class="source-inline"><span class="koboSpan" id="kobo.649.1">Text</span></strong><span class="koboSpan" id="kobo.650.1"> view with a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.651.1">0</span></strong><span class="koboSpan" id="kobo.652.1">, and gets the following modifiers placed on it: </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1">.bold()</span></strong><span class="koboSpan" id="kobo.654.1"> makes the text bold, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.655.1">foregroundColor(color)</span></strong><span class="koboSpan" id="kobo.656.1"> sets the color of the text to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.657.1">color</span></strong><span class="koboSpan" id="kobo.658.1"> variable passed to </span><span class="No-Break"><span class="koboSpan" id="kobo.659.1">the struct.</span></span></p>
<p><span class="koboSpan" id="kobo.660.1">Then we add the slider, </span><strong class="source-inline"><span class="koboSpan" id="kobo.661.1">Slider(value: $value, in: 0.0...1.0)</span></strong><span class="koboSpan" id="kobo.662.1">. </span><span class="koboSpan" id="kobo.662.2">This creates a </span><strong class="source-inline"><span class="koboSpan" id="kobo.663.1">Slider</span></strong><span class="koboSpan" id="kobo.664.1"> view that reads and writes its value to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1">value</span></strong><span class="koboSpan" id="kobo.666.1"> property. </span><span class="koboSpan" id="kobo.666.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.667.1">in</span></strong><span class="koboSpan" id="kobo.668.1"> parameter sets the range of the slider to go from </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1">0.0</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.670.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.671.1">1.0</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.673.1">Then, we add another </span><strong class="source-inline"><span class="koboSpan" id="kobo.674.1">Text</span></strong><span class="koboSpan" id="kobo.675.1"> view, add the text </span><strong class="source-inline"><span class="koboSpan" id="kobo.676.1">255</span></strong><span class="koboSpan" id="kobo.677.1">, and put some padding on it using </span><strong class="source-inline"><span class="koboSpan" id="kobo.678.1">.padding(.init(top: 10, leading: 10, bottom: 10, trailing: 10))</span></strong><span class="koboSpan" id="kobo.679.1">. </span><span class="koboSpan" id="kobo.679.2">This is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1">View</span></strong><span class="koboSpan" id="kobo.681.1"> modifier that adds a padding of </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1">10</span></strong><span class="koboSpan" id="kobo.683.1"> points to the top, leading, bottom, and trailing edge of </span><span class="No-Break"><span class="koboSpan" id="kobo.684.1">the view.</span></span></p>
<p><span class="koboSpan" id="kobo.685.1">With the slider created, we will need</span><a id="_idIndexMarker809"/><span class="koboSpan" id="kobo.686.1"> to call this </span><strong class="source-inline"><span class="koboSpan" id="kobo.687.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.688.1"> struct several times inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.689.1">SliderView</span></strong><span class="koboSpan" id="kobo.690.1"> struct and add some styling to it as well. </span><span class="koboSpan" id="kobo.690.2">So, back up into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.691.1">SliderView</span></strong><span class="koboSpan" id="kobo.692.1"> struct, add the </span><span class="No-Break"><span class="koboSpan" id="kobo.693.1">following code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.694.1">
var body: some View {
    //MARK: - SLIDERS FOR THE GUESS CIRCLE
    VStack {
        //red slider - this slider will always be visible
          and represents the "Easy" option on the picker
        CreateSlider(value: $redGuess, color: .red)
            .background(Capsule().stroke(Color.red,
              lineWidth: 3))
            .padding(.horizontal)
            .accentColor(.red)
            .padding(5)
        
        switch selectedPickerIndex {
        case 1:
            //green slider - shown when the "Hard" option 
              is selected
            CreateSlider(value: $greenGuess, color: .green)
                .background(Capsule().stroke(Color.green,
                  lineWidth: 4))
                .padding(.horizontal)
                .accentColor(.green)
                .padding(5)
        case 2:
          //blue slider - this is shown when the 
            "Extreme" option is selected
              CreateSlider(value: $greenGuess, color:
                .green)
                  .background(Capsule().stroke(Color.green,
                    lineWidth: 4))
                  .padding(.horizontal)
                  .accentColor(.green)
                  .padding(5)
              
              CreateSlider(value: $blueGuess, color: .blue)
                  .background(Capsule().stroke(Color.blue,
                    lineWidth: 4))
                  .padding(.horizontal)
                  .accentColor(.blue)
                  .padding(5)
          default:
              EmptyView()
          }
      }
  }</span></pre>
<p><span class="koboSpan" id="kobo.695.1">Let’s break this code down. </span><span class="koboSpan" id="kobo.695.2">It starts off by defining a SwiftUI view called </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1">SliderView</span></strong><span class="koboSpan" id="kobo.697.1"> that uses a </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1">VStack</span></strong><span class="koboSpan" id="kobo.699.1"> to lay out three sliders for adjusting the values of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1">redGuess</span></strong><span class="koboSpan" id="kobo.701.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.702.1">greenGuess</span></strong><span class="koboSpan" id="kobo.703.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.704.1">blueGuess</span></strong><span class="koboSpan" id="kobo.705.1"> properties. </span><span class="koboSpan" id="kobo.705.2">The struct has a </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1">VStack</span></strong><span class="koboSpan" id="kobo.707.1"> used to organize three sliders vertically. </span></p>
<p><span class="koboSpan" id="kobo.708.1">Those three sliders</span><a id="_idIndexMarker810"/><span class="koboSpan" id="kobo.709.1"> are added by calls to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.710.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.711.1"> view. </span><span class="koboSpan" id="kobo.711.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.712.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.713.1"> view uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1">background</span></strong><span class="koboSpan" id="kobo.715.1"> modifier and a capsule shape in order to outline the slider with a </span><span class="No-Break"><span class="koboSpan" id="kobo.716.1">red color.</span></span></p>
<p><span class="koboSpan" id="kobo.717.1">Next up is a </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1">switch</span></strong><span class="koboSpan" id="kobo.719.1"> statement – since we are using one for the first time, let me explain what it is and the difference between using a </span><strong class="source-inline"><span class="koboSpan" id="kobo.720.1">switch</span></strong><span class="koboSpan" id="kobo.721.1"> statement and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.722.1">if </span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.723.1">else</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.724.1"> statement.</span></span></p>
<p><span class="koboSpan" id="kobo.725.1">So, an </span><strong class="source-inline"><span class="koboSpan" id="kobo.726.1">if else</span></strong><span class="koboSpan" id="kobo.727.1"> statement is used to evaluate a Boolean expression and execute a block of code if the expression is </span><strong class="source-inline"><span class="koboSpan" id="kobo.728.1">true</span></strong><span class="koboSpan" id="kobo.729.1">, and another block of code if the expression is </span><strong class="source-inline"><span class="koboSpan" id="kobo.730.1">false</span></strong><span class="koboSpan" id="kobo.731.1">. </span><span class="koboSpan" id="kobo.731.2">It can be used for any type of condition or comparison. </span><span class="koboSpan" id="kobo.731.3">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.732.1">switch</span></strong><span class="koboSpan" id="kobo.733.1"> statement, on the other hand, is used to match a value or expression against multiple possible cases and execute a block of code for the matching case. </span></p>
<p><span class="koboSpan" id="kobo.734.1">A </span><strong class="source-inline"><span class="koboSpan" id="kobo.735.1">switch</span></strong><span class="koboSpan" id="kobo.736.1"> statement is typically used for matching against multiple possible values for a single variable or expression and is often used for situations where multiple conditions need to be checked in a more concise and readable way. </span><span class="koboSpan" id="kobo.736.2">For example, when you have multiple conditions with multiple </span><strong class="source-inline"><span class="koboSpan" id="kobo.737.1">if else</span></strong><span class="koboSpan" id="kobo.738.1"> statements, you can use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.739.1">switch</span></strong><span class="koboSpan" id="kobo.740.1"> statement over </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1">if else</span></strong><span class="koboSpan" id="kobo.742.1">. </span><span class="koboSpan" id="kobo.742.2">It makes the code more readable and easier </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">to maintain.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.744.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.745.1">In general, </span><strong class="source-inline"><span class="koboSpan" id="kobo.746.1">if else</span></strong><span class="koboSpan" id="kobo.747.1"> statements are good for complex conditions, while </span><strong class="source-inline"><span class="koboSpan" id="kobo.748.1">switch</span></strong><span class="koboSpan" id="kobo.749.1"> statements are good for simple conditions. </span><span class="koboSpan" id="kobo.749.2">In Swift, you can use either, depending on what you are trying </span><span class="No-Break"><span class="koboSpan" id="kobo.750.1">to accomplish.</span></span></p>
<p><span class="koboSpan" id="kobo.751.1">So, going back to our code, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.752.1">switch</span></strong><span class="koboSpan" id="kobo.753.1"> statement checks the </span><strong class="source-inline"><span class="koboSpan" id="kobo.754.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.755.1"> value to see whether it is equal to </span><strong class="source-inline"><span class="koboSpan" id="kobo.756.1">1</span></strong><span class="koboSpan" id="kobo.757.1">; if so, it means the user selected the </span><strong class="bold"><span class="koboSpan" id="kobo.758.1">Hard</span></strong><span class="koboSpan" id="kobo.759.1"> level, so we need to add a green slider to the UI. </span><span class="koboSpan" id="kobo.759.2">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.760.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.761.1"> value is equal to </span><strong class="source-inline"><span class="koboSpan" id="kobo.762.1">2</span></strong><span class="koboSpan" id="kobo.763.1">, it will create both the green and blue sliders, because the user has selected the </span><strong class="bold"><span class="koboSpan" id="kobo.764.1">Extreme</span></strong><span class="koboSpan" id="kobo.765.1"> option, so all sliders will be visible. </span><span class="koboSpan" id="kobo.765.2">Lastly, if </span><strong class="source-inline"><span class="koboSpan" id="kobo.766.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.767.1"> is not </span><strong class="source-inline"><span class="koboSpan" id="kobo.768.1">1</span></strong><span class="koboSpan" id="kobo.769.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.770.1">2</span></strong><span class="koboSpan" id="kobo.771.1">, it will return an </span><span class="No-Break"><span class="koboSpan" id="kobo.772.1">empty view.</span></span></p>
<p><span class="koboSpan" id="kobo.773.1">Next, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.774.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.775.1"> struct is used to create the sliders, and it takes two arguments, </span><strong class="source-inline"><span class="koboSpan" id="kobo.776.1">value</span></strong><span class="koboSpan" id="kobo.777.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.778.1">color</span></strong><span class="koboSpan" id="kobo.779.1">. </span><span class="koboSpan" id="kobo.779.2">It displays the minimum and maximum values of the slider and it uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.780.1">color</span></strong><span class="koboSpan" id="kobo.781.1"> argument to change the color of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.782.1">"0"</span></strong><span class="koboSpan" id="kobo.783.1"> text view and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.784.1">"255"</span></strong><span class="koboSpan" id="kobo.785.1"> text view. </span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.786.1">SliderView</span></strong><span class="koboSpan" id="kobo.787.1"> uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.788.1">CreateSlider</span></strong><span class="koboSpan" id="kobo.789.1"> struct to create the sliders</span><a id="_idIndexMarker811"/><span class="koboSpan" id="kobo.790.1"> for RGB colors. </span><span class="koboSpan" id="kobo.790.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.791.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.792.1"> binding is used to decide which sliders to show, based on the </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1">user’s selection.</span></span></p>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.794.1">SliderView</span></strong><span class="koboSpan" id="kobo.795.1"> is now complete, so let’s use it inside </span><strong class="source-inline"><span class="koboSpan" id="kobo.796.1">ContentView</span></strong><span class="koboSpan" id="kobo.797.1">. </span><span class="koboSpan" id="kobo.797.2">Add the following code just after the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.798.1">Picker</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.799.1"> code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.800.1">
 //MARK: - SLIDER
    Spacer()
    SliderView(redGuess: $redGuess, greenGuess: 
      $greenGuess, blueGuess: $blueGuess, 
      selectedPickerIndex: $selectedPickerIndex)
        .scaleEffect(1)
        .animation(.interactiveSpring(response: 0.4, 
          dampingFraction: 0.5, blendDuration: 0.5), value: 
          selectedPickerIndex)
     Spacer()</span></pre>
<p><span class="koboSpan" id="kobo.801.1">This code calls the </span><strong class="source-inline"><span class="koboSpan" id="kobo.802.1">SliderView</span></strong><span class="koboSpan" id="kobo.803.1"> struct and fills in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.804.1">Binding</span></strong><span class="koboSpan" id="kobo.805.1"> variables, then adds a spring animation to the sliders as they appear and disappear in the UI. </span><span class="koboSpan" id="kobo.805.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.806.1">interactiveSpring</span></strong><span class="koboSpan" id="kobo.807.1"> animation is a type of animation that simulates the behavior of a spring, and takes </span><span class="No-Break"><span class="koboSpan" id="kobo.808.1">three parameters:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.809.1">response</span></strong><span class="koboSpan" id="kobo.810.1">: This value controls the stiffness of the spring. </span><span class="koboSpan" id="kobo.810.2">A lower value will result in a softer spring, and a higher value will result in a stiffer spring. </span><span class="koboSpan" id="kobo.810.3">A value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.811.1">0.4</span></strong><span class="koboSpan" id="kobo.812.1"> will provide a </span><span class="No-Break"><span class="koboSpan" id="kobo.813.1">moderate stiffness.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.814.1">dampingFraction</span></strong><span class="koboSpan" id="kobo.815.1">: This value controls the damping of the spring, which is a measure of how quickly the spring’s oscillations will die out. </span><span class="koboSpan" id="kobo.815.2">A lower value will result in a spring with less damping, and a higher value will result in a spring with more damping. </span><span class="koboSpan" id="kobo.815.3">A value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.816.1">0.5</span></strong><span class="koboSpan" id="kobo.817.1"> means that the spring’s oscillations will die out </span><span class="No-Break"><span class="koboSpan" id="kobo.818.1">relatively quickly.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.819.1">blendDuration</span></strong><span class="koboSpan" id="kobo.820.1">: This value controls the duration of the animation’s blending. </span><span class="koboSpan" id="kobo.820.2">A lower value will result in a shorter blend duration, and a higher value will result in a longer blend duration. </span><span class="koboSpan" id="kobo.820.3">A value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.821.1">0.5</span></strong><span class="koboSpan" id="kobo.822.1"> seconds is a moderate </span><span class="No-Break"><span class="koboSpan" id="kobo.823.1">blend duration.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.824.1">As well as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.825.1">interactiveSpring</span></strong><span class="koboSpan" id="kobo.826.1"> animation, we’re using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.827.1">scaleEffect</span></strong><span class="koboSpan" id="kobo.828.1"> modifier and passing</span><a id="_idIndexMarker812"/><span class="koboSpan" id="kobo.829.1"> in a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1">1</span></strong><span class="koboSpan" id="kobo.831.1">. </span><span class="koboSpan" id="kobo.831.2">What this does is help smooth out the animation as each slider appears and disappears. </span><span class="koboSpan" id="kobo.831.3">Go ahead and try it out. </span><span class="koboSpan" id="kobo.831.4">If you click on the picker control to choose a difficulty level, each slider will appear and disappear on the screen with a springy animation </span><span class="No-Break"><span class="koboSpan" id="kobo.832.1">to it:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer196">
<span class="koboSpan" id="kobo.833.1"><img alt="Figure 14.7: The sliders " src="image/B18674_14_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.834.1">Figure 14.7: The sliders</span></p>
<p><span class="koboSpan" id="kobo.835.1">As you move the sliders, the guess circle color will update smoothly, and the RGB values will change in the RGB</span><a id="_idIndexMarker813"/> <span class="No-Break"><span class="koboSpan" id="kobo.836.1">text string.</span></span></p>
<p><span class="koboSpan" id="kobo.837.1">The last UI component to add is a button that will let the user check their score as they play. </span></p>
<h1 id="_idParaDest-202"><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.838.1">Keeping track of the user’s score with a button </span></h1>
<p><span class="koboSpan" id="kobo.839.1">To make this a game, the user</span><a id="_idIndexMarker814"/><span class="koboSpan" id="kobo.840.1"> needs a way to check their progress</span><a id="_idIndexMarker815"/><span class="koboSpan" id="kobo.841.1"> and see a number that reflects how close they are to a perfect </span><span class="No-Break"><span class="koboSpan" id="kobo.842.1">score/color match.</span></span></p>
<p><span class="koboSpan" id="kobo.843.1">Let’s add a button right after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1">SliderView</span></strong><span class="koboSpan" id="kobo.845.1"> struct’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.846.1">Spacer()</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.847.1">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.848.1">ContentView</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.849.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.850.1">
 //MARK: - BUTTON
    Button(action: {
         
    }) {
        Text("Check Score")
            .foregroundColor(.black)
            .padding(EdgeInsets(top: 12, leading: 20, 
              bottom: 12, trailing: 20))
            .background(Color.yellow)
            .cornerRadius(20)
            .shadow(color: Color.black, radius: 2, y: 4)
    }</span></pre>
<p><span class="koboSpan" id="kobo.851.1">This code creates a </span><strong class="source-inline"><span class="koboSpan" id="kobo.852.1">Button</span></strong><span class="koboSpan" id="kobo.853.1"> view, which we have named </span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1">Check Score</span></strong><span class="koboSpan" id="kobo.855.1">. </span><span class="koboSpan" id="kobo.855.2">The button gets styled with a black foreground, yellow background, padding, a corner radius, and finally, a black shadow to make the button stand out </span><span class="No-Break"><span class="koboSpan" id="kobo.856.1">a bit.</span></span></p>
<p><span class="koboSpan" id="kobo.857.1">The body of the button is currently empty right now, but what we want to do is to put some code in there that will trigger an alert and show the user their current score, so that they know how close they are to the </span><span class="No-Break"><span class="koboSpan" id="kobo.858.1">target value.</span></span></p>
<p><span class="koboSpan" id="kobo.859.1">To do this, we need to create a function that calculates a score. </span><span class="koboSpan" id="kobo.859.2">So, at the bottom of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.860.1">ContentView</span></strong><span class="koboSpan" id="kobo.861.1"> struct, add </span><span class="No-Break"><span class="koboSpan" id="kobo.862.1">this code:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.863.1">
func calculateScore() -&gt; Int {
        let redDiff = redGuess - redTarget
        let greenDiff = greenGuess - greenTarget
        let blueDiff = blueGuess - blueTarget
        let easyDifference = redDiff * redDiff
        let hardDifference = easyDifference + greenDiff * 
          greenDiff
        let extremeDifference = hardDifference + blueDiff * 
          blueDiff
        let calculatedDifference: Double
        switch selectedPickerIndex {
            case 0:
                calculatedDifference = sqrt(easyDifference)
            case 1:
                calculatedDifference = sqrt(hardDifference)
            case 2:
                calculatedDifference = 
                  sqrt(extremeDifference)
            default:
                calculatedDifference = 0.0
        }
        return Int((1.0 - calculatedDifference) * 100 + 
          0.5)
    } </span></pre>
<p><span class="koboSpan" id="kobo.864.1">This code defines</span><a id="_idIndexMarker816"/><span class="koboSpan" id="kobo.865.1"> a function named </span><strong class="source-inline"><span class="koboSpan" id="kobo.866.1">calculateScore</span></strong><span class="koboSpan" id="kobo.867.1"> that returns</span><a id="_idIndexMarker817"/><span class="koboSpan" id="kobo.868.1"> an </span><strong class="source-inline"><span class="koboSpan" id="kobo.869.1">Int</span></strong><span class="koboSpan" id="kobo.870.1"> value. </span><span class="koboSpan" id="kobo.870.2">This function is used to calculate a score based on the difference between the </span><strong class="source-inline"><span class="koboSpan" id="kobo.871.1">guess</span></strong><span class="koboSpan" id="kobo.872.1"> values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.873.1">red</span></strong><span class="koboSpan" id="kobo.874.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.875.1">green</span></strong><span class="koboSpan" id="kobo.876.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.877.1">blue</span></strong><span class="koboSpan" id="kobo.878.1">, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1">target</span></strong><span class="koboSpan" id="kobo.880.1"> values of </span><strong class="source-inline"><span class="koboSpan" id="kobo.881.1">red</span></strong><span class="koboSpan" id="kobo.882.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.883.1">green</span></strong><span class="koboSpan" id="kobo.884.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.885.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.886.1">blue</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.887.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.888.1">Here’s how it works. </span><span class="koboSpan" id="kobo.888.2">The function first calculates the difference between the </span><strong class="source-inline"><span class="koboSpan" id="kobo.889.1">guess</span></strong><span class="koboSpan" id="kobo.890.1"> values and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.891.1">target</span></strong><span class="koboSpan" id="kobo.892.1"> values for </span><strong class="source-inline"><span class="koboSpan" id="kobo.893.1">red</span></strong><span class="koboSpan" id="kobo.894.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.895.1">green</span></strong><span class="koboSpan" id="kobo.896.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.897.1">blue</span></strong><span class="koboSpan" id="kobo.898.1">. </span><span class="koboSpan" id="kobo.898.2">Next, it calculates </span><strong class="source-inline"><span class="koboSpan" id="kobo.899.1">easyDifference</span></strong><span class="koboSpan" id="kobo.900.1"> by getting the square root of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.901.1">redDiff</span></strong><span class="koboSpan" id="kobo.902.1"> variable. </span><span class="koboSpan" id="kobo.902.2">Next, it calculates </span><strong class="source-inline"><span class="koboSpan" id="kobo.903.1">hardDifference</span></strong><span class="koboSpan" id="kobo.904.1"> by adding the square of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.905.1">greenDiff</span></strong><span class="koboSpan" id="kobo.906.1"> variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.907.1">easyDifference</span></strong><span class="koboSpan" id="kobo.908.1">. </span><span class="koboSpan" id="kobo.908.2">Then, it calculates </span><strong class="source-inline"><span class="koboSpan" id="kobo.909.1">extremeDifference</span></strong><span class="koboSpan" id="kobo.910.1"> by adding the square root of </span><strong class="source-inline"><span class="koboSpan" id="kobo.911.1">blueDiff</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.912.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.913.1">hardDifference</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.914.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.915.1">After that, it uses a </span><strong class="source-inline"><span class="koboSpan" id="kobo.916.1">switch</span></strong><span class="koboSpan" id="kobo.917.1"> statement to determine which level of difficulty is currently selected, and assigns the </span><strong class="source-inline"><span class="koboSpan" id="kobo.918.1">calculatedDifference</span></strong><span class="koboSpan" id="kobo.919.1"> variable a value based </span><span class="No-Break"><span class="koboSpan" id="kobo.920.1">on that:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.921.1">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.922.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.923.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.924.1">0</span></strong><span class="koboSpan" id="kobo.925.1">, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.926.1">calculatedDifference</span></strong><span class="koboSpan" id="kobo.927.1"> is the square root </span><span class="No-Break"><span class="koboSpan" id="kobo.928.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.929.1">easyDifference</span></strong></span></li>
<li><span class="koboSpan" id="kobo.930.1">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.931.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.932.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.933.1">1</span></strong><span class="koboSpan" id="kobo.934.1">, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.935.1">calculatedDifference</span></strong><span class="koboSpan" id="kobo.936.1"> is the square root </span><span class="No-Break"><span class="koboSpan" id="kobo.937.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.938.1">hardDifference</span></strong></span></li>
<li><span class="koboSpan" id="kobo.939.1">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.940.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.941.1"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.942.1">2</span></strong><span class="koboSpan" id="kobo.943.1">, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.944.1">calculatedDifference</span></strong><span class="koboSpan" id="kobo.945.1"> is the square root </span><span class="No-Break"><span class="koboSpan" id="kobo.946.1">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.947.1">extremeDifference</span></strong></span></li>
<li><span class="koboSpan" id="kobo.948.1">If </span><strong class="source-inline"><span class="koboSpan" id="kobo.949.1">selectedPickerIndex</span></strong><span class="koboSpan" id="kobo.950.1"> is any other value, then </span><strong class="source-inline"><span class="koboSpan" id="kobo.951.1">calculatedDifference</span></strong><span class="koboSpan" id="kobo.952.1"> is set </span><span class="No-Break"><span class="koboSpan" id="kobo.953.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.954.1">0.0</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.955.1">Finally, it returns an </span><strong class="source-inline"><span class="koboSpan" id="kobo.956.1">integer</span></strong><span class="koboSpan" id="kobo.957.1"> value that is calculated by taking </span><strong class="source-inline"><span class="koboSpan" id="kobo.958.1">(1.0 - calculatedDifference) * 100 + 0.5</span></strong><span class="koboSpan" id="kobo.959.1">, which is the </span><span class="No-Break"><span class="koboSpan" id="kobo.960.1">final score.</span></span></p>
<p><span class="koboSpan" id="kobo.961.1">This function is used to calculate a score based on how close the </span><strong class="source-inline"><span class="koboSpan" id="kobo.962.1">guess</span></strong><span class="koboSpan" id="kobo.963.1"> values are to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.964.1">target</span></strong><span class="koboSpan" id="kobo.965.1"> values. </span><span class="koboSpan" id="kobo.965.2">The smaller</span><a id="_idIndexMarker818"/><span class="koboSpan" id="kobo.966.1"> the difference between</span><a id="_idIndexMarker819"/><span class="koboSpan" id="kobo.967.1"> the values, the higher the score will be. </span><span class="koboSpan" id="kobo.967.2">If the </span><strong class="source-inline"><span class="koboSpan" id="kobo.968.1">guess</span></strong><span class="koboSpan" id="kobo.969.1"> value is equal to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.970.1">target</span></strong><span class="koboSpan" id="kobo.971.1"> value, the user gets a perfect score </span><span class="No-Break"><span class="koboSpan" id="kobo.972.1">of 100.</span></span></p>
<p><span class="koboSpan" id="kobo.973.1">Now, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.974.1">calculateScore</span></strong><span class="koboSpan" id="kobo.975.1"> function is complete; let’s use it to show the user their score in an </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.976.1">Alert</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.977.1"> view.</span></span></p>
<h1 id="_idParaDest-203"><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.978.1">Showing the user’s score in an Alert view</span></h1>
<p><span class="koboSpan" id="kobo.979.1">To create an </span><strong class="source-inline"><span class="koboSpan" id="kobo.980.1">Alert</span></strong><span class="koboSpan" id="kobo.981.1"> view, we</span><a id="_idIndexMarker820"/><span class="koboSpan" id="kobo.982.1"> first need a state variable to keep track</span><a id="_idIndexMarker821"/><span class="koboSpan" id="kobo.983.1"> of the alert and trigger it when the </span><strong class="source-inline"><span class="koboSpan" id="kobo.984.1">state</span></strong><span class="koboSpan" id="kobo.985.1"> value changes. </span><span class="koboSpan" id="kobo.985.2">At the top of the file, underneath the other variables we created, add the following </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.986.1">State</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.987.1"> variable:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.988.1">
//user feedback variable
    @State var showAlert = false</span></pre>
<p><span class="koboSpan" id="kobo.989.1">Then, we need to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.990.1">Alert</span></strong><span class="koboSpan" id="kobo.991.1"> modifier after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.992.1">Button</span></strong><span class="koboSpan" id="kobo.993.1"> code’s </span><span class="No-Break"><span class="koboSpan" id="kobo.994.1">closing brace:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.995.1">
.alert(isPresented: $showAlert) { () -&gt; Alert in
        Alert(title: Text("Your Score"), message:           Text("\(calculateScore())"),
              primaryButton: Alert.Button.default(Text("New
                Game?"), action: {
            // Start a new game?
</span><span class="koboSpan" id="kobo.995.2">        }),
              secondaryButton: 
                Alert.Button.destructive(Text("Continue 
                  Playing"), action: {
            // Continue with the present game
           
        }))
    }</span></pre>
<p><span class="koboSpan" id="kobo.996.1">The code creates a title, a message, and two buttons – a primary button and a secondary button. </span></p>
<p><span class="koboSpan" id="kobo.997.1">The title will be the message to the user, and the message will be the user’s score. </span><span class="koboSpan" id="kobo.997.2">We’re doing that by calling the </span><strong class="source-inline"><span class="koboSpan" id="kobo.998.1">calculatedScore</span></strong><span class="koboSpan" id="kobo.999.1"> function inside a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1000.1">Text</span></strong><span class="koboSpan" id="kobo.1001.1"> view using string interpolation; remember, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1002.1">calculateScore</span></strong><span class="koboSpan" id="kobo.1003.1"> function returns an integer, and that value will be shown to the user as their current score. </span></p>
<p><span class="koboSpan" id="kobo.1004.1">Then, the primary button</span><a id="_idIndexMarker822"/><span class="koboSpan" id="kobo.1005.1"> will prompt</span><a id="_idIndexMarker823"/><span class="koboSpan" id="kobo.1006.1"> the user to start a new game, while the secondary button will prompt the user to </span><span class="No-Break"><span class="koboSpan" id="kobo.1007.1">continue playing.</span></span></p>
<p><span class="koboSpan" id="kobo.1008.1">To trigger the alert, we need to toggle the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1009.1">showAlert</span></strong><span class="koboSpan" id="kobo.1010.1"> variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1011.1">true</span></strong><span class="koboSpan" id="kobo.1012.1"> inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1013.1">Button</span></strong><span class="koboSpan" id="kobo.1014.1"> body, </span><span class="No-Break"><span class="koboSpan" id="kobo.1015.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1016.1">
    Button(action: {
                </span><strong class="bold"><span class="koboSpan" id="kobo.1017.1">showAlert = true</span></strong><span class="koboSpan" id="kobo.1018.1">
            }) {</span></pre>
<p><span class="koboSpan" id="kobo.1019.1">Now, we can try the game out. </span><span class="koboSpan" id="kobo.1019.2">Slide the sliders and try to get as close to the target circle color as you can, then press the </span><strong class="bold"><span class="koboSpan" id="kobo.1020.1">Check Score</span></strong><span class="koboSpan" id="kobo.1021.1"> button to see </span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1">your score:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer197">
<span class="koboSpan" id="kobo.1023.1"><img alt=" Figure 14.8: Alert view showing the user’s score " src="image/B18674_14_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1024.1"> Figure 14.8: Alert view showing the user’s score</span></p>
<p><span class="koboSpan" id="kobo.1025.1">From this screen, if the user</span><a id="_idIndexMarker824"/><span class="koboSpan" id="kobo.1026.1"> presses </span><strong class="bold"><span class="koboSpan" id="kobo.1027.1">Continue Playing?</span></strong><span class="koboSpan" id="kobo.1028.1">, the game will continue</span><a id="_idIndexMarker825"/><span class="koboSpan" id="kobo.1029.1"> from where it left off. </span><span class="koboSpan" id="kobo.1029.2">However, if they press </span><strong class="bold"><span class="koboSpan" id="kobo.1030.1">New Game?</span></strong><span class="koboSpan" id="kobo.1031.1">, nothing will happen – that’s because we haven’t added any logic to start a new game yet. </span><span class="koboSpan" id="kobo.1031.2">Let’s do that next. </span></p>
<h1 id="_idParaDest-204"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.1032.1">Resetting the game</span></h1>
<p><span class="koboSpan" id="kobo.1033.1">We want to give the user the opportunity</span><a id="_idIndexMarker826"/><span class="koboSpan" id="kobo.1034.1"> to start a new game, and we can do that by adding a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1035.1">reset</span></strong><span class="koboSpan" id="kobo.1036.1"> function to the file. </span><span class="koboSpan" id="kobo.1036.2">This function will reset the sliders to </span><strong class="bold"><span class="koboSpan" id="kobo.1037.1">0</span></strong><span class="koboSpan" id="kobo.1038.1"> and generate another random target color for the middle </span><span class="No-Break"><span class="koboSpan" id="kobo.1039.1">target circle.</span></span></p>
<p><span class="koboSpan" id="kobo.1040.1">Add the following function underneath the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1041.1">calculateScore</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1042.1"> function:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1043.1">
 //MARK: - RESET THE GAME
    func reset() {
        redTarget = Double.random(in: 0..&lt;1)
        greenTarget = Double.random(in: 0..&lt;1)
        blueTarget = Double.random(in: 0..&lt;1)
        redGuess = 0.0
        greenGuess = 0.0
        blueGuess = 0.0
    }</span></pre>
<p><span class="koboSpan" id="kobo.1044.1">This function creates new random colors and stores them in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1045.1">Target</span></strong><span class="koboSpan" id="kobo.1046.1"> variables. </span><span class="koboSpan" id="kobo.1046.2">It also resets the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1047.1">Guess</span></strong><span class="koboSpan" id="kobo.1048.1"> variables back to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1049.1">0</span></strong><span class="koboSpan" id="kobo.1050.1">, which will move all the sliders back to their starting points on </span><span class="No-Break"><span class="koboSpan" id="kobo.1051.1">the left.</span></span></p>
<p><span class="koboSpan" id="kobo.1052.1">Let’s call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1053.1">reset</span></strong><span class="koboSpan" id="kobo.1054.1"> function inside the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1055.1">Alert</span></strong><span class="koboSpan" id="kobo.1056.1"> modifier’s secondary button, </span><span class="No-Break"><span class="koboSpan" id="kobo.1057.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1058.1">
.alert(isPresented: $showAlert) { () -&gt; Alert in
  Alert(title: Text("Your Score"), message:
    Text("\(calculateScore())"),
        primaryButton: Alert.Button.default(Text("Continue
          Playing?"), action: {
                }),
        secondaryButton: Alert.Button.destructive(Text("New 
          Game?"), action: {
      // Start a new game?
</span><strong class="bold"><span class="koboSpan" id="kobo.1059.1">      reset()</span></strong><span class="koboSpan" id="kobo.1060.1">
  }))</span></pre>
<p><span class="koboSpan" id="kobo.1061.1">Now, when we press the secondary</span><a id="_idIndexMarker827"/><span class="koboSpan" id="kobo.1062.1"> button, </span><strong class="bold"><span class="koboSpan" id="kobo.1063.1">New Game?</span></strong><span class="koboSpan" id="kobo.1064.1">, a new game starts with a new target color, and the sliders are set back to their </span><span class="No-Break"><span class="koboSpan" id="kobo.1065.1">starting position:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer198">
<span class="koboSpan" id="kobo.1066.1"><img alt="Figure 14.9: Starting a new game " src="image/B18674_14_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1067.1">Figure 14.9: Starting a new game</span></p>
<p><span class="koboSpan" id="kobo.1068.1">The sliders are set back to zero, and a new</span><a id="_idIndexMarker828"/><span class="koboSpan" id="kobo.1069.1"> random target color is generated </span><span class="No-Break"><span class="koboSpan" id="kobo.1070.1">and shown.</span></span></p>
<p><span class="koboSpan" id="kobo.1071.1">Let’s finish this project by adding two more things – a background, and a confetti animation that will appear when the user gets a perfect score </span><span class="No-Break"><span class="koboSpan" id="kobo.1072.1">of 100.</span></span></p>
<h1 id="_idParaDest-205"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.1073.1">Adding a background</span></h1>
<p><span class="koboSpan" id="kobo.1074.1">First, the background. </span><span class="koboSpan" id="kobo.1074.2">You can</span><a id="_idIndexMarker829"/><span class="koboSpan" id="kobo.1075.1"> find the resource for this project in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.1076.1">Chapter 14</span></strong></span><span class="koboSpan" id="kobo.1077.1"> folder on GitHub (it’s the only asset in the folder); just drag and drop the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1078.1">background</span></strong><span class="koboSpan" id="kobo.1079.1"> image file into the Asset Catalog. </span><span class="koboSpan" id="kobo.1079.2">After you’ve done that, add the following code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1080.1">ContentView</span></strong><span class="koboSpan" id="kobo.1081.1">, after the closing brace of the main </span><strong class="source-inline"><span class="koboSpan" id="kobo.1082.1">VStack</span></strong><span class="koboSpan" id="kobo.1083.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.1084.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1085.1">
.background(Image("background").resizable().edgesIgnoringSa
  feArea(.all))</span></pre>
<p><span class="koboSpan" id="kobo.1086.1">Here, we are using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1087.1">background</span></strong><span class="koboSpan" id="kobo.1088.1"> modifier, passing the name of the image, resizing it, and setting </span><strong class="source-inline"><span class="koboSpan" id="kobo.1089.1">edgesIgnoringSafeArea</span></strong><span class="koboSpan" id="kobo.1090.1"> to stretch it out throughout the whole screen. </span><span class="koboSpan" id="kobo.1090.2">It’s a subtle background, but it has a nice pattern to it that I think works as a backdrop for the </span><span class="No-Break"><span class="koboSpan" id="kobo.1091.1">colorful UI:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer199">
<span class="koboSpan" id="kobo.1092.1"><img alt="Figure 14.10: Background added " src="image/B18674_14_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1093.1">Figure 14.10: Background added</span></p>
<p><span class="koboSpan" id="kobo.1094.1">Now, let’s look at Swift packages, and how to make </span><span class="No-Break"><span class="koboSpan" id="kobo.1095.1">some confetti.</span></span></p>
<h1 id="_idParaDest-206"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.1096.1">Adding confetti using Swift packages</span></h1>
<p><span class="koboSpan" id="kobo.1097.1">A Swift package</span><a id="_idIndexMarker830"/><span class="koboSpan" id="kobo.1098.1"> is pre-built software</span><a id="_idIndexMarker831"/><span class="koboSpan" id="kobo.1099.1"> that we can use in any of our projects, in which all the coding work has been done for us; all we have to do is configure it in </span><span class="No-Break"><span class="koboSpan" id="kobo.1100.1">our project.</span></span></p>
<p><span class="koboSpan" id="kobo.1101.1">To add a Swift package, in Xcode, go to the </span><strong class="bold"><span class="koboSpan" id="kobo.1102.1">File</span></strong><span class="koboSpan" id="kobo.1103.1"> menu and select </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.1104.1">Add Packages…</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.1105.1">:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer200">
<span class="koboSpan" id="kobo.1106.1"><img alt="Figure 14.11: Add Packages… " src="image/B18674_14_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1107.1">Figure 14.11: Add Packages…</span></p>
<p><span class="koboSpan" id="kobo.1108.1">In</span><a id="_idIndexMarker832"/><span class="koboSpan" id="kobo.1109.1"> the </span><strong class="bold"><span class="koboSpan" id="kobo.1110.1">All Sources</span></strong><span class="koboSpan" id="kobo.1111.1"> window, enter </span><a href="https://github.com/simibac/ConfettiSwiftUI.git"><span class="koboSpan" id="kobo.1112.1">https://github.com/simibac/ConfettiSwiftUI.git</span></a><span class="koboSpan" id="kobo.1113.1"> in the </span><span class="No-Break"><span class="koboSpan" id="kobo.1114.1">search</span></span><span class="No-Break"><a id="_idIndexMarker833"/></span><span class="No-Break"><span class="koboSpan" id="kobo.1115.1"> box:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer201">
<span class="koboSpan" id="kobo.1116.1"><img alt="Figure 14.12: Adding the URL " src="image/B18674_14_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1117.1">Figure 14.12: Adding the URL</span></p>
<p><span class="koboSpan" id="kobo.1118.1">When the </span><strong class="bold"><span class="koboSpan" id="kobo.1119.1">Add Package</span></strong><span class="koboSpan" id="kobo.1120.1"> button is clicked, Xcode</span><a id="_idIndexMarker834"/><span class="koboSpan" id="kobo.1121.1"> will add the Confetti package</span><a id="_idIndexMarker835"/><span class="koboSpan" id="kobo.1122.1"> to the project. </span><span class="koboSpan" id="kobo.1122.2">The Confetti package contains all the code needed to create all kinds of confetti, dispersed in </span><span class="No-Break"><span class="koboSpan" id="kobo.1123.1">different ways.</span></span></p>
<p><span class="koboSpan" id="kobo.1124.1">Now, we need to import the Confetti framework into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1125.1">ContentView</span></strong><span class="koboSpan" id="kobo.1126.1"> file at </span><span class="No-Break"><span class="koboSpan" id="kobo.1127.1">the top:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1128.1">
import ConfettiSwiftUI</span></pre>
<p><span class="koboSpan" id="kobo.1129.1">Next, we need a variable that can trigger the confetti (placed after the other </span><span class="No-Break"><span class="koboSpan" id="kobo.1130.1">project variables):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1131.1">
//confetti variable
    @State var counter = 0</span></pre>
<p><span class="koboSpan" id="kobo.1132.1">Now, we can call the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1133.1">confettiCannon</span></strong><span class="koboSpan" id="kobo.1134.1"> initializer in </span><strong class="source-inline"><span class="koboSpan" id="kobo.1135.1">ContentView</span></strong><span class="koboSpan" id="kobo.1136.1"> just after the target and guess rectangle code, </span><span class="No-Break"><span class="koboSpan" id="kobo.1137.1">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1138.1">
//MARK: - CONFETTI CANNON
    .confettiCannon(counter: $counter, num: 100, colors: 
      [.pink, .red, .blue, .purple, .orange], rainHeight: 
      1800.0, radius: 500.0)</span></pre>
<p><span class="koboSpan" id="kobo.1139.1">This code calls</span><a id="_idIndexMarker836"/><span class="koboSpan" id="kobo.1140.1"> the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1141.1">confettiCannon</span></strong><span class="koboSpan" id="kobo.1142.1"> initializer, using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1143.1">counter</span></strong><span class="koboSpan" id="kobo.1144.1"> variable to trigger the animation. </span><span class="koboSpan" id="kobo.1144.2">The number of pieces</span><a id="_idIndexMarker837"/><span class="koboSpan" id="kobo.1145.1"> of confetti being created will be 100, and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1146.1">colors</span></strong><span class="koboSpan" id="kobo.1147.1"> array lets you add the colors that you want the confetti to be. </span><strong class="source-inline"><span class="koboSpan" id="kobo.1148.1">rainHeight</span></strong><span class="koboSpan" id="kobo.1149.1"> will set how high the confetti goes upward, and the radius will set how wide the </span><span class="No-Break"><span class="koboSpan" id="kobo.1150.1">confetti spreads.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.1151.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.1152.1">I filled out the variables for our example; however, you can play around with these values and configure them the way you like. </span><span class="koboSpan" id="kobo.1152.2">There are many parameters that the creator, Simon Bachmann, has built into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1153.1">confettiCannon</span></strong><span class="koboSpan" id="kobo.1154.1"> initializer, so it’s very customizable. </span><span class="koboSpan" id="kobo.1154.2">For a full list, follow this </span><span class="No-Break"><span class="koboSpan" id="kobo.1155.1">link: </span></span><a href="https://github.com/simibac/ConfettiSwiftUI#parameters"><span class="No-Break"><span class="koboSpan" id="kobo.1156.1">https://github.com/simibac/ConfettiSwiftUI#parameters</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.1157.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.1158.1">Finally, we want to trigger the confetti in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1159.1">Button</span></strong><span class="koboSpan" id="kobo.1160.1"> body only when the user scores a perfect 100. </span><span class="koboSpan" id="kobo.1160.2">So, add the following code into the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1161.1">Button</span></strong><span class="koboSpan" id="kobo.1162.1"> body, right after the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1163.1">showAlert</span></strong><span class="koboSpan" id="kobo.1164.1"> variable is set to </span><strong class="source-inline"><span class="koboSpan" id="kobo.1165.1">true</span></strong><span class="koboSpan" id="kobo.1166.1">, and then we can test out </span><span class="No-Break"><span class="koboSpan" id="kobo.1167.1">the animation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.1168.1">
 Button(action: {
        showAlert = true
        //if a score of 100 is achieved, make the confetti 
          fall by adding 1 to the counter variable
        </span><strong class="bold"><span class="koboSpan" id="kobo.1169.1">if calculateScore() == 100 {</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1170.1">               counter += 1</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1171.1">                     }</span></strong></pre>
<p><span class="koboSpan" id="kobo.1172.1">This is just a simple </span><strong class="source-inline"><span class="koboSpan" id="kobo.1173.1">if</span></strong><span class="koboSpan" id="kobo.1174.1"> statement that checks whether the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1175.1">calculateScore</span></strong><span class="koboSpan" id="kobo.1176.1"> function returns </span><strong class="source-inline"><span class="koboSpan" id="kobo.1177.1">100</span></strong><span class="koboSpan" id="kobo.1178.1">. </span><span class="koboSpan" id="kobo.1178.2">If so, we add </span><strong class="source-inline"><span class="koboSpan" id="kobo.1179.1">1</span></strong><span class="koboSpan" id="kobo.1180.1"> to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.1181.1">counter</span></strong><span class="koboSpan" id="kobo.1182.1"> variable, which will trigger the animation. </span></p>
<p><span class="koboSpan" id="kobo.1183.1">And if you’re wondering how adding a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1184.1">1</span></strong><span class="koboSpan" id="kobo.1185.1"> triggers the confetti cannon, well, that’s how the Confetti package is configured –when a value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.1186.1">1</span></strong><span class="koboSpan" id="kobo.1187.1"> is added to its </span><strong class="source-inline"><span class="koboSpan" id="kobo.1188.1">counter</span></strong><span class="koboSpan" id="kobo.1189.1"> variable, it triggers </span><span class="No-Break"><span class="koboSpan" id="kobo.1190.1">the confetti.</span></span></p>
<p><span class="koboSpan" id="kobo.1191.1">Okay, now when the user gets</span><a id="_idIndexMarker838"/><span class="koboSpan" id="kobo.1192.1"> a score of 100, the confetti cannon will shoot</span><a id="_idIndexMarker839"/><span class="koboSpan" id="kobo.1193.1"> the confetti from the middle of the screen upward, and the confetti will slowly rain down the entire interface, all the way past the bottom of </span><span class="No-Break"><span class="koboSpan" id="kobo.1194.1">the screen:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer202">
<span class="koboSpan" id="kobo.1195.1"><img alt="Figure 14.13: Confetti animation " src="image/B18674_14_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.1196.1">Figure 14.13: Confetti animation</span></p>
<p><span class="koboSpan" id="kobo.1197.1">And that’s the color-matching </span><span class="No-Break"><span class="koboSpan" id="kobo.1198.1">game finished.</span></span></p>
<h1 id="_idParaDest-207"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.1199.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1200.1">In this project, we learned about RGB colors, </span><strong class="source-inline"><span class="koboSpan" id="kobo.1201.1">switch</span></strong><span class="koboSpan" id="kobo.1202.1"> statements, implementing a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1203.1">Picker</span></strong><span class="koboSpan" id="kobo.1204.1"> view, adding a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1205.1">Slider</span></strong><span class="koboSpan" id="kobo.1206.1"> view, and creating a </span><strong class="source-inline"><span class="koboSpan" id="kobo.1207.1">reset</span></strong><span class="koboSpan" id="kobo.1208.1"> function, as well as using Swift packages to import pre-built code into </span><span class="No-Break"><span class="koboSpan" id="kobo.1209.1">our project.</span></span></p>
<p><span class="koboSpan" id="kobo.1210.1">Play around with the code, and think of ways that you can take the game further. </span><span class="koboSpan" id="kobo.1210.2">For example, maybe you want to play a sound effect when a perfect score is reached, such as a “pop” sound, or maybe you want to display the score on a label in the UI rather than having to click a button to check it. </span><span class="koboSpan" id="kobo.1210.3">There are many different things that you can do to add more fun to </span><span class="No-Break"><span class="koboSpan" id="kobo.1211.1">the project.</span></span></p>
<p><span class="koboSpan" id="kobo.1212.1">The next chapter will look at some advanced animations we can create by integrating the SpriteKit framework into our SwiftUI projects. </span><span class="koboSpan" id="kobo.1212.2">SpriteKit gives us a particle system that creates all kinds of very realistic effects and animations that you can use in </span><span class="No-Break"><span class="koboSpan" id="kobo.1213.1">your projects.</span></span></p>
</div>
<div>
<div class="IMG---Figure" id="_idContainer204">
</div>
</div>
</body></html>