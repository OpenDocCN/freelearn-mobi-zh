- en: Chapter 8. Screen Resolution and Orientation Changes
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第8章. 屏幕分辨率和方向变化
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Targeting a device
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对设备
- en: Targeting the Retina display
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对Retina显示屏
- en: Supporting multiple resolutions
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持多个分辨率
- en: Setting the default aspect ratio
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置默认宽高比
- en: Enabling auto-orientation
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用自动旋转
- en: Listening for orientation changes
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监听方向变化
- en: Responding to orientation changes
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 响应方向变化
- en: Introduction
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: The inclusion of an accelerometer allowed the original iPhone to detect changes
    in its physical orientation; reflowing its on-screen content to suit the user's
    preference for either portrait or landscape viewing. Offering this, however, meant
    that an application had to be designed and coded for two screen aspect ratios—one
    for the portrait and another for landscape.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 加速度传感器的加入使得原始iPhone能够检测其物理方向的变化；根据用户的偏好重新排列其屏幕内容以适应纵向或横向观看。然而，提供这一点意味着应用程序必须为两种屏幕宽高比进行设计和编码——一种是纵向，另一种是横向。
- en: As the iOS family has grown, so too has the number of screen resolutions that
    must be supported. With the launch of the iPad and the introduction of Retina
    display devices, there are now three separate resolutions. If you also take into
    consideration the two aspect ratios, then screen layout management for your application
    can become daunting.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 随着iOS家族的壮大，必须支持的屏幕分辨率数量也在增加。随着iPad的推出和Retina显示屏设备的引入，现在有三个不同的分辨率。如果你还考虑了两种屏幕宽高比，那么你的应用程序的屏幕布局管理可能会变得令人望而生畏。
- en: This chapter provides recipes that will help you render content properly on
    any iOS device, regardless of its screen resolution and physical orientation.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本章提供了将帮助你在任何iOS设备上正确渲染内容的菜谱，无论其屏幕分辨率和物理方向如何。
- en: Targeting a device
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 针对设备
- en: 'The iOS family consists of three devices: iPhone, iPod touch, and iPad. When
    developing for iOS, you must state the devices that you are specifically targeting.
    Your choice will dictate how your app is run by each of the three.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: iOS家族包括三种设备：iPhone、iPod touch和iPad。在为iOS开发时，你必须声明你具体针对的设备。你的选择将决定你的应用程序如何由这三种设备运行。
- en: This recipe will take you through the necessary steps required to create an
    app that targets the entire family.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 这个菜谱将带你完成创建一个针对整个家族的应用程序所需的必要步骤。
- en: Getting ready
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: An FLA has been provided as a starting point for this recipe. Open `chapter8\recipe1\recipe.fla`
    from the book's accompanying code bundle.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 已提供了一个FLA作为本菜谱的起点。从书籍的配套代码包中打开`chapter8\recipe1\recipe.fla`。
- en: Sitting on the stage is a dynamic text field with an instance name of `output`.
    We will use this text field to report which device your app is currently being
    run on.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在舞台上有一个名为`output`的动态文本字段。我们将使用这个文本字段来报告应用程序当前正在运行的设备。
- en: For the avoidance of doubt, this recipe will not take advantage of the Retina
    display resolution of the iPhone 4/4S and fourth-generation iPod touch. If you
    would like to provide Retina support, then refer to this chapter's *Targeting
    the Retina display* recipe.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免疑问，这个菜谱将不会利用iPhone 4/4S和第四代iPod touch的Retina显示屏分辨率。如果你想提供Retina支持，请参阅本章的*针对Retina显示屏*菜谱。
- en: How to do it...
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: We will specify the target devices from the AIR for iOS Settings panel and then
    write some ActionScript to report which device the app is currently running on.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将指定目标设备，然后编写一些ActionScript来报告应用程序当前正在运行的设备。
- en: Setting the target devices
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置目标设备
- en: 'Let us start by setting the target devices:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先设置目标设备：
- en: Open the AIR for iOS Settings panel by selecting **File** | **AIR for iOS Settings**
    from Flash Professional.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过从Flash Professional中选择**文件** | **AIR for iOS设置**来打开AIR for iOS设置面板。
- en: Ensure that the **General** tab is selected.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保已选择**常规**选项卡。
- en: Select **iPhone and iPad** from the **Device** field.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**设备**字段中选择**iPhone和iPad**。
- en: If you are using Flash Professional CS5.5, then also set the **Resolution**
    field to **Standard**.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你正在使用Flash Professional CS5.5，请将**分辨率**字段设置为**标准**。
- en: Click on **OK** to close the panel.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**以关闭面板。
- en: Detecting the current device
  id: totrans-29
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检测当前设备
- en: 'Now, let us move onto the ActionScript required for this recipe:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们继续添加这个菜谱所需的ActionScript：
- en: Create a document class; name it `Main`.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个文档类；命名为`Main`。
- en: 'Add the following three import statements to the class:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下三个导入语句添加到类中：
- en: '[PRE0]'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Within the constructor, set a scale mode and alignment for the stage:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在构造函数中，设置舞台的缩放模式和定位：
- en: '[PRE1]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Using the `Capabilities` class, determine which device the app is running on:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `Capabilities` 类，确定应用正在运行的设备：
- en: '[PRE2]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Save the document class within the same folder as your FLA and name it `Main.as`.
    Also save the FLA.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将文档类保存在与您的 FLA 相同的文件夹中，并将其命名为 `Main.as`。同时保存 FLA。
- en: Publish and test the app on your device. Install it on multiple devices if you
    have access to more than one.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的设备上发布和测试应用。如果您有多台设备，请安装到多台设备上。
- en: 'When you run it on an iPhone or iPod touch, the following text will be output
    to the screen:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 当您在 iPhone 或 iPod touch 上运行它时，以下文本将输出到屏幕上：
- en: '**iPhone / iPod touch**'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**iPhone / iPod touch**'
- en: 'Those testing on an iPad will see the following:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在 iPad 上测试的人将看到以下内容：
- en: '[PRE3]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: How it works...
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'You specify the devices you wish to target by setting the **Device** field
    within the AIR for iOS Settings panel. The following three options are available
    to you:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过设置 AIR for iOS 设置面板中的 **Device** 字段来指定您希望针对的设备。以下有三个选项可供您选择：
- en: '**iPhone**'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**iPhone**'
- en: '**iPad**'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**iPad**'
- en: '**iPhone and iPad**'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**iPhone 和 iPad**'
- en: The iPod touch is not listed because it is treated as an iPhone—both devices
    share the same aspect ratio and resolution.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: iPod touch 没有列出，因为它被视为 iPhone——这两个设备具有相同的宽高比和分辨率。
- en: Selecting **iPhone** restricts your screen size to that of the iPhone and the
    iPod touch. Your app will still run on the iPad but it won't attempt to take advantage
    of the iPad's increased resolution. Instead, the iPad will run the app using the
    iPhone's standard 320x480 resolution. Users can either run the app at its normal
    size or use pixel-doubling to cover almost the entire screen.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 选择 **iPhone** 将屏幕大小限制在 iPhone 和 iPod touch 的大小。您的应用仍然可以在 iPad 上运行，但它不会尝试利用 iPad
    的更高分辨率。相反，iPad 将使用 iPhone 的标准 320x480 分辨率来运行应用。用户可以选择在正常大小下运行应用或使用像素加倍来覆盖几乎整个屏幕。
- en: Selecting **iPad** does take advantage of the iPad's entire 768x1024 resolution
    but restricts your app to that device.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 选择 **iPad** 可以利用 iPad 的整个 768x1024 分辨率，但将您的应用限制在该设备上。
- en: If you are writing an app that can run across all three devices by adapting
    to the different screen sizes then select **iPhone and iPad**. This is more commonly
    known as a universal app and is the type of application we have opted for in this
    recipe.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在编写一个可以通过适应不同屏幕尺寸在所有三种设备上运行的 app，请选择 **iPhone 和 iPad**。这通常被称为通用应用，也是我们在本菜谱中选择的类型。
- en: 'Apple acknowledges the difficulty of writing for multiple devices and screen
    resolutions. To ease development, they provide the following two options when
    targeting the entire iOS family:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 苹果承认编写针对多个设备和屏幕分辨率的难度。为了简化开发，当针对整个 iOS 系列时，他们提供了以下两个选项：
- en: Write two separate apps—one for iPad and another for iPhone/iPod touch
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写两个单独的应用——一个用于 iPad，另一个用于 iPhone/iPod touch
- en: Write a universal app that adapts to each device's screen size
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写一个适应每个设备屏幕大小的通用应用
- en: Of course it is not mandatory that you support all three devices. For example,
    it is perfectly acceptable to write an app that only targets the iPad.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，您不必支持所有三种设备。例如，编写一个仅针对 iPad 的应用是完全可行的。
- en: It is possible to determine the device your app is running on by querying the
    device's screen resolution. Both the iPhone and iPod touch have a horizontal resolution
    of 320 pixels, while the iPad's is 768 pixels wide. Therefore, we only need to
    query the static `Capabilities.screenResolutionX` property to determine the device
    type rather than also examining the vertical resolution with `Capabilities.screenResolutionY`.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查询设备的屏幕分辨率，可以确定您的应用正在运行的设备。iPhone 和 iPod touch 的水平分辨率为 320 像素，而 iPad 的宽度为
    768 像素。因此，我们只需要查询静态的 `Capabilities.screenResolutionX` 属性来确定设备类型，而无需也检查垂直分辨率 `Capabilities.screenResolutionY`。
- en: You may be tempted to use `Stage.stageWidth` instead, but remember that with
    the stage dimensions fixed, the same width will be returned across all device
    types for this recipe.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能会想使用 `Stage.stageWidth`，但请记住，由于舞台尺寸固定，此菜谱中所有设备类型都将返回相同的宽度。
- en: You can obtain more information regarding `flash.system.Capabilities, flash.display.StageScaleMode`
    and `flash.display.StageAlign` from Adobe Community Help.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从 Adobe 社区帮助中获取有关 `flash.system.Capabilities, flash.display.StageScaleMode`
    和 `flash.display.StageAlign` 的更多信息。
- en: There's more...
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多信息...
- en: It is also worth considering the following information when targeting multiple
    devices.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在针对多个设备时，还应考虑以下信息。
- en: Application launch image
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 应用程序启动图像
- en: When targeting multiple device types, remember to include a launch image for
    each supported resolution. Alternative launch images can also be provided for
    different orientations if you choose to support them. For more detail, refer to
    the *Including an application launch image* recipe from [Chapter 3](ch03.html
    "Chapter 3. Writing your First App").
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 当针对多种设备类型时，请记住为每个支持的分辨率包含一个启动图像。如果您选择支持它们，也可以提供不同方向的备用启动图像。有关更多详细信息，请参阅第 3 章*包含应用程序启动图像*的菜谱[ch03.html
    "第 3 章。编写您的第一个应用程序"]。
- en: Including icons
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 包含图标
- en: Remember to include the appropriate icon artwork required by each device type
    you wish to support. Refer to the *Including icons* recipe from [Chapter 3](ch03.html
    "Chapter 3. Writing your First App") for more detail.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住包含每个设备类型所需的适当图标艺术品。有关更多详细信息，请参阅第 3 章*包含图标*的菜谱[ch03.html "第 3 章。编写您的第一个应用程序"]。
- en: Landscape aspect ratio
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 横屏宽高比
- en: The `screenResolutionX` and `screenResolutionY` properties are always returned
    as if the device is being held in its portrait orientation. For example, an iPad
    app that has a default landscape orientation will still return a horizontal resolution
    of 768 pixels and a vertical resolution of 1024 pixels.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '`screenResolutionX` 和 `screenResolutionY` 属性总是以设备竖直方向握持时返回。例如，一个默认横屏方向的 iPad
    应用仍然会返回水平分辨率为 768 像素，垂直分辨率为 1024 像素的分辨率。'
- en: See also
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS 通用设置，[第 2 章](ch02.html "第 2 章。使用 Flash 构建 iOS 应用")*'
- en: '*Targeting the Retina display*'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*针对 Retina 显示*'
- en: '*Setting the default aspect ratio*'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*设置默认宽高比*'
- en: Targeting the Retina display
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 针对 Retina 显示
- en: The iPhone 4 introduced the world to the Retina display. It packs four times
    the number of pixels into the same screen found on earlier models, providing the
    sharpest images yet seen on a mobile device.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: iPhone 4 将 Retina 显示引入了世界。它将四倍的像素数压缩到与早期型号相同的屏幕中，提供了在移动设备上所见到的最清晰的图像。
- en: Those using Flash Professional CS5.5 and at least AIR 2.6 can use the full 640x960
    resolution provided by Retina display iPhones and iPod touches.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Flash Professional CS5.5 和至少 AIR 2.6 的用户可以使用 Retina 显示的 iPhone 和 iPod touch
    提供的完整 640x960 分辨率。
- en: Getting ready
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: From the book's accompanying code samples, open `chapter8\recipe2\recipe.fla`
    into Flash Professional CS5.5.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 从本书的配套代码示例中，将 `chapter8\recipe2\recipe.fla` 打开到 Flash Professional CS5.5 中。
- en: This FLA has been provided as a starting point and has a dynamic text field
    named `output` sitting on the stage. We will use this text field to report whether
    or not the app is being run on a Retina display device.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 这个 FLA 已作为起点提供，并在舞台上有一个名为 `output` 的动态文本字段。我们将使用这个文本字段来报告应用是否在 Retina 显示设备上运行。
- en: While this recipe's example app will run on an iPad, it won't target its 768x1024
    screen resolution. Instead, it will simulate a standard resolution iPhone/iPod
    touch.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这个菜谱的示例应用可以在 iPad 上运行，但它不会针对其 768x1024 的屏幕分辨率。相反，它将模拟标准分辨率的 iPhone/iPod touch。
- en: How to do it...
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Retina display support is specified from the AIR for iOS Settings panel. We
    will also write a basic document class to determine whether the app is actually
    running on a Retina device or not.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: Retina 显示支持是在 AIR for iOS 设置面板中指定的。我们还将编写一个基本的文档类来确定应用实际上是否在 Retina 设备上运行。
- en: Setting Retina display support
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置 Retina 显示支持
- en: 'Let us start by enabling support for the Retina display''s screen resolution:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先启用对 Retina 显示屏幕分辨率的支持：
- en: Open the AIR for iOS Settings panel by selecting **File** | **AIR for iOS Settings**.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择**文件** | **AIR for iOS 设置**来打开 AIR for iOS 设置面板。
- en: Ensure the **General** tab is selected.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保已选择**常规**选项卡。
- en: Set the **Resolution** field to **High**.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**分辨率**字段设置为**高**。
- en: Also, for this recipe, ensure that the **Device** field is set to **iPhone**.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，对于这个菜谱，确保**设备**字段设置为**iPhone**。
- en: Click on the **OK** button to close the panel.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**按钮关闭面板。
- en: Detecting a Retina display device
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检测 Retina 显示设备
- en: 'With the AIR for iOS settings taken care of, we can turn our attention to the
    ActionScript required to determine if the app is being run on a Retina display
    device:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理完 AIR for iOS 设置后，我们可以将注意力转向确定应用是否在 Retina 显示设备上运行的所需 ActionScript：
- en: Create a document class and name it `Main`.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个文档类，并将其命名为 `Main`。
- en: 'Add the following three import statements to the class:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下三个导入语句添加到类中：
- en: '[PRE4]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Set the stage''s scale mode and alignment properties:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置舞台的缩放模式和居中对齐属性：
- en: '[PRE5]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Query the device''s screen resolution to determine whether or not it has a
    Retina display:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查询设备的屏幕分辨率以确定它是否有视网膜显示屏：
- en: '[PRE6]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Save the class file as `Main.as` within the same folder as the FLA. Also save
    the FLA.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将类文件保存为`Main.as`在FLA相同的文件夹中。也要保存FLA。
- en: Publish and deploy the IPA to your device. If you have a Retina and a standard
    display device available, then install the app on both.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布并部署IPA到你的设备。如果你有视网膜和标准显示屏设备可用，那么在两个设备上安装应用。
- en: 'When you run the app on a Retina display iPhone or iPod touch, the following
    text will be output to the screen:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在视网膜显示屏的iPhone或iPod touch上运行应用时，以下文本将被输出到屏幕：
- en: '**Retina Resolution**'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '**视网膜分辨率**'
- en: 'For standard display devices, you will see the following:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 对于标准显示屏设备，你会看到以下内容：
- en: '**Standard Resolution**'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '**标准分辨率**'
- en: How it works...
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Although the aspect ratio has been maintained, there are now two screen resolutions
    that you can target when developing for iPhone and iPod touch:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然已经保持了宽高比，但在为iPhone和iPod touch开发时，现在有两个屏幕分辨率可以针对：
- en: 'Standard: 320x480'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准**：320x480'
- en: 'Retina: 640x960'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**视网膜**：640x960'
- en: The Retina display resolution is found in post third-generation iPhone and iPod
    touches. All previous models use the standard display resolution.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 视网膜显示屏的分辨率出现在第三代iPhone和iPod touch之后。所有之前的型号都使用标准显示屏分辨率。
- en: If you choose to support the Retina display, then your app must also provide
    support for the standard display. Apple does not permit you to submit separate
    IPAs for each supported resolution. You can, however, opt to support just the
    standard display and the app will be pixel-doubled by iOS to fit Retina display
    screens.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你选择支持视网膜显示屏，那么你的应用也必须支持标准显示屏。苹果不允许你为每个支持的分辨率提交单独的IPA。然而，你可以选择只支持标准显示屏，iOS会将应用像素加倍以适应视网膜显示屏屏幕。
- en: 'To specify the resolutions your app will support, set the **Resolution** field
    within the AIR for iOS Settings panel. The following two options are available:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 要指定你的应用将支持的分辨率，请在AIR for iOS设置面板中设置**分辨率**字段。以下有两个选项可用：
- en: '**Standard**'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准**'
- en: '**High**'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高**'
- en: Select **High** if you are providing support for both the Retina and standard
    displays. Otherwise select **Standard**.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你同时为视网膜和标准显示屏提供支持，请选择**高**。否则选择**标准**。
- en: When targeting multiple screen resolutions, it is important you set the stage's
    scale mode and alignment.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 当针对多个屏幕分辨率时，设置舞台的缩放模式和校准非常重要。
- en: Setting the scale mode to `NO_SCALE` prevents the stage's content from being
    scaled to fit the Retina screen's resolution. Instead, your content will maintain
    its defined size. Setting the stage alignment to `TOP_LEFT` forces all content
    to be positioned relative to the top left-hand corner.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 将缩放模式设置为`NO_SCALE`可以防止舞台内容缩放以适应视网膜屏幕的分辨率。相反，你的内容将保持其定义的大小。将舞台校准设置为`TOP_LEFT`将强制所有内容相对于左上角进行定位。
- en: While scaling may sound desirable, it really isn't advisable for applications
    that use bitmap images, which become pixelated when scaled. Instead, you should
    write logic within your app to swap between standard and Retina resolution versions
    of any bitmaps and also handle the layout and positioning of content yourself.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然缩放可能听起来很吸引人，但对于使用位图的应用程序来说，实际上并不建议这样做。位图在缩放时会出现像素化。相反，你应在你的应用中编写逻辑来在标准分辨率和视网膜分辨率的位图版本之间切换，并自行处理内容和布局的位置。
- en: In addition, your FLA's stage size should match that of the standard resolution
    display—320x480 pixels. When running on a Retina display device and with the stage's
    scale mode set to `NO_SCALE`, the stage's dimensions will be reported as being
    twice what you set within Flash Professional. This will allow you to take advantage
    of the higher resolution.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你的FLA舞台大小应该与标准分辨率显示屏匹配——320x480像素。当在视网膜显示屏设备上运行，并且将舞台的缩放模式设置为`NO_SCALE`时，舞台的尺寸将被报告为是你在Flash
    Professional中设置的尺寸的两倍。这将允许你利用更高的分辨率。
- en: It is possible to determine the screen resolution your app is using by querying
    the static `screenResolutionX` and `screenResolutionY` properties that belong
    to the `Capabilities` class. For this recipe, we simply checked `screenResolutionX`
    as this was enough to determine whether the standard or Retina screen resolution
    was being used.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查询属于`Capabilities`类的静态`screenResolutionX`和`screenResolutionY`属性，可以确定你的应用正在使用的屏幕分辨率。对于这个菜谱，我们只是检查了`screenResolutionX`，因为这足以确定是否正在使用标准或视网膜屏幕分辨率。
- en: You can obtain more information regarding `flash.system.Capabilities, flash.display.StageScaleMode`,
    and `flash.display.StageAlign` from Adobe Community Help.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从 Adobe 社区帮助中获取有关 `flash.system.Capabilities`、`flash.display.StageScaleMode`
    和 `flash.display.StageAlign` 的更多信息。
- en: There's more...
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: There are several other considerations when utilizing the Retina display.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 Retina 显示屏时，还有其他一些考虑因素。
- en: Retina home screen icon
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Retina 主屏幕图标
- en: When supporting the Retina display, you must provide a home screen icon of size
    114x114\. Detailed instructions are available from the *Including icons* recipe
    in [Chapter 3](ch03.html "Chapter 3. Writing your First App").
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 当支持 Retina 显示屏时，您必须提供一个 114x114 像素的主屏幕图标。有关详细信息，请参阅[第 3 章](ch03.html "第 3 章。编写您的第一个应用程序")中的*包含图标*配方。
- en: Retina application launch image
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Retina 应用程序启动图像
- en: You can include with your IPA an additional launch image that takes advantage
    of the Retina display's higher resolution. For more details, refer to the *Including
    an application launch image* recipe from [Chapter 3](ch03.html "Chapter 3. Writing
    your First App").
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在 IPA 中包含一个额外的启动图像，该图像利用了 Retina 显示屏的高分辨率。有关更多详细信息，请参阅[第 3 章](ch03.html "第
    3 章。编写您的第一个应用程序")中的*包含应用程序启动图像*配方。
- en: Vector-only apps
  id: totrans-125
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 仅矢量应用程序
- en: If your application uses only vector content, then you can simply let AIR take
    care of scaling for you. This will allow you to write an app targeting the standard
    320x480 pixel display, which will also take advantage of the higher resolution
    Retina display.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的应用程序仅使用矢量内容，则可以简单地让 AIR 为您处理缩放。这将允许您编写一个针对标准 320x480 像素显示屏的应用程序，这将同时利用更高分辨率的
    Retina 显示屏。
- en: 'To enable this, set the stage''s scale mode and alignment to the following:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用此功能，请将场景的缩放模式和定位设置为以下内容：
- en: '[PRE7]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Also, remember to set the **Resolution** field from the AIR for iOS Settings
    panel to **High**.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，请记住将 AIR for iOS 设置面板中的**分辨率**字段设置为**高**。
- en: Don't confuse this with pixel doubling that's employed by iOS. Your app's vector
    content will actually be scaled, rather than each pixel being doubled in size.
    Essentially there will be a noticeable improvement in image fidelity on Retina
    devices.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 不要将此与 iOS 使用的像素加倍混淆。您的应用程序的矢量内容实际上会被缩放，而不是每个像素的大小加倍。本质上，在 Retina 设备上会有明显的图像保真度提升。
- en: Of course, you can still use bitmaps but unlike the vector content, pixelation
    will be obvious when they are scaled up.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，您仍然可以使用位图，但与矢量内容不同，当它们放大时，像素化将非常明显。
- en: iPad display
  id: totrans-132
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: iPad 显示屏
- en: Both the iPad 1 and 2 support a single screen resolution of 768x1024\. When
    targeting the iPad or the non-Retina display iPhone and iPod touch, set the **Resolution**
    field to **Standard**.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: iPad 1 和 2 都支持 768x1024 像素的单一屏幕分辨率。当针对 iPad 或非 Retina 显示屏的 iPhone 和 iPod touch
    时，将**分辨率**字段设置为**标准**。
- en: See also
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS 通用设置，[第 2 章](ch02.html "第 2 章。使用 Flash 构建 iOS 应用程序")*'
- en: '*Targeting a device*'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*针对设备*'
- en: '*Supporting multiple resolutions*'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*支持多分辨率*'
- en: Supporting multiple resolutions
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 支持多分辨率
- en: The launch of the iPad led to developers having to support two different physical
    screen sizes and resolutions. This was exacerbated by the introduction of the
    Retina display for iPhone and iPod touch, where screen resolutions were no longer
    guaranteed to be identical across the same device type.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: iPad 的推出导致开发者必须支持两种不同的物理屏幕尺寸和分辨率。iPhone 和 iPod touch 引入 Retina 显示屏后，这种情况更加严重，因为同一设备类型的屏幕分辨率不再保证相同。
- en: When targeting multiple device types and models, it is important that your app
    can adapt its layout to different screen resolutions.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当针对多种设备和型号时，您的应用程序能够适应不同的屏幕分辨率非常重要。
- en: Let us walk through a simple example that creates a universal app that supports
    the various portrait resolutions used by the iPhone, iPod touch, and iPad.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过一个简单的示例来创建一个支持 iPhone、iPod touch 和 iPad 使用的各种纵向分辨率的通用应用程序。
- en: Getting ready
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: An FLA containing graphics has been provided in the book's accompanying code
    bundle for you to work from.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 书籍附带的代码包中提供了一个包含图形的 FLA 文件，供您从中工作。
- en: Open `chapter8\recipe3\recipe.fla` into Flash Professional.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 将 `chapter8\recipe3\recipe.fla` 打开到 Flash Professional 中。
- en: 'Within the FLA''s library, you will find three PNGs—one for each screen resolution
    we intend to support. Each has also been linked for ActionScript usage allowing
    it to be easily added to the screen at runtime. The following table summarizes
    this:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FLA 的库中，你会找到三个 PNG 图像——每个屏幕分辨率一个。每个图像也已被链接以供 ActionScript 使用，允许它在运行时轻松添加到屏幕上。以下表格总结了这一点：
- en: '|   | Bitmap name | AS linkage |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '|   | 位图名称 | AS 链接 |'
- en: '| Standard display 320x480 | rocket-standard.png | RocketStandardBitmapData
    |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '| 标准显示 320x480 | rocket-standard.png | RocketStandardBitmapData |'
- en: '| Retina display 640x960 | rocket-retina.png | RocketRetinaBitmapData |'
  id: totrans-148
  prefs: []
  type: TYPE_TB
  zh: '| 视网膜显示屏 640x960 | rocket-retina.png | RocketRetinaBitmapData |'
- en: '| iPad display 768x1024 | rocket-ipad.png | RocketIPadBitmapData |'
  id: totrans-149
  prefs: []
  type: TYPE_TB
  zh: '| iPad 显示 768x1024 | rocket-ipad.png | RocketIPadBitmapData |'
- en: When running on a standard display iPhone or iPod touch, **rocket-standard.png**
    will be shown on screen. For Retina display screens, the app will use **rocket-retina.png**.
    Finally, **rocket-ipad.png** will be shown if an iPad's screen resolution is detected.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 当在标准显示的 iPhone 或 iPod touch 上运行时，屏幕上会显示 **rocket-standard.png**。对于视网膜显示屏，应用程序将使用
    **rocket-retina.png**。最后，如果检测到 iPad 的屏幕分辨率，将显示 **rocket-ipad.png**。
- en: If you are using Flash Professional CS5 for this recipe, then your app will
    be unable to take advantage of the higher resolution provided by Retina display
    devices. Retina display support is only available from AIR 2.6 onwards.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用 Flash Professional CS5 进行这个菜谱，那么你的应用程序将无法利用 Retina 显示设备提供的更高分辨率。Retina
    显示支持仅从 AIR 2.6 开始可用。
- en: How to do it...
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: We will split this recipe into two parts. First, from the AIR for iOS Settings
    panel, we will declare support for all device resolutions. Secondly, we will write
    the code required to display the correct bitmap for each supported resolution.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将把这个菜谱分成两部分。首先，从 AIR for iOS 设置面板中，我们将声明支持所有设备分辨率。其次，我们将编写显示每个支持分辨率的正确位图的代码。
- en: Setting supported devices and resolutions
  id: totrans-154
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置支持的设备和分辨率
- en: 'Let us start by targeting all available device resolutions:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先针对所有可用的设备分辨率进行目标定位：
- en: Open the AIR for iOS Settings panel by selecting **File** | **AIR for iOS Settings**.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择 **文件** | **AIR for iOS 设置** 打开 AIR for iOS 设置面板。
- en: Ensure the **General** tab is selected.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择了 **常规** 选项卡。
- en: Set the **Device** field to **iPhone and iPad**.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 **设备** 字段设置为 **iPhone 和 iPad**。
- en: If you are using Flash Professional CS5.5, then also set the **Resolution**
    field to **High**.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你使用的是 Flash Professional CS5.5，那么也将 **分辨率** 字段设置为 **高**。
- en: These settings are required if you wish a single app to support all devices
    in the iOS family and take advantage of the higher resolution provided by Retina
    display devices.
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你希望单个应用程序支持 iOS 家族中的所有设备并利用 Retina 显示设备提供的更高分辨率，则需要这些设置。
- en: Click on the **OK** button to close the panel.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **确定** 按钮关闭面板。
- en: Displaying the correct bitmap
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 显示正确的位图
- en: 'Now, we will write some ActionScript to adapt to each of the expected screen
    resolutions:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将编写一些 ActionScript 代码以适应预期的每个屏幕分辨率：
- en: Create a document class and name it `Main`.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个文档类，并将其命名为 `Main`。
- en: 'Add import statements for the required classes:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为所需的类添加导入语句：
- en: '[PRE8]'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Within the constructor, set the stage''s scale mode and alignment properties:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在构造函数中，设置舞台的缩放模式和定位属性：
- en: '[PRE9]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Staying within the constructor, call a method to create the correct bitmap
    for the current device''s screen resolution:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在构造函数中，调用一个方法来为当前设备的屏幕分辨率创建正确的位图：
- en: '[PRE10]'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Now, write the method which instantiates and returns the bitmap:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，编写一个实例化和返回位图的函数：
- en: '[PRE11]'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Save the class file as `Main.as`. Also move back to your FLA and save it too.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将类文件保存为 `Main.as`。同时，回到你的 FLA 并保存它。
- en: Publish the FLA and test your app on a range of iOS devices.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布 FLA 并在一系列 iOS 设备上测试你的应用程序。
- en: How it works...
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: This recipe's example determines the screen resolution being used and displays
    a bitmap image that has been prepared for that resolution.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 这个菜谱的示例确定正在使用的屏幕分辨率，并显示为该分辨率准备的位图图像。
- en: 'The following portrait resolutions are supported:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 支持以下纵向分辨率：
- en: iPad
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: iPad
- en: 768x1024
  id: totrans-179
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 768x1024
- en: iPhone and iPod touch
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: iPhone 和 iPod touch
- en: '320x480: Standard'
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '320x480: 标准'
- en: '640x960: Retina'
  id: totrans-182
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '640x960: 视网膜'
- en: From the AIR for iOS Settings panel, you must explicitly state that you intend
    to create a universal app that supports all three devices and their screen resolutions.
    This is done by setting the **Device** field to **iPhone and iPad** and the **Resolution**
    field to **High**.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 从 AIR for iOS 设置面板中，你必须明确声明你打算创建一个支持所有三种设备和它们屏幕分辨率的通用应用程序。这是通过将 **设备** 字段设置为
    **iPhone 和 iPad** 以及将 **分辨率** 字段设置为 **高** 来完成的。
- en: When targeting multiple screen resolutions, it is important that you set the
    stage's scale mode and alignment.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 当针对多个屏幕分辨率时，设置舞台的缩放模式和校准非常重要。
- en: Setting the stage's scale mode to `NO_SCALE` ensures that your content maintains
    its defined size across multiple screen resolutions. This leaves you in full control
    of the sizing and layout of your content. It also ensures that any bitmaps being
    used aren't scaled at runtime, which will prevent them from becoming pixelated.
    Setting the stage alignment to `TOP_LEFT` forces all content to be positioned
    relative to the top left-hand corner, making positioning easier to work with.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 将舞台的缩放模式设置为`NO_SCALE`确保你的内容在多个屏幕分辨率下保持其定义的大小。这让你完全控制内容的尺寸和布局。它还确保正在使用的位图在运行时不会被缩放，这将防止它们变得像素化。将舞台校准设置为`TOP_LEFT`强制所有内容相对于左上角定位，这使得定位更容易处理。
- en: The actual code that creates the correct bitmap simply examines the static `Capabilities.screenResolutionX`
    property to determine which of the three expected screen resolutions the app currently
    has to cater for. Once a decision is made, the correct bitmap from the library
    is instantiated and added to the display list at its default position of (0,0).
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 创建正确位图的实际代码只是简单地检查静态的`Capabilities.screenResolutionX`属性，以确定应用程序当前需要为哪三个预期的屏幕分辨率提供服务。一旦做出决定，正确的位图从库中实例化并添加到显示列表，其默认位置为(0,0)。
- en: While the stage and timeline are still an option for the layout of content,
    you may find yourself relying more heavily on ActionScript for more complex projects.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然舞台和时间轴仍然是内容布局的选项，但你可能会发现自己更依赖于ActionScript来处理更复杂的项目。
- en: 'You can obtain more information from Adobe Community Help. Perform a search
    for the following classes: `flash.system.Capabilities, flash.display.StageScaleMode`,
    and `flash.display.StageAlign`.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从Adobe社区帮助中获取更多信息。搜索以下类：`flash.system.Capabilities, flash.display.StageScaleMode`,
    和 `flash.display.StageAlign`。
- en: There's more...
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Our example was somewhat trivial. Unfortunately, adapting a real-world application
    to multiple screen resolutions can be difficult.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的例子有些简单。不幸的是，将实际应用适配到多个屏幕分辨率可能会很困难。
- en: Default stage size
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 默认舞台大小
- en: When its scale mode is set to `NO_SCALE`, the stage's default size is of little
    importance to a universal app. For example, this recipe's FLA uses a stage size
    of 320x480, which obviously falls far short of the iPad's 768x1024 resolution.
    This, however, does not restrict the app's display list to the stage's default
    dimensions—the app is still able to target the full screen resolution of the device
    it is running on.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 当其缩放模式设置为`NO_SCALE`时，舞台的默认大小对通用应用来说并不重要。例如，这个菜谱的FLA使用的是320x480的舞台大小，这显然远远低于iPad的768x1024分辨率。然而，这并不会限制应用程序的显示列表到舞台的默认尺寸——应用程序仍然能够针对其运行设备的全屏分辨率。
- en: Try not to rely on the default stage size when performing layout management
    across multiple resolutions. The same is also true when determining what device
    your app is currently running on. Instead use `Capabilities.screenResolutionX`
    and `Capabilities.screenResolutionY`.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行跨多个分辨率的布局管理时，尽量不要依赖于默认的舞台大小。当确定你的应用程序当前运行在哪种设备上时，也是如此。相反，使用`Capabilities.screenResolutionX`和`Capabilities.screenResolutionY`。
- en: Model-View-Controller architecture
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模型-视图-控制器架构
- en: Although outside the scope of this book, you should consider using the Model-View-Controller
    (MVC) design pattern to manage layout across each supported screen resolution.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这超出了本书的范围，但你应该考虑使用模型-视图-控制器（MVC）设计模式来管理每个支持的屏幕分辨率的布局。
- en: 'MVC consists of three elements: a single Model that contains the application''s
    data and state management logic; at least one View, which presents the application''s
    on-screen state; and at least one Controller, which handles user interaction.'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: MVC由三个元素组成：一个包含应用程序数据和状态管理逻辑的单个模型；至少一个视图，用于展示应用程序的屏幕状态；以及至少一个控制器，用于处理用户交互。
- en: Typically, a View is paired with a Controller, and you will write a View-Controller
    pair for each screen resolution you wish to support. The Controller acts as an
    intermediary between its own View and the Model.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，一个视图会与一个控制器配对，你将为每个你希望支持的屏幕分辨率编写一个视图-控制器对。控制器在其视图和模型之间充当中间人。
- en: There are many ActionScript MVC frameworks available, such as PureMVC and Robotlegs.
    You can visit the PureMVC home page at [http://puremvc.org](http://puremvc.org),
    while Robotlegs can be downloaded from [www.robotlegs.org](http://www.robotlegs.org).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多ActionScript MVC框架可用，例如PureMVC和Robotlegs。你可以访问PureMVC的主页[http://puremvc.org](http://puremvc.org)，而Robotlegs可以从[www.robotlegs.org](http://www.robotlegs.org)下载。
- en: Tip
  id: totrans-199
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Apple encourages the use of MVC when writing apps for iOS.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 苹果鼓励在为iOS编写应用时使用MVC模式。
- en: Dynamic sizing and layout
  id: totrans-201
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动态尺寸和布局
- en: When working with multiple screen resolutions and pixel densities, you may consider
    developing your app to dynamically re-size and lay out its content. Although this
    can be a complex approach, it will future-proof your app, allowing it to fit additional
    screens that may one day become available. However, for a limited number of screens,
    you may find MVC more feasible.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 当处理多个屏幕分辨率和像素密度时，你可能需要考虑开发你的应用以动态调整其内容的大小和布局。虽然这可能是一个复杂的方法，但它将为你的应用提供未来保障，使其能够适应未来可能出现的其他屏幕。然而，对于有限的屏幕数量，你可能发现MVC更可行。
- en: 'For more detail, take a look at the "Writing multi-screen AIR apps" article
    on the Adobe AIR Developer Center: [www.adobe.com/devnet/air/flex/articles/writing_multiscreen_air_apps.html](http://www.adobe.com/devnet/air/flex/articles/writing_multiscreen_air_apps.html).'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 更多详情，请查看Adobe AIR开发者中心的“编写多屏幕AIR应用”文章：[www.adobe.com/devnet/air/flex/articles/writing_multiscreen_air_apps.html](http://www.adobe.com/devnet/air/flex/articles/writing_multiscreen_air_apps.html)。
- en: Supporting iPad separately
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 单独支持iPad
- en: The aspect ratio of the iPad's screen differs from that of the iPhone and the
    iPod touch. This can make the development of a single app that works across all
    three devices awkward as the app will need to tailor its UI at runtime for three
    different resolutions. In addition, for bitmap-heavy applications, storing three
    sets of graphics will consume a significant portion of memory.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: iPad屏幕的宽高比与iPhone和iPod touch不同。这可能会使得开发一个适用于所有三个设备的单一应用变得尴尬，因为应用需要在运行时针对三种不同的分辨率调整其UI。此外，对于位图密集型应用，存储三套图形将消耗大量内存。
- en: To alleviate the complexities of supporting three devices within a single app,
    you can write your iPad version separately. The App Store will accept an iPad-specific
    version of your app and another that supports both the iPhone and iPod touch.
    Simply specify your target device from the AIR for iOS Settings panel.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减轻在一个应用中支持三个设备的复杂性，你可以单独编写你的iPad版本。App Store将接受一个针对iPad的应用版本以及一个同时支持iPhone和iPod
    touch的应用版本。只需从AIR for iOS设置面板中指定你的目标设备。
- en: See also
  id: totrans-207
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS通用设置，[第2章](ch02.html "第2章。使用Flash构建iOS应用")*'
- en: '*Accessing bitmaps with ActionScript, [Chapter 6](ch06.html "Chapter 6. Graphics
    and Hardware Acceleration")*'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用ActionScript访问位图，[第6章](ch06.html "第6章。图形和硬件加速")*'
- en: '*Resizing bitmaps, [Chapter 4](ch04.html "Chapter 4. Porting Flash Projects
    to iOS")*'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*调整位图大小，[第4章](ch04.html "第4章。将Flash项目移植到iOS")*'
- en: Setting the default aspect ratio
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置默认宽高比
- en: Devices, such as the iPhone, can be freely rotated in real space. This is convenient
    as it provides two aspect ratios that can be worked with—portrait and landscape.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 像iPhone这样的设备可以在真实空间中自由旋转。这很方便，因为它提供了两种可以工作的宽高比——纵向和横向。
- en: Let us see how to select a default aspect ratio.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何选择默认宽高比。
- en: Getting ready
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Using Flash Professional, open `chapter8\recipe4\recipe.fla` from the book's
    accompanying code bundle.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Flash Professional，从书籍配套代码包中打开`chapter8\recipe4\recipe.fla`。
- en: The library contains a bitmap image of a fire truck that has been designed for
    a landscape resolution of 480x320 pixels.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 该库包含一个为480x320像素横幅分辨率设计的消防车位图。
- en: How to do it...
  id: totrans-217
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到...
- en: 'We will begin by locking the FLA to a landscape aspect ratio:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先将FLA锁定为横幅宽高比：
- en: Using the **Selection Tool (V)** , click anywhere on the stage. From the **Properties**
    panel, change the stage's aspect ratio from **portrait** to **landscape**. To
    do this, simply set its width to **480** and the height to **320**.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用**选择工具(V**)，在舞台上的任何位置点击。从**属性**面板中，将舞台的宽高比从**纵向**更改为**横向**。要做到这一点，只需将其宽度设置为**480**，高度设置为**320**。
- en: Although the stage size implies it, the AIR for iOS settings also need to be
    changed to reflect our choice of aspect ratio. Select **File** | **AIR for iOS
    Settings** from the drop-down menu.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虽然舞台大小暗示了这一点，但AIR for iOS设置也需要更改以反映我们选择的宽高比。从下拉菜单中选择**文件** | **AIR for iOS设置**。
- en: Ensure the **General** tab is selected.
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保已选中**常规**选项卡。
- en: Select **Landscape** from the **Aspect ratio** drop-down box.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**宽高比**下拉框中选择**横向**。
- en: Click on **OK** to close the panel.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**以关闭面板。
- en: Finally, drag the bitmap image from the library onto the stage and position
    it at the top-left corner of the screen.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，将库中的位图图像拖动到舞台上，并将其放置在屏幕的左上角。
- en: Save your FLA and publish it.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的FLA文件并发布它。
- en: Install the app on your device and launch it.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的设备上安装应用程序并启动它。
- en: In order to correctly view the fire truck image, you will be forced to turn
    your device on its side, matching the device's physical orientation with that
    of the stage.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 为了正确查看消防车图像，您将不得不将设备侧放，使设备的物理方向与舞台的方向相匹配。
- en: How it works...
  id: totrans-228
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'You can have your application start in one of two aspect ratios: Portrait or
    Landscape. This is done from the **General** tab within the AIR for iOS Settings
    panel. Simply make a selection from the **Aspect ratio** drop-down box.'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 您的应用程序可以从两种宽高比之一开始：纵向或横向。这是通过在AIR for iOS设置面板中的**常规**选项卡内从**宽高比**下拉框中进行选择来完成的。
- en: In addition, you will need to set the stage to match that of your chosen aspect
    ratio. This will allow you to properly lay out any content when designing your
    app.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您还需要将舞台设置为与所选宽高比相匹配。这将允许您在设计应用程序时正确布局任何内容。
- en: Note
  id: totrans-231
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: When you create a new AIR for iOS document, a portrait aspect ratio is set by
    default.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 当您创建一个新的AIR for iOS文档时，默认设置为纵向宽高比。
- en: There's more...
  id: totrans-233
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: There is an additional option available when setting the default aspect ratio
    from Flash Professional CS5.5.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 当从Flash Professional CS5.5设置默认宽高比时，还有一个额外的选项可用。
- en: Auto aspect ratio
  id: totrans-235
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自动宽高比
- en: From AIR 2.6 onwards, your app can be instructed to select, when launched, the
    aspect ratio that matches the device's current orientation. To accommodate this,
    a third option named **Auto** is provided from the **Aspect Ratio** drop-down
    box.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 从AIR 2.6开始，您的应用程序可以在启动时被指示选择与设备当前方向匹配的宽高比。为了适应这一点，从**宽高比**下拉框中提供了一个名为**自动**的第三个选项。
- en: This feature can only be enabled in conjunction with auto-orientation, which
    is covered in the next recipe.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 此功能只能与自动方向一起启用，这在下一道菜谱中有所介绍。
- en: See also
  id: totrans-238
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS常规设置，[第2章](ch02.html "第2章。使用Flash构建iOS应用程序")*'
- en: '*Enabling auto-orientation*'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*启用自动方向*'
- en: Enabling auto-orientation
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启用自动方向
- en: The user can change the device's orientation in real space at any moment and
    will likely expect the on-screen content to reflect this. AIR for iOS can detect
    these changes and automatically rotate the stage to match the device's new physical
    orientation.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以在任何时刻在真实空间中更改设备的方向，并且可能会期望屏幕上的内容能够反映这一点。AIR for iOS可以检测这些变化并自动旋转舞台以匹配设备的新物理方向。
- en: This recipe will show you how to enable auto-orientation.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 本菜谱将向您展示如何启用自动方向。
- en: Getting ready
  id: totrans-244
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: If you have completed the *Setting the default aspect ratio* recipe, then you
    can continue to work from its FLA. Alternatively, from the book's accompanying
    source code, open `chapter8\recipe5\recipe.fla` into Flash Professional and work
    from there.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经完成了*设置默认宽高比*菜谱，那么您可以从其FLA继续工作。或者，从本书的配套源代码中，在Flash Professional中打开`chapter8\recipe5\recipe.fla`，然后从那里开始工作。
- en: In either case, you will find a bitmap image of a fire truck sitting on the
    stage. The stage itself is sized to fit a landscape aspect ratio and the FLA's
    AIR for iOS settings reflect this.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何情况下，您都会在舞台上看到一个消防车的位图图像。舞台本身的大小是为了适应横向宽高比，FLA的AIR for iOS设置反映了这一点。
- en: How to do it...
  id: totrans-247
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Enable auto-orientation by performing the following steps:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 通过执行以下步骤启用自动方向：
- en: Open the AIR for iOS Settings panel by selecting **File** | **AIR for iOS Settings**.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择**文件** | **AIR for iOS设置**来打开AIR for iOS设置面板。
- en: Ensure the **General** tab is selected.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保已选中**常规**选项卡。
- en: Set the **Aspect ratio** drop-down box to **Portrait**.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**宽高比**下拉框设置为**纵向**。
- en: Check on the **Auto orientation** checkbox.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选中**自动方向**复选框。
- en: Click on the **OK** button to close the panel.
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**按钮以关闭面板。
- en: Save your FLA and publish it.
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的FLA文件并发布它。
- en: Deploy the app to your device and launch it.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将应用程序部署到您的设备并启动它。
- en: As the device's physical orientation changes, the stage will be automatically
    rotated to match the change.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 当设备的物理方向改变时，舞台将自动旋转以匹配这一变化。
- en: How it works...
  id: totrans-257
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'When auto-orientation is enabled, the stage will attempt to match the device''s
    current orientation each time it is rotated. Four orientations are supported on
    iOS:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 当自动旋转启用时，每次旋转时舞台都会尝试匹配设备的当前方向。iOS支持四种方向：
- en: 'Default: The default portrait orientation for iOS devices'
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认：iOS设备的默认纵向方向
- en: 'Rotated left: Rotated 90 degrees clockwise'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向左旋转：顺时针旋转90度
- en: 'Rotated right: Rotated 90 degrees counter-clockwise'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向右旋转：逆时针旋转90度
- en: 'Upside down: Rotated 180 degrees'
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 颠倒：旋转180度
- en: Auto-orientation is convenient as it prevents you from having to manually rotate
    objects on the display list yourself. Instead, this task will be performed on
    your behalf.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 自动旋转很方便，因为它可以防止你不得不手动旋转显示列表中的对象。相反，这项任务将代表你完成。
- en: During auto-orientation, the stage's scale mode and its current alignment setting
    will be adhered to.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 在自动旋转期间，舞台的缩放模式和当前的对其设置将被遵守。
- en: Also, if you decide to support both portrait and landscape aspect ratios, then
    Apple recommends that your app be launched in portrait mode.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果你决定支持纵向和横向的宽高比，那么苹果建议你的应用以纵向模式启动。
- en: There's more...
  id: totrans-266
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多...
- en: It is likely that you will want some control over how the content on the stage
    is handled during auto-orientation.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能你希望对舞台上的内容在自动旋转时的处理方式有一定的控制。
- en: Checking for orientation support
  id: totrans-268
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检查方向支持
- en: Although Flash provides support for device orientation changes across all iOS
    devices, when writing cross-platform code, you may want to confirm support by
    checking that the stage's `supportsOrientationChange` property returns `true`.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然Flash为所有iOS设备提供了对设备方向变化的支持，但在编写跨平台代码时，你可能想通过检查舞台的`supportsOrientationChange`属性返回`true`来确认支持。
- en: Programmatically setting auto-orientation
  id: totrans-270
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通过编程设置自动旋转
- en: In addition to using the AIR for iOS Settings panel, you can activate and deactivate
    auto-orientation programmatically by setting the `Stage.autoOrients` property.
    The property's initial value is derived from the value of the **Auto Orientation**
    field from the AIR for iOS Settings panel.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用AIR for iOS设置面板外，你还可以通过设置`Stage.autoOrients`属性来程序化地激活和停用自动旋转。该属性的初始值是从AIR
    for iOS设置面板中的**自动旋转**字段派生的。
- en: 'The following ActionScript activates auto-orientation:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 以下ActionScript激活了自动旋转：
- en: '[PRE12]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Stage scale mode
  id: totrans-274
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 舞台缩放模式
- en: You can specify how the stage is scaled when the device's physical orientation
    changes. This is achieved by setting the `Stage.scaleMode` property to one of
    four constants provided by the `flash.display.StageScaleMode` class.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以指定当设备的物理方向改变时舞台的缩放方式。这是通过将`Stage.scaleMode`属性设置为`flash.display.StageScaleMode`类提供的四个常量之一来实现的。
- en: The default mode is `StageScaleMode.SHOW_ALL` and ensures that the entire stage
    is made visible within the screen while maintaining its aspect ratio. If you don't
    want resizing of the stage's content to take place during changes in orientation,
    then set the scale mode to `NO_SCALE`. This specifies that the size of the content
    on the stage is to be fixed.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 默认模式是`StageScaleMode.SHOW_ALL`，确保整个舞台在屏幕内可见，同时保持其宽高比。如果你不希望在方向变化时调整舞台内容的尺寸，则将缩放模式设置为`NO_SCALE`。这指定了舞台内容的大小将保持不变。
- en: More information regarding scale modes can be obtained from Adobe Community
    Help.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 关于缩放模式的更多信息可以在Adobe社区帮助中找到。
- en: Stage alignment
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 舞台对齐
- en: How the stage content is aligned when the device's physical orientation changes
    can also be specified. Simply set the `Stage.align` property to one of the constants
    defined by `flash.display.StageAlign`.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 当设备的物理方向改变时，舞台内容对齐的方式也可以指定。只需将`Stage.align`属性设置为`flash.display.StageAlign`定义的常量之一即可。
- en: 'The stage''s content will align to the center of the screen by default, however,
    there are eight constants that can be used to align the stage''s content around
    the edges of the screen. For example, the following ActionScript will align the
    stage to the top left:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 舞台的内容默认将居中显示在屏幕上，然而，有八个常量可以用来将舞台的内容对齐到屏幕的边缘。例如，以下ActionScript将对舞台进行左上角对齐：
- en: '[PRE13]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: More information regarding stage alignment can be found on Adobe Community Help.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 关于舞台对齐的更多信息可以在Adobe社区帮助中找到。
- en: See also
  id: totrans-283
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相关内容
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS常规设置，[第2章](ch02.html "第2章。使用Flash构建iOS应用")*'
- en: '*Listening for orientation changes*'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*监听方向变化*'
- en: Listening for orientation changes
  id: totrans-286
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监听方向变化
- en: The accelerometer present in iOS devices can detect changes in physical orientation.
    AIR provides APIs for detecting these changes and determining the device's actual
    orientation in real space.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: iOS设备中存在的加速度计可以检测物理方向的变化。AIR提供了API来检测这些变化并确定设备在真实空间中的实际方向。
- en: Let us see how this is done.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看这是如何实现的。
- en: Getting ready
  id: totrans-289
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Start by opening `chapter8\recipe6\recipe.fla` from the book's accompanying
    code bundle.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，从书籍附带代码包中打开`chapter8\recipe6\recipe.fla`。
- en: A dynamic text field named `output` can be found on the stage. We will use this
    text field to report any orientation changes experienced by the device.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 在舞台上可以找到一个名为`output`的动态文本字段。我们将使用此文本字段来报告设备经历的方向变化。
- en: How to do it...
  id: totrans-292
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何实现...
- en: 'Perform the following steps to listen for changes in orientation:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以监听方向变化：
- en: Select **File** | **AIR for iOS Settings** from Flash Professional's drop-down
    menu.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Flash Professional的下拉菜单中选择**文件** | **AIR for iOS设置**。
- en: From the **General** tab, check on the **Auto orientation** checkbox; then click
    on the panel's **OK** button.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**常规**选项卡中，勾选**自动旋转**复选框；然后点击面板的**确定**按钮。
- en: Create a document class and name it `Main`.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个文档类，并将其命名为`Main`。
- en: 'Add the following import statements:'
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下导入语句：
- en: '[PRE14]'
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Within the constructor, set up the stage, and listen for the `ORIENTATION_CHANGING`
    and `ORIENTATION_CHANGE` events being dispatched:'
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在构造函数中，设置舞台，并监听正在分发的`ORIENTATION_CHANGING`和`ORIENTATION_CHANGE`事件：
- en: '[PRE15]'
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Write a handler for the `ORIENTATION_CHANGING` event:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为`ORIENTATION_CHANGING`事件编写一个处理器：
- en: '[PRE16]'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Finally, add a handler for the `ORIENTATION_CHANGE` event:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，添加对`ORIENTATION_CHANGE`事件的处理器：
- en: '[PRE17]'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Save the class and name it `Main.as` when prompted. Also, save your FLA.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当提示时，保存类并将其命名为`Main.as`。同时，保存您的FLA文件。
- en: Publish the app and test it on your device.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布应用程序并在您的设备上测试它。
- en: Experiment by rotating the device. As changes in orientation are detected they
    will be reported on-screen.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 通过旋转设备进行实验。一旦检测到方向变化，它们将在屏幕上显示。
- en: How it works...
  id: totrans-308
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Changes in orientation can be detected by listening for the following two events
    from the stage:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过监听舞台上的以下两个事件来检测方向变化：
- en: '`StageOrientationEvent.ORIENTATION_CHANGING`'
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`StageOrientationEvent.ORIENTATION_CHANGING`'
- en: '`StageOrientationEvent.ORIENTATION_CHANGE`'
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`StageOrientationEvent.ORIENTATION_CHANGE`'
- en: The `ORIENTATION_CHANGING` event is dispatched as the device's accelerometer
    detects that an orientation change is taking place and before auto-orientation's
    default behavior occurs. The `ORIENTATION_CHANGE` event is dispatched after any
    default behavior has taken place.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 当设备的加速度计检测到正在发生方向变化时，会分发生`ORIENTATION_CHANGING`事件，并在自动旋转的默认行为发生之前。`ORIENTATION_CHANGE`事件在所有默认行为发生后分发生。
- en: Your app receives the `ORIENTATION_CHANGING` and `ORIENTATION_CHANGE` events
    only if auto-orientation is enabled from the AIR for iOS Settings panel or through
    ActionScript.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 只有当从AIR for iOS设置面板或通过ActionScript启用自动旋转时，您的应用程序才会接收到`ORIENTATION_CHANGING`和`ORIENTATION_CHANGE`事件。
- en: You can retrieve information regarding the change in orientation by querying
    the event's `beforeOrientation` and `afterOrientation` properties. Both properties
    are read-only and will be set to one of the following constants from `flash.display.StageOrientation:`
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过查询事件对象的`beforeOrientation`和`afterOrientation`属性来检索有关方向变化的信息。这两个属性是只读的，并将设置为`flash.display.StageOrientation`中的以下常量之一：
- en: '`DEFAULT:` The default portrait orientation for iOS devices.'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DEFAULT:` iOS设备的默认纵向方向。'
- en: '`ROTATED_LEFT:` Rotated 90 degrees clockwise.'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ROTATED_LEFT:` 顺时针旋转90度。'
- en: '`ROTATED_RIGHT:` Rotated 90 degrees counter-clockwise.'
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ROTATED_RIGHT:` 逆时针旋转90度。'
- en: '`UPSIDE_DOWN:` Rotated 180 degrees.'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`UPSIDE_DOWN:` 旋转了180度。'
- en: When handling an `ORIENTATION_CHANGING` event, `beforeOrientation` will hold
    the device's current orientation while `afterOrientation` will specify the target
    orientation that the device is being rotated towards.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 当处理`ORIENTATION_CHANGING`事件时，`beforeOrientation`将保持设备的当前方向，而`afterOrientation`将指定设备旋转到的目标方向。
- en: For the `ORIENTATION_CHANGE` event, use `beforeOrientation` to find out the
    device's previous orientation and `afterOrientation` to determine the current
    orientation.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`ORIENTATION_CHANGE`事件，使用`beforeOrientation`来获取设备的前一个方向，并使用`afterOrientation`来确定当前方向。
- en: You can see both these properties being used within our document class' `orientationChanging()`
    and `orientationChanged()` event handlers. Their values are obtained and written
    to the `output` text field.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在我们的文档类的`orientationChanging()`和`orientationChanged()`事件处理器中看到这两个属性的使用。它们的值被获取并写入`output`文本字段。
- en: There's more...
  id: totrans-322
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: It is also possible to determine the device's orientation without using event
    listeners.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以在不使用事件监听器的情况下确定设备的方向。
- en: Determining device orientation
  id: totrans-324
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 确定设备方向
- en: You can also determine the device's physical orientation by accessing the `deviceOrientation`
    property of the `Stage` class. This property is read-only and will return one
    of the constants defined in the `StageOrientation` class.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过访问`Stage`类的`deviceOrientation`属性来确定设备的物理方向。此属性为只读，并将返回`StageOrientation`类中定义的其中一个常量。
- en: In addition to the four constants that we have already covered, `deviceOrientation`
    can also return `StageOrientation.UNKNOWN`. The `deviceOrientation` property does
    not contain the starting orientation of the device and is, therefore, set to `UNKNOWN`
    until the first change in physical orientation takes place.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 除了我们已讨论的四个常量之外，`deviceOrientation`还可以返回`StageOrientation.UNKNOWN`。`deviceOrientation`属性不包含设备的起始方向，因此，在第一次发生物理方向变化之前，它被设置为`UNKNOWN`。
- en: See also
  id: totrans-327
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS常规设置，[第2章](ch02.html "第2章。使用Flash构建iOS应用程序")*'
- en: '*Responding to orientation changes*'
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*响应方向变化*'
- en: '*Enabling auto-orientation*'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*启用自动方向调整*'
- en: Responding to orientation changes
  id: totrans-331
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 响应方向变化
- en: It is likely that you will want to update your app's on-screen content to reflect
    a change in the device's physical orientation. While auto-orientation in conjunction
    with the stage's default alignment and scale mode will attempt this on your behalf,
    you may want to handle the layout yourself.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能希望更新应用程序的屏幕内容以反映设备物理方向的变化。虽然自动方向调整与舞台的默认对齐和缩放模式将代表您尝试这样做，但您可能希望自行处理布局。
- en: This recipe will show you how to do that.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱将向您展示如何做到这一点。
- en: Getting ready
  id: totrans-334
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: An FLA has been provided as a starting point. From the book's accompanying code
    bundle, open `chapter8\recipe7\recipe.fla` within Flash Professional.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 已提供一个FLA作为起点。从本书的配套代码包中，在Flash Professional中打开`chapter8\recipe7\recipe.fla`。
- en: You will find two movie clips sitting on the stage. The first movie clip is
    an image of an arrow pointing upwards and has been created to fit the screen's
    dimensions using a portrait orientation. The second shows the same arrow but this
    time the image's dimensions fit the screen's landscape orientations.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 您将在舞台上找到两个电影剪辑。第一个电影剪辑是一个向上指的箭头的图像，它已被创建以适应屏幕的尺寸，并使用纵向方向。第二个显示了相同的箭头，但这次图像的尺寸适合屏幕的横向方向。
- en: Both movie clips are positioned at the top-left corner of the stage and have
    instance names of `portrait` and `landscape` respectively.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 两个电影剪辑都位于舞台的左上角，分别具有实例名称`portrait`和`landscape`。
- en: We will write some code to ensure that the user sees an arrow pointing upwards
    no matter which of the four possible physical orientations they rotate the device
    to. We will do this by showing the appropriate movie clip for the current device
    orientation.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将编写一些代码，以确保无论用户将设备旋转到四个可能的物理方向中的哪一个，都能看到向上指的箭头。我们将通过显示适合当前设备方向的适当电影剪辑来实现这一点。
- en: The stage dimensions are set for an initial portrait aspect ratio and this is
    already reflected in the AIR for iOS settings.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 舞台尺寸设置为初始的纵向宽高比，这已在AIR for iOS设置中反映出来。
- en: How to do it...
  id: totrans-340
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'We will make a quick change to the AIR for iOS settings before moving onto
    the ActionScript:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 在转向ActionScript之前，我们将快速更改AIR for iOS设置。
- en: Select **File** | **AIR for iOS Settings** from Flash Professional's drop-down
    menu.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Flash Professional的下拉菜单中选择**文件** | **AIR for iOS设置**。
- en: From the **General** tab, check the **Auto orientation** checkbox; then click
    on the panel's **OK** button.
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**常规**选项卡中，勾选**自动方向调整**复选框；然后单击面板的**确定**按钮。
- en: Create a document class and name it `Main`.
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个文档类并命名为`Main`。
- en: 'Add the following import statements to the class:'
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下导入语句添加到类中：
- en: '[PRE18]'
  id: totrans-346
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Within the constructor, set up the stage and listen for the `ORIENTATION_CHANGING`
    event:'
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在构造函数中设置舞台并监听`ORIENTATION_CHANGING`事件：
- en: '[PRE19]'
  id: totrans-348
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Finally, add a handler for the `ORIENTATION_CHANGING` event:'
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，添加一个处理`ORIENTATION_CHANGING`事件的处理器：
- en: '[PRE20]'
  id: totrans-350
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Save the class file as `Main.as`. Also move to your FLA and save it too.
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将类文件保存为`Main.as`。也移动到您的FLA并保存它。
- en: Publish the FLA and deploy the IPA to your device.
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布FLA并将IPA部署到您的设备上。
- en: Test the app by rotating your device. The screen will update to reflect any
    change in orientation.
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过旋转您的设备来测试应用程序。屏幕将更新以反映任何方向变化。
- en: How it works...
  id: totrans-354
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Rather than letting the stage's current on-screen content automatically resize
    when the device's orientation changes, we instead opted to display a different
    view.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不是让舞台当前屏幕内容在设备方向改变时自动调整大小，而是选择显示不同的视图。
- en: The first step towards accomplishing this is to set the stage's scale mode and
    alignment.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 实现这一点的第一步是设置舞台的缩放模式和定位。
- en: Setting the scale mode to `NO_SCALE` prevents your content from being scaled
    to fit any changes in stage size. This ensures that the `portrait` and `landscape`
    movie clips maintain their defined sizes during orientation changes.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 将缩放模式设置为`NO_SCALE`可以防止您的内容缩放以适应舞台大小的任何变化。这确保了在方向改变期间，`portrait`和`landscape`电影剪辑保持其定义的大小。
- en: Setting the alignment to `TOP_LEFT` forces all content to be positioned relative
    to the top-left corner of the screen. Essentially both our movie clips, which
    are positioned at (0,0) on the stage will always start from the screen's top-left
    corner no matter what orientation the device is in.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 将对齐方式设置为`TOP_LEFT`会强制所有内容相对于屏幕的左上角进行定位。本质上，我们位于舞台(0,0)位置的两个电影剪辑将始终从屏幕的左上角开始，无论设备处于何种方向。
- en: The next step is to make the appropriate movie clip visible in response to a
    change in orientation. This is done by handling the `ORIENTATION_CHANGING` event
    and selecting a movie clip depending on the value of the `afterOrientation` property.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是在方向改变时使相应的电影剪辑可见。这是通过处理`ORIENTATION_CHANGING`事件并根据`afterOrientation`属性的值选择电影剪辑来实现的。
- en: If the device is being rotated to one of the two portrait orientations `(DEFAULT`
    or `UPSIDE_DOWN)`, then the `portrait` movie clip is made visible and `landscape`
    is hidden. For either of the two landscape orientations `(ROTATED_LEFT` or `ROTATED_RIGHT)`
    the `landscape` movie clip is shown and `portrait` is hidden from view.
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 如果设备正在旋转到两种竖屏方向之一（`DEFAULT`或`UPSIDE_DOWN`），则`portrait`电影剪辑将变为可见，而`landscape`将隐藏。对于两种横屏方向（`ROTATED_LEFT`或`ROTATED_RIGHT`），将显示`landscape`电影剪辑，而`portrait`将不可见。
- en: You may be wondering why we only have two movie clips for four possible orientations.
    Won't `portrait` and `landscape` appear upside-down for the `UPSIDE_DOWN` and
    `ROTATED_LEFT` orientations? Well they are for a brief moment, but remember that
    one of the benefits of auto-orientation is that it rotates your on-screen content
    ensuring that it is shown the right way up. Without auto-orientation, you would
    have to rotate all the items on the display list manually.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能想知道为什么我们只有两个电影剪辑用于四种可能的屏幕方向。`portrait`和`landscape`在`UPSIDE_DOWN`和`ROTATED_LEFT`方向上不会颠倒吗？好吧，它们确实会短暂颠倒，但请记住，自动方向调整的一个好处是它会旋转您的屏幕内容，确保它以正确的方向显示。如果没有自动方向调整，您将不得不手动旋转显示列表上的所有项目。
- en: There's more...
  id: totrans-362
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Here are some more details to help complete your knowledge of screen orientation.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些更多细节，可以帮助您完善对屏幕方向的知识。
- en: The stage color
  id: totrans-364
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 舞台颜色
- en: Your choice of stage color is important as areas outside the stage's dimensions
    will be visible while auto-orientation is taking place. Select a stage color that
    will compliment your content. For example, this recipe used black as it matched
    the background color of both movie clips.
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 您选择的舞台颜色很重要，因为在自动方向调整期间，舞台尺寸之外的区域将是可见的。选择一种能够衬托您内容的舞台颜色。例如，这个菜谱使用了黑色，因为它与两个电影剪辑的背景颜色相匹配。
- en: Change the stage color to white and re-deploy the app to your device. During
    orientation changes, you will now be able to see just how much area is actually
    visible.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 将舞台颜色改为白色，并将应用重新部署到您的设备上。在方向改变期间，您现在将能够看到实际上有多少区域是可见的。
- en: Stage orientation
  id: totrans-367
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 舞台方向
- en: Although they often match, the actual orientation of the device in real space
    is independent of the content viewed on screen. For example, the user could be
    holding the device in landscape orientation while the app's content is still being
    rendered in portrait.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管它们通常匹配，但设备在真实空间中的实际方向与屏幕上查看的内容是独立的。例如，用户可能手持设备处于横屏方向，而应用的内容仍在以竖屏方式渲染。
- en: While the `Stage.deviceOrientation` property is available to determine the device's
    physical orientation, you can use the `Stage.orientation` property to retrieve
    the current orientation of the stage in relation to the device.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然`Stage.deviceOrientation`属性可用于确定设备的物理方向，但您可以使用`Stage.orientation`属性来检索舞台相对于设备当前的方向。
- en: It is also possible to change the stage's orientation independently of the device's.
    This is achieved by calling `Stage.setOrientation()` and passing to it one of
    the constants defined in the `flash.display.StageOrientation` class. You can respond
    to this orientation change by listening for and responding to the `ORIENTATION_CHANGING`
    and `ORIENTATION_CHANGE` events.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 还可以独立于设备更改舞台的方向。这是通过调用`Stage.setOrientation()`并传递`flash.display.StageOrientation`类中定义的其中一个常量来实现的。您可以通过监听并响应`ORIENTATION_CHANGING`和`ORIENTATION_CHANGE`事件来对此方向更改做出响应。
- en: Preventing auto-orientation
  id: totrans-371
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 防止自动旋转
- en: Auto-orientation takes place immediately after the `ORIENTATION_CHANGING` event
    but before `ORIENTATION_CHANGE` is dispatched. It is, therefore, possible to prevent
    auto-orientation for a particular orientation (or all of them) by calling `preventDefault()`
    on the `ORIENTATION_CHANGING` event's object.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 自动旋转发生在`ORIENTATION_CHANGING`事件之后，但在`ORIENTATION_CHANGE`事件分发之前。因此，可以通过在`ORIENTATION_CHANGING`事件的对象上调用`preventDefault()`来防止特定方向（或所有方向）的自动旋转。
- en: 'For example, the following modification to our `orientationChanging()` handler
    will prevent the stage being orientated when the device is rotated to either of
    the two landscape orientations:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，以下对`orientationChanging()`处理器的修改将防止设备旋转到两种横屏方向之一时舞台被定位：
- en: '[PRE21]'
  id: totrans-374
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: You can also use `preventDefault()` to block auto-orientation in order to completely
    manage the rotation and positioning of the stage's content yourself.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用`preventDefault()`来阻止自动旋转，以便完全自行管理舞台内容的旋转和定位。
- en: See also
  id: totrans-376
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '*AIR for iOS general settings, [Chapter 2](ch02.html "Chapter 2. Building iOS
    Apps Using Flash")*'
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*AIR for iOS通用设置，[第2章](ch02.html "第2章。使用Flash构建iOS应用程序")*'
- en: '*Listening for orientation changes*'
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*监听方向更改*'
- en: '*Enabling auto-orientation*'
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*启用自动旋转*'
