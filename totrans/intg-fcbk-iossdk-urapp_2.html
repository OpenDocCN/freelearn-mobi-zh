<html><head></head><body><h1 id="e-KGtD">Chapter 2. Creating a New iOS Social Project</h1>
<p id="e-Xn8m">With this chapter, we start our coding journey. We are going to build our social application from the group up.</p>
<p id="e-z4wl">In this chapter we will learn about:</p>
<ul id="e-gYoT">
<li id="e-sfLC">
<strong>Creating a Facebook App ID</strong>: It is a key used with our APIs to communicate with the Facebook Platform.</li>
<li id="e-Uy1D">
<strong>Downloading the Facebook SDK</strong>: iOS SDK can be downloaded from two different channels. We will look into both of them.</li>
<li id="e-NpAQ">
<strong>Creating a new XCode Project</strong>: I will give a brief introduction on how to create a new XCode project and description of the IDE environment.</li>
<li id="e-rbbD">
<strong>Importing Facebook iOS SDK into our XCode project</strong>: I will go through the import of the Facebook SDK into our XCode project step-by-step.</li>
<li id="e-HPhl">
<strong>Getting familiar with Storyboard to build a better interface</strong>: This is a brief introduction on the Apple tool to build our application interface.</li>
</ul>
<p id="e-Wku2">Before starting any job, we should always check whether we have the right tools. In order to start building our application, we need two things:</p>
<ul id="e-ly4E">
<li id="e-DcDi">
<strong>Mac OS machine</strong>: XCode runs only on Macs (officially)</li>
<li id="e-o2Au">
<strong>XCode</strong>: It is the editor used to build our social application</li>
</ul>
<p id="e-AvWi">The target of this book is to explain how to integrate the iOS Facebook SDK into our application. Using XCode and Objective-C concepts are outside the scope of this book. This chapter will give a quick introduction on XCode because we assume readers are already familiar with the Apple development environment and their features. We are going to build a social application for book tracking.</p>
<h1 id="e-gQu6">Creating a Facebook App ID</h1>
<p id="e-dZxa">In order to communicate with the Facebook Platform using their SDK, we need an identifier for our application. This identifier, also known as Facebook App ID, will give access to the Platform; at the same time, we will be able to collect a lot of information about its usage, impressions, and ads.</p>
<p id="e-pxWm">To obtain a Facebook App ID, we need a Facebook account. If you don't have one, you can create a Facebook account via the following page at <a href="https://www.facebook.com">https://www.facebook.com</a>:</p>
<img data-width="415" data-height="500" src="VDlWgBty.jpg"/><p id="e-mRt1">The previous screenshot shows the new Facebook account sign up form. Fill out all the fields and you will be able to access the Facebook Developer Portal.</p>
<p id="e-qfkT">Once we are logged into Facebook, we need to visit the Developer Portal. You can find it at <a href="https://developers.facebook.com/">https://developers.facebook.com/</a>. I already mentioned the important role of Developer Portal in developing our social application.</p>
<img data-width="800" data-height="563" src="eAetWvJY.jpg"/><p id="e-CHt7">The previous screenshot shows the Facebook Developer Portal. The main section, the top part, is dedicated to the current SDKs. On the top-blue bar, click on the <strong>Apps</strong> link, and it will redirect us to the Facebook App Dashboard.</p>
<img data-width="800" data-height="409" src="WjqVQLjn.jpg"/><p id="e-s7T4">The previous screenshot shows the Facebook App Dashboard. To the left, we have a list of apps; on the center of the page, we can see the details of the currently selected app from our list. The page shows the application's setting and analytics (<strong>Insights</strong>).</p>
<p id="e-v6ju">In order to create a new Facebook App ID, you can click on <strong>Create New App</strong> on the top-right part of the App Dashboard.</p>
<img data-width="700" data-height="226" src="uhLazoAP.jpg"/><p id="e-BgZD">The previous screenshot shows the first step in order to create a Facebook App ID. When providing the <strong>App Name</strong>, be sure the name does not already exist or violate any copyright laws; otherwise, Facebook will remove your app. <strong>App Namespace</strong> is something that we need if we want to define custom objects and/or actions in the Open Graph structure. The <strong>App Namespace</strong> topic is not part of this book. Web hosting is really useful when creating a social web application. Facebook, in partnership with other providers, can create a web hosting for us if needed. This part is not going to be discussed in this book; therefore, do not check this option for your application.</p>
<p id="e-jCrg">Once all the information is provided, we can move on to the next step. Please fill out the form, and move forward to the next one.</p>
<img data-width="800" data-height="345" src="Q4qJ03IT.jpg"/><p id="e-L2X7">On the top of the page, we can see both <strong>App ID</strong> and <strong>App Secret</strong>. These are the most important pieces of information about our new social applicaton. <strong>App ID</strong> is a piece of information that we can share unlike <strong>App Secret</strong>.</p>
<p id="e-JujN">At the center of our new Facebook Application Page, we have basic information fields. Do not worry about <strong>Namespace</strong>, <strong>App Domains</strong>, and <strong>Hosting URL</strong>; these fields are for web applications. <strong>Sandbox Mode</strong> only allows developers to use the current application. Developers are specified through the <strong>Developer Roles</strong> link on the left side bar.</p>
<p id="e-eVbb">Moving down, select the type of app. For our goal, select <strong>Native iOS App</strong>. You can select multiple types and create multiplatform social applications.</p>
<p id="e-Oiic">Once you have checked <strong>Native iOS App</strong>, you will be prompted with the following form:</p>
<img data-width="650" data-height="207" src="dNN1zlqo.jpg"/><p id="e-awyK">The only field we need to provide for now is the <strong>Bundle ID</strong>. The <strong>Bundle ID</strong> is something related to XCode settings. Be sure that the Facebook <strong>Bundle ID</strong> will match our <strong>XCode Social App Bundle Identifier</strong>. The format for the bundle identifier is always something like <code>com.MyCompany.MyApp</code>.</p>
<p id="e-TzL5"><strong>iPhone</strong>/<strong>iPad App Store IDs</strong> are the App Store identifiers of your application if you have published your app in the App Store. If you didn't provide any of them after you saved your changes, you will receive a warning message; however, don't worry, our new <strong>App ID</strong> is now ready to be used.</p>
<p id="e-iEmK">Save your changes and get ready to start our developing journey.</p>

<h1 id="e-Tpa7">Downloading the Facebook iOS SDK</h1>
<p id="e-sBmr">The iOS Facebook SDK can be downloaded through two different channels:</p>
<ul id="e-faTt">
<li id="e-sreX">
<strong>Facebook Developer Portal</strong>: For downloading the installation package</li>
<li id="e-szS2">
<strong>GitHub</strong>: For downloading the SDK source code</li>
</ul>
<p id="e-Lc5z">Using Facebook Developer Portal, we can download the iOS SDK as the installation package. Visit <a href="https://developers.facebook.com/ios/">https://developers.facebook.com/ios/</a> as shown in the following screenshot and click on <strong>Download the SDK</strong> to download the installation package.</p>
<img data-width="700" data-height="413" src="zLJTuTRO.jpg"/><p id="e-AEWe">The package, once installed, will create a new <strong>FacebookSDK</strong> folder within our <code>Documents</code> folder.</p>
<img data-width="500" data-height="186" src="tIUBG5QS.jpg"/><p id="e-cXgp">The previous screenshot shows the content of the iOS SDK installation package. Here, we can see four elements:</p>
<ul id="e-Azm4">
<li id="e-JD4M">
<strong>FacebookSDK.framework</strong>: This is the framework that we will import in our XCode social project</li>
<li id="e-HLVw">
<strong>LICENSE</strong>: It contains information about licensing and usage of the framework</li>
<li id="e-geMU">
<strong>README</strong>: It contains all the necessary information about the framework installation</li>
<li id="e-Lj1Q">
<strong>Samples</strong>: It contains a useful set of sample projects that uses the iOS framework's features</li>
</ul>
<p id="e-MCAS">With the installation package, we only have the compiled files to use, with no original source code.</p>
<p id="e-AHOD">It is possible to download the source code using the GitHub channel. To clone <code>git repo</code>, you will need a Git client, either Terminal or GUI. The iOS SDK framework <code>git repo</code> is located at <a href="https://github.com/facebook/facebook-ios-sdk.git">https://github.com/facebook/facebook-ios-sdk.git</a>. I prefer the Terminal client that I am using in the following command:</p>
<pre id="e-kIqy">git clone https://github.com/facebook/facebook-ios-sdk.git</pre>
<p id="e-hfyX">After we have cloned the repo, the target folder will look as the following screenshot:</p>
<img data-width="500" data-height="265" src="spAyo5lX.jpg"/><p id="e-dffA">The previous picture shows the content of the <strong>iOS SDK GitHub repo</strong>. Two new elements are present in this repo: <strong>src</strong> and <strong>scripts</strong>. <strong>src</strong> contains the framework source code that needs to be compiled. The <strong>scripts</strong> folder has all the necessary scripts needed to compile the source code.</p>
<p id="e-St5c">Using the GitHub version allows us to keep the framework in our social application always up-to-date, but for the scope of this book, we will be using the installation package.</p>

<h1 id="e-UkXf">Creating a new XCode project</h1>
<p id="e-WyEO">We created a Facebook App ID and downloaded the iOS Facebook SDK. It's time for us to start our social application using XCode.</p>
<ol id="e-RNKT">
<li id="e-DvHf">The application will prompt the welcome dialog if <strong>Show this window when XCode launches</strong> is enabled.<img data-width="700" data-height="456" src="vIhM2pXb.jpg"/>
</li>
<li id="e-gmCV">Choose the <strong>Create a new XCode project</strong> option. If the welcome dialog is disabled, navigate to <strong>File</strong> | <strong>New</strong> | <strong>Project…</strong>.<img data-width="492" data-height="500" src="V0Ysg5Oh.jpg"/>
</li>
<li id="e-JGbI">Choosing the type of project to work with is the next step as shown in the following screenshot:<img data-width="700" data-height="473" src="hccaL07b.jpg"/>
</li>
<li id="e-XsV2">The bar to the left defines whether the project is targeting a desktop or a mobile device. Navigate to <strong>iOS</strong> | <strong>Application</strong> and choose the <strong>Single View Application</strong> project type.<img data-width="700" data-height="474" src="fSaxx9pR.jpg"/>
</li>
</ol>
<p id="e-DA3S">The previous screenshot shows our new project's details. Provide the following information for your new project:</p>
<ul id="e-Cjx3">
<li id="e-hIEc">
<strong>Product Name</strong>: This is the name of our application</li>
<li id="e-ULTm">
<strong>Organization Name</strong>: I will strongly recommend filling out this part even if you don't belong to an organization because this field will be part of our <strong>Bundle Identifier</strong>
</li>
<li id="e-YiqQ">
<strong>Company Identifier</strong>: It is still optional, but we should definitely fill it out to respect the best-practice format for <strong>Bundle Identifier</strong>
</li>
<li id="e-I14d">
<strong>Class Prefix</strong>: This prefix will be prepended to every class we are going to create in our project</li>
<li id="e-H1Mc">
<strong>Devices</strong>: We can select the target device of our application; in this case, it is an iPhone but we could also have chosen iPad or Universal</li>
<li id="e-Q4CI">
<strong>Use Storyboards</strong>: We are going to use storyboards to create the user interface for our application</li>
<li id="e-xsxA">
<strong>Use Automatic Reference Counting</strong>: This feature enables reference counting in the <strong>Objective C Garbage Collector</strong>
</li>
<li id="e-vrgd">
<strong>Include Unit Tests</strong>: If it is selected, XCode will also create a separate project target to unit-test our app; this is not part of this book</li>
</ul>
<p id="e-gbBw">Save the new project. I will strongly recommend checking the <strong>Create a local git repository for this project</strong> option in order to keep track of changes. Once the project is under version control, we can also decide to use GitHub as the remote host to store our source code.</p>
<img data-width="800" data-height="543" src="wClePNy7.jpg"/>
<h1 id="e-oKw4">Importing the Facebook SDK into the application project</h1>
<p id="e-VWpG">I have already mentioned that we are going to import Facebook SDK using the installation package. The installation package will create a <strong>FacebookSDK</strong> folder within the <strong>Documents</strong> folder. Within the folder, locate the <strong>FacebookSDK</strong>. <strong>framework</strong> folder, and drag it onto your XCode project. Drop the framework within the <strong>Frameworks</strong> section of <strong>Project Navigator</strong> as shown in the following screenshot:</p>
<img data-width="800" data-height="544" src="FVL4ym2c.jpg"/><p id="e-vMp2">When prompted to import the settings, check the <strong>Copy items into destination group's folder (if needed)</strong> option.</p>
<p id="e-tjjR">Locate the <strong>Facebook SDK</strong> folder within your project directory using <strong>Finder</strong>. You can find the folder location from XCode by right-clicking on and navigating to <strong>SDK</strong> | <strong>Show in Finder</strong>. Within the <strong>Framework</strong> folder, locate the <strong>Resources</strong> folder and open it.</p>
<img data-width="500" data-height="246" src="lafR3Ykx.jpg"/><p id="e-PTpc">As we did for the Facebook Framework, drag-and-drop <code>FacebookSDKResources.bundle</code> within the <strong>Frameworks</strong> section of XCode. It will be used for creating UI objects in the iOS project. Still check whether the <strong>Copy items into destination group's folder (if needed)</strong> option needs to be enabled.</p>
<p id="e-zMtv">The SDK relies on three frameworks already included in XCode, such as AdSupport, Accounts, and Social. We need to add these frameworks to our project. In the target's <strong>Summary</strong> pane, locate <strong>Linked Frameworks and Libraries</strong>, click on <strong>+</strong>, and the list of all available frameworks will show up.</p>
<img data-width="433" data-height="500" src="ZDd9Fpd0.jpg"/><p id="e-qdWN">Select the frameworks mentioned in the previous image, and click on <strong>Add</strong>. The three packages will be added into our root project folder. In order to keep our project in order, we can move the three frameworks into the <strong>Frameworks</strong> section of our project.</p>
<img data-width="384" data-height="500" src="InFQw62Z.jpg"/><p id="e-XAWI">The next step is to add <strong>SQLite</strong> and the <strong>-ObjC linker Flags</strong>. In the <strong>Summary</strong> pane, select the project in <strong>Targets</strong>, locate <strong>Build Settings</strong> to your right, and check <strong>All</strong> and <strong>Levels</strong> in the bar underneath. Now in the search bar, type <code>other link</code>. The result should look as the following screenshot.</p>
<img data-width="800" data-height="110" src="WcZfnpJ2.jpg"/><p id="e-DBKa">Then select the <strong>Other Linker Flags</strong> entry, and double-click on the third column, the one after <strong>Resolved</strong>. Add the following flags to it:</p>
<ul id="e-bAAo">
<li id="e-wgWP"><strong>-ObjC</strong></li>
<li id="e-qZ5l">
<strong>-lsqlite3.0</strong><img data-width="750" data-height="128" src="XEdZOfh1.jpg"/>
</li>
</ul>
<p id="e-EBJx">Now we need to set the Facebook framework to use the Facebook App ID we created previously. In <strong>Navigator</strong>, locate the <code>Application-Info.plist</code> file; you can find it in the project <strong>Navigator</strong> | <strong>Application Folder</strong> | <strong>Supporting Files</strong>.</p>
<p id="e-pGuh">Create a new entry with the <code>FacebookAppID</code> key; the value needs to be a string type with your Facebook App ID previously created.</p>
<p id="e-NBt2">We also need to ensure that the application receives the callback URL of the web-based authentication flow (<code>OAuth</code>). To achieve this, create a new URL type array entry with a single item. Add a new <strong>URL Schemes</strong> array to the array item, and the first entry will be a string key with the Facebook App ID prefixed with <code>fb</code>. You can see the result in the following screenshot:</p>
<img data-width="500" data-height="117" src="eEI49Aek.jpg"/><p id="e-LW9D">The new social iOS project is now ready. In the next chapter, we will start coding new features.</p>

<h1 id="e-BF4F">Getting familiar with Storyboard to build a better interface</h1>
<p id="e-W3Gf"><strong>Storyboard</strong> is a great tool to build an iPhone/iPad user interaction and interface. Using it, we are able to sketch the entire dataflow and interaction before we start developing our code.</p>
<p id="e-uXpm">Storyboard was introduced with the iOS 5 release. Previously, the only available format to build the UI was the XIB format. The XIB format provides the ability to build one interface at a time, whereas Storyboard allows you to work across multiple interfaces and connect them using actions (<strong>segues</strong>).</p>
<p id="e-XwEb">Storyboard is not meant to completely replace the XIB format; in fact, they can coexist easily.</p>
<p id="e-fzo1">The following screenshot shows an example of Storyboard in action. Each of the elements in Storyboard is called a <strong>scene</strong>. Scenes are connected through segues. Two scenes are embedded within a navigation controller, the object to the extreme left in the screenshot; the two main controllers are connected to each other using two segues associated with a button in each scene.</p>
<img data-width="800" data-height="363" src="Akrk34eB.jpg"/><p id="e-UcLb">For this project, we will be taking advantage of the Storyboard features to build the application interface.</p>

<h1 id="e-sMdh">Summary</h1>
<p id="e-ftTo">In this chapter, we learned how to create a new Facebook App ID that will be used to identify our social application on the social platform. We also created a new iPhone project, and downloaded the Facebook iOS SDK. In order to use the Facebook iOS SDK, we had to import several frameworks in our social project, and set some specific linker flags that will be used by the Facebook SDK. It's important also to remember that we need to use the Facebook App ID previously created in our application; otherwise, Facebook SDK will throw an exception because the Facebook App ID is used to communicate with the social platform.</p>
<p id="e-ad1f">An important tool that will also be used to build our social project is Storyboard. Storyboard will help users to create our GUI and define user interaction.</p>
</body></html>