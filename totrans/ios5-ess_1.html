<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;What's New in iOS5"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. What's New in iOS5</h1></div></div></div><p>Welcome to the exciting world of iOS 5, the latest release of Apple's mobile operating system, which is packed with some great new features and improvements to the way things are done. The release of the iPhone 4, back in 2010, took the world by storm. Developers around the world have been embracing the new features, such as incorporating AirPlay features within their applications, making use of the retina display to provide crisp and high-definition graphics within their applications and games, as well as the accelerometer and gyroscope.<a id="id0" class="indexterm"/>
</p><p>When Apple hosted their annual World Wide Developer Conference in June 2011, they introduced more than 200 new features, as well as an updated SDK that features over 1,500 new development APIs. This opened up a lot of ideas for many new applications and the way we do things currently, to be done differently. Some of the great new feature highlights are the ability to support the way in which notification messages are handled by using the new<span class="strong"><strong> Notification Center</strong></span>, messaging has been greatly improved by using the new<span class="strong"><strong> iMessage</strong></span> messaging application, and finally, the ability to organize and purchase all of your newspaper and magazine subscriptions using the new<span class="strong"><strong> Newsstand</strong></span> application.<a id="id1" class="indexterm"/>
</p><p>In this chapter, you will gain an insight into some of the fantastic new features and enhancements that have been incorporated into the latest iOS 5 release. We will also look at how to go about downloading and installing the Xcode developer tools and<span class="strong"><strong> Software Development Kit</strong></span> (<span class="strong"><strong>SDK</strong></span>).<a id="id2" class="indexterm"/>
</p><p>In this chapter, we will:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Get introduced to some of the new features that come with iOS 5</li><li class="listitem" style="list-style-type: disc">Download and install the Xcode development tools</li><li class="listitem" style="list-style-type: disc">Create a simple application using the features of the Newsstand framework</li><li class="listitem" style="list-style-type: disc">Create a simple application that sends an e-mail, using the<code class="literal"> MessageUI</code> framework</li><li class="listitem" style="list-style-type: disc">Remove the Xcode development tools</li></ul></div><p>We have a exciting journey ahead of us, so let's get started.</p><div class="section" title="What's new in iOS 5"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec01"/>What's new in iOS 5</h1></div></div></div><p>Since the release of Apples iOS operating system back in June 2007, they have incorporated many new features and improvements within each release build of its operating system. In iOS 4, we saw this came with over 1,500 new APIs, as well as some high quality enhancements and improvements.<a id="id3" class="indexterm"/>
</p><p>In iOS 5, Apple has introduced over 200 new features and improvements, as well as 1,500 new APIs and updates to its SDK, to include new features relating to Core Image, Twitter integration, and the Newsstand Kit.</p><p>Needless to say, the Xcode 4 development environment has also undergone some improvements to allow your applications to be compiled with the new LLVM compiler 3.0 that supports<span class="strong"><strong> Automatic Reference Counting</strong></span> (<span class="strong"><strong>ARC</strong></span>). Hence, you rarely need to retain or release your objects, as ARC does most of the work for you. In some cases, you will still need to use retain/release. Storyboard support has also been integrated into Interface Builder, which allows you to design multiple-view workflows for each of your views.<a id="id4" class="indexterm"/>
</p><p>Lastly, debugging OpenGL ES projects are a lot easier, as these have been integrated into the Xcode debugging interface.</p><p>In the following sections, we will focus in detail on some of the new features that come with iOS 5.</p><div class="section" title="Reminders"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec01"/>Reminders</h2></div></div></div><p>A neat new feature that comes as part of this release is the<span class="strong"><strong> Reminders App</strong></span>. A good way to think of reminders would be to think of them as to-do lists. Reminders can prove to be a life-saver, as they give you the flexibility to organize your day-to-day tasks, and come complete with the ability to add due dates and locations.<a id="id5" class="indexterm"/>
</p><p>When you set up your reminders to use locations, you can specify to be reminded on a specific day or location, as well as being reminded either when you arrive or leave the location. They make use of your mobile phone's GPS, similar to how your car's navigation system works, and are designed to alert you as soon as you approach the designated area. Let's take an example, say for instance, you wanted to buy a new printer and some additional ink, you set up your reminder to automatically send you an alert as soon as you pulled into your local stores, parking lot.</p><p>Finally, another thing to mention about reminders: since these have been integrated into iOS 5, they have been designed to work well with other applications. For example, Apple iCal, Microsoft Outlook, and iCloud. This has been done to ensure that any changes you make will automatically update on all of your devices and calendars.</p><p>The following screenshots shows a list of items that have been added to a to-do list, and then shows how you can configure and specify when to be reminded. You can choose to be reminded when you leave or arrive at a particular location. The final screenshot shows the reminder pop-up when the specified time has been reached. Additional items can be added to the list by selecting the<span class="strong"><strong> +</strong></span> plus sign, as highlighted by a rectangle.<a id="id6" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_01.jpg" alt="Reminders"/></div></div><div class="section" title="Notification Center"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec02"/>Notification Center</h2></div></div></div><p>Notifications play an important role in an iPhone user's everyday life. Notifications come in the form of pop-ups to inform you that a new e-mail has arrived, of new SMS text messages, of friend requests from social networking sites, notifications when your phone credit falls below a certain amount, and much more. With the Notification Center application, you don't need to worry about locating that e-mail, SMS text message, or friend request. It has been made simple enough for you to keep track of all of these forms of notifications in one convenient location.<a id="id7" class="indexterm"/>
</p><p>The Notification Center can be accessed by simply placing your finger anywhere at the top of the screen and swiping in a downward motion. There are many different notifications to choose from when you are in this view. For instance, you can choose to see the current weather forecast, your stock shares, calendar entries of upcoming appointments, and so on. As new notifications come through, they will be added and will appear at the top of the list for easier access, without interrupting what you're doing.</p><p>You can also act upon Notifications through the<span class="strong"><strong> lock</strong></span> screen on your iOS device; these appear categorized within a table view, so that you can act on them quickly by simply sliding the panel to unlock and take you to the relevant application. For example, if you receive a message, this will open up the<span class="strong"><strong> iMessage</strong></span> application. As you can see, the Notification Center provides you with a much better way of staying on top of your life's activities.<a id="id8" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_02.jpg" alt="Notification Center"/></div></div><div class="section" title="Newsstand"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec03"/>Newsstand</h2></div></div></div><p>The<span class="strong"><strong> Newsstand</strong></span> is a central place, where iOS users can access their subscribed magazines and newspapers. Unlike iBooks, where book publishers supply<code class="literal"> .epub</code> files or similar documents, Newsstand publishers will have to create an iOS application (or adapt their existing application). Think of it like a cross between the shelf seen in the iBooks application and applications folders on the home screen.<a id="id9" class="indexterm"/>
</p><p>To make use of the new features, publishers must invoke the newly added<span class="strong"><strong> Newsstand Kit framework</strong></span>. There are some simple settings that need to be configured to allow your application to recognize that it is a magazine or a newspaper, so that it can be placed within the Newsstand application, instead of running as a standalone application.<a id="id10" class="indexterm"/>
</p><p>In the coming section, we will proceed to download and install the iOS 5 SDK. If you have already installed this, you can skip this section altogether and proceed to the next section.</p></div></div></div>
<div class="section" title="Getting and installing the iOS 5 SDK"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec02"/>Getting and installing the iOS 5 SDK</h1></div></div></div><p>Before we can start to build our iOS applications, you must first sign up as a registered iOS Developer at<a class="ulink" href="http://developer.apple.com/programs/ios/"> http://developer.apple.com/programs/ios/</a>. The registration process is free and provides you with access to the iOS SDK and other developer resources that are really useful for getting you started.<a id="id11" class="indexterm"/>
</p><p>Once you have signed up, you can then download the iOS SDK, as shown in the following screenshot. It may be worthwhile making sure that your machine satisfies the following system requirements prior to your downloading the iOS SDK:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Only Intel Macs are supported, so if you have another processor type (such as the older G4 or G5 Macs), you're out of luck</li><li class="listitem" style="list-style-type: disc">You have updated your system with the latest Mac OS X software updates for either OS X Lion or Snow Leopard</li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note02"/>Note</h3><p>If you want to develop applications for the iPad and iPod Touch, you can still use the iOS SDK, as they use the same<span class="strong"><strong> operating system</strong></span> (OS) as the iPhone does. This SDK allows you to create universal applications that will work with both the iPhone and iPad running on iOS 4 and above.</p></div><div class="mediaobject"><img src="graphics/2267EXP_01_03.jpg" alt="Getting and installing the iOS 5 SDK"/></div><p>Once you have downloaded the SDK, you can proceed with installing it. You will be required to accept a few licensing agreements. You will then be presented with a screen to specify the destination folder in which to install the SDK:<a id="id12" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_04.jpg" alt="Getting and installing the iOS 5 SDK"/></div><p>If you select the default settings during the installation phase, the various tools (explained in detail later) will be installed in the <code class="literal">/Developer/Applications</code> folder.<a id="id13" class="indexterm"/>
</p><p>The installation process takes you through the custom installation option screens. You probably would have seen similar screens to this if you have installed other Mac software. The following screenshot shows what you will see here:</p><div class="mediaobject"><img src="graphics/2267EXP_01_05.jpg" alt="Getting and installing the iOS 5 SDK"/></div><p>These options give you a little more control over the installation process. For example, you are able to specify the folder location to install Xcode, as well as settings for a variety of other options.<a id="id14" class="indexterm"/>
</p><p>The iOS 5 SDK comes as part of the Xcode Developer Tools download, which you'll find at<a class="ulink" href="http://https://developer.apple.com/devcenter/ios/index.action"> https://developer.apple.com/devcenter/ios/index.action</a>.</p><p>The SDK consists of the following components:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Xcode:</strong></span> This is the main<span class="strong"><strong> Integrated Development Environment</strong></span> (<span class="strong"><strong>IDE</strong></span>) that enables you to manage, edit, and debug your projects<a id="id15" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Dashcode:</strong></span> This enables you to develop web-based iOS applications and Dashboard widgets</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>iOS Simulator:</strong></span> This is a Cocoa-based application that provides a software simulator to simulate an iOS device on your Mac OS X<a id="id16" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Instruments:</strong></span> These are the analysis tools that help you optimize your applications and monitor for memory leaks in real-time<a id="id17" class="indexterm"/></li></ul></div><p>The following screenshot displays a list of the various tools that are installed as part of the default settings, during the installation phase. These are installed in the<code class="literal"> /Developer/Applications</code> folder:</p><div class="mediaobject"><img src="graphics/2267EXP_01_06.jpg" alt="Getting and installing the iOS 5 SDK"/></div><p>In the next section, we will look at how we can use the power of the Newsstand Kit framework to enable developers to develop an application that will add items to our Newsstand, rather than this being launched as a separate iOS application.<a id="id18" class="indexterm"/>
</p></div>
<div class="section" title="Creating the MyMagazineArticle application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec03"/>Creating the MyMagazineArticle application</h1></div></div></div><p>Before we can proceed with creating our<code class="literal"> MyMagazineArticle</code> application, we must first launch the Xcode4.2 development environment. Double-click on the Xcode icon located in the<code class="literal"> /Developer/Applications</code> folder.<a id="id19" class="indexterm"/>
</p><p>Alternatively, you can use Spotlight to search for this: simply type<code class="literal"> Xcode</code> into the search box and Xcode should be displayed in the list at the top. When Xcode is launched, you should see the<span class="strong"><strong> Welcome to Xcode</strong></span> screen, as shown in the following screenshot.</p><p>It may be worth docking the Xcode icon to your Mac OS X launch bar for easy access, as we will be using it a lot throughout this book.<a id="id20" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_07.jpg" alt="Creating the MyMagazineArticle application"/></div><p>It is very simple to create the MyMagazineArticle application in Xcode. Just follow the steps listed here:<a id="id21" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Select<span class="strong"><strong> Create a new Xcode project</strong></span>, then select<span class="strong"><strong> iOS Application</strong></span> on the left.</li><li class="listitem"> Select the<span class="strong"><strong> Page-Based Application</strong></span> template from the<span class="strong"><strong> Project</strong></span> template dialog-box.<div class="mediaobject"><img src="graphics/2267EXP_01_08.jpg" alt="Creating the MyMagazineArticle application"/></div></li><li class="listitem"> Then, click on the<span class="strong"><strong> Next</strong></span> button to proceed to the next step in the wizard. This will allow you to enter in the<span class="strong"><strong> Product Name</strong></span> and your<span class="strong"><strong> Company Identifier</strong></span>.<a id="id22" class="indexterm"/><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note03"/>Note</h3><p>The company identifier for your App needs to be unique. Apple recommends that you use the reverse-domain style (for example,<code class="literal"> com.DomainName.AppName)</code>.</p></div><div class="mediaobject"><img src="graphics/2267EXP_01_09.jpg" alt="Creating the MyMagazineArticle application"/></div></li><li class="listitem"> Enter in<code class="literal"> MyMagazineArticle</code> for the<span class="strong"><strong> Product Name</strong></span>, and enter a unique identifier in the<span class="strong"><strong> Company Identifier</strong></span> field, ensuring that you have selected<span class="strong"><strong> iPhone</strong></span> from the<span class="strong"><strong> Device Family</strong></span> drop-down box.<a id="id23" class="indexterm"/></li><li class="listitem"> Then, click on the<span class="strong"><strong> Next</strong></span> button to proceed to the final step in the wizard.</li><li class="listitem"> Choose the folder location where you would like to save your project.<div class="mediaobject"><img src="graphics/2267EXP_01_10.jpg" alt="Creating the MyMagazineArticle application"/></div></li><li class="listitem"> Then, click on the<span class="strong"><strong> Create</strong></span> button to save your project at the location specified.<a id="id24" class="indexterm"/></li></ol></div><p>Once your project has been created, you will be presented with the Xcode development interface, along with the project files that the template created for you, within the<span class="strong"><strong> Project Navigator</strong></span> window.</p><div class="section" title="Adding the Newsstand Kit framework to our project"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec04"/>Adding the Newsstand Kit framework to our project</h2></div></div></div><p>Now that we have created our project, we need to add the Newsstand Kit framework to our project. This is an important framework that provides us with the ability to make our application appear within the Newsstand application, provided in the latest iOS 5release.<a id="id25" class="indexterm"/>
</p><p>To add this framework and any other frameworks to your project, select the<span class="strong"><strong> Project Navigator Group</strong></span>, and then follow the simple steps outlined here:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Select your project within the<span class="strong"><strong> Project Navigator Window</strong></span>.</li><li class="listitem"> Select your project target from under the<span class="strong"><strong> TARGETS</strong></span> group.</li><li class="listitem"> Select the<span class="strong"><strong> Build Phases</strong></span> tab.</li><li class="listitem"> Expand the<span class="strong"><strong> Link Binary with Libraries</strong></span> disclosure triangle.</li><li class="listitem"> Scroll down within the list and select the<span class="strong"><strong> NewsstandKit.framework</strong></span>, and click on the<span class="strong"><strong> Add</strong></span> button to add the item to our project. You can use the<span class="strong"><strong> +</strong></span> button to add the library that you want to add; to remove a framework, highlight it from the group, and then click on the button. There is also the ability to search for the framework, if you can't find it in the list shown.</li><li class="listitem"> If you are still confused on how to go about adding the<code class="literal"> NewsstandKit.framework</code>, you can refer to the following screenshot, which highlights what parts you need to select (highlighted by a rectangle).<a id="id26" class="indexterm"/></li></ol></div><div class="mediaobject"><img src="graphics/2267EXP_01_11.jpg" alt="Adding the Newsstand Kit framework to our project"/></div><div class="section" title="Adding properties to our application"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Adding properties to our application</h3></div></div></div><p>Now that we have added the<code class="literal"> NewsstandKit.framework</code> to our project, our next step is to start adding some properties to make our application show up within the Newsstand application.<a id="id27" class="indexterm"/>
</p><p>Unlike other iOS applications, Newsstand applications that you create will only appear in the Newsstand application, and not displayed within the user's home screen like iOS applications currently do. Instead of displaying the application icon, the application will display a cover and some additional information provided by Newsstand. When a user taps the cover of your application, it will automatically launch your application and present them with information pertaining to that article.</p><p>Creating an application that uses the Newsstand Kit requires communication between your application and the servers that host your content. Your servers are responsible for notifying the application when any new updates or releases are available, typically using a<span class="strong"><strong> push</strong></span> notification.<a id="id28" class="indexterm"/>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note04"/>Note</h3><p>For more information on push notifications, refer to the Apple Developer Connection documentation which can be found at the following address:<a class="ulink" href="http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html"> http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html</a>.</p></div><p>In order to make our application act like a Newsstand application, and make it appear on the shelf, three steps are required. These are:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Add the Newsstand Kit framework to your project.</li><li class="listitem"> Include the<span class="strong"><strong> UINewsstandApp</strong></span> key within your<span class="strong"><strong> MyMagazineArticle-Info.plist</strong></span> file to indicate that it supports Newsstand. This can be achieved by clicking on the<span class="strong"><strong> MyMagazineArticle-Info.plist</strong></span> file, then right-clicking within the center of the panel, and selecting<span class="strong"><strong> Add Row</strong></span> from the pop-up list, as shown in the following screenshot:<div class="mediaobject"><img src="graphics/2267EXP_01_12.jpg" alt="Adding properties to our application"/></div></li><li class="listitem"> Include the<span class="strong"><strong> Required background modes</strong></span> key with the newsstand-content value, for the application to be launched in the background so that it can start downloading the latest content. This can be achieved by clicking on the MyMagazineArticle-Info.plist file, and then right-clicking within the center of the panel and selecting Add Row from the pop-up list.<a id="id29" class="indexterm"/></li></ol></div><p>The following screenshot shows the options that are needed to be assigned to, make it appear within the Newsstand folder:</p><div class="mediaobject"><img src="graphics/2267EXP_01_13.jpg" alt="Adding properties to our application"/></div><p>If your Newsstand application includes the required background modes key within the<span class="strong"><strong> newsstand-content</strong></span> value, located within the<span class="strong"><strong> MyMagazineArticle-Info.plist</strong></span> file, your newsstand application will be launched in the background, so that it can start downloading the latest version of your magazine or newspaper article.<a id="id30" class="indexterm"/>
</p><p>The download process is self-managed, and is taken care of by the system, which then notifies your application when the content has been fully downloaded and made available.</p><p>In order to make our application appear within the newsstand folder, you will need to create an array entry<span class="strong"><strong> CFBundleIconFiles</strong></span> under the<span class="strong"><strong> CFBundlePrimaryIcons</strong></span> to include your standard application icon.</p><p>You then need to create your<span class="strong"><strong> UINewsstandIcon</strong></span> with a<span class="strong"><strong> CFBundle</strong></span> in there as well, as this is where you set your newspaper or magazine covers and specify the binding type, which gives your application an icon shape and its binding edge.</p><p>In the following screenshot, it shows how we can customize our application to have it show as a newspaper, by changing the<span class="strong"><strong> UINewsstandBindingType</strong></span> property to<span class="strong"><strong> UINewsstandBindingTypeNewspaper:</strong></span>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_14.jpg" alt="Adding properties to our application"/></div><p>Once you have created these entries within your application's<code class="literal"> .plist</code> file, by making sure that you have added the actual icon<code class="literal"> .png</code> files to your project, you will be ready to compile, build, and run your application. The following screenshot will be displayed, which shows that our application has been successfully added as part of the<span class="strong"><strong> Newsstand</strong></span> folder application, with its icon changed to display as a newspaper article.<a id="id31" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_15.jpg" alt="Adding properties to our application"/></div><p>When adding icons to your project, it is important to take note of the size. This is dependent whether or not you are developing this for an iPhone or iPad. In the following table, this lists the name, size, and platform that the icons pertain to.<a id="id32" class="indexterm"/>
</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p><span class="strong"><strong>Image name</strong></span></p>
</th><th style="text-align: left" valign="bottom">
<p><span class="strong"><strong>Size (pixels)</strong></span></p>
</th><th style="text-align: left" valign="bottom">
<p><span class="strong"><strong>iOS Platform</strong></span></p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Icon.png</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">57x57</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Universal application icon</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Icon-72.png</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">72x72</code>
</p>
</td><td style="text-align: left" valign="top">
<p>iPad</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Icon-64.png</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">64x64</code>
</p>
</td><td style="text-align: left" valign="top">
<p>iPad</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Icon-32.png</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">32x32</code>
</p>
</td><td style="text-align: left" valign="top">
<p>iPad/iPhone</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Icon-24.png</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">24x24</code>
</p>
</td><td style="text-align: left" valign="top">
<p>iPad/iPhone</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Icon-16.png</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">16x16</code>
</p>
</td><td style="text-align: left" valign="top">
<p>iPad/iPhone</p>
</td></tr></tbody></table></div><p>If we change the<span class="strong"><strong> UINewsstandBindingType</strong></span> property back to<span class="strong"><strong> UINewsstandBindingTypeMagazine</strong></span>, it will display our icon as a magazine cover.<a id="id33" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_16.jpg" alt="Adding properties to our application"/></div><p>Once you have modified this entry within your application's<code class="literal"> .plist</code> file, you will be ready to compile, build, and run this application. The following screenshot will be displayed, which shows that our application has successfully been added as part of the<span class="strong"><strong> Newsstand</strong></span> folder application, with its icon changed to display as a<span class="strong"><strong> Magazine</strong></span> cover.</p><div class="mediaobject"><img src="graphics/2267EXP_01_17.jpg" alt="Adding properties to our application"/></div><p>So there you have it. As you can see, by adding some simple properties to your applications<code class="literal"> .plist</code> file, you can customize your application to either have its icon displayed as a magazine cover, or as a newspaper article.<a id="id34" class="indexterm"/>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note05"/>Note</h3><p>One important thing to mention is that Newsstand applications must include the<span class="strong"><strong> UINewsstandApp</strong></span> key within your project's<span class="strong"><strong> .plist</strong></span> file, to indicate that it supports the Newsstand feature. If this is not done, your application will appear as a normal application that will be displayed on the user's home screen.</p></div></div></div></div>
<div class="section" title="Creating the MyEmailApp application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec04"/>Creating the MyEmailApp application</h1></div></div></div><p>Sending an e-mail from within your application ensures that you don't need to re-launch your application after sending the e-mail. This can be a good thing, as it makes your application user-friendly, enabling the user to keep using your application without having to re-launch it.<a id="id35" class="indexterm"/>
</p><p>In this section, we will be using the<code class="literal"> MessageUI</code> framework to create a simple application that will allow in-app sending of e-mails, without the user having to exit your application and then re-launch it.</p><p>We will also look at how we can automatically fill the<span class="strong"><strong> To, Subject</strong></span>, and<span class="strong"><strong> Message Body</strong></span> fields, before finally seeing how we can access and customize the navigation bar color to suit your application. To see how we can achieve this, just follow these simple steps:<a id="id36" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Launch Xcode from the<code class="literal"> /Developer/Applications</code> folder.</li><li class="listitem"> Then, choose the<span class="strong"><strong> Single View Application</strong></span> template from the project template dialog box:<div class="mediaobject"><img src="graphics/2267EXP_01_18.jpg" alt="Creating the MyEmailApp application"/></div></li><li class="listitem"> Click on the<span class="strong"><strong> Next</strong></span> button to proceed to the next step within the wizard.<a id="id37" class="indexterm"/></li><li class="listitem"> Provide a name for your project by filling in the<span class="strong"><strong> Product Name</strong></span> and<span class="strong"><strong> Company Identifier</strong></span> fields.<a id="id38" class="indexterm"/><div class="mediaobject"><img src="graphics/2267EXP_01_19.jpg" alt="Creating the MyEmailApp application"/></div></li><li class="listitem"> Enter in<code class="literal"> MyEmailApp</code> for the<span class="strong"><strong> Product Name</strong></span>.</li><li class="listitem"> Ensure that<span class="strong"><strong> iPhone</strong></span> is selected from the<span class="strong"><strong> Device Family</strong></span> drop-down box.<a id="id39" class="indexterm"/></li><li class="listitem"> Click on<span class="strong"><strong> Next</strong></span>, to proceed to the final step in the wizard.</li><li class="listitem"> Choose the folder location where you would like to save your project.</li><li class="listitem"> Then, click on the<span class="strong"><strong> Create</strong></span> button to save your project at the location specified.<a id="id40" class="indexterm"/></li></ol></div><div class="section" title="Adding the MessageUI framework to our project"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec05"/>Adding the MessageUI framework to our project</h2></div></div></div><p>Now that we have created our project, we need to add the<code class="literal"> MessageUI</code> Framework to our project. This is an important framework that will provide us with the ability to send an e-mail message.<a id="id41" class="indexterm"/>
</p><p>To add this framework, follow these simple steps:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Select your project within the<span class="strong"><strong> Project Navigator Window</strong></span>.</li><li class="listitem"> Then, select your project target from under the<span class="strong"><strong> TARGETS</strong></span> group.</li><li class="listitem"> Select the<span class="strong"><strong> Build Phases</strong></span> tab.<a id="id42" class="indexterm"/></li><li class="listitem"> Expand the<span class="strong"><strong> Link Libraries</strong></span> with<span class="strong"><strong> Libraries</strong></span> disclosure triangle.</li><li class="listitem"> Then, scroll down within the list and select the<code class="literal"> MessageUI.framework</code>, and click on the<span class="strong"><strong> Add</strong></span> button to add the item to our project. You can use the<span class="strong"><strong> +</strong></span> button to add the library that you want to add; to remove a framework, highlight it from the group, and then click on the button.<a id="id43" class="indexterm"/></li><li class="listitem"> If you are still confused as to how to go about adding the<span class="strong"><strong> MessageUI.framework</strong></span>, you can refer to the following image, which highlights what parts you need to select (highlighted by a rectangle).<a id="id44" class="indexterm"/></li></ol></div><div class="mediaobject"><img src="graphics/2267EXP_01_20.jpg" alt="Adding the MessageUI framework to our project"/></div></div><div class="section" title="Building TheMyEmailApp user interface"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec06"/>Building TheMyEmailApp user interface</h2></div></div></div><p>In this section, we will start to build our user interface for the<code class="literal"> MyEmailApp</code>. We will need to include the header file information for the<code class="literal"> MessageUI</code> framework, which we added in the previous section.<a id="id45" class="indexterm"/>
</p><p>This exposes all of the function methods and parameter calls. To see how this can be achieved, follow these simple steps:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Now that we have added the required framework, our next step is to import the framework header file into our<code class="literal"> MyEmailAppViewController.h</code> header file as follows:<a id="id46" class="indexterm"/><div class="informalexample"><pre class="programlisting">#import &lt;MessageUI/MessageUI.h&gt;
</pre></div></li><li class="listitem"> Next, under the resources folder, open the<code class="literal"> MyEmailAppViewController.xib</code> file, then drag a<code class="literal"> UIButton</code> control from the<span class="strong"><strong> Object Library</strong></span>, and set the buttons caption to display<code class="literal"> Send Email</code> through its text property, or you can double-click on the button and type in the<code class="literal"> Send Email</code> text.<p>We need to create the method action event that will execute when this button has been pressed.
</p></li><li class="listitem"> In the<code class="literal"> MyEmailAppViewController.m</code> implementation file, add the following code:<div class="informalexample"><pre class="programlisting">- (IBAction)composeEmail{
MFMailComposeViewController *controller = [[MFMailComposeViewControlleralloc] init];
[selfpresentModalViewController:controlleranimated:YES];
controller.mailComposeDelegate = self [controller release];
}
</pre></div></li><li class="listitem">This creates an MFMailComposeViewController object, and sets ourself up as the delegate, so that we can receive the callbacks.</li><li class="listitem"> We need to dismiss our e-mail window view once we have sent our message. For this to happen, we need to implement a delegate handler to our mail compose view controller<code class="literal"> MFMailComposeViewControllerDelegate</code>. This sets up your applications view-controller as the delegate, so that it can be notified when the user either sends or cancels the e-mail.</li><li class="listitem"> Open the<code class="literal"> MyEmailAppViewController.h</code> interface file, and then add the following code:<div class="informalexample"><pre class="programlisting">#import &lt;UIKit/UIKit.h&gt;
#import &lt;MessageUI/MessageUI.h&gt;
@interface MyEmailAppViewController: UIViewController&lt;MFMailComposeViewControllerDelegate&gt; {}
@end
</pre></div></li><li class="listitem"> We now need to implement a callback method, which will be used to dismiss the view controller when the user sends or cancels the e-mail.</li><li class="listitem"> Open the<code class="literal"> MyEmailAppViewController.m</code> implementation file, and add the following code:<a id="id47" class="indexterm"/><div class="informalexample"><pre class="programlisting">- (void)mailComposeController:(MFMailComposeViewController*) controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
[selfdismissModalViewControllerAnimated:YES];
}
</pre></div></li></ol></div><div class="section" title="Auto-populating fields"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>Auto-populating fields</h3></div></div></div><p>So far, we have added enough program logic to allow our application to function correctly, but this doesn't allow for certain fields to be auto-populated, so these will need to be manually filled in. To do this, we first need to add some additional code.<a id="id48" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem"> Open the<code class="literal"> MyEmailAppViewController.m</code> implementation file, and add the following code to the<code class="literal"> composeEmail</code> method, as shown below:<div class="informalexample"><pre class="programlisting">[controllersetSubject:@"Program Bug"];
[controllersetToRecipients:[NSArrayarrayWithObject: [NSStringstringWithString:@"YourEmail@companyname.com"]]];
[controllersetMessageBody:@"An application error has occurred within module XcodeFunctions.m" isHTML:NO];
[controller.navigationBarsetTintColor:[UIColorredColor]];
[selfpresentModalViewController:controlleranimated:YES];
controller.mailComposeDelegate = self;
[controller release];
</pre></div></li><li class="listitem"> There is also the option to change the color of the navigation bar that is located at the top of the e-mail window. To achieve this, we need to use the<code class="literal"> setTintColor</code> method of the<code class="literal"> navigationBar</code> control. You will need to add this to the<code class="literal"> composeEmail</code> method, just before the line that reads<code class="literal"> [self presentModalViewController:controller:</code><div class="informalexample"><pre class="programlisting">[controller.navigationBarsetTintColor:[UIColorredColor]];
<span class="strong"><strong>[selfpresentModalViewController:controlleranimated:YES];</strong></span>
</pre></div></li></ol></div><p>In this section, we have successfully added the code to pre-fill our e-mail composition sheet with default item details, and looked at how we can set the color of our navigation bar. In the next section, we will take a look at how to build and run our application.</p></div></div></div>
<div class="section" title="Building and running the MyEmailApp application"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec05"/>Building and running the MyEmailApp application</h1></div></div></div><p>Once you have implemented the previous code, it is time to compile, build, and run your application to see how it all works. The following screenshot below displays the<code class="literal"> MyEmailApp</code> application running within the iOS simulator, with all of the fields populated:<a id="id49" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_21.jpg" alt="Building and running the MyEmailApp application"/></div><p>So, there you have it. You have successfully built an application using the<code class="literal"> MessageUI</code> framework that sends a new e-mail message. When you press the<span class="strong"><strong> Send Email</strong></span> button, it displays the compose new e-mail view controller window directly within your application, with all fields pre-populated, and the navigation bar is colored appropriately. The action sheet that is shown in the last screenshot gets displayed when you press the<span class="strong"><strong> Cancel</strong></span> button.<a id="id50" class="indexterm"/>
</p><div class="section" title="iMessage"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec07"/>iMessage</h2></div></div></div><p>
<span class="strong"><strong>iMessage</strong></span> is an integrated add-on to the existing Messages application that we have come to know and love. iMessage allows you to easily send text messages, photos, videos, or other content to an individual or a group of people on other iOS devices running iOS 5 over Wi-Fi or 3G.<a id="id51" class="indexterm"/>
</p><p>These messages are also automatically pushed to all of your other iOS devices, thus making it easier to maintain one conversation across all devices. When sending messages using iMessage, your phone automatically checks to see if the phone number of the person that you are sending is running iOS 5, if this is the case, it will send them an iMessage message rather than a standard SMS text.</p><p>Up to this point, your address book will be updated and a small blue chat bubble will appear next to the name of the contact to indicate that they can receive iMessages. If the person is not running iOS 5, then the address book will be updated with a green chat bubble. In the following screenshot, it displays the iMessages feature, and displays the conversations in small blue bubbles to indicate that both people are running iOS 5:<a id="id52" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_22.jpg" alt="iMessage"/></div><p>The bullet points below summarize some of the advantages of using iMessage, as opposed to the standard messaging component.<a id="id53" class="indexterm"/>
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">iMessage brings the Message application for all iOS devices running iOS 5 the iPhone, iPod touch, and iPad. Messages are pushed to all your devices, so if you start a conversion on your iPhone, you are able to continue and pick it upon any iOS device<a id="id54" class="indexterm"/></li><li class="listitem" style="list-style-type: disc">iMessage service is built into the Message application, so users can send unlimited text, photos, videos, contacts, locations, and group messages for free, to their family and friends who have an iOS device. It is worth mentioning that, while this feature doesn't incur any text messaging fees, it does use your bandwidth allocation, and depending on how much you use, it might cost you more.</li><li class="listitem" style="list-style-type: disc">iMessage easily allows you to find out if someone is responding to your message in the form of an ellipsis, as seen on applications such as an instant messenger.<a id="id55" class="indexterm"/></li><li class="listitem" style="list-style-type: disc">iMessage optionally allows you to track your messages with delivery receipt and read receipt.</li><li class="listitem" style="list-style-type: disc">You can send messages over Wi-Fi as well as over 3G.</li><li class="listitem" style="list-style-type: disc">Messages that are sent through iMessage are encrypted over the air.</li></ul></div></div><div class="section" title="iPhone Camera"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>iPhone Camera</h2></div></div></div><p>Another component within the iPhone that has been updated in this latest release, is the<span class="strong"><strong> iPhone Camera</strong></span>. Since the camera is the most widely used application to capture those special and unexpected moments, Apple has made this more accessible.<a id="id56" class="indexterm"/>
</p><p>This application can now be accessed directly from your iPhone's lock screen, and features several improvements, such as:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Grid lines:</strong></span> These are very helpful for determining if the camera is leveled to ensure that you take a perfect shot every time, by using things in the horizon or edges of buildings.<a id="id57" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pinch-to-zoom gestures:</strong></span> This feature enables you to manually zoom in and out, directly, within the camera application, rather than using the slider at the bottom of the screen.<a id="id58" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Single-tap focus:</strong></span> This feature allows you to lock the focus and the exposure to one area of the screen. Simply tap your finger anywhere on the screen.<a id="id59" class="indexterm"/></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Exposure locks to compose a picture on the fly:</strong></span> This feature allows you to lock the focus and the exposure of your image, by simply placing and holding your finger on the screen.</li></ul></div><p>There have also been new photo editing improvements added to the<span class="strong"><strong> Photos</strong></span> application, to enable you to manipulate your images, to either crop or rotate your image, or provide photo enhancements, such as removal of red-eye from your photos, all done directly within the Photos application</p><p>If you are using iCloud (we will be covering this in<a class="link" href="ch02.html" title="Chapter 2. Using iCloud and the Storage APIs"> Chapter 2</a>,<span class="emphasis"><em> Using iCloud and the Storage APIs)</em></span>, it is also possible to automatically load new photos onto your computer's desktop, should you prefer to edit them there using your preferred photo-editing tool.<a id="id60" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_23.jpg" alt="iPhone Camera"/></div></div><div class="section" title="PC Free"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>PC Free</h2></div></div></div><p>With the new<span class="strong"><strong> PC Free</strong></span> feature that comes with iOS 5, users can set up and activate their devices without the need of a computer. Any new iOS software updates are deployed directly to your iOS devices, as well as any purchases made on your device from iTunes or the App Store. These are transferred securely over Wi-Fi using<span class="strong"><strong> Secure Sockets Layer</strong></span> (<span class="strong"><strong>SSL</strong></span>) back to your iTunes library.<a id="id61" class="indexterm"/>
</p><p>Once you have properly set up and configured iCloud, your backups and restores will automatically be done for you, and stored within the Cloud, making it easier for you to deploy any iOS updates to each of your iOS devices or computers that use the same Apple ID.<a id="id62" class="indexterm"/>
</p><p>The following screenshot displays options on how to set up your phone, restore your device from and iCloud backup, or from your iTunes library. Once this is done, you will receive a final<span class="strong"><strong> Thank You</strong></span> screen, where you can start using your iOS device.<a id="id63" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_24.jpg" alt="PC Free"/></div></div><div class="section" title="Wi-Fi sync"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>Wi-Fi sync</h2></div></div></div><p>In iOS 5, Apple has provided an easier way for its users to wirelessly synchronize all of your iOS devices over a shared Wi-Fi connection directly back to your Mac or PC, without the need of having it connected directly to your computer, as you would have done previously.<a id="id64" class="indexterm"/>
</p><p>What happens is that, each time you decide to charge your iOS device, it will automatically search for any new purchases or items that have been added to your device and then automatically synchronize this back to your iTunes library.</p><p>In this manner, you will always have a back up copy of all of your movies, precious home videos, and photo albums in one place, which can be accessed anytime you want them.</p></div><div class="section" title="Multitasking gestures"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>Multitasking gestures</h2></div></div></div><p>Unfortunately, these never made it in the iOS 4 release; they were only included in the iOS 4 SDK for developers, but ended-up working really well on the iPad. In iOS 5, this has been greatly improved and includes a number of added features to make accessing content a lot easier. The engineers at Apple have made it simpler, and a lot easier to navigate around in as little moves as possible. They have also added shortcut menus to help you get around even quicker on the iPad.<a id="id65" class="indexterm"/>
</p><p>These are achieved by using four or five fingers, and swiping upwards to reveal the multitasking bar and using the pinch motion to return to the<span class="strong"><strong> Home</strong></span> screen. There has even been support added relating to swiping left or right, to switch between your applications.<a id="id66" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/2267EXP_01_25.jpg" alt="Multitasking gestures"/></div></div><div class="section" title="Removing the Xcode developer tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>Removing the Xcode developer tools</h2></div></div></div><p>Should you ever wish to uninstall Xcode (in the event that something went wrong during installation, or you just want to uninstall the Xcode developer tools), it is a very straightforward process. Open an instance of the terminal window and run the<code class="literal"> uninstall-devtools</code> script:<a id="id67" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">sudo &lt;Xcode&gt;/Library/uninstall-devtools --mode=all
</pre></div><p>
<code class="literal">&lt;Xcode&gt;</code> is the directory where the tools are installed. For typical installations, the full path is<code class="literal"> /Developer/Library/uninstall-devtools</code>.</p><p>
<code class="literal">&lt;sudo&gt;</code> is a system admin command that will require you to enter in the administrator password before proceeding.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note06"/>Note</h3><p>Before you proceed, make sure this is what you really intend to do, as once it's gone, it's permanently deleted. In any event, you can always choose to reinstall the Xcode developer tools. It is worth checking that the<code class="literal"> /Developer/Library/Xcode/</code> folder has also been removed. If not, just move it to the trash.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec06"/>Summary</h1></div></div></div><p>In this chapter, we learned about the new features of iOS 5, and how to go about downloading and installing the iOS 5 SDK, as well as familiarizing ourselves with some of the Xcode development tools.</p><p>We then moved on, and looked at how to build a simple Newsstand application, using the Newsstand Kit framework, to show how we can add newspapers and magazines to the Newsstand application folder. Next, we looked at how we can use the<code class="literal"> MessageUI</code> framework to build a simple e-mail application, and learned how we can customize the navigation bar UI to set the background color.</p><p>To end the chapter, we looked at the steps involved on how to uninstall the Xcode developer tools, using the command line.</p><p>In the next chapter, we will learn what<span class="strong"><strong> iCloud</strong></span> exactly is that we keep hearing so much about it, and we will focus on the storage APIs that comes as part of iCloud. We will take a look at how to create an iCloud application to store documents and key-value data within the Cloud, how to perform a backup to the Cloud, and then finally look at how we can handle file-version conflicts.</p></div></body></html>