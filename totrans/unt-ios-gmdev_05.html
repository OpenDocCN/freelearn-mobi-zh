<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Scripting: Whose line is it anyway?"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Scripting: Whose line is it anyway?</h1></div></div></div><div class="blockquote"><blockquote class="blockquote"><p>We have finally moved past the basics. As you may have observed, the tasks and even the assets we've been using have been getting more and more complicated along the way. Now that we have hit scripting, the rubber will meet the road. Scripting is how you breathe life into your creation and turn it into an actual game. Prior to this, the best we could do is move around a lifeless world by scripting the camera — now we get to play.<a id="id199" class="indexterm"/>
</p></blockquote></div><p>In this chapter we shall learn:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How Unity handles scripting</li><li class="listitem" style="list-style-type: disc">The specific scripting limitations and interfaces for iOS</li><li class="listitem" style="list-style-type: disc">The basic iOS scripts that Unity provides</li><li class="listitem" style="list-style-type: disc">Integrate with a web service to save our data</li></ul></div><p>Scripting is possibly the most important thing that you need to know to interact with Unity effectively. While you can optimize your assets, build your scene efficiently, and take advantage of every feature on the device — if you don't get scripting right it won't do anything useful.<a id="id200" class="indexterm"/>
</p><p>So let's get on with it...</p><div class="section" title="Important preliminary points"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec01"/>Important preliminary points</h1></div></div></div><p>This chapter assumes that you have a background in programming and that you know something about JavaScript, C#, or Boo. As these are the scripting languages supported by Unity, some understanding of their design is necessary.<a id="id202" class="indexterm"/>
</p></div></div>
<div class="section" title="Unity Scripting Primer"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec02"/>Unity Scripting Primer</h1></div></div></div><p>Unity has arguably the most flexible and complete scripting system of any engine at any price. Providing the ability for developers to use the languages Boo, Javascript, and C# Unity covers the bases when it comes to supporting a variety of developers. While there is no specific support for Java within the system, C# is a mature language that provides a near peer to the language. In addition, through the .Net/Mono framework it is possible to roll your own support for Java, F#, or any other language that is supported by the .Net platform including any new language that you create, though it's probably easier to just build a<span class="strong"><strong> domain specific language (DSL)</strong></span>  using Boo. The most important part is that each language is a first class citizen in Unity. With few exceptions, anything you want to do in Unity can be accomplished regardless of which language you choose.<a id="id203" class="indexterm"/>
</p><p>The Unity Scripting system is at the heart of getting things done within Unity customizing the Unity editor and interacting with the runtime platform. Through scripts you have access to everything that you would want to change (and I do mean everything) including being able to extend the Unity compiler through the<span class="strong"><strong> Abstract Syntax Trees (AST)</strong></span> themselves.<a id="id204" class="indexterm"/>
</p><div class="section" title="Oh no! You've got Mono!"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec01"/>Oh no! You've got Mono!</h2></div></div></div><p>When Microsoft originally created the .Net platform it created it principally for the Windows platform. However, Microsoft published the language specification to ECMA and shortly thereafter, the Mono open source project was created which brought the .Net platform to other platforms including OSX and Linux. At its core the Unity scripting system is built upon the .Net runtime and the benefits afforded it through the Mono project. While it was certainly possible that the Unity scripting system could have been based upon Java or some other system, .Net provided (out-of-the-box) a rich system for assemblies that made cross language functionality trivial to implement.<a id="id205" class="indexterm"/>
</p></div><div class="section" title="Common Language Infrastructure"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec02"/>Common Language Infrastructure</h2></div></div></div><p>Multiple scripting languages are possible in Unity due to the<span class="strong"><strong> Common Language Infrastructure (Cli)</strong></span> of .Net. The purpose of the Common Language Infrastructure (CLI), is to provide a language-neutral platform for application development and execution, including functions for exception handling, garbage collection, security, and interoperability. By implementing the core aspects of the .NET Framework within the scope of the CLI, this functionality will not be tied to a single language, but will be available across the many languages supported by the framework. Microsoft's implementation of the CLI is called the<span class="strong"><strong> Common Language Runtime</strong></span>, or<span class="strong"><strong> CLR</strong></span>.<a id="id206" class="indexterm"/>
</p></div><div class="section" title="Boo- more than a ghost in mario"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec03"/>Boo- more than a ghost in mario</h2></div></div></div><p>Boo is an object-oriented, statically typed programming language that seeks to make use of the Common Language Infrastructure's support for Unicode, internationalization and web-applications, while using a Python-inspired syntax and a special focus on language and compiler extensibility. Some features of note include type inference, generators, multimethods, optional duck typing, macros, true closures, currying, and first-class functions. Boo has been actively developed since 2003.<a id="id207" class="indexterm"/>
</p><p>Boo is free software released under an MIT/BSD style license. It is compatible with both the Microsoft .NET and Mono frameworks.<a id="id208" class="indexterm"/>
</p><div class="section" title="What does a Boo script look like?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec01"/>What does a Boo script look like?</h3></div></div></div><div class="informalexample"><pre class="programlisting">import UnityEngine 
import System.Collections 
class example(MonoBehaviour): 
def Start(): 
curTransform as Transform 
curTransform = gameObject.GetComponent[of Transform]() 
curTransform = gameObject.transform 
def Update(): 
other as ScriptName = gameObject.GetComponent[of ScriptName]() 
other.DoSomething() 
other.someVariable = 5
<a id="id209" class="indexterm"/>
</pre></div></div><div class="section" title="Should I choose Boo?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec02"/>Should I choose Boo?</h3></div></div></div><p>If you're looking for a new and novel way to write code that doesn't have a lot of ceremony and doesn't waste your time with lots of curly braces, Boo is definitely a language you want to look into. While the idea of using whitespace as a delimiter is considered offensive by some, there is an elegance that comes from writing code in Boo. If you've written in traditional languages it's not difficult to understand and there are some functions of Unity (not the iOS version) which can only be accessed using Boo.<a id="id210" class="indexterm"/>
</p><p>While Boo is a fine language, there are two reasons why you shouldn't choose it.</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">First, there are very few examples written in Boo and very little written about it in the community at large.</li><li class="listitem">More importantly, Boo is not currently supported on the iOS platform as of this writing.</li></ol></div><p>With that, our discussion of Boo within the context of iOS comes to an abrupt end.<a id="id211" class="indexterm"/>
</p></div></div><div class="section" title="UnityScript/JavaScript — Relevant beyond the web"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec04"/>UnityScript/JavaScript — Relevant beyond the web</h2></div></div></div><p>JavaScript is an implementation of the ECMAScript language standard and is typically used to enable programmatic access to computational objects within a host environment. It can be characterized as a prototype-based object-oriented scripting language that is dynamic, weakly typed, and has first-class functions. It is also considered a functional programming language like Scheme and OCaml because it has closures and supports higher-order functions.<a id="id212" class="indexterm"/>
</p><p>While UnityScript is, on the surface, syntactically similar to Javascript, the implementation used by Unity is not entirely ECMAScript compliant.</p><div class="section" title="What does a JavaScript script look like?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec03"/>What does a JavaScript script look like?</h3></div></div></div><div class="informalexample"><pre class="programlisting">function Start () { 
var curTransform : Transform; 
curTransform = gameObject.GetComponent(Transform); 
// This is equivalent to: 
curTransform = gameObject.transform;
}
function Update () { 
// To access public variables and functions 
// in another script attached to the same game object. 
// (ScriptName is the name of the javascript file) 
var other : ScriptName = gameObject.GetComponent(ScriptName); 
// Call the function DoSomething on the script other.DoSomething (); // set another variable in the other script instance other.someVariable = 5; }
function Update () { // To access public variables and functions // in another script 
attached to the same game object. // (ScriptName is the name of the javascript file) var other : ScriptName = gameObject.GetComponent(ScriptName); // Call the function DoSomething on the script other.DoSomething (); 
// set another variable in the other script instance 
other.someVariable = 5; }
</pre></div></div><div class="section" title="Should I choose JavaScript?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec04"/>Should I choose JavaScript?</h3></div></div></div><p>JavaScript is the defacto language in use by the Unity community and is prevalent across the web. Many people refer to Javascript as Unityscript. There are many people in the world who use it on a daily basis and if you're coming from a Flash background this is as close to ActionScript porting ease as you're likely to get (until someone ports ActionScript over to Unity). One of the strong benefits of JavaScript is that there isn't a lot of ceremony involved with getting things done and in most cases you will find that you write a lot less boilerplate to build an application with JavaScript. There is no need to create class structures and there isn't much need in getting directly to the attributes of objects and using them.<a id="id214" class="indexterm"/>
</p><p>JavaScript is available on all platforms including the iPhone, but as you begin building more complex examples with larger teams you may find that having more structure and typing will result in fewer defects. In addition, while JavaScript is the community choice today most authors and developers are moving over to C# as their primary development language.<a id="id215" class="indexterm"/>
</p></div></div><div class="section" title="C# The revenge of Microsoft"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec05"/>C# The revenge of Microsoft<a id="id216" class="indexterm"/>
</h2></div></div></div><p>C# (pronounced "see sharp")[6] is a multi-paradigm programming language encompassing imperative, declarative, functional, generic, object-oriented (class-based), and component-oriented programming disciplines. It was developed by Microsoft within the .NET initiative and later approved as a standard by Ecma (ECMA-334) and ISO (ISO/IEC 23270). C# is one of the programming languages designed for the Common Language Infrastructure.</p><p>C# is intended to be a simple, modern, general-purpose, object-oriented programming language.</p><div class="section" title="What does a C# script look like?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec05"/>What does a C# script look like?</h3></div></div></div><div class="informalexample"><pre class="programlisting">using UnityEngine; using System.Collections; public class example : MonoBehaviour { void Start() { Transform curTransform; curTransform = gameObject.GetComponent&lt;Transform&gt;(); curTransform = gameObject.transform;
C# scriptstructure}
void Update() { ScriptName other = gameObject.GetComponent&lt;ScriptName&gt;(); other.DoSomething(); other.someVariable = 5;
}
}
</pre></div></div><div class="section" title="Should I choose C#?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec06"/>Should I choose C#?</h3></div></div></div><p>As a language, C# will be familiar to anyone who has done any modern object-oriented programming in the past 10 years. The syntax is very familiar for Java developers and reasonably easy for C++ developers to pick up.<a id="id218" class="indexterm"/>
</p><p>There are a number of libraries that are available on the Internet that can be dropped right into your project to do things like XML parsing, connecting to social networks, loading pages, etc. In addition there is a critical mass of C# developers in the Unity community such that there is an increased emphasis on doing projects and documentation on C# going forward.</p><p>Finally, many of those that have published large numbers of iOS projects have stated that C# is an easier path to take for writing applications. If you're coming from a professional game development background or want a clean object-oriented Java/Pascal syntax this is your best choice.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note08"/>Note</h3><p>For the rest of the book, we will be using C# as the language for scripts.</p></div></div></div></div>
<div class="section" title="Time for action &#x2014; Creating and organizing scripts"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec03"/>Time for action —  Creating and organizing scripts</h1></div></div></div><p>Creating a new C# script in Unity is similar to our approach for creating scripts using JavaScript or any of the other scripting languages.<a id="id219" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Select<span class="strong"><strong> Assets | Create | C Sharp Script</strong></span>. This will create a new C# script in the project:<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note09"/>Note</h3><p>While the Boo Script does appear as an option, it is not usable for Unity iOS projects.</p></div><div class="mediaobject"><img src="graphics/978-1-84969-040-9_5_1.jpg" alt="Time for action — Creating and organizing scripts"/></div></li><li class="listitem">Once you have created the new script it will appear in the<span class="strong"><strong> Project</strong></span> view with the name<code class="literal"> NewBehaviorScript</code> with some stubs for the methods<code class="literal"> Start()</code> and<code class="literal"> Update():</code><a id="id220" class="indexterm"/><div class="mediaobject"><img src="graphics/978-1-84969-040-9_5_2.jpg" alt="Time for action — Creating and organizing scripts"/></div></li><li class="listitem">Create a folder named<code class="literal"> Scripts</code> and then drag the newly created script into the Scripts directory.<a id="id221" class="indexterm"/></li></ol></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec06"/>What just happened?</h2></div></div></div><p>A best practice for scripts is to put them in a folder in the project. What you call this folder doesn't really matter, as it is more for your own organizational purposes than it is for Unity. You may choose to put UI centric scripts in one directory and AI scripts in another. However you manage the scripts is up to you, but you will create a large number of scripts in the course of creating the average game so you want to organize them so that they aren't all sitting at the root of your game project.</p></div><div class="section" title="Attaching scripts to Game Objects"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec07"/>Attaching scripts to Game Objects</h2></div></div></div><p>As mentioned earlier, you can add a script to a<span class="strong"><strong> GameObject</strong></span> by simply dragging the script onto the game object itself. What is important here, is that the<span class="strong"><strong> GameObject</strong></span> is the owner of the script, if that game object is not participating in the scene — the methods in the script will never be called. For scripts that are global in nature, a common practice is to create an Empty Game Object in the scene and attach the global scripts to it. While it is common for people to associate these global scripts with the camera, you want to avoid this as many complex games will have many cameras — complicating the activation of the scripts as well as determining which object in the scene owns them.<a id="id222" class="indexterm"/>
</p></div><div class="section" title="Exposing variables in the Unity editor"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec08"/>Exposing variables in the Unity editor</h2></div></div></div><p>Quite often you will find yourself in the position of having written a script providing some values for variables within your script. As you test your game you will find that you will want to expose some of these variables to the Unity Editor so that you can modify them in the editor without having to edit and recompile the scripts themselves.<a id="id223" class="indexterm"/>
</p><p>This is particularly important since many times you will want to provide a default value within the script which you can override due to some specific game use case. Rather than coming up with some complex mechanism to do this, simply declare the variable as a public variable and it will show up in the Unity editor.<a id="id224" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class SomeScript : MonoBehaviour {
public int testExpose = 5;
public String testStringExpose = "Test";
// Update is called once per frame
void Update () {
}
}
<a id="id225" class="indexterm"/>
</pre></div></div><div class="section" title="Key scripting methods"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec09"/>Key scripting methods</h2></div></div></div><p>Scripting inside Unity consists of attaching custom script objects called behaviors to game objects. Different functions inside the script objects are called on certain events. The most used ones being the following:<a id="id226" class="indexterm"/>
</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Purpose</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Awake</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called when the script object is being loaded but after all Game Objects have been initialized</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Start</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Called only one time when the object this script is attached to is initially used in the scene</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Update</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This function is called before rendering a frame. This is where most game behavior code goes, except physics code.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">FixedUpdate</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This function is called once every physics time step. This is the place to do physics-based game behavior. Unlike Update, this method is not called every time, but at a specific interval.</p>
<p>Use this for things that should be frame rate independent.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">LateUpdate</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This function is called after Update has been called. This is useful if you want to execute some functionality after all of the other objects in the scene have been updated.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p><code class="literal"> "Other Methods</code>"</p>
</td><td style="text-align: left" valign="top">
<p>Code outside functions is run when the object is loaded. This can be used to initialize the state of the script.</p>
</td></tr></tbody></table></div></div></div>
<div class="section" title="iPhoneSettings"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec04"/>iPhoneSettings</h1></div></div></div><p>While the iOS SDK promises to give you a single platform to all of the iOS devices, there are going to be times that you want to do device specific things. For example, you may want to load Retina Display compatible assets if you are on the iPhone4 or you may want to provide another networking interface other than Game Center if you find yourself on a 1G, 2G, or base 3G device. Further, you may want to determine where this device is located in the world. All of this is accomplished by gaining access to iPhoneSettings.<a id="id227" class="indexterm"/>
</p><div class="section" title="Screen orientation"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec10"/>Screen orientation</h2></div></div></div><p>iPhoneSettings provides an interface for getting the current screen orientation from the device and it will allow you to specify the orientation you want your content to be displayed in.<a id="id228" class="indexterm"/>
</p><p>If you want to only operate in one mode, you can attach a script to the camera and in its<code class="literal"> Start()</code> method define the orientation you want.<a id="id229" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">// Start in landscape mode function Start () { iPhoneSettings.screenOrientation = iPhoneScreenOrientation.Landscape;
}
</pre></div><p>Later in the chapter we will build an example that illustrates how to move between the multiple modes that the device is capable of, as the user changes the device orientation.</p></div><div class="section" title="Sleep mode"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec11"/>Sleep mode</h2></div></div></div><p>By default, any iOS portable device will follow power management settings and darken its screen after a certain amount of time to prevent draining the battery if the user isn't using it. The iOS power management system will reset its internal timers every time a touch event happens on the device. However, for games this may become a problem since you may not require the user to maintain contact with the device or through a Bluetooth keyboard during gameplay. Driving games and flight simulators come immediately to mind as two genres of games that may be impacted by this.<a id="id230" class="indexterm"/>
</p><p>In these cases it makes sense to put the device in a state where the device will not be allowed to go to sleep. This can be accomplished by setting the<code class="literal"> screenCanDarken</code> attribute of<code class="literal"> iPhoneSettings</code> to<code class="literal"> false</code>. It is important to review that statement again the device will not be allowed to go to sleep EVER. As long as your application is running, it will block the device from entering a sleep state. Consequently, it is your responsibility to make sure that if you leave the states of your game where users aren't touching the device that you flip the<code class="literal"> screenCanDarken</code> attibute to<code class="literal"> true</code> so that iOS can darken the screen.<a id="id231" class="indexterm"/>
</p></div><div class="section" title="Device information"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec12"/>Device information</h2></div></div></div><p>Unity provides several useful fields to the developer that gives information about the device and its unique identification.<a id="id232" class="indexterm"/>
</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Field</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>name</p>
</td><td style="text-align: left" valign="top">
<p>This is the name that the user has given to the device. Useful if you want to allow users to find one another across the wan or locally</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>model</p>
</td><td style="text-align: left" valign="top">
<p>Provides a simple text model name</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>systemName</p>
</td><td style="text-align: left" valign="top">
<p>This is simply the name of the OS running on the device</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>generation</p>
</td><td style="text-align: left" valign="top">
<p>This will tell you what generation this device belongs to. The values are enumerated in iPhoneGeneration and provide a reliable way to determine exactly what type of device the user has</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>uniqueIdentifier</p>
</td><td style="text-align: left" valign="top">
<p>This is the globally unique identifier that identifies this device specifically</p>
</td></tr></tbody></table></div></div></div>
<div class="section" title="Time for action &#x2014; Identifying the type of iOS"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec05"/>Time for action —  Identifying the type of iOS</h1></div></div></div><p>Let's suppose that we have designed our application such that it is optimized for high definition (HD) on iPhone 4 and the iPad.<a id="id233" class="indexterm"/>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip10"/>Tip</h3><p>If the player runs this version of our application we want to tell them that the application would perform better if they used the standard definition (SD) version of the game.</p></div><p>We will do this by detecting the device and either starting the application immediately or showing them a notice screen and then starting the application.</p><p>Let's walk through the steps that would be necessary for this application functionality.</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Identify the type of device we are using.</li><li class="listitem">Based on conditional logic display a splash screen.</li><li class="listitem">Dismiss the splash screen.</li></ol></div><div class="section" title="Identify our device information"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl4sec01"/>Identify our device information</h2></div></div></div><p>What we need to do is:<a id="id234" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Add some device detection to the Start() script that we're attaching to our Camera.</li><li class="listitem">What we're looking for are iOS generations that are older than the iPhone4 and the iPad. We can check for this by looking at the value of<code class="literal"> iPhoneSettings.generation</code>.</li><li class="listitem">We choose<code class="literal"> iPhoneSettings.generation</code> as opposed to<code class="literal"> iPhoneSettings.model</code> because generation will return us an enumerated type and since all of the models are represented — this will be less error prone than trying to compare strings.<div class="informalexample"><pre class="programlisting">void Start () {
if ( ! ( ( iPhoneSettings.generation == iPhoneGeneration.iPhone4 ) ||
( iPhoneSettings.generation == iPhoneGeneration.iPad1Gen ) ) )
{
// this device isn't an iPad or an iPhone4 and therefore // doesn't support HD.
}
}
<a id="id235" class="indexterm"/>
</pre></div></li></ol></div><div class="section" title="Conditionally show splash screen"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl4sec02"/>Conditionally show splash screen</h3></div></div></div><p>Now that we know whether or not we have an HD "qualified" device, we have the ability to conditionally display a screen. In this example we have built out our SD display as a level all on its own. This was done so that we could compartmentalize this body of work by itself without it cluttering up the rest of the game.<a id="id236" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">To load this SD purchase suggestion level we make a call to the<code class="literal"> Application.LoadLevel()</code> method and provide it the name of the level that we want to load in this case it will be our<code class="literal"> "SDAdvisory</code>" level.<a id="id237" class="indexterm"/><div class="informalexample"><pre class="programlisting">Application.LoadLevel("SDAdvisory");
</pre></div></li></ol></div><p>Unity will now load this level and display it on the screen. Since we've set its background to just be an image for displaying this information we need to provide a mechanism for this advisory to be dismissed.</p></div><div class="section" title="Dismiss the splash screen"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl4sec03"/>Dismiss the splash screen</h3></div></div></div><p>In our new scene we want to be able to acknowledge that we've seen the advisory that we should be using the SD version of the game, yet proceed to playing the game in high definition. If you aren't building universal binaries of your game (which you should!), you should check for the appropriateness of the version of the content the user is attempting to run.<a id="id238" class="indexterm"/>
</p><p>To dismiss this level and load our regular game we need to display a button on the screen that the user can click on and we need to listen for activity on this button. UnityGUI provides a clean mechanism to do this quickly, albeit not with the best performance. Ways to improve this performance will be covered in the Performance and Optimization sections later in the book.</p><div class="informalexample"><pre class="programlisting">using System.Collections;
using UnityEngine;
public class SplashGUI : MonoBehaviour{
void OnGUI(){
if ( GUI.Button(new Rect(10,10,100,25), "I Understand") ) {
Application.LoadLevel("MainGame");
}
}
}
</pre></div><p>Now when the user clicks on the button with the<code class="literal"> I Understand</code> label, the application will load the level<code class="literal"> MainGame</code> and our game will continue on without any further interruption.<a id="id239" class="indexterm"/>
</p></div></div></div>
<div class="section" title="What just happened?"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl2sec14"/>What just happened?</h1></div></div></div><p>When Unity started the player on our iOS device, it populated the<code class="literal"> iPhoneSettings</code> class with the settings for our device. Since our script was attached to an object in the scene, our script had the ability to read these settings from the Unity player on the device. Based upon this we used a simple C# conditional if statement to determine if we were fine to start or needed to display a standard definition splash screen. We then presented a simple<code class="literal"> UnityGUI</code> script that waited for the user to press a button which launched the main game.<a id="id240" class="indexterm"/>
</p></div>
<div class="section" title="Location services"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl2sec15"/>Location services</h1></div></div></div><p>The location services provide an interface to the cell tower triangulation and GPS functions of the device. You can get the status of the services through<code class="literal"> iPhoneSettings</code>, and the location data will be available through<code class="literal"> iPhoneInput.lastLocation</code>.<a id="id241" class="indexterm"/>
</p><p>To start the service, access the<code class="literal"> StartlocationServiceUpdates()</code> method and give it the accuracy that you desire, as well as the update distance, both in meters. The update distance is the amount that the device must move before it will update the<code class="literal"> iPhoneInput.lastLocation</code>. If you are familiar with using CoreLocation, you are familiar with the location services for iOS as Unity provides a wrapper around the CoreLocation API and simply exposes the data updates through<code class="literal"> iPhoneInput.lastLocation</code>.<a id="id242" class="indexterm"/>
</p><p>It is important to note, however, that GPS satellite acquisition is not instantaneous and Unity will expose the state of CoreLocations's response in the<code class="literal"> LocationServiceStatus</code> attribute. This will return one of several LocationServiceStatus states which can be polled until you achieve a<code class="literal"> LocationServiceStatus</code>. Running in the field at which point you will have actual GPS data in<code class="literal"> iPhoneInput.lastLocation</code>.<a id="id243" class="indexterm"/>
</p></div>
<div class="section" title="Time for action &#x2014; Changing state according to player location"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec06"/>Time for action —  Changing state according to player location</h1></div></div></div><p>Location-based gaming is one area of innovation that has gone largely underutilized by the game development community. Let's suppose that we want to start a whole line of games that utilize the actual players location information to change some of the state in our game. For our purposes we will utilize the players location to determine the weather in their area, as well as the time of day so that we can have the player's game world match the world outside.<a id="id244" class="indexterm"/>
</p><p>Let's walk through the steps that would be necessary for this application's functionality:<a id="id245" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Start the location services on our device,</li><li class="listitem">Poll the device location information,</li><li class="listitem">Get the weather for this location,</li></ol></div><div class="section" title="Start the location services on our device"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl4sec04"/>Start the location services on our device</h2></div></div></div><p>As this is something that we only need to do when our application first starts, we can perform all of our operations in the<code class="literal"> Start()</code> method of our script. All we need to do is:<a id="id246" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Call the<code class="literal"> iPhoneSettings.StartLocationServiceUpdates()</code> method and Unity will start its interaction with the platform's CoreLocation services.<a id="id247" class="indexterm"/><div class="informalexample"><pre class="programlisting">//Use this for initialization
void Start () {
iPhoneSettings.StartLocationServiceUpdates();
}
</pre></div></li><li class="listitem">Now that the location services have started, we need to wait for them to be available. Location services do not activate immediately and if the GPS is being utilized, the internal systems will have to acquire satellites to triangulate the device's location. If we try to acquire information from the device before this has completed, the resulting behavior is not defined.</li><li class="listitem">In order to wait for the location services to start we need to enter a loop where we will check for the status of the location services and then enter a short wait state before checking again. We can do this by specifying an amount of time to wait that we configure in the Unity editor.</li></ol></div></div><div class="section" title="Expose variable to Unity editor"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl4sec05"/>Expose variable to Unity editor</h2></div></div></div><p>To expose a variable to the Unity editor we need to define it in such a way that it is public in our script. This will allow Unity to expose this variable to the rest of the IDE and we will be able to change the value for this variable without having to edit the script again.<a id="id248" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">In our example we want to expose the maximum amount of time we will wait before we assume that we won't get location services working.<div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class LocationBasedGaming : MonoBehaviour {
public int retries = 20;
// Use this for initialization
void Start ()
{
iPhoneSettings.StartLocationServiceUpdates();
}
// Update is called once per frame
void Update () {
}
}
</pre></div><p>This will be represented inside of the Unity Editor in the Inspector when you examine the Game Object that this script is attached to. In our example, if you take a look at the Camera object that we've attached this script to you will see the variable and whatever value it currently has. If you change this value, you will be overriding the default value that the script is providing:
<a id="id249" class="indexterm"/>
</p><div class="mediaobject"><img src="graphics/978-1-84969-040-9_5_3.jpg" alt="Expose variable to Unity editor"/></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: none">Unity provides an overridden method WaitForSeconds, which takes an amount of time to wait. In order for us to invoke this method, we must:<a id="id250" class="indexterm"/></li></ul></div></li><li class="listitem">Perform a yield operation to tell Mono that our code needs to pause while this function runs. Normally one would simply add this as a single line of code, however, C# requires that the method which performs this yield has a different return type other than<code class="literal"> void</code>. Thus, we cannot simply expose this in our<code class="literal"> Start()</code> function. However, this is easily remedied by providing a secondary function which can handle this.<a id="id251" class="indexterm"/><div class="informalexample"><pre class="programlisting">IEnumerator EnterWaitState( float time )
{
yield return new WaitForSeconds( time );
}
</pre></div></li><li class="listitem">Now we can invoke this method from inside our<code class="literal"> Start()</code> function, wait for a certain amount of time and then check to see if the location services are available.<a id="id252" class="indexterm"/><div class="informalexample"><pre class="programlisting">// Use this for initialization
void Start ()
{
iPhoneSettings.StartLocationServiceUpdates();
while( iPhoneSettings.locationServiceStatus == LocationServiceStatus.Initializing &amp;&amp; retries &gt; 0 )
{
EnterWaitState( 2.0f );
retries --;
}
}
</pre></div><p>This code will check the status of the device, wait for 2 seconds and then check again. Each time it will reduce the number of retries remaining. When this reaches zero we can safely assume that either the user has chosen to not allow location services or there is something wrong which is preventing the location services from working (like Airplane Mode).
</p></li><li class="listitem">A second method that could be accomplished is to change the signature of the<code class="literal"> Start()</code> method from one that returns<code class="literal"> void</code> to one that returns<code class="literal"> IEnumerator</code>.<div class="informalexample"><pre class="programlisting">IEnumerator Start ()
{
iPhoneSettings.StartLocationServiceUpdates();
while( iPhoneSettings.locationServiceStatus == LocationServiceStatus.Initializing &amp;&amp; retries &gt; 0 )
{
yield return new WaitForSeconds ( 2.0f );
retries --;
}
}
</pre></div><p>Either mechanism is acceptable depending on what you intend to do and the style of development you're accustomed to. Both are included here for completeness.
<a id="id253" class="indexterm"/>
</p></li></ol></div></div><div class="section" title="Poll the device location information"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl4sec06"/>Poll the device location information</h2></div></div></div><p>Now that we know that the device is giving us location data, we can simply look in the<code class="literal"> iPhoneInput.lastLocation</code> variable and extract the longitude and latitude. From these we can then integrate with a web service, which can tell us what the weather is where the device is located.<a id="id254" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">if (iPhoneSettings.locationServiceStatus == LocationServiceStatus.Failed)
{
Debug.Log("Unable to activate the location services. Device reports failure");
}
else
{
// success path for location services - get information // from Google
float latitude = iPhoneInput.lastLocation.latitude;
float longitude = iPhoneInput.lastLocation.longitude;
}
</pre></div></div><div class="section" title="Get the weather for this location"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl4sec07"/>Get the weather for this location</h2></div></div></div><p>Now that we know the latitude and longitude for the device, we can get the weather at this location so that we can use it in our game. To accomplish this we will use Google's Weather API and parse the XML we receive.<a id="id255" class="indexterm"/>
</p><div class="informalexample"><pre class="programlisting">public class GoogleWeather : MonoBehaviour {
String city;
String conditions;
String tempC;
String tempF;
String humidity;
String wind;
// Use this for initialization
void Start () {
}
// Update is called once per frame
void Update () {
}
void forLocation( float lat, float lon )
{
String postLat = "" + lat * 1000000;
String postLon = "" + lon * 1000000;
XmlDocument responseXML = new XmlDocument();
responseXML.Load("http://www.google.com/ig/api?weather=,,," + postLat + "," + postLon );
city = responseXML.SelectSingleNode("/xml_api_reply/weather/ forecast_information/city").Attributes["data"].InnerText;
conditions = responseXML.SelectSingleNode("/xml_api_reply/weather/ current_conditions/condition").Attributes["data"].InnerText;
tempC = responseXML.SelectSingleNode("/xml_api_reply/weather/ current_conditions/temp_c").Attributes["data"].InnerText;
tempF = responseXML.SelectSingleNode("/xml_api_reply/weather/ current_conditions/temp_f").Attributes["data"].InnerText;
humidity = responseXML.SelectSingleNode("/xml_api_reply/weather/ current_conditions/humidity").Attributes["data"].InnerText;
wind = responseXML.SelectSingleNode("/xml_api_reply/weather/ current_conditions/wind_condition").Attributes["data"].InnerText;
}
}
</pre></div><p>The code first starts by defining variables that will store the results of our weather query: city, conditions, tempC, tempF, humidity, and wind.</p><p>The<code class="literal"> forLocation()</code> method takes latitude and longitude and converts them into the format that Google expects (the API doesn't support the decimal version of lat/lon — just an integer representation).</p><p>Next the API requests the XmlDocument from the Google servers by compositing the URL that will be passed to Google and telling the C# to load this data. Once it has returned we simply select the<code class="literal"> current_conditions</code> for our location and we now have the weather for where our player is currently playing the game.</p></div><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec17"/>What just happened?</h2></div></div></div><p>We activated the location services on our device and polled the device to determine where our device was located. We entered a wait loop to give the location services a chance to start and provide the user an opportunity to interact with the OS and give our application permission to use the gathered data. But, for our inability to launch this application remotely we just performed the same job as<code class="literal"> FindMyiPhone</code>. Next we interfaced with a web service, which provided us the location that this lat/lon represents. With this information we accessed another web service that told us what the weather was in this location. By exposing this data to our environment script in the game we have created a game that uses real location data to function.</p></div><div class="section" title="Screen manipulation"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec18"/>Screen manipulation</h2></div></div></div><p>One of the great things about modern smart phones is that they enable the device to be operated from a horizontal or vertical orientation. Due to this, it has become expected behavior that games are able to work in whatever orientation the device is in. Fortunately, there are ways to detect the screen orientation and have Unity update our content as a result of the change in device orientation.<a id="id256" class="indexterm"/>
</p></div></div>
<div class="section" title="Time for action &#x2014; Rotating the screen"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec07"/>Time for action —  Rotating the screen</h1></div></div></div><p>One piece of functionality, that I felt an odd omission from the iOS Unity product, was that of "out of the box" rotation so that when a user flips the screen, the game flips orientation as well. Fortunately we can rectify that with a simple rotation script.<a id="id257" class="indexterm"/>
</p><p>Let's walk through the steps that would be necessary for this application functionality:</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">Identifying that the screen orientation has changed.</li><li class="listitem">Updating the player orientation.</li><li class="listitem">Let's see how it is done.</li></ol></div><div class="section" title="Identifying that the screen orientation has changed"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl4sec08"/>Identifying that the screen orientation has changed</h2></div></div></div><p>The first step in handling an orientation change is:<a id="id258" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">To actually realize that the orientation has changed.<p>There are two ways we can do this:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">We can either check when the game first starts up only, in which case we need to put our orientation detection in the<code class="literal"> Start()</code> method as it is only called once.<a id="id259" class="indexterm"/></li><li class="listitem" style="list-style-type: disc">If we want to check orientation changes as the user is playing the game then we need to check the state of the orientation on a frame-by-frame basis. We do this by putting our orientation code in the<code class="literal"> Update()</code> method.<a id="id260" class="indexterm"/></li></ul></div><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">Input.deviceOrientationXE</code> "Input.deviceOrientation method"</p>
</td><td style="text-align: left" valign="top">
<p>Returns the physical orientation of the device
</p>
</td></tr></tbody></table></div></li><li class="listitem">We will use the<code class="literal"> deviceOrientation</code> attribute of the<code class="literal"> Input</code> class to determine what the orientation of the device is. This information comes directly from the OS in real time, so as the orientation changes, we will be notified and can respond to the change without having to interrupt gameplay.<a id="id261" class="indexterm"/><div class="informalexample"><pre class="programlisting">using UnityEngine;
using System.Collections;
public class OrientationChange : MonoBehaviour {
// Use this for initialization
void Start () {
}
// Update is called once per frame
void FixedUpdate () {
if ( Input.deviceOrientation == DeviceOrientation.Portrait )
{
}
else if ( Input.deviceOrientation == DeviceOrientation.LandscapeLeft )
{
}
else if ( Input.deviceOrientation == DeviceOrientation.LandscapeRight )
{
}
else if ( Input.deviceOrientation == DeviceOrientation.PortraitUpsideDown )
{
}
}
}
</pre></div></li></ol></div><div class="section" title="Updating player orientation"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl4sec09"/>Updating player orientation</h3></div></div></div><p>Now that we know that the orientation has changed we need to update the Unity iOS player so that it displays our content with the proper orientation.<a id="id262" class="indexterm"/>
</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Method</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">iPhoneSettings.screenOrientation</code>
</p>
</td><td style="text-align: left" valign="top">
<p>Sets the logical orientation of the screen.</p>
</td></tr></tbody></table></div><div class="informalexample"><pre class="programlisting">void Update () {
if ( Input.deviceOrientation == DeviceOrientation.Portrait )
{
iPhoneSettings.screenOrientation = iPhoneScreenOrientation.Portrait;
}
else if ( Input.deviceOrientation == DeviceOrientation.LandscapeLeft )
{
iPhoneSettings.screenOrientation = iPhoneScreenOrientation.LandscapeLeft;
}
else if ( Input.deviceOrientation == DeviceOrientation.LandscapeRight )
{
iPhoneSettings.screenOrientation = iPhoneScreenOrientation.LandscapeRight;
}
else if ( Input.deviceOrientation == DeviceOrientation.PortraitUpsideDown )
{
iPhoneSettings.screenOrientation = iPhoneScreenOrientation.PortraitUpsideDown;
}
}
</pre></div><p>With<code class="literal"> iPhoneSettings.screenOrientation</code> we can now tell the Unity player to change its orientation. You can set the orientation to any one of the<code class="literal"> iPhoneScreenOrientations</code> available. It is recommended that you don't do anything that would be uncharacteristic to the way the iOS device is expected to operate as Apple may reject your application for that behavior.</p></div></div></div>
<div class="section" title="What just happened?"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl2sec20"/>What just happened?</h1></div></div></div><p>By adding a script to our camera we get an<code class="literal"> Update()</code> notification on a frame by frame basis. We can then look to see what the device orientation is and adjust our orientation accordingly. By updating the<code class="literal"> iPhoneSettings</code> attributes we can quickly flip our scene to match whatever orientation we find ourselves in.<a id="id263" class="indexterm"/>
</p><div class="section" title="iPhoneUtils"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl1sec08"/>iPhoneUtils</h2></div></div></div><p>
<code class="literal">iPhoneUtils</code> is a set of simple utilities to perform some basic functions on the iOS device. There isn't much in<code class="literal"> iPhoneUtils</code>, but it does provide functionality to determine if your application has been tampered with on the device, trigger vibration on the phone, and play movies.<a id="id264" class="indexterm"/>
</p><div class="section" title="Playing movies"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec21"/>Playing movies</h3></div></div></div><p>There are two mechanisms for playing movies within iPhoneUtils:<code class="literal"> PlayMovie</code> and<code class="literal"> PlayMovieURL. PlayMovie</code> will play content that is on the phone in the<code class="literal"> StreamingAssets</code> folder. Given that you have limited resources to move content if you want to perform over the air (OTA) distribution,<code class="literal"> PlayMovie</code> may not be of use to you.<code class="literal"> PlayMovie</code> is best suited to game cut scenes and your initial game intro movie since these will generally not be long.<a id="id265" class="indexterm"/>
</p><p>
<code class="literal">PlayMovieURL</code> is more practical for long running movies, dynamic content that you want to deliver to the user (episodic), or content that is simply too large to reasonably be distributed within your application. Remember, these are still mobile devices and they have bandwidth constraints. If you make your app large enough that it cannot be downloaded over the air, you are placing a limitation on your possible audience and hurting your customer's experience.<a id="id266" class="indexterm"/>
</p></div><div class="section" title="Is my application genuine?"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl2sec22"/>Is my application genuine?</h3></div></div></div><p>While not the end all in determining whether or not someone has stolen your application,<code class="literal"> isApplicationGenuine</code> provides a mechanism through which you can detect if the application has been tampered with. It won't catch every pirate out there, but it is a useful function. Don't depend on this function exclusively for combating piracy!<a id="id267" class="indexterm"/>
</p></div></div></div>
<div class="section" title="Time for action &#x2014; Yarr! There be pirates!"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec09"/>Time for action —  Yarr! There be pirates!</h1></div></div></div><p>Reality check people are going to steal your game. For whatever reason they do it, you probably want to do something in response. Let's suppose that we want to detect whether or not someone has pirated our application and if they have stream them an advertisement movie from the web before continuing to a demo version of our application.</p><p>Let's walk through the steps that would be necessary for this application functionality:<a id="id268" class="indexterm"/>
</p><div class="orderedlist"><ol class="orderedlist"><li class="listitem">The first step in this process is to create a demo scene.</li><li class="listitem">In this scene put all of your assets that you want to comprise this scene. In my case I'll create a simple scene that displays a simple puppy sitting by some rocks. You can control the puppy and move him around the scene.</li><li class="listitem">Now let's create a demo version of the scene. For demo purposes I'll use the same puppy, but I will just set him up in a sleep animation loop in this scene. Whenever a user enters the demo world, all the puppies that they find will be asleep.</li><li class="listitem">Based on conditional logic, display the demo scene.<div class="informalexample"><pre class="programlisting">void Start ()
{
if ( iPhoneUtils.isApplicationGenuine )
{
Application.LoadLevel("RegularGame");
}
else
{
Application.LoadLevel("DemoLevel");
}
}
</pre></div></li></ol></div><p>We can determine if our application hasn't been signed by Apple by checking the<code class="literal"> iPhoneUtils.isApplicationGenuine</code> property. It is important to note that when you're building the application on your local machine it will return<code class="literal"> false</code>. It will not return<code class="literal"> true</code> until it has been signed by Apple and is on its way to the AppStore. Therefore, you do not want to simply check to see if the application is genuine and then refuse to load if it isn't as the reviewer may determine that your app doesn't work and then reject it accordingly.<a id="id269" class="indexterm"/>
</p><div class="section" title="What just happened?"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec23"/>What just happened?</h2></div></div></div><p>When the unity player starts we check to see if this is an authentic version of our application. If Unity detects that the application has been tampered with it will send the user to an ad and a demo version of the game.<a id="id270" class="indexterm"/>
</p><p>But let's stop for a second. Pirates will STILL be able to get around this and they will be able to write a specific patch for your application. At this time there is no fool-proof mechanism for detecting or preventing piracy of any iOS application. As long as an iOS device can be jailbroken, people can get around any mechanism you put in place to prevent piracy. I put this example in here so that you will have some idea about creative ways to work with the reality of the situation, but don't expect that this alone will prevent piracy of your app.</p></div></div>
<div class="section" title="Accessing the camera"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec10"/>Accessing the camera</h1></div></div></div><p>At the time of this writing Unity iOS did not have functionality to access the camera for taking pictures or streaming video. While there is certainly a gap there, this is a functionality which is generally not used in games. However, if you do want to gain access to the camera you have two choices; write a native code plugin for the camera or license the Prime31 Etcetera plugin (<a class="ulink" href="http://www.prime31.com">http://www.prime31.com</a>).<a id="id271" class="indexterm"/>
</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec11"/>Summary</h1></div></div></div><p>In this chapter we learned about the different Unity scripting languages at a high-level and gained some insight into C# as a scripting language, which we will continue to use throughout the remainder of the book. In addition, we spent some time looking at the iPhone specific scripting interfaces and building a number of real-world examples, which utilize the functions available to you in the Unity iOS player.</p><p>With this specific iOS scripting under our belt and our demo project updated, we can continue and begin integrating with the iOS input system the keyboard, the touchscreen, and the accelerometer.</p></div></body></html>